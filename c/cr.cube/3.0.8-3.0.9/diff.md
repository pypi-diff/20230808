# Comparing `tmp/cr.cube-3.0.8.tar.gz` & `tmp/cr.cube-3.0.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/cr.cube-3.0.8.tar", last modified: Sat Sep 25 14:47:27 2021, max compression
+gzip compressed data, was "dist/cr.cube-3.0.9.tar", last modified: Fri Oct  1 09:42:14 2021, max compression
```

## Comparing `cr.cube-3.0.8.tar` & `cr.cube-3.0.9.tar`

### file list

```diff
@@ -1,493 +1,484 @@
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.854922 cr.cube-3.0.8/
--rw-r--r--   0 slobodanilic   (501) staff       (20)      143 2018-09-19 13:14:59.000000 cr.cube-3.0.8/.coveragerc
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1452 2019-04-02 07:34:13.000000 cr.cube-3.0.8/.flake8
--rw-r--r--   0 slobodanilic   (501) staff       (20)      462 2021-09-07 10:40:17.000000 cr.cube-3.0.8/.pre-commit-config.yaml
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15189 2021-09-24 15:27:19.000000 cr.cube-3.0.8/HISTORY.md
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1056 2018-10-19 10:37:40.000000 cr.cube-3.0.8/LICENSE
--rw-r--r--   0 slobodanilic   (501) staff       (20)      240 2020-12-16 09:52:20.000000 cr.cube-3.0.8/MANIFEST.in
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1230 2018-11-08 20:31:53.000000 cr.cube-3.0.8/Makefile
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5969 2021-09-25 14:47:27.855085 cr.cube-3.0.8/PKG-INFO
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4522 2021-09-25 14:46:37.000000 cr.cube-3.0.8/README.md
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.537987 cr.cube-3.0.8/docs/
--rw-r--r--   0 slobodanilic   (501) staff       (20)      615 2018-10-19 10:37:40.000000 cr.cube-3.0.8/docs/Makefile
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.541537 cr.cube-3.0.8/docs/source/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8342 2018-09-19 13:14:59.000000 cr.cube-3.0.8/docs/source/Makefile
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4746 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/conf.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6219 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/crunch_logo.png
--rw-r--r--   0 slobodanilic   (501) staff       (20)      238 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/cube.rst
--rw-r--r--   0 slobodanilic   (501) staff       (20)      391 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/cubepart.rst
--rw-r--r--   0 slobodanilic   (501) staff       (20)      189 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/dimension.rst
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2834 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/index.rst
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3894 2021-07-12 19:09:29.000000 cr.cube-3.0.8/docs/source/quickstart.rst
--rw-r--r--   0 slobodanilic   (501) staff       (20)       15 2021-06-14 11:49:37.000000 cr.cube-3.0.8/requirements-rtd.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)      535 2021-09-25 14:47:27.856756 cr.cube-3.0.8/setup.cfg
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1884 2021-09-07 10:40:17.000000 cr.cube-3.0.8/setup.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.527849 cr.cube-3.0.8/src/
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.541965 cr.cube-3.0.8/src/cr/
--rw-r--r--   0 slobodanilic   (501) staff       (20)      275 2021-09-08 17:28:53.000000 cr.cube-3.0.8/src/cr/__init__.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.576187 cr.cube-3.0.8/src/cr/cube/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    40960 2021-09-24 21:02:43.000000 cr.cube-3.0.8/src/cr/cube/.collator.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)    77824 2021-09-24 20:58:42.000000 cr.cube-3.0.8/src/cr/cube/.dimension.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16384 2019-10-16 09:35:43.000000 cr.cube-3.0.8/src/cr/cube/.matrix.py.swo
--rw-r--r--   0 slobodanilic   (501) staff       (20)       95 2021-09-25 14:46:08.000000 cr.cube-3.0.8/src/cr/cube/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    24421 2021-09-24 21:02:04.000000 cr.cube-3.0.8/src/cr/cube/collator.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    44196 2021-09-14 16:42:52.000000 cr.cube-3.0.8/src/cr/cube/cube.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    74517 2021-09-24 08:16:31.000000 cr.cube-3.0.8/src/cr/cube/cubepart.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    58580 2021-09-24 20:58:17.000000 cr.cube-3.0.8/src/cr/cube/dimension.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4974 2021-09-07 14:55:34.000000 cr.cube-3.0.8/src/cr/cube/enums.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.582813 cr.cube-3.0.8/src/cr/cube/matrix/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    77824 2021-09-24 21:03:55.000000 cr.cube-3.0.8/src/cr/cube/matrix/.assembler.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)      143 2021-01-08 11:32:11.000000 cr.cube-3.0.8/src/cr/cube/matrix/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    58027 2021-09-25 14:45:45.000000 cr.cube-3.0.8/src/cr/cube/matrix/assembler.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    55479 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/matrix/cubemeasure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)   122981 2021-09-09 07:52:56.000000 cr.cube-3.0.8/src/cr/cube/matrix/measure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11413 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/matrix/subtotals.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.583775 cr.cube-3.0.8/src/cr/cube/measures/
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2018-10-19 10:37:40.000000 cr.cube-3.0.8/src/cr/cube/measures/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6761 2021-09-14 16:30:02.000000 cr.cube-3.0.8/src/cr/cube/measures/pairwise_significance.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1232 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/min_base_size_mask.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      734 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/scalar.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5487 2021-09-07 14:55:34.000000 cr.cube-3.0.8/src/cr/cube/smoothing.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.588661 cr.cube-3.0.8/src/cr/cube/stripe/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    53248 2021-09-24 21:03:55.000000 cr.cube-3.0.8/src/cr/cube/stripe/.assembler.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2021-03-15 09:27:52.000000 cr.cube-3.0.8/src/cr/cube/stripe/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    20679 2021-09-25 14:45:45.000000 cr.cube-3.0.8/src/cr/cube/stripe/assembler.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10780 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/stripe/cubemeasure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2944 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/stripe/insertion.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    27011 2021-09-07 14:55:34.000000 cr.cube-3.0.8/src/cr/cube/stripe/measure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5187 2021-09-07 10:40:17.000000 cr.cube-3.0.8/src/cr/cube/util.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.555603 cr.cube-3.0.8/src/cr.cube.egg-info/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5969 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/PKG-INFO
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19947 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/SOURCES.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)        1 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/dependency_links.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)        3 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/namespace_packages.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)       58 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/requires.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)        3 2021-09-25 14:47:27.000000 cr.cube-3.0.8/src/cr.cube.egg-info/top_level.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)        1 2018-09-19 13:16:16.000000 cr.cube-3.0.8/src/cr.cube.egg-info/zip-safe
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.590081 cr.cube-3.0.8/tests/
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2018-11-08 20:31:53.000000 cr.cube-3.0.8/tests/__init__.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.663495 cr.cube-3.0.8/tests/expectations/
--rw-r--r--   0 slobodanilic   (501) staff       (20)      292 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/admit-x-dept-unweighted-col-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       45 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/ca-subvar-ca-cat-x-cat-date-scale-means-w2.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      369 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      362 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      259 2021-05-07 18:26:10.000000 cr.cube-3.0.8/tests/expectations/ca-subvar-x-ca-cat-hs-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      188 2021-05-07 18:26:10.000000 cr.cube-3.0.8/tests/expectations/ca-subvar-x-ca-cat-hs-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      112 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/ca-x-cat-hs-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       89 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/ca-x-mr-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2431 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-subdiff-x-cat-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2692 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-subdiff-x-cat-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      678 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      647 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      460 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-col-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      459 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-col-stddev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      461 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-col-stderr.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      459 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-column-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      125 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-columns-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      652 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      276 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1018 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-row-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      549 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-row-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      461 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-tbl-stddev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      456 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-tbl-stderr.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      583 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-zscores.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      225 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-col-idx-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      257 2021-06-08 13:19:44.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-col-props-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      284 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-date-smoothed-col-pct-w1.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       45 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-date-smoothed-scale-means-w2.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      311 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-date-wgtd-smoothed-col-idx-w4.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      306 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-date-wgtd-smoothed-col-pct-w4.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       17 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      686 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-idxs-alt.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      363 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      832 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      692 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      164 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-scale-mean-pw-idxs-alt.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      153 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-scale-mean-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      223 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-scale-means-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      182 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-scale-means-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      260 2021-06-08 13:19:44.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-population-counts-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      261 2021-06-08 13:19:44.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-population-counts.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      716 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pruning-hs-col-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      649 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pruning-hs-table-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      220 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pw-idxs-recip.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      202 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      492 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      474 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       17 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-scale-mean-pw-idxs-alt.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       17 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-scale-mean-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       73 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-ucounts-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      118 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-wgtd-pw-indices.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      369 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-wgtd-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      362 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-wgtd-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      208 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-cat-zscores-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       29 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      193 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       36 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-scale-mean-pw-idxs-alt.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       36 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-scale-mean-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      187 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      169 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/cat-x-mr-x-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1849 2019-05-01 19:58:24.000000 cr.cube-3.0.8/tests/expectations/cat_x_cat_hirotsu_chi_squared.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1907 2019-05-01 19:58:24.000000 cr.cube-3.0.8/tests/expectations/cat_x_cat_hirotsu_pvals.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2015 2019-05-01 19:58:24.000000 cr.cube-3.0.8/tests/expectations/cat_x_cat_with_hs_hirotsu_pvals.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)      533 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/col-per-moe-cat-x-cat-hs-2rows-1col.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      594 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/col-std-dev-cat-x-cat-hs-2rows-1col.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      858 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/col-std-err-cat-x-cat-hs-2rows-1col.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      163 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/datetime-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      199 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/datetime-x-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      282 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/econ-gender-x-ideology-weighted-col-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      158 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/econ-gender-x-ideology-weighted-row-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      159 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/econ-gender-x-ideology-weighted-row-std-dev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      293 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/econ-gender-x-ideology-weighted-table-prop-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      184 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      170 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      143 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      886 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      884 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-stddev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      887 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-stderr.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      886 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-column-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1068 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-columns-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      186 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      989 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      225 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      125 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-row-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      441 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-row-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      443 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-tbl-stddev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      438 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-tbl-stderr.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      920 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-zscores.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      183 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-pw-idxs-alt.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      167 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      344 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-col-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      348 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-col-std-dev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      350 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-col-std-err.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      347 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-table-moe.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      347 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-table-std-dev.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      348 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-table-std-err.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      469 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-cat-weighted-zscores.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      171 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-column-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      354 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-columns-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)       70 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-explicit-order.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      117 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-pw-idxs.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      179 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-pw-pvals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      181 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-pw-tstats.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      353 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-row-margin-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      171 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/mr-x-mr-row-proportions.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2099 2019-05-01 19:58:24.000000 cr.cube-3.0.8/tests/expectations/mr_x_cat_chi_squared_rows.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1617 2019-04-04 12:08:20.000000 cr.cube-3.0.8/tests/expectations/mr_x_cat_pairwise_pvals.txt
--rw-r--r--   0 slobodanilic   (501) staff       (20)      782 2021-06-18 08:47:41.000000 cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-hs-p-vals-col-7.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      764 2021-06-18 08:47:41.000000 cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-hs-t-stats-col-7.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      242 2021-06-18 08:47:41.000000 cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-p-vals-col-4.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      224 2021-06-18 08:47:41.000000 cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-t-stats-col-4.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      205 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/expectations/num-array-means-grouped-by-cat-date-smoothed.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      912 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/numeric-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      877 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/numeric-x-cat-date-smoothed-col-pct-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      316 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/expectations/txt-x-cat-date-smoothed-col-idx-w3.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      370 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/expectations/txt-x-cat-date-smoothed-col-pct-w3.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.798026 cr.cube-3.0.8/tests/fixtures/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16384 2021-09-24 21:07:04.000000 cr.cube-3.0.8/tests/fixtures/.econ-blame-x-ideology-row-and-col-hs.json.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2268 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/fixtures/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5412 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/admit-x-dept-unweighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4156 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/admit-x-gender-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    28264 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/age-x-accrpipe.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   200208 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/ca-as-0th.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19160 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-cat-x-ca-subvar.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    35044 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-cat-x-mr-x-ca-subvar-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8681 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/ca-food-groups-x-shape-of-pasta-with-insertions.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19629 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-items-x-ca-cat-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11277 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-single-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13114 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/ca-subdiff.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    45337 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-hs-x-mr-x-ca-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11297 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-hs-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7665 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-empties.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5342 2021-05-07 18:26:10.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    21356 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13077 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    44189 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-with-nets.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9440 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-x-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    20028 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-x-mr-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    28828 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-x-mr-sig-testing-subtotals.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    56390 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/ca-x-mr-weighted-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    18882 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5684 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/ca-x-single-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4078 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-4-x-cat-4.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4120 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/fixtures/cat-4-x-cat-5.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3528 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-date-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6590 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-date-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5294 2021-04-28 08:55:16.000000 cr.cube-3.0.8/tests/fixtures/cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4805 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-mt-x-cat-hs-mt.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3218 2021-09-25 14:45:45.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-mt.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10257 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-subdiff-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3546 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5411 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-hs-empties.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3299 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2845 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9703 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-mr-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11957 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-hs-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6779 2021-04-09 15:35:29.000000 cr.cube-3.0.8/tests/fixtures/cat-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4385 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/cat-means-and-counts.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3336 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/cat-means-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3108 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/cat-stddev.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4187 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-subtot-order.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3244 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/cat-sum.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4140 2019-05-24 07:17:06.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-all-missing-row-elements.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5546 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-date-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5077 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10806 2019-09-11 06:35:09.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-filt-complete.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11094 2019-05-16 09:44:54.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-filt.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4998 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-german-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6932 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-2rows-1col.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8581 2019-09-24 15:26:39.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-missing.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7799 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-total-bottom.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2786 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3858 2019-08-13 07:32:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-mean-subtot.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11599 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-mean-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7801 2019-05-01 19:58:24.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-weighted-ttests.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6731 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7590 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-with-empty-cols.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    23734 2019-10-10 11:16:18.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-x-cat-wgtd-no-query-weight.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    23757 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat-x-cat-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4223 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9386 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-date-hs-prune.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6713 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-datetime.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    41500 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-items-x-cats-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6099 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-logical.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17637 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-2.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11985 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-col.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14015 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-row-col.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11975 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-row.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6370 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-sentry.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8449 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-stddev.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11088 2021-05-06 07:57:25.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-subvar-means.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17913 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-unicode-sv-alias.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    56390 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-weighted-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17807 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    58111 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat-missing.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   390065 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    86932 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr-empty-cols.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    27693 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr-pruned-rows.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13780 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5551 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11119 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-num-hs-prune.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8685 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/cat-x-num-x-datetime.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4608 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16626 2019-04-04 12:08:20.000000 cr.cube-3.0.8/tests/fixtures/countries-x-shapes-of-pasta.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1551 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3897 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/datetime-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    22131 2019-05-18 20:28:48.000000 cr.cube-3.0.8/tests/fixtures/deck-with-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6438 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/direction-of-country-x-education-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5897 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-blame-with-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13003 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-col-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7515 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-row-and-col-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12633 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-row-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8380 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-gender-x-ideology-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14017 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-mean-age-blame-x-gender.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2816 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-mean-no-dims.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2814 2019-10-16 18:48:58.000000 cr.cube-3.0.8/tests/fixtures/econ-nodata-no-dims.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9402 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/econ-us-problem-x-bigger-problem.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12992 2020-03-10 15:22:18.000000 cr.cube-3.0.8/tests/fixtures/edu-fav5.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    38417 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/food-groops-x-starttime-x-nordic-countries.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9418 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/food-group-x-shape-of-pasta-2rows-insertion.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9703 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/food-group-x-shape-pasta-2rows1col-insertion.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4973 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-hs-top-bottom.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10324 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array-pets-first.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10324 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array-subvars-first.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10250 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12174 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-x-pets-hs-top-bottom.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10464 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/fruit-x-pets.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   181586 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/full-cube.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    27623 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/gender-party-race.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5397 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/gender-x-weight.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    28840 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/huffpost-actions-x-household.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15772 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/letters-x-pets-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2502 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/logical-univariate.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6828 2021-04-09 15:35:29.000000 cr.cube-3.0.8/tests/fixtures/mean-cat-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    26336 2019-05-18 20:28:48.000000 cr.cube-3.0.8/tests/fixtures/means-3d.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15642 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/means-cat-hs-x-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3696 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/means-cat-x-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15840 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/means-cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    29587 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/means-mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6471 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/missing-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16347 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/mr-1-x-mr-3.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14655 2019-05-18 20:28:48.000000 cr.cube-3.0.8/tests/fixtures/mr-mean-filt-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9695 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-mean-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9391 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6825 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/mr-stddev.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6931 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/mr-sum.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8013 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/mr-wgtd.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   133071 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-ca-cat-x-ca-subvar.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    23948 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-ca-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10696 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-2.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9275 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-both-single-element.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7657 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13091 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-hs-mt.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10229 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-mean-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11836 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16626 2019-04-04 12:08:20.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-not-so-simple-alltypes.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8542 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-profiles-stats-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11975 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-col.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14015 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-row-col.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11985 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-row.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    68229 2019-09-24 15:26:39.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-with-means.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   113193 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-x-mr-prune.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    87737 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10174 2021-02-03 10:10:26.000000 cr.cube-3.0.8/tests/fixtures/mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17303 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-2.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19003 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-index-table.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    22028 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-mean-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    20201 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-mean.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15177 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-means.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10904 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-selected-categories.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16347 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-single-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13400 2021-03-24 20:07:57.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-sum.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    86386 2019-09-23 12:58:57.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-with-pruning.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   281460 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12432 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/fixtures/mr-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15950 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-other-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    33052 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/mr-x-single-wave.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.800322 cr.cube-3.0.8/tests/fixtures/mr_insertions/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2623 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/cat-hs-top-btm.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16566 2021-09-09 07:53:02.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16303 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    24875 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/mr-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    24368 2021-06-25 08:31:32.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/scorecard.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11066 2021-06-02 09:19:21.000000 cr.cube-3.0.8/tests/fixtures/mr_insertions/univariate-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12656 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/nssat-mr-x-3vl.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    37793 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/nssat-mr-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3010 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/num-binned.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8588 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/num-x-num-empty.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1583 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/num.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3806 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/numeric-measures-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8359 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/numeric-x-cat-date.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.808460 cr.cube-3.0.8/tests/fixtures/numeric_arrays/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6291 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10964 2021-04-20 12:54:10.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10443 2021-04-20 12:54:10.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5911 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4453 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5373 2021-02-04 12:18:57.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8707 2021-06-17 09:27:51.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-no-grouping-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2738 2021-03-24 20:07:57.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-no-grouping.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8158 2021-05-07 18:26:10.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-scale-measures.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14419 2021-04-22 19:15:25.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-x-mr-weighted.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9888 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10226 2021-04-09 15:35:29.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-grouped-by-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15260 2021-04-09 15:35:29.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4546 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-grouped-by-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3354 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-no-grouping.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8442 2021-03-18 17:27:51.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5305 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4920 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2734 2021-03-24 20:07:57.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-no-grouping.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7862 2021-03-24 20:07:57.000000 cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2409 2019-10-16 18:48:58.000000 cr.cube-3.0.8/tests/fixtures/om-sgp8334215-vn-2019-sep-19-strand.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9735 2019-10-16 18:48:58.000000 cr.cube-3.0.8/tests/fixtures/om-sgp8334215-vn-2019-sep-19.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.831189 cr.cube-3.0.8/tests/fixtures/overlaps/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    26028 2021-03-24 08:04:13.000000 cr.cube-3.0.8/tests/fixtures/overlaps/ca-sub-x-ca-cat-x-mr-sub-x-mr-sel.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16405 2021-04-20 12:54:10.000000 cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-gender-x-all-pets-owned.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    40957 2021-03-24 08:04:13.000000 cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-realistic-example.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13581 2021-03-24 08:04:13.000000 cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-sub-x-mr-sel.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9802 2021-04-27 08:16:19.000000 cr.cube-3.0.8/tests/fixtures/overlaps/mr-single-subvar-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)   135954 2021-04-22 19:07:37.000000 cr.cube-3.0.8/tests/fixtures/overlaps/mr-x-mr-realistic-example.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    16239 2021-04-27 08:16:19.000000 cr.cube-3.0.8/tests/fixtures/overlaps/mr-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7592 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pairwise-4x4.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8190 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-illness-x-occupation-with-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8895 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-illness-x-occupation.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8895 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-occupation-x-illness.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6166 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pairwise-random-3x4.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7120 2019-04-04 12:08:20.000000 cr.cube-3.0.8/tests/fixtures/pairwise-with-zero-margin.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8322 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-array-cat-first.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8322 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-array-subvar-first.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    18313 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-array-x-pets.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7880 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-array.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11275 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-x-fruit-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10532 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-x-fruit.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17337 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-x-pets-array.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    17513 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/pets-x-pets.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)  4523938 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/profiles-percents.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    65249 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/prompted-awareness.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     6170 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/same-counts-3x4.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10216 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale-with-null-values.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.836214 cr.cube-3.0.8/tests/fixtures/scale_means/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3865 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/scale_means/bolshevik-hair.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12099 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/ca-cat-x-items.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12099 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/ca-items-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    34045 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/ca-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5645 2020-12-16 09:52:20.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-nps-numval-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5087 2019-04-04 12:08:20.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-single-element-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    25709 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-ca-cat-x-items.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     9453 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-cat-sm-margin.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8477 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15997 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    15997 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3908 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/fixtures/scale_means/univariate-ca-subvar.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5437 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat-with-all-null-numeric-value.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5422 2019-11-18 11:36:57.000000 cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat-with-null-numeric-value.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     5419 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.836533 cr.cube-3.0.8/tests/fixtures/scorecards/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    36864 2019-05-21 20:32:06.000000 cr.cube-3.0.8/tests/fixtures/scorecards/.sandwiches-by-mike.json.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)    14698 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/selected-3way-2-filledmissing.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13980 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/selected-3way-filledmissing.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10132 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/selected-crosstab-array-first.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10132 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/selected-crosstab-array-last.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    10350 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/simple-ca-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7524 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/simple-cat-array.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7620 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/simple-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7013 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/single-col-margin-not-iterable.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    38417 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/starttime-x-nordic-countries-x-food-groops.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4540 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/stats-test.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7728 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/sum-cat-x-mr.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     7728 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/sum-mr-x-cat.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    91896 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/test-dashboard-fixture.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1853 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/text.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.837568 cr.cube-3.0.8/tests/fixtures/transforms/
--rw-r--r--   0 slobodanilic   (501) staff       (20)     3229 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/transforms/generic-transforms-dicts.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1237 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/transforms/test-dashboard-transform-no-ordering.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1715 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/transforms/test-dashboard-transform-single-el-visible.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4553 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/txt-x-cat-date.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    33788 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/fixtures/univ-mr-with-hs.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2608 2020-09-30 14:19:02.000000 cr.cube-3.0.8/tests/fixtures/univariate-categorical.json
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19620 2019-04-02 07:34:13.000000 cr.cube-3.0.8/tests/fixtures/xyz-simple-alltypes.json
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.846315 cr.cube-3.0.8/tests/integration/
--rw-r--r--   0 slobodanilic   (501) staff       (20)   200704 2019-05-01 15:48:52.000000 cr.cube-3.0.8/tests/integration/.test_existing_as_frozen_slice.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)   262144 2021-09-24 21:07:04.000000 cr.cube-3.0.8/tests/integration/.test_headers_and_subtotals.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2019-06-11 16:58:27.000000 cr.cube-3.0.8/tests/integration/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4641 2021-09-09 07:53:02.000000 cr.cube-3.0.8/tests/integration/test_collator.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12704 2021-09-07 15:26:38.000000 cr.cube-3.0.8/tests/integration/test_cube.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)   146398 2021-09-24 08:16:31.000000 cr.cube-3.0.8/tests/integration/test_cubepart.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    11226 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_dimension.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)   113666 2021-09-25 14:45:45.000000 cr.cube-3.0.8/tests/integration/test_headers_and_subtotals.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4517 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_index_table.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    67155 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_matrix.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    51785 2021-06-18 08:47:41.000000 cr.cube-3.0.8/tests/integration/test_multiple_response.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    18932 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_numeric_array.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    52750 2021-09-09 07:52:56.000000 cr.cube-3.0.8/tests/integration/test_pairwise_significance.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    33463 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_scale_additional_measures.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    20379 2021-05-25 12:40:02.000000 cr.cube-3.0.8/tests/integration/test_scale_means.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8861 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/integration/test_smoothing.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     8831 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/integration/test_stripe.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.851372 cr.cube-3.0.8/tests/unit/
--rw-r--r--   0 slobodanilic   (501) staff       (20)    94208 2021-09-24 15:26:48.000000 cr.cube-3.0.8/tests/unit/.test_dimension.py.swp
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2018-10-02 06:05:01.000000 cr.cube-3.0.8/tests/unit/__init__.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.853146 cr.cube-3.0.8/tests/unit/matrix/
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2021-01-08 11:32:11.000000 cr.cube-3.0.8/tests/unit/matrix/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    61638 2021-09-25 14:45:45.000000 cr.cube-3.0.8/tests/unit/matrix/test_assembler.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    56219 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/matrix/test_cubemeasure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)   114803 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/unit/matrix/test_measure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    12292 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/matrix/test_subtotals.py
-drwxr-xr-x   0 slobodanilic   (501) staff       (20)        0 2021-09-25 14:47:27.854606 cr.cube-3.0.8/tests/unit/stripe/
--rw-r--r--   0 slobodanilic   (501) staff       (20)        0 2021-03-15 09:27:52.000000 cr.cube-3.0.8/tests/unit/stripe/__init__.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    18380 2021-09-25 14:45:45.000000 cr.cube-3.0.8/tests/unit/stripe/test_assembler.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    13686 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/stripe/test_cubemeasure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2947 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/stripe/test_insertion.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    32446 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/unit/stripe/test_measure.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    23949 2021-09-09 07:53:02.000000 cr.cube-3.0.8/tests/unit/test_collator.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    26548 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/test_cube.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    19011 2021-09-24 08:16:31.000000 cr.cube-3.0.8/tests/unit/test_cubepart.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)    66166 2021-09-24 15:25:54.000000 cr.cube-3.0.8/tests/unit/test_dimension.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      740 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/test_enum.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)      239 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/test_scalar.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     4852 2021-09-07 14:55:34.000000 cr.cube-3.0.8/tests/unit/test_smoothing.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1556 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unit/test_util.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     2603 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/unitutil.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1142 2021-09-07 10:40:17.000000 cr.cube-3.0.8/tests/util.py
--rw-r--r--   0 slobodanilic   (501) staff       (20)     1202 2021-09-08 17:28:53.000000 cr.cube-3.0.8/tox.ini
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.094513 cr.cube-3.0.9/
+-rw-r--r--   0 pamaron    (501) staff       (20)      143 2021-01-01 18:06:41.000000 cr.cube-3.0.9/.coveragerc
+-rw-r--r--   0 pamaron    (501) staff       (20)     1452 2021-01-01 18:06:41.000000 cr.cube-3.0.9/.flake8
+-rw-r--r--   0 pamaron    (501) staff       (20)      462 2021-09-02 09:23:19.000000 cr.cube-3.0.9/.pre-commit-config.yaml
+-rw-r--r--   0 pamaron    (501) staff       (20)    15189 2021-09-28 09:35:19.000000 cr.cube-3.0.9/HISTORY.md
+-rw-r--r--   0 pamaron    (501) staff       (20)     1056 2021-01-01 18:06:41.000000 cr.cube-3.0.9/LICENSE
+-rw-r--r--   0 pamaron    (501) staff       (20)      240 2021-01-01 18:06:41.000000 cr.cube-3.0.9/MANIFEST.in
+-rw-r--r--   0 pamaron    (501) staff       (20)     1230 2021-01-01 18:06:41.000000 cr.cube-3.0.9/Makefile
+-rw-r--r--   0 pamaron    (501) staff       (20)     6230 2021-10-01 09:42:14.094684 cr.cube-3.0.9/PKG-INFO
+-rw-r--r--   0 pamaron    (501) staff       (20)     4751 2021-10-01 09:24:15.000000 cr.cube-3.0.9/README.md
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.782320 cr.cube-3.0.9/docs/
+-rw-r--r--   0 pamaron    (501) staff       (20)     6148 2021-07-12 08:20:30.000000 cr.cube-3.0.9/docs/.DS_Store
+-rw-r--r--   0 pamaron    (501) staff       (20)      615 2021-01-01 18:06:41.000000 cr.cube-3.0.9/docs/Makefile
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.785409 cr.cube-3.0.9/docs/source/
+-rw-r--r--   0 pamaron    (501) staff       (20)     8342 2021-01-01 18:06:41.000000 cr.cube-3.0.9/docs/source/Makefile
+-rw-r--r--   0 pamaron    (501) staff       (20)     4746 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/conf.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     6219 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/crunch_logo.png
+-rw-r--r--   0 pamaron    (501) staff       (20)      238 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/cube.rst
+-rw-r--r--   0 pamaron    (501) staff       (20)      391 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/cubepart.rst
+-rw-r--r--   0 pamaron    (501) staff       (20)      189 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/dimension.rst
+-rw-r--r--   0 pamaron    (501) staff       (20)     2834 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/index.rst
+-rw-r--r--   0 pamaron    (501) staff       (20)     3894 2021-09-02 09:23:19.000000 cr.cube-3.0.9/docs/source/quickstart.rst
+-rw-r--r--   0 pamaron    (501) staff       (20)       15 2021-06-09 16:29:23.000000 cr.cube-3.0.9/requirements-rtd.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)      535 2021-10-01 09:42:14.095389 cr.cube-3.0.9/setup.cfg
+-rw-r--r--   0 pamaron    (501) staff       (20)     1884 2021-09-02 09:23:19.000000 cr.cube-3.0.9/setup.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.773169 cr.cube-3.0.9/src/
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.785772 cr.cube-3.0.9/src/cr/
+-rw-r--r--   0 pamaron    (501) staff       (20)      275 2021-09-14 07:40:04.000000 cr.cube-3.0.9/src/cr/__init__.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.798287 cr.cube-3.0.9/src/cr/cube/
+-rw-r--r--   0 pamaron    (501) staff       (20)       95 2021-10-01 09:22:44.000000 cr.cube-3.0.9/src/cr/cube/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    24421 2021-09-30 07:24:11.000000 cr.cube-3.0.9/src/cr/cube/collator.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    44196 2021-09-14 07:40:04.000000 cr.cube-3.0.9/src/cr/cube/cube.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    74517 2021-09-29 07:43:12.000000 cr.cube-3.0.9/src/cr/cube/cubepart.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    58531 2021-10-01 09:21:34.000000 cr.cube-3.0.9/src/cr/cube/dimension.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     4974 2021-09-07 14:39:41.000000 cr.cube-3.0.9/src/cr/cube/enums.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.803534 cr.cube-3.0.9/src/cr/cube/matrix/
+-rw-r--r--   0 pamaron    (501) staff       (20)      143 2021-08-18 07:50:47.000000 cr.cube-3.0.9/src/cr/cube/matrix/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    58027 2021-09-29 07:37:25.000000 cr.cube-3.0.9/src/cr/cube/matrix/assembler.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    55479 2021-09-02 09:23:19.000000 cr.cube-3.0.9/src/cr/cube/matrix/cubemeasure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)   122555 2021-10-01 09:21:34.000000 cr.cube-3.0.9/src/cr/cube/matrix/measure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    11413 2021-09-06 07:08:16.000000 cr.cube-3.0.9/src/cr/cube/matrix/subtotals.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.804765 cr.cube-3.0.9/src/cr/cube/measures/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-09-06 07:08:04.000000 cr.cube-3.0.9/src/cr/cube/measures/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     6761 2021-09-06 07:08:04.000000 cr.cube-3.0.9/src/cr/cube/measures/pairwise_significance.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1232 2021-09-02 09:23:19.000000 cr.cube-3.0.9/src/cr/cube/min_base_size_mask.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      734 2021-09-02 09:23:19.000000 cr.cube-3.0.9/src/cr/cube/scalar.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     5487 2021-09-07 14:39:41.000000 cr.cube-3.0.9/src/cr/cube/smoothing.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.808150 cr.cube-3.0.9/src/cr/cube/stripe/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-03-03 07:57:00.000000 cr.cube-3.0.9/src/cr/cube/stripe/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    20679 2021-09-30 09:43:39.000000 cr.cube-3.0.9/src/cr/cube/stripe/assembler.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    10780 2021-09-30 09:43:39.000000 cr.cube-3.0.9/src/cr/cube/stripe/cubemeasure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2944 2021-09-02 09:23:19.000000 cr.cube-3.0.9/src/cr/cube/stripe/insertion.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    27011 2021-09-07 14:39:41.000000 cr.cube-3.0.9/src/cr/cube/stripe/measure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     5187 2021-09-02 09:23:19.000000 cr.cube-3.0.9/src/cr/cube/util.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.787542 cr.cube-3.0.9/src/cr.cube.egg-info/
+-rw-r--r--   0 pamaron    (501) staff       (20)     6230 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/PKG-INFO
+-rw-r--r--   0 pamaron    (501) staff       (20)    19558 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/SOURCES.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)        1 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/dependency_links.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)        3 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/namespace_packages.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)       58 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/requires.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)        3 2021-10-01 09:42:13.000000 cr.cube-3.0.9/src/cr.cube.egg-info/top_level.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)        1 2021-05-25 13:21:43.000000 cr.cube-3.0.9/src/cr.cube.egg-info/zip-safe
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.811017 cr.cube-3.0.9/tests/
+-rw-r--r--   0 pamaron    (501) staff       (20)     8196 2021-06-08 08:00:52.000000 cr.cube-3.0.9/tests/.DS_Store
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/__init__.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:13.875848 cr.cube-3.0.9/tests/expectations/
+-rw-r--r--   0 pamaron    (501) staff       (20)      292 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/admit-x-dept-unweighted-col-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       45 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/ca-subvar-ca-cat-x-cat-date-scale-means-w2.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      369 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      362 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      259 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/ca-subvar-x-ca-cat-hs-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      188 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/ca-subvar-x-ca-cat-hs-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      112 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/ca-x-cat-hs-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       89 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/ca-x-mr-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2431 2021-05-20 13:07:38.000000 cr.cube-3.0.9/tests/expectations/cat-hs-subdiff-x-cat-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2692 2021-05-20 13:07:38.000000 cr.cube-3.0.9/tests/expectations/cat-hs-subdiff-x-cat-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      678 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      647 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      460 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-col-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      459 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-col-stddev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      461 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-col-stderr.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      459 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-column-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      125 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-columns-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      652 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      276 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1018 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-row-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      549 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-row-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      461 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-tbl-stddev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      456 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-tbl-stderr.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      583 2021-04-21 13:13:42.000000 cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-zscores.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      225 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-col-idx-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      257 2021-06-08 07:51:40.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-col-props-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      284 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-date-smoothed-col-pct-w1.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       45 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-date-smoothed-scale-means-w2.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      311 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-date-wgtd-smoothed-col-idx-w4.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      306 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-date-wgtd-smoothed-col-pct-w4.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       17 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      686 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-idxs-alt.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      363 2021-06-04 12:57:54.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      832 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      692 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      164 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-scale-mean-pw-idxs-alt.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      153 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-scale-mean-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      223 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-scale-means-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      182 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-scale-means-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      260 2021-06-08 07:51:40.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-population-counts-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      261 2021-06-08 07:51:40.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-population-counts.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      716 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pruning-hs-col-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      649 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pruning-hs-table-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      220 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pw-idxs-recip.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      202 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      492 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      474 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       17 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-scale-mean-pw-idxs-alt.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       17 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-scale-mean-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       73 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-ucounts-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      118 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-wgtd-pw-indices.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      369 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-wgtd-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      362 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-wgtd-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      208 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-cat-zscores-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       29 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      193 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       36 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-scale-mean-pw-idxs-alt.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       36 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-scale-mean-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      187 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      169 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat-x-mr-x-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1849 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat_x_cat_hirotsu_chi_squared.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)     1907 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat_x_cat_hirotsu_pvals.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)     2015 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/cat_x_cat_with_hs_hirotsu_pvals.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)      533 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/col-per-moe-cat-x-cat-hs-2rows-1col.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      594 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/col-std-dev-cat-x-cat-hs-2rows-1col.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      858 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/col-std-err-cat-x-cat-hs-2rows-1col.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      163 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/datetime-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      199 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/datetime-x-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      282 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/econ-gender-x-ideology-weighted-col-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      158 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/econ-gender-x-ideology-weighted-row-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      159 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/econ-gender-x-ideology-weighted-row-std-dev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      293 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/econ-gender-x-ideology-weighted-table-prop-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      184 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      170 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      143 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      886 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      884 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-stddev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      887 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-stderr.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      886 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-column-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1068 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-columns-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      186 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      989 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      225 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      125 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-row-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      441 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-row-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      443 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-tbl-stddev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      438 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-tbl-stderr.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      920 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-zscores.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      183 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-pw-idxs-alt.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      167 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      344 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-col-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      348 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-col-std-dev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      350 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-col-std-err.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      347 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-table-moe.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      347 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-table-std-dev.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      348 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-table-std-err.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      469 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-cat-weighted-zscores.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      171 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-column-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      354 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-columns-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)       70 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-explicit-order.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      117 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-pw-idxs.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      179 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-pw-pvals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      181 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-pw-tstats.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      353 2021-06-03 07:41:04.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-row-margin-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      171 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr-x-mr-row-proportions.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2099 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr_x_cat_chi_squared_rows.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)     1617 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/mr_x_cat_pairwise_pvals.txt
+-rw-r--r--   0 pamaron    (501) staff       (20)      782 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-hs-p-vals-col-7.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      764 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-hs-t-stats-col-7.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      242 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-p-vals-col-4.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      224 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-t-stats-col-4.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      205 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/expectations/num-array-means-grouped-by-cat-date-smoothed.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      912 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/numeric-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      877 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/numeric-x-cat-date-smoothed-col-pct-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      316 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/txt-x-cat-date-smoothed-col-idx-w3.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      370 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/expectations/txt-x-cat-date-smoothed-col-pct-w3.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.036599 cr.cube-3.0.9/tests/fixtures/
+-rw-r--r--   0 pamaron    (501) staff       (20)     2268 2021-05-27 09:45:19.000000 cr.cube-3.0.9/tests/fixtures/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     5412 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/admit-x-dept-unweighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4156 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/admit-x-gender-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    28264 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/age-x-accrpipe.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   200208 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/ca-as-0th.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    19160 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-cat-x-ca-subvar.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    35044 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-cat-x-mr-x-ca-subvar-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8681 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-food-groups-x-shape-of-pasta-with-insertions.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    19629 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-items-x-ca-cat-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11277 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-single-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13114 2021-03-05 18:48:10.000000 cr.cube-3.0.9/tests/fixtures/ca-subdiff.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    45337 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-hs-x-mr-x-ca-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11297 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-hs-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7665 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-empties.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5342 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    21356 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13077 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    44189 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-with-nets.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9440 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    20028 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-mr-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    28828 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-mr-sig-testing-subtotals.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    56390 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-mr-weighted-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    18882 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5684 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/ca-x-single-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4078 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-4-x-cat-4.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4120 2021-05-18 13:10:45.000000 cr.cube-3.0.9/tests/fixtures/cat-4-x-cat-5.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3528 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-date-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6590 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-date-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5294 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4805 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-mt-x-cat-hs-mt.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3218 2021-09-28 09:35:19.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-mt.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10257 2021-05-20 13:07:38.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-subdiff-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3546 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5411 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-hs-empties.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3299 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2845 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9703 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-mr-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11957 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-hs-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6779 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/cat-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4385 2021-03-05 18:48:10.000000 cr.cube-3.0.9/tests/fixtures/cat-means-and-counts.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3336 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/cat-means-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3108 2021-03-18 10:45:25.000000 cr.cube-3.0.9/tests/fixtures/cat-stddev.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4187 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-subtot-order.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3244 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/cat-sum.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4140 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-all-missing-row-elements.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5546 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-date-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5077 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10806 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-filt-complete.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11094 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-filt.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4998 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-german-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6932 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-2rows-1col.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8581 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-missing.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7799 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-total-bottom.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2786 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3858 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-mean-subtot.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11599 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-mean-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7801 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-weighted-ttests.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6731 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7590 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-with-empty-cols.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    23734 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-x-cat-wgtd-no-query-weight.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    23757 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat-x-cat-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4223 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9386 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-date-hs-prune.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6713 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-datetime.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    41500 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-items-x-cats-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6099 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-logical.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17637 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-2.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11985 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-col.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14015 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-row-col.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11975 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-row.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6370 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-sentry.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8449 2021-03-18 10:45:25.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-stddev.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11088 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-subvar-means.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17913 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-unicode-sv-alias.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    56390 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-weighted-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17807 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    58111 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat-missing.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   390065 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    86932 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr-empty-cols.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    27693 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr-pruned-rows.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13780 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5551 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11119 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-num-hs-prune.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8685 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/cat-x-num-x-datetime.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4608 2021-03-05 18:48:10.000000 cr.cube-3.0.9/tests/fixtures/cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16626 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/countries-x-shapes-of-pasta.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     1551 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3897 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/datetime-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    22131 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/deck-with-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6438 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/direction-of-country-x-education-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5897 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-blame-with-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13003 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-col-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7515 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-row-and-col-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12633 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-row-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8380 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-gender-x-ideology-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14017 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-mean-age-blame-x-gender.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2816 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-mean-no-dims.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2814 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-nodata-no-dims.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9402 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/econ-us-problem-x-bigger-problem.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12992 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/edu-fav5.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    38417 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/food-groops-x-starttime-x-nordic-countries.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9418 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/food-group-x-shape-of-pasta-2rows-insertion.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9703 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/food-group-x-shape-pasta-2rows1col-insertion.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4973 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-hs-top-bottom.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10324 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array-pets-first.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10324 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array-subvars-first.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10250 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12174 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-x-pets-hs-top-bottom.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10464 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/fruit-x-pets.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   181586 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/full-cube.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    27623 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/gender-party-race.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5397 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/gender-x-weight.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    28840 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/huffpost-actions-x-household.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15772 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/letters-x-pets-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2502 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/logical-univariate.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6828 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mean-cat-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    26336 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/means-3d.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15642 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/means-cat-hs-x-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3696 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/means-cat-x-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15840 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/means-cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    29587 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/means-mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6471 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/missing-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16347 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/mr-1-x-mr-3.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14655 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-mean-filt-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9695 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-mean-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9391 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6825 2021-03-18 10:45:25.000000 cr.cube-3.0.9/tests/fixtures/mr-stddev.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6931 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/mr-sum.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8013 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/mr-wgtd.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   133071 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-ca-cat-x-ca-subvar.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    23948 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-ca-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10696 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-2.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9275 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-both-single-element.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7657 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13091 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-hs-mt.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10229 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-mean-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11836 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16626 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-not-so-simple-alltypes.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8542 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-profiles-stats-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11975 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-col.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14015 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-row-col.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11985 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-row.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    68229 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-with-means.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   113193 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-x-mr-prune.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    87737 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10174 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17303 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-2.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    19003 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-index-table.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    22028 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-mean-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    20201 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-mean.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15177 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-means.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10904 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-selected-categories.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16347 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-single-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13400 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-sum.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    86386 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-with-pruning.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   281460 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12432 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/fixtures/mr-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15950 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-other-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    33052 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/mr-x-single-wave.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.042286 cr.cube-3.0.9/tests/fixtures/mr_insertions/
+-rw-r--r--   0 pamaron    (501) staff       (20)     2623 2021-05-27 09:45:19.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/cat-hs-top-btm.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16566 2021-09-14 07:40:04.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16303 2021-05-27 09:45:19.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    24875 2021-05-27 09:45:19.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/mr-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    24368 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/scorecard.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11066 2021-05-27 09:45:19.000000 cr.cube-3.0.9/tests/fixtures/mr_insertions/univariate-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12656 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/nssat-mr-x-3vl.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    37793 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/nssat-mr-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3010 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/num-binned.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8588 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/num-x-num-empty.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     1583 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/num.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3806 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/numeric-measures-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8359 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/numeric-x-cat-date.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.053622 cr.cube-3.0.9/tests/fixtures/numeric_arrays/
+-rw-r--r--   0 pamaron    (501) staff       (20)     6291 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10964 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10443 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5911 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4453 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5373 2021-02-09 14:07:39.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8707 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-no-grouping-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2738 2021-04-07 07:10:05.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-no-grouping.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8158 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-scale-measures.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14419 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-x-mr-weighted.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9888 2021-03-02 10:58:39.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10226 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-grouped-by-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15260 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4546 2021-03-18 10:45:25.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-grouped-by-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3354 2021-03-18 10:45:25.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-no-grouping.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8442 2021-05-26 15:01:01.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5305 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4920 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2734 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-no-grouping.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7862 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2409 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/om-sgp8334215-vn-2019-sep-19-strand.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9735 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/om-sgp8334215-vn-2019-sep-19.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.059277 cr.cube-3.0.9/tests/fixtures/overlaps/
+-rw-r--r--   0 pamaron    (501) staff       (20)    26028 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/overlaps/ca-sub-x-ca-cat-x-mr-sub-x-mr-sel.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16405 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-gender-x-all-pets-owned.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    40957 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-realistic-example.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13581 2021-03-24 09:29:27.000000 cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-sub-x-mr-sel.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9802 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/overlaps/mr-single-subvar-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)   135954 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/overlaps/mr-x-mr-realistic-example.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    16239 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/overlaps/mr-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7592 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-4x4.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8190 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-illness-x-occupation-with-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8895 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-illness-x-occupation.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8895 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-occupation-x-illness.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6166 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-random-3x4.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7120 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pairwise-with-zero-margin.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8322 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-array-cat-first.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8322 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-array-subvar-first.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    18313 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-array-x-pets.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7880 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-array.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    11275 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-x-fruit-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10532 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-x-fruit.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17337 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-x-pets-array.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    17513 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/pets-x-pets.json
+-rw-r--r--   0 pamaron    (501) staff       (20)  4523938 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/profiles-percents.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    65249 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/prompted-awareness.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     6170 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/same-counts-3x4.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10216 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale-with-null-values.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.068183 cr.cube-3.0.9/tests/fixtures/scale_means/
+-rw-r--r--   0 pamaron    (501) staff       (20)     3865 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/bolshevik-hair.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12099 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/ca-cat-x-items.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    12099 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/ca-items-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    34045 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/ca-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5645 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-nps-numval-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5087 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-single-element-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    25709 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-ca-cat-x-items.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     9453 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-cat-sm-margin.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     8477 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15997 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    15997 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     3908 2021-05-18 13:10:29.000000 cr.cube-3.0.9/tests/fixtures/scale_means/univariate-ca-subvar.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5437 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat-with-all-null-numeric-value.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5422 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat-with-null-numeric-value.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     5419 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    14698 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/selected-3way-2-filledmissing.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    13980 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/selected-3way-filledmissing.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10132 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/selected-crosstab-array-first.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10132 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/selected-crosstab-array-last.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    10350 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/simple-ca-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7524 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/simple-cat-array.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7620 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/simple-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7013 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/single-col-margin-not-iterable.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    38417 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/starttime-x-nordic-countries-x-food-groops.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4540 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/stats-test.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7728 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/sum-cat-x-mr.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     7728 2021-03-09 18:03:03.000000 cr.cube-3.0.9/tests/fixtures/sum-mr-x-cat.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    91896 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/test-dashboard-fixture.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     1853 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/text.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.069587 cr.cube-3.0.9/tests/fixtures/transforms/
+-rw-r--r--   0 pamaron    (501) staff       (20)     3229 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/transforms/generic-transforms-dicts.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     1237 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/transforms/test-dashboard-transform-no-ordering.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     1715 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/transforms/test-dashboard-transform-single-el-visible.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     4553 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/txt-x-cat-date.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    33788 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/fixtures/univ-mr-with-hs.json
+-rw-r--r--   0 pamaron    (501) staff       (20)     2608 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/univariate-categorical.json
+-rw-r--r--   0 pamaron    (501) staff       (20)    19620 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/fixtures/xyz-simple-alltypes.json
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.080792 cr.cube-3.0.9/tests/integration/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/integration/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     4641 2021-09-14 07:40:04.000000 cr.cube-3.0.9/tests/integration/test_collator.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    12704 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_cube.py
+-rw-r--r--   0 pamaron    (501) staff       (20)   146398 2021-09-30 16:43:04.000000 cr.cube-3.0.9/tests/integration/test_cubepart.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    11226 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_dimension.py
+-rw-r--r--   0 pamaron    (501) staff       (20)   113666 2021-09-28 09:35:19.000000 cr.cube-3.0.9/tests/integration/test_headers_and_subtotals.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     4517 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_index_table.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    67155 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_matrix.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    51785 2021-06-28 07:32:20.000000 cr.cube-3.0.9/tests/integration/test_multiple_response.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    18932 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_numeric_array.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    52750 2021-09-06 07:08:16.000000 cr.cube-3.0.9/tests/integration/test_pairwise_significance.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    33463 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/integration/test_scale_additional_measures.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    20379 2021-09-06 07:08:04.000000 cr.cube-3.0.9/tests/integration/test_scale_means.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     8861 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/integration/test_smoothing.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     8831 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/integration/test_stripe.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.087137 cr.cube-3.0.9/tests/unit/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-01-01 18:06:41.000000 cr.cube-3.0.9/tests/unit/__init__.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.091188 cr.cube-3.0.9/tests/unit/matrix/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-01-07 11:16:09.000000 cr.cube-3.0.9/tests/unit/matrix/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    61638 2021-09-28 09:35:19.000000 cr.cube-3.0.9/tests/unit/matrix/test_assembler.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    56219 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/matrix/test_cubemeasure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)   114803 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/unit/matrix/test_measure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    12292 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/matrix/test_subtotals.py
+drwxr-xr-x   0 pamaron    (501) staff       (20)        0 2021-10-01 09:42:14.093736 cr.cube-3.0.9/tests/unit/stripe/
+-rw-r--r--   0 pamaron    (501) staff       (20)        0 2021-03-03 07:57:00.000000 cr.cube-3.0.9/tests/unit/stripe/__init__.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    18380 2021-09-28 09:35:19.000000 cr.cube-3.0.9/tests/unit/stripe/test_assembler.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    13686 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/stripe/test_cubemeasure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2947 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/stripe/test_insertion.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    32446 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/unit/stripe/test_measure.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    23949 2021-09-22 10:19:10.000000 cr.cube-3.0.9/tests/unit/test_collator.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    26548 2021-09-02 09:35:45.000000 cr.cube-3.0.9/tests/unit/test_cube.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    19011 2021-09-23 12:25:40.000000 cr.cube-3.0.9/tests/unit/test_cubepart.py
+-rw-r--r--   0 pamaron    (501) staff       (20)    66820 2021-10-01 09:21:34.000000 cr.cube-3.0.9/tests/unit/test_dimension.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      740 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/test_enum.py
+-rw-r--r--   0 pamaron    (501) staff       (20)      239 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/test_scalar.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     4852 2021-09-07 14:39:41.000000 cr.cube-3.0.9/tests/unit/test_smoothing.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1556 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unit/test_util.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     2603 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/unitutil.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1142 2021-09-02 09:23:19.000000 cr.cube-3.0.9/tests/util.py
+-rw-r--r--   0 pamaron    (501) staff       (20)     1202 2021-09-14 07:40:04.000000 cr.cube-3.0.9/tox.ini
```

### Comparing `cr.cube-3.0.8/.flake8` & `cr.cube-3.0.9/.flake8`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/HISTORY.md` & `cr.cube-3.0.9/HISTORY.md`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/LICENSE` & `cr.cube-3.0.9/LICENSE`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/Makefile` & `cr.cube-3.0.9/Makefile`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/PKG-INFO` & `cr.cube-3.0.9/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cr.cube
-Version: 3.0.8
+Version: 3.0.9
 Summary: Crunch.io Cube library
 Home-page: https://github.com/Crunch-io/crunch-cube/
 Author: Crunch.io
 Author-email: dev@crunch.io
 License: MIT License
 Description: # crunch-cube
         
@@ -110,18 +110,22 @@
         The detailed description can be found
         [here](http://crunch-cube.readthedocs.io/en/latest/cr.cube.html#cr-cube-crunch-cube-module).
         
         ---
         [![Build Status](https://travis-ci.org/Crunch-io/crunch-cube.png?branch=master)](https://travis-ci.org/Crunch-io/crunch-cube)
         [![Coverage Status](https://codecov.io/gh/Crunch-io/crunch-cube/branch/master/graph/badge.svg?token=C6auKOj8tZ)](https://codecov.io/gh/Crunch-io/crunch-cube)
         [![Documentation Status](https://readthedocs.org/projects/crunch-cube/badge/?version=latest)](http://crunch-cube.readthedocs.io/en/latest/?badge=latest)
+        [![CodeFactor](https://www.codefactor.io/repository/github/crunch-io/crunch-cube/badge)](https://www.codefactor.io/repository/github/crunch-io/crunch-cube)
         ---
         
         ## Changes
         
+        ### 3.0.9
+        - Fix reverse authority in `id_translation` for MR dimensions
+        
         ### 3.0.8
         - Fix reverse order in insertions fills
         
         ### 3.0.7
         - Add fills for insertions (subtotals and differences)
         
         ### 3.0.6
```

### Comparing `cr.cube-3.0.8/README.md` & `cr.cube-3.0.9/README.md`

 * *Files 10% similar despite different names*

```diff
@@ -102,18 +102,22 @@
 The detailed description can be found
 [here](http://crunch-cube.readthedocs.io/en/latest/cr.cube.html#cr-cube-crunch-cube-module).
 
 ---
 [![Build Status](https://travis-ci.org/Crunch-io/crunch-cube.png?branch=master)](https://travis-ci.org/Crunch-io/crunch-cube)
 [![Coverage Status](https://codecov.io/gh/Crunch-io/crunch-cube/branch/master/graph/badge.svg?token=C6auKOj8tZ)](https://codecov.io/gh/Crunch-io/crunch-cube)
 [![Documentation Status](https://readthedocs.org/projects/crunch-cube/badge/?version=latest)](http://crunch-cube.readthedocs.io/en/latest/?badge=latest)
+[![CodeFactor](https://www.codefactor.io/repository/github/crunch-io/crunch-cube/badge)](https://www.codefactor.io/repository/github/crunch-io/crunch-cube)
 ---
 
 ## Changes
 
+### 3.0.9
+- Fix reverse authority in `id_translation` for MR dimensions
+
 ### 3.0.8
 - Fix reverse order in insertions fills
 
 ### 3.0.7
 - Add fills for insertions (subtotals and differences)
 
 ### 3.0.6
```

### Comparing `cr.cube-3.0.8/docs/Makefile` & `cr.cube-3.0.9/docs/Makefile`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/docs/source/Makefile` & `cr.cube-3.0.9/docs/source/Makefile`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/docs/source/conf.py` & `cr.cube-3.0.9/docs/source/conf.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/docs/source/crunch_logo.png` & `cr.cube-3.0.9/docs/source/crunch_logo.png`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/docs/source/index.rst` & `cr.cube-3.0.9/docs/source/index.rst`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/docs/source/quickstart.rst` & `cr.cube-3.0.9/docs/source/quickstart.rst`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/setup.cfg` & `cr.cube-3.0.9/setup.cfg`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/setup.py` & `cr.cube-3.0.9/setup.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/.dimension.py.swp` & `cr.cube-3.0.9/src/cr/cube/dimension.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,4864 +1,3659 @@
-00000000: 6230 5649 4d20 382e 3200 0000 0010 0000  b0VIM 8.2.......
-00000010: e93b 4e61 638a a408 7262 0000 736c 6f62  .;Nac...rb..slob
-00000020: 6f64 616e 696c 6963 0000 0000 0000 0000  odanilic........
-00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 536c 6f62 6f64 616e 732d 4d61  ....Slobodans-Ma
-00000050: 6342 6f6f 6b2d 5072 6f2d 322e 6c6f 6361  cBook-Pro-2.loca
-00000060: 6c00 0000 0000 0000 0000 0000 7e73 6c6f  l...........~slo
-00000070: 626f 6461 6e69 6c69 632f 446f 6375 6d65  bodanilic/Docume
-00000080: 6e74 732f 4372 756e 6368 2f72 6570 6f73  nts/Crunch/repos
-00000090: 2f63 7275 6e63 682d 6375 6265 2f73 7263  /crunch-cube/src
-000000a0: 2f63 722f 6375 6265 2f64 696d 656e 7369  /cr/cube/dimensi
-000000b0: 6f6e 2e70 7900 0000 0000 0000 0000 0000  on.py...........
-000000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003e0: 0000 0000 0000 0000 0075 7466 2d38 0d00  .........utf-8..
-000003f0: 3332 3130 0000 0000 2322 2120 1312 5500  3210....#"! ..U.
-00000400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001000: 7470 1100 7f00 0000 0200 0000 0000 0000  tp..............
-00001010: 6800 0000 0000 0000 0100 0000 0000 0000  h...............
-00001020: 0100 0000 0000 0000 0600 0000 0000 0000  ................
-00001030: 6300 0000 0000 0000 6900 0000 0000 0000  c.......i.......
-00001040: 0100 0000 0000 0000 0700 0000 0000 0000  ................
-00001050: 5700 0000 0000 0000 cc00 0000 0000 0000  W...............
-00001060: 0100 0000 0000 0000 0800 0000 0000 0000  ................
-00001070: 5c00 0000 0000 0000 2301 0000 0000 0000  \.......#.......
-00001080: 0100 0000 0000 0000 0900 0000 0000 0000  ................
-00001090: 5800 0000 0000 0000 7f01 0000 0000 0000  X...............
-000010a0: 0100 0000 0000 0000 0a00 0000 0000 0000  ................
-000010b0: 5100 0000 0000 0000 d701 0000 0000 0000  Q...............
-000010c0: 0100 0000 0000 0000 0b00 0000 0000 0000  ................
-000010d0: 6600 0000 0000 0000 2802 0000 0000 0000  f.......(.......
-000010e0: 0100 0000 0000 0000 0c00 0000 0000 0000  ................
-000010f0: 5600 0000 0000 0000 8e02 0000 0000 0000  V...............
-00001100: 0100 0000 0000 0000 0d00 0000 0000 0000  ................
-00001110: 4f00 0000 0000 0000 e402 0000 0000 0000  O...............
-00001120: 0100 0000 0000 0000 0e00 0000 0000 0000  ................
-00001130: 5000 0000 0000 0000 3303 0000 0000 0000  P.......3.......
-00001140: 0100 0000 0000 0000 0f00 0000 0000 0000  ................
-00001150: 5c00 0000 0000 0000 8303 0000 0000 0000  \...............
-00001160: 0100 0000 0000 0000 1000 0000 0000 0000  ................
-00001170: 5d00 0000 0000 0000 df03 0000 0000 0000  ]...............
-00001180: 0100 0000 0000 0000 1100 0000 0000 0000  ................
-00001190: 6400 0000 0000 0000 3c04 0000 0000 0000  d.......<.......
-000011a0: 0100 0000 0000 0000 0300 0000 0000 0000  ................
-000011b0: 6400 0000 0000 0000 a004 0000 0000 0000  d...............
-000011c0: 0100 0000 0000 0000 0500 0000 0000 0000  ................
-000011d0: 2e00 0000 0000 0000 0405 0000 0000 0000  ................
-000011e0: 0100 0000 0000 0000 1200 0000 0000 0000  ................
-000011f0: 3300 0000 0000 0000 3405 0000 0000 0000  3.......4.......
-00001200: 0100 0000 0000 0000 0400 0000 0000 0000  ................
-00001210: 5d00 0000 0000 0000 6505 0000 0000 0000  ].......e.......
-00001220: 0100 0000 0000 0000 0000 0000 0000 0000  ................
-00001230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00002000: 6164 0000 3400 0000 f001 0000 0010 0000  ad..4...........
-00002010: 6800 0000 0000 0000 ee0f 0000 ed0f 0000  h...............
-00002020: c90f 0000 c80f 0000 bc0f 0000 970f 0000  ................
-00002030: 570f 0000 560f 0000 430f 0000 420f 0000  W...V...C...B...
-00002040: 260f 0000 0a0f 0000 f00e 0000 e20e 0000  &...............
-00002050: d50e 0000 c10e 0000 bf0e 0000 990e 0000  ................
-00002060: 980e 0000 970e 0000 760e 0000 460e 0000  ........v...F...
-00002070: 450e 0000 1c0e 0000 f30d 0000 c50d 0000  E...............
-00002080: c40d 0000 ac0d 0000 7a0d 0000 540d 0000  ........z...T...
-00002090: 530d 0000 3c0d 0000 140d 0000 ef0c 0000  S...<...........
-000020a0: ee0c 0000 dc0c 0000 a60c 0000 6c0c 0000  ............l...
-000020b0: 6b0c 0000 1f0c 0000 0b0c 0000 ff0b 0000  k...............
-000020c0: dc0b 0000 a90b 0000 8b0b 0000 8a0b 0000  ................
-000020d0: 890b 0000 630b 0000 190b 0000 180b 0000  ....c...........
-000020e0: ef0a 0000 bf0a 0000 be0a 0000 ac0a 0000  ................
-000020f0: 700a 0000 290a 0000 280a 0000 e309 0000  p...)...(.......
-00002100: a409 0000 9809 0000 5409 0000 5309 0000  ........T...S...
-00002110: 4109 0000 0f09 0000 d508 0000 d408 0000  A...............
-00002120: 7d08 0000 3108 0000 de07 0000 8c07 0000  }...1...........
-00002130: 3507 0000 1c07 0000 1007 0000 b806 0000  5...............
-00002140: 6306 0000 3506 0000 e905 0000 b105 0000  c...5...........
-00002150: 6605 0000 5105 0000 2005 0000 f204 0000  f...Q... .......
-00002160: cd04 0000 bf04 0000 a604 0000 a504 0000  ................
-00002170: 9304 0000 6b04 0000 3104 0000 3004 0000  ....k...1...0...
-00002180: e603 0000 9d03 0000 7003 0000 6403 0000  ........p...d...
-00002190: 1b03 0000 e902 0000 e802 0000 d602 0000  ................
-000021a0: a002 0000 6602 0000 6502 0000 1802 0000  ....f...e.......
-000021b0: fc01 0000 f001 0000 ef01 0000 0000 0000  ................
-000021c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000021d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000021e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000021f0: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00002200: 2020 2020 696e 2074 6869 7320 636f 6c6c      in this coll
-00002210: 6563 7469 6f6e 2e00 2020 2020 2020 2020  ection..        
-00002220: 5468 6973 2063 6f6d 706f 7365 6420 7475  This composed tu
-00002230: 706c 6520 6973 2074 6865 2069 6e74 6572  ple is the inter
-00002240: 6e61 6c20 736f 7572 6365 2066 6f72 2074  nal source for t
-00002250: 6865 2064 696d 656e 7369 6f6e 206f 626a  he dimension obj
-00002260: 6563 7473 0000 2020 2020 2020 2020 2222  ects..        ""
-00002270: 2274 7570 6c65 206f 6620 6469 6d65 6e73  "tuple of dimens
-00002280: 696f 6e20 6f62 6a65 6374 7320 696e 2074  ion objects in t
-00002290: 6869 7320 636f 6c6c 6563 7469 6f6e 2e00  his collection..
-000022a0: 2020 2020 6465 6620 5f64 696d 656e 7369      def _dimensi
-000022b0: 6f6e 7328 7365 6c66 2920 2d3e 2054 7570  ons(self) -> Tup
-000022c0: 6c65 5b22 4469 6d65 6e73 696f 6e22 2c20  le["Dimension", 
-000022d0: 2e2e 2e5d 3a00 2020 2020 406c 617a 7970  ...]:.    @lazyp
-000022e0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-000022f0: 2072 6574 7572 6e20 7475 706c 6528 642e   return tuple(d.
-00002300: 7368 6170 6520 666f 7220 6420 696e 2064  shape for d in d
-00002310: 696d 656e 7369 6f6e 7329 0020 2020 2020  imensions).     
-00002320: 2020 2064 696d 656e 7369 6f6e 7320 3d20     dimensions = 
-00002330: 5b73 656c 662e 5f64 696d 656e 7369 6f6e  [self._dimension
-00002340: 735b 695d 2066 6f72 2069 2069 6e20 7365  s[i] for i in se
-00002350: 6c66 2e64 696d 656e 7369 6f6e 5f6f 7264  lf.dimension_ord
-00002360: 6572 5d00 2020 2020 2020 2020 2222 2200  er].        """.
-00002370: 2020 2020 2020 2020 656c 656d 656e 7473          elements
-00002380: 2061 6e64 2061 6e79 204d 525f 4341 5420   and any MR_CAT 
-00002390: 6469 6d65 6e73 696f 6e73 292e 0020 2020  dimensions)..   
-000023a0: 2020 2020 2063 7562 6520 7265 7370 6f6e       cube respon
-000023b0: 7365 2076 616c 7565 7320 2872 6177 206d  se values (raw m
-000023c0: 6561 6e69 6e67 2069 6e63 6c75 6469 6e67  eaning including
-000023d0: 206d 6973 7369 6e67 2061 6e64 2070 7275   missing and pru
-000023e0: 6e61 626c 6500 2020 2020 2020 2020 5468  nable.        Th
-000023f0: 6973 2063 6f72 7265 7370 6f6e 6473 2074  is corresponds t
-00002400: 6f20 7468 6520 7368 6170 6520 6f66 2074  o the shape of t
-00002410: 6865 206e 6461 7272 6179 2072 6570 7265  he ndarray repre
-00002420: 7365 6e74 696e 6720 7468 6520 7261 7700  senting the raw.
-00002430: 0020 2020 2020 2020 2022 2222 5475 706c  .        """Tupl
-00002440: 6520 6f66 2069 6e74 2065 6c65 6d65 6e74  e of int element
-00002450: 2063 6f75 6e74 2066 6f72 2065 6163 6820   count for each 
-00002460: 6469 6d65 6e73 696f 6e2e 0020 2020 2064  dimension..    d
-00002470: 6566 2073 6861 7065 2873 656c 6629 202d  ef shape(self) -
-00002480: 3e20 5475 706c 655b 696e 742c 202e 2e2e  > Tuple[int, ...
-00002490: 5d3a 0020 2020 2040 6c61 7a79 7072 6f70  ]:.    @lazyprop
-000024a0: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-000024b0: 7475 726e 2064 696d 5f6f 7264 6572 0020  turn dim_order. 
-000024c0: 2020 2020 2020 2020 2020 2029 0020 2020             ).   
-000024d0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000024e0: 6520 6469 6d5f 6f72 6465 725b 3a3a 2d31  e dim_order[::-1
-000024f0: 5d00 2020 2020 2020 2020 2020 2020 2020  ].              
-00002500: 2020 6966 206c 656e 2873 656c 662e 5f64    if len(self._d
-00002510: 696d 656e 7369 6f6e 7329 203d 3d20 3300  imensions) == 3.
-00002520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002530: 6469 6d5f 6f72 6465 725b 2d32 3a5d 202b  dim_order[-2:] +
-00002540: 2028 6469 6d5f 6f72 6465 725b 305d 2c29   (dim_order[0],)
-00002550: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002560: 7572 6e20 2800 2020 2020 2020 2020 6966  urn (.        if
-00002570: 206c 656e 2873 656c 662e 5f64 696d 656e   len(self._dimen
-00002580: 7369 6f6e 7329 203e 3d20 3220 616e 6420  sions) >= 2 and 
-00002590: 4454 2e4e 554d 5f41 5252 4159 2069 6e20  DT.NUM_ARRAY in 
-000025a0: 6469 6d65 6e73 696f 6e5f 7479 7065 733a  dimension_types:
-000025b0: 0020 2020 2020 2020 2064 696d 5f6f 7264  .        dim_ord
-000025c0: 6572 203d 2074 7570 6c65 2872 616e 6765  er = tuple(range
-000025d0: 286c 656e 2873 656c 662e 5f64 696d 656e  (len(self._dimen
-000025e0: 7369 6f6e 7329 2929 0020 2020 2020 2020  sions))).       
-000025f0: 2064 696d 656e 7369 6f6e 5f74 7970 6573   dimension_types
-00002600: 203d 2074 7570 6c65 2864 2e64 696d 656e   = tuple(d.dimen
-00002610: 7369 6f6e 5f74 7970 6520 666f 7220 6420  sion_type for d 
-00002620: 696e 2073 656c 662e 5f64 696d 656e 7369  in self._dimensi
-00002630: 6f6e 7329 0020 2020 2020 2020 2023 2053  ons).        # S
-00002640: 6f2c 2061 6c6c 2074 6869 7320 6c6f 6769  o, all this logi
-00002650: 6320 7769 6c6c 2062 6520 6465 6c65 7465  c will be delete
-00002660: 642e 0020 2020 2020 2020 2023 2063 6f6e  d..        # con
-00002670: 6365 7074 2e20 5765 2073 686f 756c 6420  cept. We should 
-00002680: 7265 6365 6976 6520 7468 6520 6163 7475  receive the actu
-00002690: 616c 206f 7264 6572 2064 6972 6563 746c  al order directl
-000026a0: 7920 696e 2074 6865 2063 7562 655f 7265  y in the cube_re
-000026b0: 7370 6f6e 7365 2e00 2020 2020 2020 2020  sponse..        
-000026c0: 2320 4e4f 5445 3a20 7468 6973 2069 7320  # NOTE: this is 
-000026d0: 6120 7465 6d70 6f72 6172 7920 6861 636b  a temporary hack
-000026e0: 2074 6861 7420 676f 6573 2061 7761 7920   that goes away 
-000026f0: 7768 656e 2077 6520 696e 7472 6f64 7563  when we introduc
-00002700: 6520 7468 6520 6469 6d5f 6f72 6465 7200  e the dim_order.
-00002710: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00002720: 2020 2020 6469 6d65 6e73 696f 6e20 6f72      dimension or
-00002730: 6465 722e 0020 2020 2020 2020 2064 696d  der..        dim
-00002740: 656e 7369 6f6e 7320 7468 6520 6469 6d65  ensions the dime
-00002750: 6e73 696f 6e20 6f72 6465 7220 636f 7272  nsion order corr
-00002760: 6573 706f 6e64 2073 696d 7079 2074 6f20  espond simpy to 
-00002770: 7468 6520 7265 7665 7273 6520 6f66 2074  the reverse of t
-00002780: 6865 206f 7269 6769 6e61 6c00 2020 2020  he original.    
-00002790: 2020 2020 7377 6170 7069 6e67 2074 6865      swapping the
-000027a0: 204d 5220 2832 2064 696d 656e 7369 6f6e   MR (2 dimension
-000027b0: 7329 2077 6974 6820 7468 6520 4e55 4d5f  s) with the NUM_
-000027c0: 4152 5241 5920 6469 6d65 6e73 696f 6e2e  ARRAY dimension.
-000027d0: 2049 6e20 6361 7365 206f 6620 3200 2020   In case of 2.  
-000027e0: 2020 2020 2020 4e55 4d5f 4152 525f 585f        NUM_ARR_X_
-000027f0: 4d52 5f53 5542 5641 525f 585f 4d52 5f43  MR_SUBVAR_X_MR_C
-00002800: 4154 2074 6865 206f 7264 6572 2073 686f  AT the order sho
-00002810: 756c 6420 6265 2028 312c 322c 3029 2074  uld be (1,2,0) t
-00002820: 6861 7420 6973 2062 6173 6963 616c 6c79  hat is basically
-00002830: 0020 2020 2020 2020 2061 6e64 2074 6865  .        and the
-00002840: 206e 756d 6265 7220 6f66 2074 6865 2063   number of the c
-00002850: 7562 6520 6469 6d65 6e73 696f 6e73 2e20  ube dimensions. 
-00002860: 496e 2063 6173 6520 6f66 2033 2064 696d  In case of 3 dim
-00002870: 656e 7369 6f6e 7320 652e 672e 0020 2020  ensions e.g..   
-00002880: 2020 2020 2054 6865 2064 696d 656e 7369       The dimensi
-00002890: 6f6e 206f 7264 6572 2064 6570 656e 6473  on order depends
-000028a0: 206f 6e20 7468 6520 7072 6573 656e 6365   on the presence
-000028b0: 206f 6620 6e75 6d65 7269 6320 6172 7261   of numeric arra
-000028c0: 7920 696e 2074 6865 2064 696d 656e 7369  y in the dimensi
-000028d0: 6f6e 7300 0020 2020 2020 2020 2022 2222  ons..        """
-000028e0: 5475 706c 6520 6f66 2069 6e74 2072 6570  Tuple of int rep
-000028f0: 7265 7365 6e74 696e 6720 7468 6520 6469  resenting the di
-00002900: 6d65 6e73 696f 6e20 6f72 6465 722e 0020  mension order.. 
-00002910: 2020 2064 6566 2064 696d 656e 7369 6f6e     def dimension
-00002920: 5f6f 7264 6572 2873 656c 6629 202d 3e20  _order(self) -> 
-00002930: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
-00002940: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-00002950: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-00002960: 726e 205f 4170 7061 7265 6e74 4469 6d65  rn _ApparentDime
-00002970: 6e73 696f 6e73 2861 6c6c 5f64 696d 656e  nsions(all_dimen
-00002980: 7369 6f6e 733d 7365 6c66 2e5f 6469 6d65  sions=self._dime
-00002990: 6e73 696f 6e73 2900 2020 2020 2020 2020  nsions).        
-000029a0: 2222 2200 2020 2020 2020 2020 636f 6e66  """.        conf
-000029b0: 6c61 7465 6420 696e 746f 2061 2073 696e  lated into a sin
-000029c0: 676c 6520 6469 6d65 6e73 696f 6e73 2069  gle dimensions i
-000029d0: 6e20 7468 6973 2063 6f6c 6c65 6374 696f  n this collectio
-000029e0: 6e2e 0020 2020 2020 2020 2054 6865 2074  n..        The t
-000029f0: 776f 2064 696d 656e 7369 6f6e 7320 666f  wo dimensions fo
-00002a00: 7220 6120 6d75 6c74 6970 6c65 2d72 6573  r a multiple-res
-00002a10: 706f 6e73 6520 284d 5229 2076 6172 6961  ponse (MR) varia
-00002a20: 626c 6520 6172 6500 0020 2020 2020 2020  ble are..       
-00002a30: 2022 2222 5f41 7070 6172 656e 7444 696d   """_ApparentDim
-00002a40: 656e 7369 6f6e 7320 636f 6c6c 6563 7469  ensions collecti
-00002a50: 6f6e 206f 6620 7468 6520 2276 6973 6962  on of the "visib
-00002a60: 6c65 2220 6469 6d65 6e73 696f 6e73 2e00  le" dimensions..
-00002a70: 2020 2020 6465 6620 6170 7061 7265 6e74      def apparent
-00002a80: 5f64 696d 656e 7369 6f6e 7328 7365 6c66  _dimensions(self
-00002a90: 2920 2d3e 2022 5f41 7070 6172 656e 7444  ) -> "_ApparentD
-00002aa0: 696d 656e 7369 6f6e 7322 3a00 2020 2020  imensions":.    
-00002ab0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00002ac0: 2020 2020 2020 2073 656c 662e 5f64 696d         self._dim
-00002ad0: 656e 7369 6f6e 5f64 6963 7473 203d 2064  ension_dicts = d
-00002ae0: 696d 656e 7369 6f6e 5f64 6963 7473 0020  imension_dicts. 
-00002af0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00002b00: 7365 6c66 2c20 6469 6d65 6e73 696f 6e5f  self, dimension_
-00002b10: 6469 6374 7329 3a00 0020 2020 2022 2222  dicts):..    """
-00002b20: 436f 6c6c 6563 7469 6f6e 2063 6f6e 7461  Collection conta
-00002b30: 696e 696e 6720 6576 6572 7920 6469 6d65  ining every dime
-00002b40: 6e73 696f 6e20 6465 6669 6e65 6420 696e  nsion defined in
-00002b50: 2063 7562 6520 7265 7370 6f6e 7365 2e22   cube response."
-00002b60: 2222 0063 6c61 7373 2041 6c6c 4469 6d65  "".class AllDime
-00002b70: 6e73 696f 6e73 285f 4261 7365 4469 6d65  nsions(_BaseDime
-00002b80: 6e73 696f 6e73 293a 0000 0020 2020 2020  nsions):...     
-00002b90: 2020 2029 2020 2320 7072 6167 6d61 3a20     )  # pragma: 
-00002ba0: 6e6f 2063 6f76 6572 0020 2020 2020 2020  no cover.       
-00002bb0: 2020 2020 2022 6d75 7374 2062 6520 696d       "must be im
-00002bc0: 706c 656d 656e 7465 6420 6279 2065 6163  plemented by eac
-00002bd0: 6820 7375 6263 6c61 7373 2200 2020 2020  h subclass".    
-00002be0: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
-00002bf0: 6c65 6d65 6e74 6564 4572 726f 7228 0020  lementedError(. 
-00002c00: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-00002c10: 2020 2063 6f6c 6c65 6374 696f 6e2e 0020     collection.. 
-00002c20: 2020 2020 2020 2054 6869 7320 636f 6d70         This comp
-00002c30: 6f73 6564 2074 7570 6c65 2069 7320 7468  osed tuple is th
-00002c40: 6520 736f 7572 6365 2066 6f72 2074 6865  e source for the
-00002c50: 2064 696d 656e 7369 6f6e 206f 626a 6563   dimension objec
-00002c60: 7473 2069 6e20 7468 6973 0000 2020 2020  ts in this..    
-00002c70: 2020 2020 2222 2274 7570 6c65 206f 6620      """tuple of 
-00002c80: 6469 6d65 6e73 696f 6e20 6f62 6a65 6374  dimension object
-00002c90: 7320 696e 2074 6869 7320 636f 6c6c 6563  s in this collec
-00002ca0: 7469 6f6e 2e00 2020 2020 6465 6620 5f64  tion..    def _d
-00002cb0: 696d 656e 7369 6f6e 7328 7365 6c66 2920  imensions(self) 
-00002cc0: 2d3e 2054 7570 6c65 5b22 4469 6d65 6e73  -> Tuple["Dimens
-00002cd0: 696f 6e22 2c20 2e2e 2e5d 3a00 2020 2020  ion", ...]:.    
-00002ce0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00002cf0: 2020 2020 2020 2072 6574 7572 6e20 6c65         return le
-00002d00: 6e28 7365 6c66 2e5f 6469 6d65 6e73 696f  n(self._dimensio
-00002d10: 6e73 2900 2020 2020 2020 2020 2222 2249  ns).        """I
-00002d20: 6d70 6c65 6d65 6e74 7320 6c65 6e28 656c  mplements len(el
-00002d30: 656d 656e 7473 292e 2222 2200 2020 2020  ements).""".    
-00002d40: 6465 6620 5f5f 6c65 6e5f 5f28 7365 6c66  def __len__(self
-00002d50: 293a 0000 2020 2020 2020 2020 7265 7475  ):..        retu
-00002d60: 726e 2069 7465 7228 7365 6c66 2e5f 6469  rn iter(self._di
-00002d70: 6d65 6e73 696f 6e73 2900 2020 2020 2020  mensions).      
-00002d80: 2020 2222 2249 6d70 6c65 6d65 6e74 7320    """Implements 
-00002d90: 2865 6666 6963 6965 6e74 2920 6974 6572  (efficient) iter
-00002da0: 6162 696c 6974 792e 2222 2200 2020 2020  ability.""".    
-00002db0: 6465 6620 5f5f 6974 6572 5f5f 2873 656c  def __iter__(sel
-00002dc0: 6629 3a00 0020 2020 2020 2020 2072 6574  f):..        ret
-00002dd0: 7572 6e20 7365 6c66 2e5f 6469 6d65 6e73  urn self._dimens
-00002de0: 696f 6e73 5b69 6478 5f6f 725f 736c 6963  ions[idx_or_slic
-00002df0: 655d 0020 2020 2020 2020 2022 2222 496d  e].        """Im
-00002e00: 706c 656d 656e 7473 2069 6e64 6578 6564  plements indexed
-00002e10: 2061 6363 6573 732e 2222 2200 2020 2020   access.""".    
-00002e20: 6465 6620 5f5f 6765 7469 7465 6d5f 5f28  def __getitem__(
-00002e30: 7365 6c66 2c20 6964 785f 6f72 5f73 6c69  self, idx_or_sli
-00002e40: 6365 293a 0000 2020 2020 2222 2242 6173  ce):..    """Bas
-00002e50: 6520 636c 6173 7320 666f 7220 6469 6d65  e class for dime
-00002e60: 6e73 696f 6e20 636f 6c6c 6563 7469 6f6e  nsion collection
-00002e70: 732e 2222 2200 636c 6173 7320 5f42 6173  s.""".class _Bas
-00002e80: 6544 696d 656e 7369 6f6e 7328 5365 7175  eDimensions(Sequ
-00002e90: 656e 6365 293a 0000 0066 726f 6d20 6372  ence):...from cr
-00002ea0: 2e63 7562 652e 7574 696c 2069 6d70 6f72  .cube.util impor
-00002eb0: 7420 6c61 7a79 7072 6f70 6572 7479 0029  t lazyproperty.)
-00002ec0: 0020 2020 205f 4469 6d65 6e73 696f 6e54  .    _DimensionT
-00002ed0: 7970 652c 0020 2020 204d 4541 5355 5245  ype,.    MEASURE
-00002ee0: 2c00 2020 2020 4d41 5247 494e 414c 2c00  ,.    MARGINAL,.
-00002ef0: 2020 2020 4449 4d45 4e53 494f 4e5f 5459      DIMENSION_TY
-00002f00: 5045 2061 7320 4454 2c00 2020 2020 434f  PE as DT,.    CO
-00002f10: 4c4c 4154 494f 4e5f 4d45 5448 4f44 2061  LLATION_METHOD a
-00002f20: 7320 434d 2c00 6672 6f6d 2063 722e 6375  s CM,.from cr.cu
-00002f30: 6265 2e65 6e75 6d73 2069 6d70 6f72 7420  be.enums import 
-00002f40: 2800 0069 6d70 6f72 7420 6e75 6d70 7920  (..import numpy 
-00002f50: 6173 206e 7000 0066 726f 6d20 7479 7069  as np..from typi
-00002f60: 6e67 2069 6d70 6f72 7420 4469 6374 2c20  ng import Dict, 
-00002f70: 4974 6572 6174 6f72 2c20 4c69 7374 2c20  Iterator, List, 
-00002f80: 4f70 7469 6f6e 616c 2c20 5475 706c 652c  Optional, Tuple,
-00002f90: 2055 6e69 6f6e 0066 726f 6d20 636f 6c6c   Union.from coll
-00002fa0: 6563 7469 6f6e 732e 6162 6320 696d 706f  ections.abc impo
-00002fb0: 7274 2053 6571 7565 6e63 6500 696d 706f  rt Sequence.impo
-00002fc0: 7274 2063 6f70 7900 0022 2222 5072 6f76  rt copy.."""Prov
-00002fd0: 6964 6573 2074 6865 2044 696d 656e 7369  ides the Dimensi
-00002fe0: 6f6e 2063 6c61 7373 2e22 2222 0000 2320  on class."""..# 
-00002ff0: 656e 636f 6469 6e67 3a20 7574 662d 3800  encoding: utf-8.
-00003000: 6164 0000 1600 0000 c201 0000 0010 0000  ad..............
-00003010: 6400 0000 0000 0000 e90f 0000 dd0f 0000  d...............
-00003020: af0f 0000 ae0f 0000 9c0f 0000 6e0f 0000  ............n...
-00003030: 1c0f 0000 1b0f 0000 d90e 0000 cd0e 0000  ................
-00003040: 8d0e 0000 8c0e 0000 7a0e 0000 570e 0000  ........z...W...
-00003050: 080e 0000 070e 0000 ae0d 0000 a20d 0000  ................
-00003060: 720d 0000 710d 0000 5f0d 0000 3b0d 0000  r...q..._...;...
-00003070: e00c 0000 df0c 0000 860c 0000 2c0c 0000  ............,...
-00003080: 030c 0000 f70b 0000 c80b 0000 c70b 0000  ................
-00003090: b50b 0000 8e0b 0000 500b 0000 4f0b 0000  ........P...O...
-000030a0: f90a 0000 a00a 0000 940a 0000 680a 0000  ............h...
-000030b0: 670a 0000 550a 0000 330a 0000 da09 0000  g...U...3.......
-000030c0: d909 0000 8109 0000 2809 0000 0009 0000  ........(.......
-000030d0: f408 0000 c708 0000 c608 0000 b408 0000  ................
-000030e0: 8e08 0000 5108 0000 5008 0000 fb07 0000  ....Q...P.......
-000030f0: a207 0000 4a07 0000 f806 0000 db06 0000  ....J...........
-00003100: cf06 0000 a406 0000 a306 0000 9106 0000  ................
-00003110: 6106 0000 0d06 0000 0c06 0000 bf05 0000  a...............
-00003120: b005 0000 a405 0000 5d05 0000 5c05 0000  ........]...\...
-00003130: 4a05 0000 2705 0000 dc04 0000 db04 0000  J...'...........
-00003140: a404 0000 9804 0000 5604 0000 5504 0000  ........V...U...
-00003150: 5404 0000 3804 0000 0204 0000 0104 0000  T...8...........
-00003160: b603 0000 9703 0000 9603 0000 5303 0000  ............S...
-00003170: 4b03 0000 4a03 0000 1103 0000 e102 0000  K...J...........
-00003180: b302 0000 b202 0000 8902 0000 6002 0000  ............`...
-00003190: 3302 0000 3202 0000 1a02 0000 e801 0000  3...2...........
-000031a0: c301 0000 c201 0000 c101 0000 0000 0000  ................
-000031b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031c0: 0000 0020 2020 2020 2020 2072 6574 7572  ...        retur
-000031d0: 6e20 6974 6572 2873 656c 662e 5f73 7562  n iter(self._sub
-000031e0: 746f 7461 6c73 2900 2020 2020 2020 2020  totals).        
-000031f0: 2222 2249 6d70 6c65 6d65 6e74 7320 2865  """Implements (e
-00003200: 6666 6963 6965 6e74 2920 6974 6572 6162  fficient) iterab
-00003210: 696c 6974 792e 2222 2200 2020 2020 6465  ility.""".    de
-00003220: 6620 5f5f 6974 6572 5f5f 2873 656c 6629  f __iter__(self)
-00003230: 3a00 0020 2020 2020 2020 2072 6574 7572  :..        retur
-00003240: 6e20 7365 6c66 2e5f 7375 6274 6f74 616c  n self._subtotal
-00003250: 735b 6964 785f 6f72 5f73 6c69 6365 5d00  s[idx_or_slice].
-00003260: 2020 2020 2020 2020 2222 2249 6d70 6c65          """Imple
-00003270: 6d65 6e74 7320 696e 6465 7865 6420 6163  ments indexed ac
-00003280: 6365 7373 2e22 2222 0020 2020 2064 6566  cess.""".    def
-00003290: 205f 5f67 6574 6974 656d 5f5f 2873 656c   __getitem__(sel
-000032a0: 662c 2069 6478 5f6f 725f 736c 6963 6529  f, idx_or_slice)
-000032b0: 3a00 0020 2020 2020 2020 2073 656c 662e  :..        self.
-000032c0: 5f76 616c 6964 5f65 6c65 6d65 6e74 7320  _valid_elements 
-000032d0: 3d20 7661 6c69 645f 656c 656d 656e 7473  = valid_elements
-000032e0: 0020 2020 2020 2020 2073 656c 662e 5f69  .        self._i
-000032f0: 6e73 6572 7469 6f6e 5f64 6963 7473 203d  nsertion_dicts =
-00003300: 2069 6e73 6572 7469 6f6e 5f64 6963 7473   insertion_dicts
-00003310: 0020 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00003320: 5f28 7365 6c66 2c20 696e 7365 7274 696f  _(self, insertio
-00003330: 6e5f 6469 6374 732c 2076 616c 6964 5f65  n_dicts, valid_e
-00003340: 6c65 6d65 6e74 7329 3a00 0020 2020 2022  lements):..    "
-00003350: 2222 0020 2020 2041 2073 7562 746f 7461  "".    A subtota
-00003360: 6c20 6361 6e20 6f6e 6c79 2069 6e76 6f6c  l can only invol
-00003370: 7665 2076 616c 6964 2028 692e 652e 206e  ve valid (i.e. n
-00003380: 6f6e 2d6d 6973 7369 6e67 2920 656c 656d  on-missing) elem
-00003390: 656e 7473 2e00 0020 2020 2064 6566 696e  ents...    defin
-000033a0: 6564 2066 6f72 2074 6865 2064 696d 656e  ed for the dimen
-000033b0: 7369 6f6e 2e00 2020 2020 4561 6368 205f  sion..    Each _
-000033c0: 5375 6274 6f74 616c 206f 626a 6563 7420  Subtotal object 
-000033d0: 7265 7072 6573 656e 7473 2061 2022 7375  represents a "su
-000033e0: 6274 6f74 616c 2220 696e 7365 7274 696f  btotal" insertio
-000033f0: 6e20 7472 616e 7366 6f72 6d61 7469 6f6e  n transformation
-00003400: 0000 2020 2020 2222 2253 6571 7565 6e63  ..    """Sequenc
-00003410: 6520 6f66 205f 5375 6274 6f74 616c 206f  e of _Subtotal o
-00003420: 626a 6563 7473 2066 6f72 2061 2064 696d  bjects for a dim
-00003430: 656e 7369 6f6e 2e00 636c 6173 7320 5f53  ension..class _S
-00003440: 7562 746f 7461 6c73 2853 6571 7565 6e63  ubtotals(Sequenc
-00003450: 6529 3a00 0000 2020 2020 2020 2020 7265  e):...        re
-00003460: 7475 726e 2073 656c 662e 5f64 696d 656e  turn self._dimen
-00003470: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
-00003480: 6469 6374 2e67 6574 2822 6f72 6465 7222  dict.get("order"
-00003490: 2920 6f72 207b 7d00 2020 2020 2020 2020  ) or {}.        
-000034a0: 2222 2200 2020 2020 2020 2020 5661 6c75  """.        Valu
-000034b0: 6520 6973 2060 7b7d 6020 6966 206e 6f20  e is `{}` if no 
-000034c0: 226f 7264 6572 223a 2066 6965 6c64 2069  "order": field i
-000034d0: 7320 7072 6573 656e 742e 0000 2020 2020  s present...    
-000034e0: 2020 2020 2222 2264 6963 7420 6469 6d65      """dict dime
-000034f0: 6e73 696f 6e2e 7472 616e 7366 6f72 6d73  nsion.transforms
-00003500: 2e6f 7264 6572 2066 6965 6c64 2070 6172  .order field par
-00003510: 7365 6420 6672 6f6d 204a 534f 4e20 7061  sed from JSON pa
-00003520: 796c 6f61 642e 0020 2020 2064 6566 205f  yload..    def _
-00003530: 6f72 6465 725f 6469 6374 2873 656c 6629  order_dict(self)
-00003540: 202d 3e20 4469 6374 3a00 2020 2020 406c   -> Dict:.    @l
-00003550: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-00003560: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00003570: 6528 7365 6c66 2e5f 6f72 6465 725f 6469  e(self._order_di
-00003580: 6374 2e67 6574 2822 6669 7865 6422 2c20  ct.get("fixed", 
-00003590: 7b7d 292e 6765 7428 2274 6f70 222c 205b  {}).get("top", [
-000035a0: 5d29 2900 2020 2020 2020 2020 2222 2200  ])).        """.
-000035b0: 2020 2020 2020 2020 6669 656c 642e 0020          field.. 
-000035c0: 2020 2020 2020 2054 6865 2065 6c65 6d65         The eleme
-000035d0: 6e74 2d69 6473 2061 7070 6561 7220 696e  nt-ids appear in
-000035e0: 2074 6865 206f 7264 6572 2073 7065 6369   the order speci
-000035f0: 6669 6564 2069 6e20 7468 6520 2274 6f70  fied in the "top
-00003600: 2220 6669 7865 642e 746f 7000 0020 2020  " fixed.top..   
-00003610: 2020 2020 2022 2222 5475 706c 6520 6f66       """Tuple of
-00003620: 2065 6163 6820 656c 656d 656e 742d 6964   each element-id
-00003630: 2061 7070 6561 7269 6e67 2069 6e20 7468   appearing in th
-00003640: 6520 6669 7865 642e 746f 7020 6669 656c  e fixed.top fiel
-00003650: 6420 6f66 206f 7264 6572 2064 6963 742e  d of order dict.
-00003660: 0020 2020 2064 6566 2074 6f70 5f66 6978  .    def top_fix
-00003670: 6564 5f69 6473 2873 656c 6629 202d 3e20  ed_ids(self) -> 
-00003680: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
-00003690: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-000036a0: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-000036b0: 726e 2073 656c 662e 5f6f 7264 6572 5f64  rn self._order_d
-000036c0: 6963 745b 226d 6561 7375 7265 225d 0020  ict["measure"]. 
-000036d0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-000036e0: 2020 204d 4541 5355 5245 2065 6e75 6d65     MEASURE enume
-000036f0: 7261 7469 6f6e 2e00 2020 2020 2020 2020  ration..        
-00003700: 6265 6361 7573 6520 6974 7320 6d65 6173  because its meas
-00003710: 7572 6520 6b65 7977 6f72 6473 2064 6f20  ure keywords do 
-00003720: 6e6f 7420 636f 7272 6573 706f 6e64 2064  not correspond d
-00003730: 6972 6563 746c 7920 746f 206d 656d 6265  irectly to membe
-00003740: 7273 206f 6620 7468 6500 2020 2020 2020  rs of the.      
-00003750: 2020 4e6f 7465 2061 6c73 6f20 7468 6174    Note also that
-00003760: 2074 6869 7320 7072 6f70 6572 7479 2069   this property i
-00003770: 7320 7265 7175 6972 6564 2066 6f72 2074  s required for t
-00003780: 6865 2022 756e 6976 6172 6961 7465 5f6d  he "univariate_m
-00003790: 6561 7375 7265 2220 736f 7274 2074 7970  easure" sort typ
-000037a0: 6500 2020 2020 2020 2020 6f72 6465 7220  e.        order 
-000037b0: 7479 7065 7320 7573 6520 7468 6520 226d  types use the "m
-000037c0: 6561 7375 7265 223a 2066 6965 6c64 2c20  easure": field, 
-000037d0: 6275 7420 6974 2069 7320 6120 7265 7175  but it is a requ
-000037e0: 6972 6564 2066 6965 6c64 2069 6e20 616c  ired field in al
-000037f0: 6c20 7468 6174 2064 6f2e 0020 2020 2020  l that do..     
-00003800: 2020 2052 6169 7365 7320 4b65 7945 7272     Raises KeyErr
-00003810: 6f72 2069 6620 7468 6520 6f72 6465 7220  or if the order 
-00003820: 6469 6374 2068 6173 206e 6f20 226d 6561  dict has no "mea
-00003830: 7375 7265 223a 2066 6965 6c64 2e20 4e6f  sure": field. No
-00003840: 7465 2074 6861 7420 6e6f 7420 616c 6c00  te that not all.
-00003850: 0020 2020 2020 2020 2022 2222 7374 7220  .        """str 
-00003860: 7661 6c75 6520 6f66 2022 6d65 6173 7572  value of "measur
-00003870: 6522 3a20 6669 656c 6420 696e 206f 7264  e": field in ord
-00003880: 6572 2074 7261 6e73 666f 726d 2e00 2020  er transform..  
-00003890: 2020 6465 6620 6d65 6173 7572 655f 6b65    def measure_ke
-000038a0: 796e 616d 6528 7365 6c66 2920 2d3e 2073  yname(self) -> s
-000038b0: 7472 3a00 2020 2020 406c 617a 7970 726f  tr:.    @lazypro
-000038c0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-000038d0: 6574 7572 6e20 4d45 4153 5552 4528 7365  eturn MEASURE(se
-000038e0: 6c66 2e6d 6561 7375 7265 5f6b 6579 6e61  lf.measure_keyna
-000038f0: 6d65 2900 2020 2020 2020 2020 2222 2200  me).        """.
-00003900: 2020 2020 2020 2020 7479 7065 7320 7573          types us
-00003910: 6520 7468 6520 226d 6561 7375 7265 223a  e the "measure":
-00003920: 2066 6965 6c64 2e00 2020 2020 2020 2020   field..        
-00003930: 7661 6c75 6520 696e 2074 6861 7420 6669  value in that fi
-00003940: 656c 6420 6973 206e 6f74 2061 2072 6563  eld is not a rec
-00003950: 6f67 6e69 7a65 6420 6d65 6173 7572 6520  ognized measure 
-00003960: 6b65 7977 6f72 642e 204e 6f74 6520 7468  keyword. Note th
-00003970: 6174 206e 6f74 2061 6c6c 206f 7264 6572  at not all order
-00003980: 0020 2020 2020 2020 2052 6169 7365 7320  .        Raises 
-00003990: 4b65 7945 7272 6f72 2069 6620 7468 6520  KeyError if the 
-000039a0: 6f72 6465 7220 6469 6374 2068 6173 206e  order dict has n
-000039b0: 6f20 226d 6561 7375 7265 223a 2066 6965  o "measure": fie
-000039c0: 6c64 2061 6e64 2056 616c 7565 4572 726f  ld and ValueErro
-000039d0: 7220 6966 2074 6865 0000 2020 2020 2020  r if the..      
-000039e0: 2020 2222 224d 656d 6265 7220 6f66 2065    """Member of e
-000039f0: 6e75 6d73 2e4d 4541 5355 5245 2063 6f72  nums.MEASURE cor
-00003a00: 7265 7370 6f6e 6469 6e67 2074 6f20 226d  responding to "m
-00003a10: 6561 7375 7265 223a 2066 6965 6c64 2069  easure": field i
-00003a20: 6e20 6f72 6465 7220 7472 616e 7366 6f72  n order transfor
-00003a30: 6d2e 0020 2020 2064 6566 206d 6561 7375  m..    def measu
-00003a40: 7265 2873 656c 6629 202d 3e20 4d45 4153  re(self) -> MEAS
-00003a50: 5552 453a 0020 2020 2040 6c61 7a79 7072  URE:.    @lazypr
-00003a60: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00003a70: 7265 7475 726e 2073 656c 662e 5f6f 7264  return self._ord
-00003a80: 6572 5f64 6963 745b 226d 6172 6769 6e61  er_dict["margina
-00003a90: 6c22 5d00 2020 2020 2020 2020 2222 2200  l"].        """.
-00003aa0: 2020 2020 2020 2020 6f72 6465 7220 7479          order ty
-00003ab0: 7065 7320 7573 6520 7468 6520 226d 6561  pes use the "mea
-00003ac0: 7375 7265 223a 2066 6965 6c64 2c20 6275  sure": field, bu
-00003ad0: 7420 6974 2069 7320 6120 7265 7175 6972  t it is a requir
-00003ae0: 6564 2066 6965 6c64 2069 6e20 616c 6c20  ed field in all 
-00003af0: 7468 6174 2064 6f2e 0020 2020 2020 2020  that do..       
-00003b00: 2052 6169 7365 7320 4b65 7945 7272 6f72   Raises KeyError
-00003b10: 2069 6620 7468 6520 6f72 6465 7220 6469   if the order di
-00003b20: 6374 2068 6173 206e 6f20 226d 6172 6769  ct has no "margi
-00003b30: 6e61 6c22 3a20 6669 656c 642e 204e 6f74  nal": field. Not
-00003b40: 6520 7468 6174 206e 6f74 2061 6c6c 0000  e that not all..
-00003b50: 2020 2020 2020 2020 2222 2273 7472 2076          """str v
-00003b60: 616c 7565 206f 6620 226d 6172 6769 6e61  alue of "margina
-00003b70: 6c22 3a20 6669 656c 6420 696e 206f 7264  l": field in ord
-00003b80: 6572 2074 7261 6e73 666f 726d 2e00 2020  er transform..  
-00003b90: 2020 6465 6620 6d61 7267 696e 616c 5f6b    def marginal_k
-00003ba0: 6579 6e61 6d65 2873 656c 6629 202d 3e20  eyname(self) -> 
-00003bb0: 7374 723a 0020 2020 2040 6c61 7a79 7072  str:.    @lazypr
-00003bc0: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00003bd0: 7265 7475 726e 204d 4152 4749 4e41 4c28  return MARGINAL(
-00003be0: 7365 6c66 2e6d 6172 6769 6e61 6c5f 6b65  self.marginal_ke
-00003bf0: 796e 616d 6529 0020 2020 2020 2020 2022  yname).        "
-00003c00: 2222 0020 2020 2020 2020 2074 7970 6573  "".        types
-00003c10: 2075 7365 2074 6865 2022 6d61 7267 696e   use the "margin
-00003c20: 616c 223a 2066 6965 6c64 2e00 2020 2020  al": field..    
-00003c30: 2020 2020 7661 6c75 6520 696e 2074 6861      value in tha
-00003c40: 7420 6669 656c 6420 6973 206e 6f74 2061  t field is not a
-00003c50: 2072 6563 6f67 6e69 7a65 6420 6d61 7267   recognized marg
-00003c60: 696e 616c 206b 6579 776f 7264 2e20 4e6f  inal keyword. No
-00003c70: 7465 2074 6861 7420 6e6f 7420 616c 6c20  te that not all 
-00003c80: 6f72 6465 7200 2020 2020 2020 2020 5261  order.        Ra
-00003c90: 6973 6573 204b 6579 4572 726f 7220 6966  ises KeyError if
-00003ca0: 2074 6865 206f 7264 6572 2064 6963 7420   the order dict 
-00003cb0: 6861 7320 6e6f 2022 6d61 7267 696e 616c  has no "marginal
-00003cc0: 223a 2066 6965 6c64 2061 6e64 2056 616c  ": field and Val
-00003cd0: 7565 4572 726f 7220 6966 2074 6865 0000  ueError if the..
-00003ce0: 2020 2020 2020 2020 2222 224d 656d 6265          """Membe
-00003cf0: 7220 6f66 2065 6e75 6d73 2e4d 4152 4749  r of enums.MARGI
-00003d00: 4e41 4c20 636f 7272 6573 706f 6e64 696e  NAL correspondin
-00003d10: 6720 746f 2022 6d61 7267 696e 616c 223a  g to "marginal":
-00003d20: 2066 6965 6c64 2069 6e20 6f72 6465 7220   field in order 
-00003d30: 7472 616e 7366 6f72 6d2e 0020 2020 2064  transform..    d
-00003d40: 6566 206d 6172 6769 6e61 6c28 7365 6c66  ef marginal(self
-00003d50: 2920 2d3e 204d 4152 4749 4e41 4c3a 0020  ) -> MARGINAL:. 
-00003d60: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00003d70: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00003d80: 2073 656c 662e 5f6f 7264 6572 5f64 6963   self._order_dic
-00003d90: 745b 2269 6e73 6572 7469 6f6e 5f69 6422  t["insertion_id"
-00003da0: 5d00 2020 2020 2020 2020 2222 2200 2020  ].        """.  
-00003db0: 2020 2020 2020 5261 6973 6573 204b 6579        Raises Key
-00003dc0: 4572 726f 7220 6966 2074 6869 7320 7472  Error if this tr
-00003dd0: 616e 7366 6f72 6d20 6469 6374 2064 6f65  ansform dict doe
-00003de0: 7320 6e6f 7420 636f 6e74 6169 6e20 616e  s not contain an
-00003df0: 2022 696e 7365 7274 696f 6e5f 6964 2220   "insertion_id" 
-00003e00: 6669 656c 642e 0000 2020 2020 2020 2020  field...        
-00003e10: 2222 2269 6e74 2069 6e73 6572 7469 6f6e  """int insertion
-00003e20: 2d69 6420 696e 2074 6865 2022 696e 7365  -id in the "inse
-00003e30: 7274 696f 6e5f 6964 2220 6669 656c 6420  rtion_id" field 
-00003e40: 6f66 2074 6865 2074 7261 6e73 666f 726d  of the transform
-00003e50: 2064 6963 742e 0020 2020 2064 6566 2069   dict..    def i
-00003e60: 6e73 6572 7469 6f6e 5f69 6428 7365 6c66  nsertion_id(self
-00003e70: 2920 2d3e 2069 6e74 3a00 2020 2020 406c  ) -> int:.    @l
-00003e80: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-00003e90: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00003ea0: 6528 7365 6c66 2e5f 6f72 6465 725f 6469  e(self._order_di
-00003eb0: 6374 2e67 6574 2822 656c 656d 656e 745f  ct.get("element_
-00003ec0: 6964 7322 2920 6f72 205b 5d29 0020 2020  ids") or []).   
-00003ed0: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00003ee0: 2054 6869 7320 7661 6c75 6520 6973 2060   This value is `
-00003ef0: 2829 6020 6966 206e 6f20 2265 6c65 6d65  ()` if no "eleme
-00003f00: 6e74 5f69 6473 223a 2066 6965 6c64 2069  nt_ids": field i
-00003f10: 7320 7072 6573 656e 742e 0000 2020 2020  s present...    
-00003f20: 2020 2020 2222 2274 7570 6c65 206f 6620      """tuple of 
-00003f30: 696e 7420 6561 6368 2065 6c65 6d65 6e74  int each element
-00003f40: 2069 6420 6170 7065 6172 696e 6720 696e   id appearing in
-00003f50: 2061 6e20 6578 706c 6963 6974 206f 7264   an explicit ord
-00003f60: 6572 2074 7261 6e73 666f 726d 2e00 2020  er transform..  
-00003f70: 2020 6465 6620 656c 656d 656e 745f 6964    def element_id
-00003f80: 7328 7365 6c66 2920 2d3e 2054 7570 6c65  s(self) -> Tuple
-00003f90: 5b69 6e74 2c20 2e2e 2e5d 3a00 2020 2020  [int, ...]:.    
-00003fa0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00003fb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00003fc0: 6c66 2e5f 6f72 6465 725f 6469 6374 5b22  lf._order_dict["
-00003fd0: 656c 656d 656e 745f 6964 225d 0020 2020  element_id"].   
-00003fe0: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00003ff0: 2074 686f 7365 2074 6861 7420 646f 2e00   those that do..
-00004000: 6164 0000 4100 0000 d101 0000 0010 0000  ad..A...........
-00004010: 5d00 0000 0000 0000 b70f 0000 970f 0000  ]...............
-00004020: 7d0f 0000 550f 0000 330f 0000 320f 0000  }...U...3...2...
-00004030: 200f 0000 f30e 0000 ac0e 0000 ab0e 0000   ...............
-00004040: 680e 0000 390e 0000 2d0e 0000 e60d 0000  h...9...-.......
-00004050: a80d 0000 910d 0000 600d 0000 5f0d 0000  ........`..._...
-00004060: 060d 0000 050d 0000 f30c 0000 ca0c 0000  ................
-00004070: 7c0c 0000 7b0c 0000 270c 0000 e70b 0000  |...{...'.......
-00004080: db0b 0000 b60b 0000 9a0b 0000 8c0b 0000  ................
-00004090: 780b 0000 350b 0000 020b 0000 f30a 0000  x...5...........
-000040a0: a10a 0000 970a 0000 960a 0000 840a 0000  ................
-000040b0: 690a 0000 270a 0000 260a 0000 d209 0000  i...'...&.......
-000040c0: 7b09 0000 3309 0000 2709 0000 cf08 0000  {...3...'.......
-000040d0: 7e08 0000 4908 0000 4808 0000 3608 0000  ~...I...H...6...
-000040e0: 1308 0000 ba07 0000 7007 0000 6f07 0000  ........p...o...
-000040f0: 5d07 0000 3807 0000 f506 0000 cc06 0000  ]...8...........
-00004100: cb06 0000 b906 0000 9d06 0000 5006 0000  ............P...
-00004110: 2106 0000 fd05 0000 fc05 0000 ea05 0000  !...............
-00004120: b905 0000 6f05 0000 6e05 0000 2b05 0000  ....o...n...+...
-00004130: fc04 0000 f004 0000 da04 0000 ca04 0000  ................
-00004140: 7904 0000 4204 0000 3804 0000 3704 0000  y...B...8...7...
-00004150: 2504 0000 f803 0000 9a03 0000 9903 0000  %...............
-00004160: 4503 0000 0503 0000 f902 0000 dd02 0000  E...............
-00004170: cf02 0000 bb02 0000 7802 0000 3c02 0000  ........x...<...
-00004180: 2d02 0000 db01 0000 d101 0000 d001 0000  -...............
-00004190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000041a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000041b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000041c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000041d0: 0020 2020 2020 2020 2029 0020 2020 2020  .        ).     
-000041e0: 2020 2020 2020 2064 7479 7065 3d6e 702e         dtype=np.
-000041f0: 696e 7436 342c 2020 2320 666f 7263 6520  int64,  # force 
-00004200: 696e 7420 736f 2069 7420 6361 6e20 6265  int so it can be
-00004210: 2075 7365 6420 6173 2069 6e64 6578 2065   used as index e
-00004220: 7665 6e20 6966 2065 6d70 7479 0020 2020  ven if empty.   
-00004230: 2020 2020 2020 2020 2029 2c00 2020 2020           ),.    
-00004240: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00004250: 6563 746f 722e 656c 656d 656e 745f 6964  ector.element_id
-00004260: 2069 6e20 7365 6c66 2e73 7562 7472 6168   in self.subtrah
-00004270: 656e 645f 6964 7300 2020 2020 2020 2020  end_ids.        
-00004280: 2020 2020 2020 2020 666f 7220 6964 782c          for idx,
-00004290: 2076 6563 746f 7220 696e 2065 6e75 6d65   vector in enume
-000042a0: 7261 7465 2873 656c 662e 5f76 616c 6964  rate(self._valid
-000042b0: 5f65 6c65 6d65 6e74 7329 0020 2020 2020  _elements).     
-000042c0: 2020 2020 2020 2020 2020 2069 6478 0020             idx. 
-000042d0: 2020 2020 2020 2020 2020 2028 0020 2020             (.   
-000042e0: 2020 2020 2072 6574 7572 6e20 6e70 2e66       return np.f
-000042f0: 726f 6d69 7465 7228 0020 2020 2020 2020  romiter(.       
-00004300: 2022 2222 0020 2020 2020 2020 206d 6172   """.        mar
-00004310: 6769 6e29 2074 6f20 6578 7472 6163 7420  gin) to extract 
-00004320: 7468 6520 6164 6465 6e64 2076 616c 7565  the addend value
-00004330: 7320 666f 7220 7468 6973 2073 7562 746f  s for this subto
-00004340: 7461 6c2e 0020 2020 2020 2020 2053 7569  tal..        Sui
-00004350: 7461 626c 6520 666f 7220 6469 7265 6374  table for direct
-00004360: 6c79 2069 6e64 6578 696e 6720 6120 6e75  ly indexing a nu
-00004370: 6d70 7920 6172 7261 7920 6f62 6a65 6374  mpy array object
-00004380: 2028 7375 6368 2061 7320 6261 7365 2076   (such as base v
-00004390: 616c 7565 7320 6f72 0000 2020 2020 2020  alues or..      
-000043a0: 2020 2222 226e 6461 7272 6179 206f 6620    """ndarray of 
-000043b0: 696e 7420 6261 7365 2d65 6c65 6d65 6e74  int base-element
-000043c0: 206f 6666 7365 7473 2063 6f6e 7472 6962   offsets contrib
-000043d0: 7574 696e 6720 746f 2074 6865 206e 6567  uting to the neg
-000043e0: 6174 6976 6520 7061 7274 206f 6620 7375  ative part of su
-000043f0: 6274 6f74 616c 2e00 2020 2020 6465 6620  btotal..    def 
-00004400: 7375 6274 7261 6865 6e64 5f69 6478 7328  subtrahend_idxs(
-00004410: 7365 6c66 2920 2d3e 206e 702e 6e64 6172  self) -> np.ndar
-00004420: 7261 793a 0020 2020 2040 6c61 7a79 7072  ray:.    @lazypr
-00004430: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00004440: 2900 2020 2020 2020 2020 2020 2020 6966  ).            if
-00004450: 2061 7267 2069 6e20 7365 6c66 2e5f 7661   arg in self._va
-00004460: 6c69 645f 656c 656d 656e 7473 2e65 6c65  lid_elements.ele
-00004470: 6d65 6e74 5f69 6473 0020 2020 2020 2020  ment_ids.       
-00004480: 2020 2020 2066 6f72 2061 7267 2069 6e20       for arg in 
-00004490: 7365 6c66 2e5f 7375 6274 6f74 616c 5f64  self._subtotal_d
-000044a0: 6963 742e 6765 7428 226b 7761 7267 7322  ict.get("kwargs"
-000044b0: 2c20 7b7d 292e 6765 7428 226e 6567 6174  , {}).get("negat
-000044c0: 6976 6522 2c20 5b5d 2900 2020 2020 2020  ive", []).      
-000044d0: 2020 2020 2020 6172 6700 2020 2020 2020        arg.      
-000044e0: 2020 7265 7475 726e 2074 7570 6c65 2800    return tuple(.
-000044f0: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00004500: 2020 2020 7265 7072 6573 656e 7469 6e67      representing
-00004510: 206d 6973 7369 6e67 2064 6174 6120 6973   missing data is
-00004520: 2065 7863 6c75 6465 642e 0020 2020 2020   excluded..     
-00004530: 2020 2041 6e79 2065 6c65 6d65 6e74 2069     Any element i
-00004540: 6420 6e6f 7420 7072 6573 656e 7420 696e  d not present in
-00004550: 2074 6865 2064 696d 656e 7369 6f6e 206f   the dimension o
-00004560: 7220 7072 6573 656e 7420 6275 7400 0020  r present but.. 
-00004570: 2020 2020 2020 2022 2222 7475 706c 6520         """tuple 
-00004580: 6f66 2069 6e74 2069 6473 206f 6620 656c  of int ids of el
-00004590: 656d 656e 7473 206f 6620 6e65 6761 7469  ements of negati
-000045a0: 7665 2070 6172 7420 6f66 2074 6865 2073  ve part of the s
-000045b0: 7562 746f 7461 6c2e 0020 2020 2064 6566  ubtotal..    def
-000045c0: 2073 7562 7472 6168 656e 645f 6964 7328   subtrahend_ids(
-000045d0: 7365 6c66 2920 2d3e 2054 7570 6c65 5b69  self) -> Tuple[i
-000045e0: 6e74 2c20 2e2e 2e5d 3a00 2020 2020 406c  nt, ...]:.    @l
-000045f0: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-00004600: 2020 2020 2072 6574 7572 6e20 6e61 6d65       return name
-00004610: 2069 6620 6e61 6d65 2065 6c73 6520 2222   if name else ""
-00004620: 0020 2020 2020 2020 206e 616d 6520 3d20  .        name = 
-00004630: 7365 6c66 2e5f 7375 6274 6f74 616c 5f64  self._subtotal_d
-00004640: 6963 742e 6765 7428 226e 616d 6522 2900  ict.get("name").
-00004650: 2020 2020 2020 2020 2222 2273 7472 2064          """str d
-00004660: 6973 706c 6179 206e 616d 6520 666f 7220  isplay name for 
-00004670: 7468 6973 2073 7562 746f 7461 6c2c 2073  this subtotal, s
-00004680: 7569 7461 626c 6520 666f 7220 7573 6520  uitable for use 
-00004690: 6173 206c 6162 656c 2e22 2222 0020 2020  as label.""".   
-000046a0: 2064 6566 206c 6162 656c 2873 656c 6629   def label(self)
-000046b0: 202d 3e20 7374 723a 0020 2020 2040 6c61   -> str:.    @la
-000046c0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-000046d0: 2020 2020 7265 7475 726e 2062 6f6f 6c28      return bool(
-000046e0: 7365 6c66 2e73 7562 7472 6168 656e 645f  self.subtrahend_
-000046f0: 6964 7329 0020 2020 2020 2020 2022 2222  ids).        """
-00004700: 5472 7565 2069 6620 6120 7375 6274 6f74  True if a subtot
-00004710: 616c 2069 7320 6120 6469 6666 6572 656e  al is a differen
-00004720: 6365 2c20 4661 6c73 6520 6f74 6865 7277  ce, False otherw
-00004730: 6973 652e 2222 2200 2020 2020 6465 6620  ise.""".    def 
-00004740: 6973 5f64 6966 6665 7265 6e63 6528 7365  is_difference(se
-00004750: 6c66 2920 2d3e 2062 6f6f 6c3a 0020 2020  lf) -> bool:.   
-00004760: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00004770: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00004780: 656c 662e 5f73 7562 746f 7461 6c5f 6469  elf._subtotal_di
-00004790: 6374 2e67 6574 2822 6964 222c 2073 656c  ct.get("id", sel
-000047a0: 662e 5f66 616c 6c62 6163 6b5f 696e 7365  f._fallback_inse
-000047b0: 7274 696f 6e5f 6964 2900 2020 2020 2020  rtion_id).      
-000047c0: 2020 2222 2269 6e74 2075 6e69 7175 6520    """int unique 
-000047d0: 6964 656e 7469 6669 6572 206f 6620 7468  identifier of th
-000047e0: 6973 2073 7562 746f 7461 6c20 7769 7468  is subtotal with
-000047f0: 696e 2074 6869 7320 6469 6d65 6e73 696f  in this dimensio
-00004800: 6e27 7320 696e 7365 7274 696f 6e73 2e22  n's insertions."
-00004810: 2222 0020 2020 2064 6566 2069 6e73 6572  "".    def inser
-00004820: 7469 6f6e 5f69 6428 7365 6c66 2920 2d3e  tion_id(self) ->
-00004830: 2069 6e74 3a00 2020 2020 406c 617a 7970   int:.    @lazyp
-00004840: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00004850: 2072 6574 7572 6e20 7365 6c66 2e5f 7375   return self._su
-00004860: 6274 6f74 616c 5f64 6963 742e 6765 7428  btotal_dict.get(
-00004870: 2266 696c 6c22 2c20 4e6f 6e65 2900 2020  "fill", None).  
-00004880: 2020 2020 2020 2320 2d2d 2d74 6865 206f        # ---the o
-00004890: 6e6c 7920 7072 696f 7220 6175 7468 6f72  nly prior author
-000048a0: 6974 7920 616e 6420 7468 6174 2069 7320  ity and that is 
-000048b0: 4e6f 6e65 2028 7573 6520 6465 6661 756c  None (use defaul
-000048c0: 7420 6669 6c6c 2063 6f6c 6f72 292e 0020  t fill color).. 
-000048d0: 2020 2020 2020 2023 202d 2d2d 6669 7273         # ---firs
-000048e0: 7420 6175 7468 6f72 6974 7920 6973 2066  t authority is f
-000048f0: 696c 6c20 7472 616e 7366 6f72 6d20 696e  ill transform in
-00004900: 2065 6c65 6d65 6e74 2074 7261 6e73 666f   element transfo
-00004910: 726d 732e 2054 6865 2062 6173 6520 7661  rms. The base va
-00004920: 6c75 6520 6973 0020 2020 2020 2020 2022  lue is.        "
-00004930: 2222 0020 2020 2020 2020 2054 6872 6565  "".        Three
-00004940: 2d63 6861 7261 6374 6572 2063 6f6c 6f72  -character color
-00004950: 2063 6f6e 7472 6163 7469 6f6e 7320 286c   contractions (l
-00004960: 696b 6520 2223 4430 3722 2920 6172 6520  ike "#D07") are 
-00004970: 6e6f 7420 7661 6c69 642e 0020 2020 2020  not valid..     
-00004980: 2020 2041 2073 7472 2076 616c 7565 206d     A str value m
-00004990: 7573 7420 6265 2061 2068 6173 6820 6368  ust be a hash ch
-000049a0: 6172 6163 7465 7220 2822 2322 2920 666f  aracter ("#") fo
-000049b0: 6c6c 6f77 6564 2062 7920 7369 7820 6865  llowed by six he
-000049c0: 7861 6465 6369 6d61 6c20 6469 6769 7473  xadecimal digits
-000049d0: 2e00 2020 2020 2020 2020 4120 7661 6c75  ..        A valu
-000049e0: 6520 6f66 204e 6f6e 6520 696e 6469 6361  e of None indica
-000049f0: 7465 7320 7468 6520 6465 6661 756c 7420  tes the default 
-00004a00: 6669 6c6c 2073 686f 756c 6420 6265 2075  fill should be u
-00004a10: 7365 6420 666f 7220 7468 6973 2065 6c65  sed for this ele
-00004a20: 6d65 6e74 2e00 0020 2020 2020 2020 2022  ment...        "
-00004a30: 2222 7374 7220 5247 4220 636f 6c6f 7220  ""str RGB color 
-00004a40: 6c69 6b65 2022 2361 6630 3332 6422 206f  like "#af032d" o
-00004a50: 7220 4e6f 6e65 2069 6620 6e6f 7420 7370  r None if not sp
-00004a60: 6563 6966 6965 642e 0020 2020 2064 6566  ecified..    def
-00004a70: 2066 696c 6c28 7365 6c66 2920 2d3e 2073   fill(self) -> s
-00004a80: 7472 3a00 2020 2020 406c 617a 7970 726f  tr:.    @lazypro
-00004a90: 7065 7274 7900 0020 2020 2020 2020 2029  perty..        )
-00004aa0: 0020 2020 2020 2020 2020 2020 2064 7479  .            dty
-00004ab0: 7065 3d6e 702e 696e 7436 342c 2020 2320  pe=np.int64,  # 
-00004ac0: 666f 7263 6520 696e 7420 736f 2069 7420  force int so it 
-00004ad0: 6361 6e20 6265 2075 7365 6420 6173 2069  can be used as i
-00004ae0: 6e64 6578 2065 7665 6e20 6966 2065 6d70  ndex even if emp
-00004af0: 7479 0020 2020 2020 2020 2020 2020 2029  ty.            )
-00004b00: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-00004b10: 2020 6966 2076 6563 746f 722e 656c 656d    if vector.elem
-00004b20: 656e 745f 6964 2069 6e20 6164 6465 6e64  ent_id in addend
-00004b30: 5f69 6473 0020 2020 2020 2020 2020 2020  _ids.           
-00004b40: 2020 2020 2066 6f72 2069 6478 2c20 7665       for idx, ve
-00004b50: 6374 6f72 2069 6e20 656e 756d 6572 6174  ctor in enumerat
-00004b60: 6528 7365 6c66 2e5f 7661 6c69 645f 656c  e(self._valid_el
-00004b70: 656d 656e 7473 2900 2020 2020 2020 2020  ements).        
-00004b80: 2020 2020 2020 2020 6964 7800 2020 2020          idx.    
-00004b90: 2020 2020 2020 2020 2800 2020 2020 2020          (.      
-00004ba0: 2020 7265 7475 726e 206e 702e 6672 6f6d    return np.from
-00004bb0: 6974 6572 2800 2020 2020 2020 2020 6164  iter(.        ad
-00004bc0: 6465 6e64 5f69 6473 203d 2073 656c 662e  dend_ids = self.
-00004bd0: 6164 6465 6e64 5f69 6473 0020 2020 2020  addend_ids.     
-00004be0: 2020 2022 2222 0020 2020 2020 2020 206d     """.        m
-00004bf0: 6172 6769 6e29 2074 6f20 6578 7472 6163  argin) to extrac
-00004c00: 7420 7468 6520 6164 6465 6e64 2076 616c  t the addend val
-00004c10: 7565 7320 666f 7220 7468 6973 2073 7562  ues for this sub
-00004c20: 746f 7461 6c2e 0020 2020 2020 2020 2053  total..        S
-00004c30: 7569 7461 626c 6520 666f 7220 6469 7265  uitable for dire
-00004c40: 6374 6c79 2069 6e64 6578 696e 6720 6120  ctly indexing a 
-00004c50: 6e75 6d70 7920 6172 7261 7920 6f62 6a65  numpy array obje
-00004c60: 6374 2028 7375 6368 2061 7320 6261 7365  ct (such as base
-00004c70: 2076 616c 7565 7320 6f72 0000 2020 2020   values or..    
-00004c80: 2020 2020 2222 226e 6461 7272 6179 206f      """ndarray o
-00004c90: 6620 696e 7420 6261 7365 2d65 6c65 6d65  f int base-eleme
-00004ca0: 6e74 206f 6666 7365 7473 2063 6f6e 7472  nt offsets contr
-00004cb0: 6962 7574 696e 6720 746f 2074 6869 7320  ibuting to this 
-00004cc0: 7375 6274 6f74 616c 2e00 2020 2020 6465  subtotal..    de
-00004cd0: 6620 6164 6465 6e64 5f69 6478 7328 7365  f addend_idxs(se
-00004ce0: 6c66 2920 2d3e 206e 702e 6e64 6172 7261  lf) -> np.ndarra
-00004cf0: 793a 0020 2020 2040 6c61 7a79 7072 6f70  y:.    @lazyprop
-00004d00: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-00004d10: 7475 726e 2074 7570 6c65 2861 7267 2066  turn tuple(arg f
-00004d20: 6f72 2061 7267 2069 6e20 706f 7369 7469  or arg in positi
-00004d30: 7665 2069 6620 6172 6720 696e 2073 656c  ve if arg in sel
-00004d40: 662e 5f76 616c 6964 5f65 6c65 6d65 6e74  f._valid_element
-00004d50: 732e 656c 656d 656e 745f 6964 7329 0000  s.element_ids)..
-00004d60: 2020 2020 2020 2020 2920 6f72 2073 656c          ) or sel
-00004d70: 662e 5f73 7562 746f 7461 6c5f 6469 6374  f._subtotal_dict
-00004d80: 2e67 6574 2822 6172 6773 222c 205b 5d29  .get("args", [])
-00004d90: 0020 2020 2020 2020 2020 2020 2022 706f  .            "po
-00004da0: 7369 7469 7665 2200 2020 2020 2020 2020  sitive".        
-00004db0: 706f 7369 7469 7665 203d 2073 656c 662e  positive = self.
-00004dc0: 5f73 7562 746f 7461 6c5f 6469 6374 2e67  _subtotal_dict.g
-00004dd0: 6574 2822 6b77 6172 6773 222c 207b 7d29  et("kwargs", {})
-00004de0: 2e67 6574 2800 2020 2020 2020 2020 2320  .get(.        # 
-00004df0: 2d2d 2d50 7265 6665 7220 706f 7369 7469  ---Prefer positi
-00004e00: 7665 2022 6b77 6172 6773 2220 6f76 6572  ve "kwargs" over
-00004e10: 2022 6172 6773 2220 736f 2077 6520 6361   "args" so we ca
-00004e20: 6e20 6d69 6772 6174 652d 2d2d 0020 2020  n migrate---.   
-00004e30: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00004e40: 2072 6570 7265 7365 6e74 696e 6720 6d69   representing mi
-00004e50: 7373 696e 6720 6461 7461 2069 7320 6578  ssing data is ex
-00004e60: 636c 7564 6564 2e00 2020 2020 2020 2020  cluded..        
-00004e70: 416e 7920 656c 656d 656e 7420 6964 206e  Any element id n
-00004e80: 6f74 2070 7265 7365 6e74 2069 6e20 7468  ot present in th
-00004e90: 6520 6469 6d65 6e73 696f 6e20 6f72 2070  e dimension or p
-00004ea0: 7265 7365 6e74 2062 7574 0000 2020 2020  resent but..    
-00004eb0: 2020 2020 2222 2274 7570 6c65 206f 6620      """tuple of 
-00004ec0: 696e 7420 6964 7320 6f66 2065 6c65 6d65  int ids of eleme
-00004ed0: 6e74 7320 636f 6e74 7269 6275 7469 6e67  nts contributing
-00004ee0: 2074 6f20 7468 6973 2073 7562 746f 7461   to this subtota
-00004ef0: 6c2e 0020 2020 2064 6566 2061 6464 656e  l..    def adden
-00004f00: 645f 6964 7328 7365 6c66 2920 2d3e 2054  d_ids(self) -> T
-00004f10: 7570 6c65 5b69 6e74 2c20 2e2e 2e5d 3a00  uple[int, ...]:.
-00004f20: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00004f30: 7900 0020 2020 2020 2020 2020 2020 2072  y..            r
-00004f40: 6574 7572 6e20 616e 6368 6f72 2e6c 6f77  eturn anchor.low
-00004f50: 6572 2829 0020 2020 2020 2020 2065 7863  er().        exc
-00004f60: 6570 7420 2854 7970 6545 7272 6f72 2c20  ept (TypeError, 
-00004f70: 5661 6c75 6545 7272 6f72 293a 0020 2020  ValueError):.   
-00004f80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00004f90: 616e 6368 6f72 0020 2020 2020 2020 2020  anchor.         
-00004fa0: 2020 2020 2020 2072 6574 7572 6e20 2262         return "b
-00004fb0: 6f74 746f 6d22 0020 2020 2020 2020 2020  ottom".         
-00004fc0: 2020 2020 2020 2023 2049 6e20 7468 6520         # In the 
-00004fd0: 6361 7365 206f 6620 6120 6e6f 6e2d 7661  case of a non-va
-00004fe0: 6c69 6420 696e 7420 6964 2c20 6465 6661  lid int id, defa
-00004ff0: 756c 7420 746f 2022 626f 7474 6f6d 2200  ult to "bottom".
-00005000: 6164 0000 3508 0000 0909 0000 0010 0000  ad..5...........
-00005010: 2e00 0000 0000 0000 e90f 0000 c00f 0000  ................
-00005020: 9c0f 0000 9b0f 0000 890f 0000 6d0f 0000  ............m...
-00005030: 210f 0000 e60e 0000 e50e 0000 bb0e 0000  !...............
-00005040: 6e0e 0000 390e 0000 120e 0000 dd0d 0000  n...9...........
-00005050: c40d 0000 c30d 0000 8e0d 0000 510d 0000  ............Q...
-00005060: 380d 0000 370d 0000 080d 0000 d50c 0000  8...7...........
-00005070: bc0c 0000 bb0c 0000 850c 0000 3e0c 0000  ............>...
-00005080: 250c 0000 240c 0000 d40b 0000 830b 0000  %...$...........
-00005090: 460b 0000 2b0b 0000 fb0a 0000 fa0a 0000  F...+...........
-000050a0: ae0a 0000 ad0a 0000 710a 0000 460a 0000  ........q...F...
-000050b0: 2d0a 0000 2c0a 0000 dd09 0000 9509 0000  -...,...........
-000050c0: 7c09 0000 7b09 0000 3309 0000 0909 0000  |...{...3.......
-000050d0: de08 0000 cd08 0000 d608 0000 c408 0000  ................
-000050e0: aa08 0000 5f08 0000 4908 0000 0508 0000  ...._...I.......
-000050f0: b207 0000 a807 0000 a707 0000 a607 0000  ................
-00005100: 9507 0000 6407 0000 6307 0000 0d07 0000  ....d...c.......
-00005110: b906 0000 8906 0000 8106 0000 8006 0000  ................
-00005120: 3206 0000 0606 0000 d805 0000 9c05 0000  2...............
-00005130: 9b05 0000 8905 0000 6d05 0000 3a05 0000  ........m...:...
-00005140: 0905 0000 e304 0000 e204 0000 d004 0000  ................
-00005150: a704 0000 5904 0000 5804 0000 1204 0000  ....Y...X.......
-00005160: c403 0000 9a03 0000 9903 0000 4d03 0000  ............M...
-00005170: ff02 0000 de02 0000 d202 0000 a302 0000  ................
-00005180: a202 0000 8702 0000 4502 0000 2902 0000  ........E...)...
-00005190: 2802 0000 1b02 0000 fa01 0000 bb01 0000  (...............
-000051a0: 0000 0000 0020 2020 2020 2020 2020 2020  .....           
-000051b0: 2069 6620 616e 6368 6f72 2020 2020 2020   if anchor      
-000051c0: 2020 2020 2020 2069 6620 616e 6368 6f72         if anchor
-000051d0: 206e 6f74 2069 6e20 7365 6c66 2e5f 7661   not in self._va
-000051e0: 6c69 645f 656c 656d 656e 7473 2e65 6c65  lid_elements.ele
-000051f0: 6d65 6e74 5f69 6473 3a00 2020 2020 2020  ment_ids:.      
-00005200: 2020 2020 2020 616e 6368 6f72 203d 2069        anchor = i
-00005210: 6e74 2861 6e63 686f 7229 0020 2020 2020  nt(anchor).     
-00005220: 2020 2074 7279 3a00 0020 2020 2020 2020     try:..       
-00005230: 2020 2020 2072 6574 7572 6e20 2262 6f74       return "bot
-00005240: 746f 6d22 0020 2020 2020 2020 2020 2020  tom".           
-00005250: 2023 2049 6e20 7468 6520 6361 7365 206f   # In the case o
-00005260: 6620 756e 6465 6669 6e65 6420 616e 6368  f undefined anch
-00005270: 6f72 2064 6566 6175 6c74 2074 6f20 2262  or default to "b
-00005280: 6f74 746f 6d22 0020 2020 2020 2020 2069  ottom".        i
-00005290: 6620 616e 6368 6f72 2069 7320 4e6f 6e65  f anchor is None
-000052a0: 3a00 0020 2020 2020 2020 2061 6e63 686f  :..        ancho
-000052b0: 7220 3d20 7365 6c66 2e5f 7375 6274 6f74  r = self._subtot
-000052c0: 616c 5f64 6963 745b 2261 6e63 686f 7222  al_dict["anchor"
-000052d0: 5d00 2020 2020 2020 2020 2222 2200 2020  ].        """.  
-000052e0: 2020 2020 2020 7265 7072 6573 656e 7473        represents
-000052f0: 206d 6973 7369 6e67 2064 6174 612e 0020   missing data.. 
-00005300: 2020 2020 2020 2065 6c65 6d65 6e74 2074         element t
-00005310: 6861 7420 6973 206e 6f20 6c6f 6e67 6572  hat is no longer
-00005320: 2070 7265 7365 6e74 2069 6e20 7468 6520   present in the 
-00005330: 6469 6d65 6e73 696f 6e20 6f72 2061 6e20  dimension or an 
-00005340: 656c 656d 656e 7420 7468 6174 0020 2020  element that.   
-00005350: 2020 2020 2054 6865 2072 6574 7572 6e20       The return 
-00005360: 7661 6c75 6520 6465 6661 756c 7473 2074  value defaults t
-00005370: 6f20 2762 6f74 746f 6d27 2066 6f72 2061  o 'bottom' for a
-00005380: 6e20 616e 6368 6f72 2072 6566 6572 7269  n anchor referri
-00005390: 6e67 2074 6f20 616e 0000 2020 2020 2020  ng to an..      
-000053a0: 2020 616c 736f 2062 6520 6f6e 6520 6f66    also be one of
-000053b0: 2027 746f 7027 206f 7220 2762 6f74 746f   'top' or 'botto
-000053c0: 6d27 2e00 2020 2020 2020 2020 7375 6276  m'..        subv
-000053d0: 6172 6961 626c 6529 2075 6e64 6572 2077  ariable) under w
-000053e0: 6869 6368 2074 6f20 706c 6163 6520 7468  hich to place th
-000053f0: 6973 2073 7562 746f 7461 6c2e 2054 6865  is subtotal. The
-00005400: 2072 6574 7572 6e20 7661 6c75 6520 6361   return value ca
-00005410: 6e00 2020 2020 2020 2020 416e 2069 6e74  n.        An int
-00005420: 2061 6e63 686f 7220 6973 2074 6865 2069   anchor is the i
-00005430: 6420 6f66 2074 6865 2064 696d 656e 7369  d of the dimensi
-00005440: 6f6e 2065 6c65 6d65 6e74 2028 6361 7465  on element (cate
-00005450: 676f 7279 206f 7200 0020 2020 2020 2020  gory or..       
-00005460: 2022 2222 696e 7420 6f72 2073 7472 2069   """int or str i
-00005470: 6e64 6963 6174 696e 6720 656c 656d 656e  ndicating elemen
-00005480: 7420 756e 6465 7220 7768 6963 6820 746f  t under which to
-00005490: 2069 6e73 6572 7420 7468 6973 2073 7562   insert this sub
-000054a0: 746f 7461 6c2e 0020 2020 2064 6566 2061  total..    def a
-000054b0: 6e63 686f 7228 7365 6c66 2920 2d3e 2055  nchor(self) -> U
-000054c0: 6e69 6f6e 5b69 6e74 2c20 7374 725d 3a00  nion[int, str]:.
-000054d0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-000054e0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-000054f0: 6e20 616c 6961 7320 6966 2061 6c69 6173  n alias if alias
-00005500: 2065 6c73 6520 2222 0020 2020 2020 2020   else "".       
-00005510: 2061 6c69 6173 203d 2073 656c 662e 5f73   alias = self._s
-00005520: 7562 746f 7461 6c5f 6469 6374 2e67 6574  ubtotal_dict.get
-00005530: 2822 616c 6961 7322 2900 2020 2020 2020  ("alias").      
-00005540: 2020 2222 2273 7472 2064 6973 706c 6179    """str display
-00005550: 2061 6c69 6173 2066 6f72 2074 6869 7320   alias for this 
-00005560: 7375 6274 6f74 616c 2e22 2222 0020 2020  subtotal.""".   
-00005570: 2064 6566 2061 6c69 6173 2873 656c 6629   def alias(self)
-00005580: 202d 3e20 7374 723a 0020 2020 2040 6c61   -> str:.    @la
-00005590: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-000055a0: 2020 2020 7365 6c66 2e5f 6661 6c6c 6261      self._fallba
-000055b0: 636b 5f69 6e73 6572 7469 6f6e 5f69 6420  ck_insertion_id 
-000055c0: 3d20 6661 6c6c 6261 636b 5f69 6e73 6572  = fallback_inser
-000055d0: 7469 6f6e 5f69 6400 2020 2020 2020 2020  tion_id.        
-000055e0: 7365 6c66 2e5f 7661 6c69 645f 656c 656d  self._valid_elem
-000055f0: 656e 7473 203d 2076 616c 6964 5f65 6c65  ents = valid_ele
-00005600: 6d65 6e74 7300 2020 2020 2020 2020 7365  ments.        se
-00005610: 6c66 2e5f 7375 6274 6f74 616c 5f64 6963  lf._subtotal_dic
-00005620: 7420 3d20 7375 6274 6f74 616c 5f64 6963  t = subtotal_dic
-00005630: 7400 2020 2020 6465 6620 5f5f 696e 6974  t.    def __init
-00005640: 5f5f 2873 656c 662c 2073 7562 746f 7461  __(self, subtota
-00005650: 6c5f 6469 6374 2c20 7661 6c69 645f 656c  l_dict, valid_el
-00005660: 656d 656e 7473 2c20 6661 6c6c 6261 636b  ements, fallback
-00005670: 5f69 6e73 6572 7469 6f6e 5f69 6429 3a00  _insertion_id):.
-00005680: 0020 2020 2022 2222 0020 2020 2077 6974  .    """.    wit
-00005690: 6869 6e20 7468 6520 696e 7365 7274 696f  hin the insertio
-000056a0: 6e73 2074 7261 6e73 666f 726d 2063 6f6c  ns transform col
-000056b0: 6c65 6374 696f 6e2e 0020 2020 2072 6561  lection..    rea
-000056c0: 6c20 696e 7365 7274 696f 6e2d 6964 7320  l insertion-ids 
-000056d0: 6361 6e20 6265 2061 6464 6564 2e20 4974  can be added. It
-000056e0: 7320 7661 6c75 6520 6973 206a 7573 7420  s value is just 
-000056f0: 7468 6520 696e 6465 782b 3120 6f66 2074  the index+1 of t
-00005700: 6869 7320 7375 6274 6f74 616c 0020 2020  his subtotal.   
-00005710: 2060 6661 6c6c 6261 636b 5f69 6e73 6572   `fallback_inser
-00005720: 7469 6f6e 5f69 6460 2069 7320 6120 6661  tion_id` is a fa
-00005730: 6c6c 6261 636b 2075 6e69 7175 6520 6964  llback unique id
-00005740: 656e 7469 6669 6572 2066 6f72 2074 6869  entifier for thi
-00005750: 7320 696e 7365 7274 696f 6e2c 2075 6e74  s insertion, unt
-00005760: 696c 0000 2020 2020 2222 2241 2073 7562  il..    """A sub
-00005770: 746f 7461 6c20 696e 7365 7274 696f 6e20  total insertion 
-00005780: 6f6e 2061 2063 7562 6520 6469 6d65 6e73  on a cube dimens
-00005790: 696f 6e2e 0063 6c61 7373 205f 5375 6274  ion..class _Subt
-000057a0: 6f74 616c 3a00 0000 2020 2020 2020 2020  otal:...        
-000057b0: 2900 2020 2020 2020 2020 2020 2020 666f  ).            fo
-000057c0: 7220 6964 782c 2073 7562 746f 7461 6c5f  r idx, subtotal_
-000057d0: 6469 6374 2069 6e20 656e 756d 6572 6174  dict in enumerat
-000057e0: 6528 7365 6c66 2e5f 6974 6572 5f76 616c  e(self._iter_val
-000057f0: 6964 5f73 7562 746f 7461 6c5f 6469 6374  id_subtotal_dict
-00005800: 7328 2929 0020 2020 2020 2020 2020 2020  s()).           
-00005810: 205f 5375 6274 6f74 616c 2873 7562 746f   _Subtotal(subto
-00005820: 7461 6c5f 6469 6374 2c20 7365 6c66 2e5f  tal_dict, self._
-00005830: 7661 6c69 645f 656c 656d 656e 7473 2c20  valid_elements, 
-00005840: 6964 7820 2b20 3129 0020 2020 2020 2020  idx + 1).       
-00005850: 2072 6574 7572 6e20 7475 706c 6528 0020   return tuple(. 
-00005860: 2020 2020 2020 2022 2222 436f 6d70 6f73         """Compos
-00005870: 6564 2074 7570 6c65 2073 746f 7269 6e67  ed tuple storing
-00005880: 2061 6374 7561 6c20 7365 7175 656e 6365   actual sequence
-00005890: 206f 6620 5f53 7562 746f 7461 6c20 6f62   of _Subtotal ob
-000058a0: 6a65 6374 732e 2222 2200 2020 2020 6465  jects.""".    de
-000058b0: 6620 5f73 7562 746f 7461 6c73 2873 656c  f _subtotals(sel
-000058c0: 6629 3a00 2020 2020 406c 617a 7920 2020  f):.    @lazy   
-000058d0: 2020 2020 2020 2020 205f 5f69 6d70 2020           __imp  
-000058e0: 2020 2020 2020 2020 2020 5f5f 696d 706f            __impo
-000058f0: 7274 5f5f 2822 6970 6462 2229 2e73 6574  rt__("ipdb").set
-00005900: 5f74 7261 6365 2829 0020 2020 2020 2020  _trace().       
-00005910: 2020 2020 2023 202d 2d2d 6973 2061 2076       # ---is a v
-00005920: 616c 6964 2073 7562 746f 7461 6c20 6469  alid subtotal di
-00005930: 6374 0020 2020 2020 2020 2020 2020 2023  ct.            #
-00005940: 202d 2d2d 616e 2069 6e73 6572 7469 6f6e   ---an insertion
-00005950: 2d64 6963 7420 7468 6174 2073 7563 6365  -dict that succe
-00005960: 7373 6675 6c6c 7920 7275 6e73 2074 6869  ssfully runs thi
-00005970: 7320 6761 756e 746c 6574 0000 2020 2020  s gauntlet..    
-00005980: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00005990: 696e 7565 0020 2020 2020 2020 2020 2020  inue.           
-000059a0: 2069 6620 6e6f 7420 7365 6c66 2e5f 656c   if not self._el
-000059b0: 656d 656e 745f 6964 732e 696e 7465 7273  ement_ids.inters
-000059c0: 6563 7469 6f6e 2870 6f73 6974 6976 6520  ection(positive 
-000059d0: 2b20 6e65 6761 7469 7665 293a 0020 2020  + negative):.   
-000059e0: 2020 2020 2020 2020 2023 202d 2d2d 736b           # ---sk
-000059f0: 6970 2069 6620 646f 6573 6e27 7420 7265  ip if doesn't re
-00005a00: 6665 7265 6e63 6520 6174 206c 6561 7374  ference at least
-00005a10: 206f 6e65 206e 6f6e 2d6d 6973 7369 6e67   one non-missing
-00005a20: 2065 6c65 6d65 6e74 2d2d 2d00 0020 2020   element---..   
-00005a30: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00005a40: 7469 6e75 6500 2020 2020 2020 2020 2020  tinue.          
-00005a50: 2020 6966 206e 6f74 2028 706f 7369 7469    if not (positi
-00005a60: 7665 206f 7220 6e65 6761 7469 7665 293a  ve or negative):
-00005a70: 0020 2020 2020 2020 2020 2020 2023 202d  .            # -
-00005a80: 2d2d 6d75 7374 2068 6176 6520 706f 7369  --must have posi
-00005a90: 7469 7665 206f 7220 6e65 6761 7469 7665  tive or negative
-00005aa0: 2065 6c65 6d65 6e74 732d 2d2d 0000 2020   elements---..  
-00005ab0: 2020 2020 2020 2020 2020 6e65 6761 7469            negati
-00005ac0: 7665 203d 2069 6e73 6572 7469 6f6e 5f64  ve = insertion_d
-00005ad0: 6963 742e 6765 7428 226b 7761 7267 7322  ict.get("kwargs"
-00005ae0: 2c20 7b7d 292e 6765 7428 226e 6567 6174  , {}).get("negat
-00005af0: 6976 6522 2c20 5b5d 2900 0020 2020 2020  ive", [])..     
-00005b00: 2020 2020 2020 2029 206f 7220 696e 7365         ) or inse
-00005b10: 7274 696f 6e5f 6469 6374 2e67 6574 2822  rtion_dict.get("
-00005b20: 6172 6773 222c 205b 5d29 0020 2020 2020  args", []).     
-00005b30: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
-00005b40: 7469 7665 2200 2020 2020 2020 2020 2020  tive".          
-00005b50: 2020 706f 7369 7469 7665 203d 2069 6e73    positive = ins
-00005b60: 6572 7469 6f6e 5f64 6963 742e 6765 7428  ertion_dict.get(
-00005b70: 226b 7761 7267 7322 2c20 7b7d 292e 6765  "kwargs", {}).ge
-00005b80: 7428 0020 2020 2020 2020 2020 2020 2023  t(.            #
-00005b90: 202d 2d2d 6275 7420 6966 206d 6973 7369   ---but if missi
-00005ba0: 6e67 2c20 7573 6520 226f 6c64 2073 7479  ng, use "old sty
-00005bb0: 6c65 2220 6172 6773 2064 6566 696e 696e  le" args definin
-00005bc0: 6720 706f 7369 7469 7665 2074 6572 6d73  g positive terms
-00005bd0: 2d2d 2d00 2020 2020 2020 2020 2020 2020  ---.            
-00005be0: 2320 2d2d 2d75 7365 2022 6e65 7720 7374  # ---use "new st
-00005bf0: 796c 6522 206b 7761 7267 7320 6465 6669  yle" kwargs defi
-00005c00: 6e69 6e67 2070 6f73 6974 6976 6520 7465  ning positive te
-00005c10: 726d 7320 6966 2061 7661 696c 6162 6c65  rms if available
-00005c20: 2d2d 2d00 0020 2020 2020 2020 2020 2020  ---..           
-00005c30: 2020 2020 2063 6f6e 7469 6e75 6500 2020       continue.  
-00005c40: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00005c50: 207b 2261 6e63 686f 7222 2c20 226e 616d   {"anchor", "nam
-00005c60: 6522 7d2e 6973 7375 6273 6574 2869 6e73  e"}.issubset(ins
-00005c70: 6572 7469 6f6e 5f64 6963 742e 6b65 7973  ertion_dict.keys
-00005c80: 2829 293a 0020 2020 2020 2020 2020 2020  ()):.           
-00005c90: 2023 202d 2d2d 736b 6970 2061 6e79 206d   # ---skip any m
-00005ca0: 616c 666f 726d 6564 2073 7562 746f 7461  alformed subtota
-00005cb0: 6c2d 6469 6374 732d 2d2d 0000 2020 2020  l-dicts---..    
-00005cc0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00005cd0: 696e 7565 0020 2020 2020 2020 2020 2020  inue.           
-00005ce0: 2069 6620 696e 7365 7274 696f 6e5f 6469   if insertion_di
-00005cf0: 6374 2e67 6574 2822 6869 6465 2229 2069  ct.get("hide") i
-00005d00: 7320 5472 7565 3a00 2020 2020 2020 2020  s True:.        
-00005d10: 2020 2020 2320 2d2d 2d73 6b69 7020 616e      # ---skip an
-00005d20: 7920 6869 6464 656e 2069 6e73 6572 7469  y hidden inserti
-00005d30: 6f6e 732d 2d2d 0000 2020 2020 2020 2020  ons---..        
-00005d40: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00005d50: 0020 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005d60: 696e 7365 7274 696f 6e5f 6469 6374 2e67  insertion_dict.g
-00005d70: 6574 2822 6675 6e63 7469 6f6e 2229 2021  et("function") !
-00005d80: 3d20 2273 7562 746f 7461 6c22 3a00 2020  = "subtotal":.  
-00005d90: 2020 2020 2020 2020 2020 2320 2d2d 2d73            # ---s
-00005da0: 6b69 7020 616e 7920 6e6f 6e2d 7375 6274  kip any non-subt
-00005db0: 6f74 616c 2069 6e73 6572 7469 6f6e 732d  otal insertions-
-00005dc0: 2d2d 0000 2020 2020 2020 2020 2020 2020  --..            
-00005dd0: 2020 2020 636f 6e74 696e 7565 0020 2020      continue.   
-00005de0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00005df0: 6973 696e 7374 616e 6365 2869 6e73 6572  isinstance(inser
-00005e00: 7469 6f6e 5f64 6963 742c 2064 6963 7429  tion_dict, dict)
-00005e10: 3a00 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00005e20: 2d2d 2d73 6b69 7020 616e 7920 6e6f 6e2d  ---skip any non-
-00005e30: 6469 6374 732d 2d2d 0020 2020 2020 2020  dicts---.       
-00005e40: 2066 6f72 2069 6e73 6572 7469 6f6e 5f64   for insertion_d
-00005e50: 6963 7420 696e 2073 656c 662e 5f69 6e73  ict in self._ins
-00005e60: 6572 7469 6f6e 5f64 6963 7473 3a00 2020  ertion_dicts:.  
-00005e70: 2020 2020 2020 2222 2247 656e 6572 6174        """Generat
-00005e80: 6520 6561 6368 2069 6e73 6572 7469 6f6e  e each insertion
-00005e90: 2064 6963 7420 7468 6174 2072 6570 7265   dict that repre
-00005ea0: 7365 6e74 7320 6120 7661 6c69 6420 7375  sents a valid su
-00005eb0: 6274 6f74 616c 2e22 2222 0020 2020 2064  btotal.""".    d
-00005ec0: 6566 205f 6974 6572 5f76 616c 6964 5f73  ef _iter_valid_s
-00005ed0: 7562 746f 7461 6c5f 6469 6374 7328 7365  ubtotal_dicts(se
-00005ee0: 6c66 293a 0000 2020 2020 2020 2020 7265  lf):..        re
-00005ef0: 7475 726e 2066 726f 7a65 6e73 6574 2873  turn frozenset(s
-00005f00: 656c 662e 5f76 616c 6964 5f65 6c65 6d65  elf._valid_eleme
-00005f10: 6e74 732e 656c 656d 656e 745f 6964 7329  nts.element_ids)
-00005f20: 0020 2020 2020 2020 2022 2222 6672 6f7a  .        """froz
-00005f30: 656e 7365 7420 6f66 2069 6e74 2069 6420  enset of int id 
-00005f40: 6f66 2065 6163 6820 6e6f 6e2d 6d69 7373  of each non-miss
-00005f50: 696e 6720 6361 7420 6f72 2073 7562 7661  ing cat or subva
-00005f60: 7220 696e 2064 696d 2e22 2222 0020 2020  r in dim.""".   
-00005f70: 2064 6566 205f 656c 656d 656e 745f 6964   def _element_id
-00005f80: 7328 7365 6c66 293a 0020 2020 2040 6c61  s(self):.    @la
-00005f90: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-00005fa0: 2020 2020 7265 7475 726e 206c 656e 2873      return len(s
-00005fb0: 656c 662e 5f73 7562 746f 7461 6c73 2900  elf._subtotals).
-00005fc0: 2020 2020 2020 2020 2222 2249 6d70 6c65          """Imple
-00005fd0: 6d65 6e74 7320 6c65 6e28 7375 6274 6f74  ments len(subtot
-00005fe0: 616c 7329 2e22 2222 0020 2020 2064 6566  als).""".    def
-00005ff0: 205f 5f6c 656e 5f5f 2873 656c 6629 3a00   __len__(self):.
-00006000: 6164 0000 0a00 0000 b201 0000 0010 0000  ad..............
-00006010: 6300 0000 0000 0000 b10f 0000 b00f 0000  c...............
-00006020: af0f 0000 830f 0000 410f 0000 400f 0000  ........A...@...
-00006030: 180f 0000 ea0e 0000 e90e 0000 d70e 0000  ................
-00006040: a10e 0000 670e 0000 660e 0000 1a0e 0000  ....g...f.......
-00006050: 060e 0000 fa0d 0000 a30d 0000 a20d 0000  ................
-00006060: a10d 0000 880d 0000 410d 0000 400d 0000  ........A...@...
-00006070: f50c 0000 a90c 0000 7f0c 0000 770c 0000  ............w...
-00006080: 760c 0000 4d0c 0000 1d0c 0000 1c0c 0000  v...M...........
-00006090: 0b0c 0000 c30b 0000 7c0b 0000 450b 0000  ........|...E...
-000060a0: 440b 0000 0b0b 0000 ca0a 0000 b90a 0000  D...............
-000060b0: 670a 0000 310a 0000 270a 0000 260a 0000  g...1...'...&...
-000060c0: 140a 0000 d609 0000 8809 0000 7209 0000  ............r...
-000060d0: 3109 0000 f908 0000 ef08 0000 ee08 0000  1...............
-000060e0: ed08 0000 d808 0000 8908 0000 8808 0000  ................
-000060f0: 4108 0000 f507 0000 ce07 0000 c607 0000  A...............
-00006100: c507 0000 8c07 0000 5e07 0000 2e07 0000  ........^.......
-00006110: 2d07 0000 1b07 0000 f506 0000 b806 0000  -...............
-00006120: 9406 0000 9306 0000 8106 0000 5106 0000  ............Q...
-00006130: fa05 0000 d605 0000 af05 0000 8005 0000  ................
-00006140: 5705 0000 2905 0000 0005 0000 e104 0000  W...)...........
-00006150: b904 0000 9404 0000 6f04 0000 5404 0000  ........o...T...
-00006160: 2c04 0000 0c04 0000 be03 0000 bd03 0000  ,...............
-00006170: ab03 0000 8e03 0000 4b03 0000 1003 0000  ........K.......
-00006180: 0f03 0000 fd02 0000 dc02 0000 9502 0000  ................
-00006190: 9402 0000 4d02 0000 0602 0000 be01 0000  ....M...........
-000061a0: b201 0000 b101 0000 0000 0000 0000 0000  ................
-000061b0: 0000 2020 2020 2020 2020 2222 2200 2020  ..        """.  
-000061c0: 2020 2020 2020 5468 6520 272e 7375 6263        The '.subc
-000061d0: 6c61 7373 2720 7375 6666 6978 206f 6e6c  lass' suffix onl
-000061e0: 7920 6170 7065 6172 7320 7768 6572 6520  y appears where 
-000061f0: 6120 7375 6274 7970 6520 6973 2070 7265  a subtype is pre
-00006200: 7365 6e74 2e00 2020 2020 2020 2020 7573  sent..        us
-00006210: 6564 2074 6f20 6964 656e 7469 6679 2074  ed to identify t
-00006220: 6865 2064 696d 656e 7369 6f6e 2074 7970  he dimension typ
-00006230: 6520 696e 2074 6865 2063 7562 6520 7265  e in the cube re
-00006240: 7370 6f6e 7365 204a 534f 4e2e 0020 2020  sponse JSON..   
-00006250: 2020 2020 2054 6869 7320 7374 7269 6e67       This string
-00006260: 2069 7320 6120 2774 7970 652e 7375 6263   is a 'type.subc
-00006270: 6c61 7373 2720 636f 6e63 6174 656e 6174  lass' concatenat
-00006280: 696f 6e20 6f66 2074 6865 2073 7472 206b  ion of the str k
-00006290: 6579 7300 0020 2020 2020 2020 2022 2222  eys..        """
-000062a0: 5265 7475 726e 2073 7472 206c 696b 6520  Return str like 
-000062b0: 2765 6e75 6d2e 6e75 6d65 7269 6327 2072  'enum.numeric' r
-000062c0: 6570 7265 7365 6e74 696e 6720 6469 6d65  epresenting dime
-000062d0: 6e73 696f 6e20 7479 7065 2e00 2020 2020  nsion type..    
-000062e0: 6465 6620 5f62 6173 655f 7479 7065 2873  def _base_type(s
-000062f0: 656c 6629 202d 3e20 7374 723a 0020 2020  elf) -> str:.   
-00006300: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00006310: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00006320: 656c 662e 5f64 696d 656e 7369 6f6e 5f64  elf._dimension_d
-00006330: 6963 745b 2272 6566 6572 656e 6365 7322  ict["references"
-00006340: 5d5b 2261 6c69 6173 225d 0020 2020 2020  ]["alias"].     
-00006350: 2020 2022 2222 5265 7475 726e 2073 7472     """Return str
-00006360: 206b 6579 2066 6f72 2076 6172 6961 626c   key for variabl
-00006370: 6520 6265 6869 6e64 202a 6469 6d65 6e73  e behind *dimens
-00006380: 696f 6e5f 6469 6374 2a2e 2222 2200 2020  ion_dict*.""".  
-00006390: 2020 6465 6620 5f61 6c69 6173 2873 656c    def _alias(sel
-000063a0: 6629 202d 3e20 7374 723a 0020 2020 2040  f) -> str:.    @
-000063b0: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-000063c0: 2020 2020 2020 7261 6973 6520 4e6f 7449        raise NotI
-000063d0: 6d70 6c65 6d65 6e74 6564 4572 726f 7228  mplementedError(
-000063e0: 6622 756e 7265 636f 676e 697a 6564 2064  f"unrecognized d
-000063f0: 696d 656e 7369 6f6e 2074 7970 6520 7b62  imension type {b
-00006400: 6173 655f 7479 7065 7d22 2900 2020 2020  ase_type}").    
-00006410: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-00006420: 542e 4e55 4d5f 4152 5241 5900 2020 2020  T.NUM_ARRAY.    
-00006430: 2020 2020 6966 2062 6173 655f 7479 7065      if base_type
-00006440: 203d 3d20 2265 6e75 6d2e 6e75 6d5f 6172   == "enum.num_ar
-00006450: 7222 3a00 2020 2020 2020 2020 2020 2020  r":.            
-00006460: 7265 7475 726e 2044 542e 5445 5854 0020  return DT.TEXT. 
-00006470: 2020 2020 2020 2069 6620 6261 7365 5f74         if base_t
-00006480: 7970 6520 3d3d 2022 656e 756d 2e74 6578  ype == "enum.tex
-00006490: 7422 3a00 2020 2020 2020 2020 2020 2020  t":.            
-000064a0: 7265 7475 726e 2044 542e 4249 4e4e 4544  return DT.BINNED
-000064b0: 5f4e 554d 4552 4943 0020 2020 2020 2020  _NUMERIC.       
-000064c0: 2069 6620 6261 7365 5f74 7970 6520 3d3d   if base_type ==
-000064d0: 2022 656e 756d 2e6e 756d 6572 6963 223a   "enum.numeric":
-000064e0: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-000064f0: 7572 6e20 4454 2e44 4154 4554 494d 4500  urn DT.DATETIME.
-00006500: 2020 2020 2020 2020 6966 2062 6173 655f          if base_
-00006510: 7479 7065 203d 3d20 2265 6e75 6d2e 6461  type == "enum.da
-00006520: 7465 7469 6d65 223a 0020 2020 2020 2020  tetime":.       
-00006530: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00006540: 2e5f 7265 736f 6c76 655f 6172 7261 795f  ._resolve_array_
-00006550: 7479 7065 2829 0020 2020 2020 2020 2069  type().        i
-00006560: 6620 6261 7365 5f74 7970 6520 3d3d 2022  f base_type == "
-00006570: 656e 756d 2e76 6172 6961 626c 6522 3a00  enum.variable":.
-00006580: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006590: 726e 2073 656c 662e 5f72 6573 6f6c 7665  rn self._resolve
-000065a0: 5f63 6174 6567 6f72 6963 616c 2829 0020  _categorical(). 
-000065b0: 2020 2020 2020 2069 6620 6261 7365 5f74         if base_t
-000065c0: 7970 6520 3d3d 2022 6361 7465 676f 7269  ype == "categori
-000065d0: 6361 6c22 3a00 2020 2020 2020 2020 6261  cal":.        ba
-000065e0: 7365 5f74 7970 6520 3d20 7365 6c66 2e5f  se_type = self._
-000065f0: 6261 7365 5f74 7970 6500 2020 2020 2020  base_type.      
-00006600: 2020 2222 225f 4469 6d65 6e73 696f 6e54    """_DimensionT
-00006610: 7970 6520 286d 656d 6265 7220 6f66 2044  ype (member of D
-00006620: 494d 454e 5349 4f4e 5f54 5950 4529 2061  IMENSION_TYPE) a
-00006630: 7070 726f 7072 6961 7465 2074 6f20 6469  ppropriate to di
-00006640: 6d65 6e73 696f 6e5f 6469 6374 2e22 2222  mension_dict."""
-00006650: 0020 2020 2064 6566 2064 696d 656e 7369  .    def dimensi
-00006660: 6f6e 5f74 7970 6528 7365 6c66 2920 2d3e  on_type(self) ->
-00006670: 205f 4469 6d65 6e73 696f 6e54 7970 653a   _DimensionType:
-00006680: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-00006690: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-000066a0: 726e 2073 656c 662e 5f64 696d 656e 7369  rn self._dimensi
-000066b0: 6f6e 5f64 6963 7400 2020 2020 2020 2020  on_dict.        
-000066c0: 2222 2264 6963 7420 6465 6669 6e69 6e67  """dict defining
-000066d0: 2074 6869 7320 6469 6d65 6e73 696f 6e20   this dimension 
-000066e0: 696e 2063 7562 6520 7265 7370 6f6e 7365  in cube response
-000066f0: 2e22 2222 0020 2020 2064 6566 2064 696d  .""".    def dim
-00006700: 656e 7369 6f6e 5f64 6963 7428 7365 6c66  ension_dict(self
-00006710: 2920 2d3e 2044 6963 743a 0020 2020 2040  ) -> Dict:.    @
-00006720: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00006730: 2020 2020 2020 7365 6c66 2e5f 6469 6d65        self._dime
-00006740: 6e73 696f 6e5f 6469 6374 7320 3d20 6469  nsion_dicts = di
-00006750: 6d65 6e73 696f 6e5f 6469 6374 7300 2020  mension_dicts.  
-00006760: 2020 2020 2020 7365 6c66 2e5f 6469 6d65        self._dime
-00006770: 6e73 696f 6e5f 6469 6374 203d 2064 696d  nsion_dict = dim
-00006780: 656e 7369 6f6e 5f64 6963 7400 2020 2020  ension_dict.    
-00006790: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-000067a0: 662c 2064 696d 656e 7369 6f6e 5f64 6963  f, dimension_dic
-000067b0: 742c 2064 696d 656e 7369 6f6e 5f64 6963  t, dimension_dic
-000067c0: 7473 293a 0000 2020 2020 2222 2200 2020  ts):..    """.  
-000067d0: 2020 6162 7374 7261 6374 7320 7468 6174    abstracts that
-000067e0: 2061 6363 6573 7320 666f 7220 636c 6172   access for clar
-000067f0: 6974 792e 0020 2020 2070 6172 7469 616c  ity..    partial
-00006800: 2070 6172 7369 6e67 206f 6620 626f 7468   parsing of both
-00006810: 2074 6865 2064 696d 656e 7369 6f6e 2064   the dimension d
-00006820: 6963 7420 616e 6420 6974 7320 7369 626c  ict and its sibl
-00006830: 696e 6773 2e20 5468 6973 2063 6c61 7373  ings. This class
-00006840: 0020 2020 2044 6574 6572 6d69 6e69 6e67  .    Determining
-00006850: 2064 696d 656e 7369 6f6e 2d74 7970 6520   dimension-type 
-00006860: 6973 2070 7265 7474 7920 636f 6d70 6c65  is pretty comple
-00006870: 7820 616e 6420 7265 7175 6972 6573 2072  x and requires r
-00006880: 6570 6561 7465 6400 0020 2020 2022 2222  epeated..    """
-00006890: 5468 696e 2077 7261 7070 6572 2061 726f  Thin wrapper aro
-000068a0: 756e 6420 6469 6d65 6e73 696f 6e2d 6469  und dimension-di
-000068b0: 6374 2074 6f20 7375 7070 6f72 7420 6469  ct to support di
-000068c0: 6d65 6e73 696f 6e2d 7479 7065 2064 6973  mension-type dis
-000068d0: 636f 7665 7279 2e00 636c 6173 7320 5f52  covery..class _R
-000068e0: 6177 4469 6d65 6e73 696f 6e3a 0000 0020  awDimension:... 
-000068f0: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-00006900: 2020 2020 2066 6f72 2064 696d 656e 7369       for dimensi
-00006910: 6f6e 5f64 6963 7420 696e 2073 656c 662e  on_dict in self.
-00006920: 5f64 696d 656e 7369 6f6e 5f64 6963 7473  _dimension_dicts
-00006930: 0020 2020 2020 2020 2020 2020 205f 5261  .            _Ra
-00006940: 7744 696d 656e 7369 6f6e 2864 696d 656e  wDimension(dimen
-00006950: 7369 6f6e 5f64 6963 742c 2073 656c 662e  sion_dict, self.
-00006960: 5f64 696d 656e 7369 6f6e 5f64 6963 7473  _dimension_dicts
-00006970: 2900 2020 2020 2020 2020 7265 7475 726e  ).        return
-00006980: 2074 7570 6c65 2800 2020 2020 2020 2020   tuple(.        
-00006990: 2222 2253 6571 7565 6e63 6520 6f66 205f  """Sequence of _
-000069a0: 5261 7744 696d 656e 7369 6f6e 206f 626a  RawDimension obj
-000069b0: 6563 7473 2077 7261 7070 696e 6720 6561  ects wrapping ea
-000069c0: 6368 2064 696d 656e 7369 6f6e 2064 6963  ch dimension dic
-000069d0: 742e 2222 2200 2020 2020 6465 6620 5f72  t.""".    def _r
-000069e0: 6177 5f64 696d 656e 7369 6f6e 7328 7365  aw_dimensions(se
-000069f0: 6c66 2920 2d3e 2054 7570 6c65 5b22 5f52  lf) -> Tuple["_R
-00006a00: 6177 4469 6d65 6e73 696f 6e22 2c20 2e2e  awDimension", ..
-00006a10: 2e5d 3a00 2020 2020 406c 617a 7970 726f  .]:.    @lazypro
-00006a20: 7065 7274 7900 0020 2020 2020 2020 2029  perty..        )
-00006a30: 0020 2020 2020 2020 2020 2020 2066 6f72  .            for
-00006a40: 2072 6177 5f64 696d 656e 7369 6f6e 2069   raw_dimension i
-00006a50: 6e20 7365 6c66 2e5f 7261 775f 6469 6d65  n self._raw_dime
-00006a60: 6e73 696f 6e73 0020 2020 2020 2020 2020  nsions.         
-00006a70: 2020 2044 696d 656e 7369 6f6e 2872 6177     Dimension(raw
-00006a80: 5f64 696d 656e 7369 6f6e 2e64 696d 656e  _dimension.dimen
-00006a90: 7369 6f6e 5f64 6963 742c 2072 6177 5f64  sion_dict, raw_d
-00006aa0: 696d 656e 7369 6f6e 2e64 696d 656e 7369  imension.dimensi
-00006ab0: 6f6e 5f74 7970 6529 0020 2020 2020 2020  on_type).       
-00006ac0: 2072 6574 7572 6e20 2800 2020 2020 2020   return (.      
-00006ad0: 2020 2222 2247 656e 6572 6174 6520 4469    """Generate Di
-00006ae0: 6d65 6e73 696f 6e20 6f62 6a65 6374 2066  mension object f
-00006af0: 6f72 2065 6163 6820 6469 6d65 6e73 696f  or each dimensio
-00006b00: 6e20 6469 6374 2e22 2222 0020 2020 2064  n dict.""".    d
-00006b10: 6566 205f 6974 6572 5f64 696d 656e 7369  ef _iter_dimensi
-00006b20: 6f6e 7328 7365 6c66 2920 2d3e 2049 7465  ons(self) -> Ite
-00006b30: 7261 746f 725b 2244 696d 656e 7369 6f6e  rator["Dimension
-00006b40: 225d 3a00 0020 2020 2020 2020 2072 6574  "]:..        ret
-00006b50: 7572 6e20 636c 7328 6469 6d65 6e73 696f  urn cls(dimensio
-00006b60: 6e5f 6469 6374 7329 2e5f 6974 6572 5f64  n_dicts)._iter_d
-00006b70: 696d 656e 7369 6f6e 7328 2900 2020 2020  imensions().    
-00006b80: 2020 2020 2222 2247 656e 6572 6174 6520      """Generate 
-00006b90: 4469 6d65 6e73 696f 6e20 6f62 6a65 6374  Dimension object
-00006ba0: 2066 6f72 2065 6163 6820 6f66 202a 6469   for each of *di
-00006bb0: 6d65 6e73 696f 6e5f 6469 6374 732a 2e22  mension_dicts*."
-00006bc0: 2222 0020 2020 2064 6566 2069 7465 725f  "".    def iter_
-00006bd0: 6469 6d65 6e73 696f 6e73 2863 6c73 2c20  dimensions(cls, 
-00006be0: 6469 6d65 6e73 696f 6e5f 6469 6374 7329  dimension_dicts)
-00006bf0: 202d 3e20 4974 6572 6174 6f72 5b22 4469   -> Iterator["Di
-00006c00: 6d65 6e73 696f 6e22 5d3a 0020 2020 2040  mension"]:.    @
-00006c10: 636c 6173 736d 6574 686f 6400 0020 2020  classmethod..   
-00006c20: 2020 2020 2073 656c 662e 5f64 696d 656e       self._dimen
-00006c30: 7369 6f6e 5f64 6963 7473 203d 2064 696d  sion_dicts = dim
-00006c40: 656e 7369 6f6e 5f64 6963 7473 0020 2020  ension_dicts.   
-00006c50: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00006c60: 6c66 2c20 6469 6d65 6e73 696f 6e5f 6469  lf, dimension_di
-00006c70: 6374 7329 3a00 0020 2020 2022 2222 0020  cts):..    """. 
-00006c80: 2020 206d 616b 6520 6469 6d65 6e73 696f     make dimensio
-00006c90: 6e20 636c 6173 7320 6368 6f69 6365 7320  n class choices 
-00006ca0: 6173 2077 656c 6c2e 0020 2020 2061 6c74  as well..    alt
-00006cb0: 686f 7567 6820 6966 2060 4469 6d65 6e73  hough if `Dimens
-00006cc0: 696f 6e60 2062 6563 6f6d 6573 2061 6e20  ion` becomes an 
-00006cd0: 6f62 6a65 6374 2068 6965 7261 7263 6879  object hierarchy
-00006ce0: 2c20 7468 6973 2066 6163 746f 7279 2077  , this factory w
-00006cf0: 6f75 6c64 0020 2020 2022 7479 7065 2220  ould.    "type" 
-00006d00: 6865 7265 2069 7320 7072 696d 6172 696c  here is primaril
-00006d10: 7920 7468 6520 602e 6469 6d65 6e73 696f  y the `.dimensio
-00006d20: 6e5f 7479 7065 6020 7661 6c75 6520 6f66  n_type` value of
-00006d30: 2074 6865 2064 696d 656e 7369 6f6e 2c00   the dimension,.
-00006d40: 0020 2020 2022 2222 5072 6f64 7563 6520  .    """Produce 
-00006d50: 4469 6d65 6e73 696f 6e20 6f62 6a65 6374  Dimension object
-00006d60: 7320 6f66 2063 6f72 7265 6374 2074 7970  s of correct typ
-00006d70: 6520 6672 6f6d 2064 696d 656e 7369 6f6e  e from dimension
-00006d80: 2d64 6963 7473 2e00 636c 6173 7320 5f44  -dicts..class _D
-00006d90: 696d 656e 7369 6f6e 4661 6374 6f72 793a  imensionFactory:
-00006da0: 0000 0020 2020 2020 2020 2072 6574 7572  ...        retur
-00006db0: 6e20 7475 706c 6528 6420 666f 7220 6420  n tuple(d for d 
-00006dc0: 696e 2073 656c 662e 5f61 6c6c 5f64 696d  in self._all_dim
-00006dd0: 656e 7369 6f6e 7320 6966 2064 2e64 696d  ensions if d.dim
-00006de0: 656e 7369 6f6e 5f74 7970 6520 213d 2044  ension_type != D
-00006df0: 542e 4d52 5f43 4154 2900 2020 2020 2020  T.MR_CAT).      
-00006e00: 2020 2222 2200 2020 2020 2020 2020 636f    """.        co
-00006e10: 6c6c 6563 7469 6f6e 2e00 2020 2020 2020  llection..      
-00006e20: 2020 5468 6973 2063 6f6d 706f 7365 6420    This composed 
-00006e30: 7475 706c 6520 6973 2074 6865 2073 6f75  tuple is the sou
-00006e40: 7263 6520 666f 7220 7468 6520 6469 6d65  rce for the dime
-00006e50: 6e73 696f 6e20 6f62 6a65 6374 7320 696e  nsion objects in
-00006e60: 2074 6869 7300 0020 2020 2020 2020 2022   this..        "
-00006e70: 2222 7475 706c 6520 6f66 2064 696d 656e  ""tuple of dimen
-00006e80: 7369 6f6e 206f 626a 6563 7473 2069 6e20  sion objects in 
-00006e90: 7468 6973 2063 6f6c 6c65 6374 696f 6e2e  this collection.
-00006ea0: 0020 2020 2064 6566 205f 6469 6d65 6e73  .    def _dimens
-00006eb0: 696f 6e73 2873 656c 6629 202d 3e20 5475  ions(self) -> Tu
-00006ec0: 706c 655b 2244 696d 656e 7369 6f6e 222c  ple["Dimension",
-00006ed0: 202e 2e2e 5d3a 0020 2020 2040 6c61 7a79   ...]:.    @lazy
-00006ee0: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-00006ef0: 2020 7365 6c66 2e5f 616c 6c5f 6469 6d65    self._all_dime
-00006f00: 6e73 696f 6e73 203d 2061 6c6c 5f64 696d  nsions = all_dim
-00006f10: 656e 7369 6f6e 7300 2020 2020 6465 6620  ensions.    def 
-00006f20: 5f5f 696e 6974 5f5f 2873 656c 662c 2061  __init__(self, a
-00006f30: 6c6c 5f64 696d 656e 7369 6f6e 7329 3a00  ll_dimensions):.
-00006f40: 0020 2020 2022 2222 436f 6c6c 6563 7469  .    """Collecti
-00006f50: 6f6e 2063 6f6e 7461 696e 696e 6720 6f6e  on containing on
-00006f60: 6c79 2022 7573 6572 2220 6469 6d65 6e73  ly "user" dimens
-00006f70: 696f 6e73 206f 6620 6120 6375 6265 2e22  ions of a cube."
-00006f80: 2222 0063 6c61 7373 205f 4170 7061 7265  "".class _Appare
-00006f90: 6e74 4469 6d65 6e73 696f 6e73 285f 4261  ntDimensions(_Ba
-00006fa0: 7365 4469 6d65 6e73 696f 6e73 293a 0000  seDimensions):..
-00006fb0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00006fc0: 7475 706c 6528 5f44 696d 656e 7369 6f6e  tuple(_Dimension
-00006fd0: 4661 6374 6f72 792e 6974 6572 5f64 696d  Factory.iter_dim
-00006fe0: 656e 7369 6f6e 7328 7365 6c66 2e5f 6469  ensions(self._di
-00006ff0: 6d65 6e73 696f 6e5f 6469 6374 7329 2900  mension_dicts)).
-00007000: 6164 0000 4300 0000 bb01 0000 0010 0000  ad..C...........
-00007010: 5700 0000 0000 0000 c50f 0000 9d0f 0000  W...............
-00007020: 7c0f 0000 5b0f 0000 130f 0000 ed0e 0000  |...[...........
-00007030: 980e 0000 970e 0000 850e 0000 5c0e 0000  ............\...
-00007040: 1a0e 0000 190e 0000 070e 0000 d90d 0000  ................
-00007050: 8d0d 0000 8c0d 0000 420d 0000 fc0c 0000  ........B.......
-00007060: f00c 0000 a20c 0000 a10c 0000 8f0c 0000  ................
-00007070: 670c 0000 0e0c 0000 0d0c 0000 b90b 0000  g...............
-00007080: 620b 0000 360b 0000 2a0b 0000 d70a 0000  b...6...*.......
-00007090: d60a 0000 c40a 0000 9f0a 0000 550a 0000  ............U...
-000070a0: 540a 0000 080a 0000 c809 0000 b009 0000  T...............
-000070b0: a409 0000 5f09 0000 5e09 0000 4c09 0000  ...._...^...L...
-000070c0: 2809 0000 e308 0000 e208 0000 8c08 0000  (...............
-000070d0: 3908 0000 2d08 0000 ea07 0000 d107 0000  9...-...........
-000070e0: 9307 0000 9207 0000 8007 0000 4007 0000  ............@...
-000070f0: ef06 0000 ee06 0000 a006 0000 9406 0000  ................
-00007100: 6406 0000 2506 0000 f505 0000 dd05 0000  d...%...........
-00007110: 8a05 0000 8905 0000 5405 0000 1005 0000  ........T.......
-00007120: 0f05 0000 c404 0000 7a04 0000 3a04 0000  ........z...:...
-00007130: 2e04 0000 f803 0000 d103 0000 b803 0000  ................
-00007140: b703 0000 9e03 0000 6303 0000 2903 0000  ........c...)...
-00007150: f002 0000 bc02 0000 b202 0000 8202 0000  ................
-00007160: 8102 0000 4b02 0000 0702 0000 0602 0000  ....K...........
-00007170: bb01 0000 ba01 0000 0000 0000 0000 0000  ................
-00007180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00007190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000071a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000071b0: 0000 0000 0000 0000 0000 0020 2020 2020  ...........     
-000071c0: 2020 2054 6869 7320 6d65 7468 6f64 2064     This method d
-000071d0: 6973 7469 6e67 7569 7368 6573 2062 6574  istinguishes bet
-000071e0: 7765 656e 2043 4154 2c20 4341 5f43 4154  ween CAT, CA_CAT
-000071f0: 2c20 4d52 5f43 4154 2c20 616e 6420 4c4f  , MR_CAT, and LO
-00007200: 4749 4341 4c00 0020 2020 2020 2020 2022  GICAL..        "
-00007210: 2222 5265 7475 726e 206f 6e65 206f 6620  ""Return one of 
-00007220: 7468 6520 6361 7465 676f 7269 6361 6c20  the categorical 
-00007230: 6d65 6d62 6572 7320 6f66 2044 494d 454e  members of DIMEN
-00007240: 5349 4f4e 5f54 5950 452e 0020 2020 2064  SION_TYPE..    d
-00007250: 6566 205f 7265 736f 6c76 655f 6361 7465  ef _resolve_cate
-00007260: 676f 7269 6361 6c28 7365 6c66 2920 2d3e  gorical(self) ->
-00007270: 205f 4469 6d65 6e73 696f 6e54 7970 653a   _DimensionType:
-00007280: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00007290: 2044 542e 4d52 2069 6620 6973 5f6d 725f   DT.MR if is_mr_
-000072a0: 7375 6276 6172 2065 6c73 6520 4454 2e43  subvar else DT.C
-000072b0: 4100 2020 2020 2020 2020 2900 2020 2020  A.        ).    
-000072c0: 2020 2020 2020 2020 616e 6420 6e65 7874          and next
-000072d0: 5f72 6177 5f64 696d 656e 7369 6f6e 2e5f  _raw_dimension._
-000072e0: 6973 5f6c 6f67 6963 616c 5f74 7970 6500  is_logical_type.
-000072f0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00007300: 6e65 7874 5f72 6177 5f64 696d 656e 7369  next_raw_dimensi
-00007310: 6f6e 2e5f 616c 6961 7320 3d3d 2073 656c  on._alias == sel
-00007320: 662e 5f61 6c69 6173 0020 2020 2020 2020  f._alias.       
-00007330: 2020 2020 2061 6e64 206e 6578 745f 7261       and next_ra
-00007340: 775f 6469 6d65 6e73 696f 6e2e 5f68 6173  w_dimension._has
-00007350: 5f73 656c 6563 7465 645f 6361 7465 676f  _selected_catego
-00007360: 7279 0020 2020 2020 2020 2020 2020 206e  ry.            n
-00007370: 6578 745f 7261 775f 6469 6d65 6e73 696f  ext_raw_dimensio
-00007380: 6e2e 5f62 6173 655f 7479 7065 203d 3d20  n._base_type == 
-00007390: 2263 6174 6567 6f72 6963 616c 2200 2020  "categorical".  
-000073a0: 2020 2020 2020 6973 5f6d 725f 7375 6276        is_mr_subv
-000073b0: 6172 203d 2028 0000 2020 2020 2020 2020  ar = (..        
-000073c0: 2020 2020 7265 7475 726e 2044 542e 4341      return DT.CA
-000073d0: 0020 2020 2020 2020 2069 6620 6e65 7874  .        if next
-000073e0: 5f72 6177 5f64 696d 656e 7369 6f6e 2069  _raw_dimension i
-000073f0: 7320 4e6f 6e65 3a00 2020 2020 2020 2020  s None:.        
-00007400: 6e65 7874 5f72 6177 5f64 696d 656e 7369  next_raw_dimensi
-00007410: 6f6e 203d 2073 656c 662e 5f6e 6578 745f  on = self._next_
-00007420: 7261 775f 6469 6d65 6e73 696f 6e00 2020  raw_dimension.  
-00007430: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-00007440: 2020 7479 7065 2028 692e 652e 2065 6974    type (i.e. eit
-00007450: 6865 7220 4341 206f 7220 4d52 2c20 6261  her CA or MR, ba
-00007460: 7365 2d74 7970 6520 2765 6e75 6d2e 7661  se-type 'enum.va
-00007470: 7269 6162 6c65 2729 2e00 2020 2020 2020  riable')..      
-00007480: 2020 7661 6c75 6520 6973 206f 6e6c 7920    value is only 
-00007490: 6d65 616e 696e 6766 756c 2069 6620 7468  meaningful if th
-000074a0: 6520 6469 6d65 6e73 696f 6e20 6973 206b  e dimension is k
-000074b0: 6e6f 776e 2074 6f20 6265 206f 6620 6172  nown to be of ar
-000074c0: 7261 7900 2020 2020 2020 2020 5468 6973  ray.        This
-000074d0: 206d 6574 686f 6420 6469 7374 696e 6775   method distingu
-000074e0: 6973 6865 7320 6265 7477 6565 6e20 4341  ishes between CA
-000074f0: 2061 6e64 204d 5220 6469 6d65 6e73 696f   and MR dimensio
-00007500: 6e73 2e20 5468 6520 7265 7475 726e 0000  ns. The return..
-00007510: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
-00007520: 6e20 6f6e 6520 6f66 2074 6865 2041 5252  n one of the ARR
-00007530: 4159 5f54 5950 4553 206d 656d 6265 7273  AY_TYPES members
-00007540: 206f 6620 4449 4d45 4e53 494f 4e5f 5459   of DIMENSION_TY
-00007550: 5045 2e00 2020 2020 6465 6620 5f72 6573  PE..    def _res
-00007560: 6f6c 7665 5f61 7272 6179 5f74 7970 6528  olve_array_type(
-00007570: 7365 6c66 2920 2d3e 205f 4469 6d65 6e73  self) -> _Dimens
-00007580: 696f 6e54 7970 653a 0000 2020 2020 2020  ionType:..      
-00007590: 2020 7265 7475 726e 205f 5261 7744 696d    return _RawDim
-000075a0: 656e 7369 6f6e 2864 696d 656e 7369 6f6e  ension(dimension
-000075b0: 5f64 6963 7473 5b74 6869 735f 6964 7820  _dicts[this_idx 
-000075c0: 2b20 315d 2c20 7365 6c66 2e5f 6469 6d65  + 1], self._dime
-000075d0: 6e73 696f 6e5f 6469 6374 7329 0020 2020  nsion_dicts).   
-000075e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000075f0: 4e6f 6e65 0020 2020 2020 2020 2069 6620  None.        if 
-00007600: 7468 6973 5f69 6478 203e 206c 656e 2864  this_idx > len(d
-00007610: 696d 656e 7369 6f6e 5f64 6963 7473 2920  imension_dicts) 
-00007620: 2d20 323a 0020 2020 2020 2020 2074 6869  - 2:.        thi
-00007630: 735f 6964 7820 3d20 6469 6d65 6e73 696f  s_idx = dimensio
-00007640: 6e5f 6469 6374 732e 696e 6465 7828 7365  n_dicts.index(se
-00007650: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 6469  lf._dimension_di
-00007660: 6374 2900 2020 2020 2020 2020 6469 6d65  ct).        dime
-00007670: 6e73 696f 6e5f 6469 6374 7320 3d20 7365  nsion_dicts = se
-00007680: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 6469  lf._dimension_di
-00007690: 6374 7300 2020 2020 2020 2020 2222 2200  cts.        """.
-000076a0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-000076b0: 4e6f 6e65 2069 6620 7468 6973 2064 696d  None if this dim
-000076c0: 656e 7369 6f6e 2069 7320 7468 6520 6c61  ension is the la
-000076d0: 7374 2069 6e20 7365 7175 656e 6365 2066  st in sequence f
-000076e0: 6f72 2074 6869 7320 6375 6265 2e00 0020  or this cube... 
-000076f0: 2020 2020 2020 2022 2222 5f52 6177 4469         """_RawDi
-00007700: 6d65 6e73 696f 6e20 666f 7220 6e65 7874  mension for next
-00007710: 202a 6469 6d65 6e73 696f 6e5f 6469 6374   *dimension_dict
-00007720: 2a20 696e 2073 6571 7565 6e63 6520 6f72  * in sequence or
-00007730: 204e 6f6e 6520 666f 7220 6c61 7374 2e00   None for last..
-00007740: 2020 2020 6465 6620 5f6e 6578 745f 7261      def _next_ra
-00007750: 775f 6469 6d65 6e73 696f 6e28 7365 6c66  w_dimension(self
-00007760: 2920 2d3e 204f 7074 696f 6e61 6c5b 225f  ) -> Optional["_
-00007770: 5261 7744 696d 656e 7369 6f6e 225d 3a00  RawDimension"]:.
-00007780: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00007790: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-000077a0: 6e20 616e 7928 2264 6174 6522 2069 6e20  n any("date" in 
-000077b0: 6361 7420 666f 7220 6361 7420 696e 2073  cat for cat in s
-000077c0: 656c 662e 5f63 6174 6567 6f72 6965 7329  elf._categories)
-000077d0: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-000077e0: 7572 6e20 4661 6c73 6500 2020 2020 2020  urn False.      
-000077f0: 2020 6966 2073 656c 662e 5f64 696d 656e    if self._dimen
-00007800: 7369 6f6e 5f64 6963 745b 2274 7970 6522  sion_dict["type"
-00007810: 5d5b 2263 6c61 7373 225d 2021 3d20 2263  ]["class"] != "c
-00007820: 6174 6567 6f72 6963 616c 223a 0020 2020  ategorical":.   
-00007830: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00007840: 2063 6174 6567 6f72 6963 616c 2064 696d   categorical dim
-00007850: 656e 7369 6f6e 2c20 6275 7420 616c 736f  ension, but also
-00007860: 2061 2060 2264 6174 6522 6020 6669 656c   a `"date"` fiel
-00007870: 6420 696e 2061 6e79 206f 6620 6974 7320  d in any of its 
-00007880: 6361 7465 676f 7269 6573 2e00 2020 2020  categories..    
-00007890: 2020 2020 4120 6469 6d65 6e73 696f 6e20      A dimension 
-000078a0: 6973 2061 2063 6174 6567 6f72 6963 616c  is a categorical
-000078b0: 2064 6174 652c 2069 6620 6974 2068 6173   date, if it has
-000078c0: 2061 6c6c 2074 6865 2070 726f 7065 7274   all the propert
-000078d0: 6965 7320 6f66 2061 2022 6e6f 726d 616c  ies of a "normal
-000078e0: 2200 0020 2020 2020 2020 2022 2222 5472  "..        """Tr
-000078f0: 7565 2069 6620 6469 6d65 6e73 696f 6e20  ue if dimension 
-00007900: 6973 2061 2063 6174 6567 6f72 6963 616c  is a categorical
-00007910: 2064 6174 652c 2046 616c 7365 206f 7468   date, False oth
-00007920: 6572 7769 7365 2e00 2020 2020 6465 6620  erwise..    def 
-00007930: 5f69 735f 6361 745f 6461 7465 2873 656c  _is_cat_date(sel
-00007940: 6629 202d 3e20 626f 6f6c 3a00 2020 2020  f) -> bool:.    
-00007950: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00007960: 2020 2020 2020 2072 6574 7572 6e20 2273         return "s
-00007970: 7562 7265 6665 7265 6e63 6573 2220 696e  ubreferences" in
-00007980: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
-00007990: 5f64 6963 745b 2272 6566 6572 656e 6365  _dict["reference
-000079a0: 7322 5d00 2020 2020 2020 2020 2222 2200  s"].        """.
-000079b0: 2020 2020 2020 2020 2763 6174 6567 6f72          'categor
-000079c0: 6963 616c 2729 2e00 2020 2020 2020 2020  ical')..        
-000079d0: 7468 6520 6469 6d65 6e73 696f 6e20 6973  the dimension is
-000079e0: 206b 6e6f 776e 2074 6f20 6265 2063 6174   known to be cat
-000079f0: 6567 6f72 6963 616c 2028 6861 7320 6261  egorical (has ba
-00007a00: 7365 2d74 7970 6500 2020 2020 2020 2020  se-type.        
-00007a10: 5265 7475 726e 7320 5472 7565 2066 6f72  Returns True for
-00007a20: 2061 2043 415f 4341 5420 6f72 204d 525f   a CA_CAT or MR_
-00007a30: 4341 5420 6469 6d65 6e73 696f 6e2e 204f  CAT dimension. O
-00007a40: 6e6c 7920 6d65 616e 696e 6766 756c 2077  nly meaningful w
-00007a50: 6865 6e00 0020 2020 2020 2020 2022 2222  hen..        """
-00007a60: 5472 7565 2069 6620 6120 6361 7465 676f  True if a catego
-00007a70: 7269 6361 6c20 6469 6d65 6e73 696f 6e5f  rical dimension_
-00007a80: 6469 6374 2062 656c 6f6e 6773 2074 6f20  dict belongs to 
-00007a90: 616e 2061 7272 6179 2070 6169 722e 0020  an array pair.. 
-00007aa0: 2020 2064 6566 205f 6973 5f61 7272 6179     def _is_array
-00007ab0: 5f63 6174 2873 656c 6629 202d 3e20 626f  _cat(self) -> bo
-00007ac0: 6f6c 3a00 2020 2020 406c 617a 7970 726f  ol:.    @lazypro
-00007ad0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-00007ae0: 6574 7572 6e20 5b63 6174 6567 6f72 792e  eturn [category.
-00007af0: 6765 7428 2269 6422 2920 666f 7220 6361  get("id") for ca
-00007b00: 7465 676f 7279 2069 6e20 7365 6c66 2e5f  tegory in self._
-00007b10: 6361 7465 676f 7269 6573 5d20 3d3d 205b  categories] == [
-00007b20: 312c 2030 2c20 2d31 5d00 2020 2020 2020  1, 0, -1].      
-00007b30: 2020 2222 2200 2020 2020 2020 2020 666f    """.        fo
-00007b40: 6c6c 6f77 7320 7468 6520 7375 6276 6172  llows the subvar
-00007b50: 6961 626c 6573 2064 696d 656e 7369 6f6e  iables dimension
-00007b60: 2e00 2020 2020 2020 2020 7573 6564 2074  ..        used t
-00007b70: 6f20 6465 6669 6e65 2074 6865 2073 656c  o define the sel
-00007b80: 6563 7469 6f6e 7320 6469 6d65 6e73 696f  ections dimensio
-00007b90: 6e20 6f66 2074 6865 206d 756c 7469 706c  n of the multipl
-00007ba0: 6520 7265 7370 6f6e 7365 2074 7970 652c  e response type,
-00007bb0: 2077 6865 6e20 6974 0020 2020 2020 2020   when it.       
-00007bc0: 204c 6f67 6963 616c 2074 7970 6520 6861   Logical type ha
-00007bd0: 7320 6578 6163 746c 7920 7468 7265 6520  s exactly three 
-00007be0: 6361 7465 676f 7269 6573 2077 6974 6820  categories with 
-00007bf0: 4944 7320 5b2d 312c 2030 2c20 315d 2e20  IDs [-1, 0, 1]. 
-00007c00: 5468 6973 2074 7970 6520 6973 0000 2020  This type is..  
-00007c10: 2020 2020 2020 2222 2254 7275 6520 6966        """True if
-00007c20: 2064 696d 656e 7369 6f6e 2d64 6963 7420   dimension-dict 
-00007c30: 6861 7320 7468 6520 6361 7465 676f 7269  has the categori
-00007c40: 6573 2065 7175 616c 2074 6f20 7468 6f73  es equal to thos
-00007c50: 6520 6f66 2074 6865 206c 6f67 6963 616c  e of the logical
-00007c60: 2074 7970 652e 0020 2020 2064 6566 205f   type..    def _
-00007c70: 6973 5f6c 6f67 6963 616c 5f74 7970 6528  is_logical_type(
-00007c80: 7365 6c66 2920 2d3e 2062 6f6f 6c3a 0020  self) -> bool:. 
-00007c90: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00007ca0: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00007cb0: 2061 6e79 2863 6174 6567 6f72 792e 6765   any(category.ge
-00007cc0: 7428 2273 656c 6563 7465 6422 2920 666f  t("selected") fo
-00007cd0: 7220 6361 7465 676f 7279 2069 6e20 7365  r category in se
-00007ce0: 6c66 2e5f 6361 7465 676f 7269 6573 2900  lf._categories).
-00007cf0: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00007d00: 2020 2020 7072 6f70 6572 7479 2069 7320      property is 
-00007d10: 6f6e 6c79 206d 6561 6e69 6e67 6675 6c20  only meaningful 
-00007d20: 666f 7220 6120 6361 7465 676f 7269 6361  for a categorica
-00007d30: 6c20 6469 6d65 6e73 696f 6e20 6469 6374  l dimension dict
-00007d40: 2e00 2020 2020 2020 2020 4120 2273 656c  ..        A "sel
-00007d50: 6563 7465 6422 2063 6174 6567 6f72 792d  ected" category-
-00007d60: 6469 6374 2069 7320 6f6e 6520 6861 7669  dict is one havi
-00007d70: 6e67 2060 2773 656c 6563 7465 6427 3a20  ng `'selected': 
-00007d80: 5472 7565 602e 2054 6869 7300 0020 2020  True`. This..   
-00007d90: 2020 2020 2022 2222 5472 7565 2069 6620       """True if 
-00007da0: 6469 6d65 6e73 696f 6e2d 6469 6374 2069  dimension-dict i
-00007db0: 6e63 6c75 6465 7320 6f6e 6520 6f72 206d  ncludes one or m
-00007dc0: 6f72 6520 7365 6c65 6374 6564 2063 6174  ore selected cat
-00007dd0: 6567 6f72 6965 732e 0020 2020 2064 6566  egories..    def
-00007de0: 205f 6861 735f 7365 6c65 6374 6564 5f63   _has_selected_c
-00007df0: 6174 6567 6f72 7928 7365 6c66 2920 2d3e  ategory(self) ->
-00007e00: 2062 6f6f 6c3a 0020 2020 2040 6c61 7a79   bool:.    @lazy
-00007e10: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-00007e20: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
-00007e30: 696d 656e 7369 6f6e 5f64 6963 745b 2274  imension_dict["t
-00007e40: 7970 6522 5d2e 6765 7428 2263 6174 6567  ype"].get("categ
-00007e50: 6f72 6965 7322 2c20 5b5d 2900 2020 2020  ories", []).    
-00007e60: 6465 6620 5f63 6174 6567 6f72 6965 7328  def _categories(
-00007e70: 7365 6c66 2920 2d3e 204c 6973 745b 4469  self) -> List[Di
-00007e80: 6374 5d3a 0020 2020 2040 6c61 7a79 7072  ct]:.    @lazypr
-00007e90: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00007ea0: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
-00007eb0: 6e74 6564 4572 726f 7228 6622 756e 6578  ntedError(f"unex
-00007ec0: 7065 6374 6564 2064 696d 656e 7369 6f6e  pected dimension
-00007ed0: 2074 7970 6520 636c 6173 7320 277b 7479   type class '{ty
-00007ee0: 7065 5f63 6c61 7373 7d27 2229 0020 2020  pe_class}'").   
-00007ef0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00007f00: 6622 656e 756d 2e7b 7375 6263 6c61 7373  f"enum.{subclass
-00007f10: 7d22 0020 2020 2020 2020 2020 2020 2073  }".            s
-00007f20: 7562 636c 6173 7320 3d20 7365 6c66 2e5f  ubclass = self._
-00007f30: 6469 6d65 6e73 696f 6e5f 6469 6374 5b22  dimension_dict["
-00007f40: 7479 7065 225d 5b22 7375 6274 7970 6522  type"]["subtype"
-00007f50: 5d5b 2263 6c61 7373 225d 0020 2020 2020  ]["class"].     
-00007f60: 2020 2069 6620 7479 7065 5f63 6c61 7373     if type_class
-00007f70: 203d 3d20 2265 6e75 6d22 3a00 2020 2020   == "enum":.    
-00007f80: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-00007f90: 6361 7465 676f 7269 6361 6c22 0020 2020  categorical".   
-00007fa0: 2020 2020 2069 6620 7479 7065 5f63 6c61       if type_cla
-00007fb0: 7373 203d 3d20 2263 6174 6567 6f72 6963  ss == "categoric
-00007fc0: 616c 223a 0020 2020 2020 2020 2074 7970  al":.        typ
-00007fd0: 655f 636c 6173 7320 3d20 7365 6c66 2e5f  e_class = self._
-00007fe0: 6469 6d65 6e73 696f 6e5f 6469 6374 5b22  dimension_dict["
-00007ff0: 7479 7065 225d 5b22 636c 6173 7322 5d00  type"]["class"].
-00008000: 6164 0000 0800 0000 9401 0000 0010 0000  ad..............
-00008010: 5c00 0000 0000 0000 b40f 0000 680f 0000  \...........h...
-00008020: 280f 0000 1c0f 0000 dc0e 0000 bd0e 0000  (...............
-00008030: a80e 0000 8e0e 0000 450e 0000 260e 0000  ........E...&...
-00008040: 180e 0000 170e 0000 c60d 0000 c50d 0000  ................
-00008050: a30d 0000 610d 0000 430d 0000 420d 0000  ....a...C...B...
-00008060: 1c0d 0000 fe0c 0000 df0c 0000 de0c 0000  ................
-00008070: b10c 0000 9b0c 0000 9a0c 0000 990c 0000  ................
-00008080: 880c 0000 540c 0000 530c 0000 080c 0000  ....T...S.......
-00008090: bc0b 0000 6c0b 0000 210b 0000 f10a 0000  ....l...!.......
-000080a0: cd0a 0000 c50a 0000 c40a 0000 710a 0000  ............q...
-000080b0: 390a 0000 0b0a 0000 bc09 0000 bb09 0000  9...............
-000080c0: a909 0000 8309 0000 3409 0000 f508 0000  ........4.......
-000080d0: f408 0000 e208 0000 b408 0000 6808 0000  ............h...
-000080e0: 6708 0000 2808 0000 1c08 0000 ff07 0000  g...(...........
-000080f0: d507 0000 a807 0000 8607 0000 7c07 0000  ............|...
-00008100: 7b07 0000 3607 0000 e606 0000 e506 0000  {...6...........
-00008110: 9506 0000 8906 0000 3206 0000 fc05 0000  ........2.......
-00008120: e205 0000 8b05 0000 8105 0000 8005 0000  ................
-00008130: 6e05 0000 4c05 0000 1b05 0000 c404 0000  n...L...........
-00008140: 6e04 0000 3104 0000 e803 0000 aa03 0000  n...1...........
-00008150: 9c03 0000 4c03 0000 4b03 0000 f402 0000  ....L...K.......
-00008160: bd02 0000 8b02 0000 8a02 0000 7802 0000  ............x...
-00008170: 4802 0000 fd01 0000 d901 0000 d801 0000  H...............
-00008180: c601 0000 9401 0000 9301 0000 0000 0000  ................
-00008190: 0000 0000 2020 2020 6465 6620 656c 656d  ....    def elem
-000081a0: 656e 745f 616c 6961 7365 7328 7365 6c66  ent_aliases(self
-000081b0: 2920 2d3e 2054 7570 6c65 5b73 7472 2c20  ) -> Tuple[str, 
-000081c0: 2e2e 2e5d 3a00 2020 2020 406c 617a 7970  ...]:.    @lazyp
-000081d0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-000081e0: 2072 6574 7572 6e20 7365 6c66 2e5f 6469   return self._di
-000081f0: 6d65 6e73 696f 6e5f 7479 7065 0020 2020  mension_type.   
-00008200: 2020 2020 2022 2222 4d65 6d62 6572 206f       """Member o
-00008210: 6620 4449 4d45 4e53 494f 4e5f 5459 5045  f DIMENSION_TYPE
-00008220: 2061 7070 726f 7072 6961 7465 2074 6f20   appropriate to 
-00008230: 7468 6973 2063 7562 6520 6469 6d65 6e73  this cube dimens
-00008240: 696f 6e2e 2222 2200 2020 2020 6465 6620  ion.""".    def 
-00008250: 6469 6d65 6e73 696f 6e5f 7479 7065 2873  dimension_type(s
-00008260: 656c 6629 202d 3e20 5f44 696d 656e 7369  elf) -> _Dimensi
-00008270: 6f6e 5479 7065 3a00 2020 2020 406c 617a  onType:.    @laz
-00008280: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00008290: 2020 2072 6574 7572 6e20 6465 7363 7269     return descri
-000082a0: 7074 696f 6e20 6966 2064 6573 6372 6970  ption if descrip
-000082b0: 7469 6f6e 2065 6c73 6520 2222 0020 2020  tion else "".   
-000082c0: 2020 2020 2023 202d 2d2d 6465 616c 2077       # ---deal w
-000082d0: 6974 6820 4e6f 6e65 2061 7320 6120 706f  ith None as a po
-000082e0: 7373 6962 6c65 2072 6574 7572 6e20 7479  ssible return ty
-000082f0: 7065 2e00 2020 2020 2020 2020 2320 2d2d  pe..        # --
-00008300: 2d4e 6f72 6d61 6c69 7a65 2074 6f20 2222  -Normalize to ""
-00008310: 2073 6f20 7265 7475 726e 2076 616c 7565   so return value
-00008320: 2069 7320 616c 7761 7973 2061 2073 7472   is always a str
-00008330: 2061 6e64 2063 616c 6c65 7273 2064 6f6e   and callers don
-00008340: 2774 206e 6565 6420 746f 0000 2020 2020  't need to..    
-00008350: 2020 2020 2020 2020 6465 7363 7269 7074          descript
-00008360: 696f 6e20 3d20 7365 6c66 2e5f 6469 6d65  ion = self._dime
-00008370: 6e73 696f 6e5f 6469 6374 5b22 7265 6665  nsion_dict["refe
-00008380: 7265 6e63 6573 225d 2e67 6574 2822 6465  rences"].get("de
-00008390: 7363 7269 7074 696f 6e22 2900 2020 2020  scription").    
-000083a0: 2020 2020 656c 7365 3a00 2020 2020 2020      else:.      
-000083b0: 2020 2320 2d2d 2d69 6e68 6572 6974 6564    # ---inherited
-000083c0: 2076 616c 7565 2069 7320 6261 7365 2064   value is base d
-000083d0: 696d 656e 7369 6f6e 2064 6573 6372 6970  imension descrip
-000083e0: 7469 6f6e 2d2d 2d00 2020 2020 2020 2020  tion---.        
-000083f0: 2020 2020 6465 7363 7269 7074 696f 6e20      description 
-00008400: 3d20 7365 6c66 2e5f 6469 6d65 6e73 696f  = self._dimensio
-00008410: 6e5f 7472 616e 7366 6f72 6d73 5f64 6963  n_transforms_dic
-00008420: 745b 2264 6573 6372 6970 7469 6f6e 225d  t["description"]
-00008430: 0020 2020 2020 2020 2069 6620 2264 6573  .        if "des
-00008440: 6372 6970 7469 6f6e 2220 696e 2073 656c  cription" in sel
-00008450: 662e 5f64 696d 656e 7369 6f6e 5f74 7261  f._dimension_tra
-00008460: 6e73 666f 726d 735f 6469 6374 3a00 2020  nsforms_dict:.  
-00008470: 2020 2020 2020 2320 2d2d 2d69 7320 6120        # ---is a 
-00008480: 6c65 6769 7469 6d61 7465 2076 616c 7565  legitimate value
-00008490: 2c20 696e 6469 6361 7469 6e67 2073 7570  , indicating sup
-000084a0: 7072 6573 7369 6f6e 206f 6620 616e 7920  pression of any 
-000084b0: 696e 6865 7269 7465 6420 7375 6274 6974  inherited subtit
-000084c0: 6c65 2e00 2020 2020 2020 2020 2320 2d2d  le..        # --
-000084d0: 2d46 6972 7374 2061 7574 686f 7269 7479  -First authority
-000084e0: 2069 6e20 6361 7363 6164 6520 6973 2061   in cascade is a
-000084f0: 6e61 6c79 7369 732d 7370 6563 6966 6963  nalysis-specific
-00008500: 2064 696d 656e 7369 6f6e 2074 7261 6e73   dimension trans
-00008510: 666f 726d 2e20 4e6f 6e65 0020 2020 2020  form. None.     
-00008520: 2020 2022 2222 7374 7220 6465 7363 7269     """str descri
-00008530: 7074 696f 6e20 6f66 2074 6869 7320 6469  ption of this di
-00008540: 6d65 6e73 696f 6e2e 2222 2200 2020 2020  mension.""".    
-00008550: 6465 6620 6465 7363 7269 7074 696f 6e28  def description(
-00008560: 7365 6c66 2920 2d3e 2073 7472 3a00 2020  self) -> str:.  
-00008570: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-00008580: 0020 2020 2020 2020 2029 0020 2020 2020  .        ).     
-00008590: 2020 2020 2020 2073 656c 662e 5f75 6e73         self._uns
-000085a0: 6869 6d6d 6564 5f64 696d 656e 7369 6f6e  himmed_dimension
-000085b0: 5f64 6963 742c 2073 656c 662e 5f64 696d  _dict, self._dim
-000085c0: 656e 7369 6f6e 5f74 7970 652c 2064 696d  ension_type, dim
-000085d0: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
-000085e0: 7300 2020 2020 2020 2020 7265 7475 726e  s.        return
-000085f0: 2044 696d 656e 7369 6f6e 2800 2020 2020   Dimension(.    
-00008600: 2020 2020 2320 2d2d 2d20 7468 6520 6e65      # --- the ne
-00008610: 7720 6469 6d65 6e73 696f 6e5f 7472 616e  w dimension_tran
-00008620: 7366 6f72 6d73 2064 6963 7469 6f6e 6172  sforms dictionar
-00008630: 7900 2020 2020 2020 2020 2320 2d2d 2d20  y.        # --- 
-00008640: 5573 6520 756e 7368 696d 6d65 6420 602e  Use unshimmed `.
-00008650: 5f64 696d 656e 7369 6f6e 5f64 6963 7460  _dimension_dict`
-00008660: 2062 6563 6175 7365 2077 6520 6e65 6564   because we need
-00008670: 2074 6f20 7265 2d73 6869 6d20 6974 2061   to re-shim it a
-00008680: 6c6f 6e67 7369 6465 0020 2020 2020 2020  longside.       
-00008690: 2022 2222 0020 2020 2020 2020 2054 6865   """.        The
-000086a0: 206e 6577 2064 696d 656e 7369 6f6e 206f   new dimension o
-000086b0: 626a 6563 7420 6973 2074 6865 2073 616d  bject is the sam
-000086c0: 6520 6173 2074 6869 7320 6f6e 6520 696e  e as this one in
-000086d0: 2061 6c6c 206f 7468 6572 2072 6573 7065   all other respe
-000086e0: 6374 732e 0000 2020 2020 2020 2020 2222  cts...        ""
-000086f0: 2252 6574 7572 6e20 6120 6e65 7720 6044  "Return a new `D
-00008700: 696d 656e 7369 6f6e 6020 6f62 6a65 6374  imension` object
-00008710: 2077 6974 6820 6064 696d 656e 7369 6f6e   with `dimension
-00008720: 5f74 7261 6e73 666f 726d 7360 2061 7070  _transforms` app
-00008730: 6c69 6564 2e00 2020 2020 6465 6620 6170  lied..    def ap
-00008740: 706c 795f 7472 616e 7366 6f72 6d73 2873  ply_transforms(s
-00008750: 656c 662c 2064 696d 656e 7369 6f6e 5f74  elf, dimension_t
-00008760: 7261 6e73 666f 726d 7329 202d 3e20 2244  ransforms) -> "D
-00008770: 696d 656e 7369 6f6e 223a 0000 2020 2020  imension":..    
-00008780: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-00008790: 2020 7365 6c66 2e5f 6469 6d65 6e73 696f    self._dimensio
-000087a0: 6e5f 7479 7065 2c00 2020 2020 2020 2020  n_type,.        
-000087b0: 2020 2020 7365 6c66 2e5f 6469 6d65 6e73      self._dimens
-000087c0: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-000087d0: 6963 742c 0020 2020 2020 2020 2020 2020  ict,.           
-000087e0: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
-000087f0: 5f64 6963 745b 2274 7970 6522 5d2c 0020  _dict["type"],. 
-00008800: 2020 2020 2020 2072 6574 7572 6e20 5f41         return _A
-00008810: 6c6c 456c 656d 656e 7473 2800 2020 2020  llElements(.    
-00008820: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00008830: 456c 656d 656e 7473 2069 6e20 7468 6973  Elements in this
-00008840: 2073 6571 7565 6e63 6520 6170 7065 6172   sequence appear
-00008850: 2069 6e20 6375 6265 2d72 6573 756c 7420   in cube-result 
-00008860: 6f72 6465 722e 0000 2020 2020 2020 2020  order...        
-00008870: 2222 225f 416c 6c45 6c65 6d65 6e74 7320  """_AllElements 
-00008880: 6f62 6a65 6374 2070 726f 7669 6469 6e67  object providing
-00008890: 2063 6174 7320 6f72 2073 7562 7661 7273   cats or subvars
-000088a0: 206f 6620 7468 6973 2064 696d 656e 7369   of this dimensi
-000088b0: 6f6e 2e00 2020 2020 6465 6620 616c 6c5f  on..    def all_
-000088c0: 656c 656d 656e 7473 2873 656c 6629 202d  elements(self) -
-000088d0: 3e20 225f 416c 6c45 6c65 6d65 6e74 7322  > "_AllElements"
-000088e0: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-000088f0: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-00008900: 7572 6e20 7365 6c66 2e5f 6469 6d65 6e73  urn self._dimens
-00008910: 696f 6e5f 6469 6374 5b22 7265 6665 7265  ion_dict["refere
-00008920: 6e63 6573 225d 2e67 6574 2822 616c 6961  nces"].get("alia
-00008930: 7322 2900 2020 2020 2020 2020 2222 2252  s").        """R
-00008940: 6574 7572 6e20 7468 6520 616c 6961 7320  eturn the alias 
-00008950: 666f 7220 7468 6520 6469 6d65 6e73 696f  for the dimensio
-00008960: 6e20 6966 2069 7420 6578 6973 7473 2c20  n if it exists, 
-00008970: 4e6f 6e65 206f 7468 6572 7769 7365 2e22  None otherwise."
-00008980: 2222 0020 2020 2064 6566 2061 6c69 6173  "".    def alias
-00008990: 2873 656c 6629 202d 3e20 4f70 7469 6f6e  (self) -> Option
-000089a0: 616c 5b73 7472 5d3a 0020 2020 2040 6c61  al[str]:.    @la
-000089b0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-000089c0: 2020 2020 7365 6c66 2e5f 756e 7368 696d      self._unshim
-000089d0: 6d65 645f 6469 6d65 6e73 696f 6e5f 7472  med_dimension_tr
-000089e0: 616e 7366 6f72 6d73 5f64 6963 7420 3d20  ansforms_dict = 
-000089f0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
-00008a00: 6f72 6d73 206f 7220 7b7d 0020 2020 2020  orms or {}.     
-00008a10: 2020 2073 656c 662e 5f64 696d 656e 7369     self._dimensi
-00008a20: 6f6e 5f74 7970 6520 3d20 6469 6d65 6e73  on_type = dimens
-00008a30: 696f 6e5f 7479 7065 0020 2020 2020 2020  ion_type.       
-00008a40: 2073 656c 662e 5f75 6e73 6869 6d6d 6564   self._unshimmed
-00008a50: 5f64 696d 656e 7369 6f6e 5f64 6963 7420  _dimension_dict 
-00008a60: 3d20 6469 6d65 6e73 696f 6e5f 6469 6374  = dimension_dict
-00008a70: 0020 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00008a80: 5f28 7365 6c66 2c20 6469 6d65 6e73 696f  _(self, dimensio
-00008a90: 6e5f 6469 6374 2c20 6469 6d65 6e73 696f  n_dict, dimensio
-00008aa0: 6e5f 7479 7065 2c20 6469 6d65 6e73 696f  n_type, dimensio
-00008ab0: 6e5f 7472 616e 7366 6f72 6d73 3d4e 6f6e  n_transforms=Non
-00008ac0: 6529 3a00 0020 2020 2022 2222 0020 2020  e):..    """.   
-00008ad0: 203a 6174 7472 3a60 2e43 7275 6e63 6843   :attr:`.CrunchC
-00008ae0: 7562 652e 6469 6d65 6e73 696f 6e73 602e  ube.dimensions`.
-00008af0: 0020 2020 2064 696d 656e 7369 6f6e 206f  .    dimension o
-00008b00: 626a 6563 7473 2c20 7768 6963 6820 6172  bjects, which ar
-00008b10: 6520 6163 6365 7373 6564 2075 7369 6e67  e accessed using
-00008b20: 0020 2020 2061 2074 776f 2d64 696d 656e  .    a two-dimen
-00008b30: 7369 6f6e 616c 2028 3244 2920 6375 6265  sional (2D) cube
-00008b40: 2072 6573 706f 6e73 652e 2054 6861 7420   response. That 
-00008b50: 6375 6265 2077 696c 6c20 6861 7665 2074  cube will have t
-00008b60: 776f 206f 6620 7468 6573 6500 2020 2020  wo of these.    
-00008b70: 7769 6c6c 2068 6176 6520 7477 6f20 7661  will have two va
-00008b80: 7269 6162 6c65 7320 2873 6e61 636b 2d66  riables (snack-f
-00008b90: 6f6f 6420 7072 6566 6572 656e 6365 2061  ood preference a
-00008ba0: 6e64 2072 6567 696f 6e29 2061 6e64 2077  nd region) and w
-00008bb0: 696c 6c20 7072 6f64 7563 6500 2020 2020  ill produce.    
-00008bc0: 6578 616d 706c 652c 2061 2071 7565 7279  example, a query
-00008bd0: 2074 6f20 6372 6f73 732d 7461 6275 6c61   to cross-tabula
-00008be0: 7465 2073 6e61 636b 2d66 6f6f 6420 7072  te snack-food pr
-00008bf0: 6566 6572 656e 6365 2061 6761 696e 7374  eference against
-00008c00: 2072 6567 696f 6e00 2020 2020 4561 6368   region.    Each
-00008c10: 2064 696d 656e 7369 6f6e 2072 6570 7265   dimension repre
-00008c20: 7365 6e74 7320 6f6e 6520 6f66 2074 6865  sents one of the
-00008c30: 2076 6172 6961 626c 6573 2069 6e20 6120   variables in a 
-00008c40: 6375 6265 2072 6573 706f 6e73 652e 2046  cube response. F
-00008c50: 6f72 0000 2020 2020 2222 2252 6570 7265  or..    """Repre
-00008c60: 7365 6e74 7320 6f6e 6520 6469 6d65 6e73  sents one dimens
-00008c70: 696f 6e20 6f66 2061 2063 7562 6520 7265  ion of a cube re
-00008c80: 7370 6f6e 7365 2e00 636c 6173 7320 4469  sponse..class Di
-00008c90: 6d65 6e73 696f 6e3a 0000 0020 2020 2020  mension:...     
-00008ca0: 2020 2072 6574 7572 6e20 4454 2e43 4154     return DT.CAT
-00008cb0: 0020 2020 2020 2020 2023 202d 2d2d 6f72  .        # ---or
-00008cc0: 2074 6865 2070 6c61 696e 2d6f 6c64 2063   the plain-old c
-00008cd0: 6174 6567 6f72 6963 616c 2d2d 2d00 0020  ategorical---.. 
-00008ce0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00008cf0: 6e20 4454 2e43 4154 5f44 4154 4500 2020  n DT.CAT_DATE.  
-00008d00: 2020 2020 2020 6966 2073 656c 662e 5f69        if self._i
-00008d10: 735f 6361 745f 6461 7465 3a00 2020 2020  s_cat_date:.    
-00008d20: 2020 2020 2320 2d2d 2d6f 7220 6120 6361      # ---or a ca
-00008d30: 7465 676f 7269 6361 6c20 6461 7465 2d2d  tegorical date--
-00008d40: 2d00 0020 2020 2020 2020 2020 2020 2072  -..            r
-00008d50: 6574 7572 6e20 4454 2e4c 4f47 4943 414c  eturn DT.LOGICAL
-00008d60: 0020 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00008d70: 2e5f 6861 735f 7365 6c65 6374 6564 5f63  ._has_selected_c
-00008d80: 6174 6567 6f72 7920 616e 6420 7365 6c66  ategory and self
-00008d90: 2e5f 6973 5f6c 6f67 6963 616c 5f74 7970  ._is_logical_typ
-00008da0: 653a 0020 2020 2020 2020 2023 202d 2d2d  e:.        # ---
-00008db0: 6669 7273 7420 7468 6520 6c6f 6769 6361  first the logica
-00008dc0: 6c2d 2d2d 0000 2020 2020 2020 2020 2320  l---..        # 
-00008dd0: 2d2d 2d77 6861 7427 7320 6c65 6674 2069  ---what's left i
-00008de0: 7320 7468 7265 6520 6469 6666 6572 656e  s three differen
-00008df0: 7420 7665 7273 696f 6e73 206f 6620 6361  t versions of ca
-00008e00: 7465 676f 7269 6361 6c20 6469 6d65 6e73  tegorical dimens
-00008e10: 696f 6e2d 2d2d 0000 2020 2020 2020 2020  ion---..        
-00008e20: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-00008e30: 2020 2020 2020 656c 7365 2044 542e 4341        else DT.CA
-00008e40: 5f43 4154 0020 2020 2020 2020 2020 2020  _CAT.           
-00008e50: 2020 2020 2069 6620 7365 6c66 2e5f 6861       if self._ha
-00008e60: 735f 7365 6c65 6374 6564 5f63 6174 6567  s_selected_categ
-00008e70: 6f72 7920 616e 6420 7365 6c66 2e5f 6973  ory and self._is
-00008e80: 5f6c 6f67 6963 616c 5f74 7970 6500 2020  _logical_type.  
-00008e90: 2020 2020 2020 2020 2020 2020 2020 4454                DT
-00008ea0: 2e4d 525f 4341 5400 2020 2020 2020 2020  .MR_CAT.        
-00008eb0: 2020 2020 7265 7475 726e 2028 0020 2020      return (.   
-00008ec0: 2020 2020 2069 6620 7365 6c66 2e5f 6973       if self._is
-00008ed0: 5f61 7272 6179 5f63 6174 3a00 2020 2020  _array_cat:.    
-00008ee0: 2020 2020 2320 2d2d 2d61 6e20 6172 7261      # ---an arra
-00008ef0: 7920 6361 7465 676f 7269 6361 6c20 6973  y categorical is
-00008f00: 2065 6974 6865 7220 4341 5f43 4154 206f   either CA_CAT o
-00008f10: 7220 4d52 5f43 4154 2d2d 2d00 2020 2020  r MR_CAT---.    
-00008f20: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00008f30: 6f66 2074 6865 2063 6174 6567 6f72 6963  of the categoric
-00008f40: 616c 2074 7970 6573 2028 6861 7320 6261  al types (has ba
-00008f50: 7365 2d74 7970 6520 2763 6174 6567 6f72  se-type 'categor
-00008f60: 6963 616c 2729 2e00 2020 2020 2020 2020  ical')..        
-00008f70: 7265 7475 726e 2076 616c 7565 2069 7320  return value is 
-00008f80: 6f6e 6c79 206d 6561 6e69 6e67 6675 6c20  only meaningful 
-00008f90: 6966 2074 6865 2064 696d 656e 7369 6f6e  if the dimension
-00008fa0: 2069 7320 6b6e 6f77 6e20 746f 2062 6520   is known to be 
-00008fb0: 6f6e 6500 2020 2020 2020 2020 6469 6d65  one.        dime
-00008fc0: 6e73 696f 6e20 7479 7065 732c 2061 6c6c  nsion types, all
-00008fd0: 206f 6620 7768 6963 6820 6861 7665 2074   of which have t
-00008fe0: 6865 2062 6173 6520 7479 7065 2027 6361  he base type 'ca
-00008ff0: 7465 676f 7269 6361 6c27 2e20 5468 6500  tegorical'. The.
-00009000: 6164 0000 4800 0000 c401 0000 0010 0000  ad..H...........
-00009010: 5800 0000 0000 0000 ab0f 0000 aa0f 0000  X...............
-00009020: 620f 0000 560f 0000 1b0f 0000 1a0f 0000  b...V...........
-00009030: 080f 0000 da0e 0000 8d0e 0000 8c0e 0000  ................
-00009040: 480e 0000 3c0e 0000 fc0d 0000 fb0d 0000  H...<...........
-00009050: e90d 0000 b80d 0000 640d 0000 630d 0000  ........d...c...
-00009060: 1c0d 0000 100d 0000 d50c 0000 d40c 0000  ................
-00009070: c20c 0000 940c 0000 3f0c 0000 3e0c 0000  ........?...>...
-00009080: e60b 0000 d80b 0000 cc0b 0000 b60b 0000  ................
-00009090: 5e0b 0000 540b 0000 530b 0000 410b 0000  ^...T...S...A...
-000090a0: 110b 0000 c60a 0000 c50a 0000 720a 0000  ............r...
-000090b0: 660a 0000 290a 0000 280a 0000 160a 0000  f...)...(.......
-000090c0: fb09 0000 a909 0000 7109 0000 7009 0000  ........q...p...
-000090d0: 5809 0000 0109 0000 aa08 0000 5408 0000  X...........T...
-000090e0: 3b08 0000 0108 0000 c207 0000 8607 0000  ;...............
-000090f0: 6107 0000 3707 0000 0607 0000 db06 0000  a...7...........
-00009100: da06 0000 8606 0000 3b06 0000 2106 0000  ........;...!...
-00009110: fd05 0000 fc05 0000 ea05 0000 ab05 0000  ................
-00009120: 6205 0000 6105 0000 1605 0000 d304 0000  b...a...........
-00009130: 8a04 0000 4004 0000 1704 0000 1604 0000  ....@...........
-00009140: db03 0000 8d03 0000 4003 0000 2503 0000  ........@...%...
-00009150: 1903 0000 ca02 0000 c902 0000 b702 0000  ................
-00009160: 8d02 0000 3502 0000 f401 0000 f301 0000  ....5...........
-00009170: e101 0000 c401 0000 c301 0000 0000 0000  ................
-00009180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000091a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000091b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000091c0: 0000 0000 2020 2020 6465 6620 7072 756e  ....    def prun
-000091d0: 6528 7365 6c66 2920 2d3e 2062 6f6f 6c3a  e(self) -> bool:
-000091e0: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-000091f0: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-00009200: 726e 205f 4f72 6465 7253 7065 6328 7365  rn _OrderSpec(se
-00009210: 6c66 2c20 7365 6c66 2e5f 6469 6d65 6e73  lf, self._dimens
-00009220: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-00009230: 6963 7429 0020 2020 2020 2020 2022 2222  ict).        """
-00009240: 5f4f 7264 6572 5370 6563 2070 726f 7879  _OrderSpec proxy
-00009250: 206f 626a 6563 7420 666f 7220 6469 6d65   object for dime
-00009260: 6e73 696f 6e2e 7472 616e 7366 6f72 6d73  nsion.transforms
-00009270: 2e6f 7264 6572 2064 6963 7420 6672 6f6d  .order dict from
-00009280: 2070 6179 6c6f 6164 2e22 2222 0020 2020   payload.""".   
-00009290: 2064 6566 206f 7264 6572 5f73 7065 6328   def order_spec(
-000092a0: 7365 6c66 2920 2d3e 2022 5f4f 7264 6572  self) -> "_Order
-000092b0: 5370 6563 223a 0020 2020 2040 6c61 7a79  Spec":.    @lazy
-000092c0: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-000092d0: 2020 7265 7475 726e 2074 7570 6c65 2865    return tuple(e
-000092e0: 6c65 6d65 6e74 2e6e 756d 6572 6963 5f76  lement.numeric_v
-000092f0: 616c 7565 2066 6f72 2065 6c65 6d65 6e74  alue for element
-00009300: 2069 6e20 7365 6c66 2e76 616c 6964 5f65   in self.valid_e
-00009310: 6c65 6d65 6e74 7329 0020 2020 2020 2020  lements).       
-00009320: 2022 2222 0020 2020 2020 2020 2074 6865   """.        the
-00009330: 2072 6574 7572 6e65 6420 6c69 7374 2e00   returned list..
-00009340: 2020 2020 2020 2020 6120 7661 6c75 652c          a value,
-00009350: 2062 7574 2061 6e20 656c 656d 656e 7420   but an element 
-00009360: 7769 7468 206e 6f20 6e75 6d65 7269 6320  with no numeric 
-00009370: 7661 6c75 6520 6170 7065 6172 7320 6173  value appears as
-00009380: 2060 6e70 2e6e 616e 6020 696e 0020 2020   `np.nan` in.   
-00009390: 2020 2020 2063 6174 6567 6f72 6965 732f       categories/
-000093a0: 656c 656d 656e 7473 206f 6620 7468 6973  elements of this
-000093b0: 2064 696d 656e 7369 6f6e 2e20 4561 6368   dimension. Each
-000093c0: 2065 6c65 6d65 6e74 2069 7320 7265 7072   element is repr
-000093d0: 6573 656e 7465 6420 6279 0020 2020 2020  esented by.     
-000093e0: 2020 2054 6865 206e 756d 6572 6963 2076     The numeric v
-000093f0: 616c 7565 7320 6170 7065 6172 2069 6e20  alues appear in 
-00009400: 7468 6520 7361 6d65 206f 7264 6572 2061  the same order a
-00009410: 7320 7468 6500 0020 2020 2020 2020 2065  s the..        e
-00009420: 7861 6d70 6c65 2c20 6120 7363 616c 6520  xample, a scale 
-00009430: 6f66 2070 7265 6665 7265 6e63 6529 2e00  of preference)..
-00009440: 2020 2020 2020 2020 2873 7563 6820 6173          (such as
-00009450: 206d 6561 6e29 2074 6f20 6265 2061 7070   mean) to be app
-00009460: 6c69 6564 2074 6f20 7768 6174 206e 6f77  lied to what now
-00009470: 2066 6f72 6d73 2061 202a 7363 616c 652a   forms a *scale*
-00009480: 2028 696e 2074 6869 7300 2020 2020 2020   (in this.      
-00009490: 2020 6e65 7574 7261 6c3d 3060 2e20 5468    neutral=0`. Th
-000094a0: 6573 6520 6e75 6d65 7269 6320 6d61 7070  ese numeric mapp
-000094b0: 696e 6773 2061 6c6c 6f77 2071 7561 6e74  ings allow quant
-000094c0: 6974 6174 6976 6520 6f70 6572 6174 696f  itative operatio
-000094d0: 6e73 0020 2020 2020 2020 2076 616c 7565  ns.        value
-000094e0: 2a2e 2046 6f72 2065 7861 6d70 6c65 2c20  *. For example, 
-000094f0: 6f6e 6520 6d69 6768 7420 6173 7369 676e  one might assign
-00009500: 2060 6c69 6b65 3d31 2c20 6469 736c 696b   `like=1, dislik
-00009510: 653d 2d31 2c00 2020 2020 2020 2020 4561  e=-1,.        Ea
-00009520: 6368 2063 6174 6567 6f72 7920 6f66 2061  ch category of a
-00009530: 2063 6174 6567 6f72 6963 616c 2076 6172   categorical var
-00009540: 6961 626c 6520 6361 6e20 6265 2061 7373  iable can be ass
-00009550: 6967 6e65 6420 6120 2a6e 756d 6572 6963  igned a *numeric
-00009560: 0000 2020 2020 2020 2020 2222 2274 7570  ..        """tup
-00009570: 6c65 206f 6620 6e75 6d65 7269 6320 7661  le of numeric va
-00009580: 6c75 6573 2066 6f72 2076 616c 6964 2065  lues for valid e
-00009590: 6c65 6d65 6e74 7320 6f66 2074 6869 7320  lements of this 
-000095a0: 6469 6d65 6e73 696f 6e2e 0020 2020 2064  dimension..    d
-000095b0: 6566 206e 756d 6572 6963 5f76 616c 7565  ef numeric_value
-000095c0: 7328 7365 6c66 2920 2d3e 2054 7570 6c65  s(self) -> Tuple
-000095d0: 5b55 6e69 6f6e 5b69 6e74 2c20 666c 6f61  [Union[int, floa
-000095e0: 745d 2c20 2e2e 2e5d 3a00 2020 2020 406c  t], ...]:.    @l
-000095f0: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-00009600: 2020 2020 2072 6574 7572 6e20 6e61 6d65       return name
-00009610: 2069 6620 6e61 6d65 2065 6c73 6520 2222   if name else ""
-00009620: 0020 2020 2020 2020 206e 616d 6520 3d20  .        name = 
-00009630: 7261 775f 6e61 6d65 2829 0020 2020 2020  raw_name().     
-00009640: 2020 2023 202d 2d2d 646f 6e27 7420 6e65     # ---don't ne
-00009650: 6564 2074 6f20 6465 616c 2077 6974 6820  ed to deal with 
-00009660: 6d75 6c74 6970 6c65 2070 6f73 7369 626c  multiple possibl
-00009670: 6520 7265 7475 726e 2076 616c 7565 2074  e return value t
-00009680: 7970 6573 2e00 2020 2020 2020 2020 2320  ypes..        # 
-00009690: 2d2d 2d4e 6f72 6d61 6c69 7a65 204e 6f6e  ---Normalize Non
-000096a0: 6520 7661 6c75 6520 746f 2022 2220 736f  e value to "" so
-000096b0: 2072 6574 7572 6e20 7661 6c75 6520 6973   return value is
-000096c0: 2061 6c77 6179 7320 6120 7374 7220 616e   always a str an
-000096d0: 6420 6361 6c6c 6572 7300 0020 2020 2020  d callers..     
-000096e0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000096f0: 6665 7265 6e63 6573 2e67 6574 2822 616c  ferences.get("al
-00009700: 6961 7322 2900 2020 2020 2020 2020 2020  ias").          
-00009710: 2020 2320 2d2d 2d20 6465 6661 756c 7420    # --- default 
-00009720: 6973 2064 696d 656e 7369 6f6e 2061 6c69  is dimension ali
-00009730: 6173 202d 2d2d 0020 2020 2020 2020 2020  as ---.         
-00009740: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00009750: 6665 7265 6e63 6573 5b22 6e61 6d65 225d  ferences["name"]
-00009760: 0020 2020 2020 2020 2020 2020 2069 6620  .            if 
-00009770: 226e 616d 6522 2069 6e20 7265 6665 7265  "name" in refere
-00009780: 6e63 6573 3a00 2020 2020 2020 2020 2020  nces:.          
-00009790: 2020 2320 2d2d 2d20 6e65 7874 2061 7574    # --- next aut
-000097a0: 686f 7269 7479 2069 7320 6261 7365 2064  hority is base d
-000097b0: 696d 656e 7369 6f6e 206e 616d 6520 2d2d  imension name --
-000097c0: 2d00 2020 2020 2020 2020 2020 2020 2020  -.              
-000097d0: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
-000097e0: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
-000097f0: 726d 735f 6469 6374 5b22 6e61 6d65 225d  rms_dict["name"]
-00009800: 0020 2020 2020 2020 2020 2020 2069 6620  .            if 
-00009810: 226e 616d 6522 2069 6e20 7365 6c66 2e5f  "name" in self._
-00009820: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
-00009830: 6f72 6d73 5f64 6963 743a 0020 2020 2020  orms_dict:.     
-00009840: 2020 2020 2020 2023 202d 2d2d 2074 6974         # --- tit
-00009850: 6c65 2e00 2020 2020 2020 2020 2020 2020  le..            
-00009860: 2320 2d2d 2d20 4e6f 6e65 2069 7320 6120  # --- None is a 
-00009870: 6c65 6769 7469 6d61 7465 2076 616c 7565  legitimate value
-00009880: 2c20 696e 6469 6361 7469 6e67 2073 7570  , indicating sup
-00009890: 7072 6573 7369 6f6e 206f 6620 616e 7920  pression of any 
-000098a0: 696e 6865 7269 7465 6400 2020 2020 2020  inherited.      
-000098b0: 2020 2020 2020 2320 2d2d 2d20 4669 7273        # --- Firs
-000098c0: 7420 6175 7468 6f72 6974 7920 696e 2063  t authority in c
-000098d0: 6173 6361 6465 2069 7320 616e 616c 7973  ascade is analys
-000098e0: 6973 2d73 7065 6369 6669 6320 6469 6d65  is-specific dime
-000098f0: 6e73 696f 6e20 7472 616e 7366 6f72 6d2e  nsion transform.
-00009900: 0020 2020 2020 2020 2020 2020 2022 2222  .            """
-00009910: 5265 7475 726e 2064 696d 656e 7369 6f6e  Return dimension
-00009920: 2d6e 616d 6520 6173 2073 7065 6369 6669  -name as specifi
-00009930: 6564 2028 604e 6f6e 6560 2069 7320 6e6f  ed (`None` is no
-00009940: 7420 6e6f 726d 616c 697a 6564 2074 6f20  t normalized to 
-00009950: 2222 292e 2222 2200 2020 2020 2020 2020  "").""".        
-00009960: 6465 6620 7261 775f 6e61 6d65 2829 3a00  def raw_name():.
-00009970: 0020 2020 2020 2020 2072 6566 6572 656e  .        referen
-00009980: 6365 7320 3d20 7365 6c66 2e5f 6469 6d65  ces = self._dime
-00009990: 6e73 696f 6e5f 6469 6374 5b22 7265 6665  nsion_dict["refe
-000099a0: 7265 6e63 6573 225d 0020 2020 2020 2020  rences"].       
-000099b0: 2022 2222 7374 7220 6e61 6d65 206f 6620   """str name of 
-000099c0: 7468 6973 2064 696d 656e 7369 6f6e 2c20  this dimension, 
-000099d0: 7468 6520 656d 7074 7920 7374 7269 6e67  the empty string
-000099e0: 2028 2222 2920 6966 206e 6f74 2073 7065   ("") if not spe
-000099f0: 6369 6669 6564 2e22 2222 0020 2020 2064  cified.""".    d
-00009a00: 6566 206e 616d 6528 7365 6c66 2920 2d3e  ef name(self) ->
-00009a10: 2073 7472 3a00 2020 2020 406c 617a 7970   str:.    @lazyp
-00009a20: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00009a30: 2072 6574 7572 6e20 7475 706c 6528 732e   return tuple(s.
-00009a40: 696e 7365 7274 696f 6e5f 6964 2066 6f72  insertion_id for
-00009a50: 2073 2069 6e20 7365 6c66 2e73 7562 746f   s in self.subto
-00009a60: 7461 6c73 2900 2020 2020 2020 2020 2222  tals).        ""
-00009a70: 2200 2020 2020 2020 2020 496e 7365 7274  ".        Insert
-00009a80: 696f 6e2d 6964 7320 6170 7065 6172 2069  ion-ids appear i
-00009a90: 6e20 7468 6520 6f72 6465 7220 696e 7365  n the order inse
-00009aa0: 7274 696f 6e73 2061 7265 2064 6566 696e  rtions are defin
-00009ab0: 6564 2069 6e20 7468 6520 6469 6d65 6e73  ed in the dimens
-00009ac0: 696f 6e2e 0000 2020 2020 2020 2020 2222  ion...        ""
-00009ad0: 2274 7570 6c65 206f 6620 696e 7420 696e  "tuple of int in
-00009ae0: 7365 7274 696f 6e2d 6964 2066 6f72 2065  sertion-id for e
-00009af0: 6163 6820 696e 7365 7274 696f 6e20 696e  ach insertion in
-00009b00: 2074 6869 7320 6469 6d65 6e73 696f 6e2e   this dimension.
-00009b10: 0020 2020 2064 6566 2069 6e73 6572 7469  .    def inserti
-00009b20: 6f6e 5f69 6473 2873 656c 6629 202d 3e20  on_ids(self) -> 
-00009b30: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
-00009b40: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-00009b50: 7479 0000 2020 2020 2020 2020 2900 2020  ty..        ).  
-00009b60: 2020 2020 2020 2020 2020 6964 7820 666f            idx fo
-00009b70: 7220 6964 782c 2065 6c65 6d65 6e74 2069  r idx, element i
-00009b80: 6e20 656e 756d 6572 6174 6528 7365 6c66  n enumerate(self
-00009b90: 2e76 616c 6964 5f65 6c65 6d65 6e74 7329  .valid_elements)
-00009ba0: 2069 6620 656c 656d 656e 742e 6973 5f68   if element.is_h
-00009bb0: 6964 6465 6e00 2020 2020 2020 2020 7265  idden.        re
-00009bc0: 7475 726e 2074 7570 6c65 2800 2020 2020  turn tuple(.    
-00009bd0: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00009be0: 6469 6374 2e00 2020 2020 2020 2020 416e  dict..        An
-00009bf0: 2065 6c65 6d65 6e74 2069 7320 6869 6464   element is hidd
-00009c00: 656e 2077 6865 6e20 6120 2268 6964 6522  en when a "hide"
-00009c10: 2074 7261 6e73 666f 726d 2069 7320 6170   transform is ap
-00009c20: 706c 6965 6420 746f 2069 7420 696e 2069  plied to it in i
-00009c30: 7473 2074 7261 6e73 666f 726d 7300 0020  ts transforms.. 
-00009c40: 2020 2020 2020 2022 2222 7475 706c 6520         """tuple 
-00009c50: 6f66 2069 6e74 2065 6c65 6d65 6e74 2d69  of int element-i
-00009c60: 6478 2066 6f72 2065 6163 6820 6869 6464  dx for each hidd
-00009c70: 656e 2076 616c 6964 2065 6c65 6d65 6e74  en valid element
-00009c80: 2069 6e20 7468 6973 2064 696d 656e 7369   in this dimensi
-00009c90: 6f6e 2e00 2020 2020 6465 6620 6869 6464  on..    def hidd
-00009ca0: 656e 5f69 6478 7328 7365 6c66 2920 2d3e  en_idxs(self) ->
-00009cb0: 2054 7570 6c65 5b69 6e74 2c20 2e2e 2e5d   Tuple[int, ...]
-00009cc0: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-00009cd0: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-00009ce0: 7572 6e20 7475 706c 6528 652e 6c61 6265  urn tuple(e.labe
-00009cf0: 6c20 666f 7220 6520 696e 2073 656c 662e  l for e in self.
-00009d00: 7661 6c69 645f 656c 656d 656e 7473 2900  valid_elements).
-00009d10: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00009d20: 2020 2020 456c 656d 656e 742d 6c61 6265      Element-labe
-00009d30: 6c73 2061 7070 6561 7220 696e 2074 6865  ls appear in the
-00009d40: 206f 7264 6572 2064 6566 696e 6564 2069   order defined i
-00009d50: 6e20 7468 6520 6375 6265 2d72 6573 756c  n the cube-resul
-00009d60: 742e 0000 2020 2020 2020 2020 2222 2274  t...        """t
-00009d70: 7570 6c65 206f 6620 7374 7269 6e67 2065  uple of string e
-00009d80: 6c65 6d65 6e74 2d6c 6162 656c 7320 666f  lement-labels fo
-00009d90: 7220 6561 6368 2076 616c 6964 2065 6c65  r each valid ele
-00009da0: 6d65 6e74 2069 6e20 7468 6973 2064 696d  ment in this dim
-00009db0: 656e 7369 6f6e 2e00 2020 2020 6465 6620  ension..    def 
-00009dc0: 656c 656d 656e 745f 6c61 6265 6c73 2873  element_labels(s
-00009dd0: 656c 6629 202d 3e20 5475 706c 655b 7374  elf) -> Tuple[st
-00009de0: 722c 202e 2e2e 5d3a 0020 2020 2040 6c61  r, ...]:.    @la
-00009df0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-00009e00: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-00009e10: 2865 2e65 6c65 6d65 6e74 5f69 6420 666f  (e.element_id fo
-00009e20: 7220 6520 696e 2073 656c 662e 7661 6c69  r e in self.vali
-00009e30: 645f 656c 656d 656e 7473 2900 2020 2020  d_elements).    
-00009e40: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00009e50: 456c 656d 656e 742d 6964 7320 6170 7065  Element-ids appe
-00009e60: 6172 2069 6e20 7468 6520 6f72 6465 7220  ar in the order 
-00009e70: 6465 6669 6e65 6420 696e 2074 6865 2063  defined in the c
-00009e80: 7562 652d 7265 7375 6c74 2e00 0020 2020  ube-result...   
-00009e90: 2020 2020 2022 2222 7475 706c 6520 6f66       """tuple of
-00009ea0: 2069 6e74 2065 6c65 6d65 6e74 2d69 6420   int element-id 
-00009eb0: 666f 7220 6561 6368 2076 616c 6964 2065  for each valid e
-00009ec0: 6c65 6d65 6e74 2069 6e20 7468 6973 2064  lement in this d
-00009ed0: 696d 656e 7369 6f6e 2e00 2020 2020 6465  imension..    de
-00009ee0: 6620 656c 656d 656e 745f 6964 7328 7365  f element_ids(se
-00009ef0: 6c66 2920 2d3e 2054 7570 6c65 5b69 6e74  lf) -> Tuple[int
-00009f00: 2c20 2e2e 2e5d 3a00 2020 2020 406c 617a  , ...]:.    @laz
-00009f10: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00009f20: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-00009f30: 652e 616c 6961 7320 666f 7220 6520 696e  e.alias for e in
-00009f40: 2073 656c 662e 7661 6c69 645f 656c 656d   self.valid_elem
-00009f50: 656e 7473 2900 2020 2020 2020 2020 2222  ents).        ""
-00009f60: 2200 2020 2020 2020 2020 456c 656d 656e  ".        Elemen
-00009f70: 742d 616c 6961 7365 7320 6170 7065 6172  t-aliases appear
-00009f80: 2069 6e20 7468 6520 6f72 6465 7220 6465   in the order de
-00009f90: 6669 6e65 6420 696e 2074 6865 2063 7562  fined in the cub
-00009fa0: 652d 7265 7375 6c74 2e00 0020 2020 2020  e-result...     
-00009fb0: 2020 2022 2222 7475 706c 6520 6f66 2073     """tuple of s
-00009fc0: 7472 696e 6720 656c 656d 656e 742d 616c  tring element-al
-00009fd0: 6961 7365 7320 666f 7220 6561 6368 2076  iases for each v
-00009fe0: 616c 6964 2065 6c65 6d65 6e74 2069 6e20  alid element in 
-00009ff0: 7468 6973 2064 696d 656e 7369 6f6e 2e00  this dimension..
-0000a000: 6164 0000 0700 0000 6701 0000 0010 0000  ad......g.......
-0000a010: 5100 0000 0000 0000 a90f 0000 650f 0000  Q...........e...
-0000a020: 640f 0000 520f 0000 1b0f 0000 d30e 0000  d...R...........
-0000a030: 8d0e 0000 6b0e 0000 610e 0000 180e 0000  ....k...a.......
-0000a040: 170e 0000 050e 0000 e90d 0000 940d 0000  ................
-0000a050: 6e0d 0000 6d0d 0000 5b0d 0000 2b0d 0000  n...m...[...+...
-0000a060: f20c 0000 ad0c 0000 ac0c 0000 9a0c 0000  ................
-0000a070: 670c 0000 170c 0000 160c 0000 ce0b 0000  g...............
-0000a080: c20b 0000 8c0b 0000 8b0b 0000 790b 0000  ............y...
-0000a090: 470b 0000 f80a 0000 f70a 0000 b00a 0000  G...............
-0000a0a0: a40a 0000 6e0a 0000 6d0a 0000 5b0a 0000  ....n...m...[...
-0000a0b0: 320a 0000 f809 0000 f709 0000 9e09 0000  2...............
-0000a0c0: 7e09 0000 7209 0000 1909 0000 e208 0000  ~...r...........
-0000a0d0: a908 0000 8808 0000 3008 0000 f207 0000  ........0.......
-0000a0e0: a607 0000 5b07 0000 4d07 0000 fd06 0000  ....[...M.......
-0000a0f0: af06 0000 6f06 0000 6e06 0000 3406 0000  ....o...n...4...
-0000a100: dd05 0000 dc05 0000 8605 0000 3505 0000  ............5...
-0000a110: e304 0000 ac04 0000 ab04 0000 6204 0000  ............b...
-0000a120: 2d04 0000 e003 0000 9603 0000 4103 0000  -...........A...
-0000a130: e902 0000 ba02 0000 8c02 0000 8002 0000  ................
-0000a140: 4102 0000 4002 0000 2e02 0000 fc01 0000  A...@...........
-0000a150: b601 0000 b501 0000 6701 0000 6601 0000  ........g...f...
-0000a160: 0000 0000 0000 0020 2020 2020 2020 2041  .......        A
-0000a170: 6e79 2063 6174 6567 6f72 6965 7320 6f72  ny categories or
-0000a180: 2073 7562 7661 7269 6162 6c65 7320 7265   subvariables re
-0000a190: 7072 6573 656e 7469 6e67 206d 6973 7369  presenting missi
-0000a1a0: 6e67 2064 6174 6120 6172 6520 6578 636c  ng data are excl
-0000a1b0: 7564 6564 0000 2020 2020 2020 2020 2222  uded..        ""
-0000a1c0: 225f 456c 656d 656e 7473 206f 626a 6563  "_Elements objec
-0000a1d0: 7420 7072 6f76 6964 696e 6720 6163 6365  t providing acce
-0000a1e0: 7373 2074 6f20 6e6f 6e2d 6d69 7373 696e  ss to non-missin
-0000a1f0: 6720 656c 656d 656e 7473 2e00 2020 2020  g elements..    
-0000a200: 6465 6620 7661 6c69 645f 656c 656d 656e  def valid_elemen
-0000a210: 7473 2873 656c 6629 202d 3e20 225f 5661  ts(self) -> "_Va
-0000a220: 6c69 6445 6c65 6d65 6e74 7322 3a00 2020  lidElements":.  
-0000a230: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-0000a240: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000a250: 7365 6c66 2e5f 656c 656d 656e 745f 6964  self._element_id
-0000a260: 5f73 6869 6d2e 7472 616e 736c 6174 655f  _shim.translate_
-0000a270: 656c 656d 656e 745f 6964 285f 6964 2900  element_id(_id).
-0000a280: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-0000a290: 2020 2020 3629 2049 6620 616c 6c20 6f66      6) If all of
-0000a2a0: 2074 6865 7365 2066 6169 6c2c 2072 6574   these fail, ret
-0000a2b0: 7572 6e20 4e6f 6e65 2e00 2020 2020 2020  urn None..      
-0000a2c0: 2020 2020 2030 2d23 206f 6620 656c 656d       0-# of elem
-0000a2d0: 656e 7473 292c 2075 7365 205f 6964 2774  ents), use _id't
-0000a2e0: 6820 616c 6961 732e 0020 2020 2020 2020  h alias..       
-0000a2f0: 2035 2920 4966 2069 6420 6973 2069 6e74   5) If id is int
-0000a300: 2028 6f72 2063 616e 2062 6520 7061 7273   (or can be pars
-0000a310: 6564 2074 6f20 696e 7429 2061 6e64 2063  ed to int) and c
-0000a320: 616e 2062 6520 7573 6564 2061 7320 696e  an be used as in
-0000a330: 6465 7820 2865 6720 696e 2072 616e 6765  dex (eg in range
-0000a340: 0020 2020 2020 2020 2034 2920 4966 2069  .        4) If i
-0000a350: 6420 6361 6e20 6265 2070 6172 7365 6420  d can be parsed 
-0000a360: 746f 2069 6e74 2061 6e64 206d 6174 6368  to int and match
-0000a370: 6573 2061 6e20 656c 656d 656e 7420 6964  es an element id
-0000a380: 2c20 7472 616e 736c 6174 6520 746f 2061  , translate to a
-0000a390: 6c69 6173 2e00 2020 2020 2020 2020 3329  lias..        3)
-0000a3a0: 2049 6620 6964 206d 6174 6368 6573 2061   If id matches a
-0000a3b0: 6e20 656c 656d 656e 7420 6964 2c20 7472  n element id, tr
-0000a3c0: 616e 736c 6174 6520 746f 2063 6f72 7265  anslate to corre
-0000a3d0: 7370 6f6e 6469 6e67 2061 6c69 6173 2e00  sponding alias..
-0000a3e0: 2020 2020 2020 2020 3229 2049 6620 6964          2) If id
-0000a3f0: 206d 6174 6368 6573 2061 2073 7562 7661   matches a subva
-0000a400: 7269 6162 6c65 2069 642c 2074 7261 6e73  riable id, trans
-0000a410: 6c61 7465 2074 6f20 636f 7272 6573 706f  late to correspo
-0000a420: 6e64 696e 6720 616c 6961 732e 0020 2020  nding alias..   
-0000a430: 2020 2020 2031 2920 4966 2069 6420 6d61       1) If id ma
-0000a440: 7463 6865 7320 616e 2061 6c69 6173 2c20  tches an alias, 
-0000a450: 7468 656e 206a 7573 7420 7573 6520 6974  then just use it
-0000a460: 2e00 2020 2020 2020 2020 3029 2049 6620  ..        0) If 
-0000a470: 6469 6d65 6e73 696f 6e20 6973 206e 6f74  dimension is not
-0000a480: 2061 2073 7562 7661 7269 6162 6c65 7320   a subvariables 
-0000a490: 6469 6d65 6e73 696f 6e2c 2072 6574 7572  dimension, retur
-0000a4a0: 6e20 7468 6520 5f69 642e 0000 2020 2020  n the _id...    
-0000a4b0: 2020 2020 7472 616e 7366 6f72 6d73 2069      transforms i
-0000a4c0: 7320 6e6f 7420 7472 616e 736c 6174 6564  s not translated
-0000a4d0: 2061 7420 6372 6561 7469 6f6e 2074 696d   at creation tim
-0000a4e0: 652e 0020 2020 2020 2020 2069 6473 2074  e..        ids t
-0000a4f0: 6f20 7472 616e 7366 6f72 6d20 6974 2e20  o transform it. 
-0000a500: 5468 6572 6566 6f72 652c 2074 6865 2069  Therefore, the i
-0000a510: 6420 666f 7220 6f70 706f 7369 6e67 2065  d for opposing e
-0000a520: 6c65 6d65 6e74 2073 6f72 7420 6279 2076  lement sort by v
-0000a530: 616c 7565 0020 2020 2020 2020 2077 6865  alue.        whe
-0000a540: 6e20 6372 6561 7469 6e67 2061 2064 696d  n creating a dim
-0000a550: 656e 7369 6f6e 2c20 7765 2064 6f6e 2774  ension, we don't
-0000a560: 2068 6176 6520 6163 6365 7373 2074 6f20   have access to 
-0000a570: 7468 6520 6f74 6865 7220 6469 6d65 6e73  the other dimens
-0000a580: 696f 6e27 7300 2020 2020 2020 2020 5468  ion's.        Th
-0000a590: 6973 2069 7320 6e65 6564 6564 2066 6f72  is is needed for
-0000a5a0: 2074 6865 206f 7070 6f73 696e 6720 6469   the opposing di
-0000a5b0: 6d65 6e73 696f 6e27 7320 736f 7274 2062  mension's sort b
-0000a5c0: 7920 6f70 706f 7369 6e67 2065 6c65 6d65  y opposing eleme
-0000a5d0: 6e74 2c20 6265 6361 7573 6500 0020 2020  nt, because..   
-0000a5e0: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
-0000a5f0: 2073 7472 696e 6720 7468 6174 2069 7320   string that is 
-0000a600: 7468 6520 7472 616e 736c 6174 696f 6e20  the translation 
-0000a610: 6f66 2076 6172 696f 7573 2069 6473 2074  of various ids t
-0000a620: 6f20 7375 6276 6172 6961 626c 6520 616c  o subvariable al
-0000a630: 6961 7300 2020 2020 6465 6620 7472 616e  ias.    def tran
-0000a640: 736c 6174 655f 656c 656d 656e 745f 6964  slate_element_id
-0000a650: 2873 656c 662c 205f 6964 2920 2d3e 204f  (self, _id) -> O
-0000a660: 7074 696f 6e61 6c5b 7374 725d 3a00 0020  ptional[str]:.. 
-0000a670: 2020 2020 2020 2072 6574 7572 6e20 5f53         return _S
-0000a680: 7562 746f 7461 6c73 2869 6e73 6572 7469  ubtotals(inserti
-0000a690: 6f6e 5f64 6963 7473 2c20 7365 6c66 2e76  on_dicts, self.v
-0000a6a0: 616c 6964 5f65 6c65 6d65 6e74 7329 0020  alid_elements). 
-0000a6b0: 2020 2020 2020 2020 2020 2069 6e73 6572             inser
-0000a6c0: 7469 6f6e 5f64 6963 7473 203d 2076 6965  tion_dicts = vie
-0000a6d0: 772e 6765 7428 2274 7261 6e73 666f 726d  w.get("transform
-0000a6e0: 222c 207b 7d29 2e67 6574 2822 696e 7365  ", {}).get("inse
-0000a6f0: 7274 696f 6e73 222c 205b 5d29 0020 2020  rtions", []).   
-0000a700: 2020 2020 2020 2020 2076 6965 7720 3d20           view = 
-0000a710: 7365 6c66 2e5f 6469 6d65 6e73 696f 6e5f  self._dimension_
-0000a720: 6469 6374 2e67 6574 2822 7265 6665 7265  dict.get("refere
-0000a730: 6e63 6573 222c 207b 7d29 2e67 6574 2822  nces", {}).get("
-0000a740: 7669 6577 2229 206f 7220 7b7d 0020 2020  view") or {}.   
-0000a750: 2020 2020 2065 6c73 653a 0020 2020 2020       else:.     
-0000a760: 2020 2023 202d 2d2d 206f 7468 6572 7769     # --- otherwi
-0000a770: 7365 2069 6e73 6572 7469 6f6e 7320 6465  se insertions de
-0000a780: 6669 6e65 6420 6f6e 2064 696d 656e 7369  fined on dimensi
-0000a790: 6f6e 2f76 6172 6961 626c 6520 6170 706c  on/variable appl
-0000a7a0: 7920 2d2d 2d00 2020 2020 2020 2020 2020  y ---.          
-0000a7b0: 2020 696e 7365 7274 696f 6e5f 6469 6374    insertion_dict
-0000a7c0: 7320 3d20 7365 6c66 2e5f 6469 6d65 6e73  s = self._dimens
-0000a7d0: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000a7e0: 6963 745b 2269 6e73 6572 7469 6f6e 7322  ict["insertions"
-0000a7f0: 5d00 2020 2020 2020 2020 656c 6966 2022  ].        elif "
-0000a800: 696e 7365 7274 696f 6e73 2220 696e 2073  insertions" in s
-0000a810: 656c 662e 5f64 696d 656e 7369 6f6e 5f74  elf._dimension_t
-0000a820: 7261 6e73 666f 726d 735f 6469 6374 3a00  ransforms_dict:.
-0000a830: 2020 2020 2020 2020 2320 2d2d 2d20 696e          # --- in
-0000a840: 7365 7274 696f 6e73 2069 6e20 6469 6d65  sertions in dime
-0000a850: 6e73 696f 6e2d 7472 616e 7366 6f72 6d73  nsion-transforms
-0000a860: 206f 7665 7272 6964 6520 7468 6f73 6520   override those 
-0000a870: 6f6e 2064 696d 656e 7369 6f6e 2069 7473  on dimension its
-0000a880: 656c 6620 2d2d 2d00 2020 2020 2020 2020  elf ---.        
-0000a890: 2020 2020 696e 7365 7274 696f 6e5f 6469      insertion_di
-0000a8a0: 6374 7320 3d20 5b5d 0020 2020 2020 2020  cts = [].       
-0000a8b0: 2069 6620 7365 6c66 2e64 696d 656e 7369   if self.dimensi
-0000a8c0: 6f6e 5f74 7970 6520 696e 2028 4454 2e4d  on_type in (DT.M
-0000a8d0: 522c 2044 542e 4341 5f53 5542 5641 5229  R, DT.CA_SUBVAR)
-0000a8e0: 3a00 2020 2020 2020 2020 2320 2d2d 2d20  :.        # --- 
-0000a8f0: 616e 2061 7272 6179 2064 696d 656e 7369  an array dimensi
-0000a900: 6f6e 2063 616e 6e6f 7420 6861 7665 2073  on cannot have s
-0000a910: 7562 746f 7461 6c73 0020 2020 2020 2020  ubtotals.       
-0000a920: 2023 202d 2d2d 2065 6c65 6d65 6e74 7320   # --- elements 
-0000a930: 6f66 2061 6e20 6167 6772 6567 6174 652f  of an aggregate/
-0000a940: 6172 7261 7920 6469 6d65 6e73 696f 6e20  array dimension 
-0000a950: 6361 6e6e 6f74 206d 6561 6e69 6e67 6675  cannot meaningfu
-0000a960: 6c6c 7920 6265 2073 756d 6d65 642c 2073  lly be summed, s
-0000a970: 6f00 2020 2020 2020 2020 2222 2200 2020  o.        """.  
-0000a980: 2020 2020 2020 6974 7320 6164 6465 6e64        its addend
-0000a990: 7320 616e 6420 616e 6368 6f72 2e00 2020  s and anchor..  
-0000a9a0: 2020 2020 2020 4561 6368 2069 7465 6d20        Each item 
-0000a9b0: 696e 2074 6865 2073 6571 7565 6e63 6520  in the sequence 
-0000a9c0: 6973 2061 205f 5375 6274 6f74 616c 206f  is a _Subtotal o
-0000a9d0: 626a 6563 7420 7370 6563 6966 7969 6e67  bject specifying
-0000a9e0: 2061 2073 7562 746f 7461 6c2c 2069 6e63   a subtotal, inc
-0000a9f0: 6c75 6469 6e67 0000 2020 2020 2020 2020  luding..        
-0000aa00: 2222 225f 5375 6274 6f74 616c 7320 7365  """_Subtotals se
-0000aa10: 7175 656e 6365 206f 626a 6563 7420 666f  quence object fo
-0000aa20: 7220 7468 6973 2064 696d 656e 7369 6f6e  r this dimension
-0000aa30: 2e00 2020 2020 6465 6620 7375 6274 6f74  ..    def subtot
-0000aa40: 616c 7328 7365 6c66 2920 2d3e 2022 5f53  als(self) -> "_S
-0000aa50: 7562 746f 7461 6c73 223a 0020 2020 2040  ubtotals":.    @
-0000aa60: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000aa70: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-0000aa80: 6c65 2873 2e6c 6162 656c 2066 6f72 2073  le(s.label for s
-0000aa90: 2069 6e20 7365 6c66 2e73 7562 746f 7461   in self.subtota
-0000aaa0: 6c73 2900 2020 2020 2020 2020 2222 2200  ls).        """.
-0000aab0: 2020 2020 2020 2020 456c 656d 656e 742d          Element-
-0000aac0: 6c61 6265 6c73 2061 7070 6561 7220 696e  labels appear in
-0000aad0: 2074 6865 206f 7264 6572 2064 6566 696e   the order defin
-0000aae0: 6564 2069 6e20 7468 6520 6375 6265 2d72  ed in the cube-r
-0000aaf0: 6573 756c 742e 0000 2020 2020 2020 2020  esult...        
-0000ab00: 2222 2274 7570 6c65 206f 6620 7374 7269  """tuple of stri
-0000ab10: 6e67 2065 6c65 6d65 6e74 2d6c 6162 656c  ng element-label
-0000ab20: 7320 666f 7220 6561 6368 2073 7562 746f  s for each subto
-0000ab30: 7461 6c20 696e 2074 6869 7320 6469 6d65  tal in this dime
-0000ab40: 6e73 696f 6e2e 0020 2020 2064 6566 2073  nsion..    def s
-0000ab50: 7562 746f 7461 6c5f 6c61 6265 6c73 2873  ubtotal_labels(s
-0000ab60: 656c 6629 202d 3e20 5475 706c 655b 7374  elf) -> Tuple[st
-0000ab70: 722c 202e 2e2e 5d3a 0020 2020 2040 6c61  r, ...]:.    @la
-0000ab80: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-0000ab90: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-0000aba0: 2873 2e61 6c69 6173 2066 6f72 2073 2069  (s.alias for s i
-0000abb0: 6e20 7365 6c66 2e73 7562 746f 7461 6c73  n self.subtotals
-0000abc0: 2900 2020 2020 2020 2020 2222 2200 2020  ).        """.  
-0000abd0: 2020 2020 2020 456c 656d 656e 742d 616c        Element-al
-0000abe0: 6961 7365 7320 6170 7065 6172 2069 6e20  iases appear in 
-0000abf0: 7468 6520 6f72 6465 7220 6465 6669 6e65  the order define
-0000ac00: 6420 696e 2074 6865 2063 7562 652d 7265  d in the cube-re
-0000ac10: 7375 6c74 2e00 0020 2020 2020 2020 2022  sult...        "
-0000ac20: 2222 7475 706c 6520 6f66 2073 7472 696e  ""tuple of strin
-0000ac30: 6720 656c 656d 656e 742d 616c 6961 7365  g element-aliase
-0000ac40: 7320 666f 7220 6561 6368 2073 7562 746f  s for each subto
-0000ac50: 7461 6c20 696e 2074 6869 7320 6469 6d65  tal in this dime
-0000ac60: 6e73 696f 6e2e 0020 2020 2064 6566 2073  nsion..    def s
-0000ac70: 7562 746f 7461 6c5f 616c 6961 7365 7328  ubtotal_aliases(
-0000ac80: 7365 6c66 2920 2d3e 2054 7570 6c65 5b73  self) -> Tuple[s
-0000ac90: 7472 2c20 2e2e 2e5d 3a00 2020 2020 406c  tr, ...]:.    @l
-0000aca0: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-0000acb0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000acc0: 2e5f 6469 6d65 6e73 696f 6e5f 7472 616e  ._dimension_tran
-0000acd0: 7366 6f72 6d73 5f64 6963 742e 6765 7428  sforms_dict.get(
-0000ace0: 2273 6d6f 6f74 6865 7222 2920 6f72 207b  "smoother") or {
-0000acf0: 7d00 2020 2020 2020 2020 2222 224f 7074  }.        """Opt
-0000ad00: 696f 6e61 6c20 6469 6374 206f 6620 736d  ional dict of sm
-0000ad10: 6f6f 7468 696e 6720 7370 6563 6966 6963  oothing specific
-0000ad20: 6174 696f 6e73 2e22 2222 0020 2020 2064  ations.""".    d
-0000ad30: 6566 2073 6d6f 6f74 6869 6e67 5f64 6963  ef smoothing_dic
-0000ad40: 7428 7365 6c66 2920 2d3e 204f 7074 696f  t(self) -> Optio
-0000ad50: 6e61 6c5b 4469 6374 5d3a 0020 2020 2040  nal[Dict]:.    @
-0000ad60: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000ad70: 2020 2020 2020 7265 7475 726e 206c 656e        return len
-0000ad80: 2873 656c 662e 616c 6c5f 656c 656d 656e  (self.all_elemen
-0000ad90: 7473 2900 2020 2020 2020 2020 2222 2269  ts).        """i
-0000ada0: 6e74 2063 6f75 6e74 206f 6620 2a61 6c6c  nt count of *all
-0000adb0: 2a20 656c 656d 656e 7473 2069 6e20 7468  * elements in th
-0000adc0: 6973 2064 696d 656e 7369 6f6e 2c20 626f  is dimension, bo
-0000add0: 7468 2076 616c 6964 2061 6e64 206d 6973  th valid and mis
-0000ade0: 7369 6e67 2e22 2222 0020 2020 2064 6566  sing.""".    def
-0000adf0: 2073 6861 7065 2873 656c 6629 202d 3e20   shape(self) -> 
-0000ae00: 696e 743a 0020 2020 2040 6c61 7a79 7072  int:.    @lazypr
-0000ae10: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-0000ae20: 7265 7475 726e 2074 7570 6c65 2873 656c  return tuple(sel
-0000ae30: 6563 7465 645f 6361 7465 676f 7269 6573  ected_categories
-0000ae40: 2920 6966 2073 656c 6563 7465 645f 6361  ) if selected_ca
-0000ae50: 7465 676f 7269 6573 2065 6c73 6520 2829  tegories else ()
-0000ae60: 0020 2020 2020 2020 2029 0020 2020 2020  .        ).     
-0000ae70: 2020 2020 2020 2022 7365 6c65 6374 6564         "selected
-0000ae80: 5f63 6174 6567 6f72 6965 7322 0020 2020  _categories".   
-0000ae90: 2020 2020 2073 656c 6563 7465 645f 6361       selected_ca
-0000aea0: 7465 676f 7269 6573 203d 2073 656c 662e  tegories = self.
-0000aeb0: 5f64 696d 656e 7369 6f6e 5f64 6963 745b  _dimension_dict[
-0000aec0: 2272 6566 6572 656e 6365 7322 5d2e 6765  "references"].ge
-0000aed0: 7428 0020 2020 2020 2020 2022 2222 4c69  t(.        """Li
-0000aee0: 7374 206f 6620 7365 6c65 6374 6564 2063  st of selected c
-0000aef0: 6174 6567 6f72 6965 7320 7370 6563 6966  ategories specif
-0000af00: 6965 6420 666f 7220 7468 6973 2064 696d  ied for this dim
-0000af10: 656e 7369 6f6e 2e22 2222 0020 2020 2064  ension.""".    d
-0000af20: 6566 2073 656c 6563 7465 645f 6361 7465  ef selected_cate
-0000af30: 676f 7269 6573 2873 656c 6629 202d 3e20  gories(self) -> 
-0000af40: 5475 706c 655b 4469 6374 2c20 2e2e 2e5d  Tuple[Dict, ...]
-0000af50: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-0000af60: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-0000af70: 7572 6e20 7365 6c66 2e5f 6469 6d65 6e73  urn self._dimens
-0000af80: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000af90: 6963 742e 6765 7428 2270 7275 6e65 2229  ict.get("prune")
-0000afa0: 2069 7320 5472 7565 0020 2020 2020 2020   is True.       
-0000afb0: 2022 2222 5472 7565 2069 6620 656d 7074   """True if empt
-0000afc0: 7920 656c 656d 656e 7473 2073 686f 756c  y elements shoul
-0000afd0: 6420 6265 2061 7574 6f6d 6174 6963 616c  d be automatical
-0000afe0: 6c79 2068 6964 6465 6e20 6f6e 2074 6869  ly hidden on thi
-0000aff0: 7320 6469 6d65 6e73 696f 6e2e 2222 2200  s dimension.""".
-0000b000: 6164 0000 0e00 0000 c201 0000 0010 0000  ad..............
-0000b010: 6600 0000 0000 0000 b90f 0000 940f 0000  f...............
-0000b020: 880f 0000 580f 0000 570f 0000 450f 0000  ....X...W...E...
-0000b030: 110f 0000 da0e 0000 bb0e 0000 990e 0000  ................
-0000b040: 6d0e 0000 360e 0000 2c0e 0000 2b0e 0000  m...6...,...+...
-0000b050: 190e 0000 f20d 0000 ac0d 0000 700d 0000  ............p...
-0000b060: 6f0d 0000 5d0d 0000 2b0d 0000 da0c 0000  o...]...+.......
-0000b070: 930c 0000 920c 0000 910c 0000 720c 0000  ............r...
-0000b080: 3c0c 0000 3b0c 0000 120c 0000 e90b 0000  <...;...........
-0000b090: bd0b 0000 bc0b 0000 a40b 0000 720b 0000  ............r...
-0000b0a0: 4e0b 0000 4d0b 0000 360b 0000 0e0b 0000  N...M...6.......
-0000b0b0: eb0a 0000 ea0a 0000 d80a 0000 aa0a 0000  ................
-0000b0c0: 6b0a 0000 6a0a 0000 210a 0000 150a 0000  k...j...!.......
-0000b0d0: ce09 0000 cd09 0000 bb09 0000 8c09 0000  ................
-0000b0e0: 4a09 0000 4909 0000 fe08 0000 b208 0000  J...I...........
-0000b0f0: 7508 0000 6908 0000 2708 0000 2608 0000  u...i...'...&...
-0000b100: ee07 0000 b007 0000 af07 0000 6207 0000  ............b...
-0000b110: 1507 0000 dd06 0000 d106 0000 a106 0000  ................
-0000b120: a006 0000 8e06 0000 7506 0000 3806 0000  ........u...8...
-0000b130: 3706 0000 0906 0000 fd05 0000 b305 0000  7...............
-0000b140: b205 0000 a005 0000 7905 0000 4605 0000  ........y...F...
-0000b150: fb04 0000 fa04 0000 f904 0000 d604 0000  ................
-0000b160: 9404 0000 9304 0000 5b04 0000 5304 0000  ........[...S...
-0000b170: 5204 0000 0404 0000 e003 0000 9c03 0000  R...............
-0000b180: 6e03 0000 6d03 0000 5b03 0000 2903 0000  n...m...[...)...
-0000b190: df02 0000 9002 0000 8f02 0000 7d02 0000  ............}...
-0000b1a0: 5102 0000 fd01 0000 ec01 0000 c201 0000  Q...............
-0000b1b0: c101 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1c0: 0000 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000b1d0: 6c66 2e5f 7479 7065 5f64 6963 745b 2263  lf._type_dict["c
-0000b1e0: 6174 6567 6f72 6965 7322 5d00 2020 2020  ategories"].    
-0000b1f0: 2020 2020 7265 7475 726e 2028 0020 2020      return (.   
-0000b200: 2020 2020 2022 2222 5365 7175 656e 6365       """Sequence
-0000b210: 206f 6620 656c 656d 656e 742d 6469 6374   of element-dict
-0000b220: 7320 666f 7220 7468 6973 2064 696d 656e  s for this dimen
-0000b230: 7369 6f6e 2c20 7461 6b65 6e20 6672 6f6d  sion, taken from
-0000b240: 2063 7562 652d 7265 7375 6c74 2e22 2222   cube-result."""
-0000b250: 0020 2020 2064 6566 205f 656c 656d 656e  .    def _elemen
-0000b260: 745f 6469 6374 7328 7365 6c66 2920 2d3e  t_dicts(self) ->
-0000b270: 204c 6973 745b 4469 6374 5d3a 0020 2020   List[Dict]:.   
-0000b280: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000b290: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-0000b2a0: 5661 6c69 6445 6c65 6d65 6e74 7328 7365  ValidElements(se
-0000b2b0: 6c66 2e5f 656c 656d 656e 7473 2c20 7365  lf._elements, se
-0000b2c0: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 7472  lf._dimension_tr
-0000b2d0: 616e 7366 6f72 6d73 5f64 6963 7429 0020  ansforms_dict). 
-0000b2e0: 2020 2020 2020 2022 2222 5f56 616c 6964         """_Valid
-0000b2f0: 456c 656d 656e 7473 206f 626a 6563 7420  Elements object 
-0000b300: 636f 6e74 6169 6e69 6e67 206f 6e6c 7920  containing only 
-0000b310: 6e6f 6e2d 6d69 7373 696e 6720 656c 656d  non-missing elem
-0000b320: 656e 7473 2e22 2222 0020 2020 2064 6566  ents.""".    def
-0000b330: 2076 616c 6964 5f65 6c65 6d65 6e74 7328   valid_elements(
-0000b340: 7365 6c66 2920 2d3e 2022 5f56 616c 6964  self) -> "_Valid
-0000b350: 456c 656d 656e 7473 223a 0020 2020 2040  Elements":.    @
-0000b360: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000b370: 2020 2020 2020 7365 6c66 2e5f 6469 6d65        self._dime
-0000b380: 6e73 696f 6e5f 7479 7065 203d 2064 696d  nsion_type = dim
-0000b390: 656e 7369 6f6e 5f74 7970 6500 2020 2020  ension_type.    
-0000b3a0: 2020 2020 7365 6c66 2e5f 6469 6d65 6e73      self._dimens
-0000b3b0: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000b3c0: 6963 7420 3d20 6469 6d65 6e73 696f 6e5f  ict = dimension_
-0000b3d0: 7472 616e 7366 6f72 6d73 5f64 6963 7400  transforms_dict.
-0000b3e0: 2020 2020 2020 2020 7365 6c66 2e5f 7479          self._ty
-0000b3f0: 7065 5f64 6963 7420 3d20 7479 7065 5f64  pe_dict = type_d
-0000b400: 6963 7400 2020 2020 6465 6620 5f5f 696e  ict.    def __in
-0000b410: 6974 5f5f 2873 656c 662c 2074 7970 655f  it__(self, type_
-0000b420: 6469 6374 2c20 6469 6d65 6e73 696f 6e5f  dict, dimension_
-0000b430: 7472 616e 7366 6f72 6d73 5f64 6963 742c  transforms_dict,
-0000b440: 2064 696d 656e 7369 6f6e 5f74 7970 6529   dimension_type)
-0000b450: 3a00 0020 2020 2022 2222 0020 2020 2045  :..    """.    E
-0000b460: 6163 6820 656c 656d 656e 7420 6973 2065  ach element is e
-0000b470: 6974 6865 7220 6120 6361 7465 676f 7279  ither a category
-0000b480: 206f 7220 6120 7375 6276 6172 6961 626c   or a subvariabl
-0000b490: 652e 0000 2020 2020 2222 2253 6571 7565  e...    """Seque
-0000b4a0: 6e63 6520 6f66 205f 4261 7365 456c 656d  nce of _BaseElem
-0000b4b0: 656e 7420 7375 6263 6c61 7373 206f 626a  ent subclass obj
-0000b4c0: 6563 7473 2066 6f72 2061 2064 696d 656e  ects for a dimen
-0000b4d0: 7369 6f6e 2e00 636c 6173 7320 5f41 6c6c  sion..class _All
-0000b4e0: 456c 656d 656e 7473 285f 4261 7365 456c  Elements(_BaseEl
-0000b4f0: 656d 656e 7473 293a 0000 0020 2020 2020  ements):...     
-0000b500: 2020 2072 6574 7572 6e20 7b65 6c65 6d65     return {eleme
-0000b510: 6e74 2e65 6c65 6d65 6e74 5f69 643a 2065  nt.element_id: e
-0000b520: 6c65 6d65 6e74 2066 6f72 2065 6c65 6d65  lement for eleme
-0000b530: 6e74 2069 6e20 7365 6c66 2e5f 656c 656d  nt in self._elem
-0000b540: 656e 7473 7d00 2020 2020 2020 2020 2222  ents}.        ""
-0000b550: 2264 6963 7420 6d61 7070 696e 6720 6561  "dict mapping ea
-0000b560: 6368 2065 6c65 6d65 6e74 2062 7920 6974  ch element by it
-0000b570: 7320 6964 2e22 2222 0020 2020 2064 6566  s id.""".    def
-0000b580: 205f 656c 656d 656e 7473 5f62 795f 6964   _elements_by_id
-0000b590: 2873 656c 6629 202d 3e20 4469 6374 3a00  (self) -> Dict:.
-0000b5a0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-0000b5b0: 7900 0020 2020 2020 2020 2072 6169 7365  y..        raise
-0000b5c0: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
-0000b5d0: 7272 6f72 2822 6d75 7374 2062 6520 696d  rror("must be im
-0000b5e0: 706c 656d 656e 7465 6420 6279 2065 6163  plemented by eac
-0000b5f0: 6820 7375 6263 6c61 7373 2229 0020 2020  h subclass").   
-0000b600: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-0000b610: 204d 7573 7420 6265 2069 6d70 6c65 6d65   Must be impleme
-0000b620: 6e74 6564 2062 7920 6561 6368 2073 7562  nted by each sub
-0000b630: 636c 6173 732e 0000 2020 2020 2020 2020  class...        
-0000b640: 2222 2274 7570 6c65 2073 746f 7269 6e67  """tuple storing
-0000b650: 2061 6374 7561 6c20 7365 7175 656e 6365   actual sequence
-0000b660: 206f 6620 656c 656d 656e 7420 6f62 6a65   of element obje
-0000b670: 6374 732e 0020 2020 2064 6566 205f 656c  cts..    def _el
-0000b680: 656d 656e 7473 2873 656c 6629 3a00 2020  ements(self):.  
-0000b690: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-0000b6a0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000b6b0: 7365 6c66 2e5f 656c 656d 656e 7473 5f62  self._elements_b
-0000b6c0: 795f 6964 5b65 6c65 6d65 6e74 5f69 645d  y_id[element_id]
-0000b6d0: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-0000b6e0: 2020 2020 2072 6169 7365 204b 6579 4572       raise KeyEr
-0000b6f0: 726f 7220 666f 7220 7468 6520 6964 206f  ror for the id o
-0000b700: 6620 6120 6d69 7373 696e 6720 656c 656d  f a missing elem
-0000b710: 656e 742e 0020 2020 2020 2020 2061 7265  ent..        are
-0000b720: 2061 6363 6573 7369 626c 6520 666f 7220   accessible for 
-0000b730: 6c6f 6f6b 7570 2e20 466f 7220 6578 616d  lookup. For exam
-0000b740: 706c 652c 2061 205f 5661 6c69 6445 6c65  ple, a _ValidEle
-0000b750: 6d65 6e74 7320 6f62 6a65 6374 2077 696c  ments object wil
-0000b760: 6c00 2020 2020 2020 2020 5261 6973 6573  l.        Raises
-0000b770: 204b 6579 4572 726f 7220 6966 206e 6f74   KeyError if not
-0000b780: 2066 6f75 6e64 2e20 4f6e 6c79 2065 6c65   found. Only ele
-0000b790: 6d65 6e74 7320 6b6e 6f77 6e20 746f 2074  ments known to t
-0000b7a0: 6869 7320 636f 6c6c 6563 7469 6f6e 0000  his collection..
-0000b7b0: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
-0000b7c0: 6e20 5f45 6c65 6d65 6e74 206f 626a 6563  n _Element objec
-0000b7d0: 7420 6964 656e 7469 6669 6564 2062 7920  t identified by 
-0000b7e0: 2a65 6c65 6d65 6e74 5f69 642a 2e00 2020  *element_id*..  
-0000b7f0: 2020 6465 6620 6765 745f 6279 5f69 6428    def get_by_id(
-0000b800: 7365 6c66 2c20 656c 656d 656e 745f 6964  self, element_id
-0000b810: 3a20 696e 7429 202d 3e20 225f 456c 656d  : int) -> "_Elem
-0000b820: 656e 7422 3a00 0020 2020 2020 2020 2072  ent":..        r
-0000b830: 6574 7572 6e20 7475 706c 6528 656c 656d  eturn tuple(elem
-0000b840: 656e 742e 696e 6465 7820 666f 7220 656c  ent.index for el
-0000b850: 656d 656e 7420 696e 2073 656c 662e 5f65  ement in self._e
-0000b860: 6c65 6d65 6e74 7329 0020 2020 2020 2020  lements).       
-0000b870: 2022 2222 0020 2020 2020 2020 2069 7420   """.        it 
-0000b880: 7769 6c6c 2073 696d 706c 7920 6265 2061  will simply be a
-0000b890: 2074 7570 6c65 2872 616e 6765 286c 656e   tuple(range(len
-0000b8a0: 2861 6c6c 5f65 6c65 6d65 6e74 7329 2929  (all_elements)))
-0000b8b0: 2e00 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
-0000b8c0: 696f 6e2d 6469 6374 2069 7420 6361 6d65  ion-dict it came
-0000b8d0: 2066 726f 6d2e 2049 6e20 7468 6520 6361   from. In the ca
-0000b8e0: 7365 206f 6620 616e 205f 416c 6c45 6c65  se of an _AllEle
-0000b8f0: 6d65 6e74 7320 6f62 6a65 6374 2c00 2020  ments object,.  
-0000b900: 2020 2020 2020 456c 656d 656e 7420 696e        Element in
-0000b910: 6465 7820 7661 6c75 6573 2072 6570 7265  dex values repre
-0000b920: 7365 6e74 2074 6865 2070 6f73 6974 696f  sent the positio
-0000b930: 6e20 6f66 2074 6869 7320 656c 656d 656e  n of this elemen
-0000b940: 7420 696e 2074 6865 0000 2020 2020 2020  t in the..      
-0000b950: 2020 2222 2274 7570 6c65 206f 6620 656c    """tuple of el
-0000b960: 656d 656e 742d 696e 6465 7820 666f 7220  ement-index for 
-0000b970: 6561 6368 2065 6c65 6d65 6e74 2069 6e20  each element in 
-0000b980: 636f 6c6c 6563 7469 6f6e 2e00 2020 2020  collection..    
-0000b990: 6465 6620 656c 656d 656e 745f 6964 7873  def element_idxs
-0000b9a0: 2873 656c 6629 202d 3e20 5475 706c 655b  (self) -> Tuple[
-0000b9b0: 696e 742c 202e 2e2e 5d3a 0020 2020 2040  int, ...]:.    @
-0000b9c0: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000b9d0: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-0000b9e0: 6c65 2865 6c65 6d65 6e74 2e65 6c65 6d65  le(element.eleme
-0000b9f0: 6e74 5f69 6420 666f 7220 656c 656d 656e  nt_id for elemen
-0000ba00: 7420 696e 2073 656c 662e 5f65 6c65 6d65  t in self._eleme
-0000ba10: 6e74 7329 0020 2020 2020 2020 2022 2222  nts).        """
-0000ba20: 0020 2020 2020 2020 2045 6c65 6d65 6e74  .        Element
-0000ba30: 2069 6473 2061 7070 6561 7220 696e 2074   ids appear in t
-0000ba40: 6865 206f 7264 6572 2074 6865 7920 6f63  he order they oc
-0000ba50: 6375 7220 696e 2074 6865 2063 7562 6520  cur in the cube 
-0000ba60: 7265 7370 6f6e 7365 2e00 0020 2020 2020  response...     
-0000ba70: 2020 2022 2222 7475 706c 6520 6f66 2065     """tuple of e
-0000ba80: 6c65 6d65 6e74 2d69 6420 666f 7220 6561  lement-id for ea
-0000ba90: 6368 2065 6c65 6d65 6e74 2069 6e20 636f  ch element in co
-0000baa0: 6c6c 6563 7469 6f6e 2e00 2020 2020 6465  llection..    de
-0000bab0: 6620 656c 656d 656e 745f 6964 7328 7365  f element_ids(se
-0000bac0: 6c66 2920 2d3e 2054 7570 6c65 5b69 6e74  lf) -> Tuple[int
-0000bad0: 2c20 2e2e 2e5d 3a00 2020 2020 406c 617a  , ...]:.    @laz
-0000bae0: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-0000baf0: 2020 2072 6574 7572 6e20 6c65 6e28 7365     return len(se
-0000bb00: 6c66 2e5f 656c 656d 656e 7473 2900 2020  lf._elements).  
-0000bb10: 2020 2020 2020 2222 2249 6d70 6c65 6d65        """Impleme
-0000bb20: 6e74 7320 6c65 6e28 656c 656d 656e 7473  nts len(elements
-0000bb30: 292e 2222 2200 2020 2020 6465 6620 5f5f  ).""".    def __
-0000bb40: 6c65 6e5f 5f28 7365 6c66 293a 0000 2020  len__(self):..  
-0000bb50: 2020 2020 2020 7265 7475 726e 2069 7465        return ite
-0000bb60: 7228 7365 6c66 2e5f 656c 656d 656e 7473  r(self._elements
-0000bb70: 2900 2020 2020 2020 2020 2222 2249 6d70  ).        """Imp
-0000bb80: 6c65 6d65 6e74 7320 2865 6666 6963 6965  lements (efficie
-0000bb90: 6e74 2920 6974 6572 6162 696c 6974 792e  nt) iterability.
-0000bba0: 2222 2200 2020 2020 6465 6620 5f5f 6974  """.    def __it
-0000bbb0: 6572 5f5f 2873 656c 6629 3a00 0020 2020  er__(self):..   
-0000bbc0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000bbd0: 2e5f 656c 656d 656e 7473 5b69 6478 5f6f  ._elements[idx_o
-0000bbe0: 725f 736c 6963 655d 0020 2020 2020 2020  r_slice].       
-0000bbf0: 2022 2222 496d 706c 656d 656e 7473 2069   """Implements i
-0000bc00: 6e64 6578 6564 2061 6363 6573 732e 2222  ndexed access.""
-0000bc10: 2200 2020 2020 6465 6620 5f5f 6765 7469  ".    def __geti
-0000bc20: 7465 6d5f 5f28 7365 6c66 2c20 6964 785f  tem__(self, idx_
-0000bc30: 6f72 5f73 6c69 6365 293a 0000 2020 2020  or_slice):..    
-0000bc40: 2222 2242 6173 6520 636c 6173 7320 666f  """Base class fo
-0000bc50: 7220 656c 656d 656e 7420 7365 7175 656e  r element sequen
-0000bc60: 6365 2063 6f6e 7461 696e 6572 732e 2222  ce containers.""
-0000bc70: 2200 636c 6173 7320 5f42 6173 6545 6c65  ".class _BaseEle
-0000bc80: 6d65 6e74 7328 5365 7175 656e 6365 293a  ments(Sequence):
-0000bc90: 0000 0020 2020 2020 2020 2072 6574 7572  ...        retur
-0000bca0: 6e20 7365 6c66 2e5f 656c 656d 656e 745f  n self._element_
-0000bcb0: 6964 5f73 6869 6d2e 7368 696d 6d65 645f  id_shim.shimmed_
-0000bcc0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
-0000bcd0: 6f72 6d73 5f64 6963 7400 2020 2020 2020  orms_dict.      
-0000bce0: 2020 2222 2243 6f70 7920 6f66 2064 696d    """Copy of dim
-0000bcf0: 656e 7369 6f6e 2074 7261 6e73 666f 726d  ension transform
-0000bd00: 7320 6469 6374 696f 6e61 7279 2077 6974  s dictionary wit
-0000bd10: 6820 7368 696d 6d65 6420 6065 6c65 6d65  h shimmed `eleme
-0000bd20: 6e74 5f69 6460 7322 2222 0020 2020 2064  nt_id`s""".    d
-0000bd30: 6566 205f 6469 6d65 6e73 696f 6e5f 7472  ef _dimension_tr
-0000bd40: 616e 7366 6f72 6d73 5f64 6963 7428 7365  ansforms_dict(se
-0000bd50: 6c66 2920 2d3e 2044 6963 743a 0020 2020  lf) -> Dict:.   
-0000bd60: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000bd70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000bd80: 656c 662e 5f65 6c65 6d65 6e74 5f69 645f  elf._element_id_
-0000bd90: 7368 696d 2e73 6869 6d6d 6564 5f64 696d  shim.shimmed_dim
-0000bda0: 656e 7369 6f6e 5f64 6963 7400 2020 2020  ension_dict.    
-0000bdb0: 2020 2020 2222 2243 6f70 7920 6f66 2064      """Copy of d
-0000bdc0: 696d 656e 7369 6f6e 2064 6963 7469 6f6e  imension diction
-0000bdd0: 6172 7920 7769 7468 2073 6869 6d6d 6564  ary with shimmed
-0000bde0: 2060 656c 656d 656e 745f 6964 6073 2222   `element_id`s""
-0000bdf0: 2200 2020 2020 6465 6620 5f64 696d 656e  ".    def _dimen
-0000be00: 7369 6f6e 5f64 6963 7428 7365 6c66 2920  sion_dict(self) 
-0000be10: 2d3e 2044 6963 743a 0020 2020 2040 6c61  -> Dict:.    @la
-0000be20: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-0000be30: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-0000be40: 2020 7365 6c66 2e5f 756e 7368 696d 6d65    self._unshimme
-0000be50: 645f 6469 6d65 6e73 696f 6e5f 7472 616e  d_dimension_tran
-0000be60: 7366 6f72 6d73 5f64 6963 742c 0020 2020  sforms_dict,.   
-0000be70: 2020 2020 2020 2020 2073 656c 662e 5f75           self._u
-0000be80: 6e73 6869 6d6d 6564 5f64 696d 656e 7369  nshimmed_dimensi
-0000be90: 6f6e 5f64 6963 742c 0020 2020 2020 2020  on_dict,.       
-0000bea0: 2020 2020 2073 656c 662e 5f64 696d 656e       self._dimen
-0000beb0: 7369 6f6e 5f74 7970 652c 0020 2020 2020  sion_type,.     
-0000bec0: 2020 2072 6574 7572 6e20 5f45 6c65 6d65     return _Eleme
-0000bed0: 6e74 4964 5368 696d 2800 2020 2020 2020  ntIdShim(.      
-0000bee0: 2020 2222 225f 456c 656d 656e 7449 6453    """_ElementIdS
-0000bef0: 6869 6d20 666f 7220 7468 6973 2044 696d  him for this Dim
-0000bf00: 656e 7369 6f6e 206f 626a 6563 7422 2222  ension object"""
-0000bf10: 0020 2020 2064 6566 205f 656c 656d 656e  .    def _elemen
-0000bf20: 745f 6964 5f73 6869 6d28 7365 6c66 2920  t_id_shim(self) 
-0000bf30: 2d3e 2022 5f45 6c65 6d65 6e74 4964 5368  -> "_ElementIdSh
-0000bf40: 696d 223a 0020 2020 2040 6c61 7a79 7072  im":.    @lazypr
-0000bf50: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-0000bf60: 7265 7475 726e 2073 656c 662e 616c 6c5f  return self.all_
-0000bf70: 656c 656d 656e 7473 2e76 616c 6964 5f65  elements.valid_e
-0000bf80: 6c65 6d65 6e74 7300 2020 2020 2020 2020  lements.        
-0000bf90: 2222 2200 2020 2020 2020 2020 7072 6f76  """.        prov
-0000bfa0: 6964 6564 2062 7920 602e 616c 6c5f 656c  ided by `.all_el
-0000bfb0: 656d 656e 7473 602e 0020 2020 2020 2020  ements`..       
-0000bfc0: 2066 726f 6d20 7468 6520 636f 6c6c 6563   from the collec
-0000bfd0: 7469 6f6e 3b20 7468 6973 2073 6571 7565  tion; this seque
-0000bfe0: 6e63 6520 7265 7072 6573 656e 7473 2061  nce represents a
-0000bff0: 2073 7562 7365 7420 6f66 2074 6861 7400   subset of that.
-0000c000: 6164 0000 4900 0000 bd01 0000 0010 0000  ad..I...........
-0000c010: 5600 0000 0000 0000 c70f 0000 9a0f 0000  V...............
-0000c020: 900f 0000 8f0f 0000 7d0f 0000 4a0f 0000  ........}...J...
-0000c030: 0a0f 0000 f40e 0000 de0e 0000 c00e 0000  ................
-0000c040: ab0e 0000 6e0e 0000 600e 0000 4e0e 0000  ....n...`...N...
-0000c050: 390e 0000 1b0e 0000 f20d 0000 c40d 0000  9...............
-0000c060: ba0d 0000 b90d 0000 a70d 0000 7b0d 0000  ............{...
-0000c070: 240d 0000 130d 0000 e60c 0000 b90c 0000  $...............
-0000c080: 740c 0000 6a0c 0000 690c 0000 200c 0000  t...j...i... ...
-0000c090: d30b 0000 d20b 0000 7e0b 0000 2a0b 0000  ........~...*...
-0000c0a0: f70a 0000 eb0a 0000 b30a 0000 720a 0000  ............r...
-0000c0b0: 3a0a 0000 0e0a 0000 cf09 0000 8609 0000  :...............
-0000c0c0: 7809 0000 3b09 0000 3a09 0000 2809 0000  x...;...:...(...
-0000c0d0: f508 0000 bc08 0000 bb08 0000 6c08 0000  ............l...
-0000c0e0: 1408 0000 bd07 0000 bc07 0000 6707 0000  ............g...
-0000c0f0: 0e07 0000 d806 0000 cc06 0000 7306 0000  ............s...
-0000c100: 1d06 0000 f705 0000 cf05 0000 b105 0000  ................
-0000c110: 5e05 0000 3205 0000 2805 0000 2705 0000  ^...2...(...'...
-0000c120: ce04 0000 9804 0000 7704 0000 2204 0000  ........w..."...
-0000c130: 1804 0000 1704 0000 be03 0000 7b03 0000  ............{...
-0000c140: 5c03 0000 2503 0000 f602 0000 ec02 0000  \...%...........
-0000c150: 9502 0000 7302 0000 7202 0000 7102 0000  ....s...r...q...
-0000c160: 4c02 0000 0c02 0000 0b02 0000 bd01 0000  L...............
-0000c170: bc01 0000 0000 0000 0000 0000 0000 0000  ................
-0000c180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1b0: 0000 0000 0000 0000 0000 0000 0020 2020  .............   
-0000c1c0: 202a 616c 6c5f 656c 656d 656e 7473 2a20   *all_elements* 
-0000c1d0: 6973 2061 6e20 696e 7374 616e 6365 206f  is an instance o
-0000c1e0: 6620 5f41 6c6c 456c 656d 656e 7473 2063  f _AllElements c
-0000c1f0: 6f6e 7461 696e 696e 6720 616c 6c20 7468  ontaining all th
-0000c200: 6520 656c 656d 656e 7473 0000 2020 2020  e elements..    
-0000c210: 2222 2253 6571 7565 6e63 6520 6f66 206e  """Sequence of n
-0000c220: 6f6e 2d6d 6973 7369 6e67 2065 6c65 6d65  on-missing eleme
-0000c230: 6e74 206f 626a 6563 7473 2066 6f72 2061  nt objects for a
-0000c240: 2064 696d 656e 7369 6f6e 2e00 636c 6173   dimension..clas
-0000c250: 7320 5f56 616c 6964 456c 656d 656e 7473  s _ValidElements
-0000c260: 285f 4261 7365 456c 656d 656e 7473 293a  (_BaseElements):
-0000c270: 0000 0020 2020 2020 2020 2072 6574 7572  ...        retur
-0000c280: 6e20 7368 696d 6d65 645f 7472 616e 7366  n shimmed_transf
-0000c290: 6f72 6d73 0020 2020 2020 2020 2073 6869  orms.        shi
-0000c2a0: 6d6d 6564 5f74 7261 6e73 666f 726d 732e  mmed_transforms.
-0000c2b0: 7570 6461 7465 2873 656c 662e 5f64 696d  update(self._dim
-0000c2c0: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
-0000c2d0: 735f 6469 6374 2e67 6574 2822 656c 656d  s_dict.get("elem
-0000c2e0: 656e 7473 222c 207b 7d29 2900 2020 2020  ents", {})).    
-0000c2f0: 2020 2020 7d00 2020 2020 2020 2020 2020      }.          
-0000c300: 2020 666f 7220 6e61 6d65 2069 6e20 6869    for name in hi
-0000c310: 6464 656e 5f69 6e73 6572 7469 6f6e 5f6e  dden_insertion_n
-0000c320: 616d 6573 0020 2020 2020 2020 2020 2020  ames.           
-0000c330: 2065 6c65 6d65 6e74 5f69 645f 6672 6f6d   element_id_from
-0000c340: 5f6e 616d 655b 6e61 6d65 5d3a 207b 2268  _name[name]: {"h
-0000c350: 6964 6522 3a20 5472 7565 7d00 2020 2020  ide": True}.    
-0000c360: 2020 2020 7368 696d 6d65 645f 7472 616e      shimmed_tran
-0000c370: 7366 6f72 6d73 203d 207b 0020 2020 2020  sforms = {.     
-0000c380: 2020 2023 2054 4f44 4f3a 204d 6f76 6520     # TODO: Move 
-0000c390: 746f 207b 2a2a 6431 2c20 2a2a 6432 7d20  to {**d1, **d2} 
-0000c3a0: 7379 6e74 6178 206f 6e63 6520 7765 2064  syntax once we d
-0000c3b0: 6974 6368 2050 7974 686f 6e20 3200 2020  itch Python 2.  
-0000c3c0: 2020 2020 2020 2320 2d2d 2d20 6d65 7267        # --- merg
-0000c3d0: 6520 6869 6465 2074 7261 6e73 666f 726d  e hide transform
-0000c3e0: 7320 7769 7468 2028 6120 636f 7079 206f  s with (a copy o
-0000c3f0: 6629 2074 6865 2065 7869 7374 696e 6720  f) the existing 
-0000c400: 656c 656d 656e 7420 7472 616e 7366 6f72  element transfor
-0000c410: 6d73 202d 2d2d 0000 2020 2020 2020 2020  ms ---..        
-0000c420: 7d00 2020 2020 2020 2020 2020 2020 656c  }.            el
-0000c430: 656d 656e 745b 2276 616c 7565 225d 5b22  ement["value"]["
-0000c440: 6964 225d 3a20 656c 656d 656e 745b 2269  id"]: element["i
-0000c450: 6422 5d20 666f 7220 656c 656d 656e 7420  d"] for element 
-0000c460: 696e 2073 656c 662e 5f65 6c65 6d65 6e74  in self._element
-0000c470: 5f64 6963 7473 0020 2020 2020 2020 2065  _dicts.        e
-0000c480: 6c65 6d65 6e74 5f69 645f 6672 6f6d 5f6e  lement_id_from_n
-0000c490: 616d 6520 3d20 7b00 2020 2020 2020 2020  ame = {.        
-0000c4a0: 2320 2d2d 2d20 6d61 7070 696e 6720 6f66  # --- mapping of
-0000c4b0: 2069 6e73 6572 7469 6f6e 2d6e 616d 6520   insertion-name 
-0000c4c0: 746f 2065 6c65 6d65 6e74 2d69 6400 2020  to element-id.  
-0000c4d0: 2020 2020 2020 2320 2d2d 2d20 686f 7765        # --- howe
-0000c4e0: 7665 722c 2074 6865 2068 6964 652d 7472  ver, the hide-tr
-0000c4f0: 616e 7366 6f72 6d20 6d75 7374 2062 6520  ansform must be 
-0000c500: 6964 656e 7469 6669 6564 2062 7920 656c  identified by el
-0000c510: 656d 656e 742d 6964 2c20 736f 2077 6520  ement-id, so we 
-0000c520: 6e65 6564 2061 0000 2020 2020 2020 2020  need a..        
-0000c530: 2900 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000c540: 2069 6e73 6572 7469 6f6e 2e67 6574 2822   insertion.get("
-0000c550: 6869 6465 222c 2046 616c 7365 2900 2020  hide", False).  
-0000c560: 2020 2020 2020 2020 2020 666f 7220 696e            for in
-0000c570: 7365 7274 696f 6e20 696e 2073 656c 662e  sertion in self.
-0000c580: 5f64 696d 656e 7369 6f6e 5f74 7261 6e73  _dimension_trans
-0000c590: 666f 726d 735f 6469 6374 2e67 6574 2822  forms_dict.get("
-0000c5a0: 696e 7365 7274 696f 6e73 222c 205b 5d29  insertions", [])
-0000c5b0: 0020 2020 2020 2020 2020 2020 2069 6e73  .            ins
-0000c5c0: 6572 7469 6f6e 5b22 6e61 6d65 225d 0020  ertion["name"]. 
-0000c5d0: 2020 2020 2020 2068 6964 6465 6e5f 696e         hidden_in
-0000c5e0: 7365 7274 696f 6e5f 6e61 6d65 7320 3d20  sertion_names = 
-0000c5f0: 7475 706c 6528 0020 2020 2020 2020 2023  tuple(.        #
-0000c600: 202d 2d2d 2065 6c65 6d65 6e74 2e69 6420   --- element.id 
-0000c610: 6c69 6b65 2022 3030 3031 222e 0020 2020  like "0001"..   
-0000c620: 2020 2020 2023 202d 2d2d 206e 6f20 616c       # --- no al
-0000c630: 6961 7320 666f 7220 616e 2069 6e73 6572  ias for an inser
-0000c640: 7465 642d 7375 6276 6172 6961 626c 6520  ted-subvariable 
-0000c650: 616e 6420 6974 2064 6f65 7320 6e6f 7420  and it does not 
-0000c660: 7265 6365 6976 6520 6120 226e 6f72 6d61  receive a "norma
-0000c670: 6c22 0020 2020 2020 2020 2023 202d 2d2d  l".        # ---
-0000c680: 2063 7572 7265 6e74 6c79 2061 6e20 696e   currently an in
-0000c690: 7365 7274 6564 2d73 7562 7661 7269 6162  serted-subvariab
-0000c6a0: 6c65 2063 616e 206f 6e6c 7920 6265 2069  le can only be i
-0000c6b0: 6465 6e74 6966 6965 6420 6279 206e 616d  dentified by nam
-0000c6c0: 652c 2074 6865 7265 2069 7300 2020 2020  e, there is.    
-0000c6d0: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-0000c6e0: 6c69 6b65 2074 6865 206f 7468 6572 2073  like the other s
-0000c6f0: 7562 7661 7269 6162 6c65 7320 696e 2074  ubvariables in t
-0000c700: 6865 2064 696d 656e 7369 6f6e 2e00 2020  he dimension..  
-0000c710: 2020 2020 2020 7375 6276 6172 6961 626c        subvariabl
-0000c720: 6520 656c 656d 656e 7420 6265 6361 7573  e element becaus
-0000c730: 6520 7375 6368 2061 6e20 696e 7365 7274  e such an insert
-0000c740: 696f 6e20 6265 636f 6d65 7320 6120 6465  ion becomes a de
-0000c750: 7269 7665 6420 7375 6276 6172 6961 626c  rived subvariabl
-0000c760: 6520 6a75 7374 0020 2020 2020 2020 2046  e just.        F
-0000c770: 6f72 2074 6865 2061 7272 6179 2063 6173  or the array cas
-0000c780: 652c 2074 6865 7365 206e 6565 6420 746f  e, these need to
-0000c790: 2062 6520 7472 616e 736c 6174 6564 2074   be translated t
-0000c7a0: 6f20 6120 2268 6964 6522 2074 7261 6e73  o a "hide" trans
-0000c7b0: 666f 726d 206f 6e20 7468 6500 0020 2020  form on the..   
-0000c7c0: 2020 2020 2061 2076 6172 6961 626c 652d       a variable-
-0000c7d0: 6261 7365 6420 696e 7365 7274 696f 6e20  based insertion 
-0000c7e0: 696e 206f 7264 6572 2074 6f20 7375 7070  in order to supp
-0000c7f0: 7265 7373 2074 6861 7420 7661 7269 6162  ress that variab
-0000c800: 6c65 2d62 6173 6564 2069 6e73 6572 7469  le-based inserti
-0000c810: 6f6e 2e00 2020 2020 2020 2020 696e 7365  on..        inse
-0000c820: 7274 696f 6e73 2c20 6120 636c 6965 6e74  rtions, a client
-0000c830: 2063 616e 2069 6e63 6c75 6465 2061 2060   can include a `
-0000c840: 2268 6964 6522 3a20 7472 7565 6020 6669  "hide": true` fi
-0000c850: 656c 6420 696e 2061 2028 636f 6d70 6c65  eld in a (comple
-0000c860: 7465 2920 636f 7079 206f 6600 2020 2020  te) copy of.    
-0000c870: 2020 2020 546f 2070 726f 7669 6465 2063      To provide c
-0000c880: 6f6e 7369 7374 656e 6379 2077 6974 6820  onsistency with 
-0000c890: 6120 706f 6f72 6c79 2d64 6566 696e 6564  a poorly-defined
-0000c8a0: 2069 6e74 6572 6661 6365 2066 6f72 2063   interface for c
-0000c8b0: 6174 6567 6f72 6963 616c 0000 2020 2020  ategorical..    
-0000c8c0: 2020 2020 2222 2245 6c65 6d65 6e74 2074      """Element t
-0000c8d0: 7261 6e73 666f 726d 7320 6469 6374 2066  ransforms dict f
-0000c8e0: 6f72 2061 7272 6179 2064 696d 656e 7369  or array dimensi
-0000c8f0: 6f6e 732e 0020 2020 2064 6566 205f 7368  ons..    def _sh
-0000c900: 696d 6d65 645f 656c 656d 656e 745f 7472  immed_element_tr
-0000c910: 616e 7366 6f72 6d73 2873 656c 6629 202d  ansforms(self) -
-0000c920: 3e20 4469 6374 3a00 2020 2020 406c 617a  > Dict:.    @laz
-0000c930: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-0000c940: 2020 2020 2020 2079 6965 6c64 2069 6478         yield idx
-0000c950: 2c20 656c 656d 656e 745f 6469 6374 2c20  , element_dict, 
-0000c960: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
-0000c970: 6d73 5f64 6963 7400 2020 2020 2020 2020  ms_dict.        
-0000c980: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-0000c990: 2020 2020 2020 656c 656d 656e 745f 6964        element_id
-0000c9a0: 2c20 656c 656d 656e 7473 5f74 7261 6e73  , elements_trans
-0000c9b0: 666f 726d 732e 6765 7428 7374 7228 656c  forms.get(str(el
-0000c9c0: 656d 656e 745f 6964 292c 207b 7d29 0020  ement_id), {}). 
-0000c9d0: 2020 2020 2020 2020 2020 2065 6c65 6d65             eleme
-0000c9e0: 6e74 5f74 7261 6e73 666f 726d 735f 6469  nt_transforms_di
-0000c9f0: 6374 203d 2065 6c65 6d65 6e74 735f 7472  ct = elements_tr
-0000ca00: 616e 7366 6f72 6d73 2e67 6574 2800 2020  ansforms.get(.  
-0000ca10: 2020 2020 2020 2020 2020 656c 656d 656e            elemen
-0000ca20: 745f 6964 203d 2065 6c65 6d65 6e74 5f64  t_id = element_d
-0000ca30: 6963 745b 2269 6422 5d00 2020 2020 2020  ict["id"].      
-0000ca40: 2020 2020 2020 2320 2d2d 2d20 636f 6e76        # --- conv
-0000ca50: 6572 7420 746f 2073 7472 696e 6720 666f  ert to string fo
-0000ca60: 7220 6361 7465 676f 7269 6361 6c20 6964  r categorical id
-0000ca70: 7300 2020 2020 2020 2020 666f 7220 6964  s.        for id
-0000ca80: 782c 2065 6c65 6d65 6e74 5f64 6963 7420  x, element_dict 
-0000ca90: 696e 2065 6e75 6d65 7261 7465 2873 656c  in enumerate(sel
-0000caa0: 662e 5f65 6c65 6d65 6e74 5f64 6963 7473  f._element_dicts
-0000cab0: 293a 0020 2020 2020 2020 2065 6c65 6d65  ):.        eleme
-0000cac0: 6e74 735f 7472 616e 7366 6f72 6d73 203d  nts_transforms =
-0000cad0: 2073 656c 662e 5f65 6c65 6d65 6e74 735f   self._elements_
-0000cae0: 7472 616e 7366 6f72 6d73 0020 2020 2020  transforms.     
-0000caf0: 2020 2022 2222 0020 2020 2020 2020 2065     """.        e
-0000cb00: 6c65 6d65 6e74 7320 6172 6520 696e 636c  lements are incl
-0000cb10: 7564 6564 2028 696e 636c 7564 696e 6720  uded (including 
-0000cb20: 6d69 7373 696e 6729 2e00 2020 2020 2020  missing)..      
-0000cb30: 2020 656c 656d 656e 7420 696e 2074 6869    element in thi
-0000cb40: 7320 6469 6d65 6e73 696f 6e2c 2069 6e20  s dimension, in 
-0000cb50: 7468 6520 6f72 6465 7220 7468 6579 2061  the order they a
-0000cb60: 7070 6561 7220 696e 2074 6865 2063 7562  ppear in the cub
-0000cb70: 652d 7265 7375 6c74 2e20 416c 6c00 2020  e-result. All.  
-0000cb80: 2020 2020 2020 416e 2028 6964 782c 2065        An (idx, e
-0000cb90: 6c65 6d65 6e74 5f64 6963 742c 2065 6c65  lement_dict, ele
-0000cba0: 6d65 6e74 5f74 7261 6e73 666f 726d 735f  ment_transforms_
-0000cbb0: 6469 6374 2920 7475 706c 6520 6973 2067  dict) tuple is g
-0000cbc0: 656e 6572 6174 6564 2066 6f72 2065 6163  enerated for eac
-0000cbd0: 6800 0020 2020 2020 2020 2022 2222 4765  h..        """Ge
-0000cbe0: 6e65 7261 7465 2074 7570 6c65 206f 6620  nerate tuple of 
-0000cbf0: 7661 6c75 6573 206e 6565 6465 6420 746f  values needed to
-0000cc00: 2063 6f6e 7374 7275 6374 2065 6163 6820   construct each 
-0000cc10: 656c 656d 656e 7420 6f62 6a65 6374 2e00  element object..
-0000cc20: 2020 2020 6465 6620 5f69 7465 725f 656c      def _iter_el
-0000cc30: 656d 656e 745f 6d61 6b69 6e67 7328 7365  ement_makings(se
-0000cc40: 6c66 2920 2d3e 2049 7465 7261 746f 725b  lf) -> Iterator[
-0000cc50: 5475 706c 655b 696e 742c 2044 6963 742c  Tuple[int, Dict,
-0000cc60: 2044 6963 745d 5d3a 0000 2020 2020 2020   Dict]]:..      
-0000cc70: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-0000cc80: 656c 7365 2073 656c 662e 5f64 696d 656e  else self._dimen
-0000cc90: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
-0000cca0: 6469 6374 2e67 6574 2822 656c 656d 656e  dict.get("elemen
-0000ccb0: 7473 222c 207b 7d29 0020 2020 2020 2020  ts", {}).       
-0000ccc0: 2020 2020 2069 6620 7365 6c66 2e5f 6469       if self._di
-0000ccd0: 6d65 6e73 696f 6e5f 7479 7065 203d 3d20  mension_type == 
-0000cce0: 4454 2e4d 5200 2020 2020 2020 2020 2020  DT.MR.          
-0000ccf0: 2020 7365 6c66 2e5f 7368 696d 6d65 645f    self._shimmed_
-0000cd00: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
-0000cd10: 6d73 0020 2020 2020 2020 2072 6574 7572  ms.        retur
-0000cd20: 6e20 2800 2020 2020 2020 2020 2222 2245  n (.        """E
-0000cd30: 6c65 6d65 6e74 2074 7261 6e73 666f 726d  lement transform
-0000cd40: 2064 6963 7420 6578 7072 6573 7365 6420   dict expressed 
-0000cd50: 696e 2074 6865 2064 696d 656e 7369 6f6e  in the dimension
-0000cd60: 2074 7261 6e73 666f 726d 7320 6578 7072   transforms expr
-0000cd70: 6573 7369 6f6e 2e22 2222 0020 2020 2064  ession.""".    d
-0000cd80: 6566 205f 656c 656d 656e 7473 5f74 7261  ef _elements_tra
-0000cd90: 6e73 666f 726d 7328 7365 6c66 2920 2d3e  nsforms(self) ->
-0000cda0: 2044 6963 743a 0020 2020 2040 6c61 7a79   Dict:.    @lazy
-0000cdb0: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-0000cdc0: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-0000cdd0: 2920 696e 2073 656c 662e 5f69 7465 725f  ) in self._iter_
-0000cde0: 656c 656d 656e 745f 6d61 6b69 6e67 7328  element_makings(
-0000cdf0: 2900 2020 2020 2020 2020 2020 2020 2020  ).              
-0000ce00: 2020 656c 656d 656e 745f 7472 616e 7366    element_transf
-0000ce10: 6f72 6d73 5f64 6963 742c 0020 2020 2020  orms_dict,.     
-0000ce20: 2020 2020 2020 2020 2020 2065 6c65 6d65             eleme
-0000ce30: 6e74 5f64 6963 742c 0020 2020 2020 2020  nt_dict,.       
-0000ce40: 2020 2020 2020 2020 2069 6478 2c00 2020           idx,.  
-0000ce50: 2020 2020 2020 2020 2020 666f 7220 2800            for (.
-0000ce60: 2020 2020 2020 2020 2020 2020 2900 2020              ).  
-0000ce70: 2020 2020 2020 2020 2020 2020 2020 5f45                _E
-0000ce80: 6c65 6d65 6e74 5472 616e 7366 6f72 6d73  lementTransforms
-0000ce90: 2865 6c65 6d65 6e74 5f74 7261 6e73 666f  (element_transfo
-0000cea0: 726d 735f 6469 6374 292c 0020 2020 2020  rms_dict),.     
-0000ceb0: 2020 2020 2020 2020 2020 2069 6478 2c00             idx,.
-0000cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ced0: 656c 656d 656e 745f 6469 6374 2c00 2020  element_dict,.  
-0000cee0: 2020 2020 2020 2020 2020 5f45 6c65 6d65            _Eleme
-0000cef0: 6e74 2800 2020 2020 2020 2020 7265 7475  nt(.        retu
-0000cf00: 726e 2074 7570 6c65 2800 2020 2020 2020  rn tuple(.      
-0000cf10: 2020 2222 2274 7570 6c65 2073 746f 7269    """tuple stori
-0000cf20: 6e67 2061 6374 7561 6c20 7365 7175 656e  ng actual sequen
-0000cf30: 6365 206f 6620 656c 656d 656e 7420 6f62  ce of element ob
-0000cf40: 6a65 6374 732e 2222 2200 2020 2020 6465  jects.""".    de
-0000cf50: 6620 5f65 6c65 6d65 6e74 7328 7365 6c66  f _elements(self
-0000cf60: 2920 2d3e 2054 7570 6c65 5b22 5f45 6c65  ) -> Tuple["_Ele
-0000cf70: 6d65 6e74 222c 202e 2e2e 5d3a 0020 2020  ment", ...]:.   
-0000cf80: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000cf90: 2020 2020 2020 2020 2900 2020 2020 2020          ).      
-0000cfa0: 2020 2020 2020 656c 7365 2073 656c 662e        else self.
-0000cfb0: 5f74 7970 655f 6469 6374 5b22 656c 656d  _type_dict["elem
-0000cfc0: 656e 7473 225d 0020 2020 2020 2020 2020  ents"].         
-0000cfd0: 2020 2069 6620 7365 6c66 2e5f 7479 7065     if self._type
-0000cfe0: 5f64 6963 745b 2263 6c61 7373 225d 203d  _dict["class"] =
-0000cff0: 3d20 2263 6174 6567 6f72 6963 616c 2200  = "categorical".
-0000d000: 6164 0000 3400 0000 8c01 0000 0010 0000  ad..4...........
-0000d010: 4f00 0000 0000 0000 ba0f 0000 6c0f 0000  O...........l...
-0000d020: 5e0f 0000 560f 0000 550f 0000 140f 0000  ^...V...U.......
-0000d030: ea0e 0000 a60e 0000 a50e 0000 930e 0000  ................
-0000d040: 600e 0000 1d0e 0000 c60d 0000 c50d 0000  `...............
-0000d050: c40d 0000 ae0d 0000 670d 0000 660d 0000  ........g...f...
-0000d060: 180d 0000 ce0c 0000 850c 0000 730c 0000  ............s...
-0000d070: 720c 0000 2e0c 0000 2d0c 0000 e90b 0000  r.......-.......
-0000d080: 990b 0000 4b0b 0000 110b 0000 c30a 0000  ....K...........
-0000d090: 750a 0000 280a 0000 010a 0000 af09 0000  u...(...........
-0000d0a0: 7f09 0000 7709 0000 7609 0000 2309 0000  ....w...v...#...
-0000d0b0: f508 0000 c708 0000 8308 0000 8208 0000  ................
-0000d0c0: 7008 0000 4208 0000 ff07 0000 fe07 0000  p...B...........
-0000d0d0: ac07 0000 5e07 0000 3b07 0000 2f07 0000  ....^...;.../...
-0000d0e0: fc06 0000 fb06 0000 ad06 0000 5906 0000  ............Y...
-0000d0f0: 0506 0000 ce05 0000 b605 0000 b505 0000  ................
-0000d100: 8405 0000 4905 0000 1105 0000 1005 0000  ....I...........
-0000d110: fc04 0000 fb04 0000 e904 0000 b004 0000  ................
-0000d120: 6204 0000 6104 0000 0f04 0000 c103 0000  b...a...........
-0000d130: 7303 0000 2303 0000 0103 0000 0003 0000  s...#...........
-0000d140: b802 0000 7002 0000 1c02 0000 ca01 0000  ....p...........
-0000d150: 8c01 0000 8b01 0000 0000 0000 0000 0000  ................
-0000d160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d180: 0000 0000 0000 0000 0000 0000 2020 2020  ............    
-0000d190: 2020 2020 2d20 2273 7562 7661 7269 6162      - "subvariab
-0000d1a0: 6c65 5f69 6422 3a20 5375 6276 6172 6961  le_id": Subvaria
-0000d1b0: 626c 6573 2068 6176 6520 616e 2069 6420  bles have an id 
-0000d1c0: 7374 6f72 6564 2069 6e00 2020 2020 2020  stored in.      
-0000d1d0: 2020 2020 7468 6520 696e 6465 7820 696e      the index in
-0000d1e0: 7465 6765 7220 6865 7265 2e20 4c6f 6e67  teger here. Long
-0000d1f0: 2074 6572 6d20 7a7a 3920 6d61 7920 6368   term zz9 may ch
-0000d200: 616e 6765 2074 6869 7320 746f 2074 6865  ange this to the
-0000d210: 2074 6865 2061 6c69 6173 2e00 2020 2020   the alias..    
-0000d220: 2020 2020 2020 6064 696d 656e 7369 6f6e        `dimension
-0000d230: 735b 695d 2e74 7970 652e 656c 656d 656e  s[i].type.elemen
-0000d240: 7473 5b6a 5d2e 6964 602e 2046 6f72 2073  ts[j].id`. For s
-0000d250: 7562 7661 7269 6162 6c65 732c 207a 7a39  ubvariables, zz9
-0000d260: 2063 7572 7265 6e74 6c79 2070 7574 7300   currently puts.
-0000d270: 2020 2020 2020 2020 2d20 2265 6c65 6d65          - "eleme
-0000d280: 6e74 5f69 6422 3a20 5374 6f72 6564 2069  nt_id": Stored i
-0000d290: 6e20 7468 6520 6375 6265 2072 6573 756c  n the cube resul
-0000d2a0: 7420 6173 2074 6865 206f 626a 6563 7420  t as the object 
-0000d2b0: 6e61 6d65 2069 6e00 2020 2020 2020 2020  name in.        
-0000d2c0: 5479 7065 7320 6f66 2069 6465 6e74 6966  Types of identif
-0000d2d0: 6965 7273 2066 6f72 2073 7562 7661 7269  iers for subvari
-0000d2e0: 6162 6c65 7320 2861 6e64 2064 6572 6976  ables (and deriv
-0000d2f0: 6564 2069 6e73 6572 7469 6f6e 7329 3a00  ed insertions):.
-0000d300: 0020 2020 2020 2020 2074 6f20 7265 6665  .        to refe
-0000d310: 7220 746f 2073 7562 7661 7269 6162 6c65  r to subvariable
-0000d320: 732e 0020 2020 2020 2020 2073 6571 7565  s..        seque
-0000d330: 6e63 652e 2044 6966 6665 7265 6e74 2070  nce. Different p
-0000d340: 6172 7473 206f 6620 7468 6520 7472 616e  arts of the tran
-0000d350: 7366 6f72 6d73 2068 6176 6520 7365 7665  sforms have seve
-0000d360: 7261 6c20 6469 6666 6572 656e 7420 7761  ral different wa
-0000d370: 7973 0020 2020 2020 2020 2073 696d 706c  ys.        simpl
-0000d380: 7920 7468 6520 7375 6276 6172 6961 626c  y the subvariabl
-0000d390: 6527 7320 2875 6e73 7461 626c 6529 2063  e's (unstable) c
-0000d3a0: 6172 6469 6e61 6c20 706f 7369 7469 6f6e  ardinal position
-0000d3b0: 2069 6e20 7375 6276 6172 6961 626c 6573   in subvariables
-0000d3c0: 0020 2020 2020 2020 2069 6465 6e74 6966  .        identif
-0000d3d0: 6965 6420 6279 2074 6865 6972 2061 6c69  ied by their ali
-0000d3e0: 6173 2c20 6275 7420 7269 6768 7420 6e6f  as, but right no
-0000d3f0: 7720 7468 6520 2265 6c65 6d65 6e74 5f69  w the "element_i
-0000d400: 6422 2066 726f 6d20 7a7a 3920 6973 0020  d" from zz9 is. 
-0000d410: 2020 2020 2020 2057 6520 7761 6e74 2074         We want t
-0000d420: 6f20 6d6f 7665 2074 6f20 6120 776f 726c  o move to a worl
-0000d430: 6420 7768 6572 6520 656c 656d 656e 7473  d where elements
-0000d440: 206f 6e20 6120 7375 6276 6172 6961 626c   on a subvariabl
-0000d450: 6573 2064 696d 656e 7369 6f6e 2061 7265  es dimension are
-0000d460: 0000 2020 2020 2020 2020 2222 2243 6f70  ..        """Cop
-0000d470: 7920 6f66 2064 696d 656e 7369 6f6e 2074  y of dimension t
-0000d480: 7261 6e73 666f 726d 7320 6469 6374 696f  ransforms dictio
-0000d490: 6e61 7279 2077 6974 6820 7368 696d 6d65  nary with shimme
-0000d4a0: 6420 6065 6c65 6d65 6e74 5f69 6460 7300  d `element_id`s.
-0000d4b0: 2020 2020 6465 6620 7368 696d 6d65 645f      def shimmed_
-0000d4c0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
-0000d4d0: 6f72 6d73 5f64 6963 7428 7365 6c66 2920  orms_dict(self) 
-0000d4e0: 2d3e 2044 6963 743a 0020 2020 2040 6c61  -> Dict:.    @la
-0000d4f0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-0000d500: 2020 2020 7265 7475 726e 2073 6869 6d00      return shim.
-0000d510: 0020 2020 2020 2020 2020 2020 2073 6869  .            shi
-0000d520: 6d5b 2274 7970 6522 5d5b 2265 6c65 6d65  m["type"]["eleme
-0000d530: 6e74 7322 5d5b 6964 785d 5b22 6964 225d  nts"][idx]["id"]
-0000d540: 203d 2061 6c69 6173 0020 2020 2020 2020   = alias.       
-0000d550: 2066 6f72 2069 6478 2c20 616c 6961 7320   for idx, alias 
-0000d560: 696e 2065 6e75 6d65 7261 7465 2873 656c  in enumerate(sel
-0000d570: 662e 5f73 7562 7661 725f 616c 6961 7365  f._subvar_aliase
-0000d580: 7329 3a00 2020 2020 2020 2020 2320 2d2d  s):.        # --
-0000d590: 2d20 5265 706c 6163 6520 656c 656d 656e  - Replace elemen
-0000d5a0: 7420 6964 7320 7769 7468 2074 6865 2061  t ids with the a
-0000d5b0: 6c69 6173 0000 2020 2020 2020 2020 2020  lias..          
-0000d5c0: 2020 7265 7475 726e 2073 6869 6d00 2020    return shim.  
-0000d5d0: 2020 2020 2020 6966 2073 656c 662e 5f64        if self._d
-0000d5e0: 696d 656e 7369 6f6e 5f74 7970 6520 6e6f  imension_type no
-0000d5f0: 7420 696e 2044 542e 4152 5241 595f 5459  t in DT.ARRAY_TY
-0000d600: 5045 533a 0020 2020 2020 2020 2023 202d  PES:.        # -
-0000d610: 2d2d 2077 6520 6964 656e 7469 6679 2065  -- we identify e
-0000d620: 6c65 6d65 6e74 7320 6f6e 2063 6174 6567  lements on categ
-0000d630: 6f72 6963 616c 2064 696d 656e 7369 6f6e  orical dimension
-0000d640: 7320 2861 6e64 2074 6869 7320 6973 2063  s (and this is c
-0000d650: 6f72 7265 6374 292e 0020 2020 2020 2020  orrect)..       
-0000d660: 2023 202d 2d2d 2073 7562 7661 7269 6162   # --- subvariab
-0000d670: 6c65 2061 6c69 6173 6573 2074 6f20 7573  le aliases to us
-0000d680: 652c 2061 6e64 2063 6174 6567 6f72 7920  e, and category 
-0000d690: 6964 7320 6172 6520 616c 7265 6164 7920  ids are already 
-0000d6a0: 7468 6520 6d61 696e 2077 6179 0020 2020  the main way.   
-0000d6b0: 2020 2020 2023 202d 2d2d 204c 6561 7665       # --- Leave
-0000d6c0: 206e 6f6e 2d73 7562 7661 7269 6162 6c65   non-subvariable
-0000d6d0: 2064 696d 656e 7369 6f6e 2074 7970 6573   dimension types
-0000d6e0: 2061 6c6f 6e65 2c20 6173 2074 6865 7920   alone, as they 
-0000d6f0: 646f 6e27 7420 6861 7665 0000 2020 2020  don't have..    
-0000d700: 2020 2020 7368 696d 203d 2063 6f70 792e      shim = copy.
-0000d710: 6465 6570 636f 7079 2873 656c 662e 5f64  deepcopy(self._d
-0000d720: 696d 656e 7369 6f6e 5f64 6963 7429 0020  imension_dict). 
-0000d730: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-0000d740: 2020 2061 6e20 696e 6465 7820 666f 7220     an index for 
-0000d750: 7375 6276 6172 6961 626c 6573 2e00 2020  subvariables..  
-0000d760: 2020 2020 2020 6964 656e 7469 6669 6564        identified
-0000d770: 2062 7920 7468 6569 7220 616c 6961 732c   by their alias,
-0000d780: 2062 7574 2072 6967 6874 206e 6f77 2074   but right now t
-0000d790: 6865 2022 656c 656d 656e 745f 6964 2220  he "element_id" 
-0000d7a0: 6672 6f6d 207a 7a39 2069 7300 2020 2020  from zz9 is.    
-0000d7b0: 2020 2020 5765 2077 616e 7420 746f 206d      We want to m
-0000d7c0: 6f76 6520 746f 2061 2077 6f72 6c64 2077  ove to a world w
-0000d7d0: 6865 7265 2065 6c65 6d65 6e74 7320 6f6e  here elements on
-0000d7e0: 2061 2073 7562 7661 7269 6162 6c65 7320   a subvariables 
-0000d7f0: 6469 6d65 6e73 696f 6e20 6172 6500 0020  dimension are.. 
-0000d800: 2020 2020 2020 2022 2222 436f 7079 206f         """Copy o
-0000d810: 6620 6469 6d65 6e73 696f 6e20 6469 6374  f dimension dict
-0000d820: 696f 6e61 7279 2077 6974 6820 7368 696d  ionary with shim
-0000d830: 6d65 6420 6065 6c65 6d65 6e74 5f69 6460  med `element_id`
-0000d840: 7300 2020 2020 6465 6620 7368 696d 6d65  s.    def shimme
-0000d850: 645f 6469 6d65 6e73 696f 6e5f 6469 6374  d_dimension_dict
-0000d860: 2873 656c 6629 202d 3e20 4469 6374 3a00  (self) -> Dict:.
-0000d870: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-0000d880: 7900 0020 2020 2020 2020 2073 656c 662e  y..        self.
-0000d890: 5f64 696d 656e 7369 6f6e 5f74 7261 6e73  _dimension_trans
-0000d8a0: 666f 726d 735f 6469 6374 203d 2064 696d  forms_dict = dim
-0000d8b0: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
-0000d8c0: 735f 6469 6374 0020 2020 2020 2020 2073  s_dict.        s
-0000d8d0: 656c 662e 5f64 696d 656e 7369 6f6e 5f64  elf._dimension_d
-0000d8e0: 6963 7420 3d20 6469 6d65 6e73 696f 6e5f  ict = dimension_
-0000d8f0: 6469 6374 0020 2020 2020 2020 2073 656c  dict.        sel
-0000d900: 662e 5f64 696d 656e 7369 6f6e 5f74 7970  f._dimension_typ
-0000d910: 6520 3d20 6469 6d65 6e73 696f 6e5f 7479  e = dimension_ty
-0000d920: 7065 0020 2020 2064 6566 205f 5f69 6e69  pe.    def __ini
-0000d930: 745f 5f28 7365 6c66 2c20 6469 6d65 6e73  t__(self, dimens
-0000d940: 696f 6e5f 7479 7065 2c20 6469 6d65 6e73  ion_type, dimens
-0000d950: 696f 6e5f 6469 6374 2c20 6469 6d65 6e73  ion_dict, dimens
-0000d960: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000d970: 6963 7429 3a00 0020 2020 2022 2222 0020  ict):..    """. 
-0000d980: 2020 2020 2069 6e20 6064 696d 656e 7369       in `dimensi
-0000d990: 6f6e 735b 695d 2e74 7970 652e 656c 656d  ons[i].type.elem
-0000d9a0: 656e 7473 5b6a 5d2e 7661 6c75 652e 0020  ents[j].value.. 
-0000d9b0: 2020 202a 2022 616c 6961 7322 3a20 5375     * "alias": Su
-0000d9c0: 6276 6172 6961 626c 6573 2061 6c73 6f20  bvariables also 
-0000d9d0: 6861 7665 2061 6e20 616c 6961 7320 7468  have an alias th
-0000d9e0: 6174 2069 6465 6e74 6966 6965 7320 7468  at identifies th
-0000d9f0: 656d 2e20 4974 2069 7320 7374 6f72 6564  em. It is stored
-0000da00: 0020 2020 2020 2063 7572 7265 6e74 6c79  .      currently
-0000da10: 2074 6865 206e 616d 6520 6973 2075 7365   the name is use
-0000da20: 6420 6865 7265 2e00 2020 2020 2020 2230  d here..      "0
-0000da30: 3030 3222 2c20 2e2e 2e29 2c20 7468 6f75  002", ...), thou
-0000da40: 6768 2069 7420 6973 206e 6f74 2072 6571  gh it is not req
-0000da50: 7569 7265 6420 746f 2062 652e 2046 6f72  uired to be. For
-0000da60: 2064 6572 6976 6564 2069 6e73 6572 7469   derived inserti
-0000da70: 6f6e 732c 0020 2020 2020 2030 2d70 6164  ons,.      0-pad
-0000da80: 6465 6420 696e 6465 7820 6f66 2074 6865  ded index of the
-0000da90: 2073 7562 7661 7269 6162 6c65 2077 6865   subvariable whe
-0000daa0: 6e20 6974 2077 6173 2066 6972 7374 2063  n it was first c
-0000dab0: 7265 6174 6564 2028 6567 2022 3030 3031  reated (eg "0001
-0000dac0: 222c 0020 2020 2020 2060 6469 6d65 6e73  ",.      `dimens
-0000dad0: 696f 6e73 5b69 5d2e 7479 7065 2e65 6c65  ions[i].type.ele
-0000dae0: 6d65 6e74 735b 6a5d 2e76 616c 7565 2e69  ments[j].value.i
-0000daf0: 6460 2c20 6765 6e65 7261 6c6c 7920 7468  d`, generally th
-0000db00: 6973 2069 7320 6120 3420 6469 6769 742c  is is a 4 digit,
-0000db10: 0020 2020 202a 2022 7375 6276 6172 6961  .    * "subvaria
-0000db20: 626c 655f 6964 223a 2053 7562 7661 7269  ble_id": Subvari
-0000db30: 6162 6c65 7320 6861 7665 2061 6e20 6964  ables have an id
-0000db40: 2073 746f 7265 6420 696e 0020 2020 2020   stored in.     
-0000db50: 2074 6865 2069 6e64 6578 2069 6e74 6567   the index integ
-0000db60: 6572 2068 6572 652e 204c 6f6e 6720 7465  er here. Long te
-0000db70: 726d 207a 7a39 206d 6179 2063 6861 6e67  rm zz9 may chang
-0000db80: 6520 7468 6973 2074 6f20 7468 6520 7468  e this to the th
-0000db90: 6520 616c 6961 732e 0020 2020 2020 2060  e alias..      `
-0000dba0: 6469 6d65 6e73 696f 6e73 5b69 5d2e 7479  dimensions[i].ty
-0000dbb0: 7065 2e65 6c65 6d65 6e74 735b 6a5d 2e69  pe.elements[j].i
-0000dbc0: 6460 2e20 466f 7220 7375 6276 6172 6961  d`. For subvaria
-0000dbd0: 626c 6573 2c20 7a7a 3920 6375 7272 656e  bles, zz9 curren
-0000dbe0: 746c 7920 7075 7473 0020 2020 202a 2022  tly puts.    * "
-0000dbf0: 656c 656d 656e 745f 6964 223a 2053 746f  element_id": Sto
-0000dc00: 7265 6420 696e 2074 6865 2063 7562 6520  red in the cube 
-0000dc10: 7265 7375 6c74 2061 7320 7468 6520 6f62  result as the ob
-0000dc20: 6a65 6374 206e 616d 6520 696e 0000 2020  ject name in..  
-0000dc30: 2020 5479 7065 7320 6f66 2069 6465 6e74    Types of ident
-0000dc40: 6966 6965 7273 2066 6f72 2073 7562 7661  ifiers for subva
-0000dc50: 7269 6162 6c65 7320 2861 6e64 2064 6572  riables (and der
-0000dc60: 6976 6564 2069 6e73 6572 7469 6f6e 7329  ived insertions)
-0000dc70: 3a00 0020 2020 2073 7562 7661 7269 6162  :..    subvariab
-0000dc80: 6c65 732e 0020 2020 2061 6e20 696e 6465  les..    an inde
-0000dc90: 782c 2061 6e64 2074 6865 2074 7261 6e73  x, and the trans
-0000dca0: 666f 726d 7320 6861 7665 2073 6576 6572  forms have sever
-0000dcb0: 616c 2064 6966 6665 7265 6e74 2077 6179  al different way
-0000dcc0: 7320 746f 2072 6566 6572 2074 6f00 2020  s to refer to.  
-0000dcd0: 2020 6964 656e 7469 6669 6564 2062 7920    identified by 
-0000dce0: 7468 6569 7220 616c 6961 732c 2062 7574  their alias, but
-0000dcf0: 2072 6967 6874 206e 6f77 2074 6865 2022   right now the "
-0000dd00: 656c 656d 656e 745f 6964 2220 6672 6f6d  element_id" from
-0000dd10: 207a 7a39 2069 7300 2020 2020 5765 2077   zz9 is.    We w
-0000dd20: 616e 7420 746f 206d 6f76 6520 746f 2061  ant to move to a
-0000dd30: 2077 6f72 6c64 2077 6865 7265 2065 6c65   world where ele
-0000dd40: 6d65 6e74 7320 6f6e 2061 2073 7562 7661  ments on a subva
-0000dd50: 7269 6162 6c65 7320 6469 6d65 6e73 696f  riables dimensio
-0000dd60: 6e20 6172 6500 0020 2020 2022 2222 4f62  n are..    """Ob
-0000dd70: 6a65 6374 2075 7365 6420 746f 2072 6570  ject used to rep
-0000dd80: 6c61 6365 2065 6c65 6d65 6e74 2069 6473  lace element ids
-0000dd90: 2077 6974 6820 616c 6961 7320 666f 7220   with alias for 
-0000dda0: 7375 6276 6172 6961 626c 6573 2e00 636c  subvariables..cl
-0000ddb0: 6173 7320 5f45 6c65 6d65 6e74 4964 5368  ass _ElementIdSh
-0000ddc0: 696d 3a00 0000 2020 2020 2020 2020 7265  im:...        re
-0000ddd0: 7475 726e 2074 7570 6c65 2865 6c65 6d65  turn tuple(eleme
-0000dde0: 6e74 2066 6f72 2065 6c65 6d65 6e74 2069  nt for element i
-0000ddf0: 6e20 7365 6c66 2e5f 616c 6c5f 656c 656d  n self._all_elem
-0000de00: 656e 7473 2069 6620 6e6f 7420 656c 656d  ents if not elem
-0000de10: 656e 742e 6d69 7373 696e 6729 0020 2020  ent.missing).   
-0000de20: 2020 2020 2022 2222 7475 706c 6520 636f       """tuple co
-0000de30: 6e74 6169 6e69 6e67 2061 6374 7561 6c20  ntaining actual 
-0000de40: 7365 7175 656e 6365 206f 6620 656c 656d  sequence of elem
-0000de50: 656e 7420 6f62 6a65 6374 732e 2222 2200  ent objects.""".
-0000de60: 2020 2020 6465 6620 5f65 6c65 6d65 6e74      def _element
-0000de70: 7328 7365 6c66 2920 2d3e 2054 7570 6c65  s(self) -> Tuple
-0000de80: 5b22 5f45 6c65 6d65 6e74 222c 202e 2e2e  ["_Element", ...
-0000de90: 5d3a 0020 2020 2040 6c61 7a79 7072 6f70  ]:.    @lazyprop
-0000dea0: 6572 7479 0000 2020 2020 2020 2020 7365  erty..        se
-0000deb0: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 7472  lf._dimension_tr
-0000dec0: 616e 7366 6f72 6d73 5f64 6963 7420 3d20  ansforms_dict = 
-0000ded0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
-0000dee0: 6f72 6d73 5f64 6963 7400 2020 2020 2020  orms_dict.      
-0000def0: 2020 7365 6c66 2e5f 616c 6c5f 656c 656d    self._all_elem
-0000df00: 656e 7473 203d 2061 6c6c 5f65 6c65 6d65  ents = all_eleme
-0000df10: 6e74 7300 2020 2020 6465 6620 5f5f 696e  nts.    def __in
-0000df20: 6974 5f5f 2873 656c 662c 2061 6c6c 5f65  it__(self, all_e
-0000df30: 6c65 6d65 6e74 732c 2064 696d 656e 7369  lements, dimensi
-0000df40: 6f6e 5f74 7261 6e73 666f 726d 735f 6469  on_transforms_di
-0000df50: 6374 293a 0000 2020 2020 2222 2200 2020  ct):..    """.  
-0000df60: 2020 6469 7265 6374 6c79 2e00 2020 2020    directly..    
-0000df70: 5f41 6c6c 456c 656d 656e 7473 2e76 616c  _AllElements.val
-0000df80: 6964 5f65 6c65 6d65 6e74 7320 616e 6420  id_elements and 
-0000df90: 7468 6572 6520 7368 6f75 6c64 2062 6520  there should be 
-0000dfa0: 6e6f 2072 6561 736f 6e20 746f 2063 6f6e  no reason to con
-0000dfb0: 7374 7275 6374 2069 7400 2020 2020 6f66  struct it.    of
-0000dfc0: 2061 2064 696d 656e 7369 6f6e 2e20 5468   a dimension. Th
-0000dfd0: 6973 206f 626a 6563 7420 6973 206f 6e6c  is object is onl
-0000dfe0: 7920 696e 7465 6e64 6564 2074 6f20 6265  y intended to be
-0000dff0: 2063 6f6e 7374 7275 6374 6564 2062 7900   constructed by.
-0000e000: 6164 0000 0d00 0000 6901 0000 0010 0000  ad......i.......
-0000e010: 5000 0000 0000 0000 ae0f 0000 5c0f 0000  P...........\...
-0000e020: 0b0f 0000 e00e 0000 8a0e 0000 440e 0000  ............D...
-0000e030: 380e 0000 fa0d 0000 f90d 0000 ab0d 0000  8...............
-0000e040: 570d 0000 030d 0000 cc0c 0000 b40c 0000  W...............
-0000e050: b30c 0000 780c 0000 590c 0000 060c 0000  ....x...Y.......
-0000e060: 050c 0000 c70b 0000 860b 0000 390b 0000  ............9...
-0000e070: 0c0b 0000 fe0a 0000 fd0a 0000 a70a 0000  ................
-0000e080: 500a 0000 f709 0000 9f09 0000 5409 0000  P...........T...
-0000e090: 5309 0000 3f09 0000 3e09 0000 0409 0000  S...?...>.......
-0000e0a0: ad08 0000 ac08 0000 6308 0000 2e08 0000  ........c.......
-0000e0b0: e107 0000 9707 0000 4207 0000 ea06 0000  ........B.......
-0000e0c0: bb06 0000 8d06 0000 8106 0000 4a06 0000  ............J...
-0000e0d0: 3306 0000 3206 0000 0a06 0000 f305 0000  3...2...........
-0000e0e0: cf05 0000 8a05 0000 6105 0000 1705 0000  ........a.......
-0000e0f0: 1605 0000 0905 0000 ee04 0000 a004 0000  ................
-0000e100: 7304 0000 2504 0000 0a04 0000 f203 0000  s...%...........
-0000e110: f103 0000 b803 0000 8b03 0000 8a03 0000  ................
-0000e120: 7603 0000 7503 0000 6303 0000 2403 0000  v...u...c...$...
-0000e130: d702 0000 d602 0000 8402 0000 3002 0000  ............0...
-0000e140: 2402 0000 0e02 0000 bc01 0000 b201 0000  $...............
-0000e150: b101 0000 6901 0000 6801 0000 0000 0000  ....i...h.......
-0000e160: 0000 0000 0000 0000 0020 2020 2064 6566  .........    def
-0000e170: 205f 7265 706c 6163 6564 5f65 6c65 6d65   _replaced_eleme
-0000e180: 6e74 5f74 7261 6e73 666f 726d 7328 7365  nt_transforms(se
-0000e190: 6c66 2c20 656c 656d 656e 745f 7472 616e  lf, element_tran
-0000e1a0: 7366 6f72 6d73 2920 2d3e 2044 6963 743a  sforms) -> Dict:
-0000e1b0: 0000 2020 2020 2020 2020 2900 2020 2020  ..        ).    
-0000e1c0: 2020 2020 2020 2020 656c 656d 656e 745b          element[
-0000e1d0: 2269 6422 5d20 666f 7220 656c 656d 656e  "id"] for elemen
-0000e1e0: 7420 696e 2073 656c 662e 5f64 696d 656e  t in self._dimen
-0000e1f0: 7369 6f6e 5f64 6963 745b 2274 7970 6522  sion_dict["type"
-0000e200: 5d5b 2265 6c65 6d65 6e74 7322 5d00 2020  ]["elements"].  
-0000e210: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-0000e220: 6c65 2800 2020 2020 2020 2020 2222 2200  le(.        """.
-0000e230: 2020 2020 2020 2020 7265 706c 6163 6564          replaced
-0000e240: 2077 6974 6820 7468 6520 616c 6961 7320   with the alias 
-0000e250: 666f 7220 7375 6276 6172 6961 626c 6573  for subvariables
-0000e260: 2069 6e20 7468 6520 602e 5f73 6869 6d6d   in the `._shimm
-0000e270: 6564 5f64 696d 656e 7369 6f6e 5f64 6963  ed_dimension_dic
-0000e280: 7460 2e00 2020 2020 2020 2020 5468 6573  t`..        Thes
-0000e290: 6520 6172 6520 2272 6177 2220 6265 6361  e are "raw" beca
-0000e2a0: 7573 6520 7468 6579 2072 6566 6572 2074  use they refer t
-0000e2b0: 6f20 7468 6520 656c 656d 656e 7420 6964  o the element id
-0000e2c0: 7320 6265 666f 7265 2074 6865 7927 7665  s before they've
-0000e2d0: 2062 6565 6e00 0020 2020 2020 2020 2022   been..        "
-0000e2e0: 2222 7475 706c 6520 6f66 2069 6e74 206f  ""tuple of int o
-0000e2f0: 7220 7374 7269 6e67 2065 6c65 6d65 6e74  r string element
-0000e300: 2069 6473 2c20 6173 2074 6865 7920 6170   ids, as they ap
-0000e310: 7065 6172 2069 6e20 6375 6265 2072 6573  pear in cube res
-0000e320: 756c 7400 2020 2020 6465 6620 5f72 6177  ult.    def _raw
-0000e330: 5f65 6c65 6d65 6e74 5f69 6473 2873 656c  _element_ids(sel
-0000e340: 6629 202d 3e20 5475 706c 655b 556e 696f  f) -> Tuple[Unio
-0000e350: 6e5b 696e 742c 2073 7472 5d2c 202e 2e2e  n[int, str], ...
-0000e360: 5d3a 0020 2020 2040 6c61 7a79 7072 6f70  ]:.    @lazyprop
-0000e370: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-0000e380: 7475 726e 204e 6f6e 6500 0020 2020 2020  turn None..     
-0000e390: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000e3a0: 6c66 2e5f 7375 6276 6172 5f61 6c69 6173  lf._subvar_alias
-0000e3b0: 6573 5b5f 6964 5d00 2020 2020 2020 2020  es[_id].        
-0000e3c0: 6966 205f 6964 203e 3d20 3020 616e 6420  if _id >= 0 and 
-0000e3d0: 5f69 6420 3c20 6c65 6e28 7365 6c66 2e5f  _id < len(self._
-0000e3e0: 7375 6276 6172 5f61 6c69 6173 6573 293a  subvar_aliases):
-0000e3f0: 0000 2020 2020 2020 2020 2020 2020 7265  ..            re
-0000e400: 7475 726e 204e 6f6e 6500 2020 2020 2020  turn None.      
-0000e410: 2020 6578 6365 7074 2056 616c 7565 4572    except ValueEr
-0000e420: 726f 723a 0020 2020 2020 2020 2020 2020  ror:.           
-0000e430: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000e440: 2e5f 7375 6276 6172 5f61 6c69 6173 6573  ._subvar_aliases
-0000e450: 5b73 656c 662e 5f72 6177 5f65 6c65 6d65  [self._raw_eleme
-0000e460: 6e74 5f69 6473 2e69 6e64 6578 285f 6964  nt_ids.index(_id
-0000e470: 295d 0020 2020 2020 2020 2020 2020 2069  )].            i
-0000e480: 6620 5f69 6420 696e 2073 656c 662e 5f72  f _id in self._r
-0000e490: 6177 5f65 6c65 6d65 6e74 5f69 6473 3a00  aw_element_ids:.
-0000e4a0: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
-0000e4b0: 2d20 4966 2073 7563 6365 7373 6675 6c6c  - If successfull
-0000e4c0: 7920 636f 6e76 6572 7465 6420 746f 2069  y converted to i
-0000e4d0: 6e74 2c20 7472 7920 7261 7720 656c 656d  nt, try raw elem
-0000e4e0: 656e 7420 6964 7320 6167 6169 6e00 2020  ent ids again.  
-0000e4f0: 2020 2020 2020 2020 2020 5f69 6420 3d20            _id = 
-0000e500: 696e 7428 5f69 6429 0020 2020 2020 2020  int(_id).       
-0000e510: 2074 7279 3a00 0020 2020 2020 2020 2020   try:..         
-0000e520: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0000e530: 7375 6276 6172 5f61 6c69 6173 6573 5b73  subvar_aliases[s
-0000e540: 656c 662e 5f72 6177 5f65 6c65 6d65 6e74  elf._raw_element
-0000e550: 5f69 6473 2e69 6e64 6578 285f 6964 295d  _ids.index(_id)]
-0000e560: 0020 2020 2020 2020 2069 6620 5f69 6420  .        if _id 
-0000e570: 696e 2073 656c 662e 5f72 6177 5f65 6c65  in self._raw_ele
-0000e580: 6d65 6e74 5f69 6473 3a00 2020 2020 2020  ment_ids:.      
-0000e590: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000e5a0: 662e 5f73 7562 7661 725f 616c 6961 7365  f._subvar_aliase
-0000e5b0: 735b 7365 6c66 2e5f 7375 6276 6172 5f69  s[self._subvar_i
-0000e5c0: 6473 2e69 6e64 6578 285f 6964 295d 0020  ds.index(_id)]. 
-0000e5d0: 2020 2020 2020 2069 6620 5f69 6420 696e         if _id in
-0000e5e0: 2073 656c 662e 5f73 7562 7661 725f 6964   self._subvar_id
-0000e5f0: 733a 0020 2020 2020 2020 2020 2020 2072  s:.            r
-0000e600: 6574 7572 6e20 5f69 6400 2020 2020 2020  eturn _id.      
-0000e610: 2020 6966 205f 6964 2069 6e20 7365 6c66    if _id in self
-0000e620: 2e5f 7375 6276 6172 5f61 6c69 6173 6573  ._subvar_aliases
-0000e630: 3a00 0020 2020 2020 2020 2020 2020 2072  :..            r
-0000e640: 6574 7572 6e20 5f69 6400 2020 2020 2020  eturn _id.      
-0000e650: 2020 6966 2073 656c 662e 5f64 696d 656e    if self._dimen
-0000e660: 7369 6f6e 5f74 7970 6520 6e6f 7420 696e  sion_type not in
-0000e670: 2044 542e 4152 5241 595f 5459 5045 533a   DT.ARRAY_TYPES:
-0000e680: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-0000e690: 2020 2020 2036 2920 4966 2061 6c6c 206f       6) If all o
-0000e6a0: 6620 7468 6573 6520 6661 696c 2c20 7265  f these fail, re
-0000e6b0: 7475 726e 204e 6f6e 652e 0020 2020 2020  turn None..     
-0000e6c0: 2020 2020 2020 302d 2320 6f66 2065 6c65        0-# of ele
-0000e6d0: 6d65 6e74 7329 2c20 7573 6520 5f69 6427  ments), use _id'
-0000e6e0: 7468 2061 6c69 6173 2e00 2020 2020 2020  th alias..      
-0000e6f0: 2020 3529 2049 6620 6964 2069 7320 696e    5) If id is in
-0000e700: 7420 286f 7220 6361 6e20 6265 2070 6172  t (or can be par
-0000e710: 7365 6420 746f 2069 6e74 2920 616e 6420  sed to int) and 
-0000e720: 6361 6e20 6265 2075 7365 6420 6173 2069  can be used as i
-0000e730: 6e64 6578 2028 6567 2069 6e20 7261 6e67  ndex (eg in rang
-0000e740: 6500 2020 2020 2020 2020 3429 2049 6620  e.        4) If 
-0000e750: 6964 2063 616e 2062 6520 7061 7273 6564  id can be parsed
-0000e760: 2074 6f20 696e 7420 616e 6420 6d61 7463   to int and matc
-0000e770: 6865 7320 616e 2065 6c65 6d65 6e74 2069  hes an element i
-0000e780: 642c 2074 7261 6e73 6c61 7465 2074 6f20  d, translate to 
-0000e790: 616c 6961 732e 0020 2020 2020 2020 2033  alias..        3
-0000e7a0: 2920 4966 2069 6420 6d61 7463 6865 7320  ) If id matches 
-0000e7b0: 616e 2065 6c65 6d65 6e74 2069 642c 2074  an element id, t
-0000e7c0: 7261 6e73 6c61 7465 2074 6f20 636f 7272  ranslate to corr
-0000e7d0: 6573 706f 6e64 696e 6720 616c 6961 732e  esponding alias.
-0000e7e0: 0020 2020 2020 2020 2032 2920 4966 2069  .        2) If i
-0000e7f0: 6420 6d61 7463 6865 7320 6120 7375 6276  d matches a subv
-0000e800: 6172 6961 626c 6520 6964 2c20 7472 616e  ariable id, tran
-0000e810: 736c 6174 6520 746f 2063 6f72 7265 7370  slate to corresp
-0000e820: 6f6e 6469 6e67 2061 6c69 6173 2e00 2020  onding alias..  
-0000e830: 2020 2020 2020 3129 2049 6620 6964 206d        1) If id m
-0000e840: 6174 6368 6573 2061 6e20 616c 6961 732c  atches an alias,
-0000e850: 2074 6865 6e20 6a75 7374 2075 7365 2069   then just use i
-0000e860: 742e 0020 2020 2020 2020 2030 2920 4966  t..        0) If
-0000e870: 2064 696d 656e 7369 6f6e 2069 7320 6e6f   dimension is no
-0000e880: 7420 6120 7375 6276 6172 6961 626c 6573  t a subvariables
-0000e890: 2064 696d 656e 7369 6f6e 2c20 7265 7475   dimension, retu
-0000e8a0: 726e 2074 6865 205f 6964 2e00 0020 2020  rn the _id...   
-0000e8b0: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
-0000e8c0: 2073 7472 696e 6720 7468 6174 2069 7320   string that is 
-0000e8d0: 7468 6520 7472 616e 736c 6174 696f 6e20  the translation 
-0000e8e0: 6f66 2076 6172 696f 7573 2069 6473 2074  of various ids t
-0000e8f0: 6f20 7375 6276 6172 6961 626c 6520 616c  o subvariable al
-0000e900: 6961 7300 2020 2020 6465 6620 7472 616e  ias.    def tran
-0000e910: 736c 6174 655f 656c 656d 656e 745f 6964  slate_element_id
-0000e920: 2873 656c 662c 205f 6964 2920 2d3e 204f  (self, _id) -> O
-0000e930: 7074 696f 6e61 6c5b 7374 725d 3a00 0020  ptional[str]:.. 
-0000e940: 2020 2020 2020 2072 6574 7572 6e20 7368         return sh
-0000e950: 696d 0000 2020 2020 2020 2020 2320 2d2d  im..        # --
-0000e960: 2d20 7468 616e 2066 6f72 6369 6e67 2074  - than forcing t
-0000e970: 6865 2064 696d 656e 7369 6f6e 7320 746f  he dimensions to
-0000e980: 2062 6520 6177 6172 6520 6f66 206f 7468   be aware of oth
-0000e990: 6572 2064 696d 656e 7369 6f6e 732e 0020  er dimensions.. 
-0000e9a0: 2020 2020 2020 2023 202d 2d2d 2076 6572         # --- ver
-0000e9b0: 7369 6f6e 206f 6620 7468 6520 6469 6d65  sion of the dime
-0000e9c0: 6e73 696f 6e20 7472 616e 7366 6f72 6d73  nsion transforms
-0000e9d0: 2061 7265 2069 6e63 6f6e 7369 7374 656e   are inconsisten
-0000e9e0: 742e 2042 7574 2069 7420 6665 656c 7320  t. But it feels 
-0000e9f0: 6561 7369 6572 0020 2020 2020 2020 2023  easier.        #
-0000ea00: 202d 2d2d 2054 6869 7320 6973 2061 206c   --- This is a l
-0000ea10: 6974 746c 6520 756e 666f 7274 756e 6174  ittle unfortunat
-0000ea20: 652c 2062 6563 6175 7365 2074 6869 7320  e, because this 
-0000ea30: 6d65 616e 7320 7468 6174 2074 6865 2069  means that the i
-0000ea40: 6473 2069 6e20 7468 6973 2073 6869 6d00  ds in this shim.
-0000ea50: 2020 2020 2020 2020 2320 2d2d 2d20 7468          # --- th
-0000ea60: 6520 6964 7320 7265 6665 7220 746f 2074  e ids refer to t
-0000ea70: 6865 206f 7070 6f73 696e 6720 6469 6d65  he opposing dime
-0000ea80: 6e73 696f 6e2c 2073 6f20 646f 2074 6865  nsion, so do the
-0000ea90: 2074 7261 6e73 6c61 7469 6f6e 206c 6174   translation lat
-0000eaa0: 6572 206f 6e2e 0020 2020 2020 2020 2023  er on..        #
-0000eab0: 202d 2d2d 2073 6f72 742d 6279 2d76 616c   --- sort-by-val
-0000eac0: 7565 206f 6e20 7468 6520 6f70 706f 7369  ue on the opposi
-0000ead0: 6e67 2064 696d 656e 7369 6f6e 2061 6c73  ng dimension als
-0000eae0: 6f20 7265 6665 7273 2074 6f20 656c 656d  o refers to elem
-0000eaf0: 656e 7420 6964 732c 2062 7574 0000 2020  ent ids, but..  
-0000eb00: 2020 2020 2020 2020 2020 2900 2020 2020            ).    
-0000eb10: 2020 2020 2020 2020 2020 2020 7368 696d              shim
-0000eb20: 5b22 6f72 6465 7222 5d5b 2265 6c65 6d65  ["order"]["eleme
-0000eb30: 6e74 5f69 6473 225d 0020 2020 2020 2020  nt_ids"].       
-0000eb40: 2020 2020 2073 6869 6d5b 226f 7264 6572       shim["order
-0000eb50: 225d 5b22 656c 656d 656e 745f 6964 7322  "]["element_ids"
-0000eb60: 5d20 3d20 7365 6c66 2e5f 7265 706c 6163  ] = self._replac
-0000eb70: 6564 5f6f 7264 6572 5f65 6c65 6d65 6e74  ed_order_element
-0000eb80: 5f69 6473 2800 2020 2020 2020 2020 6966  _ids(.        if
-0000eb90: 2073 6869 6d2e 6765 7428 226f 7264 6572   shim.get("order
-0000eba0: 222c 207b 7d29 2e67 6574 2822 656c 656d  ", {}).get("elem
-0000ebb0: 656e 745f 6964 7322 2920 6973 206e 6f74  ent_ids") is not
-0000ebc0: 204e 6f6e 653a 0020 2020 2020 2020 2023   None:.        #
-0000ebd0: 202d 2d2d 2054 7261 6e73 6c61 7465 2065   --- Translate e
-0000ebe0: 7870 6c69 6369 7420 6f72 6465 7220 656c  xplicit order el
-0000ebf0: 656d 656e 7420 6964 7320 6966 2070 7265  ement ids if pre
-0000ec00: 7365 6e74 0000 2020 2020 2020 2020 2020  sent..          
-0000ec10: 2020 7368 696d 5b22 656c 656d 656e 7473    shim["elements
-0000ec20: 225d 203d 2073 656c 662e 5f72 6570 6c61  "] = self._repla
-0000ec30: 6365 645f 656c 656d 656e 745f 7472 616e  ced_element_tran
-0000ec40: 7366 6f72 6d73 2873 6869 6d5b 2265 6c65  sforms(shim["ele
-0000ec50: 6d65 6e74 7322 5d29 0020 2020 2020 2020  ments"]).       
-0000ec60: 2069 6620 2265 6c65 6d65 6e74 7322 2069   if "elements" i
-0000ec70: 6e20 7368 696d 3a00 2020 2020 2020 2020  n shim:.        
-0000ec80: 2320 2d2d 2d20 5265 706c 6163 6520 656c  # --- Replace el
-0000ec90: 656d 656e 7420 7472 616e 7366 6f72 6d20  ement transform 
-0000eca0: 6964 7320 7769 7468 2074 6865 2061 6c69  ids with the ali
-0000ecb0: 6173 0000 2020 2020 2020 2020 2020 2020  as..            
-0000ecc0: 7265 7475 726e 2073 6869 6d00 2020 2020  return shim.    
-0000ecd0: 2020 2020 6966 2073 656c 662e 5f64 696d      if self._dim
-0000ece0: 656e 7369 6f6e 5f74 7970 6520 6e6f 7420  ension_type not 
-0000ecf0: 696e 2044 542e 4152 5241 595f 5459 5045  in DT.ARRAY_TYPE
-0000ed00: 533a 0020 2020 2020 2020 2023 202d 2d2d  S:.        # ---
-0000ed10: 2077 6520 6964 656e 7469 6679 2065 6c65   we identify ele
-0000ed20: 6d65 6e74 7320 6f6e 2063 6174 6567 6f72  ments on categor
-0000ed30: 6963 616c 2064 696d 656e 7369 6f6e 7320  ical dimensions 
-0000ed40: 2861 6e64 2074 6869 7320 6973 2063 6f72  (and this is cor
-0000ed50: 7265 6374 292e 0020 2020 2020 2020 2023  rect)..        #
-0000ed60: 202d 2d2d 2073 7562 7661 7269 6162 6c65   --- subvariable
-0000ed70: 2061 6c69 6173 6573 2074 6f20 7573 652c   aliases to use,
-0000ed80: 2061 6e64 2063 6174 6567 6f72 7920 6964   and category id
-0000ed90: 7320 6172 6520 616c 7265 6164 7920 7468  s are already th
-0000eda0: 6520 6d61 696e 2077 6179 0020 2020 2020  e main way.     
-0000edb0: 2020 2023 202d 2d2d 204c 6561 7665 206e     # --- Leave n
-0000edc0: 6f6e 2d73 7562 7661 7269 6162 6c65 2064  on-subvariable d
-0000edd0: 696d 656e 7369 6f6e 2074 7970 6573 2061  imension types a
-0000ede0: 6c6f 6e65 2c20 6173 2074 6865 7920 646f  lone, as they do
-0000edf0: 6e27 7420 6861 7665 0000 2020 2020 2020  n't have..      
-0000ee00: 2020 7368 696d 203d 2063 6f70 792e 6465    shim = copy.de
-0000ee10: 6570 636f 7079 2873 656c 662e 5f64 696d  epcopy(self._dim
-0000ee20: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
-0000ee30: 735f 6469 6374 2900 2020 2020 2020 2020  s_dict).        
-0000ee40: 2222 2200 2020 2020 2020 2020 2020 696e  """.          in
-0000ee50: 2060 6469 6d65 6e73 696f 6e73 5b69 5d2e   `dimensions[i].
-0000ee60: 7479 7065 2e65 6c65 6d65 6e74 735b 6a5d  type.elements[j]
-0000ee70: 2e76 616c 7565 2e72 6566 6572 656e 6365  .value.reference
-0000ee80: 732e 616c 6961 7360 2e00 2020 2020 2020  s.alias`..      
-0000ee90: 2020 2d20 2261 6c69 6173 223a 2053 7562    - "alias": Sub
-0000eea0: 7661 7269 6162 6c65 7320 616c 736f 2068  variables also h
-0000eeb0: 6176 6520 616e 2061 6c69 6173 2074 6861  ave an alias tha
-0000eec0: 7420 6964 656e 7469 6669 6573 2074 6865  t identifies the
-0000eed0: 6d2e 2049 7420 6973 2073 746f 7265 6400  m. It is stored.
-0000eee0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-0000eef0: 746c 7920 7468 6520 6e61 6d65 2069 7320  tly the name is 
-0000ef00: 7573 6564 2068 6572 652e 0020 2020 2020  used here..     
-0000ef10: 2020 2020 2022 3030 3032 222c 202e 2e2e       "0002", ...
-0000ef20: 292c 2074 686f 7567 6820 6974 2069 7320  ), though it is 
-0000ef30: 6e6f 7420 7265 7175 6972 6564 2074 6f20  not required to 
-0000ef40: 6265 2e20 466f 7220 6465 7269 7665 6420  be. For derived 
-0000ef50: 696e 7365 7274 696f 6e73 2c00 2020 2020  insertions,.    
-0000ef60: 2020 2020 2020 302d 7061 6464 6564 2069        0-padded i
-0000ef70: 6e64 6578 206f 6620 7468 6520 7375 6276  ndex of the subv
-0000ef80: 6172 6961 626c 6520 7768 656e 2069 7420  ariable when it 
-0000ef90: 7761 7320 6669 7273 7420 6372 6561 7465  was first create
-0000efa0: 6420 2865 6720 2230 3030 3122 2c00 2020  d (eg "0001",.  
-0000efb0: 2020 2020 2020 2020 6064 696d 656e 7369          `dimensi
-0000efc0: 6f6e 735b 695d 2e74 7970 652e 656c 656d  ons[i].type.elem
-0000efd0: 656e 7473 5b6a 5d2e 7661 6c75 652e 6964  ents[j].value.id
-0000efe0: 602c 2067 656e 6572 616c 6c79 2074 6869  `, generally thi
-0000eff0: 7320 6973 2061 2034 2064 6967 6974 2c00  s is a 4 digit,.
-0000f000: 6164 0000 4b00 0000 d701 0000 0010 0000  ad..K...........
-0000f010: 5c00 0000 0000 0000 b60f 0000 b50f 0000  \...............
-0000f020: 610f 0000 0d0f 0000 c50e 0000 b90e 0000  a...............
-0000f030: 660e 0000 110e 0000 c40d 0000 6f0d 0000  f...........o...
-0000f040: 560d 0000 080d 0000 c80c 0000 9c0c 0000  V...............
-0000f050: 810c 0000 450c 0000 1f0c 0000 1e0c 0000  ....E...........
-0000f060: ea0b 0000 e90b 0000 ca0b 0000 9a0b 0000  ................
-0000f070: 7c0b 0000 3a0b 0000 0f0b 0000 f50a 0000  |...:...........
-0000f080: d10a 0000 c30a 0000 b50a 0000 7d0a 0000  ............}...
-0000f090: 2c0a 0000 2b0a 0000 1a0a 0000 e809 0000  ,...+...........
-0000f0a0: b909 0000 9909 0000 8f09 0000 8e09 0000  ................
-0000f0b0: 3f09 0000 fd08 0000 fc08 0000 a708 0000  ?...............
-0000f0c0: 5a08 0000 4e08 0000 0708 0000 0608 0000  Z...N...........
-0000f0d0: f407 0000 c207 0000 7807 0000 7707 0000  ........x...w...
-0000f0e0: 2107 0000 d806 0000 cc06 0000 b606 0000  !...............
-0000f0f0: 5f06 0000 1b06 0000 1106 0000 1006 0000  _...............
-0000f100: fe05 0000 c405 0000 7105 0000 7005 0000  ........q...p...
-0000f110: 2005 0000 1405 0000 fe04 0000 db04 0000   ...............
-0000f120: 9704 0000 8d04 0000 8c04 0000 8b04 0000  ................
-0000f130: 7b04 0000 4a04 0000 4904 0000 fc03 0000  {...J...I.......
-0000f140: f403 0000 f303 0000 b203 0000 8803 0000  ................
-0000f150: 6c03 0000 3603 0000 3503 0000 2303 0000  l...6...5...#...
-0000f160: 0703 0000 d502 0000 a002 0000 9f02 0000  ................
-0000f170: 8d02 0000 5902 0000 0d02 0000 f001 0000  ....Y...........
-0000f180: d801 0000 d701 0000 d601 0000 0000 0000  ................
-0000f190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f1d0: 0000 0000 0000 0000 2020 2020 2020 2020  ........        
-0000f1e0: 2020 2020 7265 7475 726e 204e 6f6e 6500      return None.
-0000f1f0: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-0000f200: 656c 662e 6465 7269 7665 643a 0020 2020  elf.derived:.   
-0000f210: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
-0000f220: 2073 7472 206f 7220 6469 6374 2064 6566   str or dict def
-0000f230: 696e 696e 6720 7468 6520 616e 6368 6f72  ining the anchor
-0000f240: 2066 6f72 2064 6572 6976 6564 2065 6c65   for derived ele
-0000f250: 6d65 6e74 7322 2222 0020 2020 2064 6566  ments""".    def
-0000f260: 2061 6e63 686f 7228 7365 6c66 2920 2d3e   anchor(self) ->
-0000f270: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
-0000f280: 7374 722c 2064 6963 745d 5d3a 0020 2020  str, dict]]:.   
-0000f290: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000f2a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000f2b0: 656c 662e 5f73 7472 5f72 6570 7265 7365  elf._str_represe
-0000f2c0: 6e74 6174 696f 6e5f 666f 7228 2261 6c69  ntation_for("ali
-0000f2d0: 6173 2229 0020 2020 2020 2020 2022 2222  as").        """
-0000f2e0: 7374 7220 6469 7370 6c61 792d 616c 6961  str display-alia
-0000f2f0: 7320 666f 7220 7468 6973 2065 6c65 6d65  s for this eleme
-0000f300: 6e74 2e22 2222 0020 2020 2064 6566 2061  nt.""".    def a
-0000f310: 6c69 6173 2873 656c 6629 202d 3e20 7374  lias(self) -> st
-0000f320: 723a 0020 2020 2040 6c61 7a79 7072 6f70  r:.    @lazyprop
-0000f330: 6572 7479 0000 2020 2020 2020 2020 7365  erty..        se
-0000f340: 6c66 2e5f 656c 656d 656e 745f 7472 616e  lf._element_tran
-0000f350: 7366 6f72 6d73 203d 2065 6c65 6d65 6e74  sforms = element
-0000f360: 5f74 7261 6e73 666f 726d 7300 2020 2020  _transforms.    
-0000f370: 2020 2020 7365 6c66 2e5f 696e 6465 7820      self._index 
-0000f380: 3d20 696e 6465 7800 2020 2020 2020 2020  = index.        
-0000f390: 7365 6c66 2e5f 656c 656d 656e 745f 6469  self._element_di
-0000f3a0: 6374 203d 2065 6c65 6d65 6e74 5f64 6963  ct = element_dic
-0000f3b0: 7400 2020 2020 6465 6620 5f5f 696e 6974  t.    def __init
-0000f3c0: 5f5f 2873 656c 662c 2065 6c65 6d65 6e74  __(self, element
-0000f3d0: 5f64 6963 742c 2069 6e64 6578 2c20 656c  _dict, index, el
-0000f3e0: 656d 656e 745f 7472 616e 7366 6f72 6d73  ement_transforms
-0000f3f0: 293a 0000 2020 2020 2222 2200 2020 2020  ):..    """.    
-0000f400: 5468 6973 206f 626a 6563 7420 7265 736f  This object reso
-0000f410: 6c76 6573 2074 6865 2074 7261 6e73 666f  lves the transfo
-0000f420: 726d 2063 6173 6361 6465 2066 6f72 2065  rm cascade for e
-0000f430: 6c65 6d65 6e74 2d6c 6576 656c 2074 7261  lement-level tra
-0000f440: 6e73 666f 726d 732e 0000 2020 2020 2222  nsforms...    ""
-0000f450: 2241 2063 6174 6567 6f72 7920 6f72 2073  "A category or s
-0000f460: 7562 7661 7269 6162 6c65 206f 6620 6120  ubvariable of a 
-0000f470: 6469 6d65 6e73 696f 6e2e 0063 6c61 7373  dimension..class
-0000f480: 205f 456c 656d 656e 743a 0000 0020 2020   _Element:...   
-0000f490: 2020 2020 2029 0020 2020 2020 2020 2020       ).         
-0000f4a0: 2020 2066 6f72 2065 6c65 6d65 6e74 2069     for element i
-0000f4b0: 6e20 7365 6c66 2e5f 6469 6d65 6e73 696f  n self._dimensio
-0000f4c0: 6e5f 6469 6374 5b22 7479 7065 225d 5b22  n_dict["type"]["
-0000f4d0: 656c 656d 656e 7473 225d 0020 2020 2020  elements"].     
-0000f4e0: 2020 2020 2020 2065 6c65 6d65 6e74 5b22         element["
-0000f4f0: 7661 6c75 6522 5d5b 2269 6422 5d00 2020  value"]["id"].  
-0000f500: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-0000f510: 6c65 2800 2020 2020 2020 2020 2222 2200  le(.        """.
-0000f520: 2020 2020 2020 2020 4f6e 6c79 2061 7070          Only app
-0000f530: 6c69 6361 626c 6520 746f 2073 7562 7661  licable to subva
-0000f540: 7269 6162 6c65 7320 6469 6d65 6e73 696f  riables dimensio
-0000f550: 6e20 2877 696c 6c20 7261 6973 6520 4b65  n (will raise Ke
-0000f560: 7945 7272 6f72 2069 6620 6e6f 7429 2e00  yError if not)..
-0000f570: 0020 2020 2020 2020 2022 2222 7475 706c  .        """tupl
-0000f580: 6520 6f66 2073 7472 2073 7562 7661 7269  e of str subvari
-0000f590: 6162 6c65 2069 6420 666f 7220 6561 6368  able id for each
-0000f5a0: 2065 6c65 6d65 6e74 206f 6620 6120 7375   element of a su
-0000f5b0: 6276 6172 6961 626c 6520 6469 6d65 6e73  bvariable dimens
-0000f5c0: 696f 6e00 2020 2020 6465 6620 5f73 7562  ion.    def _sub
-0000f5d0: 7661 725f 6964 7328 7365 6c66 2920 2d3e  var_ids(self) ->
-0000f5e0: 2054 7570 6c65 5b55 6e69 6f6e 5b69 6e74   Tuple[Union[int
-0000f5f0: 2c20 7374 725d 2c20 2e2e 2e5d 3a00 2020  , str], ...]:.  
-0000f600: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-0000f610: 0020 2020 2020 2020 2029 0020 2020 2020  .        ).     
-0000f620: 2020 2020 2020 2066 6f72 2065 6c65 6d65         for eleme
-0000f630: 6e74 2069 6e20 7365 6c66 2e5f 6469 6d65  nt in self._dime
-0000f640: 6e73 696f 6e5f 6469 6374 5b22 7479 7065  nsion_dict["type
-0000f650: 225d 5b22 656c 656d 656e 7473 225d 0020  "]["elements"]. 
-0000f660: 2020 2020 2020 2020 2020 2065 6c65 6d65             eleme
-0000f670: 6e74 2e67 6574 2822 7661 6c75 6522 2c20  nt.get("value", 
-0000f680: 7b7d 292e 6765 7428 2272 6566 6572 656e  {}).get("referen
-0000f690: 6365 7322 2c20 7b7d 292e 6765 7428 2261  ces", {}).get("a
-0000f6a0: 6c69 6173 222c 2065 6c65 6d65 6e74 5b22  lias", element["
-0000f6b0: 6964 225d 2900 2020 2020 2020 2020 7265  id"]).        re
-0000f6c0: 7475 726e 2074 7570 6c65 2800 2020 2020  turn tuple(.    
-0000f6d0: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-0000f6e0: 6669 7874 7572 652c 2062 7574 2049 2064  fixture, but I d
-0000f6f0: 6f6e 2774 2074 6869 6e6b 2069 7420 6361  on't think it ca
-0000f700: 6e20 6861 7070 656e 2069 6e20 7072 6f64  n happen in prod
-0000f710: 7563 7469 6f6e 2061 6e79 6d6f 7265 2e29  uction anymore.)
-0000f720: 0020 2020 2020 2020 2046 616c 6c20 6261  .        Fall ba
-0000f730: 636b 2074 6f20 7468 6520 6065 6c65 6d65  ck to the `eleme
-0000f740: 6e74 5f69 6460 2069 6620 7468 6520 616c  nt_id` if the al
-0000f750: 6961 7320 646f 6573 6e27 7420 6578 6973  ias doesn't exis
-0000f760: 7420 2874 6869 7320 6861 7070 656e 7320  t (this happens 
-0000f770: 696e 206f 6e65 0000 2020 2020 2020 2020  in one..        
-0000f780: 2222 2274 7570 6c65 206f 6620 7374 7220  """tuple of str 
-0000f790: 616c 6961 7320 666f 7220 6561 6368 2065  alias for each e
-0000f7a0: 6c65 6d65 6e74 206f 6620 6120 7375 6276  lement of a subv
-0000f7b0: 6172 6961 626c 6520 6469 6d65 6e73 696f  ariable dimensio
-0000f7c0: 6e00 2020 2020 6465 6620 5f73 7562 7661  n.    def _subva
-0000f7d0: 725f 616c 6961 7365 7328 7365 6c66 2920  r_aliases(self) 
-0000f7e0: 2d3e 2054 7570 6c65 5b73 7472 2c20 2e2e  -> Tuple[str, ..
-0000f7f0: 2e5d 3a00 2020 2020 406c 617a 7970 726f  .]:.    @lazypro
-0000f800: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-0000f810: 6574 7572 6e20 5b73 656c 662e 7472 616e  eturn [self.tran
-0000f820: 736c 6174 655f 656c 656d 656e 745f 6964  slate_element_id
-0000f830: 285f 6964 2920 666f 7220 5f69 6420 696e  (_id) for _id in
-0000f840: 2065 6c65 6d65 6e74 5f69 6473 5d00 2020   element_ids].  
-0000f850: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-0000f860: 2020 6d61 6e79 2064 6966 6665 7265 6e74    many different
-0000f870: 2077 6179 732c 2074 6869 7320 7472 616e   ways, this tran
-0000f880: 736c 6174 6520 7468 656d 2074 6f20 7468  slate them to th
-0000f890: 6520 7375 6276 6172 6961 626c 6520 616c  e subvariable al
-0000f8a0: 6961 7365 732e 0020 2020 2020 2020 2054  iases..        T
-0000f8b0: 6865 2065 7870 6c69 6369 7420 6f72 6465  he explicit orde
-0000f8c0: 7220 7472 616e 7366 6f72 6d20 696e 636c  r transform incl
-0000f8d0: 7564 6573 2061 206c 6973 7420 6f66 2069  udes a list of i
-0000f8e0: 6473 2074 6861 7420 6361 6e20 6265 2073  ds that can be s
-0000f8f0: 7065 6369 6669 6564 2069 6e00 0020 2020  pecified in..   
-0000f900: 2020 2020 2022 2222 5265 706c 6163 6520       """Replace 
-0000f910: 7468 6520 6c69 7374 206f 6620 656c 656d  the list of elem
-0000f920: 656e 7420 6964 7320 7769 7468 2061 206c  ent ids with a l
-0000f930: 6973 7420 6f66 2061 6c69 6173 6573 0020  ist of aliases. 
-0000f940: 2020 2064 6566 205f 7265 706c 6163 6564     def _replaced
-0000f950: 5f6f 7264 6572 5f65 6c65 6d65 6e74 5f69  _order_element_i
-0000f960: 6473 2873 656c 662c 2065 6c65 6d65 6e74  ds(self, element
-0000f970: 5f69 6473 2920 2d3e 204c 6973 745b 4f70  _ids) -> List[Op
-0000f980: 7469 6f6e 616c 5b73 7472 5d5d 3a00 0020  tional[str]]:.. 
-0000f990: 2020 2020 2020 207d 0020 2020 2020 2020         }.       
-0000f9a0: 2020 2020 2069 6620 6e6b 6579 2069 7320       if nkey is 
-0000f9b0: 6e6f 7420 4e6f 6e65 0020 2020 2020 2020  not None.       
-0000f9c0: 2020 2020 2066 6f72 2069 2c20 6e6b 6579       for i, nkey
-0000f9d0: 2069 6e20 656e 756d 6572 6174 6528 6e65   in enumerate(ne
-0000f9e0: 775f 6b65 7973 2900 2020 2020 2020 2020  w_keys).        
-0000f9f0: 2020 2020 6e6b 6579 3a20 656c 656d 656e      nkey: elemen
-0000fa00: 745f 7472 616e 7366 6f72 6d73 5b6f 6c64  t_transforms[old
-0000fa10: 5f6b 6579 735b 695d 5d00 2020 2020 2020  _keys[i]].      
-0000fa20: 2020 7265 7475 726e 207b 0000 2020 2020    return {..    
-0000fa30: 2020 2020 2020 2020 6e65 775f 6b65 7973          new_keys
-0000fa40: 203d 2074 7570 6c65 2873 656c 662e 7472   = tuple(self.tr
-0000fa50: 616e 736c 6174 655f 656c 656d 656e 745f  anslate_element_
-0000fa60: 6964 285f 6964 2920 666f 7220 5f69 6420  id(_id) for _id 
-0000fa70: 696e 206f 6c64 5f6b 6579 7329 0020 2020  in old_keys).   
-0000fa80: 2020 2020 2020 2020 2023 202d 2d2d 204f           # --- O
-0000fa90: 7468 6572 7769 7365 2075 7365 2075 7375  therwise use usu
-0000faa0: 616c 2074 7261 6e73 6c61 7469 6f6e 206c  al translation l
-0000fab0: 6f67 6963 0020 2020 2020 2020 2065 6c73  ogic.        els
-0000fac0: 653a 0020 2020 2020 2020 2020 2020 2029  e:.            )
-0000fad0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000fae0: 2066 6f72 205f 6964 2069 6e20 6f6c 645f   for _id in old_
-0000faf0: 6b65 7973 0020 2020 2020 2020 2020 2020  keys.           
-0000fb00: 2020 2020 2065 6c73 6520 4e6f 6e65 0020       else None. 
-0000fb10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000fb20: 6620 5f69 6420 696e 2073 656c 662e 5f73  f _id in self._s
-0000fb30: 7562 7661 725f 6964 7300 2020 2020 2020  ubvar_ids.      
-0000fb40: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-0000fb50: 7375 6276 6172 5f61 6c69 6173 6573 5b73  subvar_aliases[s
-0000fb60: 656c 662e 5f73 7562 7661 725f 6964 732e  elf._subvar_ids.
-0000fb70: 696e 6465 7828 5f69 6429 5d00 2020 2020  index(_id)].    
-0000fb80: 2020 2020 2020 2020 6e65 775f 6b65 7973          new_keys
-0000fb90: 203d 2074 7570 6c65 2800 2020 2020 2020   = tuple(.      
-0000fba0: 2020 2020 2020 2320 2d2d 2d20 7472 616e        # --- tran
-0000fbb0: 736c 6174 6520 6672 6f6d 2073 7562 7661  slate from subva
-0000fbc0: 7269 6162 6c65 2069 6400 2020 2020 2020  riable id.      
-0000fbd0: 2020 6966 206b 6579 203d 3d20 2273 7562    if key == "sub
-0000fbe0: 7661 725f 6964 223a 0000 2020 2020 2020  var_id":..      
-0000fbf0: 2020 6f6c 645f 6b65 7973 203d 2074 7570    old_keys = tup
-0000fc00: 6c65 2865 6c65 6d65 6e74 5f74 7261 6e73  le(element_trans
-0000fc10: 666f 726d 732e 6b65 7973 2829 2900 0020  forms.keys()).. 
-0000fc20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000fc30: 6e20 656c 656d 656e 745f 7472 616e 7366  n element_transf
-0000fc40: 6f72 6d73 0020 2020 2020 2020 2020 2020  orms.           
-0000fc50: 2023 202d 2d2d 2041 6c72 6561 6479 206b   # --- Already k
-0000fc60: 6579 6564 2062 7920 616c 6961 732c 206e  eyed by alias, n
-0000fc70: 6f20 6368 616e 6765 7320 6e65 6564 6564  o changes needed
-0000fc80: 0020 2020 2020 2020 2069 6620 6b65 7920  .        if key 
-0000fc90: 3d3d 2022 616c 6961 7322 3a00 2020 2020  == "alias":.    
-0000fca0: 2020 2020 6b65 7920 3d20 656c 656d 656e      key = elemen
-0000fcb0: 745f 7472 616e 7366 6f72 6d73 2e67 6574  t_transforms.get
-0000fcc0: 2822 6b65 7922 2900 2020 2020 2020 2020  ("key").        
-0000fcd0: 2320 2d2d 2d20 6f6e 2074 6865 2064 6563  # --- on the dec
-0000fce0: 6b20 7363 6865 6d61 2c20 736f 206d 6179  k schema, so may
-0000fcf0: 6265 2077 6520 7368 6f75 6c64 2072 656d  be we should rem
-0000fd00: 6f76 6520 6974 3f00 2020 2020 2020 2020  ove it?.        
-0000fd10: 2320 2d2d 2d20 544f 444f 3a20 5468 6973  # --- TODO: This
-0000fd20: 206c 6f67 6963 2061 626f 7574 2022 6b65   logic about "ke
-0000fd30: 7922 2069 7320 6e6f 7420 7375 7070 6f72  y" is not suppor
-0000fd40: 7465 6420 6279 2074 6865 2076 616c 6964  ted by the valid
-0000fd50: 6174 696f 6e00 2020 2020 2020 2020 2320  ation.        # 
-0000fd60: 2d2d 2d20 656c 656d 656e 745f 6964 0020  --- element_id. 
-0000fd70: 2020 2020 2020 2023 202d 2d2d 2073 7562         # --- sub
-0000fd80: 7661 7269 6162 6c65 2069 7320 666f 756e  variable is foun
-0000fd90: 6420 7769 7468 2074 6865 2069 642c 2069  d with the id, i
-0000fda0: 6e20 7768 6963 6820 6361 7365 2069 7427  n which case it'
-0000fdb0: 7320 6173 7375 6d65 6420 746f 2062 6520  s assumed to be 
-0000fdc0: 7468 6500 2020 2020 2020 2020 2320 2d2d  the.        # --
-0000fdd0: 2d20 6361 6e20 6265 2022 616c 6961 7322  - can be "alias"
-0000fde0: 2c20 696e 2077 6869 6368 2063 6173 6520  , in which case 
-0000fdf0: 6974 2072 6566 6572 7320 746f 2074 6865  it refers to the
-0000fe00: 2061 6c69 6173 2c20 6f72 2069 6620 6e6f   alias, or if no
-0000fe10: 0020 2020 2020 2020 2023 202d 2d2d 2061  .        # --- a
-0000fe20: 7373 756d 6564 2074 6f20 7265 6665 7220  ssumed to refer 
-0000fe30: 746f 2074 6865 2073 7562 7661 7269 6162  to the subvariab
-0000fe40: 6c65 2069 642c 2075 6e6c 6573 7320 7468  le id, unless th
-0000fe50: 6572 6520 6973 2061 2022 6b65 7922 2c20  ere is a "key", 
-0000fe60: 7768 6963 6800 2020 2020 2020 2020 2320  which.        # 
-0000fe70: 2d2d 2d20 5468 6520 6e61 6d65 206f 6620  --- The name of 
-0000fe80: 7468 6520 656c 656d 656e 7420 7472 616e  the element tran
-0000fe90: 7366 6f72 6d20 6f62 6a65 6374 2069 7320  sform object is 
-0000fea0: 6120 7374 7269 6e67 2e20 5468 6973 2073  a string. This s
-0000feb0: 7472 696e 6720 6973 0020 2020 2020 2020  tring is.       
-0000fec0: 2022 2222 0020 2020 2020 2020 2069 6e20   """.        in 
-0000fed0: 6d61 6e79 2064 6966 6665 7265 6e74 2077  many different w
-0000fee0: 6179 732e 2054 6865 2073 6869 6d20 7265  ays. The shim re
-0000fef0: 706c 6163 6573 2074 6865 7365 2077 6974  places these wit
-0000ff00: 6820 7468 6520 616c 6961 732e 0020 2020  h the alias..   
-0000ff10: 2020 2020 2074 6865 2065 6c65 6d65 6e74       the element
-0000ff20: 5f74 7261 6e73 666f 726d 7320 6f62 6a65  _transforms obje
-0000ff30: 6374 2e20 4265 666f 7265 2069 7420 6973  ct. Before it is
-0000ff40: 2073 6869 6d6d 6564 2c20 7468 6973 2063   shimmed, this c
-0000ff50: 616e 2069 6465 6e74 6966 7920 7468 656d  an identify them
-0000ff60: 0020 2020 2020 2020 2054 6865 2065 6c65  .        The ele
-0000ff70: 6d65 6e74 2074 7261 6e73 666f 726d 7320  ment transforms 
-0000ff80: 6964 656e 7469 6679 2077 6869 6368 2065  identify which e
-0000ff90: 6c65 6d65 6e74 2074 6865 7920 7265 6665  lement they refe
-0000ffa0: 7220 746f 2062 7920 7468 6569 7220 6b65  r to by their ke
-0000ffb0: 7920 696e 0000 2020 2020 2020 2020 2222  y in..        ""
-0000ffc0: 2252 6570 6c61 6365 2074 6865 2064 6963  "Replace the dic
-0000ffd0: 7469 6f6e 6172 7920 6b65 7973 206f 6620  tionary keys of 
-0000ffe0: 656c 656d 656e 7420 7472 616e 7366 6f72  element transfor
-0000fff0: 6d73 2077 6974 6820 616c 6961 7365 7300  ms with aliases.
-00010000: 6164 0000 1a00 0000 aa01 0000 0010 0000  ad..............
-00010010: 5d00 0000 0000 0000 a90f 0000 a80f 0000  ]...............
-00010020: 960f 0000 750f 0000 360f 0000 0e0f 0000  ....u...6.......
-00010030: 0d0f 0000 fb0e 0000 dc0e 0000 a40e 0000  ................
-00010040: a30e 0000 510e 0000 450e 0000 150e 0000  ....Q...E.......
-00010050: e00d 0000 c70d 0000 9c0d 0000 9b0d 0000  ................
-00010060: 890d 0000 6e0d 0000 2c0d 0000 2b0d 0000  ....n...,...+...
-00010070: d70c 0000 800c 0000 380c 0000 2c0c 0000  ........8...,...
-00010080: d40b 0000 830b 0000 560b 0000 550b 0000  ........V...U...
-00010090: 430b 0000 270b 0000 e50a 0000 e40a 0000  C...'...........
-000100a0: 970a 0000 500a 0000 440a 0000 290a 0000  ....P...D...)...
-000100b0: 280a 0000 160a 0000 f509 0000 ab09 0000  (...............
-000100c0: 6309 0000 0b09 0000 b508 0000 b408 0000  c...............
-000100d0: a208 0000 8608 0000 5808 0000 5708 0000  ........X...W...
-000100e0: 0108 0000 db07 0000 cf07 0000 9b07 0000  ................
-000100f0: 9a07 0000 8807 0000 6907 0000 3007 0000  ........i...0...
-00010100: 2f07 0000 e406 0000 d606 0000 ca06 0000  /...............
-00010110: 9306 0000 9206 0000 8006 0000 4e06 0000  ............N...
-00010120: 0306 0000 c305 0000 8105 0000 8005 0000  ................
-00010130: 4805 0000 ef04 0000 ee04 0000 a304 0000  H...............
-00010140: 5d04 0000 5104 0000 0e04 0000 bc03 0000  ]...Q...........
-00010150: 9e03 0000 7403 0000 7303 0000 1a03 0000  ....t...s.......
-00010160: f002 0000 ef02 0000 a102 0000 8102 0000  ................
-00010170: 5b02 0000 3102 0000 3002 0000 ff01 0000  [...1...0.......
-00010180: d501 0000 ab01 0000 aa01 0000 a901 0000  ................
-00010190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101a0: 0000 0000 0000 0000 0000 0020 2020 2020  ...........     
-000101b0: 2020 2074 7970 655f 7661 6c75 6520 3d20     type_value = 
-000101c0: 7479 7065 2876 616c 7565 292e 5f5f 6e61  type(value).__na
-000101d0: 6d65 5f5f 0020 2020 2020 2020 2076 616c  me__.        val
-000101e0: 7565 203d 2065 6c65 6d65 6e74 5f64 6963  ue = element_dic
-000101f0: 742e 6765 7428 2276 616c 7565 2229 0020  t.get("value"). 
-00010200: 2020 2020 2020 2023 202d 2d2d 6f74 6865         # ---othe
-00010210: 7220 7479 7065 7320 6172 6520 6d6f 7265  r types are more
-00010220: 2063 6f6d 706c 6963 6174 6564 2d2d 2d00   complicated---.
-00010230: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-00010240: 7572 6e20 7661 6c75 6520 6966 2076 616c  urn value if val
-00010250: 7565 2065 6c73 6520 2222 0020 2020 2020  ue else "".     
-00010260: 2020 2020 2020 2076 616c 7565 203d 2065         value = e
-00010270: 6c65 6d65 6e74 5f64 6963 745b 6b65 795d  lement_dict[key]
-00010280: 0020 2020 2020 2020 2069 6620 6b65 7920  .        if key 
-00010290: 696e 2065 6c65 6d65 6e74 5f64 6963 743a  in element_dict:
-000102a0: 0020 2020 2020 2020 2023 202d 2d2d 6361  .        # ---ca
-000102b0: 7465 676f 7279 2065 6c65 6d65 6e74 7320  tegory elements 
-000102c0: 6861 7665 2061 206e 616d 652f 616c 6961  have a name/alia
-000102d0: 7320 6974 656d 2061 6363 6f72 6469 6e67  s item according
-000102e0: 2074 6f20 7468 6520 6b65 792d 2d2d 0000   to the key---..
-000102f0: 2020 2020 2020 2020 656c 656d 656e 745f          element_
-00010300: 6469 6374 203d 2073 656c 662e 5f65 6c65  dict = self._ele
-00010310: 6d65 6e74 5f64 6963 7400 2020 2020 2020  ment_dict.      
-00010320: 2020 2320 2d2d 2d6f 7468 6572 7769 7365    # ---otherwise
-00010330: 2062 6173 652d 6e61 6d65 2f61 6c69 6173   base-name/alias
-00010340: 2066 726f 6d20 656c 656d 656e 742d 6469   from element-di
-00010350: 6374 2069 7320 7573 6564 2061 6363 6f72  ct is used accor
-00010360: 6469 6e67 2074 6f20 7468 6520 6b65 792d  ding to the key-
-00010370: 2d2d 0000 2020 2020 2020 2020 2020 2020  --..            
-00010380: 7265 7475 726e 2076 616c 7565 2069 6620  return value if 
-00010390: 7661 6c75 6520 656c 7365 2022 2200 2020  value else "".  
-000103a0: 2020 2020 2020 6966 2076 616c 7565 2069        if value i
-000103b0: 7320 6e6f 7420 4e6f 6e65 3a00 2020 2020  s not None:.    
-000103c0: 2020 2020 7661 6c75 6520 3d20 6765 7461      value = geta
-000103d0: 7474 7228 7365 6c66 2e5f 656c 656d 656e  ttr(self._elemen
-000103e0: 745f 7472 616e 7366 6f72 6d73 2c20 6b65  t_transforms, ke
-000103f0: 7929 2069 6620 6b65 7920 3d3d 2022 6e61  y) if key == "na
-00010400: 6d65 2220 656c 7365 204e 6f6e 6500 2020  me" else None.  
-00010410: 2020 2020 2020 2320 2d2d 2d66 6972 7374        # ---first
-00010420: 2061 7574 686f 7269 7479 2069 7320 7472   authority is tr
-00010430: 616e 7366 6f72 6d20 696e 2065 6c65 6d65  ansform in eleme
-00010440: 6e74 2074 7261 6e73 666f 726d 732d 2d2d  nt transforms---
-00010450: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-00010460: 2020 2020 2063 6174 6567 6f72 6963 616c       categorical
-00010470: 2c20 6172 7261 7920 2873 7562 7661 7269  , array (subvari
-00010480: 6162 6c65 292c 206e 756d 6572 6963 2c20  able), numeric, 
-00010490: 6461 7465 7469 6d65 2061 6e64 2074 6578  datetime and tex
-000104a0: 742e 0020 2020 2020 2020 2054 6869 7320  t..        This 
-000104b0: 6d65 7468 6f64 2068 616e 646c 6573 2065  method handles e
-000104c0: 6c65 6d65 6e74 7320 666f 7220 7661 7269  lements for vari
-000104d0: 6162 6c65 7320 6f66 2061 6c6c 2074 7970  ables of all typ
-000104e0: 6573 2c20 696e 636c 7564 696e 6700 0020  es, including.. 
-000104f0: 2020 2020 2020 2022 2222 7265 7475 726e         """return
-00010500: 2073 7472 2072 6570 7265 7365 6e74 6174   str representat
-00010510: 696f 6e20 666f 7220 7468 6973 2065 6c65  ion for this ele
-00010520: 6d65 6e74 206f 6620 6120 6769 7665 6e20  ment of a given 
-00010530: 6b65 7920 2860 616c 6961 7360 206f 7220  key (`alias` or 
-00010540: 606e 616d 6560 2900 2020 2020 6465 6620  `name`).    def 
-00010550: 5f73 7472 5f72 6570 7265 7365 6e74 6174  _str_representat
-00010560: 696f 6e5f 666f 7228 7365 6c66 2c20 6b65  ion_for(self, ke
-00010570: 793a 2073 7472 2920 2d3e 2073 7472 3a00  y: str) -> str:.
-00010580: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00010590: 6e70 2e6e 616e 2069 6620 6e75 6d65 7269  np.nan if numeri
-000105a0: 635f 7661 6c75 6520 6973 204e 6f6e 6520  c_value is None 
-000105b0: 656c 7365 206e 756d 6572 6963 5f76 616c  else numeric_val
-000105c0: 7565 0020 2020 2020 2020 206e 756d 6572  ue.        numer
-000105d0: 6963 5f76 616c 7565 203d 2073 656c 662e  ic_value = self.
-000105e0: 5f65 6c65 6d65 6e74 5f64 6963 742e 6765  _element_dict.ge
-000105f0: 7428 226e 756d 6572 6963 5f76 616c 7565  t("numeric_value
-00010600: 2229 0020 2020 2020 2020 2022 2222 4e75  ").        """Nu
-00010610: 6d65 7269 6320 7661 6c75 6520 6173 7369  meric value assi
-00010620: 676e 6564 2074 6f20 656c 656d 656e 7420  gned to element 
-00010630: 6279 2075 7365 722c 206e 702e 6e61 6e20  by user, np.nan 
-00010640: 6966 2061 6273 656e 742e 2222 2200 2020  if absent.""".  
-00010650: 2020 6465 6620 6e75 6d65 7269 635f 7661    def numeric_va
-00010660: 6c75 6528 7365 6c66 2920 2d3e 2055 6e69  lue(self) -> Uni
-00010670: 6f6e 5b69 6e74 2c20 666c 6f61 745d 3a00  on[int, float]:.
-00010680: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00010690: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-000106a0: 6e20 626f 6f6c 2873 656c 662e 5f65 6c65  n bool(self._ele
-000106b0: 6d65 6e74 5f64 6963 742e 6765 7428 226d  ment_dict.get("m
-000106c0: 6973 7369 6e67 2229 2900 2020 2020 2020  issing")).      
-000106d0: 2020 2222 2200 2020 2020 2020 2020 6461    """.        da
-000106e0: 7461 2e00 2020 2020 2020 2020 4661 6c73  ta..        Fals
-000106f0: 6520 6966 2074 6869 7320 6361 7465 676f  e if this catego
-00010700: 7279 206f 7220 7375 6276 6172 6961 626c  ry or subvariabl
-00010710: 6520 7265 7072 6573 656e 7473 2076 616c  e represents val
-00010720: 6964 2028 636f 6c6c 6563 7465 6429 0000  id (collected)..
-00010730: 2020 2020 2020 2020 2222 2254 7275 6520          """True 
-00010740: 6966 2074 6869 7320 656c 656d 656e 7420  if this element 
-00010750: 7265 7072 6573 656e 7473 206d 6973 7369  represents missi
-00010760: 6e67 2064 6174 612e 0020 2020 2064 6566  ng data..    def
-00010770: 206d 6973 7369 6e67 2873 656c 6629 202d   missing(self) -
-00010780: 3e20 626f 6f6c 3a00 2020 2020 406c 617a  > bool:.    @laz
-00010790: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-000107a0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-000107b0: 7374 725f 7265 7072 6573 656e 7461 7469  str_representati
-000107c0: 6f6e 5f66 6f72 2822 6e61 6d65 2229 0020  on_for("name"). 
-000107d0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-000107e0: 2020 2074 6865 206e 616d 6520 6861 7320     the name has 
-000107f0: 6265 656e 2073 7570 7072 6573 7365 642e  been suppressed.
-00010800: 0020 2020 2020 2020 2054 6869 7320 7661  .        This va
-00010810: 6c75 6520 6973 2074 6865 2065 6d70 7479  lue is the empty
-00010820: 2073 7472 696e 6720 7768 656e 206e 6f20   string when no 
-00010830: 7661 6c75 6520 6861 7320 6265 656e 2073  value has been s
-00010840: 7065 6369 6669 6564 206f 7220 6469 7370  pecified or disp
-00010850: 6c61 7920 6f66 0000 2020 2020 2020 2020  lay of..        
-00010860: 2222 2273 7472 2064 6973 706c 6179 2d6e  """str display-n
-00010870: 616d 6520 666f 7220 7468 6973 2065 6c65  ame for this ele
-00010880: 6d65 6e74 2e00 2020 2020 6465 6620 6c61  ment..    def la
-00010890: 6265 6c28 7365 6c66 2920 2d3e 2073 7472  bel(self) -> str
-000108a0: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-000108b0: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-000108c0: 7572 6e20 7b54 7275 653a 2054 7275 652c  urn {True: True,
-000108d0: 2046 616c 7365 3a20 4661 6c73 652c 204e   False: False, N
-000108e0: 6f6e 653a 2046 616c 7365 7d5b 7365 6c66  one: False}[self
-000108f0: 2e5f 656c 656d 656e 745f 7472 616e 7366  ._element_transf
-00010900: 6f72 6d73 2e68 6964 655d 0020 2020 2020  orms.hide].     
-00010910: 2020 2023 202d 2d2d 6465 6661 756c 7420     # ---default 
-00010920: 6973 206e 6f74 2068 6964 6465 6e2c 2074  is not hidden, t
-00010930: 6865 7265 2069 7320 6375 7272 656e 746c  here is currentl
-00010940: 7920 6e6f 2070 7269 6f72 2d6c 6576 656c  y no prior-level
-00010950: 2068 6964 6520 7472 616e 7366 6f72 6d2d   hide transform-
-00010960: 2d2d 0020 2020 2020 2020 2023 202d 2d2d  --.        # ---
-00010970: 6669 7273 7420 6175 7468 6f72 6974 7920  first authority 
-00010980: 6973 2068 6964 6520 7472 616e 7366 6f72  is hide transfor
-00010990: 6d20 696e 2065 6c65 6d65 6e74 2074 7261  m in element tra
-000109a0: 6e73 666f 726d 732d 2d2d 0020 2020 2020  nsforms---.     
-000109b0: 2020 2022 2222 5472 7565 2069 6620 7468     """True if th
-000109c0: 6973 2065 6c65 6d65 6e74 2069 7320 6578  is element is ex
-000109d0: 706c 6963 6974 6c79 2068 6964 6465 6e20  plicitly hidden 
-000109e0: 696e 2074 6869 7320 616e 616c 7973 6973  in this analysis
-000109f0: 2e22 2222 0020 2020 2064 6566 2069 735f  .""".    def is_
-00010a00: 6869 6464 656e 2873 656c 6629 202d 3e20  hidden(self) -> 
-00010a10: 626f 6f6c 3a00 2020 2020 406c 617a 7970  bool:.    @lazyp
-00010a20: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00010a30: 2072 6574 7572 6e20 7365 6c66 2e5f 696e   return self._in
-00010a40: 6465 7800 2020 2020 2020 2020 2222 2200  dex.        """.
-00010a50: 2020 2020 2020 2020 7468 6520 6375 6265          the cube
-00010a60: 2072 6573 706f 6e73 652e 204e 6f20 6164   response. No ad
-00010a70: 6a75 7374 6d65 6e74 2066 6f72 206d 6973  justment for mis
-00010a80: 7369 6e67 2065 6c65 6d65 6e74 7320 6973  sing elements is
-00010a90: 206d 6164 652e 0020 2020 2020 2020 2054   made..        T
-00010aa0: 6869 7320 706f 7369 7469 6f6e 2069 7320  his position is 
-00010ab0: 6261 7365 6420 7570 6f6e 2074 6865 2064  based upon the d
-00010ac0: 6f63 756d 656e 7420 706f 7369 7469 6f6e  ocument position
-00010ad0: 206f 6620 7468 6973 2065 6c65 6d65 6e74   of this element
-00010ae0: 2069 6e00 0020 2020 2020 2020 2022 2222   in..        """
-00010af0: 696e 7420 6f66 6673 6574 2061 7420 7768  int offset at wh
-00010b00: 6963 6820 7468 6973 2065 6c65 6d65 6e74  ich this element
-00010b10: 2061 7070 6561 7273 2069 6e20 6469 6d65   appears in dime
-00010b20: 6e73 696f 6e2e 0020 2020 2064 6566 2069  nsion..    def i
-00010b30: 6e64 6578 2873 656c 6629 202d 3e20 696e  ndex(self) -> in
-00010b40: 743a 0020 2020 2040 6c61 7a79 7072 6f70  t:.    @lazyprop
-00010b50: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-00010b60: 7475 726e 2073 656c 662e 5f65 6c65 6d65  turn self._eleme
-00010b70: 6e74 5f74 7261 6e73 666f 726d 732e 6669  nt_transforms.fi
-00010b80: 6c6c 0020 2020 2020 2020 2023 202d 2d2d  ll.        # ---
-00010b90: 7468 6520 6f6e 6c79 2070 7269 6f72 2061  the only prior a
-00010ba0: 7574 686f 7269 7479 2061 6e64 2074 6861  uthority and tha
-00010bb0: 7420 6973 204e 6f6e 6520 2875 7365 2064  t is None (use d
-00010bc0: 6566 6175 6c74 2066 696c 6c20 636f 6c6f  efault fill colo
-00010bd0: 7229 2e00 2020 2020 2020 2020 2320 2d2d  r)..        # --
-00010be0: 2d66 6972 7374 2061 7574 686f 7269 7479  -first authority
-00010bf0: 2069 7320 6669 6c6c 2074 7261 6e73 666f   is fill transfo
-00010c00: 726d 2069 6e20 656c 656d 656e 7420 7472  rm in element tr
-00010c10: 616e 7366 6f72 6d73 2e20 5468 6520 6261  ansforms. The ba
-00010c20: 7365 2076 616c 7565 2069 7300 2020 2020  se value is.    
-00010c30: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00010c40: 5468 7265 652d 6368 6172 6163 7465 7220  Three-character 
-00010c50: 636f 6c6f 7220 636f 6e74 7261 6374 696f  color contractio
-00010c60: 6e73 2028 6c69 6b65 2022 2344 3037 2229  ns (like "#D07")
-00010c70: 2061 7265 206e 6f74 2076 616c 6964 2e00   are not valid..
-00010c80: 2020 2020 2020 2020 4120 7374 7220 7661          A str va
-00010c90: 6c75 6520 6d75 7374 2062 6520 6120 6861  lue must be a ha
-00010ca0: 7368 2063 6861 7261 6374 6572 2028 2223  sh character ("#
-00010cb0: 2229 2066 6f6c 6c6f 7765 6420 6279 2073  ") followed by s
-00010cc0: 6978 2068 6578 6164 6563 696d 616c 2064  ix hexadecimal d
-00010cd0: 6967 6974 732e 0020 2020 2020 2020 2041  igits..        A
-00010ce0: 2076 616c 7565 206f 6620 4e6f 6e65 2069   value of None i
-00010cf0: 6e64 6963 6174 6573 2074 6865 2064 6566  ndicates the def
-00010d00: 6175 6c74 2066 696c 6c20 7368 6f75 6c64  ault fill should
-00010d10: 2062 6520 7573 6564 2066 6f72 2074 6869   be used for thi
-00010d20: 7320 656c 656d 656e 742e 0000 2020 2020  s element...    
-00010d30: 2020 2020 2222 2273 7472 2052 4742 2063      """str RGB c
-00010d40: 6f6c 6f72 206c 696b 6520 2223 6166 3033  olor like "#af03
-00010d50: 3264 2220 6f72 204e 6f6e 6520 6966 206e  2d" or None if n
-00010d60: 6f74 2073 7065 6369 6669 6564 2e00 2020  ot specified..  
-00010d70: 2020 6465 6620 6669 6c6c 2873 656c 6629    def fill(self)
-00010d80: 202d 3e20 7374 723a 0020 2020 2040 6c61   -> str:.    @la
-00010d90: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-00010da0: 2020 2020 7265 7475 726e 2076 616c 7565      return value
-00010db0: 2e67 6574 2822 6465 7269 7665 6422 2c20  .get("derived", 
-00010dc0: 4661 6c73 6529 0020 2020 2020 2020 2020  False).         
-00010dd0: 2020 2072 6574 7572 6e20 4661 6c73 6500     return False.
-00010de0: 2020 2020 2020 2020 6966 206e 6f74 2076          if not v
-00010df0: 616c 7565 206f 7220 6e6f 7420 6973 696e  alue or not isin
-00010e00: 7374 616e 6365 2876 616c 7565 2c20 6469  stance(value, di
-00010e10: 6374 293a 0020 2020 2020 2020 2076 616c  ct):.        val
-00010e20: 7565 203d 2073 656c 662e 5f65 6c65 6d65  ue = self._eleme
-00010e30: 6e74 5f64 6963 742e 6765 7428 2276 616c  nt_dict.get("val
-00010e40: 7565 2229 0020 2020 2020 2020 2022 2222  ue").        """
-00010e50: 0020 2020 2020 2020 204d 756c 7469 706c  .        Multipl
-00010e60: 6520 5265 7370 6f6e 7365 2073 7562 7661  e Response subva
-00010e70: 7269 6162 6c65 2069 6e73 6572 7469 6f6e  riable insertion
-00010e80: 7320 6172 6520 636f 6e73 6964 6572 6564  s are considered
-00010e90: 2064 6572 6976 6564 2065 6c65 6d65 6e74   derived element
-00010ea0: 732e 0000 2020 2020 2020 2020 2222 2254  s...        """T
-00010eb0: 7275 6520 6966 2065 6c65 6d65 6e74 2069  rue if element i
-00010ec0: 7320 6465 7269 7665 642c 2046 616c 7365  s derived, False
-00010ed0: 206f 7468 6572 7769 7365 2e00 2020 2020   otherwise..    
-00010ee0: 6465 6620 6465 7269 7665 6428 7365 6c66  def derived(self
-00010ef0: 2920 2d3e 2062 6f6f 6c3a 0020 2020 2040  ) -> bool:.    @
-00010f00: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00010f10: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00010f20: 662e 5f65 6c65 6d65 6e74 5f64 6963 745b  f._element_dict[
-00010f30: 2269 6422 5d00 2020 2020 2020 2020 2222  "id"].        ""
-00010f40: 2269 6e74 2069 6465 6e74 6966 6965 7220  "int identifier 
-00010f50: 666f 7220 7468 6973 2063 6174 6567 6f72  for this categor
-00010f60: 7920 6f72 2073 7562 7661 7269 6162 6c65  y or subvariable
-00010f70: 2e22 2222 0020 2020 2064 6566 2065 6c65  .""".    def ele
-00010f80: 6d65 6e74 5f69 6428 7365 6c66 2920 2d3e  ment_id(self) ->
-00010f90: 2069 6e74 3a00 2020 2020 406c 617a 7970   int:.    @lazyp
-00010fa0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00010fb0: 2072 6574 7572 6e20 7365 6c66 2e5f 656c   return self._el
-00010fc0: 656d 656e 745f 6469 6374 2e67 6574 2822  ement_dict.get("
-00010fd0: 7661 6c75 6522 2c20 7b7d 292e 6765 7428  value", {}).get(
-00010fe0: 2272 6566 6572 656e 6365 7322 2c20 7b7d  "references", {}
-00010ff0: 292e 6765 7428 2261 6e63 686f 7222 2900  ).get("anchor").
-00011000: 6164 0000 1000 0000 bc01 0000 0010 0000  ad..............
-00011010: 6400 0000 0000 0000 db0f 0000 c50f 0000  d...............
-00011020: c40f 0000 a30f 0000 790f 0000 3e0f 0000  ........y...>...
-00011030: 3d0f 0000 120f 0000 f40e 0000 f30e 0000  =...............
-00011040: c60e 0000 ad0e 0000 ac0e 0000 7c0e 0000  ............|...
-00011050: 420e 0000 410e 0000 400e 0000 260e 0000  B...A...@...&...
-00011060: cd0d 0000 cc0d 0000 9b0d 0000 5b0d 0000  ............[...
-00011070: 5a0d 0000 480d 0000 230d 0000 e10c 0000  Z...H...#.......
-00011080: e00c 0000 8c0c 0000 350c 0000 ed0b 0000  ........5.......
-00011090: e10b 0000 e00b 0000 a70b 0000 a60b 0000  ................
-000110a0: 910b 0000 790b 0000 650b 0000 640b 0000  ....y...e...d...
-000110b0: 520b 0000 2c0b 0000 d40a 0000 d30a 0000  R...,...........
-000110c0: 810a 0000 6e0a 0000 620a 0000 290a 0000  ....n...b...)...
-000110d0: d809 0000 bf09 0000 a709 0000 8d09 0000  ................
-000110e0: 7409 0000 6009 0000 5f09 0000 4d09 0000  t...`..._...M...
-000110f0: 2809 0000 d608 0000 8d08 0000 5508 0000  (...........U...
-00011100: 3d08 0000 e707 0000 b507 0000 8007 0000  =...............
-00011110: 5707 0000 5607 0000 5507 0000 4307 0000  W...V...U...C...
-00011120: ee06 0000 ed06 0000 af06 0000 8b06 0000  ................
-00011130: 4706 0000 4606 0000 3406 0000 0106 0000  G...F...4.......
-00011140: aa05 0000 a905 0000 5605 0000 4705 0000  ........V...G...
-00011150: 3b05 0000 f104 0000 f004 0000 de04 0000  ;...............
-00011160: b804 0000 6404 0000 2e04 0000 e703 0000  ....d...........
-00011170: c303 0000 a103 0000 a003 0000 8e03 0000  ................
-00011180: 6c03 0000 2703 0000 d902 0000 d802 0000  l...'...........
-00011190: c602 0000 a502 0000 6a02 0000 6902 0000  ........j...i...
-000111a0: 1302 0000 bc01 0000 bb01 0000 0000 0000  ................
-000111b0: 0000 0000 0000 0000 0000 0000 2020 2020  ............    
-000111c0: 2020 2020 4e6f 7465 2074 6861 7420 6e6f      Note that no
-000111d0: 7420 616c 6c20 6f72 6465 7220 7479 7065  t all order type
-000111e0: 7320 7573 6520 7468 6973 2066 6965 6c64  s use this field
-000111f0: 2062 7574 2069 7420 6973 2061 2072 6571   but it is a req
-00011200: 7569 7265 6420 6669 656c 6420 696e 2061  uired field in a
-00011210: 6c6c 0020 2020 2020 2020 2052 6169 7365  ll.        Raise
-00011220: 7320 4b65 7945 7272 6f72 2069 6620 7468  s KeyError if th
-00011230: 6520 7472 616e 7366 6f72 6d20 6469 6374  e transform dict
-00011240: 2064 6f65 7320 6e6f 7420 636f 6e74 6169   does not contai
-00011250: 6e20 616e 2022 656c 656d 656e 745f 6964  n an "element_id
-00011260: 2220 6669 656c 642e 0000 2020 2020 2020  " field...      
-00011270: 2020 2222 2269 6e74 2065 6c65 6d65 6e74    """int element
-00011280: 2069 6420 6170 7065 6172 696e 6720 696e   id appearing in
-00011290: 2061 6e20 6f72 6465 7220 7472 616e 7366   an order transf
-000112a0: 6f72 6d2e 0020 2020 2064 6566 2065 6c65  orm..    def ele
-000112b0: 6d65 6e74 5f69 6428 7365 6c66 2920 2d3e  ment_id(self) ->
-000112c0: 2069 6e74 3a00 2020 2020 406c 617a 7970   int:.    @lazyp
-000112d0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-000112e0: 2072 6574 7572 6e20 7365 6c66 2e5f 6f72   return self._or
-000112f0: 6465 725f 6469 6374 2e67 6574 2822 6469  der_dict.get("di
-00011300: 7265 6374 696f 6e22 2c20 2264 6573 6365  rection", "desce
-00011310: 6e64 696e 6722 2920 213d 2022 6173 6365  nding") != "asce
-00011320: 6e64 696e 6722 0020 2020 2020 2020 2022  nding".        "
-00011330: 2222 5472 7565 2069 6620 736f 7274 2064  ""True if sort d
-00011340: 6972 6563 7469 6f6e 2069 7320 6465 7363  irection is desc
-00011350: 656e 6469 6e67 2c20 4661 6c73 6520 6f74  ending, False ot
-00011360: 6865 7277 6973 652e 2222 2200 2020 2020  herwise.""".    
-00011370: 6465 6620 6465 7363 656e 6469 6e67 2873  def descending(s
-00011380: 656c 6629 202d 3e20 626f 6f6c 3a00 2020  elf) -> bool:.  
-00011390: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-000113a0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000113b0: 434d 286d 6574 686f 645f 6b65 7977 6f72  CM(method_keywor
-000113c0: 6429 0020 2020 2020 2020 2020 2020 2072  d).            r
-000113d0: 6574 7572 6e20 434d 2e50 4159 4c4f 4144  eturn CM.PAYLOAD
-000113e0: 5f4f 5244 4552 0020 2020 2020 2020 2069  _ORDER.        i
-000113f0: 6620 6d65 7468 6f64 5f6b 6579 776f 7264  f method_keyword
-00011400: 2069 7320 4e6f 6e65 206f 7220 6e6f 7420   is None or not 
-00011410: 434d 2e68 6173 5f76 616c 7565 286d 6574  CM.has_value(met
-00011420: 686f 645f 6b65 7977 6f72 6429 3a00 2020  hod_keyword):.  
-00011430: 2020 2020 2020 6d65 7468 6f64 5f6b 6579        method_key
-00011440: 776f 7264 203d 2073 656c 662e 5f6f 7264  word = self._ord
-00011450: 6572 5f64 6963 742e 6765 7428 2274 7970  er_dict.get("typ
-00011460: 6522 2900 2020 2020 2020 2020 2222 224d  e").        """M
-00011470: 656d 6265 7220 6f66 2043 4f4c 4c41 5449  ember of COLLATI
-00011480: 4f4e 5f4d 4554 484f 4420 7370 6563 6966  ON_METHOD specif
-00011490: 7969 6e67 206f 7264 6572 696e 6720 6f66  ying ordering of
-000114a0: 2064 696d 656e 7369 6f6e 2065 6c65 6d65   dimension eleme
-000114b0: 6e74 732e 2222 2200 2020 2020 6465 6620  nts.""".    def 
-000114c0: 636f 6c6c 6174 696f 6e5f 6d65 7468 6f64  collation_method
-000114d0: 2873 656c 6629 202d 3e20 434d 3a00 2020  (self) -> CM:.  
-000114e0: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-000114f0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00011500: 7475 706c 6528 7365 6c66 2e5f 6f72 6465  tuple(self._orde
-00011510: 725f 6469 6374 2e67 6574 2822 6669 7865  r_dict.get("fixe
-00011520: 6422 2c20 7b7d 292e 6765 7428 2262 6f74  d", {}).get("bot
-00011530: 746f 6d22 2c20 5b5d 2929 0020 2020 2020  tom", [])).     
-00011540: 2020 2022 2222 0020 2020 2020 2020 2066     """.        f
-00011550: 6965 6c64 2e00 2020 2020 2020 2020 5468  ield..        Th
-00011560: 6520 656c 656d 656e 742d 6964 7320 6170  e element-ids ap
-00011570: 7065 6172 2069 6e20 7468 6520 6f72 6465  pear in the orde
-00011580: 7220 7370 6563 6966 6965 6420 696e 2074  r specified in t
-00011590: 6865 2022 626f 7474 6f6d 2220 6669 7865  he "bottom" fixe
-000115a0: 642e 626f 7474 6f6d 0000 2020 2020 2020  d.bottom..      
-000115b0: 2020 2222 2254 7570 6c65 206f 6620 6561    """Tuple of ea
-000115c0: 6368 2065 6c65 6d65 6e74 2d69 6420 6170  ch element-id ap
-000115d0: 7065 6172 696e 6720 696e 2074 6865 2066  pearing in the f
-000115e0: 6978 6564 2e62 6f74 746f 6d20 6669 656c  ixed.bottom fiel
-000115f0: 6420 6f66 206f 7264 6572 2064 6963 742e  d of order dict.
-00011600: 0020 2020 2064 6566 2062 6f74 746f 6d5f  .    def bottom_
-00011610: 6669 7865 645f 6964 7328 7365 6c66 2920  fixed_ids(self) 
-00011620: 2d3e 2054 7570 6c65 5b69 6e74 2c20 2e2e  -> Tuple[int, ..
-00011630: 2e5d 3a00 2020 2020 406c 617a 7970 726f  .]:.    @lazypro
-00011640: 7065 7274 7900 0020 2020 2020 2020 2073  perty..        s
-00011650: 656c 662e 5f64 696d 656e 7369 6f6e 5f74  elf._dimension_t
-00011660: 7261 6e73 666f 726d 735f 6469 6374 203d  ransforms_dict =
-00011670: 2064 696d 656e 7369 6f6e 5f74 7261 6e73   dimension_trans
-00011680: 666f 726d 735f 6469 6374 0020 2020 2020  forms_dict.     
-00011690: 2020 2073 656c 662e 5f64 696d 656e 7369     self._dimensi
-000116a0: 6f6e 203d 2064 696d 656e 7369 6f6e 0020  on = dimension. 
-000116b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-000116c0: 7365 6c66 2c20 6469 6d65 6e73 696f 6e2c  self, dimension,
-000116d0: 2064 696d 656e 7369 6f6e 5f74 7261 6e73   dimension_trans
-000116e0: 666f 726d 735f 6469 6374 293a 0000 2020  forms_dict):..  
-000116f0: 2020 2222 2256 616c 7565 206f 626a 6563    """Value objec
-00011700: 7420 7072 6f76 6964 696e 6720 636f 6e76  t providing conv
-00011710: 656e 6965 6e74 2061 6363 6573 7320 746f  enient access to
-00011720: 2064 6574 6169 6c73 206f 6620 616e 206f   details of an o
-00011730: 7264 6572 2074 7261 6e73 666f 726d 2e22  rder transform."
-00011740: 2222 0063 6c61 7373 205f 4f72 6465 7253  "".class _OrderS
-00011750: 7065 633a 0000 0020 2020 2020 2020 2072  pec:...        r
-00011760: 6574 7572 6e20 7374 7228 6e61 6d65 2920  eturn str(name) 
-00011770: 6966 206e 616d 6520 656c 7365 2022 2200  if name else "".
-00011780: 2020 2020 2020 2020 6e61 6d65 203d 2073          name = s
-00011790: 656c 662e 5f65 6c65 6d65 6e74 5f74 7261  elf._element_tra
-000117a0: 6e73 666f 726d 735f 6469 6374 5b22 6e61  nsforms_dict["na
-000117b0: 6d65 225d 0020 2020 2020 2020 2023 202d  me"].        # -
-000117c0: 2d2d 6574 632e 2062 6563 6f6d 696e 6720  --etc. becoming 
-000117d0: 7468 6520 656d 7074 7920 7374 7269 6e67  the empty string
-000117e0: 2028 2222 292e 0020 2020 2020 2020 2023   ("")..        #
-000117f0: 202d 2d2d 6f74 6865 7277 6973 6520 6e6f   ---otherwise no
-00011800: 726d 616c 697a 6520 7661 6c75 6520 746f  rmalize value to
-00011810: 2073 7472 2c20 7769 7468 2061 6e20 6578   str, with an ex
-00011820: 706c 6963 6974 2076 616c 7565 206f 6620  plicit value of 
-00011830: 4e6f 6e65 2c20 5b5d 2c20 302c 0020 2020  None, [], 0,.   
-00011840: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00011850: 4e6f 6e65 0020 2020 2020 2020 2069 6620  None.        if 
-00011860: 226e 616d 6522 206e 6f74 2069 6e20 7365  "name" not in se
-00011870: 6c66 2e5f 656c 656d 656e 745f 7472 616e  lf._element_tran
-00011880: 7366 6f72 6d73 5f64 6963 743a 0020 2020  sforms_dict:.   
-00011890: 2020 2020 2023 202d 2d2d 6966 2022 6e61       # ---if "na
-000118a0: 6d65 223a 2065 6c65 6d65 6e74 2069 7320  me": element is 
-000118b0: 6f6d 6974 7465 642c 206e 6f20 7472 616e  omitted, no tran
-000118c0: 7366 6f72 6d20 6973 2073 7065 6369 6669  sform is specifi
-000118d0: 6564 2d2d 2d00 2020 2020 2020 2020 2222  ed---.        ""
-000118e0: 224f 7074 696f 6e61 6c20 7374 7220 6469  "Optional str di
-000118f0: 7370 6c61 792d 6e61 6d65 2066 6f72 2074  splay-name for t
-00011900: 6869 7320 656c 656d 656e 7420 284e 6f6e  his element (Non
-00011910: 6520 6966 206e 6f74 2073 7065 6369 6669  e if not specifi
-00011920: 6564 292e 2222 2200 2020 2020 6465 6620  ed).""".    def 
-00011930: 6e61 6d65 2873 656c 6629 202d 3e20 4f70  name(self) -> Op
-00011940: 7469 6f6e 616c 5b73 7472 5d3a 0020 2020  tional[str]:.   
-00011950: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00011960: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00011970: 6f6e 6500 2020 2020 2020 2020 2020 2020  one.            
-00011980: 7265 7475 726e 2046 616c 7365 0020 2020  return False.   
-00011990: 2020 2020 2069 6620 6869 6465 2069 7320       if hide is 
-000119a0: 4661 6c73 653a 0020 2020 2020 2020 2020  False:.         
-000119b0: 2020 2072 6574 7572 6e20 5472 7565 0020     return True. 
-000119c0: 2020 2020 2020 2069 6620 6869 6465 2069         if hide i
-000119d0: 7320 5472 7565 3a00 2020 2020 2020 2020  s True:.        
-000119e0: 2320 2d2d 2d63 6f76 6572 2061 6c6c 206f  # ---cover all o
-000119f0: 6620 226f 6d69 7474 6564 222c 2022 3d3d  f "omitted", "==
-00011a00: 4e6f 6e65 222c 2061 6e64 206f 6464 2022  None", and odd "
-00011a10: 3d3d 5b5d 2220 6f72 2022 3d3d 2727 2220  ==[]" or "==''" 
-00011a20: 6361 7365 732d 2d2d 0020 2020 2020 2020  cases---.       
-00011a30: 2068 6964 6520 3d20 7365 6c66 2e5f 656c   hide = self._el
-00011a40: 656d 656e 745f 7472 616e 7366 6f72 6d73  ement_transforms
-00011a50: 5f64 6963 742e 6765 7428 2268 6964 6522  _dict.get("hide"
-00011a60: 2900 2020 2020 2020 2020 2222 2200 2020  ).        """.  
-00011a70: 2020 2020 2020 2269 6e68 6572 6974 222e        "inherit".
-00011a80: 0020 2020 2020 2020 2046 616c 7365 206f  .        False o
-00011a90: 7665 7272 6964 6573 2061 6e79 2070 7269  verrides any pri
-00011aa0: 6f72 2022 6869 6465 2220 7472 616e 7366  or "hide" transf
-00011ab0: 6f72 6d20 7769 7468 2022 7368 6f77 2220  orm with "show" 
-00011ac0: 616e 6420 4e6f 6e65 2073 6967 6e69 6669  and None signifi
-00011ad0: 6573 0000 2020 2020 2020 2020 2222 2254  es..        """T
-00011ae0: 7269 2d76 616c 7565 2c20 5472 7565 2069  ri-value, True i
-00011af0: 6620 7468 6973 2065 6c65 6d65 6e74 2068  f this element h
-00011b00: 6173 2062 6565 6e20 6578 706c 6963 6974  as been explicit
-00011b10: 6c79 2068 6964 6465 6e20 696e 2074 6869  ly hidden in thi
-00011b20: 7320 616e 616c 7973 6973 2e00 2020 2020  s analysis..    
-00011b30: 6465 6620 6869 6465 2873 656c 6629 202d  def hide(self) -
-00011b40: 3e20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  > Optional[bool]
-00011b50: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-00011b60: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-00011b70: 7572 6e20 6669 6c6c 0020 2020 2020 2020  urn fill.       
-00011b80: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00011b90: 0020 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00011ba0: 6669 6c6c 3a00 0020 2020 2020 2020 2066  fill:..        f
-00011bb0: 696c 6c20 3d20 7365 6c66 2e5f 656c 656d  ill = self._elem
-00011bc0: 656e 745f 7472 616e 7366 6f72 6d73 5f64  ent_transforms_d
-00011bd0: 6963 742e 6765 7428 2266 696c 6c22 2900  ict.get("fill").
-00011be0: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-00011bf0: 2020 2020 2054 6872 6565 2d63 6861 7261       Three-chara
-00011c00: 6374 6572 2063 6f6c 6f72 2063 6f6e 7472  cter color contr
-00011c10: 6163 7469 6f6e 7320 286c 696b 6520 2223  actions (like "#
-00011c20: 4430 3722 2920 6172 6520 6e6f 7420 7661  D07") are not va
-00011c30: 6c69 642e 0020 2020 2020 2020 2041 2073  lid..        A s
-00011c40: 7472 2076 616c 7565 206d 7573 7420 6265  tr value must be
-00011c50: 2061 2068 6173 6820 6368 6172 6163 7465   a hash characte
-00011c60: 7220 2822 2322 2920 666f 6c6c 6f77 6564  r ("#") followed
-00011c70: 2062 7920 7369 7820 6865 7861 6465 6369   by six hexadeci
-00011c80: 6d61 6c20 6469 6769 7473 2e00 2020 2020  mal digits..    
-00011c90: 2020 2020 4120 7661 6c75 6520 6f66 204e      A value of N
-00011ca0: 6f6e 6520 696e 6469 6361 7465 7320 6e6f  one indicates no
-00011cb0: 2066 696c 6c20 7472 616e 7366 6f72 6d20   fill transform 
-00011cc0: 7761 7320 7370 6563 6966 6965 6420 666f  was specified fo
-00011cd0: 7220 7468 6973 2065 6c65 6d65 6e74 2e00  r this element..
-00011ce0: 0020 2020 2020 2020 2022 2222 7374 7220  .        """str 
-00011cf0: 5247 4220 636f 6c6f 7220 6c69 6b65 2022  RGB color like "
-00011d00: 2361 6630 3332 6422 206f 7220 4e6f 6e65  #af032d" or None
-00011d10: 2069 6620 6e6f 7420 7370 6563 6966 6965   if not specifie
-00011d20: 642e 0020 2020 2064 6566 2066 696c 6c28  d..    def fill(
-00011d30: 7365 6c66 2920 2d3e 204f 7074 696f 6e61  self) -> Optiona
-00011d40: 6c5b 7374 725d 3a00 2020 2020 406c 617a  l[str]:.    @laz
-00011d50: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00011d60: 2020 2073 656c 662e 5f65 6c65 6d65 6e74     self._element
-00011d70: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
-00011d80: 203d 2065 6c65 6d65 6e74 5f74 7261 6e73   = element_trans
-00011d90: 666f 726d 735f 6469 6374 0020 2020 2064  forms_dict.    d
-00011da0: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00011db0: 2c20 656c 656d 656e 745f 7472 616e 7366  , element_transf
-00011dc0: 6f72 6d73 5f64 6963 7429 3a00 0020 2020  orms_dict):..   
-00011dd0: 2022 2222 4120 7661 6c75 6520 6f62 6a65   """A value obje
-00011de0: 6374 2070 726f 7669 6469 6e67 2063 6f6e  ct providing con
-00011df0: 7665 6e69 656e 7420 6163 6365 7373 2074  venient access t
-00011e00: 6f20 7472 616e 7366 6f72 6d73 2066 6f72  o transforms for
-00011e10: 2061 2073 696e 676c 6520 656c 656d 656e   a single elemen
-00011e20: 742e 2222 2200 636c 6173 7320 5f45 6c65  t.""".class _Ele
-00011e30: 6d65 6e74 5472 616e 7366 6f72 6d73 3a00  mentTransforms:.
-00011e40: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00011e50: 2076 616c 7565 2e67 6574 2822 7265 6665   value.get("refe
-00011e60: 7265 6e63 6573 222c 207b 7d29 2e67 6574  rences", {}).get
-00011e70: 286b 6579 2920 6f72 2022 2200 2020 2020  (key) or "".    
-00011e80: 2020 2020 2320 2d2d 2d46 6f72 2043 4120      # ---For CA 
-00011e90: 616e 6420 4d52 2073 7562 7661 7220 6469  and MR subvar di
-00011ea0: 6d65 6e73 696f 6e73 2d2d 2d00 0020 2020  mensions---..   
-00011eb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00011ec0: 7661 6c75 6500 2020 2020 2020 2020 6966  value.        if
-00011ed0: 2074 7970 655f 7661 6c75 6520 696e 2028   type_value in (
-00011ee0: 2273 7472 222c 2022 756e 6963 6f64 6522  "str", "unicode"
-00011ef0: 293a 0000 2020 2020 2020 2020 2020 2020  ):..            
-00011f00: 7265 7475 726e 2073 7472 2876 616c 7565  return str(value
-00011f10: 2900 2020 2020 2020 2020 6966 2074 7970  ).        if typ
-00011f20: 655f 7661 6c75 6520 696e 2028 2266 6c6f  e_value in ("flo
-00011f30: 6174 222c 2022 696e 7422 293a 0000 2020  at", "int"):..  
-00011f40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00011f50: 2022 2d22 2e6a 6f69 6e28 5b73 7472 2869   "-".join([str(i
-00011f60: 7465 6d29 2066 6f72 2069 7465 6d20 696e  tem) for item in
-00011f70: 2076 616c 7565 5d29 0020 2020 2020 2020   value]).       
-00011f80: 2020 2020 2023 202d 2d2d 6c69 6b65 2027       # ---like '
-00011f90: 3130 2d31 3527 206f 7220 2741 2d46 272d  10-15' or 'A-F'-
-00011fa0: 2d2d 0020 2020 2020 2020 2069 6620 7479  --.        if ty
-00011fb0: 7065 5f76 616c 7565 203d 3d20 226c 6973  pe_value == "lis
-00011fc0: 7422 3a00 0020 2020 2020 2020 2020 2020  t":..           
-00011fd0: 2072 6574 7572 6e20 2222 0020 2020 2020   return "".     
-00011fe0: 2020 2069 6620 7479 7065 5f76 616c 7565     if type_value
-00011ff0: 203d 3d20 224e 6f6e 6554 7970 6522 3a00   == "NoneType":.
-00012000: 6164 0000 db07 0000 c308 0000 0010 0000  ad..............
-00012010: 3300 0000 0000 0000 df0f 0000 de0f 0000  3...............
-00012020: cc0f 0000 b20f 0000 670f 0000 510f 0000  ........g...Q...
-00012030: 0d0f 0000 ba0e 0000 b00e 0000 af0e 0000  ................
-00012040: ae0e 0000 9d0e 0000 6c0e 0000 6b0e 0000  ........l...k...
-00012050: 150e 0000 c10d 0000 910d 0000 890d 0000  ................
-00012060: 880d 0000 3a0d 0000 0e0d 0000 e00c 0000  ....:...........
-00012070: a40c 0000 a30c 0000 910c 0000 750c 0000  ............u...
-00012080: 420c 0000 110c 0000 eb0b 0000 ea0b 0000  B...............
-00012090: d80b 0000 af0b 0000 610b 0000 600b 0000  ........a...`...
-000120a0: 1a0b 0000 cc0a 0000 a20a 0000 a10a 0000  ................
-000120b0: 550a 0000 070a 0000 e609 0000 da09 0000  U...............
-000120c0: ab09 0000 aa09 0000 8f09 0000 4d09 0000  ............M...
-000120d0: 3109 0000 3009 0000 2309 0000 0209 0000  1...0...#.......
-000120e0: c308 0000 b008 0000 8908 0000 0000 0000  ................
-000120f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000121f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000122f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000123f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000124f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000125f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000126f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000127f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00012880: 0000 0000 0000 0000 0020 2020 2020 2020  .........       
-00012890: 2020 2020 2069 6620 616e 6368 6f72 206e       if anchor n
-000128a0: 6f74 2069 6e20 7365 6c66 2e5f 7661 6c69  ot in self._vali
-000128b0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-000128c0: 6e63 6820 2020 2020 2020 2020 2020 2069  nch            i
-000128d0: 6620 616e 6368 6f72 206e 6f74 2069 6e20  f anchor not in 
-000128e0: 7365 6c66 2e5f 7661 6c69 645f 656c 656d  self._valid_elem
-000128f0: 656e 7473 2e65 6c65 6d65 6e74 5f69 6473  ents.element_ids
-00012900: 3a00 2020 2020 2020 2020 2020 2020 616e  :.            an
-00012910: 6368 6f72 203d 2069 6e74 2861 6e63 686f  chor = int(ancho
-00012920: 7229 0020 2020 2020 2020 2074 7279 3a00  r).        try:.
-00012930: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-00012940: 7572 6e20 2262 6f74 746f 6d22 0020 2020  urn "bottom".   
-00012950: 2020 2020 2020 2020 2023 2049 6e20 7468           # In th
-00012960: 6520 6361 7365 206f 6620 756e 6465 6669  e case of undefi
-00012970: 6e65 6420 616e 6368 6f72 2064 6566 6175  ned anchor defau
-00012980: 6c74 2074 6f20 2262 6f74 746f 6d22 0020  lt to "bottom". 
-00012990: 2020 2020 2020 2069 6620 616e 6368 6f72         if anchor
-000129a0: 2069 7320 4e6f 6e65 3a00 0020 2020 2020   is None:..     
-000129b0: 2020 2061 6e63 686f 7220 3d20 7365 6c66     anchor = self
-000129c0: 2e5f 7375 6274 6f74 616c 5f64 6963 745b  ._subtotal_dict[
-000129d0: 2261 6e63 686f 7222 5d00 2020 2020 2020  "anchor"].      
-000129e0: 2020 2222 2200 2020 2020 2020 2020 7265    """.        re
-000129f0: 7072 6573 656e 7473 206d 6973 7369 6e67  presents missing
-00012a00: 2064 6174 612e 0020 2020 2020 2020 2065   data..        e
-00012a10: 6c65 6d65 6e74 2074 6861 7420 6973 206e  lement that is n
-00012a20: 6f20 6c6f 6e67 6572 2070 7265 7365 6e74  o longer present
-00012a30: 2069 6e20 7468 6520 6469 6d65 6e73 696f   in the dimensio
-00012a40: 6e20 6f72 2061 6e20 656c 656d 656e 7420  n or an element 
-00012a50: 7468 6174 0020 2020 2020 2020 2054 6865  that.        The
-00012a60: 2072 6574 7572 6e20 7661 6c75 6520 6465   return value de
-00012a70: 6661 756c 7473 2074 6f20 2762 6f74 746f  faults to 'botto
-00012a80: 6d27 2066 6f72 2061 6e20 616e 6368 6f72  m' for an anchor
-00012a90: 2072 6566 6572 7269 6e67 2074 6f20 616e   referring to an
-00012aa0: 0000 2020 2020 2020 2020 616c 736f 2062  ..        also b
-00012ab0: 6520 6f6e 6520 6f66 2027 746f 7027 206f  e one of 'top' o
-00012ac0: 7220 2762 6f74 746f 6d27 2e00 2020 2020  r 'bottom'..    
-00012ad0: 2020 2020 7375 6276 6172 6961 626c 6529      subvariable)
-00012ae0: 2075 6e64 6572 2077 6869 6368 2074 6f20   under which to 
-00012af0: 706c 6163 6520 7468 6973 2073 7562 746f  place this subto
-00012b00: 7461 6c2e 2054 6865 2072 6574 7572 6e20  tal. The return 
-00012b10: 7661 6c75 6520 6361 6e00 2020 2020 2020  value can.      
-00012b20: 2020 416e 2069 6e74 2061 6e63 686f 7220    An int anchor 
-00012b30: 6973 2074 6865 2069 6420 6f66 2074 6865  is the id of the
-00012b40: 2064 696d 656e 7369 6f6e 2065 6c65 6d65   dimension eleme
-00012b50: 6e74 2028 6361 7465 676f 7279 206f 7200  nt (category or.
-00012b60: 0020 2020 2020 2020 2022 2222 696e 7420  .        """int 
-00012b70: 6f72 2073 7472 2069 6e64 6963 6174 696e  or str indicatin
-00012b80: 6720 656c 656d 656e 7420 756e 6465 7220  g element under 
-00012b90: 7768 6963 6820 746f 2069 6e73 6572 7420  which to insert 
-00012ba0: 7468 6973 2073 7562 746f 7461 6c2e 0020  this subtotal.. 
-00012bb0: 2020 2064 6566 2061 6e63 686f 7228 7365     def anchor(se
-00012bc0: 6c66 2920 2d3e 2055 6e69 6f6e 5b69 6e74  lf) -> Union[int
-00012bd0: 2c20 7374 725d 3a00 2020 2020 406c 617a  , str]:.    @laz
-00012be0: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00012bf0: 2020 2072 6574 7572 6e20 616c 6961 7320     return alias 
-00012c00: 6966 2061 6c69 6173 2065 6c73 6520 2222  if alias else ""
-00012c10: 0020 2020 2020 2020 2061 6c69 6173 203d  .        alias =
-00012c20: 2073 656c 662e 5f73 7562 746f 7461 6c5f   self._subtotal_
-00012c30: 6469 6374 2e67 6574 2822 616c 6961 7322  dict.get("alias"
-00012c40: 2900 2020 2020 2020 2020 2222 2273 7472  ).        """str
-00012c50: 2064 6973 706c 6179 2061 6c69 6173 2066   display alias f
-00012c60: 6f72 2074 6869 7320 7375 6274 6f74 616c  or this subtotal
-00012c70: 2e22 2222 0020 2020 2064 6566 2061 6c69  .""".    def ali
-00012c80: 6173 2873 656c 6629 202d 3e20 7374 723a  as(self) -> str:
-00012c90: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-00012ca0: 7479 0000 2020 2020 2020 2020 7365 6c66  ty..        self
-00012cb0: 2e5f 6661 6c6c 6261 636b 5f69 6e73 6572  ._fallback_inser
-00012cc0: 7469 6f6e 5f69 6420 3d20 6661 6c6c 6261  tion_id = fallba
-00012cd0: 636b 5f69 6e73 6572 7469 6f6e 5f69 6400  ck_insertion_id.
-00012ce0: 2020 2020 2020 2020 7365 6c66 2e5f 7661          self._va
-00012cf0: 6c69 645f 656c 656d 656e 7473 203d 2076  lid_elements = v
-00012d00: 616c 6964 5f65 6c65 6d65 6e74 7300 2020  alid_elements.  
-00012d10: 2020 2020 2020 7365 6c66 2e5f 7375 6274        self._subt
-00012d20: 6f74 616c 5f64 6963 7420 3d20 7375 6274  otal_dict = subt
-00012d30: 6f74 616c 5f64 6963 7400 2020 2020 6465  otal_dict.    de
-00012d40: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00012d50: 2073 7562 746f 7461 6c5f 6469 6374 2c20   subtotal_dict, 
-00012d60: 7661 6c69 645f 656c 656d 656e 7473 2c20  valid_elements, 
-00012d70: 6661 6c6c 6261 636b 5f69 6e73 6572 7469  fallback_inserti
-00012d80: 6f6e 5f69 6429 3a00 0020 2020 2022 2222  on_id):..    """
-00012d90: 0020 2020 2077 6974 6869 6e20 7468 6520  .    within the 
-00012da0: 696e 7365 7274 696f 6e73 2074 7261 6e73  insertions trans
-00012db0: 666f 726d 2063 6f6c 6c65 6374 696f 6e2e  form collection.
-00012dc0: 0020 2020 2072 6561 6c20 696e 7365 7274  .    real insert
-00012dd0: 696f 6e2d 6964 7320 6361 6e20 6265 2061  ion-ids can be a
-00012de0: 6464 6564 2e20 4974 7320 7661 6c75 6520  dded. Its value 
-00012df0: 6973 206a 7573 7420 7468 6520 696e 6465  is just the inde
-00012e00: 782b 3120 6f66 2074 6869 7320 7375 6274  x+1 of this subt
-00012e10: 6f74 616c 0020 2020 2060 6661 6c6c 6261  otal.    `fallba
-00012e20: 636b 5f69 6e73 6572 7469 6f6e 5f69 6460  ck_insertion_id`
-00012e30: 2069 7320 6120 6661 6c6c 6261 636b 2075   is a fallback u
-00012e40: 6e69 7175 6520 6964 656e 7469 6669 6572  nique identifier
-00012e50: 2066 6f72 2074 6869 7320 696e 7365 7274   for this insert
-00012e60: 696f 6e2c 2075 6e74 696c 0000 2020 2020  ion, until..    
-00012e70: 2222 2241 2073 7562 746f 7461 6c20 696e  """A subtotal in
-00012e80: 7365 7274 696f 6e20 6f6e 2061 2063 7562  sertion on a cub
-00012e90: 6520 6469 6d65 6e73 696f 6e2e 0063 6c61  e dimension..cla
-00012ea0: 7373 205f 5375 6274 6f74 616c 3a00 0000  ss _Subtotal:...
-00012eb0: 2020 2020 2020 2020 2900 2020 2020 2020          ).      
-00012ec0: 2020 2020 2020 666f 7220 6964 782c 2073        for idx, s
-00012ed0: 7562 746f 7461 6c5f 6469 6374 2069 6e20  ubtotal_dict in 
-00012ee0: 656e 756d 6572 6174 6528 7365 6c66 2e5f  enumerate(self._
-00012ef0: 6974 6572 5f76 616c 6964 5f73 7562 746f  iter_valid_subto
-00012f00: 7461 6c5f 6469 6374 7328 2929 0020 2020  tal_dicts()).   
-00012f10: 2020 2020 2020 2020 205f 5375 6274 6f74           _Subtot
-00012f20: 616c 2873 7562 746f 7461 6c5f 6469 6374  al(subtotal_dict
-00012f30: 2c20 7365 6c66 2e5f 7661 6c69 645f 656c  , self._valid_el
-00012f40: 656d 656e 7473 2c20 6964 7820 2b20 3129  ements, idx + 1)
-00012f50: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012f60: 7475 706c 6528 0020 2020 2020 2020 2022  tuple(.        "
-00012f70: 2222 436f 6d70 6f73 6564 2074 7570 6c65  ""Composed tuple
-00012f80: 2073 746f 7269 6e67 2061 6374 7561 6c20   storing actual 
-00012f90: 7365 7175 656e 6365 206f 6620 5f53 7562  sequence of _Sub
-00012fa0: 746f 7461 6c20 6f62 6a65 6374 732e 2222  total objects.""
-00012fb0: 2200 2020 2020 6465 6620 5f73 7562 746f  ".    def _subto
-00012fc0: 7461 6c73 2873 656c 6629 3a00 2020 2020  tals(self):.    
-00012fd0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00012fe0: 2020 2020 2020 2020 2020 2079 6965 6c64             yield
-00012ff0: 2069 6e73 6572 7469 6f6e 5f64 6963 7400   insertion_dict.
+00000000: 2320 656e 636f 6469 6e67 3a20 7574 662d  # encoding: utf-
+00000010: 380a 0a22 2222 5072 6f76 6964 6573 2074  8.."""Provides t
+00000020: 6865 2044 696d 656e 7369 6f6e 2063 6c61  he Dimension cla
+00000030: 7373 2e22 2222 0a0a 696d 706f 7274 2063  ss."""..import c
+00000040: 6f70 790a 6672 6f6d 2063 6f6c 6c65 6374  opy.from collect
+00000050: 696f 6e73 2e61 6263 2069 6d70 6f72 7420  ions.abc import 
+00000060: 5365 7175 656e 6365 0a66 726f 6d20 7479  Sequence.from ty
+00000070: 7069 6e67 2069 6d70 6f72 7420 4469 6374  ping import Dict
+00000080: 2c20 4974 6572 6174 6f72 2c20 4c69 7374  , Iterator, List
+00000090: 2c20 4f70 7469 6f6e 616c 2c20 5475 706c  , Optional, Tupl
+000000a0: 652c 2055 6e69 6f6e 0a0a 696d 706f 7274  e, Union..import
+000000b0: 206e 756d 7079 2061 7320 6e70 0a0a 6672   numpy as np..fr
+000000c0: 6f6d 2063 722e 6375 6265 2e65 6e75 6d73  om cr.cube.enums
+000000d0: 2069 6d70 6f72 7420 280a 2020 2020 434f   import (.    CO
+000000e0: 4c4c 4154 494f 4e5f 4d45 5448 4f44 2061  LLATION_METHOD a
+000000f0: 7320 434d 2c0a 2020 2020 4449 4d45 4e53  s CM,.    DIMENS
+00000100: 494f 4e5f 5459 5045 2061 7320 4454 2c0a  ION_TYPE as DT,.
+00000110: 2020 2020 4d41 5247 494e 414c 2c0a 2020      MARGINAL,.  
+00000120: 2020 4d45 4153 5552 452c 0a20 2020 205f    MEASURE,.    _
+00000130: 4469 6d65 6e73 696f 6e54 7970 652c 0a29  DimensionType,.)
+00000140: 0a66 726f 6d20 6372 2e63 7562 652e 7574  .from cr.cube.ut
+00000150: 696c 2069 6d70 6f72 7420 6c61 7a79 7072  il import lazypr
+00000160: 6f70 6572 7479 0a0a 0a63 6c61 7373 205f  operty...class _
+00000170: 4261 7365 4469 6d65 6e73 696f 6e73 2853  BaseDimensions(S
+00000180: 6571 7565 6e63 6529 3a0a 2020 2020 2222  equence):.    ""
+00000190: 2242 6173 6520 636c 6173 7320 666f 7220  "Base class for 
+000001a0: 6469 6d65 6e73 696f 6e20 636f 6c6c 6563  dimension collec
+000001b0: 7469 6f6e 732e 2222 220a 0a20 2020 2064  tions."""..    d
+000001c0: 6566 205f 5f67 6574 6974 656d 5f5f 2873  ef __getitem__(s
+000001d0: 656c 662c 2069 6478 5f6f 725f 736c 6963  elf, idx_or_slic
+000001e0: 6529 3a0a 2020 2020 2020 2020 2222 2249  e):.        """I
+000001f0: 6d70 6c65 6d65 6e74 7320 696e 6465 7865  mplements indexe
+00000200: 6420 6163 6365 7373 2e22 2222 0a20 2020  d access.""".   
+00000210: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00000220: 2e5f 6469 6d65 6e73 696f 6e73 5b69 6478  ._dimensions[idx
+00000230: 5f6f 725f 736c 6963 655d 0a0a 2020 2020  _or_slice]..    
+00000240: 6465 6620 5f5f 6974 6572 5f5f 2873 656c  def __iter__(sel
+00000250: 6629 3a0a 2020 2020 2020 2020 2222 2249  f):.        """I
+00000260: 6d70 6c65 6d65 6e74 7320 2865 6666 6963  mplements (effic
+00000270: 6965 6e74 2920 6974 6572 6162 696c 6974  ient) iterabilit
+00000280: 792e 2222 220a 2020 2020 2020 2020 7265  y.""".        re
+00000290: 7475 726e 2069 7465 7228 7365 6c66 2e5f  turn iter(self._
+000002a0: 6469 6d65 6e73 696f 6e73 290a 0a20 2020  dimensions)..   
+000002b0: 2064 6566 205f 5f6c 656e 5f5f 2873 656c   def __len__(sel
+000002c0: 6629 3a0a 2020 2020 2020 2020 2222 2249  f):.        """I
+000002d0: 6d70 6c65 6d65 6e74 7320 6c65 6e28 656c  mplements len(el
+000002e0: 656d 656e 7473 292e 2222 220a 2020 2020  ements).""".    
+000002f0: 2020 2020 7265 7475 726e 206c 656e 2873      return len(s
+00000300: 656c 662e 5f64 696d 656e 7369 6f6e 7329  elf._dimensions)
+00000310: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00000320: 7274 790a 2020 2020 6465 6620 5f64 696d  rty.    def _dim
+00000330: 656e 7369 6f6e 7328 7365 6c66 2920 2d3e  ensions(self) ->
+00000340: 2054 7570 6c65 5b22 4469 6d65 6e73 696f   Tuple["Dimensio
+00000350: 6e22 2c20 2e2e 2e5d 3a0a 2020 2020 2020  n", ...]:.      
+00000360: 2020 2222 2274 7570 6c65 206f 6620 6469    """tuple of di
+00000370: 6d65 6e73 696f 6e20 6f62 6a65 6374 7320  mension objects 
+00000380: 696e 2074 6869 7320 636f 6c6c 6563 7469  in this collecti
+00000390: 6f6e 2e0a 0a20 2020 2020 2020 2054 6869  on...        Thi
+000003a0: 7320 636f 6d70 6f73 6564 2074 7570 6c65  s composed tuple
+000003b0: 2069 7320 7468 6520 736f 7572 6365 2066   is the source f
+000003c0: 6f72 2074 6865 2064 696d 656e 7369 6f6e  or the dimension
+000003d0: 206f 626a 6563 7473 2069 6e20 7468 6973   objects in this
+000003e0: 0a20 2020 2020 2020 2063 6f6c 6c65 6374  .        collect
+000003f0: 696f 6e2e 0a20 2020 2020 2020 2022 2222  ion..        """
+00000400: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
+00000410: 6f74 496d 706c 656d 656e 7465 6445 7272  otImplementedErr
+00000420: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00000430: 226d 7573 7420 6265 2069 6d70 6c65 6d65  "must be impleme
+00000440: 6e74 6564 2062 7920 6561 6368 2073 7562  nted by each sub
+00000450: 636c 6173 7322 0a20 2020 2020 2020 2029  class".        )
+00000460: 2020 2320 7072 6167 6d61 3a20 6e6f 2063    # pragma: no c
+00000470: 6f76 6572 0a0a 0a63 6c61 7373 2041 6c6c  over...class All
+00000480: 4469 6d65 6e73 696f 6e73 285f 4261 7365  Dimensions(_Base
+00000490: 4469 6d65 6e73 696f 6e73 293a 0a20 2020  Dimensions):.   
+000004a0: 2022 2222 436f 6c6c 6563 7469 6f6e 2063   """Collection c
+000004b0: 6f6e 7461 696e 696e 6720 6576 6572 7920  ontaining every 
+000004c0: 6469 6d65 6e73 696f 6e20 6465 6669 6e65  dimension define
+000004d0: 6420 696e 2063 7562 6520 7265 7370 6f6e  d in cube respon
+000004e0: 7365 2e22 2222 0a0a 2020 2020 6465 6620  se."""..    def 
+000004f0: 5f5f 696e 6974 5f5f 2873 656c 662c 2064  __init__(self, d
+00000500: 696d 656e 7369 6f6e 5f64 6963 7473 293a  imension_dicts):
+00000510: 0a20 2020 2020 2020 2073 656c 662e 5f64  .        self._d
+00000520: 696d 656e 7369 6f6e 5f64 6963 7473 203d  imension_dicts =
+00000530: 2064 696d 656e 7369 6f6e 5f64 6963 7473   dimension_dicts
+00000540: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00000550: 7274 790a 2020 2020 6465 6620 6170 7061  rty.    def appa
+00000560: 7265 6e74 5f64 696d 656e 7369 6f6e 7328  rent_dimensions(
+00000570: 7365 6c66 2920 2d3e 2022 5f41 7070 6172  self) -> "_Appar
+00000580: 656e 7444 696d 656e 7369 6f6e 7322 3a0a  entDimensions":.
+00000590: 2020 2020 2020 2020 2222 225f 4170 7061          """_Appa
+000005a0: 7265 6e74 4469 6d65 6e73 696f 6e73 2063  rentDimensions c
+000005b0: 6f6c 6c65 6374 696f 6e20 6f66 2074 6865  ollection of the
+000005c0: 2022 7669 7369 626c 6522 2064 696d 656e   "visible" dimen
+000005d0: 7369 6f6e 732e 0a0a 2020 2020 2020 2020  sions...        
+000005e0: 5468 6520 7477 6f20 6469 6d65 6e73 696f  The two dimensio
+000005f0: 6e73 2066 6f72 2061 206d 756c 7469 706c  ns for a multipl
+00000600: 652d 7265 7370 6f6e 7365 2028 4d52 2920  e-response (MR) 
+00000610: 7661 7269 6162 6c65 2061 7265 0a20 2020  variable are.   
+00000620: 2020 2020 2063 6f6e 666c 6174 6564 2069       conflated i
+00000630: 6e74 6f20 6120 7369 6e67 6c65 2064 696d  nto a single dim
+00000640: 656e 7369 6f6e 7320 696e 2074 6869 7320  ensions in this 
+00000650: 636f 6c6c 6563 7469 6f6e 2e0a 2020 2020  collection..    
+00000660: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00000670: 7265 7475 726e 205f 4170 7061 7265 6e74  return _Apparent
+00000680: 4469 6d65 6e73 696f 6e73 2861 6c6c 5f64  Dimensions(all_d
+00000690: 696d 656e 7369 6f6e 733d 7365 6c66 2e5f  imensions=self._
+000006a0: 6469 6d65 6e73 696f 6e73 290a 0a20 2020  dimensions)..   
+000006b0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+000006c0: 2020 2064 6566 2064 696d 656e 7369 6f6e     def dimension
+000006d0: 5f6f 7264 6572 2873 656c 6629 202d 3e20  _order(self) -> 
+000006e0: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
+000006f0: 0a20 2020 2020 2020 2022 2222 5475 706c  .        """Tupl
+00000700: 6520 6f66 2069 6e74 2072 6570 7265 7365  e of int represe
+00000710: 6e74 696e 6720 7468 6520 6469 6d65 6e73  nting the dimens
+00000720: 696f 6e20 6f72 6465 722e 0a0a 2020 2020  ion order...    
+00000730: 2020 2020 5468 6520 6469 6d65 6e73 696f      The dimensio
+00000740: 6e20 6f72 6465 7220 6465 7065 6e64 7320  n order depends 
+00000750: 6f6e 2074 6865 2070 7265 7365 6e63 6520  on the presence 
+00000760: 6f66 206e 756d 6572 6963 2061 7272 6179  of numeric array
+00000770: 2069 6e20 7468 6520 6469 6d65 6e73 696f   in the dimensio
+00000780: 6e73 0a20 2020 2020 2020 2061 6e64 2074  ns.        and t
+00000790: 6865 206e 756d 6265 7220 6f66 2074 6865  he number of the
+000007a0: 2063 7562 6520 6469 6d65 6e73 696f 6e73   cube dimensions
+000007b0: 2e20 496e 2063 6173 6520 6f66 2033 2064  . In case of 3 d
+000007c0: 696d 656e 7369 6f6e 7320 652e 672e 0a20  imensions e.g.. 
+000007d0: 2020 2020 2020 204e 554d 5f41 5252 5f58         NUM_ARR_X
+000007e0: 5f4d 525f 5355 4256 4152 5f58 5f4d 525f  _MR_SUBVAR_X_MR_
+000007f0: 4341 5420 7468 6520 6f72 6465 7220 7368  CAT the order sh
+00000800: 6f75 6c64 2062 6520 2831 2c32 2c30 2920  ould be (1,2,0) 
+00000810: 7468 6174 2069 7320 6261 7369 6361 6c6c  that is basicall
+00000820: 790a 2020 2020 2020 2020 7377 6170 7069  y.        swappi
+00000830: 6e67 2074 6865 204d 5220 2832 2064 696d  ng the MR (2 dim
+00000840: 656e 7369 6f6e 7329 2077 6974 6820 7468  ensions) with th
+00000850: 6520 4e55 4d5f 4152 5241 5920 6469 6d65  e NUM_ARRAY dime
+00000860: 6e73 696f 6e2e 2049 6e20 6361 7365 206f  nsion. In case o
+00000870: 6620 320a 2020 2020 2020 2020 6469 6d65  f 2.        dime
+00000880: 6e73 696f 6e73 2074 6865 2064 696d 656e  nsions the dimen
+00000890: 7369 6f6e 206f 7264 6572 2063 6f72 7265  sion order corre
+000008a0: 7370 6f6e 6420 7369 6d70 7920 746f 2074  spond simpy to t
+000008b0: 6865 2072 6576 6572 7365 206f 6620 7468  he reverse of th
+000008c0: 6520 6f72 6967 696e 616c 0a20 2020 2020  e original.     
+000008d0: 2020 2064 696d 656e 7369 6f6e 206f 7264     dimension ord
+000008e0: 6572 2e0a 2020 2020 2020 2020 2222 220a  er..        """.
+000008f0: 2020 2020 2020 2020 2320 4e4f 5445 3a20          # NOTE: 
+00000900: 7468 6973 2069 7320 6120 7465 6d70 6f72  this is a tempor
+00000910: 6172 7920 6861 636b 2074 6861 7420 676f  ary hack that go
+00000920: 6573 2061 7761 7920 7768 656e 2077 6520  es away when we 
+00000930: 696e 7472 6f64 7563 6520 7468 6520 6469  introduce the di
+00000940: 6d5f 6f72 6465 720a 2020 2020 2020 2020  m_order.        
+00000950: 2320 636f 6e63 6570 742e 2057 6520 7368  # concept. We sh
+00000960: 6f75 6c64 2072 6563 6569 7665 2074 6865  ould receive the
+00000970: 2061 6374 7561 6c20 6f72 6465 7220 6469   actual order di
+00000980: 7265 6374 6c79 2069 6e20 7468 6520 6375  rectly in the cu
+00000990: 6265 5f72 6573 706f 6e73 652e 0a20 2020  be_response..   
+000009a0: 2020 2020 2023 2053 6f2c 2061 6c6c 2074       # So, all t
+000009b0: 6869 7320 6c6f 6769 6320 7769 6c6c 2062  his logic will b
+000009c0: 6520 6465 6c65 7465 642e 0a20 2020 2020  e deleted..     
+000009d0: 2020 2064 696d 656e 7369 6f6e 5f74 7970     dimension_typ
+000009e0: 6573 203d 2074 7570 6c65 2864 2e64 696d  es = tuple(d.dim
+000009f0: 656e 7369 6f6e 5f74 7970 6520 666f 7220  ension_type for 
+00000a00: 6420 696e 2073 656c 662e 5f64 696d 656e  d in self._dimen
+00000a10: 7369 6f6e 7329 0a20 2020 2020 2020 2064  sions).        d
+00000a20: 696d 5f6f 7264 6572 203d 2074 7570 6c65  im_order = tuple
+00000a30: 2872 616e 6765 286c 656e 2873 656c 662e  (range(len(self.
+00000a40: 5f64 696d 656e 7369 6f6e 7329 2929 0a20  _dimensions))). 
+00000a50: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00000a60: 6c66 2e5f 6469 6d65 6e73 696f 6e73 2920  lf._dimensions) 
+00000a70: 3e3d 2032 2061 6e64 2044 542e 4e55 4d5f  >= 2 and DT.NUM_
+00000a80: 4152 5241 5920 696e 2064 696d 656e 7369  ARRAY in dimensi
+00000a90: 6f6e 5f74 7970 6573 3a0a 2020 2020 2020  on_types:.      
+00000aa0: 2020 2020 2020 7265 7475 726e 2028 0a20        return (. 
+00000ab0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00000ac0: 696d 5f6f 7264 6572 5b2d 323a 5d20 2b20  im_order[-2:] + 
+00000ad0: 2864 696d 5f6f 7264 6572 5b30 5d2c 290a  (dim_order[0],).
+00000ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000af0: 6966 206c 656e 2873 656c 662e 5f64 696d  if len(self._dim
+00000b00: 656e 7369 6f6e 7329 203d 3d20 330a 2020  ensions) == 3.  
+00000b10: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00000b20: 7365 2064 696d 5f6f 7264 6572 5b3a 3a2d  se dim_order[::-
+00000b30: 315d 0a20 2020 2020 2020 2020 2020 2029  1].            )
+00000b40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00000b50: 6469 6d5f 6f72 6465 720a 0a20 2020 2040  dim_order..    @
+00000b60: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00000b70: 2064 6566 2073 6861 7065 2873 656c 6629   def shape(self)
+00000b80: 202d 3e20 5475 706c 655b 696e 742c 202e   -> Tuple[int, .
+00000b90: 2e2e 5d3a 0a20 2020 2020 2020 2022 2222  ..]:.        """
+00000ba0: 5475 706c 6520 6f66 2069 6e74 2065 6c65  Tuple of int ele
+00000bb0: 6d65 6e74 2063 6f75 6e74 2066 6f72 2065  ment count for e
+00000bc0: 6163 6820 6469 6d65 6e73 696f 6e2e 0a0a  ach dimension...
+00000bd0: 2020 2020 2020 2020 5468 6973 2063 6f72          This cor
+00000be0: 7265 7370 6f6e 6473 2074 6f20 7468 6520  responds to the 
+00000bf0: 7368 6170 6520 6f66 2074 6865 206e 6461  shape of the nda
+00000c00: 7272 6179 2072 6570 7265 7365 6e74 696e  rray representin
+00000c10: 6720 7468 6520 7261 770a 2020 2020 2020  g the raw.      
+00000c20: 2020 6375 6265 2072 6573 706f 6e73 6520    cube response 
+00000c30: 7661 6c75 6573 2028 7261 7720 6d65 616e  values (raw mean
+00000c40: 696e 6720 696e 636c 7564 696e 6720 6d69  ing including mi
+00000c50: 7373 696e 6720 616e 6420 7072 756e 6162  ssing and prunab
+00000c60: 6c65 0a20 2020 2020 2020 2065 6c65 6d65  le.        eleme
+00000c70: 6e74 7320 616e 6420 616e 7920 4d52 5f43  nts and any MR_C
+00000c80: 4154 2064 696d 656e 7369 6f6e 7329 2e0a  AT dimensions)..
+00000c90: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00000ca0: 2020 2020 6469 6d65 6e73 696f 6e73 203d      dimensions =
+00000cb0: 205b 7365 6c66 2e5f 6469 6d65 6e73 696f   [self._dimensio
+00000cc0: 6e73 5b69 5d20 666f 7220 6920 696e 2073  ns[i] for i in s
+00000cd0: 656c 662e 6469 6d65 6e73 696f 6e5f 6f72  elf.dimension_or
+00000ce0: 6465 725d 0a20 2020 2020 2020 2072 6574  der].        ret
+00000cf0: 7572 6e20 7475 706c 6528 642e 7368 6170  urn tuple(d.shap
+00000d00: 6520 666f 7220 6420 696e 2064 696d 656e  e for d in dimen
+00000d10: 7369 6f6e 7329 0a0a 2020 2020 406c 617a  sions)..    @laz
+00000d20: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+00000d30: 6620 5f64 696d 656e 7369 6f6e 7328 7365  f _dimensions(se
+00000d40: 6c66 2920 2d3e 2054 7570 6c65 5b22 4469  lf) -> Tuple["Di
+00000d50: 6d65 6e73 696f 6e22 2c20 2e2e 2e5d 3a0a  mension", ...]:.
+00000d60: 2020 2020 2020 2020 2222 2274 7570 6c65          """tuple
+00000d70: 206f 6620 6469 6d65 6e73 696f 6e20 6f62   of dimension ob
+00000d80: 6a65 6374 7320 696e 2074 6869 7320 636f  jects in this co
+00000d90: 6c6c 6563 7469 6f6e 2e0a 0a20 2020 2020  llection...     
+00000da0: 2020 2054 6869 7320 636f 6d70 6f73 6564     This composed
+00000db0: 2074 7570 6c65 2069 7320 7468 6520 696e   tuple is the in
+00000dc0: 7465 726e 616c 2073 6f75 7263 6520 666f  ternal source fo
+00000dd0: 7220 7468 6520 6469 6d65 6e73 696f 6e20  r the dimension 
+00000de0: 6f62 6a65 6374 730a 2020 2020 2020 2020  objects.        
+00000df0: 696e 2074 6869 7320 636f 6c6c 6563 7469  in this collecti
+00000e00: 6f6e 2e0a 2020 2020 2020 2020 2222 220a  on..        """.
+00000e10: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00000e20: 7570 6c65 285f 4469 6d65 6e73 696f 6e46  uple(_DimensionF
+00000e30: 6163 746f 7279 2e69 7465 725f 6469 6d65  actory.iter_dime
+00000e40: 6e73 696f 6e73 2873 656c 662e 5f64 696d  nsions(self._dim
+00000e50: 656e 7369 6f6e 5f64 6963 7473 2929 0a0a  ension_dicts))..
+00000e60: 0a63 6c61 7373 205f 4170 7061 7265 6e74  .class _Apparent
+00000e70: 4469 6d65 6e73 696f 6e73 285f 4261 7365  Dimensions(_Base
+00000e80: 4469 6d65 6e73 696f 6e73 293a 0a20 2020  Dimensions):.   
+00000e90: 2022 2222 436f 6c6c 6563 7469 6f6e 2063   """Collection c
+00000ea0: 6f6e 7461 696e 696e 6720 6f6e 6c79 2022  ontaining only "
+00000eb0: 7573 6572 2220 6469 6d65 6e73 696f 6e73  user" dimensions
+00000ec0: 206f 6620 6120 6375 6265 2e22 2222 0a0a   of a cube."""..
+00000ed0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00000ee0: 2873 656c 662c 2061 6c6c 5f64 696d 656e  (self, all_dimen
+00000ef0: 7369 6f6e 7329 3a0a 2020 2020 2020 2020  sions):.        
+00000f00: 7365 6c66 2e5f 616c 6c5f 6469 6d65 6e73  self._all_dimens
+00000f10: 696f 6e73 203d 2061 6c6c 5f64 696d 656e  ions = all_dimen
+00000f20: 7369 6f6e 730a 0a20 2020 2040 6c61 7a79  sions..    @lazy
+00000f30: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00000f40: 205f 6469 6d65 6e73 696f 6e73 2873 656c   _dimensions(sel
+00000f50: 6629 202d 3e20 5475 706c 655b 2244 696d  f) -> Tuple["Dim
+00000f60: 656e 7369 6f6e 222c 202e 2e2e 5d3a 0a20  ension", ...]:. 
+00000f70: 2020 2020 2020 2022 2222 7475 706c 6520         """tuple 
+00000f80: 6f66 2064 696d 656e 7369 6f6e 206f 626a  of dimension obj
+00000f90: 6563 7473 2069 6e20 7468 6973 2063 6f6c  ects in this col
+00000fa0: 6c65 6374 696f 6e2e 0a0a 2020 2020 2020  lection...      
+00000fb0: 2020 5468 6973 2063 6f6d 706f 7365 6420    This composed 
+00000fc0: 7475 706c 6520 6973 2074 6865 2073 6f75  tuple is the sou
+00000fd0: 7263 6520 666f 7220 7468 6520 6469 6d65  rce for the dime
+00000fe0: 6e73 696f 6e20 6f62 6a65 6374 7320 696e  nsion objects in
+00000ff0: 2074 6869 730a 2020 2020 2020 2020 636f   this.        co
+00001000: 6c6c 6563 7469 6f6e 2e0a 2020 2020 2020  llection..      
+00001010: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00001020: 7475 726e 2074 7570 6c65 2864 2066 6f72  turn tuple(d for
+00001030: 2064 2069 6e20 7365 6c66 2e5f 616c 6c5f   d in self._all_
+00001040: 6469 6d65 6e73 696f 6e73 2069 6620 642e  dimensions if d.
+00001050: 6469 6d65 6e73 696f 6e5f 7479 7065 2021  dimension_type !
+00001060: 3d20 4454 2e4d 525f 4341 5429 0a0a 0a63  = DT.MR_CAT)...c
+00001070: 6c61 7373 205f 4469 6d65 6e73 696f 6e46  lass _DimensionF
+00001080: 6163 746f 7279 3a0a 2020 2020 2222 2250  actory:.    """P
+00001090: 726f 6475 6365 2044 696d 656e 7369 6f6e  roduce Dimension
+000010a0: 206f 626a 6563 7473 206f 6620 636f 7272   objects of corr
+000010b0: 6563 7420 7479 7065 2066 726f 6d20 6469  ect type from di
+000010c0: 6d65 6e73 696f 6e2d 6469 6374 732e 0a0a  mension-dicts...
+000010d0: 2020 2020 2274 7970 6522 2068 6572 6520      "type" here 
+000010e0: 6973 2070 7269 6d61 7269 6c79 2074 6865  is primarily the
+000010f0: 2060 2e64 696d 656e 7369 6f6e 5f74 7970   `.dimension_typ
+00001100: 6560 2076 616c 7565 206f 6620 7468 6520  e` value of the 
+00001110: 6469 6d65 6e73 696f 6e2c 0a20 2020 2061  dimension,.    a
+00001120: 6c74 686f 7567 6820 6966 2060 4469 6d65  lthough if `Dime
+00001130: 6e73 696f 6e60 2062 6563 6f6d 6573 2061  nsion` becomes a
+00001140: 6e20 6f62 6a65 6374 2068 6965 7261 7263  n object hierarc
+00001150: 6879 2c20 7468 6973 2066 6163 746f 7279  hy, this factory
+00001160: 2077 6f75 6c64 0a20 2020 206d 616b 6520   would.    make 
+00001170: 6469 6d65 6e73 696f 6e20 636c 6173 7320  dimension class 
+00001180: 6368 6f69 6365 7320 6173 2077 656c 6c2e  choices as well.
+00001190: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+000011a0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+000011b0: 2064 696d 656e 7369 6f6e 5f64 6963 7473   dimension_dicts
+000011c0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+000011d0: 5f64 696d 656e 7369 6f6e 5f64 6963 7473  _dimension_dicts
+000011e0: 203d 2064 696d 656e 7369 6f6e 5f64 6963   = dimension_dic
+000011f0: 7473 0a0a 2020 2020 4063 6c61 7373 6d65  ts..    @classme
+00001200: 7468 6f64 0a20 2020 2064 6566 2069 7465  thod.    def ite
+00001210: 725f 6469 6d65 6e73 696f 6e73 2863 6c73  r_dimensions(cls
+00001220: 2c20 6469 6d65 6e73 696f 6e5f 6469 6374  , dimension_dict
+00001230: 7329 202d 3e20 4974 6572 6174 6f72 5b22  s) -> Iterator["
+00001240: 4469 6d65 6e73 696f 6e22 5d3a 0a20 2020  Dimension"]:.   
+00001250: 2020 2020 2022 2222 4765 6e65 7261 7465       """Generate
+00001260: 2044 696d 656e 7369 6f6e 206f 626a 6563   Dimension objec
+00001270: 7420 666f 7220 6561 6368 206f 6620 2a64  t for each of *d
+00001280: 696d 656e 7369 6f6e 5f64 6963 7473 2a2e  imension_dicts*.
+00001290: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+000012a0: 726e 2063 6c73 2864 696d 656e 7369 6f6e  rn cls(dimension
+000012b0: 5f64 6963 7473 292e 5f69 7465 725f 6469  _dicts)._iter_di
+000012c0: 6d65 6e73 696f 6e73 2829 0a0a 2020 2020  mensions()..    
+000012d0: 6465 6620 5f69 7465 725f 6469 6d65 6e73  def _iter_dimens
+000012e0: 696f 6e73 2873 656c 6629 202d 3e20 4974  ions(self) -> It
+000012f0: 6572 6174 6f72 5b22 4469 6d65 6e73 696f  erator["Dimensio
+00001300: 6e22 5d3a 0a20 2020 2020 2020 2022 2222  n"]:.        """
+00001310: 4765 6e65 7261 7465 2044 696d 656e 7369  Generate Dimensi
+00001320: 6f6e 206f 626a 6563 7420 666f 7220 6561  on object for ea
+00001330: 6368 2064 696d 656e 7369 6f6e 2064 6963  ch dimension dic
+00001340: 742e 2222 220a 2020 2020 2020 2020 7265  t.""".        re
+00001350: 7475 726e 2028 0a20 2020 2020 2020 2020  turn (.         
+00001360: 2020 2044 696d 656e 7369 6f6e 2872 6177     Dimension(raw
+00001370: 5f64 696d 656e 7369 6f6e 2e64 696d 656e  _dimension.dimen
+00001380: 7369 6f6e 5f64 6963 742c 2072 6177 5f64  sion_dict, raw_d
+00001390: 696d 656e 7369 6f6e 2e64 696d 656e 7369  imension.dimensi
+000013a0: 6f6e 5f74 7970 6529 0a20 2020 2020 2020  on_type).       
+000013b0: 2020 2020 2066 6f72 2072 6177 5f64 696d       for raw_dim
+000013c0: 656e 7369 6f6e 2069 6e20 7365 6c66 2e5f  ension in self._
+000013d0: 7261 775f 6469 6d65 6e73 696f 6e73 0a20  raw_dimensions. 
+000013e0: 2020 2020 2020 2029 0a0a 2020 2020 406c         )..    @l
+000013f0: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00001400: 6465 6620 5f72 6177 5f64 696d 656e 7369  def _raw_dimensi
+00001410: 6f6e 7328 7365 6c66 2920 2d3e 2054 7570  ons(self) -> Tup
+00001420: 6c65 5b22 5f52 6177 4469 6d65 6e73 696f  le["_RawDimensio
+00001430: 6e22 2c20 2e2e 2e5d 3a0a 2020 2020 2020  n", ...]:.      
+00001440: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
+00001450: 205f 5261 7744 696d 656e 7369 6f6e 206f   _RawDimension o
+00001460: 626a 6563 7473 2077 7261 7070 696e 6720  bjects wrapping 
+00001470: 6561 6368 2064 696d 656e 7369 6f6e 2064  each dimension d
+00001480: 6963 742e 2222 220a 2020 2020 2020 2020  ict.""".        
+00001490: 7265 7475 726e 2074 7570 6c65 280a 2020  return tuple(.  
+000014a0: 2020 2020 2020 2020 2020 5f52 6177 4469            _RawDi
+000014b0: 6d65 6e73 696f 6e28 6469 6d65 6e73 696f  mension(dimensio
+000014c0: 6e5f 6469 6374 2c20 7365 6c66 2e5f 6469  n_dict, self._di
+000014d0: 6d65 6e73 696f 6e5f 6469 6374 7329 0a20  mension_dicts). 
+000014e0: 2020 2020 2020 2020 2020 2066 6f72 2064             for d
+000014f0: 696d 656e 7369 6f6e 5f64 6963 7420 696e  imension_dict in
+00001500: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00001510: 5f64 6963 7473 0a20 2020 2020 2020 2029  _dicts.        )
+00001520: 0a0a 0a63 6c61 7373 205f 5261 7744 696d  ...class _RawDim
+00001530: 656e 7369 6f6e 3a0a 2020 2020 2222 2254  ension:.    """T
+00001540: 6869 6e20 7772 6170 7065 7220 6172 6f75  hin wrapper arou
+00001550: 6e64 2064 696d 656e 7369 6f6e 2d64 6963  nd dimension-dic
+00001560: 7420 746f 2073 7570 706f 7274 2064 696d  t to support dim
+00001570: 656e 7369 6f6e 2d74 7970 6520 6469 7363  ension-type disc
+00001580: 6f76 6572 792e 0a0a 2020 2020 4465 7465  overy...    Dete
+00001590: 726d 696e 696e 6720 6469 6d65 6e73 696f  rmining dimensio
+000015a0: 6e2d 7479 7065 2069 7320 7072 6574 7479  n-type is pretty
+000015b0: 2063 6f6d 706c 6578 2061 6e64 2072 6571   complex and req
+000015c0: 7569 7265 7320 7265 7065 6174 6564 0a20  uires repeated. 
+000015d0: 2020 2070 6172 7469 616c 2070 6172 7369     partial parsi
+000015e0: 6e67 206f 6620 626f 7468 2074 6865 2064  ng of both the d
+000015f0: 696d 656e 7369 6f6e 2064 6963 7420 616e  imension dict an
+00001600: 6420 6974 7320 7369 626c 696e 6773 2e20  d its siblings. 
+00001610: 5468 6973 2063 6c61 7373 0a20 2020 2061  This class.    a
+00001620: 6273 7472 6163 7473 2074 6861 7420 6163  bstracts that ac
+00001630: 6365 7373 2066 6f72 2063 6c61 7269 7479  cess for clarity
+00001640: 2e0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
+00001650: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00001660: 2c20 6469 6d65 6e73 696f 6e5f 6469 6374  , dimension_dict
+00001670: 2c20 6469 6d65 6e73 696f 6e5f 6469 6374  , dimension_dict
+00001680: 7329 3a0a 2020 2020 2020 2020 7365 6c66  s):.        self
+00001690: 2e5f 6469 6d65 6e73 696f 6e5f 6469 6374  ._dimension_dict
+000016a0: 203d 2064 696d 656e 7369 6f6e 5f64 6963   = dimension_dic
+000016b0: 740a 2020 2020 2020 2020 7365 6c66 2e5f  t.        self._
+000016c0: 6469 6d65 6e73 696f 6e5f 6469 6374 7320  dimension_dicts 
+000016d0: 3d20 6469 6d65 6e73 696f 6e5f 6469 6374  = dimension_dict
+000016e0: 730a 0a20 2020 2040 6c61 7a79 7072 6f70  s..    @lazyprop
+000016f0: 6572 7479 0a20 2020 2064 6566 2064 696d  erty.    def dim
+00001700: 656e 7369 6f6e 5f64 6963 7428 7365 6c66  ension_dict(self
+00001710: 2920 2d3e 2044 6963 743a 0a20 2020 2020  ) -> Dict:.     
+00001720: 2020 2022 2222 6469 6374 2064 6566 696e     """dict defin
+00001730: 696e 6720 7468 6973 2064 696d 656e 7369  ing this dimensi
+00001740: 6f6e 2069 6e20 6375 6265 2072 6573 706f  on in cube respo
+00001750: 6e73 652e 2222 220a 2020 2020 2020 2020  nse.""".        
+00001760: 7265 7475 726e 2073 656c 662e 5f64 696d  return self._dim
+00001770: 656e 7369 6f6e 5f64 6963 740a 0a20 2020  ension_dict..   
+00001780: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00001790: 2020 2064 6566 2064 696d 656e 7369 6f6e     def dimension
+000017a0: 5f74 7970 6528 7365 6c66 2920 2d3e 205f  _type(self) -> _
+000017b0: 4469 6d65 6e73 696f 6e54 7970 653a 0a20  DimensionType:. 
+000017c0: 2020 2020 2020 2022 2222 5f44 696d 656e         """_Dimen
+000017d0: 7369 6f6e 5479 7065 2028 6d65 6d62 6572  sionType (member
+000017e0: 206f 6620 4449 4d45 4e53 494f 4e5f 5459   of DIMENSION_TY
+000017f0: 5045 2920 6170 7072 6f70 7269 6174 6520  PE) appropriate 
+00001800: 746f 2064 696d 656e 7369 6f6e 5f64 6963  to dimension_dic
+00001810: 742e 2222 220a 2020 2020 2020 2020 6261  t.""".        ba
+00001820: 7365 5f74 7970 6520 3d20 7365 6c66 2e5f  se_type = self._
+00001830: 6261 7365 5f74 7970 650a 2020 2020 2020  base_type.      
+00001840: 2020 6966 2062 6173 655f 7479 7065 203d    if base_type =
+00001850: 3d20 2263 6174 6567 6f72 6963 616c 223a  = "categorical":
+00001860: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00001870: 7572 6e20 7365 6c66 2e5f 7265 736f 6c76  urn self._resolv
+00001880: 655f 6361 7465 676f 7269 6361 6c28 290a  e_categorical().
+00001890: 2020 2020 2020 2020 6966 2062 6173 655f          if base_
+000018a0: 7479 7065 203d 3d20 2265 6e75 6d2e 7661  type == "enum.va
+000018b0: 7269 6162 6c65 223a 0a20 2020 2020 2020  riable":.       
+000018c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000018d0: 2e5f 7265 736f 6c76 655f 6172 7261 795f  ._resolve_array_
+000018e0: 7479 7065 2829 0a20 2020 2020 2020 2069  type().        i
+000018f0: 6620 6261 7365 5f74 7970 6520 3d3d 2022  f base_type == "
+00001900: 656e 756d 2e64 6174 6574 696d 6522 3a0a  enum.datetime":.
+00001910: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00001920: 726e 2044 542e 4441 5445 5449 4d45 0a20  rn DT.DATETIME. 
+00001930: 2020 2020 2020 2069 6620 6261 7365 5f74         if base_t
+00001940: 7970 6520 3d3d 2022 656e 756d 2e6e 756d  ype == "enum.num
+00001950: 6572 6963 223a 0a20 2020 2020 2020 2020  eric":.         
+00001960: 2020 2072 6574 7572 6e20 4454 2e42 494e     return DT.BIN
+00001970: 4e45 445f 4e55 4d45 5249 430a 2020 2020  NED_NUMERIC.    
+00001980: 2020 2020 6966 2062 6173 655f 7479 7065      if base_type
+00001990: 203d 3d20 2265 6e75 6d2e 7465 7874 223a   == "enum.text":
+000019a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000019b0: 7572 6e20 4454 2e54 4558 540a 2020 2020  urn DT.TEXT.    
+000019c0: 2020 2020 6966 2062 6173 655f 7479 7065      if base_type
+000019d0: 203d 3d20 2265 6e75 6d2e 6e75 6d5f 6172   == "enum.num_ar
+000019e0: 7222 3a0a 2020 2020 2020 2020 2020 2020  r":.            
+000019f0: 7265 7475 726e 2044 542e 4e55 4d5f 4152  return DT.NUM_AR
+00001a00: 5241 590a 2020 2020 2020 2020 7261 6973  RAY.        rais
+00001a10: 6520 4e6f 7449 6d70 6c65 6d65 6e74 6564  e NotImplemented
+00001a20: 4572 726f 7228 6622 756e 7265 636f 676e  Error(f"unrecogn
+00001a30: 697a 6564 2064 696d 656e 7369 6f6e 2074  ized dimension t
+00001a40: 7970 6520 7b62 6173 655f 7479 7065 7d22  ype {base_type}"
+00001a50: 290a 0a20 2020 2040 6c61 7a79 7072 6f70  )..    @lazyprop
+00001a60: 6572 7479 0a20 2020 2064 6566 205f 616c  erty.    def _al
+00001a70: 6961 7328 7365 6c66 2920 2d3e 2073 7472  ias(self) -> str
+00001a80: 3a0a 2020 2020 2020 2020 2222 2252 6574  :.        """Ret
+00001a90: 7572 6e20 7374 7220 6b65 7920 666f 7220  urn str key for 
+00001aa0: 7661 7269 6162 6c65 2062 6568 696e 6420  variable behind 
+00001ab0: 2a64 696d 656e 7369 6f6e 5f64 6963 742a  *dimension_dict*
+00001ac0: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
+00001ad0: 7572 6e20 7365 6c66 2e5f 6469 6d65 6e73  urn self._dimens
+00001ae0: 696f 6e5f 6469 6374 5b22 7265 6665 7265  ion_dict["refere
+00001af0: 6e63 6573 225d 5b22 616c 6961 7322 5d0a  nces"]["alias"].
+00001b00: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00001b10: 7479 0a20 2020 2064 6566 205f 6261 7365  ty.    def _base
+00001b20: 5f74 7970 6528 7365 6c66 2920 2d3e 2073  _type(self) -> s
+00001b30: 7472 3a0a 2020 2020 2020 2020 2222 2252  tr:.        """R
+00001b40: 6574 7572 6e20 7374 7220 6c69 6b65 2027  eturn str like '
+00001b50: 656e 756d 2e6e 756d 6572 6963 2720 7265  enum.numeric' re
+00001b60: 7072 6573 656e 7469 6e67 2064 696d 656e  presenting dimen
+00001b70: 7369 6f6e 2074 7970 652e 0a0a 2020 2020  sion type...    
+00001b80: 2020 2020 5468 6973 2073 7472 696e 6720      This string 
+00001b90: 6973 2061 2027 7479 7065 2e73 7562 636c  is a 'type.subcl
+00001ba0: 6173 7327 2063 6f6e 6361 7465 6e61 7469  ass' concatenati
+00001bb0: 6f6e 206f 6620 7468 6520 7374 7220 6b65  on of the str ke
+00001bc0: 7973 0a20 2020 2020 2020 2075 7365 6420  ys.        used 
+00001bd0: 746f 2069 6465 6e74 6966 7920 7468 6520  to identify the 
+00001be0: 6469 6d65 6e73 696f 6e20 7479 7065 2069  dimension type i
+00001bf0: 6e20 7468 6520 6375 6265 2072 6573 706f  n the cube respo
+00001c00: 6e73 6520 4a53 4f4e 2e0a 2020 2020 2020  nse JSON..      
+00001c10: 2020 5468 6520 272e 7375 6263 6c61 7373    The '.subclass
+00001c20: 2720 7375 6666 6978 206f 6e6c 7920 6170  ' suffix only ap
+00001c30: 7065 6172 7320 7768 6572 6520 6120 7375  pears where a su
+00001c40: 6274 7970 6520 6973 2070 7265 7365 6e74  btype is present
+00001c50: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00001c60: 2020 2020 2020 7479 7065 5f63 6c61 7373        type_class
+00001c70: 203d 2073 656c 662e 5f64 696d 656e 7369   = self._dimensi
+00001c80: 6f6e 5f64 6963 745b 2274 7970 6522 5d5b  on_dict["type"][
+00001c90: 2263 6c61 7373 225d 0a20 2020 2020 2020  "class"].       
+00001ca0: 2069 6620 7479 7065 5f63 6c61 7373 203d   if type_class =
+00001cb0: 3d20 2263 6174 6567 6f72 6963 616c 223a  = "categorical":
+00001cc0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00001cd0: 7572 6e20 2263 6174 6567 6f72 6963 616c  urn "categorical
+00001ce0: 220a 2020 2020 2020 2020 6966 2074 7970  ".        if typ
+00001cf0: 655f 636c 6173 7320 3d3d 2022 656e 756d  e_class == "enum
+00001d00: 223a 0a20 2020 2020 2020 2020 2020 2073  ":.            s
+00001d10: 7562 636c 6173 7320 3d20 7365 6c66 2e5f  ubclass = self._
+00001d20: 6469 6d65 6e73 696f 6e5f 6469 6374 5b22  dimension_dict["
+00001d30: 7479 7065 225d 5b22 7375 6274 7970 6522  type"]["subtype"
+00001d40: 5d5b 2263 6c61 7373 225d 0a20 2020 2020  ]["class"].     
+00001d50: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
+00001d60: 656e 756d 2e7b 7375 6263 6c61 7373 7d22  enum.{subclass}"
+00001d70: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
+00001d80: 6f74 496d 706c 656d 656e 7465 6445 7272  otImplementedErr
+00001d90: 6f72 2866 2275 6e65 7870 6563 7465 6420  or(f"unexpected 
+00001da0: 6469 6d65 6e73 696f 6e20 7479 7065 2063  dimension type c
+00001db0: 6c61 7373 2027 7b74 7970 655f 636c 6173  lass '{type_clas
+00001dc0: 737d 2722 290a 0a20 2020 2040 6c61 7a79  s}'")..    @lazy
+00001dd0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00001de0: 205f 6361 7465 676f 7269 6573 2873 656c   _categories(sel
+00001df0: 6629 202d 3e20 4c69 7374 5b44 6963 745d  f) -> List[Dict]
+00001e00: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00001e10: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00001e20: 5f64 6963 745b 2274 7970 6522 5d2e 6765  _dict["type"].ge
+00001e30: 7428 2263 6174 6567 6f72 6965 7322 2c20  t("categories", 
+00001e40: 5b5d 290a 0a20 2020 2040 6c61 7a79 7072  [])..    @lazypr
+00001e50: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+00001e60: 6861 735f 7365 6c65 6374 6564 5f63 6174  has_selected_cat
+00001e70: 6567 6f72 7928 7365 6c66 2920 2d3e 2062  egory(self) -> b
+00001e80: 6f6f 6c3a 0a20 2020 2020 2020 2022 2222  ool:.        """
+00001e90: 5472 7565 2069 6620 6469 6d65 6e73 696f  True if dimensio
+00001ea0: 6e2d 6469 6374 2069 6e63 6c75 6465 7320  n-dict includes 
+00001eb0: 6f6e 6520 6f72 206d 6f72 6520 7365 6c65  one or more sele
+00001ec0: 6374 6564 2063 6174 6567 6f72 6965 732e  cted categories.
+00001ed0: 0a0a 2020 2020 2020 2020 4120 2273 656c  ..        A "sel
+00001ee0: 6563 7465 6422 2063 6174 6567 6f72 792d  ected" category-
+00001ef0: 6469 6374 2069 7320 6f6e 6520 6861 7669  dict is one havi
+00001f00: 6e67 2060 2773 656c 6563 7465 6427 3a20  ng `'selected': 
+00001f10: 5472 7565 602e 2054 6869 730a 2020 2020  True`. This.    
+00001f20: 2020 2020 7072 6f70 6572 7479 2069 7320      property is 
+00001f30: 6f6e 6c79 206d 6561 6e69 6e67 6675 6c20  only meaningful 
+00001f40: 666f 7220 6120 6361 7465 676f 7269 6361  for a categorica
+00001f50: 6c20 6469 6d65 6e73 696f 6e20 6469 6374  l dimension dict
+00001f60: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00001f70: 2020 2020 2020 7265 7475 726e 2061 6e79        return any
+00001f80: 2863 6174 6567 6f72 792e 6765 7428 2273  (category.get("s
+00001f90: 656c 6563 7465 6422 2920 666f 7220 6361  elected") for ca
+00001fa0: 7465 676f 7279 2069 6e20 7365 6c66 2e5f  tegory in self._
+00001fb0: 6361 7465 676f 7269 6573 290a 0a20 2020  categories)..   
+00001fc0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00001fd0: 2020 2064 6566 205f 6973 5f6c 6f67 6963     def _is_logic
+00001fe0: 616c 5f74 7970 6528 7365 6c66 2920 2d3e  al_type(self) ->
+00001ff0: 2062 6f6f 6c3a 0a20 2020 2020 2020 2022   bool:.        "
+00002000: 2222 5472 7565 2069 6620 6469 6d65 6e73  ""True if dimens
+00002010: 696f 6e2d 6469 6374 2068 6173 2074 6865  ion-dict has the
+00002020: 2063 6174 6567 6f72 6965 7320 6571 7561   categories equa
+00002030: 6c20 746f 2074 686f 7365 206f 6620 7468  l to those of th
+00002040: 6520 6c6f 6769 6361 6c20 7479 7065 2e0a  e logical type..
+00002050: 0a20 2020 2020 2020 204c 6f67 6963 616c  .        Logical
+00002060: 2074 7970 6520 6861 7320 6578 6163 746c   type has exactl
+00002070: 7920 7468 7265 6520 6361 7465 676f 7269  y three categori
+00002080: 6573 2077 6974 6820 4944 7320 5b2d 312c  es with IDs [-1,
+00002090: 2030 2c20 315d 2e20 5468 6973 2074 7970   0, 1]. This typ
+000020a0: 6520 6973 0a20 2020 2020 2020 2075 7365  e is.        use
+000020b0: 6420 746f 2064 6566 696e 6520 7468 6520  d to define the 
+000020c0: 7365 6c65 6374 696f 6e73 2064 696d 656e  selections dimen
+000020d0: 7369 6f6e 206f 6620 7468 6520 6d75 6c74  sion of the mult
+000020e0: 6970 6c65 2072 6573 706f 6e73 6520 7479  iple response ty
+000020f0: 7065 2c20 7768 656e 2069 740a 2020 2020  pe, when it.    
+00002100: 2020 2020 666f 6c6c 6f77 7320 7468 6520      follows the 
+00002110: 7375 6276 6172 6961 626c 6573 2064 696d  subvariables dim
+00002120: 656e 7369 6f6e 2e0a 2020 2020 2020 2020  ension..        
+00002130: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00002140: 726e 205b 6361 7465 676f 7279 2e67 6574  rn [category.get
+00002150: 2822 6964 2229 2066 6f72 2063 6174 6567  ("id") for categ
+00002160: 6f72 7920 696e 2073 656c 662e 5f63 6174  ory in self._cat
+00002170: 6567 6f72 6965 735d 203d 3d20 5b31 2c20  egories] == [1, 
+00002180: 302c 202d 315d 0a0a 2020 2020 406c 617a  0, -1]..    @laz
+00002190: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+000021a0: 6620 5f69 735f 6172 7261 795f 6361 7428  f _is_array_cat(
+000021b0: 7365 6c66 2920 2d3e 2062 6f6f 6c3a 0a20  self) -> bool:. 
+000021c0: 2020 2020 2020 2022 2222 5472 7565 2069         """True i
+000021d0: 6620 6120 6361 7465 676f 7269 6361 6c20  f a categorical 
+000021e0: 6469 6d65 6e73 696f 6e5f 6469 6374 2062  dimension_dict b
+000021f0: 656c 6f6e 6773 2074 6f20 616e 2061 7272  elongs to an arr
+00002200: 6179 2070 6169 722e 0a0a 2020 2020 2020  ay pair...      
+00002210: 2020 5265 7475 726e 7320 5472 7565 2066    Returns True f
+00002220: 6f72 2061 2043 415f 4341 5420 6f72 204d  or a CA_CAT or M
+00002230: 525f 4341 5420 6469 6d65 6e73 696f 6e2e  R_CAT dimension.
+00002240: 204f 6e6c 7920 6d65 616e 696e 6766 756c   Only meaningful
+00002250: 2077 6865 6e0a 2020 2020 2020 2020 7468   when.        th
+00002260: 6520 6469 6d65 6e73 696f 6e20 6973 206b  e dimension is k
+00002270: 6e6f 776e 2074 6f20 6265 2063 6174 6567  nown to be categ
+00002280: 6f72 6963 616c 2028 6861 7320 6261 7365  orical (has base
+00002290: 2d74 7970 650a 2020 2020 2020 2020 2763  -type.        'c
+000022a0: 6174 6567 6f72 6963 616c 2729 2e0a 2020  ategorical')..  
+000022b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000022c0: 2020 7265 7475 726e 2022 7375 6272 6566    return "subref
+000022d0: 6572 656e 6365 7322 2069 6e20 7365 6c66  erences" in self
+000022e0: 2e5f 6469 6d65 6e73 696f 6e5f 6469 6374  ._dimension_dict
+000022f0: 5b22 7265 6665 7265 6e63 6573 225d 0a0a  ["references"]..
+00002300: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+00002310: 790a 2020 2020 6465 6620 5f69 735f 6361  y.    def _is_ca
+00002320: 745f 6461 7465 2873 656c 6629 202d 3e20  t_date(self) -> 
+00002330: 626f 6f6c 3a0a 2020 2020 2020 2020 2222  bool:.        ""
+00002340: 2254 7275 6520 6966 2064 696d 656e 7369  "True if dimensi
+00002350: 6f6e 2069 7320 6120 6361 7465 676f 7269  on is a categori
+00002360: 6361 6c20 6461 7465 2c20 4661 6c73 6520  cal date, False 
+00002370: 6f74 6865 7277 6973 652e 0a0a 2020 2020  otherwise...    
+00002380: 2020 2020 4120 6469 6d65 6e73 696f 6e20      A dimension 
+00002390: 6973 2061 2063 6174 6567 6f72 6963 616c  is a categorical
+000023a0: 2064 6174 652c 2069 6620 6974 2068 6173   date, if it has
+000023b0: 2061 6c6c 2074 6865 2070 726f 7065 7274   all the propert
+000023c0: 6965 7320 6f66 2061 2022 6e6f 726d 616c  ies of a "normal
+000023d0: 220a 2020 2020 2020 2020 6361 7465 676f  ".        catego
+000023e0: 7269 6361 6c20 6469 6d65 6e73 696f 6e2c  rical dimension,
+000023f0: 2062 7574 2061 6c73 6f20 6120 6022 6461   but also a `"da
+00002400: 7465 2260 2066 6965 6c64 2069 6e20 616e  te"` field in an
+00002410: 7920 6f66 2069 7473 2063 6174 6567 6f72  y of its categor
+00002420: 6965 732e 0a20 2020 2020 2020 2022 2222  ies..        """
+00002430: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00002440: 2e5f 6469 6d65 6e73 696f 6e5f 6469 6374  ._dimension_dict
+00002450: 5b22 7479 7065 225d 5b22 636c 6173 7322  ["type"]["class"
+00002460: 5d20 213d 2022 6361 7465 676f 7269 6361  ] != "categorica
+00002470: 6c22 3a0a 2020 2020 2020 2020 2020 2020  l":.            
+00002480: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00002490: 2020 2020 2072 6574 7572 6e20 616e 7928       return any(
+000024a0: 2264 6174 6522 2069 6e20 6361 7420 666f  "date" in cat fo
+000024b0: 7220 6361 7420 696e 2073 656c 662e 5f63  r cat in self._c
+000024c0: 6174 6567 6f72 6965 7329 0a0a 2020 2020  ategories)..    
+000024d0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+000024e0: 2020 6465 6620 5f6e 6578 745f 7261 775f    def _next_raw_
+000024f0: 6469 6d65 6e73 696f 6e28 7365 6c66 2920  dimension(self) 
+00002500: 2d3e 204f 7074 696f 6e61 6c5b 225f 5261  -> Optional["_Ra
+00002510: 7744 696d 656e 7369 6f6e 225d 3a0a 2020  wDimension"]:.  
+00002520: 2020 2020 2020 2222 225f 5261 7744 696d        """_RawDim
+00002530: 656e 7369 6f6e 2066 6f72 206e 6578 7420  ension for next 
+00002540: 2a64 696d 656e 7369 6f6e 5f64 6963 742a  *dimension_dict*
+00002550: 2069 6e20 7365 7175 656e 6365 206f 7220   in sequence or 
+00002560: 4e6f 6e65 2066 6f72 206c 6173 742e 0a0a  None for last...
+00002570: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+00002580: 4e6f 6e65 2069 6620 7468 6973 2064 696d  None if this dim
+00002590: 656e 7369 6f6e 2069 7320 7468 6520 6c61  ension is the la
+000025a0: 7374 2069 6e20 7365 7175 656e 6365 2066  st in sequence f
+000025b0: 6f72 2074 6869 7320 6375 6265 2e0a 2020  or this cube..  
+000025c0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000025d0: 2020 6469 6d65 6e73 696f 6e5f 6469 6374    dimension_dict
+000025e0: 7320 3d20 7365 6c66 2e5f 6469 6d65 6e73  s = self._dimens
+000025f0: 696f 6e5f 6469 6374 730a 2020 2020 2020  ion_dicts.      
+00002600: 2020 7468 6973 5f69 6478 203d 2064 696d    this_idx = dim
+00002610: 656e 7369 6f6e 5f64 6963 7473 2e69 6e64  ension_dicts.ind
+00002620: 6578 2873 656c 662e 5f64 696d 656e 7369  ex(self._dimensi
+00002630: 6f6e 5f64 6963 7429 0a20 2020 2020 2020  on_dict).       
+00002640: 2069 6620 7468 6973 5f69 6478 203e 206c   if this_idx > l
+00002650: 656e 2864 696d 656e 7369 6f6e 5f64 6963  en(dimension_dic
+00002660: 7473 2920 2d20 323a 0a20 2020 2020 2020  ts) - 2:.       
+00002670: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+00002680: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00002690: 5f52 6177 4469 6d65 6e73 696f 6e28 6469  _RawDimension(di
+000026a0: 6d65 6e73 696f 6e5f 6469 6374 735b 7468  mension_dicts[th
+000026b0: 6973 5f69 6478 202b 2031 5d2c 2073 656c  is_idx + 1], sel
+000026c0: 662e 5f64 696d 656e 7369 6f6e 5f64 6963  f._dimension_dic
+000026d0: 7473 290a 0a20 2020 2064 6566 205f 7265  ts)..    def _re
+000026e0: 736f 6c76 655f 6172 7261 795f 7479 7065  solve_array_type
+000026f0: 2873 656c 6629 202d 3e20 5f44 696d 656e  (self) -> _Dimen
+00002700: 7369 6f6e 5479 7065 3a0a 2020 2020 2020  sionType:.      
+00002710: 2020 2222 2252 6574 7572 6e20 6f6e 6520    """Return one 
+00002720: 6f66 2074 6865 2041 5252 4159 5f54 5950  of the ARRAY_TYP
+00002730: 4553 206d 656d 6265 7273 206f 6620 4449  ES members of DI
+00002740: 4d45 4e53 494f 4e5f 5459 5045 2e0a 0a20  MENSION_TYPE... 
+00002750: 2020 2020 2020 2054 6869 7320 6d65 7468         This meth
+00002760: 6f64 2064 6973 7469 6e67 7569 7368 6573  od distinguishes
+00002770: 2062 6574 7765 656e 2043 4120 616e 6420   between CA and 
+00002780: 4d52 2064 696d 656e 7369 6f6e 732e 2054  MR dimensions. T
+00002790: 6865 2072 6574 7572 6e0a 2020 2020 2020  he return.      
+000027a0: 2020 7661 6c75 6520 6973 206f 6e6c 7920    value is only 
+000027b0: 6d65 616e 696e 6766 756c 2069 6620 7468  meaningful if th
+000027c0: 6520 6469 6d65 6e73 696f 6e20 6973 206b  e dimension is k
+000027d0: 6e6f 776e 2074 6f20 6265 206f 6620 6172  nown to be of ar
+000027e0: 7261 790a 2020 2020 2020 2020 7479 7065  ray.        type
+000027f0: 2028 692e 652e 2065 6974 6865 7220 4341   (i.e. either CA
+00002800: 206f 7220 4d52 2c20 6261 7365 2d74 7970   or MR, base-typ
+00002810: 6520 2765 6e75 6d2e 7661 7269 6162 6c65  e 'enum.variable
+00002820: 2729 2e0a 2020 2020 2020 2020 2222 220a  ')..        """.
+00002830: 2020 2020 2020 2020 6e65 7874 5f72 6177          next_raw
+00002840: 5f64 696d 656e 7369 6f6e 203d 2073 656c  _dimension = sel
+00002850: 662e 5f6e 6578 745f 7261 775f 6469 6d65  f._next_raw_dime
+00002860: 6e73 696f 6e0a 2020 2020 2020 2020 6966  nsion.        if
+00002870: 206e 6578 745f 7261 775f 6469 6d65 6e73   next_raw_dimens
+00002880: 696f 6e20 6973 204e 6f6e 653a 0a20 2020  ion is None:.   
+00002890: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000028a0: 4454 2e43 410a 0a20 2020 2020 2020 2069  DT.CA..        i
+000028b0: 735f 6d72 5f73 7562 7661 7220 3d20 280a  s_mr_subvar = (.
+000028c0: 2020 2020 2020 2020 2020 2020 6e65 7874              next
+000028d0: 5f72 6177 5f64 696d 656e 7369 6f6e 2e5f  _raw_dimension._
+000028e0: 6261 7365 5f74 7970 6520 3d3d 2022 6361  base_type == "ca
+000028f0: 7465 676f 7269 6361 6c22 0a20 2020 2020  tegorical".     
+00002900: 2020 2020 2020 2061 6e64 206e 6578 745f         and next_
+00002910: 7261 775f 6469 6d65 6e73 696f 6e2e 5f68  raw_dimension._h
+00002920: 6173 5f73 656c 6563 7465 645f 6361 7465  as_selected_cate
+00002930: 676f 7279 0a20 2020 2020 2020 2020 2020  gory.           
+00002940: 2061 6e64 206e 6578 745f 7261 775f 6469   and next_raw_di
+00002950: 6d65 6e73 696f 6e2e 5f61 6c69 6173 203d  mension._alias =
+00002960: 3d20 7365 6c66 2e5f 616c 6961 730a 2020  = self._alias.  
+00002970: 2020 2020 2020 2020 2020 616e 6420 6e65            and ne
+00002980: 7874 5f72 6177 5f64 696d 656e 7369 6f6e  xt_raw_dimension
+00002990: 2e5f 6973 5f6c 6f67 6963 616c 5f74 7970  ._is_logical_typ
+000029a0: 650a 2020 2020 2020 2020 290a 2020 2020  e.        ).    
+000029b0: 2020 2020 7265 7475 726e 2044 542e 4d52      return DT.MR
+000029c0: 2069 6620 6973 5f6d 725f 7375 6276 6172   if is_mr_subvar
+000029d0: 2065 6c73 6520 4454 2e43 410a 0a20 2020   else DT.CA..   
+000029e0: 2064 6566 205f 7265 736f 6c76 655f 6361   def _resolve_ca
+000029f0: 7465 676f 7269 6361 6c28 7365 6c66 2920  tegorical(self) 
+00002a00: 2d3e 205f 4469 6d65 6e73 696f 6e54 7970  -> _DimensionTyp
+00002a10: 653a 0a20 2020 2020 2020 2022 2222 5265  e:.        """Re
+00002a20: 7475 726e 206f 6e65 206f 6620 7468 6520  turn one of the 
+00002a30: 6361 7465 676f 7269 6361 6c20 6d65 6d62  categorical memb
+00002a40: 6572 7320 6f66 2044 494d 454e 5349 4f4e  ers of DIMENSION
+00002a50: 5f54 5950 452e 0a0a 2020 2020 2020 2020  _TYPE...        
+00002a60: 5468 6973 206d 6574 686f 6420 6469 7374  This method dist
+00002a70: 696e 6775 6973 6865 7320 6265 7477 6565  inguishes betwee
+00002a80: 6e20 4341 542c 2043 415f 4341 542c 204d  n CAT, CA_CAT, M
+00002a90: 525f 4341 542c 2061 6e64 204c 4f47 4943  R_CAT, and LOGIC
+00002aa0: 414c 0a20 2020 2020 2020 2064 696d 656e  AL.        dimen
+00002ab0: 7369 6f6e 2074 7970 6573 2c20 616c 6c20  sion types, all 
+00002ac0: 6f66 2077 6869 6368 2068 6176 6520 7468  of which have th
+00002ad0: 6520 6261 7365 2074 7970 6520 2763 6174  e base type 'cat
+00002ae0: 6567 6f72 6963 616c 272e 2054 6865 0a20  egorical'. The. 
+00002af0: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
+00002b00: 6c75 6520 6973 206f 6e6c 7920 6d65 616e  lue is only mean
+00002b10: 696e 6766 756c 2069 6620 7468 6520 6469  ingful if the di
+00002b20: 6d65 6e73 696f 6e20 6973 206b 6e6f 776e  mension is known
+00002b30: 2074 6f20 6265 206f 6e65 0a20 2020 2020   to be one.     
+00002b40: 2020 206f 6620 7468 6520 6361 7465 676f     of the catego
+00002b50: 7269 6361 6c20 7479 7065 7320 2868 6173  rical types (has
+00002b60: 2062 6173 652d 7479 7065 2027 6361 7465   base-type 'cate
+00002b70: 676f 7269 6361 6c27 292e 0a20 2020 2020  gorical')..     
+00002b80: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
+00002b90: 202d 2d2d 616e 2061 7272 6179 2063 6174   ---an array cat
+00002ba0: 6567 6f72 6963 616c 2069 7320 6569 7468  egorical is eith
+00002bb0: 6572 2043 415f 4341 5420 6f72 204d 525f  er CA_CAT or MR_
+00002bc0: 4341 542d 2d2d 0a20 2020 2020 2020 2069  CAT---.        i
+00002bd0: 6620 7365 6c66 2e5f 6973 5f61 7272 6179  f self._is_array
+00002be0: 5f63 6174 3a0a 2020 2020 2020 2020 2020  _cat:.          
+00002bf0: 2020 7265 7475 726e 2028 0a20 2020 2020    return (.     
+00002c00: 2020 2020 2020 2020 2020 2044 542e 4d52             DT.MR
+00002c10: 5f43 4154 0a20 2020 2020 2020 2020 2020  _CAT.           
+00002c20: 2020 2020 2069 6620 7365 6c66 2e5f 6861       if self._ha
+00002c30: 735f 7365 6c65 6374 6564 5f63 6174 6567  s_selected_categ
+00002c40: 6f72 7920 616e 6420 7365 6c66 2e5f 6973  ory and self._is
+00002c50: 5f6c 6f67 6963 616c 5f74 7970 650a 2020  _logical_type.  
+00002c60: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00002c70: 7365 2044 542e 4341 5f43 4154 0a20 2020  se DT.CA_CAT.   
+00002c80: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00002c90: 2020 2020 2320 2d2d 2d77 6861 7427 7320      # ---what's 
+00002ca0: 6c65 6674 2069 7320 7468 7265 6520 6469  left is three di
+00002cb0: 6666 6572 656e 7420 7665 7273 696f 6e73  fferent versions
+00002cc0: 206f 6620 6361 7465 676f 7269 6361 6c20   of categorical 
+00002cd0: 6469 6d65 6e73 696f 6e2d 2d2d 0a0a 2020  dimension---..  
+00002ce0: 2020 2020 2020 2320 2d2d 2d66 6972 7374        # ---first
+00002cf0: 2074 6865 206c 6f67 6963 616c 2d2d 2d0a   the logical---.
+00002d00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00002d10: 5f68 6173 5f73 656c 6563 7465 645f 6361  _has_selected_ca
+00002d20: 7465 676f 7279 2061 6e64 2073 656c 662e  tegory and self.
+00002d30: 5f69 735f 6c6f 6769 6361 6c5f 7479 7065  _is_logical_type
+00002d40: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00002d50: 7475 726e 2044 542e 4c4f 4749 4341 4c0a  turn DT.LOGICAL.
+00002d60: 0a20 2020 2020 2020 2023 202d 2d2d 6f72  .        # ---or
+00002d70: 2061 2063 6174 6567 6f72 6963 616c 2064   a categorical d
+00002d80: 6174 652d 2d2d 0a20 2020 2020 2020 2069  ate---.        i
+00002d90: 6620 7365 6c66 2e5f 6973 5f63 6174 5f64  f self._is_cat_d
+00002da0: 6174 653a 0a20 2020 2020 2020 2020 2020  ate:.           
+00002db0: 2072 6574 7572 6e20 4454 2e43 4154 5f44   return DT.CAT_D
+00002dc0: 4154 450a 0a20 2020 2020 2020 2023 202d  ATE..        # -
+00002dd0: 2d2d 6f72 2074 6865 2070 6c61 696e 2d6f  --or the plain-o
+00002de0: 6c64 2063 6174 6567 6f72 6963 616c 2d2d  ld categorical--
+00002df0: 2d0a 2020 2020 2020 2020 7265 7475 726e  -.        return
+00002e00: 2044 542e 4341 540a 0a0a 636c 6173 7320   DT.CAT...class 
+00002e10: 4469 6d65 6e73 696f 6e3a 0a20 2020 2022  Dimension:.    "
+00002e20: 2222 5265 7072 6573 656e 7473 206f 6e65  ""Represents one
+00002e30: 2064 696d 656e 7369 6f6e 206f 6620 6120   dimension of a 
+00002e40: 6375 6265 2072 6573 706f 6e73 652e 0a0a  cube response...
+00002e50: 2020 2020 4561 6368 2064 696d 656e 7369      Each dimensi
+00002e60: 6f6e 2072 6570 7265 7365 6e74 7320 6f6e  on represents on
+00002e70: 6520 6f66 2074 6865 2076 6172 6961 626c  e of the variabl
+00002e80: 6573 2069 6e20 6120 6375 6265 2072 6573  es in a cube res
+00002e90: 706f 6e73 652e 2046 6f72 0a20 2020 2065  ponse. For.    e
+00002ea0: 7861 6d70 6c65 2c20 6120 7175 6572 7920  xample, a query 
+00002eb0: 746f 2063 726f 7373 2d74 6162 756c 6174  to cross-tabulat
+00002ec0: 6520 736e 6163 6b2d 666f 6f64 2070 7265  e snack-food pre
+00002ed0: 6665 7265 6e63 6520 6167 6169 6e73 7420  ference against 
+00002ee0: 7265 6769 6f6e 0a20 2020 2077 696c 6c20  region.    will 
+00002ef0: 6861 7665 2074 776f 2076 6172 6961 626c  have two variabl
+00002f00: 6573 2028 736e 6163 6b2d 666f 6f64 2070  es (snack-food p
+00002f10: 7265 6665 7265 6e63 6520 616e 6420 7265  reference and re
+00002f20: 6769 6f6e 2920 616e 6420 7769 6c6c 2070  gion) and will p
+00002f30: 726f 6475 6365 0a20 2020 2061 2074 776f  roduce.    a two
+00002f40: 2d64 696d 656e 7369 6f6e 616c 2028 3244  -dimensional (2D
+00002f50: 2920 6375 6265 2072 6573 706f 6e73 652e  ) cube response.
+00002f60: 2054 6861 7420 6375 6265 2077 696c 6c20   That cube will 
+00002f70: 6861 7665 2074 776f 206f 6620 7468 6573  have two of thes
+00002f80: 650a 2020 2020 6469 6d65 6e73 696f 6e20  e.    dimension 
+00002f90: 6f62 6a65 6374 732c 2077 6869 6368 2061  objects, which a
+00002fa0: 7265 2061 6363 6573 7365 6420 7573 696e  re accessed usin
+00002fb0: 670a 2020 2020 3a61 7474 723a 602e 4372  g.    :attr:`.Cr
+00002fc0: 756e 6368 4375 6265 2e64 696d 656e 7369  unchCube.dimensi
+00002fd0: 6f6e 7360 2e0a 2020 2020 2222 220a 0a20  ons`..    """.. 
+00002fe0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00002ff0: 7365 6c66 2c20 6469 6d65 6e73 696f 6e5f  self, dimension_
+00003000: 6469 6374 2c20 6469 6d65 6e73 696f 6e5f  dict, dimension_
+00003010: 7479 7065 2c20 6469 6d65 6e73 696f 6e5f  type, dimension_
+00003020: 7472 616e 7366 6f72 6d73 3d4e 6f6e 6529  transforms=None)
+00003030: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
+00003040: 756e 7368 696d 6d65 645f 6469 6d65 6e73  unshimmed_dimens
+00003050: 696f 6e5f 6469 6374 203d 2064 696d 656e  ion_dict = dimen
+00003060: 7369 6f6e 5f64 6963 740a 2020 2020 2020  sion_dict.      
+00003070: 2020 7365 6c66 2e5f 6469 6d65 6e73 696f    self._dimensio
+00003080: 6e5f 7479 7065 203d 2064 696d 656e 7369  n_type = dimensi
+00003090: 6f6e 5f74 7970 650a 2020 2020 2020 2020  on_type.        
+000030a0: 7365 6c66 2e5f 756e 7368 696d 6d65 645f  self._unshimmed_
+000030b0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+000030c0: 6f72 6d73 5f64 6963 7420 3d20 6469 6d65  orms_dict = dime
+000030d0: 6e73 696f 6e5f 7472 616e 7366 6f72 6d73  nsion_transforms
+000030e0: 206f 7220 7b7d 0a0a 2020 2020 406c 617a   or {}..    @laz
+000030f0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+00003100: 6620 616c 6961 7328 7365 6c66 2920 2d3e  f alias(self) ->
+00003110: 204f 7074 696f 6e61 6c5b 7374 725d 3a0a   Optional[str]:.
+00003120: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
+00003130: 6e20 7468 6520 616c 6961 7320 666f 7220  n the alias for 
+00003140: 7468 6520 6469 6d65 6e73 696f 6e20 6966  the dimension if
+00003150: 2069 7420 6578 6973 7473 2c20 4e6f 6e65   it exists, None
+00003160: 206f 7468 6572 7769 7365 2e22 2222 0a20   otherwise.""". 
+00003170: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00003180: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 6469  lf._dimension_di
+00003190: 6374 5b22 7265 6665 7265 6e63 6573 225d  ct["references"]
+000031a0: 2e67 6574 2822 616c 6961 7322 290a 0a20  .get("alias").. 
+000031b0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+000031c0: 0a20 2020 2064 6566 2061 6c6c 5f65 6c65  .    def all_ele
+000031d0: 6d65 6e74 7328 7365 6c66 2920 2d3e 2022  ments(self) -> "
+000031e0: 5f41 6c6c 456c 656d 656e 7473 223a 0a20  _AllElements":. 
+000031f0: 2020 2020 2020 2022 2222 5f41 6c6c 456c         """_AllEl
+00003200: 656d 656e 7473 206f 626a 6563 7420 7072  ements object pr
+00003210: 6f76 6964 696e 6720 6361 7473 206f 7220  oviding cats or 
+00003220: 7375 6276 6172 7320 6f66 2074 6869 7320  subvars of this 
+00003230: 6469 6d65 6e73 696f 6e2e 0a0a 2020 2020  dimension...    
+00003240: 2020 2020 456c 656d 656e 7473 2069 6e20      Elements in 
+00003250: 7468 6973 2073 6571 7565 6e63 6520 6170  this sequence ap
+00003260: 7065 6172 2069 6e20 6375 6265 2d72 6573  pear in cube-res
+00003270: 756c 7420 6f72 6465 722e 0a20 2020 2020  ult order..     
+00003280: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00003290: 6574 7572 6e20 5f41 6c6c 456c 656d 656e  eturn _AllElemen
+000032a0: 7473 280a 2020 2020 2020 2020 2020 2020  ts(.            
+000032b0: 7365 6c66 2e5f 6469 6d65 6e73 696f 6e5f  self._dimension_
+000032c0: 6469 6374 5b22 7479 7065 225d 2c0a 2020  dict["type"],.  
+000032d0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000032e0: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+000032f0: 6f72 6d73 5f64 6963 742c 0a20 2020 2020  orms_dict,.     
+00003300: 2020 2020 2020 2073 656c 662e 5f64 696d         self._dim
+00003310: 656e 7369 6f6e 5f74 7970 652c 0a20 2020  ension_type,.   
+00003320: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00003330: 6170 706c 795f 7472 616e 7366 6f72 6d73  apply_transforms
+00003340: 2873 656c 662c 2064 696d 656e 7369 6f6e  (self, dimension
+00003350: 5f74 7261 6e73 666f 726d 7329 202d 3e20  _transforms) -> 
+00003360: 2244 696d 656e 7369 6f6e 223a 0a20 2020  "Dimension":.   
+00003370: 2020 2020 2022 2222 5265 7475 726e 2061       """Return a
+00003380: 206e 6577 2060 4469 6d65 6e73 696f 6e60   new `Dimension`
+00003390: 206f 626a 6563 7420 7769 7468 2060 6469   object with `di
+000033a0: 6d65 6e73 696f 6e5f 7472 616e 7366 6f72  mension_transfor
+000033b0: 6d73 6020 6170 706c 6965 642e 0a0a 2020  ms` applied...  
+000033c0: 2020 2020 2020 5468 6520 6e65 7720 6469        The new di
+000033d0: 6d65 6e73 696f 6e20 6f62 6a65 6374 2069  mension object i
+000033e0: 7320 7468 6520 7361 6d65 2061 7320 7468  s the same as th
+000033f0: 6973 206f 6e65 2069 6e20 616c 6c20 6f74  is one in all ot
+00003400: 6865 7220 7265 7370 6563 7473 2e0a 2020  her respects..  
+00003410: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00003420: 2020 2320 2d2d 2d20 5573 6520 756e 7368    # --- Use unsh
+00003430: 696d 6d65 6420 602e 5f64 696d 656e 7369  immed `._dimensi
+00003440: 6f6e 5f64 6963 7460 2062 6563 6175 7365  on_dict` because
+00003450: 2077 6520 6e65 6564 2074 6f20 7265 2d73   we need to re-s
+00003460: 6869 6d20 6974 2061 6c6f 6e67 7369 6465  him it alongside
+00003470: 0a20 2020 2020 2020 2023 202d 2d2d 2074  .        # --- t
+00003480: 6865 206e 6577 2064 696d 656e 7369 6f6e  he new dimension
+00003490: 5f74 7261 6e73 666f 726d 7320 6469 6374  _transforms dict
+000034a0: 696f 6e61 7279 0a20 2020 2020 2020 2072  ionary.        r
+000034b0: 6574 7572 6e20 4469 6d65 6e73 696f 6e28  eturn Dimension(
+000034c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000034d0: 662e 5f75 6e73 6869 6d6d 6564 5f64 696d  f._unshimmed_dim
+000034e0: 656e 7369 6f6e 5f64 6963 742c 2073 656c  ension_dict, sel
+000034f0: 662e 5f64 696d 656e 7369 6f6e 5f74 7970  f._dimension_typ
+00003500: 652c 2064 696d 656e 7369 6f6e 5f74 7261  e, dimension_tra
+00003510: 6e73 666f 726d 730a 2020 2020 2020 2020  nsforms.        
+00003520: 290a 0a20 2020 2040 6c61 7a79 7072 6f70  )..    @lazyprop
+00003530: 6572 7479 0a20 2020 2064 6566 2064 6573  erty.    def des
+00003540: 6372 6970 7469 6f6e 2873 656c 6629 202d  cription(self) -
+00003550: 3e20 7374 723a 0a20 2020 2020 2020 2022  > str:.        "
+00003560: 2222 7374 7220 6465 7363 7269 7074 696f  ""str descriptio
+00003570: 6e20 6f66 2074 6869 7320 6469 6d65 6e73  n of this dimens
+00003580: 696f 6e2e 2222 220a 2020 2020 2020 2020  ion.""".        
+00003590: 2320 2d2d 2d46 6972 7374 2061 7574 686f  # ---First autho
+000035a0: 7269 7479 2069 6e20 6361 7363 6164 6520  rity in cascade 
+000035b0: 6973 2061 6e61 6c79 7369 732d 7370 6563  is analysis-spec
+000035c0: 6966 6963 2064 696d 656e 7369 6f6e 2074  ific dimension t
+000035d0: 7261 6e73 666f 726d 2e20 4e6f 6e65 0a20  ransform. None. 
+000035e0: 2020 2020 2020 2023 202d 2d2d 6973 2061         # ---is a
+000035f0: 206c 6567 6974 696d 6174 6520 7661 6c75   legitimate valu
+00003600: 652c 2069 6e64 6963 6174 696e 6720 7375  e, indicating su
+00003610: 7070 7265 7373 696f 6e20 6f66 2061 6e79  ppression of any
+00003620: 2069 6e68 6572 6974 6564 2073 7562 7469   inherited subti
+00003630: 746c 652e 0a20 2020 2020 2020 2069 6620  tle..        if 
+00003640: 2264 6573 6372 6970 7469 6f6e 2220 696e  "description" in
+00003650: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00003660: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+00003670: 3a0a 2020 2020 2020 2020 2020 2020 6465  :.            de
+00003680: 7363 7269 7074 696f 6e20 3d20 7365 6c66  scription = self
+00003690: 2e5f 6469 6d65 6e73 696f 6e5f 7472 616e  ._dimension_tran
+000036a0: 7366 6f72 6d73 5f64 6963 745b 2264 6573  sforms_dict["des
+000036b0: 6372 6970 7469 6f6e 225d 0a20 2020 2020  cription"].     
+000036c0: 2020 2023 202d 2d2d 696e 6865 7269 7465     # ---inherite
+000036d0: 6420 7661 6c75 6520 6973 2062 6173 6520  d value is base 
+000036e0: 6469 6d65 6e73 696f 6e20 6465 7363 7269  dimension descri
+000036f0: 7074 696f 6e2d 2d2d 0a20 2020 2020 2020  ption---.       
+00003700: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00003710: 2020 2064 6573 6372 6970 7469 6f6e 203d     description =
+00003720: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00003730: 5f64 6963 745b 2272 6566 6572 656e 6365  _dict["reference
+00003740: 7322 5d2e 6765 7428 2264 6573 6372 6970  s"].get("descrip
+00003750: 7469 6f6e 2229 0a0a 2020 2020 2020 2020  tion")..        
+00003760: 2320 2d2d 2d4e 6f72 6d61 6c69 7a65 2074  # ---Normalize t
+00003770: 6f20 2222 2073 6f20 7265 7475 726e 2076  o "" so return v
+00003780: 616c 7565 2069 7320 616c 7761 7973 2061  alue is always a
+00003790: 2073 7472 2061 6e64 2063 616c 6c65 7273   str and callers
+000037a0: 2064 6f6e 2774 206e 6565 6420 746f 0a20   don't need to. 
+000037b0: 2020 2020 2020 2023 202d 2d2d 6465 616c         # ---deal
+000037c0: 2077 6974 6820 4e6f 6e65 2061 7320 6120   with None as a 
+000037d0: 706f 7373 6962 6c65 2072 6574 7572 6e20  possible return 
+000037e0: 7479 7065 2e0a 2020 2020 2020 2020 7265  type..        re
+000037f0: 7475 726e 2064 6573 6372 6970 7469 6f6e  turn description
+00003800: 2069 6620 6465 7363 7269 7074 696f 6e20   if description 
+00003810: 656c 7365 2022 220a 0a20 2020 2040 6c61  else ""..    @la
+00003820: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00003830: 6566 2064 696d 656e 7369 6f6e 5f74 7970  ef dimension_typ
+00003840: 6528 7365 6c66 2920 2d3e 205f 4469 6d65  e(self) -> _Dime
+00003850: 6e73 696f 6e54 7970 653a 0a20 2020 2020  nsionType:.     
+00003860: 2020 2022 2222 4d65 6d62 6572 206f 6620     """Member of 
+00003870: 4449 4d45 4e53 494f 4e5f 5459 5045 2061  DIMENSION_TYPE a
+00003880: 7070 726f 7072 6961 7465 2074 6f20 7468  ppropriate to th
+00003890: 6973 2063 7562 6520 6469 6d65 6e73 696f  is cube dimensio
+000038a0: 6e2e 2222 220a 2020 2020 2020 2020 7265  n.""".        re
+000038b0: 7475 726e 2073 656c 662e 5f64 696d 656e  turn self._dimen
+000038c0: 7369 6f6e 5f74 7970 650a 0a20 2020 2040  sion_type..    @
+000038d0: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+000038e0: 2064 6566 2065 6c65 6d65 6e74 5f61 6c69   def element_ali
+000038f0: 6173 6573 2873 656c 6629 202d 3e20 5475  ases(self) -> Tu
+00003900: 706c 655b 7374 722c 202e 2e2e 5d3a 0a20  ple[str, ...]:. 
+00003910: 2020 2020 2020 2022 2222 7475 706c 6520         """tuple 
+00003920: 6f66 2073 7472 696e 6720 656c 656d 656e  of string elemen
+00003930: 742d 616c 6961 7365 7320 666f 7220 6561  t-aliases for ea
+00003940: 6368 2076 616c 6964 2065 6c65 6d65 6e74  ch valid element
+00003950: 2069 6e20 7468 6973 2064 696d 656e 7369   in this dimensi
+00003960: 6f6e 2e0a 0a20 2020 2020 2020 2045 6c65  on...        Ele
+00003970: 6d65 6e74 2d61 6c69 6173 6573 2061 7070  ment-aliases app
+00003980: 6561 7220 696e 2074 6865 206f 7264 6572  ear in the order
+00003990: 2064 6566 696e 6564 2069 6e20 7468 6520   defined in the 
+000039a0: 6375 6265 2d72 6573 756c 742e 0a20 2020  cube-result..   
+000039b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000039c0: 2072 6574 7572 6e20 7475 706c 6528 652e   return tuple(e.
+000039d0: 616c 6961 7320 666f 7220 6520 696e 2073  alias for e in s
+000039e0: 656c 662e 7661 6c69 645f 656c 656d 656e  elf.valid_elemen
+000039f0: 7473 290a 0a20 2020 2040 6c61 7a79 7072  ts)..    @lazypr
+00003a00: 6f70 6572 7479 0a20 2020 2064 6566 2065  operty.    def e
+00003a10: 6c65 6d65 6e74 5f69 6473 2873 656c 6629  lement_ids(self)
+00003a20: 202d 3e20 5475 706c 655b 696e 742c 202e   -> Tuple[int, .
+00003a30: 2e2e 5d3a 0a20 2020 2020 2020 2022 2222  ..]:.        """
+00003a40: 7475 706c 6520 6f66 2069 6e74 2065 6c65  tuple of int ele
+00003a50: 6d65 6e74 2d69 6420 666f 7220 6561 6368  ment-id for each
+00003a60: 2076 616c 6964 2065 6c65 6d65 6e74 2069   valid element i
+00003a70: 6e20 7468 6973 2064 696d 656e 7369 6f6e  n this dimension
+00003a80: 2e0a 0a20 2020 2020 2020 2045 6c65 6d65  ...        Eleme
+00003a90: 6e74 2d69 6473 2061 7070 6561 7220 696e  nt-ids appear in
+00003aa0: 2074 6865 206f 7264 6572 2064 6566 696e   the order defin
+00003ab0: 6564 2069 6e20 7468 6520 6375 6265 2d72  ed in the cube-r
+00003ac0: 6573 756c 742e 0a20 2020 2020 2020 2022  esult..        "
+00003ad0: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00003ae0: 6e20 7475 706c 6528 652e 656c 656d 656e  n tuple(e.elemen
+00003af0: 745f 6964 2066 6f72 2065 2069 6e20 7365  t_id for e in se
+00003b00: 6c66 2e76 616c 6964 5f65 6c65 6d65 6e74  lf.valid_element
+00003b10: 7329 0a0a 2020 2020 406c 617a 7970 726f  s)..    @lazypro
+00003b20: 7065 7274 790a 2020 2020 6465 6620 656c  perty.    def el
+00003b30: 656d 656e 745f 6c61 6265 6c73 2873 656c  ement_labels(sel
+00003b40: 6629 202d 3e20 5475 706c 655b 7374 722c  f) -> Tuple[str,
+00003b50: 202e 2e2e 5d3a 0a20 2020 2020 2020 2022   ...]:.        "
+00003b60: 2222 7475 706c 6520 6f66 2073 7472 696e  ""tuple of strin
+00003b70: 6720 656c 656d 656e 742d 6c61 6265 6c73  g element-labels
+00003b80: 2066 6f72 2065 6163 6820 7661 6c69 6420   for each valid 
+00003b90: 656c 656d 656e 7420 696e 2074 6869 7320  element in this 
+00003ba0: 6469 6d65 6e73 696f 6e2e 0a0a 2020 2020  dimension...    
+00003bb0: 2020 2020 456c 656d 656e 742d 6c61 6265      Element-labe
+00003bc0: 6c73 2061 7070 6561 7220 696e 2074 6865  ls appear in the
+00003bd0: 206f 7264 6572 2064 6566 696e 6564 2069   order defined i
+00003be0: 6e20 7468 6520 6375 6265 2d72 6573 756c  n the cube-resul
+00003bf0: 742e 0a20 2020 2020 2020 2022 2222 0a20  t..        """. 
+00003c00: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
+00003c10: 706c 6528 652e 6c61 6265 6c20 666f 7220  ple(e.label for 
+00003c20: 6520 696e 2073 656c 662e 7661 6c69 645f  e in self.valid_
+00003c30: 656c 656d 656e 7473 290a 0a20 2020 2040  elements)..    @
+00003c40: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00003c50: 2064 6566 2068 6964 6465 6e5f 6964 7873   def hidden_idxs
+00003c60: 2873 656c 6629 202d 3e20 5475 706c 655b  (self) -> Tuple[
+00003c70: 696e 742c 202e 2e2e 5d3a 0a20 2020 2020  int, ...]:.     
+00003c80: 2020 2022 2222 7475 706c 6520 6f66 2069     """tuple of i
+00003c90: 6e74 2065 6c65 6d65 6e74 2d69 6478 2066  nt element-idx f
+00003ca0: 6f72 2065 6163 6820 6869 6464 656e 2076  or each hidden v
+00003cb0: 616c 6964 2065 6c65 6d65 6e74 2069 6e20  alid element in 
+00003cc0: 7468 6973 2064 696d 656e 7369 6f6e 2e0a  this dimension..
+00003cd0: 0a20 2020 2020 2020 2041 6e20 656c 656d  .        An elem
+00003ce0: 656e 7420 6973 2068 6964 6465 6e20 7768  ent is hidden wh
+00003cf0: 656e 2061 2022 6869 6465 2220 7472 616e  en a "hide" tran
+00003d00: 7366 6f72 6d20 6973 2061 7070 6c69 6564  sform is applied
+00003d10: 2074 6f20 6974 2069 6e20 6974 7320 7472   to it in its tr
+00003d20: 616e 7366 6f72 6d73 0a20 2020 2020 2020  ansforms.       
+00003d30: 2064 6963 742e 0a20 2020 2020 2020 2022   dict..        "
+00003d40: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00003d50: 6e20 7475 706c 6528 0a20 2020 2020 2020  n tuple(.       
+00003d60: 2020 2020 2069 6478 2066 6f72 2069 6478       idx for idx
+00003d70: 2c20 656c 656d 656e 7420 696e 2065 6e75  , element in enu
+00003d80: 6d65 7261 7465 2873 656c 662e 7661 6c69  merate(self.vali
+00003d90: 645f 656c 656d 656e 7473 2920 6966 2065  d_elements) if e
+00003da0: 6c65 6d65 6e74 2e69 735f 6869 6464 656e  lement.is_hidden
+00003db0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00003dc0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00003dd0: 2020 6465 6620 696e 7365 7274 696f 6e5f    def insertion_
+00003de0: 6964 7328 7365 6c66 2920 2d3e 2054 7570  ids(self) -> Tup
+00003df0: 6c65 5b69 6e74 2c20 2e2e 2e5d 3a0a 2020  le[int, ...]:.  
+00003e00: 2020 2020 2020 2222 2274 7570 6c65 206f        """tuple o
+00003e10: 6620 696e 7420 696e 7365 7274 696f 6e2d  f int insertion-
+00003e20: 6964 2066 6f72 2065 6163 6820 696e 7365  id for each inse
+00003e30: 7274 696f 6e20 696e 2074 6869 7320 6469  rtion in this di
+00003e40: 6d65 6e73 696f 6e2e 0a0a 2020 2020 2020  mension...      
+00003e50: 2020 496e 7365 7274 696f 6e2d 6964 7320    Insertion-ids 
+00003e60: 6170 7065 6172 2069 6e20 7468 6520 6f72  appear in the or
+00003e70: 6465 7220 696e 7365 7274 696f 6e73 2061  der insertions a
+00003e80: 7265 2064 6566 696e 6564 2069 6e20 7468  re defined in th
+00003e90: 6520 6469 6d65 6e73 696f 6e2e 0a20 2020  e dimension..   
+00003ea0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00003eb0: 2072 6574 7572 6e20 7475 706c 6528 732e   return tuple(s.
+00003ec0: 696e 7365 7274 696f 6e5f 6964 2066 6f72  insertion_id for
+00003ed0: 2073 2069 6e20 7365 6c66 2e73 7562 746f   s in self.subto
+00003ee0: 7461 6c73 290a 0a20 2020 2040 6c61 7a79  tals)..    @lazy
+00003ef0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00003f00: 206e 616d 6528 7365 6c66 2920 2d3e 2073   name(self) -> s
+00003f10: 7472 3a0a 2020 2020 2020 2020 2222 2273  tr:.        """s
+00003f20: 7472 206e 616d 6520 6f66 2074 6869 7320  tr name of this 
+00003f30: 6469 6d65 6e73 696f 6e2c 2074 6865 2065  dimension, the e
+00003f40: 6d70 7479 2073 7472 696e 6720 2822 2229  mpty string ("")
+00003f50: 2069 6620 6e6f 7420 7370 6563 6966 6965   if not specifie
+00003f60: 642e 2222 220a 2020 2020 2020 2020 7265  d.""".        re
+00003f70: 6665 7265 6e63 6573 203d 2073 656c 662e  ferences = self.
+00003f80: 5f64 696d 656e 7369 6f6e 5f64 6963 745b  _dimension_dict[
+00003f90: 2272 6566 6572 656e 6365 7322 5d0a 0a20  "references"].. 
+00003fa0: 2020 2020 2020 2064 6566 2072 6177 5f6e         def raw_n
+00003fb0: 616d 6528 293a 0a20 2020 2020 2020 2020  ame():.         
+00003fc0: 2020 2022 2222 5265 7475 726e 2064 696d     """Return dim
+00003fd0: 656e 7369 6f6e 2d6e 616d 6520 6173 2073  ension-name as s
+00003fe0: 7065 6369 6669 6564 2028 604e 6f6e 6560  pecified (`None`
+00003ff0: 2069 7320 6e6f 7420 6e6f 726d 616c 697a   is not normaliz
+00004000: 6564 2074 6f20 2222 292e 2222 220a 2020  ed to "").""".  
+00004010: 2020 2020 2020 2020 2020 2320 2d2d 2d20            # --- 
+00004020: 4669 7273 7420 6175 7468 6f72 6974 7920  First authority 
+00004030: 696e 2063 6173 6361 6465 2069 7320 616e  in cascade is an
+00004040: 616c 7973 6973 2d73 7065 6369 6669 6320  alysis-specific 
+00004050: 6469 6d65 6e73 696f 6e20 7472 616e 7366  dimension transf
+00004060: 6f72 6d2e 0a20 2020 2020 2020 2020 2020  orm..           
+00004070: 2023 202d 2d2d 204e 6f6e 6520 6973 2061   # --- None is a
+00004080: 206c 6567 6974 696d 6174 6520 7661 6c75   legitimate valu
+00004090: 652c 2069 6e64 6963 6174 696e 6720 7375  e, indicating su
+000040a0: 7070 7265 7373 696f 6e20 6f66 2061 6e79  ppression of any
+000040b0: 2069 6e68 6572 6974 6564 0a20 2020 2020   inherited.     
+000040c0: 2020 2020 2020 2023 202d 2d2d 2074 6974         # --- tit
+000040d0: 6c65 2e0a 2020 2020 2020 2020 2020 2020  le..            
+000040e0: 6966 2022 6e61 6d65 2220 696e 2073 656c  if "name" in sel
+000040f0: 662e 5f64 696d 656e 7369 6f6e 5f74 7261  f._dimension_tra
+00004100: 6e73 666f 726d 735f 6469 6374 3a0a 2020  nsforms_dict:.  
+00004110: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00004120: 7475 726e 2073 656c 662e 5f64 696d 656e  turn self._dimen
+00004130: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
+00004140: 6469 6374 5b22 6e61 6d65 225d 0a20 2020  dict["name"].   
+00004150: 2020 2020 2020 2020 2023 202d 2d2d 206e           # --- n
+00004160: 6578 7420 6175 7468 6f72 6974 7920 6973  ext authority is
+00004170: 2062 6173 6520 6469 6d65 6e73 696f 6e20   base dimension 
+00004180: 6e61 6d65 202d 2d2d 0a20 2020 2020 2020  name ---.       
+00004190: 2020 2020 2069 6620 226e 616d 6522 2069       if "name" i
+000041a0: 6e20 7265 6665 7265 6e63 6573 3a0a 2020  n references:.  
+000041b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000041c0: 7475 726e 2072 6566 6572 656e 6365 735b  turn references[
+000041d0: 226e 616d 6522 5d0a 2020 2020 2020 2020  "name"].        
+000041e0: 2020 2020 2320 2d2d 2d20 6465 6661 756c      # --- defaul
+000041f0: 7420 6973 2064 696d 656e 7369 6f6e 2061  t is dimension a
+00004200: 6c69 6173 202d 2d2d 0a20 2020 2020 2020  lias ---.       
+00004210: 2020 2020 2072 6574 7572 6e20 7265 6665       return refe
+00004220: 7265 6e63 6573 2e67 6574 2822 616c 6961  rences.get("alia
+00004230: 7322 290a 0a20 2020 2020 2020 2023 202d  s")..        # -
+00004240: 2d2d 4e6f 726d 616c 697a 6520 4e6f 6e65  --Normalize None
+00004250: 2076 616c 7565 2074 6f20 2222 2073 6f20   value to "" so 
+00004260: 7265 7475 726e 2076 616c 7565 2069 7320  return value is 
+00004270: 616c 7761 7973 2061 2073 7472 2061 6e64  always a str and
+00004280: 2063 616c 6c65 7273 0a20 2020 2020 2020   callers.       
+00004290: 2023 202d 2d2d 646f 6e27 7420 6e65 6564   # ---don't need
+000042a0: 2074 6f20 6465 616c 2077 6974 6820 6d75   to deal with mu
+000042b0: 6c74 6970 6c65 2070 6f73 7369 626c 6520  ltiple possible 
+000042c0: 7265 7475 726e 2076 616c 7565 2074 7970  return value typ
+000042d0: 6573 2e0a 2020 2020 2020 2020 6e61 6d65  es..        name
+000042e0: 203d 2072 6177 5f6e 616d 6528 290a 2020   = raw_name().  
+000042f0: 2020 2020 2020 7265 7475 726e 206e 616d        return nam
+00004300: 6520 6966 206e 616d 6520 656c 7365 2022  e if name else "
+00004310: 220a 0a20 2020 2040 6c61 7a79 7072 6f70  "..    @lazyprop
+00004320: 6572 7479 0a20 2020 2064 6566 206e 756d  erty.    def num
+00004330: 6572 6963 5f76 616c 7565 7328 7365 6c66  eric_values(self
+00004340: 2920 2d3e 2054 7570 6c65 5b55 6e69 6f6e  ) -> Tuple[Union
+00004350: 5b69 6e74 2c20 666c 6f61 745d 2c20 2e2e  [int, float], ..
+00004360: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+00004370: 7570 6c65 206f 6620 6e75 6d65 7269 6320  uple of numeric 
+00004380: 7661 6c75 6573 2066 6f72 2076 616c 6964  values for valid
+00004390: 2065 6c65 6d65 6e74 7320 6f66 2074 6869   elements of thi
+000043a0: 7320 6469 6d65 6e73 696f 6e2e 0a0a 2020  s dimension...  
+000043b0: 2020 2020 2020 4561 6368 2063 6174 6567        Each categ
+000043c0: 6f72 7920 6f66 2061 2063 6174 6567 6f72  ory of a categor
+000043d0: 6963 616c 2076 6172 6961 626c 6520 6361  ical variable ca
+000043e0: 6e20 6265 2061 7373 6967 6e65 6420 6120  n be assigned a 
+000043f0: 2a6e 756d 6572 6963 0a20 2020 2020 2020  *numeric.       
+00004400: 2076 616c 7565 2a2e 2046 6f72 2065 7861   value*. For exa
+00004410: 6d70 6c65 2c20 6f6e 6520 6d69 6768 7420  mple, one might 
+00004420: 6173 7369 676e 2060 6c69 6b65 3d31 2c20  assign `like=1, 
+00004430: 6469 736c 696b 653d 2d31 2c0a 2020 2020  dislike=-1,.    
+00004440: 2020 2020 6e65 7574 7261 6c3d 3060 2e20      neutral=0`. 
+00004450: 5468 6573 6520 6e75 6d65 7269 6320 6d61  These numeric ma
+00004460: 7070 696e 6773 2061 6c6c 6f77 2071 7561  ppings allow qua
+00004470: 6e74 6974 6174 6976 6520 6f70 6572 6174  ntitative operat
+00004480: 696f 6e73 0a20 2020 2020 2020 2028 7375  ions.        (su
+00004490: 6368 2061 7320 6d65 616e 2920 746f 2062  ch as mean) to b
+000044a0: 6520 6170 706c 6965 6420 746f 2077 6861  e applied to wha
+000044b0: 7420 6e6f 7720 666f 726d 7320 6120 2a73  t now forms a *s
+000044c0: 6361 6c65 2a20 2869 6e20 7468 6973 0a20  cale* (in this. 
+000044d0: 2020 2020 2020 2065 7861 6d70 6c65 2c20         example, 
+000044e0: 6120 7363 616c 6520 6f66 2070 7265 6665  a scale of prefe
+000044f0: 7265 6e63 6529 2e0a 0a20 2020 2020 2020  rence)...       
+00004500: 2054 6865 206e 756d 6572 6963 2076 616c   The numeric val
+00004510: 7565 7320 6170 7065 6172 2069 6e20 7468  ues appear in th
+00004520: 6520 7361 6d65 206f 7264 6572 2061 7320  e same order as 
+00004530: 7468 650a 2020 2020 2020 2020 6361 7465  the.        cate
+00004540: 676f 7269 6573 2f65 6c65 6d65 6e74 7320  gories/elements 
+00004550: 6f66 2074 6869 7320 6469 6d65 6e73 696f  of this dimensio
+00004560: 6e2e 2045 6163 6820 656c 656d 656e 7420  n. Each element 
+00004570: 6973 2072 6570 7265 7365 6e74 6564 2062  is represented b
+00004580: 790a 2020 2020 2020 2020 6120 7661 6c75  y.        a valu
+00004590: 652c 2062 7574 2061 6e20 656c 656d 656e  e, but an elemen
+000045a0: 7420 7769 7468 206e 6f20 6e75 6d65 7269  t with no numeri
+000045b0: 6320 7661 6c75 6520 6170 7065 6172 7320  c value appears 
+000045c0: 6173 2060 6e70 2e6e 616e 6020 696e 0a20  as `np.nan` in. 
+000045d0: 2020 2020 2020 2074 6865 2072 6574 7572         the retur
+000045e0: 6e65 6420 6c69 7374 2e0a 2020 2020 2020  ned list..      
+000045f0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00004600: 7475 726e 2074 7570 6c65 2865 6c65 6d65  turn tuple(eleme
+00004610: 6e74 2e6e 756d 6572 6963 5f76 616c 7565  nt.numeric_value
+00004620: 2066 6f72 2065 6c65 6d65 6e74 2069 6e20   for element in 
+00004630: 7365 6c66 2e76 616c 6964 5f65 6c65 6d65  self.valid_eleme
+00004640: 6e74 7329 0a0a 2020 2020 406c 617a 7970  nts)..    @lazyp
+00004650: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00004660: 6f72 6465 725f 7370 6563 2873 656c 6629  order_spec(self)
+00004670: 202d 3e20 225f 4f72 6465 7253 7065 6322   -> "_OrderSpec"
+00004680: 3a0a 2020 2020 2020 2020 2222 225f 4f72  :.        """_Or
+00004690: 6465 7253 7065 6320 7072 6f78 7920 6f62  derSpec proxy ob
+000046a0: 6a65 6374 2066 6f72 2064 696d 656e 7369  ject for dimensi
+000046b0: 6f6e 2e74 7261 6e73 666f 726d 732e 6f72  on.transforms.or
+000046c0: 6465 7220 6469 6374 2066 726f 6d20 7061  der dict from pa
+000046d0: 796c 6f61 642e 2222 220a 2020 2020 2020  yload.""".      
+000046e0: 2020 7265 7475 726e 205f 4f72 6465 7253    return _OrderS
+000046f0: 7065 6328 7365 6c66 2c20 7365 6c66 2e5f  pec(self, self._
+00004700: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+00004710: 6f72 6d73 5f64 6963 7429 0a0a 2020 2020  orms_dict)..    
+00004720: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00004730: 2020 6465 6620 7072 756e 6528 7365 6c66    def prune(self
+00004740: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+00004750: 2020 2022 2222 5472 7565 2069 6620 656d     """True if em
+00004760: 7074 7920 656c 656d 656e 7473 2073 686f  pty elements sho
+00004770: 756c 6420 6265 2061 7574 6f6d 6174 6963  uld be automatic
+00004780: 616c 6c79 2068 6964 6465 6e20 6f6e 2074  ally hidden on t
+00004790: 6869 7320 6469 6d65 6e73 696f 6e2e 2222  his dimension.""
+000047a0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+000047b0: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+000047c0: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+000047d0: 2e67 6574 2822 7072 756e 6522 2920 6973  .get("prune") is
+000047e0: 2054 7275 650a 0a20 2020 2040 6c61 7a79   True..    @lazy
+000047f0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00004800: 2073 656c 6563 7465 645f 6361 7465 676f   selected_catego
+00004810: 7269 6573 2873 656c 6629 202d 3e20 5475  ries(self) -> Tu
+00004820: 706c 655b 4469 6374 2c20 2e2e 2e5d 3a0a  ple[Dict, ...]:.
+00004830: 2020 2020 2020 2020 2222 224c 6973 7420          """List 
+00004840: 6f66 2073 656c 6563 7465 6420 6361 7465  of selected cate
+00004850: 676f 7269 6573 2073 7065 6369 6669 6564  gories specified
+00004860: 2066 6f72 2074 6869 7320 6469 6d65 6e73   for this dimens
+00004870: 696f 6e2e 2222 220a 2020 2020 2020 2020  ion.""".        
+00004880: 7365 6c65 6374 6564 5f63 6174 6567 6f72  selected_categor
+00004890: 6965 7320 3d20 7365 6c66 2e5f 6469 6d65  ies = self._dime
+000048a0: 6e73 696f 6e5f 6469 6374 5b22 7265 6665  nsion_dict["refe
+000048b0: 7265 6e63 6573 225d 2e67 6574 280a 2020  rences"].get(.  
+000048c0: 2020 2020 2020 2020 2020 2273 656c 6563            "selec
+000048d0: 7465 645f 6361 7465 676f 7269 6573 220a  ted_categories".
+000048e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000048f0: 2020 7265 7475 726e 2074 7570 6c65 2873    return tuple(s
+00004900: 656c 6563 7465 645f 6361 7465 676f 7269  elected_categori
+00004910: 6573 2920 6966 2073 656c 6563 7465 645f  es) if selected_
+00004920: 6361 7465 676f 7269 6573 2065 6c73 6520  categories else 
+00004930: 2829 0a0a 2020 2020 406c 617a 7970 726f  ()..    @lazypro
+00004940: 7065 7274 790a 2020 2020 6465 6620 7368  perty.    def sh
+00004950: 6170 6528 7365 6c66 2920 2d3e 2069 6e74  ape(self) -> int
+00004960: 3a0a 2020 2020 2020 2020 2222 2269 6e74  :.        """int
+00004970: 2063 6f75 6e74 206f 6620 2a61 6c6c 2a20   count of *all* 
+00004980: 656c 656d 656e 7473 2069 6e20 7468 6973  elements in this
+00004990: 2064 696d 656e 7369 6f6e 2c20 626f 7468   dimension, both
+000049a0: 2076 616c 6964 2061 6e64 206d 6973 7369   valid and missi
+000049b0: 6e67 2e22 2222 0a20 2020 2020 2020 2072  ng.""".        r
+000049c0: 6574 7572 6e20 6c65 6e28 7365 6c66 2e61  eturn len(self.a
+000049d0: 6c6c 5f65 6c65 6d65 6e74 7329 0a0a 2020  ll_elements)..  
+000049e0: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+000049f0: 2020 2020 6465 6620 736d 6f6f 7468 696e      def smoothin
+00004a00: 675f 6469 6374 2873 656c 6629 202d 3e20  g_dict(self) -> 
+00004a10: 4f70 7469 6f6e 616c 5b44 6963 745d 3a0a  Optional[Dict]:.
+00004a20: 2020 2020 2020 2020 2222 224f 7074 696f          """Optio
+00004a30: 6e61 6c20 6469 6374 206f 6620 736d 6f6f  nal dict of smoo
+00004a40: 7468 696e 6720 7370 6563 6966 6963 6174  thing specificat
+00004a50: 696f 6e73 2e22 2222 0a20 2020 2020 2020  ions.""".       
+00004a60: 2072 6574 7572 6e20 7365 6c66 2e5f 6469   return self._di
+00004a70: 6d65 6e73 696f 6e5f 7472 616e 7366 6f72  mension_transfor
+00004a80: 6d73 5f64 6963 742e 6765 7428 2273 6d6f  ms_dict.get("smo
+00004a90: 6f74 6865 7222 2920 6f72 207b 7d0a 0a20  other") or {}.. 
+00004aa0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+00004ab0: 0a20 2020 2064 6566 2073 7562 746f 7461  .    def subtota
+00004ac0: 6c5f 616c 6961 7365 7328 7365 6c66 2920  l_aliases(self) 
+00004ad0: 2d3e 2054 7570 6c65 5b73 7472 2c20 2e2e  -> Tuple[str, ..
+00004ae0: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+00004af0: 7570 6c65 206f 6620 7374 7269 6e67 2065  uple of string e
+00004b00: 6c65 6d65 6e74 2d61 6c69 6173 6573 2066  lement-aliases f
+00004b10: 6f72 2065 6163 6820 7375 6274 6f74 616c  or each subtotal
+00004b20: 2069 6e20 7468 6973 2064 696d 656e 7369   in this dimensi
+00004b30: 6f6e 2e0a 0a20 2020 2020 2020 2045 6c65  on...        Ele
+00004b40: 6d65 6e74 2d61 6c69 6173 6573 2061 7070  ment-aliases app
+00004b50: 6561 7220 696e 2074 6865 206f 7264 6572  ear in the order
+00004b60: 2064 6566 696e 6564 2069 6e20 7468 6520   defined in the 
+00004b70: 6375 6265 2d72 6573 756c 742e 0a20 2020  cube-result..   
+00004b80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00004b90: 2072 6574 7572 6e20 7475 706c 6528 732e   return tuple(s.
+00004ba0: 616c 6961 7320 666f 7220 7320 696e 2073  alias for s in s
+00004bb0: 656c 662e 7375 6274 6f74 616c 7329 0a0a  elf.subtotals)..
+00004bc0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+00004bd0: 790a 2020 2020 6465 6620 7375 6274 6f74  y.    def subtot
+00004be0: 616c 5f6c 6162 656c 7328 7365 6c66 2920  al_labels(self) 
+00004bf0: 2d3e 2054 7570 6c65 5b73 7472 2c20 2e2e  -> Tuple[str, ..
+00004c00: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+00004c10: 7570 6c65 206f 6620 7374 7269 6e67 2065  uple of string e
+00004c20: 6c65 6d65 6e74 2d6c 6162 656c 7320 666f  lement-labels fo
+00004c30: 7220 6561 6368 2073 7562 746f 7461 6c20  r each subtotal 
+00004c40: 696e 2074 6869 7320 6469 6d65 6e73 696f  in this dimensio
+00004c50: 6e2e 0a0a 2020 2020 2020 2020 456c 656d  n...        Elem
+00004c60: 656e 742d 6c61 6265 6c73 2061 7070 6561  ent-labels appea
+00004c70: 7220 696e 2074 6865 206f 7264 6572 2064  r in the order d
+00004c80: 6566 696e 6564 2069 6e20 7468 6520 6375  efined in the cu
+00004c90: 6265 2d72 6573 756c 742e 0a20 2020 2020  be-result..     
+00004ca0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00004cb0: 6574 7572 6e20 7475 706c 6528 732e 6c61  eturn tuple(s.la
+00004cc0: 6265 6c20 666f 7220 7320 696e 2073 656c  bel for s in sel
+00004cd0: 662e 7375 6274 6f74 616c 7329 0a0a 2020  f.subtotals)..  
+00004ce0: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+00004cf0: 2020 2020 6465 6620 7375 6274 6f74 616c      def subtotal
+00004d00: 7328 7365 6c66 2920 2d3e 2022 5f53 7562  s(self) -> "_Sub
+00004d10: 746f 7461 6c73 223a 0a20 2020 2020 2020  totals":.       
+00004d20: 2022 2222 5f53 7562 746f 7461 6c73 2073   """_Subtotals s
+00004d30: 6571 7565 6e63 6520 6f62 6a65 6374 2066  equence object f
+00004d40: 6f72 2074 6869 7320 6469 6d65 6e73 696f  or this dimensio
+00004d50: 6e2e 0a0a 2020 2020 2020 2020 4561 6368  n...        Each
+00004d60: 2069 7465 6d20 696e 2074 6865 2073 6571   item in the seq
+00004d70: 7565 6e63 6520 6973 2061 205f 5375 6274  uence is a _Subt
+00004d80: 6f74 616c 206f 626a 6563 7420 7370 6563  otal object spec
+00004d90: 6966 7969 6e67 2061 2073 7562 746f 7461  ifying a subtota
+00004da0: 6c2c 2069 6e63 6c75 6469 6e67 0a20 2020  l, including.   
+00004db0: 2020 2020 2069 7473 2061 6464 656e 6473       its addends
+00004dc0: 2061 6e64 2061 6e63 686f 722e 0a20 2020   and anchor..   
+00004dd0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00004de0: 2023 202d 2d2d 2065 6c65 6d65 6e74 7320   # --- elements 
+00004df0: 6f66 2061 6e20 6167 6772 6567 6174 652f  of an aggregate/
+00004e00: 6172 7261 7920 6469 6d65 6e73 696f 6e20  array dimension 
+00004e10: 6361 6e6e 6f74 206d 6561 6e69 6e67 6675  cannot meaningfu
+00004e20: 6c6c 7920 6265 2073 756d 6d65 642c 2073  lly be summed, s
+00004e30: 6f0a 2020 2020 2020 2020 2320 2d2d 2d20  o.        # --- 
+00004e40: 616e 2061 7272 6179 2064 696d 656e 7369  an array dimensi
+00004e50: 6f6e 2063 616e 6e6f 7420 6861 7665 2073  on cannot have s
+00004e60: 7562 746f 7461 6c73 0a20 2020 2020 2020  ubtotals.       
+00004e70: 2069 6620 7365 6c66 2e64 696d 656e 7369   if self.dimensi
+00004e80: 6f6e 5f74 7970 6520 696e 2028 4454 2e4d  on_type in (DT.M
+00004e90: 522c 2044 542e 4341 5f53 5542 5641 5229  R, DT.CA_SUBVAR)
+00004ea0: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
+00004eb0: 7365 7274 696f 6e5f 6469 6374 7320 3d20  sertion_dicts = 
+00004ec0: 5b5d 0a20 2020 2020 2020 2023 202d 2d2d  [].        # ---
+00004ed0: 2069 6e73 6572 7469 6f6e 7320 696e 2064   insertions in d
+00004ee0: 696d 656e 7369 6f6e 2d74 7261 6e73 666f  imension-transfo
+00004ef0: 726d 7320 6f76 6572 7269 6465 2074 686f  rms override tho
+00004f00: 7365 206f 6e20 6469 6d65 6e73 696f 6e20  se on dimension 
+00004f10: 6974 7365 6c66 202d 2d2d 0a20 2020 2020  itself ---.     
+00004f20: 2020 2065 6c69 6620 2269 6e73 6572 7469     elif "inserti
+00004f30: 6f6e 7322 2069 6e20 7365 6c66 2e5f 6469  ons" in self._di
+00004f40: 6d65 6e73 696f 6e5f 7472 616e 7366 6f72  mension_transfor
+00004f50: 6d73 5f64 6963 743a 0a20 2020 2020 2020  ms_dict:.       
+00004f60: 2020 2020 2069 6e73 6572 7469 6f6e 5f64       insertion_d
+00004f70: 6963 7473 203d 2073 656c 662e 5f64 696d  icts = self._dim
+00004f80: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
+00004f90: 735f 6469 6374 5b22 696e 7365 7274 696f  s_dict["insertio
+00004fa0: 6e73 225d 0a20 2020 2020 2020 2023 202d  ns"].        # -
+00004fb0: 2d2d 206f 7468 6572 7769 7365 2069 6e73  -- otherwise ins
+00004fc0: 6572 7469 6f6e 7320 6465 6669 6e65 6420  ertions defined 
+00004fd0: 6f6e 2064 696d 656e 7369 6f6e 2f76 6172  on dimension/var
+00004fe0: 6961 626c 6520 6170 706c 7920 2d2d 2d0a  iable apply ---.
+00004ff0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00005000: 2020 2020 2020 2020 2020 7669 6577 203d            view =
+00005010: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00005020: 5f64 6963 742e 6765 7428 2272 6566 6572  _dict.get("refer
+00005030: 656e 6365 7322 2c20 7b7d 292e 6765 7428  ences", {}).get(
+00005040: 2276 6965 7722 2920 6f72 207b 7d0a 2020  "view") or {}.  
+00005050: 2020 2020 2020 2020 2020 696e 7365 7274            insert
+00005060: 696f 6e5f 6469 6374 7320 3d20 7669 6577  ion_dicts = view
+00005070: 2e67 6574 2822 7472 616e 7366 6f72 6d22  .get("transform"
+00005080: 2c20 7b7d 292e 6765 7428 2269 6e73 6572  , {}).get("inser
+00005090: 7469 6f6e 7322 2c20 5b5d 290a 2020 2020  tions", []).    
+000050a0: 2020 2020 7265 7475 726e 205f 5375 6274      return _Subt
+000050b0: 6f74 616c 7328 696e 7365 7274 696f 6e5f  otals(insertion_
+000050c0: 6469 6374 732c 2073 656c 662e 7661 6c69  dicts, self.vali
+000050d0: 645f 656c 656d 656e 7473 290a 0a20 2020  d_elements)..   
+000050e0: 2064 6566 2074 7261 6e73 6c61 7465 5f65   def translate_e
+000050f0: 6c65 6d65 6e74 5f69 6428 7365 6c66 2c20  lement_id(self, 
+00005100: 5f69 6429 202d 3e20 4f70 7469 6f6e 616c  _id) -> Optional
+00005110: 5b73 7472 5d3a 0a20 2020 2020 2020 2022  [str]:.        "
+00005120: 2222 4f70 7469 6f6e 616c 2073 7472 696e  ""Optional strin
+00005130: 6720 7468 6174 2069 7320 7468 6520 7472  g that is the tr
+00005140: 616e 736c 6174 696f 6e20 6f66 2076 6172  anslation of var
+00005150: 696f 7573 2069 6473 2074 6f20 7375 6276  ious ids to subv
+00005160: 6172 6961 626c 6520 616c 6961 730a 0a20  ariable alias.. 
+00005170: 2020 2020 2020 2054 6869 7320 6973 206e         This is n
+00005180: 6565 6465 6420 666f 7220 7468 6520 6f70  eeded for the op
+00005190: 706f 7369 6e67 2064 696d 656e 7369 6f6e  posing dimension
+000051a0: 2773 2073 6f72 7420 6279 206f 7070 6f73  's sort by oppos
+000051b0: 696e 6720 656c 656d 656e 742c 2062 6563  ing element, bec
+000051c0: 6175 7365 0a20 2020 2020 2020 2077 6865  ause.        whe
+000051d0: 6e20 6372 6561 7469 6e67 2061 2064 696d  n creating a dim
+000051e0: 656e 7369 6f6e 2c20 7765 2064 6f6e 2774  ension, we don't
+000051f0: 2068 6176 6520 6163 6365 7373 2074 6f20   have access to 
+00005200: 7468 6520 6f74 6865 7220 6469 6d65 6e73  the other dimens
+00005210: 696f 6e27 730a 2020 2020 2020 2020 6964  ion's.        id
+00005220: 7320 746f 2074 7261 6e73 666f 726d 2069  s to transform i
+00005230: 742e 2054 6865 7265 666f 7265 2c20 7468  t. Therefore, th
+00005240: 6520 6964 2066 6f72 206f 7070 6f73 696e  e id for opposin
+00005250: 6720 656c 656d 656e 7420 736f 7274 2062  g element sort b
+00005260: 7920 7661 6c75 650a 2020 2020 2020 2020  y value.        
+00005270: 7472 616e 7366 6f72 6d73 2069 7320 6e6f  transforms is no
+00005280: 7420 7472 616e 736c 6174 6564 2061 7420  t translated at 
+00005290: 6372 6561 7469 6f6e 2074 696d 652e 0a0a  creation time...
+000052a0: 2020 2020 2020 2020 3029 2049 6620 6469          0) If di
+000052b0: 6d65 6e73 696f 6e20 6973 206e 6f74 2061  mension is not a
+000052c0: 2073 7562 7661 7269 6162 6c65 7320 6469   subvariables di
+000052d0: 6d65 6e73 696f 6e2c 2072 6574 7572 6e20  mension, return 
+000052e0: 7468 6520 5f69 642e 0a20 2020 2020 2020  the _id..       
+000052f0: 2031 2920 4966 2069 6420 6d61 7463 6865   1) If id matche
+00005300: 7320 616e 2061 6c69 6173 2c20 7468 656e  s an alias, then
+00005310: 206a 7573 7420 7573 6520 6974 2e0a 2020   just use it..  
+00005320: 2020 2020 2020 3229 2049 6620 6964 206d        2) If id m
+00005330: 6174 6368 6573 2061 2073 7562 7661 7269  atches a subvari
+00005340: 6162 6c65 2069 642c 2074 7261 6e73 6c61  able id, transla
+00005350: 7465 2074 6f20 636f 7272 6573 706f 6e64  te to correspond
+00005360: 696e 6720 616c 6961 732e 0a20 2020 2020  ing alias..     
+00005370: 2020 2033 2920 4966 2069 6420 6d61 7463     3) If id matc
+00005380: 6865 7320 616e 2065 6c65 6d65 6e74 2069  hes an element i
+00005390: 642c 2074 7261 6e73 6c61 7465 2074 6f20  d, translate to 
+000053a0: 636f 7272 6573 706f 6e64 696e 6720 616c  corresponding al
+000053b0: 6961 732e 0a20 2020 2020 2020 2034 2920  ias..        4) 
+000053c0: 4966 2069 6420 6361 6e20 6265 2070 6172  If id can be par
+000053d0: 7365 6420 746f 2069 6e74 2061 6e64 206d  sed to int and m
+000053e0: 6174 6368 6573 2061 6e20 656c 656d 656e  atches an elemen
+000053f0: 7420 6964 2c20 7472 616e 736c 6174 6520  t id, translate 
+00005400: 746f 2061 6c69 6173 2e0a 2020 2020 2020  to alias..      
+00005410: 2020 3529 2049 6620 6964 2069 7320 696e    5) If id is in
+00005420: 7420 286f 7220 6361 6e20 6265 2070 6172  t (or can be par
+00005430: 7365 6420 746f 2069 6e74 2920 616e 6420  sed to int) and 
+00005440: 6361 6e20 6265 2075 7365 6420 6173 2069  can be used as i
+00005450: 6e64 6578 2028 6567 2069 6e20 7261 6e67  ndex (eg in rang
+00005460: 650a 2020 2020 2020 2020 2020 2030 2d23  e.           0-#
+00005470: 206f 6620 656c 656d 656e 7473 292c 2075   of elements), u
+00005480: 7365 205f 6964 2774 6820 616c 6961 732e  se _id'th alias.
+00005490: 0a20 2020 2020 2020 2036 2920 4966 2061  .        6) If a
+000054a0: 6c6c 206f 6620 7468 6573 6520 6661 696c  ll of these fail
+000054b0: 2c20 7265 7475 726e 204e 6f6e 652e 0a20  , return None.. 
+000054c0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000054d0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+000054e0: 656c 656d 656e 745f 6964 5f73 6869 6d2e  element_id_shim.
+000054f0: 7472 616e 736c 6174 655f 656c 656d 656e  translate_elemen
+00005500: 745f 6964 285f 6964 290a 0a20 2020 2040  t_id(_id)..    @
+00005510: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00005520: 2064 6566 2076 616c 6964 5f65 6c65 6d65   def valid_eleme
+00005530: 6e74 7328 7365 6c66 2920 2d3e 2022 5f56  nts(self) -> "_V
+00005540: 616c 6964 456c 656d 656e 7473 223a 0a20  alidElements":. 
+00005550: 2020 2020 2020 2022 2222 5f45 6c65 6d65         """_Eleme
+00005560: 6e74 7320 6f62 6a65 6374 2070 726f 7669  nts object provi
+00005570: 6469 6e67 2061 6363 6573 7320 746f 206e  ding access to n
+00005580: 6f6e 2d6d 6973 7369 6e67 2065 6c65 6d65  on-missing eleme
+00005590: 6e74 732e 0a0a 2020 2020 2020 2020 416e  nts...        An
+000055a0: 7920 6361 7465 676f 7269 6573 206f 7220  y categories or 
+000055b0: 7375 6276 6172 6961 626c 6573 2072 6570  subvariables rep
+000055c0: 7265 7365 6e74 696e 6720 6d69 7373 696e  resenting missin
+000055d0: 6720 6461 7461 2061 7265 2065 7863 6c75  g data are exclu
+000055e0: 6465 640a 2020 2020 2020 2020 6672 6f6d  ded.        from
+000055f0: 2074 6865 2063 6f6c 6c65 6374 696f 6e3b   the collection;
+00005600: 2074 6869 7320 7365 7175 656e 6365 2072   this sequence r
+00005610: 6570 7265 7365 6e74 7320 6120 7375 6273  epresents a subs
+00005620: 6574 206f 6620 7468 6174 0a20 2020 2020  et of that.     
+00005630: 2020 2070 726f 7669 6465 6420 6279 2060     provided by `
+00005640: 2e61 6c6c 5f65 6c65 6d65 6e74 7360 2e0a  .all_elements`..
+00005650: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00005660: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00005670: 616c 6c5f 656c 656d 656e 7473 2e76 616c  all_elements.val
+00005680: 6964 5f65 6c65 6d65 6e74 730a 0a20 2020  id_elements..   
+00005690: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+000056a0: 2020 2064 6566 205f 656c 656d 656e 745f     def _element_
+000056b0: 6964 5f73 6869 6d28 7365 6c66 2920 2d3e  id_shim(self) ->
+000056c0: 2022 5f45 6c65 6d65 6e74 4964 5368 696d   "_ElementIdShim
+000056d0: 223a 0a20 2020 2020 2020 2022 2222 5f45  ":.        """_E
+000056e0: 6c65 6d65 6e74 4964 5368 696d 2066 6f72  lementIdShim for
+000056f0: 2074 6869 7320 4469 6d65 6e73 696f 6e20   this Dimension 
+00005700: 6f62 6a65 6374 2222 220a 2020 2020 2020  object""".      
+00005710: 2020 7265 7475 726e 205f 456c 656d 656e    return _Elemen
+00005720: 7449 6453 6869 6d28 0a20 2020 2020 2020  tIdShim(.       
+00005730: 2020 2020 2073 656c 662e 5f64 696d 656e       self._dimen
+00005740: 7369 6f6e 5f74 7970 652c 0a20 2020 2020  sion_type,.     
+00005750: 2020 2020 2020 2073 656c 662e 5f75 6e73         self._uns
+00005760: 6869 6d6d 6564 5f64 696d 656e 7369 6f6e  himmed_dimension
+00005770: 5f64 6963 742c 0a20 2020 2020 2020 2020  _dict,.         
+00005780: 2020 2073 656c 662e 5f75 6e73 6869 6d6d     self._unshimm
+00005790: 6564 5f64 696d 656e 7369 6f6e 5f74 7261  ed_dimension_tra
+000057a0: 6e73 666f 726d 735f 6469 6374 2c0a 2020  nsforms_dict,.  
+000057b0: 2020 2020 2020 290a 0a20 2020 2040 6c61        )..    @la
+000057c0: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+000057d0: 6566 205f 6469 6d65 6e73 696f 6e5f 6469  ef _dimension_di
+000057e0: 6374 2873 656c 6629 202d 3e20 4469 6374  ct(self) -> Dict
+000057f0: 3a0a 2020 2020 2020 2020 2222 2243 6f70  :.        """Cop
+00005800: 7920 6f66 2064 696d 656e 7369 6f6e 2064  y of dimension d
+00005810: 6963 7469 6f6e 6172 7920 7769 7468 2073  ictionary with s
+00005820: 6869 6d6d 6564 2060 656c 656d 656e 745f  himmed `element_
+00005830: 6964 6073 2222 220a 2020 2020 2020 2020  id`s""".        
+00005840: 7265 7475 726e 2073 656c 662e 5f65 6c65  return self._ele
+00005850: 6d65 6e74 5f69 645f 7368 696d 2e73 6869  ment_id_shim.shi
+00005860: 6d6d 6564 5f64 696d 656e 7369 6f6e 5f64  mmed_dimension_d
+00005870: 6963 740a 0a20 2020 2040 6c61 7a79 7072  ict..    @lazypr
+00005880: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+00005890: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+000058a0: 6f72 6d73 5f64 6963 7428 7365 6c66 2920  orms_dict(self) 
+000058b0: 2d3e 2044 6963 743a 0a20 2020 2020 2020  -> Dict:.       
+000058c0: 2022 2222 436f 7079 206f 6620 6469 6d65   """Copy of dime
+000058d0: 6e73 696f 6e20 7472 616e 7366 6f72 6d73  nsion transforms
+000058e0: 2064 6963 7469 6f6e 6172 7920 7769 7468   dictionary with
+000058f0: 2073 6869 6d6d 6564 2060 656c 656d 656e   shimmed `elemen
+00005900: 745f 6964 6073 2222 220a 2020 2020 2020  t_id`s""".      
+00005910: 2020 7265 7475 726e 2073 656c 662e 5f65    return self._e
+00005920: 6c65 6d65 6e74 5f69 645f 7368 696d 2e73  lement_id_shim.s
+00005930: 6869 6d6d 6564 5f64 696d 656e 7369 6f6e  himmed_dimension
+00005940: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+00005950: 0a0a 0a63 6c61 7373 205f 4261 7365 456c  ...class _BaseEl
+00005960: 656d 656e 7473 2853 6571 7565 6e63 6529  ements(Sequence)
+00005970: 3a0a 2020 2020 2222 2242 6173 6520 636c  :.    """Base cl
+00005980: 6173 7320 666f 7220 656c 656d 656e 7420  ass for element 
+00005990: 7365 7175 656e 6365 2063 6f6e 7461 696e  sequence contain
+000059a0: 6572 732e 2222 220a 0a20 2020 2064 6566  ers."""..    def
+000059b0: 205f 5f67 6574 6974 656d 5f5f 2873 656c   __getitem__(sel
+000059c0: 662c 2069 6478 5f6f 725f 736c 6963 6529  f, idx_or_slice)
+000059d0: 3a0a 2020 2020 2020 2020 2222 2249 6d70  :.        """Imp
+000059e0: 6c65 6d65 6e74 7320 696e 6465 7865 6420  lements indexed 
+000059f0: 6163 6365 7373 2e22 2222 0a20 2020 2020  access.""".     
+00005a00: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00005a10: 656c 656d 656e 7473 5b69 6478 5f6f 725f  elements[idx_or_
+00005a20: 736c 6963 655d 0a0a 2020 2020 6465 6620  slice]..    def 
+00005a30: 5f5f 6974 6572 5f5f 2873 656c 6629 3a0a  __iter__(self):.
+00005a40: 2020 2020 2020 2020 2222 2249 6d70 6c65          """Imple
+00005a50: 6d65 6e74 7320 2865 6666 6963 6965 6e74  ments (efficient
+00005a60: 2920 6974 6572 6162 696c 6974 792e 2222  ) iterability.""
+00005a70: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00005a80: 2069 7465 7228 7365 6c66 2e5f 656c 656d   iter(self._elem
+00005a90: 656e 7473 290a 0a20 2020 2064 6566 205f  ents)..    def _
+00005aa0: 5f6c 656e 5f5f 2873 656c 6629 3a0a 2020  _len__(self):.  
+00005ab0: 2020 2020 2020 2222 2249 6d70 6c65 6d65        """Impleme
+00005ac0: 6e74 7320 6c65 6e28 656c 656d 656e 7473  nts len(elements
+00005ad0: 292e 2222 220a 2020 2020 2020 2020 7265  ).""".        re
+00005ae0: 7475 726e 206c 656e 2873 656c 662e 5f65  turn len(self._e
+00005af0: 6c65 6d65 6e74 7329 0a0a 2020 2020 406c  lements)..    @l
+00005b00: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00005b10: 6465 6620 656c 656d 656e 745f 6964 7328  def element_ids(
+00005b20: 7365 6c66 2920 2d3e 2054 7570 6c65 5b69  self) -> Tuple[i
+00005b30: 6e74 2c20 2e2e 2e5d 3a0a 2020 2020 2020  nt, ...]:.      
+00005b40: 2020 2222 2274 7570 6c65 206f 6620 656c    """tuple of el
+00005b50: 656d 656e 742d 6964 2066 6f72 2065 6163  ement-id for eac
+00005b60: 6820 656c 656d 656e 7420 696e 2063 6f6c  h element in col
+00005b70: 6c65 6374 696f 6e2e 0a0a 2020 2020 2020  lection...      
+00005b80: 2020 456c 656d 656e 7420 6964 7320 6170    Element ids ap
+00005b90: 7065 6172 2069 6e20 7468 6520 6f72 6465  pear in the orde
+00005ba0: 7220 7468 6579 206f 6363 7572 2069 6e20  r they occur in 
+00005bb0: 7468 6520 6375 6265 2072 6573 706f 6e73  the cube respons
+00005bc0: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
+00005bd0: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
+00005be0: 706c 6528 656c 656d 656e 742e 656c 656d  ple(element.elem
+00005bf0: 656e 745f 6964 2066 6f72 2065 6c65 6d65  ent_id for eleme
+00005c00: 6e74 2069 6e20 7365 6c66 2e5f 656c 656d  nt in self._elem
+00005c10: 656e 7473 290a 0a20 2020 2040 6c61 7a79  ents)..    @lazy
+00005c20: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00005c30: 2065 6c65 6d65 6e74 5f69 6478 7328 7365   element_idxs(se
+00005c40: 6c66 2920 2d3e 2054 7570 6c65 5b69 6e74  lf) -> Tuple[int
+00005c50: 2c20 2e2e 2e5d 3a0a 2020 2020 2020 2020  , ...]:.        
+00005c60: 2222 2274 7570 6c65 206f 6620 656c 656d  """tuple of elem
+00005c70: 656e 742d 696e 6465 7820 666f 7220 6561  ent-index for ea
+00005c80: 6368 2065 6c65 6d65 6e74 2069 6e20 636f  ch element in co
+00005c90: 6c6c 6563 7469 6f6e 2e0a 0a20 2020 2020  llection...     
+00005ca0: 2020 2045 6c65 6d65 6e74 2069 6e64 6578     Element index
+00005cb0: 2076 616c 7565 7320 7265 7072 6573 656e   values represen
+00005cc0: 7420 7468 6520 706f 7369 7469 6f6e 206f  t the position o
+00005cd0: 6620 7468 6973 2065 6c65 6d65 6e74 2069  f this element i
+00005ce0: 6e20 7468 650a 2020 2020 2020 2020 6469  n the.        di
+00005cf0: 6d65 6e73 696f 6e2d 6469 6374 2069 7420  mension-dict it 
+00005d00: 6361 6d65 2066 726f 6d2e 2049 6e20 7468  came from. In th
+00005d10: 6520 6361 7365 206f 6620 616e 205f 416c  e case of an _Al
+00005d20: 6c45 6c65 6d65 6e74 7320 6f62 6a65 6374  lElements object
+00005d30: 2c0a 2020 2020 2020 2020 6974 2077 696c  ,.        it wil
+00005d40: 6c20 7369 6d70 6c79 2062 6520 6120 7475  l simply be a tu
+00005d50: 706c 6528 7261 6e67 6528 6c65 6e28 616c  ple(range(len(al
+00005d60: 6c5f 656c 656d 656e 7473 2929 292e 0a20  l_elements))).. 
+00005d70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00005d80: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
+00005d90: 656c 656d 656e 742e 696e 6465 7820 666f  element.index fo
+00005da0: 7220 656c 656d 656e 7420 696e 2073 656c  r element in sel
+00005db0: 662e 5f65 6c65 6d65 6e74 7329 0a0a 2020  f._elements)..  
+00005dc0: 2020 6465 6620 6765 745f 6279 5f69 6428    def get_by_id(
+00005dd0: 7365 6c66 2c20 656c 656d 656e 745f 6964  self, element_id
+00005de0: 3a20 696e 7429 202d 3e20 225f 456c 656d  : int) -> "_Elem
+00005df0: 656e 7422 3a0a 2020 2020 2020 2020 2222  ent":.        ""
+00005e00: 2252 6574 7572 6e20 5f45 6c65 6d65 6e74  "Return _Element
+00005e10: 206f 626a 6563 7420 6964 656e 7469 6669   object identifi
+00005e20: 6564 2062 7920 2a65 6c65 6d65 6e74 5f69  ed by *element_i
+00005e30: 642a 2e0a 0a20 2020 2020 2020 2052 6169  d*...        Rai
+00005e40: 7365 7320 4b65 7945 7272 6f72 2069 6620  ses KeyError if 
+00005e50: 6e6f 7420 666f 756e 642e 204f 6e6c 7920  not found. Only 
+00005e60: 656c 656d 656e 7473 206b 6e6f 776e 2074  elements known t
+00005e70: 6f20 7468 6973 2063 6f6c 6c65 6374 696f  o this collectio
+00005e80: 6e0a 2020 2020 2020 2020 6172 6520 6163  n.        are ac
+00005e90: 6365 7373 6962 6c65 2066 6f72 206c 6f6f  cessible for loo
+00005ea0: 6b75 702e 2046 6f72 2065 7861 6d70 6c65  kup. For example
+00005eb0: 2c20 6120 5f56 616c 6964 456c 656d 656e  , a _ValidElemen
+00005ec0: 7473 206f 626a 6563 7420 7769 6c6c 0a20  ts object will. 
+00005ed0: 2020 2020 2020 2072 6169 7365 204b 6579         raise Key
+00005ee0: 4572 726f 7220 666f 7220 7468 6520 6964  Error for the id
+00005ef0: 206f 6620 6120 6d69 7373 696e 6720 656c   of a missing el
+00005f00: 656d 656e 742e 0a20 2020 2020 2020 2022  ement..        "
+00005f10: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00005f20: 6e20 7365 6c66 2e5f 656c 656d 656e 7473  n self._elements
+00005f30: 5f62 795f 6964 5b65 6c65 6d65 6e74 5f69  _by_id[element_i
+00005f40: 645d 0a0a 2020 2020 406c 617a 7970 726f  d]..    @lazypro
+00005f50: 7065 7274 790a 2020 2020 6465 6620 5f65  perty.    def _e
+00005f60: 6c65 6d65 6e74 7328 7365 6c66 293a 0a20  lements(self):. 
+00005f70: 2020 2020 2020 2022 2222 7475 706c 6520         """tuple 
+00005f80: 7374 6f72 696e 6720 6163 7475 616c 2073  storing actual s
+00005f90: 6571 7565 6e63 6520 6f66 2065 6c65 6d65  equence of eleme
+00005fa0: 6e74 206f 626a 6563 7473 2e0a 0a20 2020  nt objects...   
+00005fb0: 2020 2020 204d 7573 7420 6265 2069 6d70       Must be imp
+00005fc0: 6c65 6d65 6e74 6564 2062 7920 6561 6368  lemented by each
+00005fd0: 2073 7562 636c 6173 732e 0a20 2020 2020   subclass..     
+00005fe0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00005ff0: 6169 7365 204e 6f74 496d 706c 656d 656e  aise NotImplemen
+00006000: 7465 6445 7272 6f72 2822 6d75 7374 2062  tedError("must b
+00006010: 6520 696d 706c 656d 656e 7465 6420 6279  e implemented by
+00006020: 2065 6163 6820 7375 6263 6c61 7373 2229   each subclass")
+00006030: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00006040: 7274 790a 2020 2020 6465 6620 5f65 6c65  rty.    def _ele
+00006050: 6d65 6e74 735f 6279 5f69 6428 7365 6c66  ments_by_id(self
+00006060: 2920 2d3e 2044 6963 743a 0a20 2020 2020  ) -> Dict:.     
+00006070: 2020 2022 2222 6469 6374 206d 6170 7069     """dict mappi
+00006080: 6e67 2065 6163 6820 656c 656d 656e 7420  ng each element 
+00006090: 6279 2069 7473 2069 642e 2222 220a 2020  by its id.""".  
+000060a0: 2020 2020 2020 7265 7475 726e 207b 656c        return {el
+000060b0: 656d 656e 742e 656c 656d 656e 745f 6964  ement.element_id
+000060c0: 3a20 656c 656d 656e 7420 666f 7220 656c  : element for el
+000060d0: 656d 656e 7420 696e 2073 656c 662e 5f65  ement in self._e
+000060e0: 6c65 6d65 6e74 737d 0a0a 0a63 6c61 7373  lements}...class
+000060f0: 205f 416c 6c45 6c65 6d65 6e74 7328 5f42   _AllElements(_B
+00006100: 6173 6545 6c65 6d65 6e74 7329 3a0a 2020  aseElements):.  
+00006110: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
+00006120: 205f 4261 7365 456c 656d 656e 7420 7375   _BaseElement su
+00006130: 6263 6c61 7373 206f 626a 6563 7473 2066  bclass objects f
+00006140: 6f72 2061 2064 696d 656e 7369 6f6e 2e0a  or a dimension..
+00006150: 0a20 2020 2045 6163 6820 656c 656d 656e  .    Each elemen
+00006160: 7420 6973 2065 6974 6865 7220 6120 6361  t is either a ca
+00006170: 7465 676f 7279 206f 7220 6120 7375 6276  tegory or a subv
+00006180: 6172 6961 626c 652e 0a20 2020 2022 2222  ariable..    """
+00006190: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+000061a0: 5f5f 2873 656c 662c 2074 7970 655f 6469  __(self, type_di
+000061b0: 6374 2c20 6469 6d65 6e73 696f 6e5f 7472  ct, dimension_tr
+000061c0: 616e 7366 6f72 6d73 5f64 6963 742c 2064  ansforms_dict, d
+000061d0: 696d 656e 7369 6f6e 5f74 7970 6529 3a0a  imension_type):.
+000061e0: 2020 2020 2020 2020 7365 6c66 2e5f 7479          self._ty
+000061f0: 7065 5f64 6963 7420 3d20 7479 7065 5f64  pe_dict = type_d
+00006200: 6963 740a 2020 2020 2020 2020 7365 6c66  ict.        self
+00006210: 2e5f 6469 6d65 6e73 696f 6e5f 7472 616e  ._dimension_tran
+00006220: 7366 6f72 6d73 5f64 6963 7420 3d20 6469  sforms_dict = di
+00006230: 6d65 6e73 696f 6e5f 7472 616e 7366 6f72  mension_transfor
+00006240: 6d73 5f64 6963 740a 2020 2020 2020 2020  ms_dict.        
+00006250: 7365 6c66 2e5f 6469 6d65 6e73 696f 6e5f  self._dimension_
+00006260: 7479 7065 203d 2064 696d 656e 7369 6f6e  type = dimension
+00006270: 5f74 7970 650a 0a20 2020 2040 6c61 7a79  _type..    @lazy
+00006280: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00006290: 2076 616c 6964 5f65 6c65 6d65 6e74 7328   valid_elements(
+000062a0: 7365 6c66 2920 2d3e 2022 5f56 616c 6964  self) -> "_Valid
+000062b0: 456c 656d 656e 7473 223a 0a20 2020 2020  Elements":.     
+000062c0: 2020 2022 2222 5f56 616c 6964 456c 656d     """_ValidElem
+000062d0: 656e 7473 206f 626a 6563 7420 636f 6e74  ents object cont
+000062e0: 6169 6e69 6e67 206f 6e6c 7920 6e6f 6e2d  aining only non-
+000062f0: 6d69 7373 696e 6720 656c 656d 656e 7473  missing elements
+00006300: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
+00006310: 7572 6e20 5f56 616c 6964 456c 656d 656e  urn _ValidElemen
+00006320: 7473 2873 656c 662e 5f65 6c65 6d65 6e74  ts(self._element
+00006330: 732c 2073 656c 662e 5f64 696d 656e 7369  s, self._dimensi
+00006340: 6f6e 5f74 7261 6e73 666f 726d 735f 6469  on_transforms_di
+00006350: 6374 290a 0a20 2020 2040 6c61 7a79 7072  ct)..    @lazypr
+00006360: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+00006370: 656c 656d 656e 745f 6469 6374 7328 7365  element_dicts(se
+00006380: 6c66 2920 2d3e 204c 6973 745b 4469 6374  lf) -> List[Dict
+00006390: 5d3a 0a20 2020 2020 2020 2022 2222 5365  ]:.        """Se
+000063a0: 7175 656e 6365 206f 6620 656c 656d 656e  quence of elemen
+000063b0: 742d 6469 6374 7320 666f 7220 7468 6973  t-dicts for this
+000063c0: 2064 696d 656e 7369 6f6e 2c20 7461 6b65   dimension, take
+000063d0: 6e20 6672 6f6d 2063 7562 652d 7265 7375  n from cube-resu
+000063e0: 6c74 2e22 2222 0a20 2020 2020 2020 2072  lt.""".        r
+000063f0: 6574 7572 6e20 280a 2020 2020 2020 2020  eturn (.        
+00006400: 2020 2020 7365 6c66 2e5f 7479 7065 5f64      self._type_d
+00006410: 6963 745b 2263 6174 6567 6f72 6965 7322  ict["categories"
+00006420: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
+00006430: 2073 656c 662e 5f74 7970 655f 6469 6374   self._type_dict
+00006440: 5b22 636c 6173 7322 5d20 3d3d 2022 6361  ["class"] == "ca
+00006450: 7465 676f 7269 6361 6c22 0a20 2020 2020  tegorical".     
+00006460: 2020 2020 2020 2065 6c73 6520 7365 6c66         else self
+00006470: 2e5f 7479 7065 5f64 6963 745b 2265 6c65  ._type_dict["ele
+00006480: 6d65 6e74 7322 5d0a 2020 2020 2020 2020  ments"].        
+00006490: 290a 0a20 2020 2040 6c61 7a79 7072 6f70  )..    @lazyprop
+000064a0: 6572 7479 0a20 2020 2064 6566 205f 656c  erty.    def _el
+000064b0: 656d 656e 7473 2873 656c 6629 202d 3e20  ements(self) -> 
+000064c0: 5475 706c 655b 225f 456c 656d 656e 7422  Tuple["_Element"
+000064d0: 2c20 2e2e 2e5d 3a0a 2020 2020 2020 2020  , ...]:.        
+000064e0: 2222 2274 7570 6c65 2073 746f 7269 6e67  """tuple storing
+000064f0: 2061 6374 7561 6c20 7365 7175 656e 6365   actual sequence
+00006500: 206f 6620 656c 656d 656e 7420 6f62 6a65   of element obje
+00006510: 6374 732e 2222 220a 2020 2020 2020 2020  cts.""".        
+00006520: 7265 7475 726e 2074 7570 6c65 280a 2020  return tuple(.  
+00006530: 2020 2020 2020 2020 2020 5f45 6c65 6d65            _Eleme
+00006540: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+00006550: 2020 2020 656c 656d 656e 745f 6469 6374      element_dict
+00006560: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00006570: 2020 6964 782c 0a20 2020 2020 2020 2020    idx,.         
+00006580: 2020 2020 2020 205f 456c 656d 656e 7454         _ElementT
+00006590: 7261 6e73 666f 726d 7328 656c 656d 656e  ransforms(elemen
+000065a0: 745f 7472 616e 7366 6f72 6d73 5f64 6963  t_transforms_dic
+000065b0: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
+000065c0: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+000065d0: 7220 280a 2020 2020 2020 2020 2020 2020  r (.            
+000065e0: 2020 2020 6964 782c 0a20 2020 2020 2020      idx,.       
+000065f0: 2020 2020 2020 2020 2065 6c65 6d65 6e74           element
+00006600: 5f64 6963 742c 0a20 2020 2020 2020 2020  _dict,.         
+00006610: 2020 2020 2020 2065 6c65 6d65 6e74 5f74         element_t
+00006620: 7261 6e73 666f 726d 735f 6469 6374 2c0a  ransforms_dict,.
+00006630: 2020 2020 2020 2020 2020 2020 2920 696e              ) in
+00006640: 2073 656c 662e 5f69 7465 725f 656c 656d   self._iter_elem
+00006650: 656e 745f 6d61 6b69 6e67 7328 290a 2020  ent_makings().  
+00006660: 2020 2020 2020 290a 0a20 2020 2040 6c61        )..    @la
+00006670: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00006680: 6566 205f 656c 656d 656e 7473 5f74 7261  ef _elements_tra
+00006690: 6e73 666f 726d 7328 7365 6c66 2920 2d3e  nsforms(self) ->
+000066a0: 2044 6963 743a 0a20 2020 2020 2020 2022   Dict:.        "
+000066b0: 2222 456c 656d 656e 7420 7472 616e 7366  ""Element transf
+000066c0: 6f72 6d20 6469 6374 2065 7870 7265 7373  orm dict express
+000066d0: 6564 2069 6e20 7468 6520 6469 6d65 6e73  ed in the dimens
+000066e0: 696f 6e20 7472 616e 7366 6f72 6d73 2065  ion transforms e
+000066f0: 7870 7265 7373 696f 6e2e 2222 220a 2020  xpression.""".  
+00006700: 2020 2020 2020 7265 7475 726e 2028 0a20        return (. 
+00006710: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00006720: 5f73 6869 6d6d 6564 5f65 6c65 6d65 6e74  _shimmed_element
+00006730: 5f74 7261 6e73 666f 726d 730a 2020 2020  _transforms.    
+00006740: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00006750: 5f64 696d 656e 7369 6f6e 5f74 7970 6520  _dimension_type 
+00006760: 3d3d 2044 542e 4d52 0a20 2020 2020 2020  == DT.MR.       
+00006770: 2020 2020 2065 6c73 6520 7365 6c66 2e5f       else self._
+00006780: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+00006790: 6f72 6d73 5f64 6963 742e 6765 7428 2265  orms_dict.get("e
+000067a0: 6c65 6d65 6e74 7322 2c20 7b7d 290a 2020  lements", {}).  
+000067b0: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
+000067c0: 205f 6974 6572 5f65 6c65 6d65 6e74 5f6d   _iter_element_m
+000067d0: 616b 696e 6773 2873 656c 6629 202d 3e20  akings(self) -> 
+000067e0: 4974 6572 6174 6f72 5b54 7570 6c65 5b69  Iterator[Tuple[i
+000067f0: 6e74 2c20 4469 6374 2c20 4469 6374 5d5d  nt, Dict, Dict]]
+00006800: 3a0a 2020 2020 2020 2020 2222 2247 656e  :.        """Gen
+00006810: 6572 6174 6520 7475 706c 6520 6f66 2076  erate tuple of v
+00006820: 616c 7565 7320 6e65 6564 6564 2074 6f20  alues needed to 
+00006830: 636f 6e73 7472 7563 7420 6561 6368 2065  construct each e
+00006840: 6c65 6d65 6e74 206f 626a 6563 742e 0a0a  lement object...
+00006850: 2020 2020 2020 2020 416e 2028 6964 782c          An (idx,
+00006860: 2065 6c65 6d65 6e74 5f64 6963 742c 2065   element_dict, e
+00006870: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
+00006880: 735f 6469 6374 2920 7475 706c 6520 6973  s_dict) tuple is
+00006890: 2067 656e 6572 6174 6564 2066 6f72 2065   generated for e
+000068a0: 6163 680a 2020 2020 2020 2020 656c 656d  ach.        elem
+000068b0: 656e 7420 696e 2074 6869 7320 6469 6d65  ent in this dime
+000068c0: 6e73 696f 6e2c 2069 6e20 7468 6520 6f72  nsion, in the or
+000068d0: 6465 7220 7468 6579 2061 7070 6561 7220  der they appear 
+000068e0: 696e 2074 6865 2063 7562 652d 7265 7375  in the cube-resu
+000068f0: 6c74 2e20 416c 6c0a 2020 2020 2020 2020  lt. All.        
+00006900: 656c 656d 656e 7473 2061 7265 2069 6e63  elements are inc
+00006910: 6c75 6465 6420 2869 6e63 6c75 6469 6e67  luded (including
+00006920: 206d 6973 7369 6e67 292e 0a20 2020 2020   missing)..     
+00006930: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
+00006940: 6c65 6d65 6e74 735f 7472 616e 7366 6f72  lements_transfor
+00006950: 6d73 203d 2073 656c 662e 5f65 6c65 6d65  ms = self._eleme
+00006960: 6e74 735f 7472 616e 7366 6f72 6d73 0a20  nts_transforms. 
+00006970: 2020 2020 2020 2066 6f72 2069 6478 2c20         for idx, 
+00006980: 656c 656d 656e 745f 6469 6374 2069 6e20  element_dict in 
+00006990: 656e 756d 6572 6174 6528 7365 6c66 2e5f  enumerate(self._
+000069a0: 656c 656d 656e 745f 6469 6374 7329 3a0a  element_dicts):.
+000069b0: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
+000069c0: 2d20 636f 6e76 6572 7420 746f 2073 7472  - convert to str
+000069d0: 696e 6720 666f 7220 6361 7465 676f 7269  ing for categori
+000069e0: 6361 6c20 6964 730a 2020 2020 2020 2020  cal ids.        
+000069f0: 2020 2020 656c 656d 656e 745f 6964 203d      element_id =
+00006a00: 2065 6c65 6d65 6e74 5f64 6963 745b 2269   element_dict["i
+00006a10: 6422 5d0a 2020 2020 2020 2020 2020 2020  d"].            
+00006a20: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+00006a30: 6d73 5f64 6963 7420 3d20 656c 656d 656e  ms_dict = elemen
+00006a40: 7473 5f74 7261 6e73 666f 726d 732e 6765  ts_transforms.ge
+00006a50: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+00006a60: 2020 2065 6c65 6d65 6e74 5f69 642c 2065     element_id, e
+00006a70: 6c65 6d65 6e74 735f 7472 616e 7366 6f72  lements_transfor
+00006a80: 6d73 2e67 6574 2873 7472 2865 6c65 6d65  ms.get(str(eleme
+00006a90: 6e74 5f69 6429 2c20 7b7d 290a 2020 2020  nt_id), {}).    
+00006aa0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00006ab0: 2020 2020 2020 7969 656c 6420 6964 782c        yield idx,
+00006ac0: 2065 6c65 6d65 6e74 5f64 6963 742c 2065   element_dict, e
+00006ad0: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
+00006ae0: 735f 6469 6374 0a0a 2020 2020 406c 617a  s_dict..    @laz
+00006af0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+00006b00: 6620 5f73 6869 6d6d 6564 5f65 6c65 6d65  f _shimmed_eleme
+00006b10: 6e74 5f74 7261 6e73 666f 726d 7328 7365  nt_transforms(se
+00006b20: 6c66 2920 2d3e 2044 6963 743a 0a20 2020  lf) -> Dict:.   
+00006b30: 2020 2020 2022 2222 456c 656d 656e 7420       """Element 
+00006b40: 7472 616e 7366 6f72 6d73 2064 6963 7420  transforms dict 
+00006b50: 666f 7220 6172 7261 7920 6469 6d65 6e73  for array dimens
+00006b60: 696f 6e73 2e0a 0a20 2020 2020 2020 2054  ions...        T
+00006b70: 6f20 7072 6f76 6964 6520 636f 6e73 6973  o provide consis
+00006b80: 7465 6e63 7920 7769 7468 2061 2070 6f6f  tency with a poo
+00006b90: 726c 792d 6465 6669 6e65 6420 696e 7465  rly-defined inte
+00006ba0: 7266 6163 6520 666f 7220 6361 7465 676f  rface for catego
+00006bb0: 7269 6361 6c0a 2020 2020 2020 2020 696e  rical.        in
+00006bc0: 7365 7274 696f 6e73 2c20 6120 636c 6965  sertions, a clie
+00006bd0: 6e74 2063 616e 2069 6e63 6c75 6465 2061  nt can include a
+00006be0: 2060 2268 6964 6522 3a20 7472 7565 6020   `"hide": true` 
+00006bf0: 6669 656c 6420 696e 2061 2028 636f 6d70  field in a (comp
+00006c00: 6c65 7465 2920 636f 7079 206f 660a 2020  lete) copy of.  
+00006c10: 2020 2020 2020 6120 7661 7269 6162 6c65        a variable
+00006c20: 2d62 6173 6564 2069 6e73 6572 7469 6f6e  -based insertion
+00006c30: 2069 6e20 6f72 6465 7220 746f 2073 7570   in order to sup
+00006c40: 7072 6573 7320 7468 6174 2076 6172 6961  press that varia
+00006c50: 626c 652d 6261 7365 6420 696e 7365 7274  ble-based insert
+00006c60: 696f 6e2e 0a0a 2020 2020 2020 2020 466f  ion...        Fo
+00006c70: 7220 7468 6520 6172 7261 7920 6361 7365  r the array case
+00006c80: 2c20 7468 6573 6520 6e65 6564 2074 6f20  , these need to 
+00006c90: 6265 2074 7261 6e73 6c61 7465 6420 746f  be translated to
+00006ca0: 2061 2022 6869 6465 2220 7472 616e 7366   a "hide" transf
+00006cb0: 6f72 6d20 6f6e 2074 6865 0a20 2020 2020  orm on the.     
+00006cc0: 2020 2073 7562 7661 7269 6162 6c65 2065     subvariable e
+00006cd0: 6c65 6d65 6e74 2062 6563 6175 7365 2073  lement because s
+00006ce0: 7563 6820 616e 2069 6e73 6572 7469 6f6e  uch an insertion
+00006cf0: 2062 6563 6f6d 6573 2061 2064 6572 6976   becomes a deriv
+00006d00: 6564 2073 7562 7661 7269 6162 6c65 206a  ed subvariable j
+00006d10: 7573 740a 2020 2020 2020 2020 6c69 6b65  ust.        like
+00006d20: 2074 6865 206f 7468 6572 2073 7562 7661   the other subva
+00006d30: 7269 6162 6c65 7320 696e 2074 6865 2064  riables in the d
+00006d40: 696d 656e 7369 6f6e 2e0a 2020 2020 2020  imension..      
+00006d50: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
+00006d60: 2d2d 2d20 6375 7272 656e 746c 7920 616e  --- currently an
+00006d70: 2069 6e73 6572 7465 642d 7375 6276 6172   inserted-subvar
+00006d80: 6961 626c 6520 6361 6e20 6f6e 6c79 2062  iable can only b
+00006d90: 6520 6964 656e 7469 6669 6564 2062 7920  e identified by 
+00006da0: 6e61 6d65 2c20 7468 6572 6520 6973 0a20  name, there is. 
+00006db0: 2020 2020 2020 2023 202d 2d2d 206e 6f20         # --- no 
+00006dc0: 616c 6961 7320 666f 7220 616e 2069 6e73  alias for an ins
+00006dd0: 6572 7465 642d 7375 6276 6172 6961 626c  erted-subvariabl
+00006de0: 6520 616e 6420 6974 2064 6f65 7320 6e6f  e and it does no
+00006df0: 7420 7265 6365 6976 6520 6120 226e 6f72  t receive a "nor
+00006e00: 6d61 6c22 0a20 2020 2020 2020 2023 202d  mal".        # -
+00006e10: 2d2d 2065 6c65 6d65 6e74 2e69 6420 6c69  -- element.id li
+00006e20: 6b65 2022 3030 3031 222e 0a20 2020 2020  ke "0001"..     
+00006e30: 2020 2068 6964 6465 6e5f 696e 7365 7274     hidden_insert
+00006e40: 696f 6e5f 6e61 6d65 7320 3d20 7475 706c  ion_names = tupl
+00006e50: 6528 0a20 2020 2020 2020 2020 2020 2069  e(.            i
+00006e60: 6e73 6572 7469 6f6e 5b22 6e61 6d65 225d  nsertion["name"]
+00006e70: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00006e80: 2069 6e73 6572 7469 6f6e 2069 6e20 7365   insertion in se
+00006e90: 6c66 2e5f 6469 6d65 6e73 696f 6e5f 7472  lf._dimension_tr
+00006ea0: 616e 7366 6f72 6d73 5f64 6963 742e 6765  ansforms_dict.ge
+00006eb0: 7428 2269 6e73 6572 7469 6f6e 7322 2c20  t("insertions", 
+00006ec0: 5b5d 290a 2020 2020 2020 2020 2020 2020  []).            
+00006ed0: 6966 2069 6e73 6572 7469 6f6e 2e67 6574  if insertion.get
+00006ee0: 2822 6869 6465 222c 2046 616c 7365 290a  ("hide", False).
+00006ef0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00006f00: 2020 2023 202d 2d2d 2068 6f77 6576 6572     # --- however
+00006f10: 2c20 7468 6520 6869 6465 2d74 7261 6e73  , the hide-trans
+00006f20: 666f 726d 206d 7573 7420 6265 2069 6465  form must be ide
+00006f30: 6e74 6966 6965 6420 6279 2065 6c65 6d65  ntified by eleme
+00006f40: 6e74 2d69 642c 2073 6f20 7765 206e 6565  nt-id, so we nee
+00006f50: 6420 610a 2020 2020 2020 2020 2320 2d2d  d a.        # --
+00006f60: 2d20 6d61 7070 696e 6720 6f66 2069 6e73  - mapping of ins
+00006f70: 6572 7469 6f6e 2d6e 616d 6520 746f 2065  ertion-name to e
+00006f80: 6c65 6d65 6e74 2d69 640a 2020 2020 2020  lement-id.      
+00006f90: 2020 656c 656d 656e 745f 6964 5f66 726f    element_id_fro
+00006fa0: 6d5f 6e61 6d65 203d 207b 0a20 2020 2020  m_name = {.     
+00006fb0: 2020 2020 2020 2065 6c65 6d65 6e74 5b22         element["
+00006fc0: 7661 6c75 6522 5d5b 2269 6422 5d3a 2065  value"]["id"]: e
+00006fd0: 6c65 6d65 6e74 5b22 6964 225d 2066 6f72  lement["id"] for
+00006fe0: 2065 6c65 6d65 6e74 2069 6e20 7365 6c66   element in self
+00006ff0: 2e5f 656c 656d 656e 745f 6469 6374 730a  ._element_dicts.
+00007000: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+00007010: 2020 2023 202d 2d2d 206d 6572 6765 2068     # --- merge h
+00007020: 6964 6520 7472 616e 7366 6f72 6d73 2077  ide transforms w
+00007030: 6974 6820 2861 2063 6f70 7920 6f66 2920  ith (a copy of) 
+00007040: 7468 6520 6578 6973 7469 6e67 2065 6c65  the existing ele
+00007050: 6d65 6e74 2074 7261 6e73 666f 726d 7320  ment transforms 
+00007060: 2d2d 2d0a 2020 2020 2020 2020 6869 6464  ---.        hidd
+00007070: 656e 5f74 7261 6e73 666f 726d 7320 3d20  en_transforms = 
+00007080: 7b0a 2020 2020 2020 2020 2020 2020 656c  {.            el
+00007090: 656d 656e 745f 6964 5f66 726f 6d5f 6e61  ement_id_from_na
+000070a0: 6d65 5b6e 616d 655d 3a20 7b22 6869 6465  me[name]: {"hide
+000070b0: 223a 2054 7275 657d 0a20 2020 2020 2020  ": True}.       
+000070c0: 2020 2020 2066 6f72 206e 616d 6520 696e       for name in
+000070d0: 2068 6964 6465 6e5f 696e 7365 7274 696f   hidden_insertio
+000070e0: 6e5f 6e61 6d65 730a 2020 2020 2020 2020  n_names.        
+000070f0: 7d0a 2020 2020 2020 2020 656c 656d 656e  }.        elemen
+00007100: 745f 7472 616e 7366 6f72 6d73 203d 2073  t_transforms = s
+00007110: 656c 662e 5f64 696d 656e 7369 6f6e 5f74  elf._dimension_t
+00007120: 7261 6e73 666f 726d 735f 6469 6374 2e67  ransforms_dict.g
+00007130: 6574 2822 656c 656d 656e 7473 222c 207b  et("elements", {
+00007140: 7d29 0a20 2020 2020 2020 2072 6574 7572  }).        retur
+00007150: 6e20 7b2a 2a68 6964 6465 6e5f 7472 616e  n {**hidden_tran
+00007160: 7366 6f72 6d73 2c20 2a2a 656c 656d 656e  sforms, **elemen
+00007170: 745f 7472 616e 7366 6f72 6d73 7d0a 0a0a  t_transforms}...
+00007180: 636c 6173 7320 5f56 616c 6964 456c 656d  class _ValidElem
+00007190: 656e 7473 285f 4261 7365 456c 656d 656e  ents(_BaseElemen
+000071a0: 7473 293a 0a20 2020 2022 2222 5365 7175  ts):.    """Sequ
+000071b0: 656e 6365 206f 6620 6e6f 6e2d 6d69 7373  ence of non-miss
+000071c0: 696e 6720 656c 656d 656e 7420 6f62 6a65  ing element obje
+000071d0: 6374 7320 666f 7220 6120 6469 6d65 6e73  cts for a dimens
+000071e0: 696f 6e2e 0a0a 2020 2020 2a61 6c6c 5f65  ion...    *all_e
+000071f0: 6c65 6d65 6e74 732a 2069 7320 616e 2069  lements* is an i
+00007200: 6e73 7461 6e63 6520 6f66 205f 416c 6c45  nstance of _AllE
+00007210: 6c65 6d65 6e74 7320 636f 6e74 6169 6e69  lements containi
+00007220: 6e67 2061 6c6c 2074 6865 2065 6c65 6d65  ng all the eleme
+00007230: 6e74 730a 2020 2020 6f66 2061 2064 696d  nts.    of a dim
+00007240: 656e 7369 6f6e 2e20 5468 6973 206f 626a  ension. This obj
+00007250: 6563 7420 6973 206f 6e6c 7920 696e 7465  ect is only inte
+00007260: 6e64 6564 2074 6f20 6265 2063 6f6e 7374  nded to be const
+00007270: 7275 6374 6564 2062 790a 2020 2020 5f41  ructed by.    _A
+00007280: 6c6c 456c 656d 656e 7473 2e76 616c 6964  llElements.valid
+00007290: 5f65 6c65 6d65 6e74 7320 616e 6420 7468  _elements and th
+000072a0: 6572 6520 7368 6f75 6c64 2062 6520 6e6f  ere should be no
+000072b0: 2072 6561 736f 6e20 746f 2063 6f6e 7374   reason to const
+000072c0: 7275 6374 2069 740a 2020 2020 6469 7265  ruct it.    dire
+000072d0: 6374 6c79 2e0a 2020 2020 2222 220a 0a20  ctly..    """.. 
+000072e0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000072f0: 7365 6c66 2c20 616c 6c5f 656c 656d 656e  self, all_elemen
+00007300: 7473 2c20 6469 6d65 6e73 696f 6e5f 7472  ts, dimension_tr
+00007310: 616e 7366 6f72 6d73 5f64 6963 7429 3a0a  ansforms_dict):.
+00007320: 2020 2020 2020 2020 7365 6c66 2e5f 616c          self._al
+00007330: 6c5f 656c 656d 656e 7473 203d 2061 6c6c  l_elements = all
+00007340: 5f65 6c65 6d65 6e74 730a 2020 2020 2020  _elements.      
+00007350: 2020 7365 6c66 2e5f 6469 6d65 6e73 696f    self._dimensio
+00007360: 6e5f 7472 616e 7366 6f72 6d73 5f64 6963  n_transforms_dic
+00007370: 7420 3d20 6469 6d65 6e73 696f 6e5f 7472  t = dimension_tr
+00007380: 616e 7366 6f72 6d73 5f64 6963 740a 0a20  ansforms_dict.. 
+00007390: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+000073a0: 0a20 2020 2064 6566 205f 656c 656d 656e  .    def _elemen
+000073b0: 7473 2873 656c 6629 202d 3e20 5475 706c  ts(self) -> Tupl
+000073c0: 655b 225f 456c 656d 656e 7422 2c20 2e2e  e["_Element", ..
+000073d0: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+000073e0: 7570 6c65 2063 6f6e 7461 696e 696e 6720  uple containing 
+000073f0: 6163 7475 616c 2073 6571 7565 6e63 6520  actual sequence 
+00007400: 6f66 2065 6c65 6d65 6e74 206f 626a 6563  of element objec
+00007410: 7473 2e22 2222 0a20 2020 2020 2020 2072  ts.""".        r
+00007420: 6574 7572 6e20 7475 706c 6528 656c 656d  eturn tuple(elem
+00007430: 656e 7420 666f 7220 656c 656d 656e 7420  ent for element 
+00007440: 696e 2073 656c 662e 5f61 6c6c 5f65 6c65  in self._all_ele
+00007450: 6d65 6e74 7320 6966 206e 6f74 2065 6c65  ments if not ele
+00007460: 6d65 6e74 2e6d 6973 7369 6e67 290a 0a0a  ment.missing)...
+00007470: 636c 6173 7320 5f45 6c65 6d65 6e74 4964  class _ElementId
+00007480: 5368 696d 3a0a 2020 2020 2222 224f 626a  Shim:.    """Obj
+00007490: 6563 7420 7573 6564 2074 6f20 7265 706c  ect used to repl
+000074a0: 6163 6520 656c 656d 656e 7420 6964 7320  ace element ids 
+000074b0: 7769 7468 2061 6c69 6173 2066 6f72 2073  with alias for s
+000074c0: 7562 7661 7269 6162 6c65 732e 0a0a 2020  ubvariables...  
+000074d0: 2020 5765 2077 616e 7420 746f 206d 6f76    We want to mov
+000074e0: 6520 746f 2061 2077 6f72 6c64 2077 6865  e to a world whe
+000074f0: 7265 2065 6c65 6d65 6e74 7320 6f6e 2061  re elements on a
+00007500: 2073 7562 7661 7269 6162 6c65 7320 6469   subvariables di
+00007510: 6d65 6e73 696f 6e20 6172 650a 2020 2020  mension are.    
+00007520: 6964 656e 7469 6669 6564 2062 7920 7468  identified by th
+00007530: 6569 7220 616c 6961 732c 2062 7574 2072  eir alias, but r
+00007540: 6967 6874 206e 6f77 2074 6865 2022 656c  ight now the "el
+00007550: 656d 656e 745f 6964 2220 6672 6f6d 207a  ement_id" from z
+00007560: 7a39 2069 730a 2020 2020 616e 2069 6e64  z9 is.    an ind
+00007570: 6578 2c20 616e 6420 7468 6520 7472 616e  ex, and the tran
+00007580: 7366 6f72 6d73 2068 6176 6520 7365 7665  sforms have seve
+00007590: 7261 6c20 6469 6666 6572 656e 7420 7761  ral different wa
+000075a0: 7973 2074 6f20 7265 6665 7220 746f 0a20  ys to refer to. 
+000075b0: 2020 2073 7562 7661 7269 6162 6c65 732e     subvariables.
+000075c0: 0a0a 2020 2020 5479 7065 7320 6f66 2069  ..    Types of i
+000075d0: 6465 6e74 6966 6965 7273 2066 6f72 2073  dentifiers for s
+000075e0: 7562 7661 7269 6162 6c65 7320 2861 6e64  ubvariables (and
+000075f0: 2064 6572 6976 6564 2069 6e73 6572 7469   derived inserti
+00007600: 6f6e 7329 3a0a 0a20 2020 202a 2022 656c  ons):..    * "el
+00007610: 656d 656e 745f 6964 223a 2053 746f 7265  ement_id": Store
+00007620: 6420 696e 2074 6865 2063 7562 6520 7265  d in the cube re
+00007630: 7375 6c74 2061 7320 7468 6520 6f62 6a65  sult as the obje
+00007640: 6374 206e 616d 6520 696e 0a20 2020 2020  ct name in.     
+00007650: 2060 6469 6d65 6e73 696f 6e73 5b69 5d2e   `dimensions[i].
+00007660: 7479 7065 2e65 6c65 6d65 6e74 735b 6a5d  type.elements[j]
+00007670: 2e69 6460 2e20 466f 7220 7375 6276 6172  .id`. For subvar
+00007680: 6961 626c 6573 2c20 7a7a 3920 6375 7272  iables, zz9 curr
+00007690: 656e 746c 7920 7075 7473 0a20 2020 2020  ently puts.     
+000076a0: 2074 6865 2069 6e64 6578 2069 6e74 6567   the index integ
+000076b0: 6572 2068 6572 652e 204c 6f6e 6720 7465  er here. Long te
+000076c0: 726d 207a 7a39 206d 6179 2063 6861 6e67  rm zz9 may chang
+000076d0: 6520 7468 6973 2074 6f20 7468 6520 7468  e this to the th
+000076e0: 6520 616c 6961 732e 0a20 2020 202a 2022  e alias..    * "
+000076f0: 7375 6276 6172 6961 626c 655f 6964 223a  subvariable_id":
+00007700: 2053 7562 7661 7269 6162 6c65 7320 6861   Subvariables ha
+00007710: 7665 2061 6e20 6964 2073 746f 7265 6420  ve an id stored 
+00007720: 696e 0a20 2020 2020 2060 6469 6d65 6e73  in.      `dimens
+00007730: 696f 6e73 5b69 5d2e 7479 7065 2e65 6c65  ions[i].type.ele
+00007740: 6d65 6e74 735b 6a5d 2e76 616c 7565 2e69  ments[j].value.i
+00007750: 6460 2c20 6765 6e65 7261 6c6c 7920 7468  d`, generally th
+00007760: 6973 2069 7320 6120 3420 6469 6769 742c  is is a 4 digit,
+00007770: 0a20 2020 2020 2030 2d70 6164 6465 6420  .      0-padded 
+00007780: 696e 6465 7820 6f66 2074 6865 2073 7562  index of the sub
+00007790: 7661 7269 6162 6c65 2077 6865 6e20 6974  variable when it
+000077a0: 2077 6173 2066 6972 7374 2063 7265 6174   was first creat
+000077b0: 6564 2028 6567 2022 3030 3031 222c 0a20  ed (eg "0001",. 
+000077c0: 2020 2020 2022 3030 3032 222c 202e 2e2e       "0002", ...
+000077d0: 292c 2074 686f 7567 6820 6974 2069 7320  ), though it is 
+000077e0: 6e6f 7420 7265 7175 6972 6564 2074 6f20  not required to 
+000077f0: 6265 2e20 466f 7220 6465 7269 7665 6420  be. For derived 
+00007800: 696e 7365 7274 696f 6e73 2c0a 2020 2020  insertions,.    
+00007810: 2020 6375 7272 656e 746c 7920 7468 6520    currently the 
+00007820: 6e61 6d65 2069 7320 7573 6564 2068 6572  name is used her
+00007830: 652e 0a20 2020 202a 2022 616c 6961 7322  e..    * "alias"
+00007840: 3a20 5375 6276 6172 6961 626c 6573 2061  : Subvariables a
+00007850: 6c73 6f20 6861 7665 2061 6e20 616c 6961  lso have an alia
+00007860: 7320 7468 6174 2069 6465 6e74 6966 6965  s that identifie
+00007870: 7320 7468 656d 2e20 4974 2069 7320 7374  s them. It is st
+00007880: 6f72 6564 0a20 2020 2020 2069 6e20 6064  ored.      in `d
+00007890: 696d 656e 7369 6f6e 735b 695d 2e74 7970  imensions[i].typ
+000078a0: 652e 656c 656d 656e 7473 5b6a 5d2e 7661  e.elements[j].va
+000078b0: 6c75 652e 0a20 2020 2022 2222 0a0a 2020  lue..    """..  
+000078c0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000078d0: 656c 662c 2064 696d 656e 7369 6f6e 5f74  elf, dimension_t
+000078e0: 7970 652c 2064 696d 656e 7369 6f6e 5f64  ype, dimension_d
+000078f0: 6963 742c 2064 696d 656e 7369 6f6e 5f74  ict, dimension_t
+00007900: 7261 6e73 666f 726d 735f 6469 6374 293a  ransforms_dict):
+00007910: 0a20 2020 2020 2020 2073 656c 662e 5f64  .        self._d
+00007920: 696d 656e 7369 6f6e 5f74 7970 6520 3d20  imension_type = 
+00007930: 6469 6d65 6e73 696f 6e5f 7479 7065 0a20  dimension_type. 
+00007940: 2020 2020 2020 2073 656c 662e 5f64 696d         self._dim
+00007950: 656e 7369 6f6e 5f64 6963 7420 3d20 6469  ension_dict = di
+00007960: 6d65 6e73 696f 6e5f 6469 6374 0a20 2020  mension_dict.   
+00007970: 2020 2020 2073 656c 662e 5f64 696d 656e       self._dimen
+00007980: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
+00007990: 6469 6374 203d 2064 696d 656e 7369 6f6e  dict = dimension
+000079a0: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+000079b0: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+000079c0: 7274 790a 2020 2020 6465 6620 7368 696d  rty.    def shim
+000079d0: 6d65 645f 6469 6d65 6e73 696f 6e5f 6469  med_dimension_di
+000079e0: 6374 2873 656c 6629 202d 3e20 4469 6374  ct(self) -> Dict
+000079f0: 3a0a 2020 2020 2020 2020 2222 2243 6f70  :.        """Cop
+00007a00: 7920 6f66 2064 696d 656e 7369 6f6e 2064  y of dimension d
+00007a10: 6963 7469 6f6e 6172 7920 7769 7468 2073  ictionary with s
+00007a20: 6869 6d6d 6564 2060 656c 656d 656e 745f  himmed `element_
+00007a30: 6964 6073 0a0a 2020 2020 2020 2020 5765  id`s..        We
+00007a40: 2077 616e 7420 746f 206d 6f76 6520 746f   want to move to
+00007a50: 2061 2077 6f72 6c64 2077 6865 7265 2065   a world where e
+00007a60: 6c65 6d65 6e74 7320 6f6e 2061 2073 7562  lements on a sub
+00007a70: 7661 7269 6162 6c65 7320 6469 6d65 6e73  variables dimens
+00007a80: 696f 6e20 6172 650a 2020 2020 2020 2020  ion are.        
+00007a90: 6964 656e 7469 6669 6564 2062 7920 7468  identified by th
+00007aa0: 6569 7220 616c 6961 732c 2062 7574 2072  eir alias, but r
+00007ab0: 6967 6874 206e 6f77 2074 6865 2022 656c  ight now the "el
+00007ac0: 656d 656e 745f 6964 2220 6672 6f6d 207a  ement_id" from z
+00007ad0: 7a39 2069 730a 2020 2020 2020 2020 616e  z9 is.        an
+00007ae0: 2069 6e64 6578 2066 6f72 2073 7562 7661   index for subva
+00007af0: 7269 6162 6c65 732e 0a20 2020 2020 2020  riables..       
+00007b00: 2022 2222 0a20 2020 2020 2020 2073 6869   """.        shi
+00007b10: 6d20 3d20 636f 7079 2e64 6565 7063 6f70  m = copy.deepcop
+00007b20: 7928 7365 6c66 2e5f 6469 6d65 6e73 696f  y(self._dimensio
+00007b30: 6e5f 6469 6374 290a 0a20 2020 2020 2020  n_dict)..       
+00007b40: 2023 202d 2d2d 204c 6561 7665 206e 6f6e   # --- Leave non
+00007b50: 2d73 7562 7661 7269 6162 6c65 2064 696d  -subvariable dim
+00007b60: 656e 7369 6f6e 2074 7970 6573 2061 6c6f  ension types alo
+00007b70: 6e65 2c20 6173 2074 6865 7920 646f 6e27  ne, as they don'
+00007b80: 7420 6861 7665 0a20 2020 2020 2020 2023  t have.        #
+00007b90: 202d 2d2d 2073 7562 7661 7269 6162 6c65   --- subvariable
+00007ba0: 2061 6c69 6173 6573 2074 6f20 7573 652c   aliases to use,
+00007bb0: 2061 6e64 2063 6174 6567 6f72 7920 6964   and category id
+00007bc0: 7320 6172 6520 616c 7265 6164 7920 7468  s are already th
+00007bd0: 6520 6d61 696e 2077 6179 0a20 2020 2020  e main way.     
+00007be0: 2020 2023 202d 2d2d 2077 6520 6964 656e     # --- we iden
+00007bf0: 7469 6679 2065 6c65 6d65 6e74 7320 6f6e  tify elements on
+00007c00: 2063 6174 6567 6f72 6963 616c 2064 696d   categorical dim
+00007c10: 656e 7369 6f6e 7320 2861 6e64 2074 6869  ensions (and thi
+00007c20: 7320 6973 2063 6f72 7265 6374 292e 0a20  s is correct).. 
+00007c30: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00007c40: 6469 6d65 6e73 696f 6e5f 7479 7065 206e  dimension_type n
+00007c50: 6f74 2069 6e20 4454 2e41 5252 4159 5f54  ot in DT.ARRAY_T
+00007c60: 5950 4553 3a0a 2020 2020 2020 2020 2020  YPES:.          
+00007c70: 2020 7265 7475 726e 2073 6869 6d0a 0a20    return shim.. 
+00007c80: 2020 2020 2020 2023 202d 2d2d 2052 6570         # --- Rep
+00007c90: 6c61 6365 2065 6c65 6d65 6e74 2069 6473  lace element ids
+00007ca0: 2077 6974 6820 7468 6520 616c 6961 730a   with the alias.
+00007cb0: 2020 2020 2020 2020 666f 7220 6964 782c          for idx,
+00007cc0: 2061 6c69 6173 2069 6e20 656e 756d 6572   alias in enumer
+00007cd0: 6174 6528 7365 6c66 2e5f 7375 6276 6172  ate(self._subvar
+00007ce0: 5f61 6c69 6173 6573 293a 0a20 2020 2020  _aliases):.     
+00007cf0: 2020 2020 2020 2073 6869 6d5b 2274 7970         shim["typ
+00007d00: 6522 5d5b 2265 6c65 6d65 6e74 7322 5d5b  e"]["elements"][
+00007d10: 6964 785d 5b22 6964 225d 203d 2061 6c69  idx]["id"] = ali
+00007d20: 6173 0a0a 2020 2020 2020 2020 7265 7475  as..        retu
+00007d30: 726e 2073 6869 6d0a 0a20 2020 2040 6c61  rn shim..    @la
+00007d40: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00007d50: 6566 2073 6869 6d6d 6564 5f64 696d 656e  ef shimmed_dimen
+00007d60: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
+00007d70: 6469 6374 2873 656c 6629 202d 3e20 4469  dict(self) -> Di
+00007d80: 6374 3a0a 2020 2020 2020 2020 2222 2243  ct:.        """C
+00007d90: 6f70 7920 6f66 2064 696d 656e 7369 6f6e  opy of dimension
+00007da0: 2074 7261 6e73 666f 726d 7320 6469 6374   transforms dict
+00007db0: 696f 6e61 7279 2077 6974 6820 7368 696d  ionary with shim
+00007dc0: 6d65 6420 6065 6c65 6d65 6e74 5f69 6460  med `element_id`
+00007dd0: 730a 0a20 2020 2020 2020 2057 6520 7761  s..        We wa
+00007de0: 6e74 2074 6f20 6d6f 7665 2074 6f20 6120  nt to move to a 
+00007df0: 776f 726c 6420 7768 6572 6520 656c 656d  world where elem
+00007e00: 656e 7473 206f 6e20 6120 7375 6276 6172  ents on a subvar
+00007e10: 6961 626c 6573 2064 696d 656e 7369 6f6e  iables dimension
+00007e20: 2061 7265 0a20 2020 2020 2020 2069 6465   are.        ide
+00007e30: 6e74 6966 6965 6420 6279 2074 6865 6972  ntified by their
+00007e40: 2061 6c69 6173 2c20 6275 7420 7269 6768   alias, but righ
+00007e50: 7420 6e6f 7720 7468 6520 2265 6c65 6d65  t now the "eleme
+00007e60: 6e74 5f69 6422 2066 726f 6d20 7a7a 3920  nt_id" from zz9 
+00007e70: 6973 0a20 2020 2020 2020 2073 696d 706c  is.        simpl
+00007e80: 7920 7468 6520 7375 6276 6172 6961 626c  y the subvariabl
+00007e90: 6527 7320 2875 6e73 7461 626c 6529 2063  e's (unstable) c
+00007ea0: 6172 6469 6e61 6c20 706f 7369 7469 6f6e  ardinal position
+00007eb0: 2069 6e20 7375 6276 6172 6961 626c 6573   in subvariables
+00007ec0: 0a20 2020 2020 2020 2073 6571 7565 6e63  .        sequenc
+00007ed0: 652e 2044 6966 6665 7265 6e74 2070 6172  e. Different par
+00007ee0: 7473 206f 6620 7468 6520 7472 616e 7366  ts of the transf
+00007ef0: 6f72 6d73 2068 6176 6520 7365 7665 7261  orms have severa
+00007f00: 6c20 6469 6666 6572 656e 7420 7761 7973  l different ways
+00007f10: 0a20 2020 2020 2020 2074 6f20 7265 6665  .        to refe
+00007f20: 7220 746f 2073 7562 7661 7269 6162 6c65  r to subvariable
+00007f30: 732e 0a0a 2020 2020 2020 2020 5479 7065  s...        Type
+00007f40: 7320 6f66 2069 6465 6e74 6966 6965 7273  s of identifiers
+00007f50: 2066 6f72 2073 7562 7661 7269 6162 6c65   for subvariable
+00007f60: 7320 2861 6e64 2064 6572 6976 6564 2069  s (and derived i
+00007f70: 6e73 6572 7469 6f6e 7329 3a0a 2020 2020  nsertions):.    
+00007f80: 2020 2020 2d20 2265 6c65 6d65 6e74 5f69      - "element_i
+00007f90: 6422 3a20 5374 6f72 6564 2069 6e20 7468  d": Stored in th
+00007fa0: 6520 6375 6265 2072 6573 756c 7420 6173  e cube result as
+00007fb0: 2074 6865 206f 626a 6563 7420 6e61 6d65   the object name
+00007fc0: 2069 6e0a 2020 2020 2020 2020 2020 6064   in.          `d
+00007fd0: 696d 656e 7369 6f6e 735b 695d 2e74 7970  imensions[i].typ
+00007fe0: 652e 656c 656d 656e 7473 5b6a 5d2e 6964  e.elements[j].id
+00007ff0: 602e 2046 6f72 2073 7562 7661 7269 6162  `. For subvariab
+00008000: 6c65 732c 207a 7a39 2063 7572 7265 6e74  les, zz9 current
+00008010: 6c79 2070 7574 730a 2020 2020 2020 2020  ly puts.        
+00008020: 2020 7468 6520 696e 6465 7820 696e 7465    the index inte
+00008030: 6765 7220 6865 7265 2e20 4c6f 6e67 2074  ger here. Long t
+00008040: 6572 6d20 7a7a 3920 6d61 7920 6368 616e  erm zz9 may chan
+00008050: 6765 2074 6869 7320 746f 2074 6865 2074  ge this to the t
+00008060: 6865 2061 6c69 6173 2e0a 2020 2020 2020  he alias..      
+00008070: 2020 2d20 2273 7562 7661 7269 6162 6c65    - "subvariable
+00008080: 5f69 6422 3a20 5375 6276 6172 6961 626c  _id": Subvariabl
+00008090: 6573 2068 6176 6520 616e 2069 6420 7374  es have an id st
+000080a0: 6f72 6564 2069 6e0a 2020 2020 2020 2020  ored in.        
+000080b0: 2020 6064 696d 656e 7369 6f6e 735b 695d    `dimensions[i]
+000080c0: 2e74 7970 652e 656c 656d 656e 7473 5b6a  .type.elements[j
+000080d0: 5d2e 7661 6c75 652e 6964 602c 2067 656e  ].value.id`, gen
+000080e0: 6572 616c 6c79 2074 6869 7320 6973 2061  erally this is a
+000080f0: 2034 2064 6967 6974 2c0a 2020 2020 2020   4 digit,.      
+00008100: 2020 2020 302d 7061 6464 6564 2069 6e64      0-padded ind
+00008110: 6578 206f 6620 7468 6520 7375 6276 6172  ex of the subvar
+00008120: 6961 626c 6520 7768 656e 2069 7420 7761  iable when it wa
+00008130: 7320 6669 7273 7420 6372 6561 7465 6420  s first created 
+00008140: 2865 6720 2230 3030 3122 2c0a 2020 2020  (eg "0001",.    
+00008150: 2020 2020 2020 2230 3030 3222 2c20 2e2e        "0002", ..
+00008160: 2e29 2c20 7468 6f75 6768 2069 7420 6973  .), though it is
+00008170: 206e 6f74 2072 6571 7569 7265 6420 746f   not required to
+00008180: 2062 652e 2046 6f72 2064 6572 6976 6564   be. For derived
+00008190: 2069 6e73 6572 7469 6f6e 732c 0a20 2020   insertions,.   
+000081a0: 2020 2020 2020 2063 7572 7265 6e74 6c79         currently
+000081b0: 2074 6865 206e 616d 6520 6973 2075 7365   the name is use
+000081c0: 6420 6865 7265 2e0a 2020 2020 2020 2020  d here..        
+000081d0: 2d20 2261 6c69 6173 223a 2053 7562 7661  - "alias": Subva
+000081e0: 7269 6162 6c65 7320 616c 736f 2068 6176  riables also hav
+000081f0: 6520 616e 2061 6c69 6173 2074 6861 7420  e an alias that 
+00008200: 6964 656e 7469 6669 6573 2074 6865 6d2e  identifies them.
+00008210: 2049 7420 6973 2073 746f 7265 640a 2020   It is stored.  
+00008220: 2020 2020 2020 2020 696e 2060 6469 6d65          in `dime
+00008230: 6e73 696f 6e73 5b69 5d2e 7479 7065 2e65  nsions[i].type.e
+00008240: 6c65 6d65 6e74 735b 6a5d 2e76 616c 7565  lements[j].value
+00008250: 2e72 6566 6572 656e 6365 732e 616c 6961  .references.alia
+00008260: 7360 2e0a 2020 2020 2020 2020 2222 220a  s`..        """.
+00008270: 2020 2020 2020 2020 7368 696d 203d 2063          shim = c
+00008280: 6f70 792e 6465 6570 636f 7079 2873 656c  opy.deepcopy(sel
+00008290: 662e 5f64 696d 656e 7369 6f6e 5f74 7261  f._dimension_tra
+000082a0: 6e73 666f 726d 735f 6469 6374 290a 0a20  nsforms_dict).. 
+000082b0: 2020 2020 2020 2023 202d 2d2d 204c 6561         # --- Lea
+000082c0: 7665 206e 6f6e 2d73 7562 7661 7269 6162  ve non-subvariab
+000082d0: 6c65 2064 696d 656e 7369 6f6e 2074 7970  le dimension typ
+000082e0: 6573 2061 6c6f 6e65 2c20 6173 2074 6865  es alone, as the
+000082f0: 7920 646f 6e27 7420 6861 7665 0a20 2020  y don't have.   
+00008300: 2020 2020 2023 202d 2d2d 2073 7562 7661       # --- subva
+00008310: 7269 6162 6c65 2061 6c69 6173 6573 2074  riable aliases t
+00008320: 6f20 7573 652c 2061 6e64 2063 6174 6567  o use, and categ
+00008330: 6f72 7920 6964 7320 6172 6520 616c 7265  ory ids are alre
+00008340: 6164 7920 7468 6520 6d61 696e 2077 6179  ady the main way
+00008350: 0a20 2020 2020 2020 2023 202d 2d2d 2077  .        # --- w
+00008360: 6520 6964 656e 7469 6679 2065 6c65 6d65  e identify eleme
+00008370: 6e74 7320 6f6e 2063 6174 6567 6f72 6963  nts on categoric
+00008380: 616c 2064 696d 656e 7369 6f6e 7320 2861  al dimensions (a
+00008390: 6e64 2074 6869 7320 6973 2063 6f72 7265  nd this is corre
+000083a0: 6374 292e 0a20 2020 2020 2020 2069 6620  ct)..        if 
+000083b0: 7365 6c66 2e5f 6469 6d65 6e73 696f 6e5f  self._dimension_
+000083c0: 7479 7065 206e 6f74 2069 6e20 4454 2e41  type not in DT.A
+000083d0: 5252 4159 5f54 5950 4553 3a0a 2020 2020  RRAY_TYPES:.    
+000083e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000083f0: 6869 6d0a 0a20 2020 2020 2020 2023 202d  him..        # -
+00008400: 2d2d 2052 6570 6c61 6365 2065 6c65 6d65  -- Replace eleme
+00008410: 6e74 2074 7261 6e73 666f 726d 2069 6473  nt transform ids
+00008420: 2077 6974 6820 7468 6520 616c 6961 730a   with the alias.
+00008430: 2020 2020 2020 2020 6966 2022 656c 656d          if "elem
+00008440: 656e 7473 2220 696e 2073 6869 6d3a 0a20  ents" in shim:. 
+00008450: 2020 2020 2020 2020 2020 2073 6869 6d5b             shim[
+00008460: 2265 6c65 6d65 6e74 7322 5d20 3d20 7365  "elements"] = se
+00008470: 6c66 2e5f 7265 706c 6163 6564 5f65 6c65  lf._replaced_ele
+00008480: 6d65 6e74 5f74 7261 6e73 666f 726d 7328  ment_transforms(
+00008490: 7368 696d 5b22 656c 656d 656e 7473 225d  shim["elements"]
+000084a0: 290a 0a20 2020 2020 2020 2023 202d 2d2d  )..        # ---
+000084b0: 2054 7261 6e73 6c61 7465 2065 7870 6c69   Translate expli
+000084c0: 6369 7420 6f72 6465 7220 656c 656d 656e  cit order elemen
+000084d0: 7420 6964 7320 6966 2070 7265 7365 6e74  t ids if present
+000084e0: 0a20 2020 2020 2020 2069 6620 7368 696d  .        if shim
+000084f0: 2e67 6574 2822 6f72 6465 7222 2c20 7b7d  .get("order", {}
+00008500: 292e 6765 7428 2265 6c65 6d65 6e74 5f69  ).get("element_i
+00008510: 6473 2229 2069 7320 6e6f 7420 4e6f 6e65  ds") is not None
+00008520: 3a0a 2020 2020 2020 2020 2020 2020 7368  :.            sh
+00008530: 696d 5b22 6f72 6465 7222 5d5b 2265 6c65  im["order"]["ele
+00008540: 6d65 6e74 5f69 6473 225d 203d 2073 656c  ment_ids"] = sel
+00008550: 662e 5f72 6570 6c61 6365 645f 6f72 6465  f._replaced_orde
+00008560: 725f 656c 656d 656e 745f 6964 7328 0a20  r_element_ids(. 
+00008570: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00008580: 6869 6d5b 226f 7264 6572 225d 5b22 656c  him["order"]["el
+00008590: 656d 656e 745f 6964 7322 5d0a 2020 2020  ement_ids"].    
+000085a0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+000085b0: 2020 2023 202d 2d2d 2073 6f72 742d 6279     # --- sort-by
+000085c0: 2d76 616c 7565 206f 6e20 7468 6520 6f70  -value on the op
+000085d0: 706f 7369 6e67 2064 696d 656e 7369 6f6e  posing dimension
+000085e0: 2061 6c73 6f20 7265 6665 7273 2074 6f20   also refers to 
+000085f0: 656c 656d 656e 7420 6964 732c 2062 7574  element ids, but
+00008600: 0a20 2020 2020 2020 2023 202d 2d2d 2074  .        # --- t
+00008610: 6865 2069 6473 2072 6566 6572 2074 6f20  he ids refer to 
+00008620: 7468 6520 6f70 706f 7369 6e67 2064 696d  the opposing dim
+00008630: 656e 7369 6f6e 2c20 736f 2064 6f20 7468  ension, so do th
+00008640: 6520 7472 616e 736c 6174 696f 6e20 6c61  e translation la
+00008650: 7465 7220 6f6e 2e0a 2020 2020 2020 2020  ter on..        
+00008660: 2320 2d2d 2d20 5468 6973 2069 7320 6120  # --- This is a 
+00008670: 6c69 7474 6c65 2075 6e66 6f72 7475 6e61  little unfortuna
+00008680: 7465 2c20 6265 6361 7573 6520 7468 6973  te, because this
+00008690: 206d 6561 6e73 2074 6861 7420 7468 6520   means that the 
+000086a0: 6964 7320 696e 2074 6869 7320 7368 696d  ids in this shim
+000086b0: 0a20 2020 2020 2020 2023 202d 2d2d 2076  .        # --- v
+000086c0: 6572 7369 6f6e 206f 6620 7468 6520 6469  ersion of the di
+000086d0: 6d65 6e73 696f 6e20 7472 616e 7366 6f72  mension transfor
+000086e0: 6d73 2061 7265 2069 6e63 6f6e 7369 7374  ms are inconsist
+000086f0: 656e 742e 2042 7574 2069 7420 6665 656c  ent. But it feel
+00008700: 7320 6561 7369 6572 0a20 2020 2020 2020  s easier.       
+00008710: 2023 202d 2d2d 2074 6861 6e20 666f 7263   # --- than forc
+00008720: 696e 6720 7468 6520 6469 6d65 6e73 696f  ing the dimensio
+00008730: 6e73 2074 6f20 6265 2061 7761 7265 206f  ns to be aware o
+00008740: 6620 6f74 6865 7220 6469 6d65 6e73 696f  f other dimensio
+00008750: 6e73 2e0a 0a20 2020 2020 2020 2072 6574  ns...        ret
+00008760: 7572 6e20 7368 696d 0a0a 2020 2020 6465  urn shim..    de
+00008770: 6620 7472 616e 736c 6174 655f 656c 656d  f translate_elem
+00008780: 656e 745f 6964 2873 656c 662c 205f 6964  ent_id(self, _id
+00008790: 2920 2d3e 204f 7074 696f 6e61 6c5b 7374  ) -> Optional[st
+000087a0: 725d 3a0a 2020 2020 2020 2020 2222 224f  r]:.        """O
+000087b0: 7074 696f 6e61 6c20 7374 7269 6e67 2074  ptional string t
+000087c0: 6861 7420 6973 2074 6865 2074 7261 6e73  hat is the trans
+000087d0: 6c61 7469 6f6e 206f 6620 7661 7269 6f75  lation of variou
+000087e0: 7320 6964 7320 746f 2073 7562 7661 7269  s ids to subvari
+000087f0: 6162 6c65 2061 6c69 6173 0a0a 2020 2020  able alias..    
+00008800: 2020 2020 3029 2049 6620 6469 6d65 6e73      0) If dimens
+00008810: 696f 6e20 6973 206e 6f74 2061 2073 7562  ion is not a sub
+00008820: 7661 7269 6162 6c65 7320 6469 6d65 6e73  variables dimens
+00008830: 696f 6e2c 2072 6574 7572 6e20 7468 6520  ion, return the 
+00008840: 5f69 642e 0a20 2020 2020 2020 2031 2920  _id..        1) 
+00008850: 4966 2069 6420 6d61 7463 6865 7320 616e  If id matches an
+00008860: 2061 6c69 6173 2c20 7468 656e 206a 7573   alias, then jus
+00008870: 7420 7573 6520 6974 2e0a 2020 2020 2020  t use it..      
+00008880: 2020 3229 2049 6620 6964 206d 6174 6368    2) If id match
+00008890: 6573 2061 6e20 656c 656d 656e 7420 6964  es an element id
+000088a0: 2c20 7472 616e 736c 6174 6520 746f 2063  , translate to c
+000088b0: 6f72 7265 7370 6f6e 6469 6e67 2061 6c69  orresponding ali
+000088c0: 6173 2e0a 2020 2020 2020 2020 3329 2049  as..        3) I
+000088d0: 6620 6964 206d 6174 6368 6573 2061 2073  f id matches a s
+000088e0: 7562 7661 7269 6162 6c65 2069 642c 2074  ubvariable id, t
+000088f0: 7261 6e73 6c61 7465 2074 6f20 636f 7272  ranslate to corr
+00008900: 6573 706f 6e64 696e 6720 616c 6961 732e  esponding alias.
+00008910: 0a20 2020 2020 2020 2034 2920 4966 2069  .        4) If i
+00008920: 6420 6361 6e20 6265 2070 6172 7365 6420  d can be parsed 
+00008930: 746f 2069 6e74 2061 6e64 206d 6174 6368  to int and match
+00008940: 6573 2061 6e20 656c 656d 656e 7420 6964  es an element id
+00008950: 2c20 7472 616e 736c 6174 6520 746f 2061  , translate to a
+00008960: 6c69 6173 2e0a 2020 2020 2020 2020 3529  lias..        5)
+00008970: 2049 6620 6964 2069 7320 696e 7420 286f   If id is int (o
+00008980: 7220 6361 6e20 6265 2070 6172 7365 6420  r can be parsed 
+00008990: 746f 2069 6e74 2920 616e 6420 6361 6e20  to int) and can 
+000089a0: 6265 2075 7365 6420 6173 2069 6e64 6578  be used as index
+000089b0: 2028 6567 2069 6e20 7261 6e67 650a 2020   (eg in range.  
+000089c0: 2020 2020 2020 2020 2030 2d23 206f 6620           0-# of 
+000089d0: 656c 656d 656e 7473 292c 2075 7365 205f  elements), use _
+000089e0: 6964 2774 6820 616c 6961 732e 0a20 2020  id'th alias..   
+000089f0: 2020 2020 2036 2920 4966 2061 6c6c 206f       6) If all o
+00008a00: 6620 7468 6573 6520 6661 696c 2c20 7265  f these fail, re
+00008a10: 7475 726e 204e 6f6e 652e 0a20 2020 2020  turn None..     
+00008a20: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+00008a30: 6620 7365 6c66 2e5f 6469 6d65 6e73 696f  f self._dimensio
+00008a40: 6e5f 7479 7065 206e 6f74 2069 6e20 4454  n_type not in DT
+00008a50: 2e41 5252 4159 5f54 5950 4553 3a0a 2020  .ARRAY_TYPES:.  
+00008a60: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00008a70: 205f 6964 0a0a 2020 2020 2020 2020 6966   _id..        if
+00008a80: 205f 6964 2069 6e20 7365 6c66 2e5f 7375   _id in self._su
+00008a90: 6276 6172 5f61 6c69 6173 6573 3a0a 2020  bvar_aliases:.  
+00008aa0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00008ab0: 205f 6964 0a20 2020 2020 2020 2069 6620   _id.        if 
+00008ac0: 5f69 6420 696e 2073 656c 662e 5f72 6177  _id in self._raw
+00008ad0: 5f65 6c65 6d65 6e74 5f69 6473 3a0a 2020  _element_ids:.  
+00008ae0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00008af0: 2073 656c 662e 5f73 7562 7661 725f 616c   self._subvar_al
+00008b00: 6961 7365 735b 7365 6c66 2e5f 7261 775f  iases[self._raw_
+00008b10: 656c 656d 656e 745f 6964 732e 696e 6465  element_ids.inde
+00008b20: 7828 5f69 6429 5d0a 2020 2020 2020 2020  x(_id)].        
+00008b30: 6966 205f 6964 2069 6e20 7365 6c66 2e5f  if _id in self._
+00008b40: 7375 6276 6172 5f69 6473 3a0a 2020 2020  subvar_ids:.    
+00008b50: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00008b60: 656c 662e 5f73 7562 7661 725f 616c 6961  elf._subvar_alia
+00008b70: 7365 735b 7365 6c66 2e5f 7375 6276 6172  ses[self._subvar
+00008b80: 5f69 6473 2e69 6e64 6578 285f 6964 295d  _ids.index(_id)]
+00008b90: 0a0a 2020 2020 2020 2020 7472 793a 0a20  ..        try:. 
+00008ba0: 2020 2020 2020 2020 2020 205f 6964 203d             _id =
+00008bb0: 2069 6e74 285f 6964 290a 2020 2020 2020   int(_id).      
+00008bc0: 2020 2020 2020 2320 2d2d 2d20 4966 2073        # --- If s
+00008bd0: 7563 6365 7373 6675 6c6c 7920 636f 6e76  uccessfully conv
+00008be0: 6572 7465 6420 746f 2069 6e74 2c20 7472  erted to int, tr
+00008bf0: 7920 7261 7720 656c 656d 656e 7420 6964  y raw element id
+00008c00: 7320 6167 6169 6e0a 2020 2020 2020 2020  s again.        
+00008c10: 2020 2020 6966 205f 6964 2069 6e20 7365      if _id in se
+00008c20: 6c66 2e5f 7261 775f 656c 656d 656e 745f  lf._raw_element_
+00008c30: 6964 733a 0a20 2020 2020 2020 2020 2020  ids:.           
+00008c40: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00008c50: 2e5f 7375 6276 6172 5f61 6c69 6173 6573  ._subvar_aliases
+00008c60: 5b73 656c 662e 5f72 6177 5f65 6c65 6d65  [self._raw_eleme
+00008c70: 6e74 5f69 6473 2e69 6e64 6578 285f 6964  nt_ids.index(_id
+00008c80: 295d 0a20 2020 2020 2020 2065 7863 6570  )].        excep
+00008c90: 7420 5661 6c75 6545 7272 6f72 3a0a 2020  t ValueError:.  
+00008ca0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00008cb0: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
+00008cc0: 6620 5f69 6420 3e3d 2030 2061 6e64 205f  f _id >= 0 and _
+00008cd0: 6964 203c 206c 656e 2873 656c 662e 5f73  id < len(self._s
+00008ce0: 7562 7661 725f 616c 6961 7365 7329 3a0a  ubvar_aliases):.
+00008cf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008d00: 726e 2073 656c 662e 5f73 7562 7661 725f  rn self._subvar_
+00008d10: 616c 6961 7365 735b 5f69 645d 0a0a 2020  aliases[_id]..  
+00008d20: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00008d30: 650a 0a20 2020 2040 6c61 7a79 7072 6f70  e..    @lazyprop
+00008d40: 6572 7479 0a20 2020 2064 6566 205f 7261  erty.    def _ra
+00008d50: 775f 656c 656d 656e 745f 6964 7328 7365  w_element_ids(se
+00008d60: 6c66 2920 2d3e 2054 7570 6c65 5b55 6e69  lf) -> Tuple[Uni
+00008d70: 6f6e 5b69 6e74 2c20 7374 725d 2c20 2e2e  on[int, str], ..
+00008d80: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+00008d90: 7570 6c65 206f 6620 696e 7420 6f72 2073  uple of int or s
+00008da0: 7472 696e 6720 656c 656d 656e 7420 6964  tring element id
+00008db0: 732c 2061 7320 7468 6579 2061 7070 6561  s, as they appea
+00008dc0: 7220 696e 2063 7562 6520 7265 7375 6c74  r in cube result
+00008dd0: 0a0a 2020 2020 2020 2020 5468 6573 6520  ..        These 
+00008de0: 6172 6520 2272 6177 2220 6265 6361 7573  are "raw" becaus
+00008df0: 6520 7468 6579 2072 6566 6572 2074 6f20  e they refer to 
+00008e00: 7468 6520 656c 656d 656e 7420 6964 7320  the element ids 
+00008e10: 6265 666f 7265 2074 6865 7927 7665 2062  before they've b
+00008e20: 6565 6e0a 2020 2020 2020 2020 7265 706c  een.        repl
+00008e30: 6163 6564 2077 6974 6820 7468 6520 616c  aced with the al
+00008e40: 6961 7320 666f 7220 7375 6276 6172 6961  ias for subvaria
+00008e50: 626c 6573 2069 6e20 7468 6520 602e 5f73  bles in the `._s
+00008e60: 6869 6d6d 6564 5f64 696d 656e 7369 6f6e  himmed_dimension
+00008e70: 5f64 6963 7460 2e0a 2020 2020 2020 2020  _dict`..        
+00008e80: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00008e90: 726e 2074 7570 6c65 280a 2020 2020 2020  rn tuple(.      
+00008ea0: 2020 2020 2020 656c 656d 656e 745b 2269        element["i
+00008eb0: 6422 5d20 666f 7220 656c 656d 656e 7420  d"] for element 
+00008ec0: 696e 2073 656c 662e 5f64 696d 656e 7369  in self._dimensi
+00008ed0: 6f6e 5f64 6963 745b 2274 7970 6522 5d5b  on_dict["type"][
+00008ee0: 2265 6c65 6d65 6e74 7322 5d0a 2020 2020  "elements"].    
+00008ef0: 2020 2020 290a 0a20 2020 2064 6566 205f      )..    def _
+00008f00: 7265 706c 6163 6564 5f65 6c65 6d65 6e74  replaced_element
+00008f10: 5f74 7261 6e73 666f 726d 7328 7365 6c66  _transforms(self
+00008f20: 2c20 656c 656d 656e 745f 7472 616e 7366  , element_transf
+00008f30: 6f72 6d73 2920 2d3e 2044 6963 743a 0a20  orms) -> Dict:. 
+00008f40: 2020 2020 2020 2022 2222 5265 706c 6163         """Replac
+00008f50: 6520 7468 6520 6469 6374 696f 6e61 7279  e the dictionary
+00008f60: 206b 6579 7320 6f66 2065 6c65 6d65 6e74   keys of element
+00008f70: 2074 7261 6e73 666f 726d 7320 7769 7468   transforms with
+00008f80: 2061 6c69 6173 6573 0a0a 2020 2020 2020   aliases..      
+00008f90: 2020 5468 6520 656c 656d 656e 7420 7472    The element tr
+00008fa0: 616e 7366 6f72 6d73 2069 6465 6e74 6966  ansforms identif
+00008fb0: 7920 7768 6963 6820 656c 656d 656e 7420  y which element 
+00008fc0: 7468 6579 2072 6566 6572 2074 6f20 6279  they refer to by
+00008fd0: 2074 6865 6972 206b 6579 2069 6e0a 2020   their key in.  
+00008fe0: 2020 2020 2020 7468 6520 656c 656d 656e        the elemen
+00008ff0: 745f 7472 616e 7366 6f72 6d73 206f 626a  t_transforms obj
+00009000: 6563 742e 2042 6566 6f72 6520 6974 2069  ect. Before it i
+00009010: 7320 7368 696d 6d65 642c 2074 6869 7320  s shimmed, this 
+00009020: 6361 6e20 6964 656e 7469 6679 2074 6865  can identify the
+00009030: 6d0a 2020 2020 2020 2020 696e 206d 616e  m.        in man
+00009040: 7920 6469 6666 6572 656e 7420 7761 7973  y different ways
+00009050: 2e20 5468 6520 7368 696d 2072 6570 6c61  . The shim repla
+00009060: 6365 7320 7468 6573 6520 7769 7468 2074  ces these with t
+00009070: 6865 2061 6c69 6173 2e0a 2020 2020 2020  he alias..      
+00009080: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
+00009090: 2d2d 2d20 5468 6520 6e61 6d65 206f 6620  --- The name of 
+000090a0: 7468 6520 656c 656d 656e 7420 7472 616e  the element tran
+000090b0: 7366 6f72 6d20 6f62 6a65 6374 2069 7320  sform object is 
+000090c0: 6120 7374 7269 6e67 2e20 5468 6973 2073  a string. This s
+000090d0: 7472 696e 6720 6973 0a20 2020 2020 2020  tring is.       
+000090e0: 2023 202d 2d2d 2061 7373 756d 6564 2074   # --- assumed t
+000090f0: 6f20 7265 6665 7220 746f 2074 6865 2073  o refer to the s
+00009100: 7562 7661 7269 6162 6c65 2069 642c 2075  ubvariable id, u
+00009110: 6e6c 6573 7320 7468 6572 6520 6973 2061  nless there is a
+00009120: 2022 6b65 7922 2c20 7768 6963 680a 2020   "key", which.  
+00009130: 2020 2020 2020 2320 2d2d 2d20 6361 6e20        # --- can 
+00009140: 6265 2022 616c 6961 7322 2c20 696e 2077  be "alias", in w
+00009150: 6869 6368 2063 6173 6520 6974 2072 6566  hich case it ref
+00009160: 6572 7320 746f 2074 6865 2061 6c69 6173  ers to the alias
+00009170: 2c20 6f72 2069 6620 6e6f 0a20 2020 2020  , or if no.     
+00009180: 2020 2023 202d 2d2d 2073 7562 7661 7269     # --- subvari
+00009190: 6162 6c65 2069 7320 666f 756e 6420 7769  able is found wi
+000091a0: 7468 2074 6865 2069 642c 2069 6e20 7768  th the id, in wh
+000091b0: 6963 6820 6361 7365 2069 7427 7320 6173  ich case it's as
+000091c0: 7375 6d65 6420 746f 2062 6520 7468 650a  sumed to be the.
+000091d0: 2020 2020 2020 2020 2320 2d2d 2d20 656c          # --- el
+000091e0: 656d 656e 745f 6964 0a20 2020 2020 2020  ement_id.       
+000091f0: 2023 202d 2d2d 2054 4f44 4f3a 2054 6869   # --- TODO: Thi
+00009200: 7320 6c6f 6769 6320 6162 6f75 7420 226b  s logic about "k
+00009210: 6579 2220 6973 206e 6f74 2073 7570 706f  ey" is not suppo
+00009220: 7274 6564 2062 7920 7468 6520 7661 6c69  rted by the vali
+00009230: 6461 7469 6f6e 0a20 2020 2020 2020 2023  dation.        #
+00009240: 202d 2d2d 206f 6e20 7468 6520 6465 636b   --- on the deck
+00009250: 2073 6368 656d 612c 2073 6f20 6d61 7962   schema, so mayb
+00009260: 6520 7765 2073 686f 756c 6420 7265 6d6f  e we should remo
+00009270: 7665 2069 743f 0a20 2020 2020 2020 206b  ve it?.        k
+00009280: 6579 203d 2065 6c65 6d65 6e74 5f74 7261  ey = element_tra
+00009290: 6e73 666f 726d 732e 6765 7428 226b 6579  nsforms.get("key
+000092a0: 2229 0a20 2020 2020 2020 2069 6620 6b65  ").        if ke
+000092b0: 7920 3d3d 2022 616c 6961 7322 3a0a 2020  y == "alias":.  
+000092c0: 2020 2020 2020 2020 2020 2320 2d2d 2d20            # --- 
+000092d0: 416c 7265 6164 7920 6b65 7965 6420 6279  Already keyed by
+000092e0: 2061 6c69 6173 2c20 6e6f 2063 6861 6e67   alias, no chang
+000092f0: 6573 206e 6565 6465 640a 2020 2020 2020  es needed.      
+00009300: 2020 2020 2020 7265 7475 726e 2065 6c65        return ele
+00009310: 6d65 6e74 5f74 7261 6e73 666f 726d 730a  ment_transforms.
+00009320: 0a20 2020 2020 2020 206f 6c64 5f6b 6579  .        old_key
+00009330: 7320 3d20 7475 706c 6528 656c 656d 656e  s = tuple(elemen
+00009340: 745f 7472 616e 7366 6f72 6d73 2e6b 6579  t_transforms.key
+00009350: 7328 2929 0a0a 2020 2020 2020 2020 6966  s())..        if
+00009360: 206b 6579 203d 3d20 2273 7562 7661 725f   key == "subvar_
+00009370: 6964 223a 0a20 2020 2020 2020 2020 2020  id":.           
+00009380: 2023 202d 2d2d 2074 7261 6e73 6c61 7465   # --- translate
+00009390: 2066 726f 6d20 7375 6276 6172 6961 626c   from subvariabl
+000093a0: 6520 6964 0a20 2020 2020 2020 2020 2020  e id.           
+000093b0: 206e 6577 5f6b 6579 7320 3d20 7475 706c   new_keys = tupl
+000093c0: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
+000093d0: 2020 2073 656c 662e 5f73 7562 7661 725f     self._subvar_
+000093e0: 616c 6961 7365 735b 7365 6c66 2e5f 7375  aliases[self._su
+000093f0: 6276 6172 5f69 6473 2e69 6e64 6578 285f  bvar_ids.index(_
+00009400: 6964 295d 0a20 2020 2020 2020 2020 2020  id)].           
+00009410: 2020 2020 2069 6620 5f69 6420 696e 2073       if _id in s
+00009420: 656c 662e 5f73 7562 7661 725f 6964 730a  elf._subvar_ids.
+00009430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009440: 656c 7365 204e 6f6e 650a 2020 2020 2020  else None.      
+00009450: 2020 2020 2020 2020 2020 666f 7220 5f69            for _i
+00009460: 6420 696e 206f 6c64 5f6b 6579 730a 2020  d in old_keys.  
+00009470: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00009480: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00009490: 2020 2020 2020 2320 2d2d 2d20 4f74 6865        # --- Othe
+000094a0: 7277 6973 6520 7573 6520 7573 7561 6c20  rwise use usual 
+000094b0: 7472 616e 736c 6174 696f 6e20 6c6f 6769  translation logi
+000094c0: 630a 2020 2020 2020 2020 2020 2020 6e65  c.            ne
+000094d0: 775f 6b65 7973 203d 2074 7570 6c65 2873  w_keys = tuple(s
+000094e0: 656c 662e 7472 616e 736c 6174 655f 656c  elf.translate_el
+000094f0: 656d 656e 745f 6964 285f 6964 2920 666f  ement_id(_id) fo
+00009500: 7220 5f69 6420 696e 206f 6c64 5f6b 6579  r _id in old_key
+00009510: 7329 0a0a 2020 2020 2020 2020 7265 7475  s)..        retu
+00009520: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
+00009530: 206e 6b65 793a 2065 6c65 6d65 6e74 5f74   nkey: element_t
+00009540: 7261 6e73 666f 726d 735b 6f6c 645f 6b65  ransforms[old_ke
+00009550: 7973 5b69 5d5d 0a20 2020 2020 2020 2020  ys[i]].         
+00009560: 2020 2066 6f72 2069 2c20 6e6b 6579 2069     for i, nkey i
+00009570: 6e20 656e 756d 6572 6174 6528 6e65 775f  n enumerate(new_
+00009580: 6b65 7973 290a 2020 2020 2020 2020 2020  keys).          
+00009590: 2020 6966 206e 6b65 7920 6973 206e 6f74    if nkey is not
+000095a0: 204e 6f6e 650a 2020 2020 2020 2020 7d0a   None.        }.
+000095b0: 0a20 2020 2064 6566 205f 7265 706c 6163  .    def _replac
+000095c0: 6564 5f6f 7264 6572 5f65 6c65 6d65 6e74  ed_order_element
+000095d0: 5f69 6473 2873 656c 662c 2065 6c65 6d65  _ids(self, eleme
+000095e0: 6e74 5f69 6473 2920 2d3e 204c 6973 745b  nt_ids) -> List[
+000095f0: 4f70 7469 6f6e 616c 5b73 7472 5d5d 3a0a  Optional[str]]:.
+00009600: 2020 2020 2020 2020 2222 2252 6570 6c61          """Repla
+00009610: 6365 2074 6865 206c 6973 7420 6f66 2065  ce the list of e
+00009620: 6c65 6d65 6e74 2069 6473 2077 6974 6820  lement ids with 
+00009630: 6120 6c69 7374 206f 6620 616c 6961 7365  a list of aliase
+00009640: 730a 0a20 2020 2020 2020 2054 6865 2065  s..        The e
+00009650: 7870 6c69 6369 7420 6f72 6465 7220 7472  xplicit order tr
+00009660: 616e 7366 6f72 6d20 696e 636c 7564 6573  ansform includes
+00009670: 2061 206c 6973 7420 6f66 2069 6473 2074   a list of ids t
+00009680: 6861 7420 6361 6e20 6265 2073 7065 6369  hat can be speci
+00009690: 6669 6564 2069 6e0a 2020 2020 2020 2020  fied in.        
+000096a0: 6d61 6e79 2064 6966 6665 7265 6e74 2077  many different w
+000096b0: 6179 732c 2074 6869 7320 7472 616e 736c  ays, this transl
+000096c0: 6174 6520 7468 656d 2074 6f20 7468 6520  ate them to the 
+000096d0: 7375 6276 6172 6961 626c 6520 616c 6961  subvariable alia
+000096e0: 7365 732e 0a20 2020 2020 2020 2022 2222  ses..        """
+000096f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009700: 5b73 656c 662e 7472 616e 736c 6174 655f  [self.translate_
+00009710: 656c 656d 656e 745f 6964 285f 6964 2920  element_id(_id) 
+00009720: 666f 7220 5f69 6420 696e 2065 6c65 6d65  for _id in eleme
+00009730: 6e74 5f69 6473 5d0a 0a20 2020 2040 6c61  nt_ids]..    @la
+00009740: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00009750: 6566 205f 7375 6276 6172 5f61 6c69 6173  ef _subvar_alias
+00009760: 6573 2873 656c 6629 202d 3e20 5475 706c  es(self) -> Tupl
+00009770: 655b 7374 722c 202e 2e2e 5d3a 0a20 2020  e[str, ...]:.   
+00009780: 2020 2020 2022 2222 7475 706c 6520 6f66       """tuple of
+00009790: 2073 7472 2061 6c69 6173 2066 6f72 2065   str alias for e
+000097a0: 6163 6820 656c 656d 656e 7420 6f66 2061  ach element of a
+000097b0: 2073 7562 7661 7269 6162 6c65 2064 696d   subvariable dim
+000097c0: 656e 7369 6f6e 0a0a 2020 2020 2020 2020  ension..        
+000097d0: 4661 6c6c 2062 6163 6b20 746f 2074 6865  Fall back to the
+000097e0: 2060 656c 656d 656e 745f 6964 6020 6966   `element_id` if
+000097f0: 2074 6865 2061 6c69 6173 2064 6f65 736e   the alias doesn
+00009800: 2774 2065 7869 7374 2028 7468 6973 2068  't exist (this h
+00009810: 6170 7065 6e73 2069 6e20 6f6e 650a 2020  appens in one.  
+00009820: 2020 2020 2020 6669 7874 7572 652c 2062        fixture, b
+00009830: 7574 2049 2064 6f6e 2774 2074 6869 6e6b  ut I don't think
+00009840: 2069 7420 6361 6e20 6861 7070 656e 2069   it can happen i
+00009850: 6e20 7072 6f64 7563 7469 6f6e 2061 6e79  n production any
+00009860: 6d6f 7265 2e29 0a20 2020 2020 2020 2022  more.).        "
+00009870: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00009880: 6e20 7475 706c 6528 0a20 2020 2020 2020  n tuple(.       
+00009890: 2020 2020 2065 6c65 6d65 6e74 2e67 6574       element.get
+000098a0: 2822 7661 6c75 6522 2c20 7b7d 292e 6765  ("value", {}).ge
+000098b0: 7428 2272 6566 6572 656e 6365 7322 2c20  t("references", 
+000098c0: 7b7d 292e 6765 7428 2261 6c69 6173 222c  {}).get("alias",
+000098d0: 2065 6c65 6d65 6e74 5b22 6964 225d 290a   element["id"]).
+000098e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000098f0: 656c 656d 656e 7420 696e 2073 656c 662e  element in self.
+00009900: 5f64 696d 656e 7369 6f6e 5f64 6963 745b  _dimension_dict[
+00009910: 2274 7970 6522 5d5b 2265 6c65 6d65 6e74  "type"]["element
+00009920: 7322 5d0a 2020 2020 2020 2020 290a 0a20  s"].        ).. 
+00009930: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+00009940: 0a20 2020 2064 6566 205f 7375 6276 6172  .    def _subvar
+00009950: 5f69 6473 2873 656c 6629 202d 3e20 5475  _ids(self) -> Tu
+00009960: 706c 655b 556e 696f 6e5b 696e 742c 2073  ple[Union[int, s
+00009970: 7472 5d2c 202e 2e2e 5d3a 0a20 2020 2020  tr], ...]:.     
+00009980: 2020 2022 2222 7475 706c 6520 6f66 2073     """tuple of s
+00009990: 7472 2073 7562 7661 7269 6162 6c65 2069  tr subvariable i
+000099a0: 6420 666f 7220 6561 6368 2065 6c65 6d65  d for each eleme
+000099b0: 6e74 206f 6620 6120 7375 6276 6172 6961  nt of a subvaria
+000099c0: 626c 6520 6469 6d65 6e73 696f 6e0a 0a20  ble dimension.. 
+000099d0: 2020 2020 2020 204f 6e6c 7920 6170 706c         Only appl
+000099e0: 6963 6162 6c65 2074 6f20 7375 6276 6172  icable to subvar
+000099f0: 6961 626c 6573 2064 696d 656e 7369 6f6e  iables dimension
+00009a00: 2028 7769 6c6c 2072 6169 7365 204b 6579   (will raise Key
+00009a10: 4572 726f 7220 6966 206e 6f74 292e 0a20  Error if not).. 
+00009a20: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00009a30: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
+00009a40: 0a20 2020 2020 2020 2020 2020 2065 6c65  .            ele
+00009a50: 6d65 6e74 5b22 7661 6c75 6522 5d5b 2269  ment["value"]["i
+00009a60: 6422 5d0a 2020 2020 2020 2020 2020 2020  d"].            
+00009a70: 666f 7220 656c 656d 656e 7420 696e 2073  for element in s
+00009a80: 656c 662e 5f64 696d 656e 7369 6f6e 5f64  elf._dimension_d
+00009a90: 6963 745b 2274 7970 6522 5d5b 2265 6c65  ict["type"]["ele
+00009aa0: 6d65 6e74 7322 5d0a 2020 2020 2020 2020  ments"].        
+00009ab0: 290a 0a0a 636c 6173 7320 5f45 6c65 6d65  )...class _Eleme
+00009ac0: 6e74 3a0a 2020 2020 2222 2241 2063 6174  nt:.    """A cat
+00009ad0: 6567 6f72 7920 6f72 2073 7562 7661 7269  egory or subvari
+00009ae0: 6162 6c65 206f 6620 6120 6469 6d65 6e73  able of a dimens
+00009af0: 696f 6e2e 0a0a 2020 2020 5468 6973 206f  ion...    This o
+00009b00: 626a 6563 7420 7265 736f 6c76 6573 2074  bject resolves t
+00009b10: 6865 2074 7261 6e73 666f 726d 2063 6173  he transform cas
+00009b20: 6361 6465 2066 6f72 2065 6c65 6d65 6e74  cade for element
+00009b30: 2d6c 6576 656c 2074 7261 6e73 666f 726d  -level transform
+00009b40: 732e 0a20 2020 2022 2222 0a0a 2020 2020  s..    """..    
+00009b50: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00009b60: 662c 2065 6c65 6d65 6e74 5f64 6963 742c  f, element_dict,
+00009b70: 2069 6e64 6578 2c20 656c 656d 656e 745f   index, element_
+00009b80: 7472 616e 7366 6f72 6d73 293a 0a20 2020  transforms):.   
+00009b90: 2020 2020 2073 656c 662e 5f65 6c65 6d65       self._eleme
+00009ba0: 6e74 5f64 6963 7420 3d20 656c 656d 656e  nt_dict = elemen
+00009bb0: 745f 6469 6374 0a20 2020 2020 2020 2073  t_dict.        s
+00009bc0: 656c 662e 5f69 6e64 6578 203d 2069 6e64  elf._index = ind
+00009bd0: 6578 0a20 2020 2020 2020 2073 656c 662e  ex.        self.
+00009be0: 5f65 6c65 6d65 6e74 5f74 7261 6e73 666f  _element_transfo
+00009bf0: 726d 7320 3d20 656c 656d 656e 745f 7472  rms = element_tr
+00009c00: 616e 7366 6f72 6d73 0a0a 2020 2020 406c  ansforms..    @l
+00009c10: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00009c20: 6465 6620 616c 6961 7328 7365 6c66 2920  def alias(self) 
+00009c30: 2d3e 2073 7472 3a0a 2020 2020 2020 2020  -> str:.        
+00009c40: 2222 2273 7472 2064 6973 706c 6179 2d61  """str display-a
+00009c50: 6c69 6173 2066 6f72 2074 6869 7320 656c  lias for this el
+00009c60: 656d 656e 742e 2222 220a 2020 2020 2020  ement.""".      
+00009c70: 2020 7265 7475 726e 2073 656c 662e 5f73    return self._s
+00009c80: 7472 5f72 6570 7265 7365 6e74 6174 696f  tr_representatio
+00009c90: 6e5f 666f 7228 2261 6c69 6173 2229 0a0a  n_for("alias")..
+00009ca0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+00009cb0: 790a 2020 2020 6465 6620 616e 6368 6f72  y.    def anchor
+00009cc0: 2873 656c 6629 202d 3e20 4f70 7469 6f6e  (self) -> Option
+00009cd0: 616c 5b55 6e69 6f6e 5b73 7472 2c20 6469  al[Union[str, di
+00009ce0: 6374 5d5d 3a0a 2020 2020 2020 2020 2222  ct]]:.        ""
+00009cf0: 224f 7074 696f 6e61 6c20 7374 7220 6f72  "Optional str or
+00009d00: 2064 6963 7420 6465 6669 6e69 6e67 2074   dict defining t
+00009d10: 6865 2061 6e63 686f 7220 666f 7220 6465  he anchor for de
+00009d20: 7269 7665 6420 656c 656d 656e 7473 2222  rived elements""
+00009d30: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+00009d40: 2073 656c 662e 6465 7269 7665 643a 0a20   self.derived:. 
+00009d50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00009d60: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
+00009d70: 7265 7475 726e 2073 656c 662e 5f65 6c65  return self._ele
+00009d80: 6d65 6e74 5f64 6963 742e 6765 7428 2276  ment_dict.get("v
+00009d90: 616c 7565 222c 207b 7d29 2e67 6574 2822  alue", {}).get("
+00009da0: 7265 6665 7265 6e63 6573 222c 207b 7d29  references", {})
+00009db0: 2e67 6574 2822 616e 6368 6f72 2229 0a0a  .get("anchor")..
+00009dc0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+00009dd0: 790a 2020 2020 6465 6620 656c 656d 656e  y.    def elemen
+00009de0: 745f 6964 2873 656c 6629 202d 3e20 696e  t_id(self) -> in
+00009df0: 743a 0a20 2020 2020 2020 2022 2222 696e  t:.        """in
+00009e00: 7420 6964 656e 7469 6669 6572 2066 6f72  t identifier for
+00009e10: 2074 6869 7320 6361 7465 676f 7279 206f   this category o
+00009e20: 7220 7375 6276 6172 6961 626c 652e 2222  r subvariable.""
+00009e30: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00009e40: 2073 656c 662e 5f65 6c65 6d65 6e74 5f64   self._element_d
+00009e50: 6963 745b 2269 6422 5d0a 0a20 2020 2040  ict["id"]..    @
+00009e60: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00009e70: 2064 6566 2064 6572 6976 6564 2873 656c   def derived(sel
+00009e80: 6629 202d 3e20 626f 6f6c 3a0a 2020 2020  f) -> bool:.    
+00009e90: 2020 2020 2222 2254 7275 6520 6966 2065      """True if e
+00009ea0: 6c65 6d65 6e74 2069 7320 6465 7269 7665  lement is derive
+00009eb0: 642c 2046 616c 7365 206f 7468 6572 7769  d, False otherwi
+00009ec0: 7365 2e0a 0a20 2020 2020 2020 204d 756c  se...        Mul
+00009ed0: 7469 706c 6520 5265 7370 6f6e 7365 2073  tiple Response s
+00009ee0: 7562 7661 7269 6162 6c65 2069 6e73 6572  ubvariable inser
+00009ef0: 7469 6f6e 7320 6172 6520 636f 6e73 6964  tions are consid
+00009f00: 6572 6564 2064 6572 6976 6564 2065 6c65  ered derived ele
+00009f10: 6d65 6e74 732e 0a20 2020 2020 2020 2022  ments..        "
+00009f20: 2222 0a20 2020 2020 2020 2076 616c 7565  "".        value
+00009f30: 203d 2073 656c 662e 5f65 6c65 6d65 6e74   = self._element
+00009f40: 5f64 6963 742e 6765 7428 2276 616c 7565  _dict.get("value
+00009f50: 2229 0a20 2020 2020 2020 2069 6620 6e6f  ").        if no
+00009f60: 7420 7661 6c75 6520 6f72 206e 6f74 2069  t value or not i
+00009f70: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+00009f80: 2064 6963 7429 3a0a 2020 2020 2020 2020   dict):.        
+00009f90: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00009fa0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009fb0: 7661 6c75 652e 6765 7428 2264 6572 6976  value.get("deriv
+00009fc0: 6564 222c 2046 616c 7365 290a 0a20 2020  ed", False)..   
+00009fd0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00009fe0: 2020 2064 6566 2066 696c 6c28 7365 6c66     def fill(self
+00009ff0: 2920 2d3e 2073 7472 3a0a 2020 2020 2020  ) -> str:.      
+0000a000: 2020 2222 2273 7472 2052 4742 2063 6f6c    """str RGB col
+0000a010: 6f72 206c 696b 6520 2223 6166 3033 3264  or like "#af032d
+0000a020: 2220 6f72 204e 6f6e 6520 6966 206e 6f74  " or None if not
+0000a030: 2073 7065 6369 6669 6564 2e0a 0a20 2020   specified...   
+0000a040: 2020 2020 2041 2076 616c 7565 206f 6620       A value of 
+0000a050: 4e6f 6e65 2069 6e64 6963 6174 6573 2074  None indicates t
+0000a060: 6865 2064 6566 6175 6c74 2066 696c 6c20  he default fill 
+0000a070: 7368 6f75 6c64 2062 6520 7573 6564 2066  should be used f
+0000a080: 6f72 2074 6869 7320 656c 656d 656e 742e  or this element.
+0000a090: 0a20 2020 2020 2020 2041 2073 7472 2076  .        A str v
+0000a0a0: 616c 7565 206d 7573 7420 6265 2061 2068  alue must be a h
+0000a0b0: 6173 6820 6368 6172 6163 7465 7220 2822  ash character ("
+0000a0c0: 2322 2920 666f 6c6c 6f77 6564 2062 7920  #") followed by 
+0000a0d0: 7369 7820 6865 7861 6465 6369 6d61 6c20  six hexadecimal 
+0000a0e0: 6469 6769 7473 2e0a 2020 2020 2020 2020  digits..        
+0000a0f0: 5468 7265 652d 6368 6172 6163 7465 7220  Three-character 
+0000a100: 636f 6c6f 7220 636f 6e74 7261 6374 696f  color contractio
+0000a110: 6e73 2028 6c69 6b65 2022 2344 3037 2229  ns (like "#D07")
+0000a120: 2061 7265 206e 6f74 2076 616c 6964 2e0a   are not valid..
+0000a130: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000a140: 2020 2020 2320 2d2d 2d66 6972 7374 2061      # ---first a
+0000a150: 7574 686f 7269 7479 2069 7320 6669 6c6c  uthority is fill
+0000a160: 2074 7261 6e73 666f 726d 2069 6e20 656c   transform in el
+0000a170: 656d 656e 7420 7472 616e 7366 6f72 6d73  ement transforms
+0000a180: 2e20 5468 6520 6261 7365 2076 616c 7565  . The base value
+0000a190: 2069 730a 2020 2020 2020 2020 2320 2d2d   is.        # --
+0000a1a0: 2d74 6865 206f 6e6c 7920 7072 696f 7220  -the only prior 
+0000a1b0: 6175 7468 6f72 6974 7920 616e 6420 7468  authority and th
+0000a1c0: 6174 2069 7320 4e6f 6e65 2028 7573 6520  at is None (use 
+0000a1d0: 6465 6661 756c 7420 6669 6c6c 2063 6f6c  default fill col
+0000a1e0: 6f72 292e 0a20 2020 2020 2020 2072 6574  or)..        ret
+0000a1f0: 7572 6e20 7365 6c66 2e5f 656c 656d 656e  urn self._elemen
+0000a200: 745f 7472 616e 7366 6f72 6d73 2e66 696c  t_transforms.fil
+0000a210: 6c0a 0a20 2020 2040 6c61 7a79 7072 6f70  l..    @lazyprop
+0000a220: 6572 7479 0a20 2020 2064 6566 2069 6e64  erty.    def ind
+0000a230: 6578 2873 656c 6629 202d 3e20 696e 743a  ex(self) -> int:
+0000a240: 0a20 2020 2020 2020 2022 2222 696e 7420  .        """int 
+0000a250: 6f66 6673 6574 2061 7420 7768 6963 6820  offset at which 
+0000a260: 7468 6973 2065 6c65 6d65 6e74 2061 7070  this element app
+0000a270: 6561 7273 2069 6e20 6469 6d65 6e73 696f  ears in dimensio
+0000a280: 6e2e 0a0a 2020 2020 2020 2020 5468 6973  n...        This
+0000a290: 2070 6f73 6974 696f 6e20 6973 2062 6173   position is bas
+0000a2a0: 6564 2075 706f 6e20 7468 6520 646f 6375  ed upon the docu
+0000a2b0: 6d65 6e74 2070 6f73 6974 696f 6e20 6f66  ment position of
+0000a2c0: 2074 6869 7320 656c 656d 656e 7420 696e   this element in
+0000a2d0: 0a20 2020 2020 2020 2074 6865 2063 7562  .        the cub
+0000a2e0: 6520 7265 7370 6f6e 7365 2e20 4e6f 2061  e response. No a
+0000a2f0: 646a 7573 746d 656e 7420 666f 7220 6d69  djustment for mi
+0000a300: 7373 696e 6720 656c 656d 656e 7473 2069  ssing elements i
+0000a310: 7320 6d61 6465 2e0a 2020 2020 2020 2020  s made..        
+0000a320: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0000a330: 726e 2073 656c 662e 5f69 6e64 6578 0a0a  rn self._index..
+0000a340: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+0000a350: 790a 2020 2020 6465 6620 6973 5f68 6964  y.    def is_hid
+0000a360: 6465 6e28 7365 6c66 2920 2d3e 2062 6f6f  den(self) -> boo
+0000a370: 6c3a 0a20 2020 2020 2020 2022 2222 5472  l:.        """Tr
+0000a380: 7565 2069 6620 7468 6973 2065 6c65 6d65  ue if this eleme
+0000a390: 6e74 2069 7320 6578 706c 6963 6974 6c79  nt is explicitly
+0000a3a0: 2068 6964 6465 6e20 696e 2074 6869 7320   hidden in this 
+0000a3b0: 616e 616c 7973 6973 2e22 2222 0a20 2020  analysis.""".   
+0000a3c0: 2020 2020 2023 202d 2d2d 6669 7273 7420       # ---first 
+0000a3d0: 6175 7468 6f72 6974 7920 6973 2068 6964  authority is hid
+0000a3e0: 6520 7472 616e 7366 6f72 6d20 696e 2065  e transform in e
+0000a3f0: 6c65 6d65 6e74 2074 7261 6e73 666f 726d  lement transform
+0000a400: 732d 2d2d 0a20 2020 2020 2020 2023 202d  s---.        # -
+0000a410: 2d2d 6465 6661 756c 7420 6973 206e 6f74  --default is not
+0000a420: 2068 6964 6465 6e2c 2074 6865 7265 2069   hidden, there i
+0000a430: 7320 6375 7272 656e 746c 7920 6e6f 2070  s currently no p
+0000a440: 7269 6f72 2d6c 6576 656c 2068 6964 6520  rior-level hide 
+0000a450: 7472 616e 7366 6f72 6d2d 2d2d 0a20 2020  transform---.   
+0000a460: 2020 2020 2072 6574 7572 6e20 7b54 7275       return {Tru
+0000a470: 653a 2054 7275 652c 2046 616c 7365 3a20  e: True, False: 
+0000a480: 4661 6c73 652c 204e 6f6e 653a 2046 616c  False, None: Fal
+0000a490: 7365 7d5b 7365 6c66 2e5f 656c 656d 656e  se}[self._elemen
+0000a4a0: 745f 7472 616e 7366 6f72 6d73 2e68 6964  t_transforms.hid
+0000a4b0: 655d 0a0a 2020 2020 406c 617a 7970 726f  e]..    @lazypro
+0000a4c0: 7065 7274 790a 2020 2020 6465 6620 6c61  perty.    def la
+0000a4d0: 6265 6c28 7365 6c66 2920 2d3e 2073 7472  bel(self) -> str
+0000a4e0: 3a0a 2020 2020 2020 2020 2222 2273 7472  :.        """str
+0000a4f0: 2064 6973 706c 6179 2d6e 616d 6520 666f   display-name fo
+0000a500: 7220 7468 6973 2065 6c65 6d65 6e74 2e0a  r this element..
+0000a510: 0a20 2020 2020 2020 2054 6869 7320 7661  .        This va
+0000a520: 6c75 6520 6973 2074 6865 2065 6d70 7479  lue is the empty
+0000a530: 2073 7472 696e 6720 7768 656e 206e 6f20   string when no 
+0000a540: 7661 6c75 6520 6861 7320 6265 656e 2073  value has been s
+0000a550: 7065 6369 6669 6564 206f 7220 6469 7370  pecified or disp
+0000a560: 6c61 7920 6f66 0a20 2020 2020 2020 2074  lay of.        t
+0000a570: 6865 206e 616d 6520 6861 7320 6265 656e  he name has been
+0000a580: 2073 7570 7072 6573 7365 642e 0a20 2020   suppressed..   
+0000a590: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000a5a0: 2072 6574 7572 6e20 7365 6c66 2e5f 7374   return self._st
+0000a5b0: 725f 7265 7072 6573 656e 7461 7469 6f6e  r_representation
+0000a5c0: 5f66 6f72 2822 6e61 6d65 2229 0a0a 2020  _for("name")..  
+0000a5d0: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000a5e0: 2020 2020 6465 6620 6d69 7373 696e 6728      def missing(
+0000a5f0: 7365 6c66 2920 2d3e 2062 6f6f 6c3a 0a20  self) -> bool:. 
+0000a600: 2020 2020 2020 2022 2222 5472 7565 2069         """True i
+0000a610: 6620 7468 6973 2065 6c65 6d65 6e74 2072  f this element r
+0000a620: 6570 7265 7365 6e74 7320 6d69 7373 696e  epresents missin
+0000a630: 6720 6461 7461 2e0a 0a20 2020 2020 2020  g data...       
+0000a640: 2046 616c 7365 2069 6620 7468 6973 2063   False if this c
+0000a650: 6174 6567 6f72 7920 6f72 2073 7562 7661  ategory or subva
+0000a660: 7269 6162 6c65 2072 6570 7265 7365 6e74  riable represent
+0000a670: 7320 7661 6c69 6420 2863 6f6c 6c65 6374  s valid (collect
+0000a680: 6564 290a 2020 2020 2020 2020 6461 7461  ed).        data
+0000a690: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000a6a0: 2020 2020 2020 7265 7475 726e 2062 6f6f        return boo
+0000a6b0: 6c28 7365 6c66 2e5f 656c 656d 656e 745f  l(self._element_
+0000a6c0: 6469 6374 2e67 6574 2822 6d69 7373 696e  dict.get("missin
+0000a6d0: 6722 2929 0a0a 2020 2020 406c 617a 7970  g"))..    @lazyp
+0000a6e0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000a6f0: 6e75 6d65 7269 635f 7661 6c75 6528 7365  numeric_value(se
+0000a700: 6c66 2920 2d3e 2055 6e69 6f6e 5b69 6e74  lf) -> Union[int
+0000a710: 2c20 666c 6f61 745d 3a0a 2020 2020 2020  , float]:.      
+0000a720: 2020 2222 224e 756d 6572 6963 2076 616c    """Numeric val
+0000a730: 7565 2061 7373 6967 6e65 6420 746f 2065  ue assigned to e
+0000a740: 6c65 6d65 6e74 2062 7920 7573 6572 2c20  lement by user, 
+0000a750: 6e70 2e6e 616e 2069 6620 6162 7365 6e74  np.nan if absent
+0000a760: 2e22 2222 0a20 2020 2020 2020 206e 756d  .""".        num
+0000a770: 6572 6963 5f76 616c 7565 203d 2073 656c  eric_value = sel
+0000a780: 662e 5f65 6c65 6d65 6e74 5f64 6963 742e  f._element_dict.
+0000a790: 6765 7428 226e 756d 6572 6963 5f76 616c  get("numeric_val
+0000a7a0: 7565 2229 0a20 2020 2020 2020 2072 6574  ue").        ret
+0000a7b0: 7572 6e20 6e70 2e6e 616e 2069 6620 6e75  urn np.nan if nu
+0000a7c0: 6d65 7269 635f 7661 6c75 6520 6973 204e  meric_value is N
+0000a7d0: 6f6e 6520 656c 7365 206e 756d 6572 6963  one else numeric
+0000a7e0: 5f76 616c 7565 0a0a 2020 2020 6465 6620  _value..    def 
+0000a7f0: 5f73 7472 5f72 6570 7265 7365 6e74 6174  _str_representat
+0000a800: 696f 6e5f 666f 7228 7365 6c66 2c20 6b65  ion_for(self, ke
+0000a810: 793a 2073 7472 2920 2d3e 2073 7472 3a0a  y: str) -> str:.
+0000a820: 2020 2020 2020 2020 2222 2272 6574 7572          """retur
+0000a830: 6e20 7374 7220 7265 7072 6573 656e 7461  n str representa
+0000a840: 7469 6f6e 2066 6f72 2074 6869 7320 656c  tion for this el
+0000a850: 656d 656e 7420 6f66 2061 2067 6976 656e  ement of a given
+0000a860: 206b 6579 2028 6061 6c69 6173 6020 6f72   key (`alias` or
+0000a870: 2060 6e61 6d65 6029 0a0a 2020 2020 2020   `name`)..      
+0000a880: 2020 5468 6973 206d 6574 686f 6420 6861    This method ha
+0000a890: 6e64 6c65 7320 656c 656d 656e 7473 2066  ndles elements f
+0000a8a0: 6f72 2076 6172 6961 626c 6573 206f 6620  or variables of 
+0000a8b0: 616c 6c20 7479 7065 732c 2069 6e63 6c75  all types, inclu
+0000a8c0: 6469 6e67 0a20 2020 2020 2020 2063 6174  ding.        cat
+0000a8d0: 6567 6f72 6963 616c 2c20 6172 7261 7920  egorical, array 
+0000a8e0: 2873 7562 7661 7269 6162 6c65 292c 206e  (subvariable), n
+0000a8f0: 756d 6572 6963 2c20 6461 7465 7469 6d65  umeric, datetime
+0000a900: 2061 6e64 2074 6578 742e 0a20 2020 2020   and text..     
+0000a910: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
+0000a920: 202d 2d2d 6669 7273 7420 6175 7468 6f72   ---first author
+0000a930: 6974 7920 6973 2074 7261 6e73 666f 726d  ity is transform
+0000a940: 2069 6e20 656c 656d 656e 7420 7472 616e   in element tran
+0000a950: 7366 6f72 6d73 2d2d 2d0a 2020 2020 2020  sforms---.      
+0000a960: 2020 7661 6c75 6520 3d20 6765 7461 7474    value = getatt
+0000a970: 7228 7365 6c66 2e5f 656c 656d 656e 745f  r(self._element_
+0000a980: 7472 616e 7366 6f72 6d73 2c20 6b65 7929  transforms, key)
+0000a990: 2069 6620 6b65 7920 3d3d 2022 6e61 6d65   if key == "name
+0000a9a0: 2220 656c 7365 204e 6f6e 650a 2020 2020  " else None.    
+0000a9b0: 2020 2020 6966 2076 616c 7565 2069 7320      if value is 
+0000a9c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000a9d0: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+0000a9e0: 7565 2069 6620 7661 6c75 6520 656c 7365  ue if value else
+0000a9f0: 2022 220a 0a20 2020 2020 2020 2023 202d   ""..        # -
+0000aa00: 2d2d 6f74 6865 7277 6973 6520 6261 7365  --otherwise base
+0000aa10: 2d6e 616d 652f 616c 6961 7320 6672 6f6d  -name/alias from
+0000aa20: 2065 6c65 6d65 6e74 2d64 6963 7420 6973   element-dict is
+0000aa30: 2075 7365 6420 6163 636f 7264 696e 6720   used according 
+0000aa40: 746f 2074 6865 206b 6579 2d2d 2d0a 2020  to the key---.  
+0000aa50: 2020 2020 2020 656c 656d 656e 745f 6469        element_di
+0000aa60: 6374 203d 2073 656c 662e 5f65 6c65 6d65  ct = self._eleme
+0000aa70: 6e74 5f64 6963 740a 0a20 2020 2020 2020  nt_dict..       
+0000aa80: 2023 202d 2d2d 6361 7465 676f 7279 2065   # ---category e
+0000aa90: 6c65 6d65 6e74 7320 6861 7665 2061 206e  lements have a n
+0000aaa0: 616d 652f 616c 6961 7320 6974 656d 2061  ame/alias item a
+0000aab0: 6363 6f72 6469 6e67 2074 6f20 7468 6520  ccording to the 
+0000aac0: 6b65 792d 2d2d 0a20 2020 2020 2020 2069  key---.        i
+0000aad0: 6620 6b65 7920 696e 2065 6c65 6d65 6e74  f key in element
+0000aae0: 5f64 6963 743a 0a20 2020 2020 2020 2020  _dict:.         
+0000aaf0: 2020 2076 616c 7565 203d 2065 6c65 6d65     value = eleme
+0000ab00: 6e74 5f64 6963 745b 6b65 795d 0a20 2020  nt_dict[key].   
+0000ab10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000ab20: 7661 6c75 6520 6966 2076 616c 7565 2065  value if value e
+0000ab30: 6c73 6520 2222 0a0a 2020 2020 2020 2020  lse ""..        
+0000ab40: 2320 2d2d 2d6f 7468 6572 2074 7970 6573  # ---other types
+0000ab50: 2061 7265 206d 6f72 6520 636f 6d70 6c69   are more compli
+0000ab60: 6361 7465 642d 2d2d 0a20 2020 2020 2020  cated---.       
+0000ab70: 2076 616c 7565 203d 2065 6c65 6d65 6e74   value = element
+0000ab80: 5f64 6963 742e 6765 7428 2276 616c 7565  _dict.get("value
+0000ab90: 2229 0a20 2020 2020 2020 2074 7970 655f  ").        type_
+0000aba0: 7661 6c75 6520 3d20 7479 7065 2876 616c  value = type(val
+0000abb0: 7565 292e 5f5f 6e61 6d65 5f5f 0a0a 2020  ue).__name__..  
+0000abc0: 2020 2020 2020 6966 2074 7970 655f 7661        if type_va
+0000abd0: 6c75 6520 3d3d 2022 4e6f 6e65 5479 7065  lue == "NoneType
+0000abe0: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
+0000abf0: 6574 7572 6e20 2222 0a0a 2020 2020 2020  eturn ""..      
+0000ac00: 2020 6966 2074 7970 655f 7661 6c75 6520    if type_value 
+0000ac10: 3d3d 2022 6c69 7374 223a 0a20 2020 2020  == "list":.     
+0000ac20: 2020 2020 2020 2023 202d 2d2d 6c69 6b65         # ---like
+0000ac30: 2027 3130 2d31 3527 206f 7220 2741 2d46   '10-15' or 'A-F
+0000ac40: 272d 2d2d 0a20 2020 2020 2020 2020 2020  '---.           
+0000ac50: 2072 6574 7572 6e20 222d 222e 6a6f 696e   return "-".join
+0000ac60: 285b 7374 7228 6974 656d 2920 666f 7220  ([str(item) for 
+0000ac70: 6974 656d 2069 6e20 7661 6c75 655d 290a  item in value]).
+0000ac80: 0a20 2020 2020 2020 2069 6620 7479 7065  .        if type
+0000ac90: 5f76 616c 7565 2069 6e20 2822 666c 6f61  _value in ("floa
+0000aca0: 7422 2c20 2269 6e74 2229 3a0a 2020 2020  t", "int"):.    
+0000acb0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000acc0: 7472 2876 616c 7565 290a 0a20 2020 2020  tr(value)..     
+0000acd0: 2020 2069 6620 7479 7065 5f76 616c 7565     if type_value
+0000ace0: 2069 6e20 2822 7374 7222 2c20 2275 6e69   in ("str", "uni
+0000acf0: 636f 6465 2229 3a0a 2020 2020 2020 2020  code"):.        
+0000ad00: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+0000ad10: 0a0a 2020 2020 2020 2020 2320 2d2d 2d46  ..        # ---F
+0000ad20: 6f72 2043 4120 616e 6420 4d52 2073 7562  or CA and MR sub
+0000ad30: 7661 7220 6469 6d65 6e73 696f 6e73 2d2d  var dimensions--
+0000ad40: 2d0a 2020 2020 2020 2020 7265 7475 726e  -.        return
+0000ad50: 2076 616c 7565 2e67 6574 2822 7265 6665   value.get("refe
+0000ad60: 7265 6e63 6573 222c 207b 7d29 2e67 6574  rences", {}).get
+0000ad70: 286b 6579 2920 6f72 2022 220a 0a0a 636c  (key) or ""...cl
+0000ad80: 6173 7320 5f45 6c65 6d65 6e74 5472 616e  ass _ElementTran
+0000ad90: 7366 6f72 6d73 3a0a 2020 2020 2222 2241  sforms:.    """A
+0000ada0: 2076 616c 7565 206f 626a 6563 7420 7072   value object pr
+0000adb0: 6f76 6964 696e 6720 636f 6e76 656e 6965  oviding convenie
+0000adc0: 6e74 2061 6363 6573 7320 746f 2074 7261  nt access to tra
+0000add0: 6e73 666f 726d 7320 666f 7220 6120 7369  nsforms for a si
+0000ade0: 6e67 6c65 2065 6c65 6d65 6e74 2e22 2222  ngle element."""
+0000adf0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0000ae00: 5f5f 2873 656c 662c 2065 6c65 6d65 6e74  __(self, element
+0000ae10: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+0000ae20: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000ae30: 5f65 6c65 6d65 6e74 5f74 7261 6e73 666f  _element_transfo
+0000ae40: 726d 735f 6469 6374 203d 2065 6c65 6d65  rms_dict = eleme
+0000ae50: 6e74 5f74 7261 6e73 666f 726d 735f 6469  nt_transforms_di
+0000ae60: 6374 0a0a 2020 2020 406c 617a 7970 726f  ct..    @lazypro
+0000ae70: 7065 7274 790a 2020 2020 6465 6620 6669  perty.    def fi
+0000ae80: 6c6c 2873 656c 6629 202d 3e20 4f70 7469  ll(self) -> Opti
+0000ae90: 6f6e 616c 5b73 7472 5d3a 0a20 2020 2020  onal[str]:.     
+0000aea0: 2020 2022 2222 7374 7220 5247 4220 636f     """str RGB co
+0000aeb0: 6c6f 7220 6c69 6b65 2022 2361 6630 3332  lor like "#af032
+0000aec0: 6422 206f 7220 4e6f 6e65 2069 6620 6e6f  d" or None if no
+0000aed0: 7420 7370 6563 6966 6965 642e 0a0a 2020  t specified...  
+0000aee0: 2020 2020 2020 4120 7661 6c75 6520 6f66        A value of
+0000aef0: 204e 6f6e 6520 696e 6469 6361 7465 7320   None indicates 
+0000af00: 6e6f 2066 696c 6c20 7472 616e 7366 6f72  no fill transfor
+0000af10: 6d20 7761 7320 7370 6563 6966 6965 6420  m was specified 
+0000af20: 666f 7220 7468 6973 2065 6c65 6d65 6e74  for this element
+0000af30: 2e0a 2020 2020 2020 2020 4120 7374 7220  ..        A str 
+0000af40: 7661 6c75 6520 6d75 7374 2062 6520 6120  value must be a 
+0000af50: 6861 7368 2063 6861 7261 6374 6572 2028  hash character (
+0000af60: 2223 2229 2066 6f6c 6c6f 7765 6420 6279  "#") followed by
+0000af70: 2073 6978 2068 6578 6164 6563 696d 616c   six hexadecimal
+0000af80: 2064 6967 6974 732e 0a20 2020 2020 2020   digits..       
+0000af90: 2054 6872 6565 2d63 6861 7261 6374 6572   Three-character
+0000afa0: 2063 6f6c 6f72 2063 6f6e 7472 6163 7469   color contracti
+0000afb0: 6f6e 7320 286c 696b 6520 2223 4430 3722  ons (like "#D07"
+0000afc0: 2920 6172 6520 6e6f 7420 7661 6c69 642e  ) are not valid.
+0000afd0: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+0000afe0: 2020 2020 2020 6669 6c6c 203d 2073 656c        fill = sel
+0000aff0: 662e 5f65 6c65 6d65 6e74 5f74 7261 6e73  f._element_trans
+0000b000: 666f 726d 735f 6469 6374 2e67 6574 2822  forms_dict.get("
+0000b010: 6669 6c6c 2229 0a0a 2020 2020 2020 2020  fill")..        
+0000b020: 6966 206e 6f74 2066 696c 6c3a 0a20 2020  if not fill:.   
+0000b030: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000b040: 4e6f 6e65 0a20 2020 2020 2020 2072 6574  None.        ret
+0000b050: 7572 6e20 6669 6c6c 0a0a 2020 2020 406c  urn fill..    @l
+0000b060: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+0000b070: 6465 6620 6869 6465 2873 656c 6629 202d  def hide(self) -
+0000b080: 3e20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  > Optional[bool]
+0000b090: 3a0a 2020 2020 2020 2020 2222 2254 7269  :.        """Tri
+0000b0a0: 2d76 616c 7565 2c20 5472 7565 2069 6620  -value, True if 
+0000b0b0: 7468 6973 2065 6c65 6d65 6e74 2068 6173  this element has
+0000b0c0: 2062 6565 6e20 6578 706c 6963 6974 6c79   been explicitly
+0000b0d0: 2068 6964 6465 6e20 696e 2074 6869 7320   hidden in this 
+0000b0e0: 616e 616c 7973 6973 2e0a 0a20 2020 2020  analysis...     
+0000b0f0: 2020 2046 616c 7365 206f 7665 7272 6964     False overrid
+0000b100: 6573 2061 6e79 2070 7269 6f72 2022 6869  es any prior "hi
+0000b110: 6465 2220 7472 616e 7366 6f72 6d20 7769  de" transform wi
+0000b120: 7468 2022 7368 6f77 2220 616e 6420 4e6f  th "show" and No
+0000b130: 6e65 2073 6967 6e69 6669 6573 0a20 2020  ne signifies.   
+0000b140: 2020 2020 2022 696e 6865 7269 7422 2e0a       "inherit"..
+0000b150: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000b160: 2020 2020 6869 6465 203d 2073 656c 662e      hide = self.
+0000b170: 5f65 6c65 6d65 6e74 5f74 7261 6e73 666f  _element_transfo
+0000b180: 726d 735f 6469 6374 2e67 6574 2822 6869  rms_dict.get("hi
+0000b190: 6465 2229 0a20 2020 2020 2020 2023 202d  de").        # -
+0000b1a0: 2d2d 636f 7665 7220 616c 6c20 6f66 2022  --cover all of "
+0000b1b0: 6f6d 6974 7465 6422 2c20 223d 3d4e 6f6e  omitted", "==Non
+0000b1c0: 6522 2c20 616e 6420 6f64 6420 223d 3d5b  e", and odd "==[
+0000b1d0: 5d22 206f 7220 223d 3d27 2722 2063 6173  ]" or "==''" cas
+0000b1e0: 6573 2d2d 2d0a 2020 2020 2020 2020 6966  es---.        if
+0000b1f0: 2068 6964 6520 6973 2054 7275 653a 0a20   hide is True:. 
+0000b200: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000b210: 6e20 5472 7565 0a20 2020 2020 2020 2069  n True.        i
+0000b220: 6620 6869 6465 2069 7320 4661 6c73 653a  f hide is False:
+0000b230: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000b240: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000b250: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
+0000b260: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+0000b270: 0a20 2020 2064 6566 206e 616d 6528 7365  .    def name(se
+0000b280: 6c66 2920 2d3e 204f 7074 696f 6e61 6c5b  lf) -> Optional[
+0000b290: 7374 725d 3a0a 2020 2020 2020 2020 2222  str]:.        ""
+0000b2a0: 224f 7074 696f 6e61 6c20 7374 7220 6469  "Optional str di
+0000b2b0: 7370 6c61 792d 6e61 6d65 2066 6f72 2074  splay-name for t
+0000b2c0: 6869 7320 656c 656d 656e 7420 284e 6f6e  his element (Non
+0000b2d0: 6520 6966 206e 6f74 2073 7065 6369 6669  e if not specifi
+0000b2e0: 6564 292e 2222 220a 2020 2020 2020 2020  ed).""".        
+0000b2f0: 2320 2d2d 2d69 6620 226e 616d 6522 3a20  # ---if "name": 
+0000b300: 656c 656d 656e 7420 6973 206f 6d69 7474  element is omitt
+0000b310: 6564 2c20 6e6f 2074 7261 6e73 666f 726d  ed, no transform
+0000b320: 2069 7320 7370 6563 6966 6965 642d 2d2d   is specified---
+0000b330: 0a20 2020 2020 2020 2069 6620 226e 616d  .        if "nam
+0000b340: 6522 206e 6f74 2069 6e20 7365 6c66 2e5f  e" not in self._
+0000b350: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+0000b360: 6d73 5f64 6963 743a 0a20 2020 2020 2020  ms_dict:.       
+0000b370: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0000b380: 0a20 2020 2020 2020 2023 202d 2d2d 6f74  .        # ---ot
+0000b390: 6865 7277 6973 6520 6e6f 726d 616c 697a  herwise normaliz
+0000b3a0: 6520 7661 6c75 6520 746f 2073 7472 2c20  e value to str, 
+0000b3b0: 7769 7468 2061 6e20 6578 706c 6963 6974  with an explicit
+0000b3c0: 2076 616c 7565 206f 6620 4e6f 6e65 2c20   value of None, 
+0000b3d0: 5b5d 2c20 302c 0a20 2020 2020 2020 2023  [], 0,.        #
+0000b3e0: 202d 2d2d 6574 632e 2062 6563 6f6d 696e   ---etc. becomin
+0000b3f0: 6720 7468 6520 656d 7074 7920 7374 7269  g the empty stri
+0000b400: 6e67 2028 2222 292e 0a20 2020 2020 2020  ng ("")..       
+0000b410: 206e 616d 6520 3d20 7365 6c66 2e5f 656c   name = self._el
+0000b420: 656d 656e 745f 7472 616e 7366 6f72 6d73  ement_transforms
+0000b430: 5f64 6963 745b 226e 616d 6522 5d0a 2020  _dict["name"].  
+0000b440: 2020 2020 2020 7265 7475 726e 2073 7472        return str
+0000b450: 286e 616d 6529 2069 6620 6e61 6d65 2065  (name) if name e
+0000b460: 6c73 6520 2222 0a0a 0a63 6c61 7373 205f  lse ""...class _
+0000b470: 4f72 6465 7253 7065 633a 0a20 2020 2022  OrderSpec:.    "
+0000b480: 2222 5661 6c75 6520 6f62 6a65 6374 2070  ""Value object p
+0000b490: 726f 7669 6469 6e67 2063 6f6e 7665 6e69  roviding conveni
+0000b4a0: 656e 7420 6163 6365 7373 2074 6f20 6465  ent access to de
+0000b4b0: 7461 696c 7320 6f66 2061 6e20 6f72 6465  tails of an orde
+0000b4c0: 7220 7472 616e 7366 6f72 6d2e 2222 220a  r transform.""".
+0000b4d0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000b4e0: 5f28 7365 6c66 2c20 6469 6d65 6e73 696f  _(self, dimensio
+0000b4f0: 6e2c 2064 696d 656e 7369 6f6e 5f74 7261  n, dimension_tra
+0000b500: 6e73 666f 726d 735f 6469 6374 293a 0a20  nsforms_dict):. 
+0000b510: 2020 2020 2020 2073 656c 662e 5f64 696d         self._dim
+0000b520: 656e 7369 6f6e 203d 2064 696d 656e 7369  ension = dimensi
+0000b530: 6f6e 0a20 2020 2020 2020 2073 656c 662e  on.        self.
+0000b540: 5f64 696d 656e 7369 6f6e 5f74 7261 6e73  _dimension_trans
+0000b550: 666f 726d 735f 6469 6374 203d 2064 696d  forms_dict = dim
+0000b560: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
+0000b570: 735f 6469 6374 0a0a 2020 2020 406c 617a  s_dict..    @laz
+0000b580: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000b590: 6620 626f 7474 6f6d 5f66 6978 6564 5f69  f bottom_fixed_i
+0000b5a0: 6473 2873 656c 6629 202d 3e20 5475 706c  ds(self) -> Tupl
+0000b5b0: 655b 696e 742c 202e 2e2e 5d3a 0a20 2020  e[int, ...]:.   
+0000b5c0: 2020 2020 2022 2222 5475 706c 6520 6f66       """Tuple of
+0000b5d0: 2065 6163 6820 656c 656d 656e 742d 6964   each element-id
+0000b5e0: 2061 7070 6561 7269 6e67 2069 6e20 7468   appearing in th
+0000b5f0: 6520 6669 7865 642e 626f 7474 6f6d 2066  e fixed.bottom f
+0000b600: 6965 6c64 206f 6620 6f72 6465 7220 6469  ield of order di
+0000b610: 6374 2e0a 0a20 2020 2020 2020 2054 6865  ct...        The
+0000b620: 2065 6c65 6d65 6e74 2d69 6473 2061 7070   element-ids app
+0000b630: 6561 7220 696e 2074 6865 206f 7264 6572  ear in the order
+0000b640: 2073 7065 6369 6669 6564 2069 6e20 7468   specified in th
+0000b650: 6520 2262 6f74 746f 6d22 2066 6978 6564  e "bottom" fixed
+0000b660: 2e62 6f74 746f 6d0a 2020 2020 2020 2020  .bottom.        
+0000b670: 6669 656c 642e 0a20 2020 2020 2020 2022  field..        "
+0000b680: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000b690: 6e20 7475 706c 6528 7365 6c66 2e5f 6f72  n tuple(self._or
+0000b6a0: 6465 725f 6469 6374 2e67 6574 2822 6669  der_dict.get("fi
+0000b6b0: 7865 6422 2c20 7b7d 292e 6765 7428 2262  xed", {}).get("b
+0000b6c0: 6f74 746f 6d22 2c20 5b5d 2929 0a0a 2020  ottom", []))..  
+0000b6d0: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000b6e0: 2020 2020 6465 6620 636f 6c6c 6174 696f      def collatio
+0000b6f0: 6e5f 6d65 7468 6f64 2873 656c 6629 202d  n_method(self) -
+0000b700: 3e20 434d 3a0a 2020 2020 2020 2020 2222  > CM:.        ""
+0000b710: 224d 656d 6265 7220 6f66 2043 4f4c 4c41  "Member of COLLA
+0000b720: 5449 4f4e 5f4d 4554 484f 4420 7370 6563  TION_METHOD spec
+0000b730: 6966 7969 6e67 206f 7264 6572 696e 6720  ifying ordering 
+0000b740: 6f66 2064 696d 656e 7369 6f6e 2065 6c65  of dimension ele
+0000b750: 6d65 6e74 732e 2222 220a 2020 2020 2020  ments.""".      
+0000b760: 2020 6d65 7468 6f64 5f6b 6579 776f 7264    method_keyword
+0000b770: 203d 2073 656c 662e 5f6f 7264 6572 5f64   = self._order_d
+0000b780: 6963 742e 6765 7428 2274 7970 6522 290a  ict.get("type").
+0000b790: 2020 2020 2020 2020 6966 206d 6574 686f          if metho
+0000b7a0: 645f 6b65 7977 6f72 6420 6973 204e 6f6e  d_keyword is Non
+0000b7b0: 6520 6f72 206e 6f74 2043 4d2e 6861 735f  e or not CM.has_
+0000b7c0: 7661 6c75 6528 6d65 7468 6f64 5f6b 6579  value(method_key
+0000b7d0: 776f 7264 293a 0a20 2020 2020 2020 2020  word):.         
+0000b7e0: 2020 2072 6574 7572 6e20 434d 2e50 4159     return CM.PAY
+0000b7f0: 4c4f 4144 5f4f 5244 4552 0a20 2020 2020  LOAD_ORDER.     
+0000b800: 2020 2072 6574 7572 6e20 434d 286d 6574     return CM(met
+0000b810: 686f 645f 6b65 7977 6f72 6429 0a0a 2020  hod_keyword)..  
+0000b820: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000b830: 2020 2020 6465 6620 6465 7363 656e 6469      def descendi
+0000b840: 6e67 2873 656c 6629 202d 3e20 626f 6f6c  ng(self) -> bool
+0000b850: 3a0a 2020 2020 2020 2020 2222 2254 7275  :.        """Tru
+0000b860: 6520 6966 2073 6f72 7420 6469 7265 6374  e if sort direct
+0000b870: 696f 6e20 6973 2064 6573 6365 6e64 696e  ion is descendin
+0000b880: 672c 2046 616c 7365 206f 7468 6572 7769  g, False otherwi
+0000b890: 7365 2e22 2222 0a20 2020 2020 2020 2072  se.""".        r
+0000b8a0: 6574 7572 6e20 7365 6c66 2e5f 6f72 6465  eturn self._orde
+0000b8b0: 725f 6469 6374 2e67 6574 2822 6469 7265  r_dict.get("dire
+0000b8c0: 6374 696f 6e22 2c20 2264 6573 6365 6e64  ction", "descend
+0000b8d0: 696e 6722 2920 213d 2022 6173 6365 6e64  ing") != "ascend
+0000b8e0: 696e 6722 0a0a 2020 2020 406c 617a 7970  ing"..    @lazyp
+0000b8f0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000b900: 656c 656d 656e 745f 6964 2873 656c 6629  element_id(self)
+0000b910: 202d 3e20 696e 743a 0a20 2020 2020 2020   -> int:.       
+0000b920: 2022 2222 696e 7420 656c 656d 656e 7420   """int element 
+0000b930: 6964 2061 7070 6561 7269 6e67 2069 6e20  id appearing in 
+0000b940: 616e 206f 7264 6572 2074 7261 6e73 666f  an order transfo
+0000b950: 726d 2e0a 0a20 2020 2020 2020 2052 6169  rm...        Rai
+0000b960: 7365 7320 4b65 7945 7272 6f72 2069 6620  ses KeyError if 
+0000b970: 7468 6520 7472 616e 7366 6f72 6d20 6469  the transform di
+0000b980: 6374 2064 6f65 7320 6e6f 7420 636f 6e74  ct does not cont
+0000b990: 6169 6e20 616e 2022 656c 656d 656e 745f  ain an "element_
+0000b9a0: 6964 2220 6669 656c 642e 0a20 2020 2020  id" field..     
+0000b9b0: 2020 204e 6f74 6520 7468 6174 206e 6f74     Note that not
+0000b9c0: 2061 6c6c 206f 7264 6572 2074 7970 6573   all order types
+0000b9d0: 2075 7365 2074 6869 7320 6669 656c 6420   use this field 
+0000b9e0: 6275 7420 6974 2069 7320 6120 7265 7175  but it is a requ
+0000b9f0: 6972 6564 2066 6965 6c64 2069 6e20 616c  ired field in al
+0000ba00: 6c0a 2020 2020 2020 2020 7468 6f73 6520  l.        those 
+0000ba10: 7468 6174 2064 6f2e 0a20 2020 2020 2020  that do..       
+0000ba20: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+0000ba30: 7572 6e20 7365 6c66 2e5f 6f72 6465 725f  urn self._order_
+0000ba40: 6469 6374 5b22 656c 656d 656e 745f 6964  dict["element_id
+0000ba50: 225d 0a0a 2020 2020 406c 617a 7970 726f  "]..    @lazypro
+0000ba60: 7065 7274 790a 2020 2020 6465 6620 656c  perty.    def el
+0000ba70: 656d 656e 745f 6964 7328 7365 6c66 2920  ement_ids(self) 
+0000ba80: 2d3e 2054 7570 6c65 5b69 6e74 2c20 2e2e  -> Tuple[int, ..
+0000ba90: 2e5d 3a0a 2020 2020 2020 2020 2222 2274  .]:.        """t
+0000baa0: 7570 6c65 206f 6620 696e 7420 6561 6368  uple of int each
+0000bab0: 2065 6c65 6d65 6e74 2069 6420 6170 7065   element id appe
+0000bac0: 6172 696e 6720 696e 2061 6e20 6578 706c  aring in an expl
+0000bad0: 6963 6974 206f 7264 6572 2074 7261 6e73  icit order trans
+0000bae0: 666f 726d 2e0a 0a20 2020 2020 2020 2054  form...        T
+0000baf0: 6869 7320 7661 6c75 6520 6973 2060 2829  his value is `()
+0000bb00: 6020 6966 206e 6f20 2265 6c65 6d65 6e74  ` if no "element
+0000bb10: 5f69 6473 223a 2066 6965 6c64 2069 7320  _ids": field is 
+0000bb20: 7072 6573 656e 742e 0a20 2020 2020 2020  present..       
+0000bb30: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+0000bb40: 7572 6e20 7475 706c 6528 7365 6c66 2e5f  urn tuple(self._
+0000bb50: 6f72 6465 725f 6469 6374 2e67 6574 2822  order_dict.get("
+0000bb60: 656c 656d 656e 745f 6964 7322 2920 6f72  element_ids") or
+0000bb70: 205b 5d29 0a0a 2020 2020 406c 617a 7970   [])..    @lazyp
+0000bb80: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000bb90: 696e 7365 7274 696f 6e5f 6964 2873 656c  insertion_id(sel
+0000bba0: 6629 202d 3e20 696e 743a 0a20 2020 2020  f) -> int:.     
+0000bbb0: 2020 2022 2222 696e 7420 696e 7365 7274     """int insert
+0000bbc0: 696f 6e2d 6964 2069 6e20 7468 6520 2269  ion-id in the "i
+0000bbd0: 6e73 6572 7469 6f6e 5f69 6422 2066 6965  nsertion_id" fie
+0000bbe0: 6c64 206f 6620 7468 6520 7472 616e 7366  ld of the transf
+0000bbf0: 6f72 6d20 6469 6374 2e0a 0a20 2020 2020  orm dict...     
+0000bc00: 2020 2052 6169 7365 7320 4b65 7945 7272     Raises KeyErr
+0000bc10: 6f72 2069 6620 7468 6973 2074 7261 6e73  or if this trans
+0000bc20: 666f 726d 2064 6963 7420 646f 6573 206e  form dict does n
+0000bc30: 6f74 2063 6f6e 7461 696e 2061 6e20 2269  ot contain an "i
+0000bc40: 6e73 6572 7469 6f6e 5f69 6422 2066 6965  nsertion_id" fie
+0000bc50: 6c64 2e0a 2020 2020 2020 2020 2222 220a  ld..        """.
+0000bc60: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000bc70: 656c 662e 5f6f 7264 6572 5f64 6963 745b  elf._order_dict[
+0000bc80: 2269 6e73 6572 7469 6f6e 5f69 6422 5d0a  "insertion_id"].
+0000bc90: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+0000bca0: 7479 0a20 2020 2064 6566 206d 6172 6769  ty.    def margi
+0000bcb0: 6e61 6c28 7365 6c66 2920 2d3e 204d 4152  nal(self) -> MAR
+0000bcc0: 4749 4e41 4c3a 0a20 2020 2020 2020 2022  GINAL:.        "
+0000bcd0: 2222 4d65 6d62 6572 206f 6620 656e 756d  ""Member of enum
+0000bce0: 732e 4d41 5247 494e 414c 2063 6f72 7265  s.MARGINAL corre
+0000bcf0: 7370 6f6e 6469 6e67 2074 6f20 226d 6172  sponding to "mar
+0000bd00: 6769 6e61 6c22 3a20 6669 656c 6420 696e  ginal": field in
+0000bd10: 206f 7264 6572 2074 7261 6e73 666f 726d   order transform
+0000bd20: 2e0a 0a20 2020 2020 2020 2052 6169 7365  ...        Raise
+0000bd30: 7320 4b65 7945 7272 6f72 2069 6620 7468  s KeyError if th
+0000bd40: 6520 6f72 6465 7220 6469 6374 2068 6173  e order dict has
+0000bd50: 206e 6f20 226d 6172 6769 6e61 6c22 3a20   no "marginal": 
+0000bd60: 6669 656c 6420 616e 6420 5661 6c75 6545  field and ValueE
+0000bd70: 7272 6f72 2069 6620 7468 650a 2020 2020  rror if the.    
+0000bd80: 2020 2020 7661 6c75 6520 696e 2074 6861      value in tha
+0000bd90: 7420 6669 656c 6420 6973 206e 6f74 2061  t field is not a
+0000bda0: 2072 6563 6f67 6e69 7a65 6420 6d61 7267   recognized marg
+0000bdb0: 696e 616c 206b 6579 776f 7264 2e20 4e6f  inal keyword. No
+0000bdc0: 7465 2074 6861 7420 6e6f 7420 616c 6c20  te that not all 
+0000bdd0: 6f72 6465 720a 2020 2020 2020 2020 7479  order.        ty
+0000bde0: 7065 7320 7573 6520 7468 6520 226d 6172  pes use the "mar
+0000bdf0: 6769 6e61 6c22 3a20 6669 656c 642e 0a20  ginal": field.. 
+0000be00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000be10: 2020 2072 6574 7572 6e20 4d41 5247 494e     return MARGIN
+0000be20: 414c 2873 656c 662e 6d61 7267 696e 616c  AL(self.marginal
+0000be30: 5f6b 6579 6e61 6d65 290a 0a20 2020 2040  _keyname)..    @
+0000be40: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+0000be50: 2064 6566 206d 6172 6769 6e61 6c5f 6b65   def marginal_ke
+0000be60: 796e 616d 6528 7365 6c66 2920 2d3e 2073  yname(self) -> s
+0000be70: 7472 3a0a 2020 2020 2020 2020 2222 2273  tr:.        """s
+0000be80: 7472 2076 616c 7565 206f 6620 226d 6172  tr value of "mar
+0000be90: 6769 6e61 6c22 3a20 6669 656c 6420 696e  ginal": field in
+0000bea0: 206f 7264 6572 2074 7261 6e73 666f 726d   order transform
+0000beb0: 2e0a 0a20 2020 2020 2020 2052 6169 7365  ...        Raise
+0000bec0: 7320 4b65 7945 7272 6f72 2069 6620 7468  s KeyError if th
+0000bed0: 6520 6f72 6465 7220 6469 6374 2068 6173  e order dict has
+0000bee0: 206e 6f20 226d 6172 6769 6e61 6c22 3a20   no "marginal": 
+0000bef0: 6669 656c 642e 204e 6f74 6520 7468 6174  field. Note that
+0000bf00: 206e 6f74 2061 6c6c 0a20 2020 2020 2020   not all.       
+0000bf10: 206f 7264 6572 2074 7970 6573 2075 7365   order types use
+0000bf20: 2074 6865 2022 6d65 6173 7572 6522 3a20   the "measure": 
+0000bf30: 6669 656c 642c 2062 7574 2069 7420 6973  field, but it is
+0000bf40: 2061 2072 6571 7569 7265 6420 6669 656c   a required fiel
+0000bf50: 6420 696e 2061 6c6c 2074 6861 7420 646f  d in all that do
+0000bf60: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000bf70: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000bf80: 662e 5f6f 7264 6572 5f64 6963 745b 226d  f._order_dict["m
+0000bf90: 6172 6769 6e61 6c22 5d0a 0a20 2020 2040  arginal"]..    @
+0000bfa0: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+0000bfb0: 2064 6566 206d 6561 7375 7265 2873 656c   def measure(sel
+0000bfc0: 6629 202d 3e20 4d45 4153 5552 453a 0a20  f) -> MEASURE:. 
+0000bfd0: 2020 2020 2020 2022 2222 4d65 6d62 6572         """Member
+0000bfe0: 206f 6620 656e 756d 732e 4d45 4153 5552   of enums.MEASUR
+0000bff0: 4520 636f 7272 6573 706f 6e64 696e 6720  E corresponding 
+0000c000: 746f 2022 6d65 6173 7572 6522 3a20 6669  to "measure": fi
+0000c010: 656c 6420 696e 206f 7264 6572 2074 7261  eld in order tra
+0000c020: 6e73 666f 726d 2e0a 0a20 2020 2020 2020  nsform...       
+0000c030: 2052 6169 7365 7320 4b65 7945 7272 6f72   Raises KeyError
+0000c040: 2069 6620 7468 6520 6f72 6465 7220 6469   if the order di
+0000c050: 6374 2068 6173 206e 6f20 226d 6561 7375  ct has no "measu
+0000c060: 7265 223a 2066 6965 6c64 2061 6e64 2056  re": field and V
+0000c070: 616c 7565 4572 726f 7220 6966 2074 6865  alueError if the
+0000c080: 0a20 2020 2020 2020 2076 616c 7565 2069  .        value i
+0000c090: 6e20 7468 6174 2066 6965 6c64 2069 7320  n that field is 
+0000c0a0: 6e6f 7420 6120 7265 636f 676e 697a 6564  not a recognized
+0000c0b0: 206d 6561 7375 7265 206b 6579 776f 7264   measure keyword
+0000c0c0: 2e20 4e6f 7465 2074 6861 7420 6e6f 7420  . Note that not 
+0000c0d0: 616c 6c20 6f72 6465 720a 2020 2020 2020  all order.      
+0000c0e0: 2020 7479 7065 7320 7573 6520 7468 6520    types use the 
+0000c0f0: 226d 6561 7375 7265 223a 2066 6965 6c64  "measure": field
+0000c100: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000c110: 2020 2020 2020 7265 7475 726e 204d 4541        return MEA
+0000c120: 5355 5245 2873 656c 662e 6d65 6173 7572  SURE(self.measur
+0000c130: 655f 6b65 796e 616d 6529 0a0a 2020 2020  e_keyname)..    
+0000c140: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+0000c150: 2020 6465 6620 6d65 6173 7572 655f 6b65    def measure_ke
+0000c160: 796e 616d 6528 7365 6c66 2920 2d3e 2073  yname(self) -> s
+0000c170: 7472 3a0a 2020 2020 2020 2020 2222 2273  tr:.        """s
+0000c180: 7472 2076 616c 7565 206f 6620 226d 6561  tr value of "mea
+0000c190: 7375 7265 223a 2066 6965 6c64 2069 6e20  sure": field in 
+0000c1a0: 6f72 6465 7220 7472 616e 7366 6f72 6d2e  order transform.
+0000c1b0: 0a0a 2020 2020 2020 2020 5261 6973 6573  ..        Raises
+0000c1c0: 204b 6579 4572 726f 7220 6966 2074 6865   KeyError if the
+0000c1d0: 206f 7264 6572 2064 6963 7420 6861 7320   order dict has 
+0000c1e0: 6e6f 2022 6d65 6173 7572 6522 3a20 6669  no "measure": fi
+0000c1f0: 656c 642e 204e 6f74 6520 7468 6174 206e  eld. Note that n
+0000c200: 6f74 2061 6c6c 0a20 2020 2020 2020 206f  ot all.        o
+0000c210: 7264 6572 2074 7970 6573 2075 7365 2074  rder types use t
+0000c220: 6865 2022 6d65 6173 7572 6522 3a20 6669  he "measure": fi
+0000c230: 656c 642c 2062 7574 2069 7420 6973 2061  eld, but it is a
+0000c240: 2072 6571 7569 7265 6420 6669 656c 6420   required field 
+0000c250: 696e 2061 6c6c 2074 6861 7420 646f 2e0a  in all that do..
+0000c260: 2020 2020 2020 2020 4e6f 7465 2061 6c73          Note als
+0000c270: 6f20 7468 6174 2074 6869 7320 7072 6f70  o that this prop
+0000c280: 6572 7479 2069 7320 7265 7175 6972 6564  erty is required
+0000c290: 2066 6f72 2074 6865 2022 756e 6976 6172   for the "univar
+0000c2a0: 6961 7465 5f6d 6561 7375 7265 2220 736f  iate_measure" so
+0000c2b0: 7274 2074 7970 650a 2020 2020 2020 2020  rt type.        
+0000c2c0: 6265 6361 7573 6520 6974 7320 6d65 6173  because its meas
+0000c2d0: 7572 6520 6b65 7977 6f72 6473 2064 6f20  ure keywords do 
+0000c2e0: 6e6f 7420 636f 7272 6573 706f 6e64 2064  not correspond d
+0000c2f0: 6972 6563 746c 7920 746f 206d 656d 6265  irectly to membe
+0000c300: 7273 206f 6620 7468 650a 2020 2020 2020  rs of the.      
+0000c310: 2020 4d45 4153 5552 4520 656e 756d 6572    MEASURE enumer
+0000c320: 6174 696f 6e2e 0a20 2020 2020 2020 2022  ation..        "
+0000c330: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000c340: 6e20 7365 6c66 2e5f 6f72 6465 725f 6469  n self._order_di
+0000c350: 6374 5b22 6d65 6173 7572 6522 5d0a 0a20  ct["measure"].. 
+0000c360: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+0000c370: 0a20 2020 2064 6566 2074 6f70 5f66 6978  .    def top_fix
+0000c380: 6564 5f69 6473 2873 656c 6629 202d 3e20  ed_ids(self) -> 
+0000c390: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
+0000c3a0: 0a20 2020 2020 2020 2022 2222 5475 706c  .        """Tupl
+0000c3b0: 6520 6f66 2065 6163 6820 656c 656d 656e  e of each elemen
+0000c3c0: 742d 6964 2061 7070 6561 7269 6e67 2069  t-id appearing i
+0000c3d0: 6e20 7468 6520 6669 7865 642e 746f 7020  n the fixed.top 
+0000c3e0: 6669 656c 6420 6f66 206f 7264 6572 2064  field of order d
+0000c3f0: 6963 742e 0a0a 2020 2020 2020 2020 5468  ict...        Th
+0000c400: 6520 656c 656d 656e 742d 6964 7320 6170  e element-ids ap
+0000c410: 7065 6172 2069 6e20 7468 6520 6f72 6465  pear in the orde
+0000c420: 7220 7370 6563 6966 6965 6420 696e 2074  r specified in t
+0000c430: 6865 2022 746f 7022 2066 6978 6564 2e74  he "top" fixed.t
+0000c440: 6f70 0a20 2020 2020 2020 2066 6965 6c64  op.        field
+0000c450: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000c460: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+0000c470: 6c65 2873 656c 662e 5f6f 7264 6572 5f64  le(self._order_d
+0000c480: 6963 742e 6765 7428 2266 6978 6564 222c  ict.get("fixed",
+0000c490: 207b 7d29 2e67 6574 2822 746f 7022 2c20   {}).get("top", 
+0000c4a0: 5b5d 2929 0a0a 2020 2020 406c 617a 7970  []))..    @lazyp
+0000c4b0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000c4c0: 5f6f 7264 6572 5f64 6963 7428 7365 6c66  _order_dict(self
+0000c4d0: 2920 2d3e 2044 6963 743a 0a20 2020 2020  ) -> Dict:.     
+0000c4e0: 2020 2022 2222 6469 6374 2064 696d 656e     """dict dimen
+0000c4f0: 7369 6f6e 2e74 7261 6e73 666f 726d 732e  sion.transforms.
+0000c500: 6f72 6465 7220 6669 656c 6420 7061 7273  order field pars
+0000c510: 6564 2066 726f 6d20 4a53 4f4e 2070 6179  ed from JSON pay
+0000c520: 6c6f 6164 2e0a 0a20 2020 2020 2020 2056  load...        V
+0000c530: 616c 7565 2069 7320 607b 7d60 2069 6620  alue is `{}` if 
+0000c540: 6e6f 2022 6f72 6465 7222 3a20 6669 656c  no "order": fiel
+0000c550: 6420 6973 2070 7265 7365 6e74 2e0a 2020  d is present..  
+0000c560: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000c570: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
+0000c580: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
+0000c590: 726d 735f 6469 6374 2e67 6574 2822 6f72  rms_dict.get("or
+0000c5a0: 6465 7222 2920 6f72 207b 7d0a 0a0a 636c  der") or {}...cl
+0000c5b0: 6173 7320 5f53 7562 746f 7461 6c73 2853  ass _Subtotals(S
+0000c5c0: 6571 7565 6e63 6529 3a0a 2020 2020 2222  equence):.    ""
+0000c5d0: 2253 6571 7565 6e63 6520 6f66 205f 5375  "Sequence of _Su
+0000c5e0: 6274 6f74 616c 206f 626a 6563 7473 2066  btotal objects f
+0000c5f0: 6f72 2061 2064 696d 656e 7369 6f6e 2e0a  or a dimension..
+0000c600: 0a20 2020 2045 6163 6820 5f53 7562 746f  .    Each _Subto
+0000c610: 7461 6c20 6f62 6a65 6374 2072 6570 7265  tal object repre
+0000c620: 7365 6e74 7320 6120 2273 7562 746f 7461  sents a "subtota
+0000c630: 6c22 2069 6e73 6572 7469 6f6e 2074 7261  l" insertion tra
+0000c640: 6e73 666f 726d 6174 696f 6e0a 2020 2020  nsformation.    
+0000c650: 6465 6669 6e65 6420 666f 7220 7468 6520  defined for the 
+0000c660: 6469 6d65 6e73 696f 6e2e 0a0a 2020 2020  dimension...    
+0000c670: 4120 7375 6274 6f74 616c 2063 616e 206f  A subtotal can o
+0000c680: 6e6c 7920 696e 766f 6c76 6520 7661 6c69  nly involve vali
+0000c690: 6420 2869 2e65 2e20 6e6f 6e2d 6d69 7373  d (i.e. non-miss
+0000c6a0: 696e 6729 2065 6c65 6d65 6e74 732e 0a20  ing) elements.. 
+0000c6b0: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
+0000c6c0: 5f5f 696e 6974 5f5f 2873 656c 662c 2069  __init__(self, i
+0000c6d0: 6e73 6572 7469 6f6e 5f64 6963 7473 2c20  nsertion_dicts, 
+0000c6e0: 7661 6c69 645f 656c 656d 656e 7473 293a  valid_elements):
+0000c6f0: 0a20 2020 2020 2020 2073 656c 662e 5f69  .        self._i
+0000c700: 6e73 6572 7469 6f6e 5f64 6963 7473 203d  nsertion_dicts =
+0000c710: 2069 6e73 6572 7469 6f6e 5f64 6963 7473   insertion_dicts
+0000c720: 0a20 2020 2020 2020 2073 656c 662e 5f76  .        self._v
+0000c730: 616c 6964 5f65 6c65 6d65 6e74 7320 3d20  alid_elements = 
+0000c740: 7661 6c69 645f 656c 656d 656e 7473 0a0a  valid_elements..
+0000c750: 2020 2020 6465 6620 5f5f 6765 7469 7465      def __getite
+0000c760: 6d5f 5f28 7365 6c66 2c20 6964 785f 6f72  m__(self, idx_or
+0000c770: 5f73 6c69 6365 293a 0a20 2020 2020 2020  _slice):.       
+0000c780: 2022 2222 496d 706c 656d 656e 7473 2069   """Implements i
+0000c790: 6e64 6578 6564 2061 6363 6573 732e 2222  ndexed access.""
+0000c7a0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0000c7b0: 2073 656c 662e 5f73 7562 746f 7461 6c73   self._subtotals
+0000c7c0: 5b69 6478 5f6f 725f 736c 6963 655d 0a0a  [idx_or_slice]..
+0000c7d0: 2020 2020 6465 6620 5f5f 6974 6572 5f5f      def __iter__
+0000c7e0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000c7f0: 2222 2249 6d70 6c65 6d65 6e74 7320 2865  """Implements (e
+0000c800: 6666 6963 6965 6e74 2920 6974 6572 6162  fficient) iterab
+0000c810: 696c 6974 792e 2222 220a 2020 2020 2020  ility.""".      
+0000c820: 2020 7265 7475 726e 2069 7465 7228 7365    return iter(se
+0000c830: 6c66 2e5f 7375 6274 6f74 616c 7329 0a0a  lf._subtotals)..
+0000c840: 2020 2020 6465 6620 5f5f 6c65 6e5f 5f28      def __len__(
+0000c850: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+0000c860: 2222 496d 706c 656d 656e 7473 206c 656e  ""Implements len
+0000c870: 2873 7562 746f 7461 6c73 292e 2222 220a  (subtotals).""".
+0000c880: 2020 2020 2020 2020 7265 7475 726e 206c          return l
+0000c890: 656e 2873 656c 662e 5f73 7562 746f 7461  en(self._subtota
+0000c8a0: 6c73 290a 0a20 2020 2040 6c61 7a79 7072  ls)..    @lazypr
+0000c8b0: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+0000c8c0: 656c 656d 656e 745f 6964 7328 7365 6c66  element_ids(self
+0000c8d0: 293a 0a20 2020 2020 2020 2022 2222 6672  ):.        """fr
+0000c8e0: 6f7a 656e 7365 7420 6f66 2069 6e74 2069  ozenset of int i
+0000c8f0: 6420 6f66 2065 6163 6820 6e6f 6e2d 6d69  d of each non-mi
+0000c900: 7373 696e 6720 6361 7420 6f72 2073 7562  ssing cat or sub
+0000c910: 7661 7220 696e 2064 696d 2e22 2222 0a20  var in dim.""". 
+0000c920: 2020 2020 2020 2072 6574 7572 6e20 6672         return fr
+0000c930: 6f7a 656e 7365 7428 7365 6c66 2e5f 7661  ozenset(self._va
+0000c940: 6c69 645f 656c 656d 656e 7473 2e65 6c65  lid_elements.ele
+0000c950: 6d65 6e74 5f69 6473 290a 0a20 2020 2064  ment_ids)..    d
+0000c960: 6566 205f 6974 6572 5f76 616c 6964 5f73  ef _iter_valid_s
+0000c970: 7562 746f 7461 6c5f 6469 6374 7328 7365  ubtotal_dicts(se
+0000c980: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000c990: 4765 6e65 7261 7465 2065 6163 6820 696e  Generate each in
+0000c9a0: 7365 7274 696f 6e20 6469 6374 2074 6861  sertion dict tha
+0000c9b0: 7420 7265 7072 6573 656e 7473 2061 2076  t represents a v
+0000c9c0: 616c 6964 2073 7562 746f 7461 6c2e 2222  alid subtotal.""
+0000c9d0: 220a 2020 2020 2020 2020 666f 7220 696e  ".        for in
+0000c9e0: 7365 7274 696f 6e5f 6469 6374 2069 6e20  sertion_dict in 
+0000c9f0: 7365 6c66 2e5f 696e 7365 7274 696f 6e5f  self._insertion_
+0000ca00: 6469 6374 733a 0a20 2020 2020 2020 2020  dicts:.         
+0000ca10: 2020 2023 202d 2d2d 736b 6970 2061 6e79     # ---skip any
+0000ca20: 206e 6f6e 2d64 6963 7473 2d2d 2d0a 2020   non-dicts---.  
+0000ca30: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0000ca40: 2069 7369 6e73 7461 6e63 6528 696e 7365   isinstance(inse
+0000ca50: 7274 696f 6e5f 6469 6374 2c20 6469 6374  rtion_dict, dict
+0000ca60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000ca70: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
+0000ca80: 2020 2020 2020 2020 2023 202d 2d2d 736b           # ---sk
+0000ca90: 6970 2061 6e79 206e 6f6e 2d73 7562 746f  ip any non-subto
+0000caa0: 7461 6c20 696e 7365 7274 696f 6e73 2d2d  tal insertions--
+0000cab0: 2d0a 2020 2020 2020 2020 2020 2020 6966  -.            if
+0000cac0: 2069 6e73 6572 7469 6f6e 5f64 6963 742e   insertion_dict.
+0000cad0: 6765 7428 2266 756e 6374 696f 6e22 2920  get("function") 
+0000cae0: 213d 2022 7375 6274 6f74 616c 223a 0a20  != "subtotal":. 
+0000caf0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000cb00: 6f6e 7469 6e75 650a 0a20 2020 2020 2020  ontinue..       
+0000cb10: 2020 2020 2023 202d 2d2d 736b 6970 2061       # ---skip a
+0000cb20: 6e79 2068 6964 6465 6e20 696e 7365 7274  ny hidden insert
+0000cb30: 696f 6e73 2d2d 2d0a 2020 2020 2020 2020  ions---.        
+0000cb40: 2020 2020 6966 2069 6e73 6572 7469 6f6e      if insertion
+0000cb50: 5f64 6963 742e 6765 7428 2268 6964 6522  _dict.get("hide"
+0000cb60: 2920 6973 2054 7275 653a 0a20 2020 2020  ) is True:.     
+0000cb70: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+0000cb80: 6e75 650a 0a20 2020 2020 2020 2020 2020  nue..           
+0000cb90: 2023 202d 2d2d 736b 6970 2061 6e79 206d   # ---skip any m
+0000cba0: 616c 666f 726d 6564 2073 7562 746f 7461  alformed subtota
+0000cbb0: 6c2d 6469 6374 732d 2d2d 0a20 2020 2020  l-dicts---.     
+0000cbc0: 2020 2020 2020 2069 6620 6e6f 7420 7b22         if not {"
+0000cbd0: 616e 6368 6f72 222c 2022 6e61 6d65 227d  anchor", "name"}
+0000cbe0: 2e69 7373 7562 7365 7428 696e 7365 7274  .issubset(insert
+0000cbf0: 696f 6e5f 6469 6374 2e6b 6579 7328 2929  ion_dict.keys())
+0000cc00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000cc10: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
+0000cc20: 2020 2020 2020 2020 2320 2d2d 2d75 7365          # ---use
+0000cc30: 2022 6e65 7720 7374 796c 6522 206b 7761   "new style" kwa
+0000cc40: 7267 7320 6465 6669 6e69 6e67 2070 6f73  rgs defining pos
+0000cc50: 6974 6976 6520 7465 726d 7320 6966 2061  itive terms if a
+0000cc60: 7661 696c 6162 6c65 2d2d 2d0a 2020 2020  vailable---.    
+0000cc70: 2020 2020 2020 2020 2320 2d2d 2d62 7574          # ---but
+0000cc80: 2069 6620 6d69 7373 696e 672c 2075 7365   if missing, use
+0000cc90: 2022 6f6c 6420 7374 796c 6522 2061 7267   "old style" arg
+0000cca0: 7320 6465 6669 6e69 6e67 2070 6f73 6974  s defining posit
+0000ccb0: 6976 6520 7465 726d 732d 2d2d 0a20 2020  ive terms---.   
+0000ccc0: 2020 2020 2020 2020 2070 6f73 6974 6976           positiv
+0000ccd0: 6520 3d20 696e 7365 7274 696f 6e5f 6469  e = insertion_di
+0000cce0: 6374 2e67 6574 2822 6b77 6172 6773 222c  ct.get("kwargs",
+0000ccf0: 207b 7d29 2e67 6574 280a 2020 2020 2020   {}).get(.      
+0000cd00: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+0000cd10: 6976 6522 0a20 2020 2020 2020 2020 2020  ive".           
+0000cd20: 2029 206f 7220 696e 7365 7274 696f 6e5f   ) or insertion_
+0000cd30: 6469 6374 2e67 6574 2822 6172 6773 222c  dict.get("args",
+0000cd40: 205b 5d29 0a0a 2020 2020 2020 2020 2020   [])..          
+0000cd50: 2020 6e65 6761 7469 7665 203d 2069 6e73    negative = ins
+0000cd60: 6572 7469 6f6e 5f64 6963 742e 6765 7428  ertion_dict.get(
+0000cd70: 226b 7761 7267 7322 2c20 7b7d 292e 6765  "kwargs", {}).ge
+0000cd80: 7428 226e 6567 6174 6976 6522 2c20 5b5d  t("negative", []
+0000cd90: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0000cda0: 202d 2d2d 6d75 7374 2068 6176 6520 706f   ---must have po
+0000cdb0: 7369 7469 7665 206f 7220 6e65 6761 7469  sitive or negati
+0000cdc0: 7665 2065 6c65 6d65 6e74 732d 2d2d 0a20  ve elements---. 
+0000cdd0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0000cde0: 7420 2870 6f73 6974 6976 6520 6f72 206e  t (positive or n
+0000cdf0: 6567 6174 6976 6529 3a0a 2020 2020 2020  egative):.      
+0000ce00: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+0000ce10: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
+0000ce20: 2320 2d2d 2d73 6b69 7020 6966 2064 6f65  # ---skip if doe
+0000ce30: 736e 2774 2072 6566 6572 656e 6365 2061  sn't reference a
+0000ce40: 7420 6c65 6173 7420 6f6e 6520 6e6f 6e2d  t least one non-
+0000ce50: 6d69 7373 696e 6720 656c 656d 656e 742d  missing element-
+0000ce60: 2d2d 0a20 2020 2020 2020 2020 2020 2069  --.            i
+0000ce70: 6620 6e6f 7420 7365 6c66 2e5f 656c 656d  f not self._elem
+0000ce80: 656e 745f 6964 732e 696e 7465 7273 6563  ent_ids.intersec
+0000ce90: 7469 6f6e 2870 6f73 6974 6976 6520 2b20  tion(positive + 
+0000cea0: 6e65 6761 7469 7665 293a 0a20 2020 2020  negative):.     
+0000ceb0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+0000cec0: 6e75 650a 0a20 2020 2020 2020 2020 2020  nue..           
+0000ced0: 2023 202d 2d2d 616e 2069 6e73 6572 7469   # ---an inserti
+0000cee0: 6f6e 2d64 6963 7420 7468 6174 2073 7563  on-dict that suc
+0000cef0: 6365 7373 6675 6c6c 7920 7275 6e73 2074  cessfully runs t
+0000cf00: 6869 7320 6761 756e 746c 6574 0a20 2020  his gauntlet.   
+0000cf10: 2020 2020 2020 2020 2023 202d 2d2d 6973           # ---is
+0000cf20: 2061 2076 616c 6964 2073 7562 746f 7461   a valid subtota
+0000cf30: 6c20 6469 6374 0a20 2020 2020 2020 2020  l dict.         
+0000cf40: 2020 2079 6965 6c64 2069 6e73 6572 7469     yield inserti
+0000cf50: 6f6e 5f64 6963 740a 0a20 2020 2040 6c61  on_dict..    @la
+0000cf60: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+0000cf70: 6566 205f 7375 6274 6f74 616c 7328 7365  ef _subtotals(se
+0000cf80: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000cf90: 436f 6d70 6f73 6564 2074 7570 6c65 2073  Composed tuple s
+0000cfa0: 746f 7269 6e67 2061 6374 7561 6c20 7365  toring actual se
+0000cfb0: 7175 656e 6365 206f 6620 5f53 7562 746f  quence of _Subto
+0000cfc0: 7461 6c20 6f62 6a65 6374 732e 2222 220a  tal objects.""".
+0000cfd0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+0000cfe0: 7570 6c65 280a 2020 2020 2020 2020 2020  uple(.          
+0000cff0: 2020 5f53 7562 746f 7461 6c28 7375 6274    _Subtotal(subt
+0000d000: 6f74 616c 5f64 6963 742c 2073 656c 662e  otal_dict, self.
+0000d010: 5f76 616c 6964 5f65 6c65 6d65 6e74 732c  _valid_elements,
+0000d020: 2069 6478 202b 2031 290a 2020 2020 2020   idx + 1).      
+0000d030: 2020 2020 2020 666f 7220 6964 782c 2073        for idx, s
+0000d040: 7562 746f 7461 6c5f 6469 6374 2069 6e20  ubtotal_dict in 
+0000d050: 656e 756d 6572 6174 6528 7365 6c66 2e5f  enumerate(self._
+0000d060: 6974 6572 5f76 616c 6964 5f73 7562 746f  iter_valid_subto
+0000d070: 7461 6c5f 6469 6374 7328 2929 0a20 2020  tal_dicts()).   
+0000d080: 2020 2020 2029 0a0a 0a63 6c61 7373 205f       )...class _
+0000d090: 5375 6274 6f74 616c 3a0a 2020 2020 2222  Subtotal:.    ""
+0000d0a0: 2241 2073 7562 746f 7461 6c20 696e 7365  "A subtotal inse
+0000d0b0: 7274 696f 6e20 6f6e 2061 2063 7562 6520  rtion on a cube 
+0000d0c0: 6469 6d65 6e73 696f 6e2e 0a0a 2020 2020  dimension...    
+0000d0d0: 6066 616c 6c62 6163 6b5f 696e 7365 7274  `fallback_insert
+0000d0e0: 696f 6e5f 6964 6020 6973 2061 2066 616c  ion_id` is a fal
+0000d0f0: 6c62 6163 6b20 756e 6971 7565 2069 6465  lback unique ide
+0000d100: 6e74 6966 6965 7220 666f 7220 7468 6973  ntifier for this
+0000d110: 2069 6e73 6572 7469 6f6e 2c20 756e 7469   insertion, unti
+0000d120: 6c0a 2020 2020 7265 616c 2069 6e73 6572  l.    real inser
+0000d130: 7469 6f6e 2d69 6473 2063 616e 2062 6520  tion-ids can be 
+0000d140: 6164 6465 642e 2049 7473 2076 616c 7565  added. Its value
+0000d150: 2069 7320 6a75 7374 2074 6865 2069 6e64   is just the ind
+0000d160: 6578 2b31 206f 6620 7468 6973 2073 7562  ex+1 of this sub
+0000d170: 746f 7461 6c0a 2020 2020 7769 7468 696e  total.    within
+0000d180: 2074 6865 2069 6e73 6572 7469 6f6e 7320   the insertions 
+0000d190: 7472 616e 7366 6f72 6d20 636f 6c6c 6563  transform collec
+0000d1a0: 7469 6f6e 2e0a 2020 2020 2222 220a 0a20  tion..    """.. 
+0000d1b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0000d1c0: 7365 6c66 2c20 7375 6274 6f74 616c 5f64  self, subtotal_d
+0000d1d0: 6963 742c 2076 616c 6964 5f65 6c65 6d65  ict, valid_eleme
+0000d1e0: 6e74 732c 2066 616c 6c62 6163 6b5f 696e  nts, fallback_in
+0000d1f0: 7365 7274 696f 6e5f 6964 293a 0a20 2020  sertion_id):.   
+0000d200: 2020 2020 2073 656c 662e 5f73 7562 746f       self._subto
+0000d210: 7461 6c5f 6469 6374 203d 2073 7562 746f  tal_dict = subto
+0000d220: 7461 6c5f 6469 6374 0a20 2020 2020 2020  tal_dict.       
+0000d230: 2073 656c 662e 5f76 616c 6964 5f65 6c65   self._valid_ele
+0000d240: 6d65 6e74 7320 3d20 7661 6c69 645f 656c  ments = valid_el
+0000d250: 656d 656e 7473 0a20 2020 2020 2020 2073  ements.        s
+0000d260: 656c 662e 5f66 616c 6c62 6163 6b5f 696e  elf._fallback_in
+0000d270: 7365 7274 696f 6e5f 6964 203d 2066 616c  sertion_id = fal
+0000d280: 6c62 6163 6b5f 696e 7365 7274 696f 6e5f  lback_insertion_
+0000d290: 6964 0a0a 2020 2020 406c 617a 7970 726f  id..    @lazypro
+0000d2a0: 7065 7274 790a 2020 2020 6465 6620 616c  perty.    def al
+0000d2b0: 6961 7328 7365 6c66 2920 2d3e 2073 7472  ias(self) -> str
+0000d2c0: 3a0a 2020 2020 2020 2020 2222 2273 7472  :.        """str
+0000d2d0: 2064 6973 706c 6179 2061 6c69 6173 2066   display alias f
+0000d2e0: 6f72 2074 6869 7320 7375 6274 6f74 616c  or this subtotal
+0000d2f0: 2e22 2222 0a20 2020 2020 2020 2061 6c69  .""".        ali
+0000d300: 6173 203d 2073 656c 662e 5f73 7562 746f  as = self._subto
+0000d310: 7461 6c5f 6469 6374 2e67 6574 2822 616c  tal_dict.get("al
+0000d320: 6961 7322 290a 2020 2020 2020 2020 7265  ias").        re
+0000d330: 7475 726e 2061 6c69 6173 2069 6620 616c  turn alias if al
+0000d340: 6961 7320 656c 7365 2022 220a 0a20 2020  ias else ""..   
+0000d350: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+0000d360: 2020 2064 6566 2061 6e63 686f 7228 7365     def anchor(se
+0000d370: 6c66 2920 2d3e 2055 6e69 6f6e 5b69 6e74  lf) -> Union[int
+0000d380: 2c20 7374 725d 3a0a 2020 2020 2020 2020  , str]:.        
+0000d390: 2222 2269 6e74 206f 7220 7374 7220 696e  """int or str in
+0000d3a0: 6469 6361 7469 6e67 2065 6c65 6d65 6e74  dicating element
+0000d3b0: 2075 6e64 6572 2077 6869 6368 2074 6f20   under which to 
+0000d3c0: 696e 7365 7274 2074 6869 7320 7375 6274  insert this subt
+0000d3d0: 6f74 616c 2e0a 0a20 2020 2020 2020 2041  otal...        A
+0000d3e0: 6e20 696e 7420 616e 6368 6f72 2069 7320  n int anchor is 
+0000d3f0: 7468 6520 6964 206f 6620 7468 6520 6469  the id of the di
+0000d400: 6d65 6e73 696f 6e20 656c 656d 656e 7420  mension element 
+0000d410: 2863 6174 6567 6f72 7920 6f72 0a20 2020  (category or.   
+0000d420: 2020 2020 2073 7562 7661 7269 6162 6c65       subvariable
+0000d430: 2920 756e 6465 7220 7768 6963 6820 746f  ) under which to
+0000d440: 2070 6c61 6365 2074 6869 7320 7375 6274   place this subt
+0000d450: 6f74 616c 2e20 5468 6520 7265 7475 726e  otal. The return
+0000d460: 2076 616c 7565 2063 616e 0a20 2020 2020   value can.     
+0000d470: 2020 2061 6c73 6f20 6265 206f 6e65 206f     also be one o
+0000d480: 6620 2774 6f70 2720 6f72 2027 626f 7474  f 'top' or 'bott
+0000d490: 6f6d 272e 0a0a 2020 2020 2020 2020 5468  om'...        Th
+0000d4a0: 6520 7265 7475 726e 2076 616c 7565 2064  e return value d
+0000d4b0: 6566 6175 6c74 7320 746f 2027 626f 7474  efaults to 'bott
+0000d4c0: 6f6d 2720 666f 7220 616e 2061 6e63 686f  om' for an ancho
+0000d4d0: 7220 7265 6665 7272 696e 6720 746f 2061  r referring to a
+0000d4e0: 6e0a 2020 2020 2020 2020 656c 656d 656e  n.        elemen
+0000d4f0: 7420 7468 6174 2069 7320 6e6f 206c 6f6e  t that is no lon
+0000d500: 6765 7220 7072 6573 656e 7420 696e 2074  ger present in t
+0000d510: 6865 2064 696d 656e 7369 6f6e 206f 7220  he dimension or 
+0000d520: 616e 2065 6c65 6d65 6e74 2074 6861 740a  an element that.
+0000d530: 2020 2020 2020 2020 7265 7072 6573 656e          represen
+0000d540: 7473 206d 6973 7369 6e67 2064 6174 612e  ts missing data.
+0000d550: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000d560: 2020 2020 2061 6e63 686f 7220 3d20 7365       anchor = se
+0000d570: 6c66 2e5f 7375 6274 6f74 616c 5f64 6963  lf._subtotal_dic
+0000d580: 745b 2261 6e63 686f 7222 5d0a 0a20 2020  t["anchor"]..   
+0000d590: 2020 2020 2069 6620 616e 6368 6f72 2069       if anchor i
+0000d5a0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0000d5b0: 2020 2020 2320 496e 2074 6865 2063 6173      # In the cas
+0000d5c0: 6520 6f66 2075 6e64 6566 696e 6564 2061  e of undefined a
+0000d5d0: 6e63 686f 7220 6465 6661 756c 7420 746f  nchor default to
+0000d5e0: 2022 626f 7474 6f6d 220a 2020 2020 2020   "bottom".      
+0000d5f0: 2020 2020 2020 7265 7475 726e 2022 626f        return "bo
+0000d600: 7474 6f6d 220a 0a20 2020 2020 2020 2074  ttom"..        t
+0000d610: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0000d620: 616e 6368 6f72 203d 2069 6e74 2861 6e63  anchor = int(anc
+0000d630: 686f 7229 0a20 2020 2020 2020 2020 2020  hor).           
+0000d640: 2069 6620 616e 6368 6f72 206e 6f74 2069   if anchor not i
+0000d650: 6e20 7365 6c66 2e5f 7661 6c69 645f 656c  n self._valid_el
+0000d660: 656d 656e 7473 2e65 6c65 6d65 6e74 5f69  ements.element_i
+0000d670: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
+0000d680: 2020 2020 2320 496e 2074 6865 2063 6173      # In the cas
+0000d690: 6520 6f66 2061 206e 6f6e 2d76 616c 6964  e of a non-valid
+0000d6a0: 2069 6e74 2069 642c 2064 6566 6175 6c74   int id, default
+0000d6b0: 2074 6f20 2262 6f74 746f 6d22 0a20 2020   to "bottom".   
+0000d6c0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000d6d0: 7572 6e20 2262 6f74 746f 6d22 0a20 2020  urn "bottom".   
+0000d6e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000d6f0: 616e 6368 6f72 0a20 2020 2020 2020 2065  anchor.        e
+0000d700: 7863 6570 7420 2854 7970 6545 7272 6f72  xcept (TypeError
+0000d710: 2c20 5661 6c75 6545 7272 6f72 293a 0a20  , ValueError):. 
+0000d720: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000d730: 6e20 616e 6368 6f72 2e6c 6f77 6572 2829  n anchor.lower()
+0000d740: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+0000d750: 7274 790a 2020 2020 6465 6620 6164 6465  rty.    def adde
+0000d760: 6e64 5f69 6473 2873 656c 6629 202d 3e20  nd_ids(self) -> 
+0000d770: 5475 706c 655b 696e 742c 202e 2e2e 5d3a  Tuple[int, ...]:
+0000d780: 0a20 2020 2020 2020 2022 2222 7475 706c  .        """tupl
+0000d790: 6520 6f66 2069 6e74 2069 6473 206f 6620  e of int ids of 
+0000d7a0: 656c 656d 656e 7473 2063 6f6e 7472 6962  elements contrib
+0000d7b0: 7574 696e 6720 746f 2074 6869 7320 7375  uting to this su
+0000d7c0: 6274 6f74 616c 2e0a 0a20 2020 2020 2020  btotal...       
+0000d7d0: 2041 6e79 2065 6c65 6d65 6e74 2069 6420   Any element id 
+0000d7e0: 6e6f 7420 7072 6573 656e 7420 696e 2074  not present in t
+0000d7f0: 6865 2064 696d 656e 7369 6f6e 206f 7220  he dimension or 
+0000d800: 7072 6573 656e 7420 6275 740a 2020 2020  present but.    
+0000d810: 2020 2020 7265 7072 6573 656e 7469 6e67      representing
+0000d820: 206d 6973 7369 6e67 2064 6174 6120 6973   missing data is
+0000d830: 2065 7863 6c75 6465 642e 0a20 2020 2020   excluded..     
+0000d840: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
+0000d850: 202d 2d2d 5072 6566 6572 2070 6f73 6974   ---Prefer posit
+0000d860: 6976 6520 226b 7761 7267 7322 206f 7665  ive "kwargs" ove
+0000d870: 7220 2261 7267 7322 2073 6f20 7765 2063  r "args" so we c
+0000d880: 616e 206d 6967 7261 7465 2d2d 2d0a 2020  an migrate---.  
+0000d890: 2020 2020 2020 706f 7369 7469 7665 203d        positive =
+0000d8a0: 2073 656c 662e 5f73 7562 746f 7461 6c5f   self._subtotal_
+0000d8b0: 6469 6374 2e67 6574 2822 6b77 6172 6773  dict.get("kwargs
+0000d8c0: 222c 207b 7d29 2e67 6574 280a 2020 2020  ", {}).get(.    
+0000d8d0: 2020 2020 2020 2020 2270 6f73 6974 6976          "positiv
+0000d8e0: 6522 0a20 2020 2020 2020 2029 206f 7220  e".        ) or 
+0000d8f0: 7365 6c66 2e5f 7375 6274 6f74 616c 5f64  self._subtotal_d
+0000d900: 6963 742e 6765 7428 2261 7267 7322 2c20  ict.get("args", 
+0000d910: 5b5d 290a 0a20 2020 2020 2020 2072 6574  [])..        ret
+0000d920: 7572 6e20 7475 706c 6528 6172 6720 666f  urn tuple(arg fo
+0000d930: 7220 6172 6720 696e 2070 6f73 6974 6976  r arg in positiv
+0000d940: 6520 6966 2061 7267 2069 6e20 7365 6c66  e if arg in self
+0000d950: 2e5f 7661 6c69 645f 656c 656d 656e 7473  ._valid_elements
+0000d960: 2e65 6c65 6d65 6e74 5f69 6473 290a 0a20  .element_ids).. 
+0000d970: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+0000d980: 0a20 2020 2064 6566 2061 6464 656e 645f  .    def addend_
+0000d990: 6964 7873 2873 656c 6629 202d 3e20 6e70  idxs(self) -> np
+0000d9a0: 2e6e 6461 7272 6179 3a0a 2020 2020 2020  .ndarray:.      
+0000d9b0: 2020 2222 226e 6461 7272 6179 206f 6620    """ndarray of 
+0000d9c0: 696e 7420 6261 7365 2d65 6c65 6d65 6e74  int base-element
+0000d9d0: 206f 6666 7365 7473 2063 6f6e 7472 6962   offsets contrib
+0000d9e0: 7574 696e 6720 746f 2074 6869 7320 7375  uting to this su
+0000d9f0: 6274 6f74 616c 2e0a 0a20 2020 2020 2020  btotal...       
+0000da00: 2053 7569 7461 626c 6520 666f 7220 6469   Suitable for di
+0000da10: 7265 6374 6c79 2069 6e64 6578 696e 6720  rectly indexing 
+0000da20: 6120 6e75 6d70 7920 6172 7261 7920 6f62  a numpy array ob
+0000da30: 6a65 6374 2028 7375 6368 2061 7320 6261  ject (such as ba
+0000da40: 7365 2076 616c 7565 7320 6f72 0a20 2020  se values or.   
+0000da50: 2020 2020 206d 6172 6769 6e29 2074 6f20       margin) to 
+0000da60: 6578 7472 6163 7420 7468 6520 6164 6465  extract the adde
+0000da70: 6e64 2076 616c 7565 7320 666f 7220 7468  nd values for th
+0000da80: 6973 2073 7562 746f 7461 6c2e 0a20 2020  is subtotal..   
+0000da90: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000daa0: 2061 6464 656e 645f 6964 7320 3d20 7365   addend_ids = se
+0000dab0: 6c66 2e61 6464 656e 645f 6964 730a 2020  lf.addend_ids.  
+0000dac0: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+0000dad0: 6672 6f6d 6974 6572 280a 2020 2020 2020  fromiter(.      
+0000dae0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0000daf0: 2020 2020 2020 2020 6964 780a 2020 2020          idx.    
+0000db00: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0000db10: 6964 782c 2076 6563 746f 7220 696e 2065  idx, vector in e
+0000db20: 6e75 6d65 7261 7465 2873 656c 662e 5f76  numerate(self._v
+0000db30: 616c 6964 5f65 6c65 6d65 6e74 7329 0a20  alid_elements). 
+0000db40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000db50: 6620 7665 6374 6f72 2e65 6c65 6d65 6e74  f vector.element
+0000db60: 5f69 6420 696e 2061 6464 656e 645f 6964  _id in addend_id
+0000db70: 730a 2020 2020 2020 2020 2020 2020 292c  s.            ),
+0000db80: 0a20 2020 2020 2020 2020 2020 2064 7479  .            dty
+0000db90: 7065 3d6e 702e 696e 7436 342c 2020 2320  pe=np.int64,  # 
+0000dba0: 666f 7263 6520 696e 7420 736f 2069 7420  force int so it 
+0000dbb0: 6361 6e20 6265 2075 7365 6420 6173 2069  can be used as i
+0000dbc0: 6e64 6578 2065 7665 6e20 6966 2065 6d70  ndex even if emp
+0000dbd0: 7479 0a20 2020 2020 2020 2029 0a0a 2020  ty.        )..  
+0000dbe0: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000dbf0: 2020 2020 6465 6620 6669 6c6c 2873 656c      def fill(sel
+0000dc00: 6629 202d 3e20 7374 723a 0a20 2020 2020  f) -> str:.     
+0000dc10: 2020 2022 2222 7374 7220 5247 4220 636f     """str RGB co
+0000dc20: 6c6f 7220 6c69 6b65 2022 2361 6630 3332  lor like "#af032
+0000dc30: 6422 206f 7220 4e6f 6e65 2069 6620 6e6f  d" or None if no
+0000dc40: 7420 7370 6563 6966 6965 642e 0a0a 2020  t specified...  
+0000dc50: 2020 2020 2020 4120 7661 6c75 6520 6f66        A value of
+0000dc60: 204e 6f6e 6520 696e 6469 6361 7465 7320   None indicates 
+0000dc70: 7468 6520 6465 6661 756c 7420 6669 6c6c  the default fill
+0000dc80: 2073 686f 756c 6420 6265 2075 7365 6420   should be used 
+0000dc90: 666f 7220 7468 6973 2065 6c65 6d65 6e74  for this element
+0000dca0: 2e0a 2020 2020 2020 2020 4120 7374 7220  ..        A str 
+0000dcb0: 7661 6c75 6520 6d75 7374 2062 6520 6120  value must be a 
+0000dcc0: 6861 7368 2063 6861 7261 6374 6572 2028  hash character (
+0000dcd0: 2223 2229 2066 6f6c 6c6f 7765 6420 6279  "#") followed by
+0000dce0: 2073 6978 2068 6578 6164 6563 696d 616c   six hexadecimal
+0000dcf0: 2064 6967 6974 732e 0a20 2020 2020 2020   digits..       
+0000dd00: 2054 6872 6565 2d63 6861 7261 6374 6572   Three-character
+0000dd10: 2063 6f6c 6f72 2063 6f6e 7472 6163 7469   color contracti
+0000dd20: 6f6e 7320 286c 696b 6520 2223 4430 3722  ons (like "#D07"
+0000dd30: 2920 6172 6520 6e6f 7420 7661 6c69 642e  ) are not valid.
+0000dd40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000dd50: 2020 2020 2023 202d 2d2d 6669 7273 7420       # ---first 
+0000dd60: 6175 7468 6f72 6974 7920 6973 2066 696c  authority is fil
+0000dd70: 6c20 7472 616e 7366 6f72 6d20 696e 2065  l transform in e
+0000dd80: 6c65 6d65 6e74 2074 7261 6e73 666f 726d  lement transform
+0000dd90: 732e 2054 6865 2062 6173 6520 7661 6c75  s. The base valu
+0000dda0: 6520 6973 0a20 2020 2020 2020 2023 202d  e is.        # -
+0000ddb0: 2d2d 7468 6520 6f6e 6c79 2070 7269 6f72  --the only prior
+0000ddc0: 2061 7574 686f 7269 7479 2061 6e64 2074   authority and t
+0000ddd0: 6861 7420 6973 204e 6f6e 6520 2875 7365  hat is None (use
+0000dde0: 2064 6566 6175 6c74 2066 696c 6c20 636f   default fill co
+0000ddf0: 6c6f 7229 2e0a 2020 2020 2020 2020 7265  lor)..        re
+0000de00: 7475 726e 2073 656c 662e 5f73 7562 746f  turn self._subto
+0000de10: 7461 6c5f 6469 6374 2e67 6574 2822 6669  tal_dict.get("fi
+0000de20: 6c6c 222c 204e 6f6e 6529 0a0a 2020 2020  ll", None)..    
+0000de30: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+0000de40: 2020 6465 6620 696e 7365 7274 696f 6e5f    def insertion_
+0000de50: 6964 2873 656c 6629 202d 3e20 696e 743a  id(self) -> int:
+0000de60: 0a20 2020 2020 2020 2022 2222 696e 7420  .        """int 
+0000de70: 756e 6971 7565 2069 6465 6e74 6966 6965  unique identifie
+0000de80: 7220 6f66 2074 6869 7320 7375 6274 6f74  r of this subtot
+0000de90: 616c 2077 6974 6869 6e20 7468 6973 2064  al within this d
+0000dea0: 696d 656e 7369 6f6e 2773 2069 6e73 6572  imension's inser
+0000deb0: 7469 6f6e 732e 2222 220a 2020 2020 2020  tions.""".      
+0000dec0: 2020 7265 7475 726e 2073 656c 662e 5f73    return self._s
+0000ded0: 7562 746f 7461 6c5f 6469 6374 2e67 6574  ubtotal_dict.get
+0000dee0: 2822 6964 222c 2073 656c 662e 5f66 616c  ("id", self._fal
+0000def0: 6c62 6163 6b5f 696e 7365 7274 696f 6e5f  lback_insertion_
+0000df00: 6964 290a 0a20 2020 2040 6c61 7a79 7072  id)..    @lazypr
+0000df10: 6f70 6572 7479 0a20 2020 2064 6566 2069  operty.    def i
+0000df20: 735f 6469 6666 6572 656e 6365 2873 656c  s_difference(sel
+0000df30: 6629 202d 3e20 626f 6f6c 3a0a 2020 2020  f) -> bool:.    
+0000df40: 2020 2020 2222 2254 7275 6520 6966 2061      """True if a
+0000df50: 2073 7562 746f 7461 6c20 6973 2061 2064   subtotal is a d
+0000df60: 6966 6665 7265 6e63 652c 2046 616c 7365  ifference, False
+0000df70: 206f 7468 6572 7769 7365 2e22 2222 0a20   otherwise.""". 
+0000df80: 2020 2020 2020 2072 6574 7572 6e20 626f         return bo
+0000df90: 6f6c 2873 656c 662e 7375 6274 7261 6865  ol(self.subtrahe
+0000dfa0: 6e64 5f69 6473 290a 0a20 2020 2040 6c61  nd_ids)..    @la
+0000dfb0: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+0000dfc0: 6566 206c 6162 656c 2873 656c 6629 202d  ef label(self) -
+0000dfd0: 3e20 7374 723a 0a20 2020 2020 2020 2022  > str:.        "
+0000dfe0: 2222 7374 7220 6469 7370 6c61 7920 6e61  ""str display na
+0000dff0: 6d65 2066 6f72 2074 6869 7320 7375 6274  me for this subt
+0000e000: 6f74 616c 2c20 7375 6974 6162 6c65 2066  otal, suitable f
+0000e010: 6f72 2075 7365 2061 7320 6c61 6265 6c2e  or use as label.
+0000e020: 2222 220a 2020 2020 2020 2020 6e61 6d65  """.        name
+0000e030: 203d 2073 656c 662e 5f73 7562 746f 7461   = self._subtota
+0000e040: 6c5f 6469 6374 2e67 6574 2822 6e61 6d65  l_dict.get("name
+0000e050: 2229 0a20 2020 2020 2020 2072 6574 7572  ").        retur
+0000e060: 6e20 6e61 6d65 2069 6620 6e61 6d65 2065  n name if name e
+0000e070: 6c73 6520 2222 0a0a 2020 2020 406c 617a  lse ""..    @laz
+0000e080: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000e090: 6620 7375 6274 7261 6865 6e64 5f69 6473  f subtrahend_ids
+0000e0a0: 2873 656c 6629 202d 3e20 5475 706c 655b  (self) -> Tuple[
+0000e0b0: 696e 742c 202e 2e2e 5d3a 0a20 2020 2020  int, ...]:.     
+0000e0c0: 2020 2022 2222 7475 706c 6520 6f66 2069     """tuple of i
+0000e0d0: 6e74 2069 6473 206f 6620 656c 656d 656e  nt ids of elemen
+0000e0e0: 7473 206f 6620 6e65 6761 7469 7665 2070  ts of negative p
+0000e0f0: 6172 7420 6f66 2074 6865 2073 7562 746f  art of the subto
+0000e100: 7461 6c2e 0a0a 2020 2020 2020 2020 416e  tal...        An
+0000e110: 7920 656c 656d 656e 7420 6964 206e 6f74  y element id not
+0000e120: 2070 7265 7365 6e74 2069 6e20 7468 6520   present in the 
+0000e130: 6469 6d65 6e73 696f 6e20 6f72 2070 7265  dimension or pre
+0000e140: 7365 6e74 2062 7574 0a20 2020 2020 2020  sent but.       
+0000e150: 2072 6570 7265 7365 6e74 696e 6720 6d69   representing mi
+0000e160: 7373 696e 6720 6461 7461 2069 7320 6578  ssing data is ex
+0000e170: 636c 7564 6564 2e0a 2020 2020 2020 2020  cluded..        
+0000e180: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0000e190: 726e 2074 7570 6c65 280a 2020 2020 2020  rn tuple(.      
+0000e1a0: 2020 2020 2020 6172 670a 2020 2020 2020        arg.      
+0000e1b0: 2020 2020 2020 666f 7220 6172 6720 696e        for arg in
+0000e1c0: 2073 656c 662e 5f73 7562 746f 7461 6c5f   self._subtotal_
+0000e1d0: 6469 6374 2e67 6574 2822 6b77 6172 6773  dict.get("kwargs
+0000e1e0: 222c 207b 7d29 2e67 6574 2822 6e65 6761  ", {}).get("nega
+0000e1f0: 7469 7665 222c 205b 5d29 0a20 2020 2020  tive", []).     
+0000e200: 2020 2020 2020 2069 6620 6172 6720 696e         if arg in
+0000e210: 2073 656c 662e 5f76 616c 6964 5f65 6c65   self._valid_ele
+0000e220: 6d65 6e74 732e 656c 656d 656e 745f 6964  ments.element_id
+0000e230: 730a 2020 2020 2020 2020 290a 0a20 2020  s.        )..   
+0000e240: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+0000e250: 2020 2064 6566 2073 7562 7472 6168 656e     def subtrahen
+0000e260: 645f 6964 7873 2873 656c 6629 202d 3e20  d_idxs(self) -> 
+0000e270: 6e70 2e6e 6461 7272 6179 3a0a 2020 2020  np.ndarray:.    
+0000e280: 2020 2020 2222 226e 6461 7272 6179 206f      """ndarray o
+0000e290: 6620 696e 7420 6261 7365 2d65 6c65 6d65  f int base-eleme
+0000e2a0: 6e74 206f 6666 7365 7473 2063 6f6e 7472  nt offsets contr
+0000e2b0: 6962 7574 696e 6720 746f 2074 6865 206e  ibuting to the n
+0000e2c0: 6567 6174 6976 6520 7061 7274 206f 6620  egative part of 
+0000e2d0: 7375 6274 6f74 616c 2e0a 0a20 2020 2020  subtotal...     
+0000e2e0: 2020 2053 7569 7461 626c 6520 666f 7220     Suitable for 
+0000e2f0: 6469 7265 6374 6c79 2069 6e64 6578 696e  directly indexin
+0000e300: 6720 6120 6e75 6d70 7920 6172 7261 7920  g a numpy array 
+0000e310: 6f62 6a65 6374 2028 7375 6368 2061 7320  object (such as 
+0000e320: 6261 7365 2076 616c 7565 7320 6f72 0a20  base values or. 
+0000e330: 2020 2020 2020 206d 6172 6769 6e29 2074         margin) t
+0000e340: 6f20 6578 7472 6163 7420 7468 6520 6164  o extract the ad
+0000e350: 6465 6e64 2076 616c 7565 7320 666f 7220  dend values for 
+0000e360: 7468 6973 2073 7562 746f 7461 6c2e 0a20  this subtotal.. 
+0000e370: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000e380: 2020 2072 6574 7572 6e20 6e70 2e66 726f     return np.fro
+0000e390: 6d69 7465 7228 0a20 2020 2020 2020 2020  miter(.         
+0000e3a0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+0000e3b0: 2020 2020 2069 6478 0a20 2020 2020 2020       idx.       
+0000e3c0: 2020 2020 2020 2020 2066 6f72 2069 6478           for idx
+0000e3d0: 2c20 7665 6374 6f72 2069 6e20 656e 756d  , vector in enum
+0000e3e0: 6572 6174 6528 7365 6c66 2e5f 7661 6c69  erate(self._vali
+0000e3f0: 645f 656c 656d 656e 7473 290a 2020 2020  d_elements).    
+0000e400: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+0000e410: 6563 746f 722e 656c 656d 656e 745f 6964  ector.element_id
+0000e420: 2069 6e20 7365 6c66 2e73 7562 7472 6168   in self.subtrah
+0000e430: 656e 645f 6964 730a 2020 2020 2020 2020  end_ids.        
+0000e440: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+0000e450: 2020 2064 7479 7065 3d6e 702e 696e 7436     dtype=np.int6
+0000e460: 342c 2020 2320 666f 7263 6520 696e 7420  4,  # force int 
+0000e470: 736f 2069 7420 6361 6e20 6265 2075 7365  so it can be use
+0000e480: 6420 6173 2069 6e64 6578 2065 7665 6e20  d as index even 
+0000e490: 6966 2065 6d70 7479 0a20 2020 2020 2020  if empty.       
+0000e4a0: 2029 0a                                   ).
```

### Comparing `cr.cube-3.0.8/src/cr/cube/collator.py` & `cr.cube-3.0.9/src/cr/cube/collator.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/cube.py` & `cr.cube-3.0.9/src/cr/cube/cube.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/cubepart.py` & `cr.cube-3.0.9/src/cr/cube/cubepart.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/enums.py` & `cr.cube-3.0.9/src/cr/cube/enums.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/matrix/.assembler.py.swp` & `cr.cube-3.0.9/src/cr/cube/matrix/assembler.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,4864 +1,3627 @@
-00000000: 6230 5649 4d20 382e 3200 0000 0010 0000  b0VIM 8.2.......
-00000010: 283d 4e61 c68b a408 7262 0000 736c 6f62  (=Na....rb..slob
-00000020: 6f64 616e 696c 6963 0000 0000 0000 0000  odanilic........
-00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 536c 6f62 6f64 616e 732d 4d61  ....Slobodans-Ma
-00000050: 6342 6f6f 6b2d 5072 6f2d 322e 6c6f 6361  cBook-Pro-2.loca
-00000060: 6c00 0000 0000 0000 0000 0000 7e73 6c6f  l...........~slo
-00000070: 626f 6461 6e69 6c69 632f 446f 6375 6d65  bodanilic/Docume
-00000080: 6e74 732f 4372 756e 6368 2f72 6570 6f73  nts/Crunch/repos
-00000090: 2f63 7275 6e63 682d 6375 6265 2f73 7263  /crunch-cube/src
-000000a0: 2f63 722f 6375 6265 2f6d 6174 7269 782f  /cr/cube/matrix/
-000000b0: 6173 7365 6d62 6c65 722e 7079 0000 0000  assembler.py....
-000000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003e0: 0000 0000 0000 0000 0075 7466 2d38 0d00  .........utf-8..
-000003f0: 3332 3130 0000 0000 2322 2120 1312 5500  3210....#"! ..U.
-00000400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001000: 7470 1100 7f00 0000 0200 0000 0000 0000  tp..............
-00001010: 5e00 0000 0000 0000 0100 0000 0000 0000  ^...............
-00001020: 0100 0000 0000 0000 0600 0000 0000 0000  ................
-00001030: 5200 0000 0000 0000 5f00 0000 0000 0000  R......._.......
-00001040: 0100 0000 0000 0000 0700 0000 0000 0000  ................
-00001050: 5100 0000 0000 0000 b100 0000 0000 0000  Q...............
-00001060: 0100 0000 0000 0000 0800 0000 0000 0000  ................
-00001070: 5a00 0000 0000 0000 0201 0000 0000 0000  Z...............
-00001080: 0100 0000 0000 0000 0900 0000 0000 0000  ................
-00001090: 5e00 0000 0000 0000 5c01 0000 0000 0000  ^.......\.......
-000010a0: 0100 0000 0000 0000 0400 0000 0000 0000  ................
-000010b0: 3e00 0000 0000 0000 ba01 0000 0000 0000  >...............
-000010c0: 0100 0000 0000 0000 0500 0000 0000 0000  ................
-000010d0: 1700 0000 0000 0000 f901 0000 0000 0000  ................
-000010e0: 0100 0000 0000 0000 0a00 0000 0000 0000  ................
-000010f0: 5300 0000 0000 0000 0f02 0000 0000 0000  S...............
-00001100: 0100 0000 0000 0000 0b00 0000 0000 0000  ................
-00001110: 4e00 0000 0000 0000 6202 0000 0000 0000  N.......b.......
-00001120: 0100 0000 0000 0000 0c00 0000 0000 0000  ................
-00001130: 5500 0000 0000 0000 b002 0000 0000 0000  U...............
-00001140: 0100 0000 0000 0000 0d00 0000 0000 0000  ................
-00001150: 5300 0000 0000 0000 0503 0000 0000 0000  S...............
-00001160: 0100 0000 0000 0000 0e00 0000 0000 0000  ................
-00001170: 5400 0000 0000 0000 5803 0000 0000 0000  T.......X.......
-00001180: 0100 0000 0000 0000 0f00 0000 0000 0000  ................
-00001190: 5000 0000 0000 0000 ac03 0000 0000 0000  P...............
-000011a0: 0100 0000 0000 0000 1000 0000 0000 0000  ................
-000011b0: 6000 0000 0000 0000 fc03 0000 0000 0000  `...............
-000011c0: 0100 0000 0000 0000 1100 0000 0000 0000  ................
-000011d0: 6900 0000 0000 0000 5c04 0000 0000 0000  i.......\.......
-000011e0: 0100 0000 0000 0000 1200 0000 0000 0000  ................
-000011f0: 5500 0000 0000 0000 c504 0000 0000 0000  U...............
-00001200: 0100 0000 0000 0000 0300 0000 0000 0000  ................
-00001210: 4800 0000 0000 0000 1a05 0000 0000 0000  H...............
-00001220: 0100 0000 0000 0000 0000 0000 0000 0000  ................
-00001230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00002000: 6164 0000 0100 0000 9501 0000 0010 0000  ad..............
-00002010: 5e00 0000 0000 0000 ee0f 0000 ed0f 0000  ^...............
-00002020: a20f 0000 a10f 0000 4f0f 0000 f80e 0000  ........O.......
-00002030: a30e 0000 540e 0000 460e 0000 420e 0000  ....T...F...B...
-00002040: 410e 0000 2e0e 0000 2d0e 0000 0e0e 0000  A.......-.......
-00002050: f30d 0000 d90d 0000 c00d 0000 be0d 0000  ................
-00002060: a20d 0000 860d 0000 6c0d 0000 5e0d 0000  ........l...^...
-00002070: 3e0d 0000 2c0d 0000 2a0d 0000 f30c 0000  >...,...*.......
-00002080: c10c 0000 9b0c 0000 9a0c 0000 990c 0000  ................
-00002090: 880c 0000 4b0c 0000 4a0c 0000 f30b 0000  ....K...J.......
-000020a0: 9f0b 0000 480b 0000 470b 0000 f00a 0000  ....H...G.......
-000020b0: 990a 0000 450a 0000 2f0a 0000 2e0a 0000  ....E.../.......
-000020c0: d809 0000 8309 0000 2f09 0000 1809 0000  ......../.......
-000020d0: 1709 0000 be08 0000 6508 0000 2a08 0000  ........e...*...
-000020e0: 2208 0000 2108 0000 ec07 0000 d207 0000  "...!...........
-000020f0: ac07 0000 8807 0000 8707 0000 7507 0000  ............u...
-00002100: 5707 0000 1807 0000 1707 0000 be06 0000  W...............
-00002110: 6706 0000 5706 0000 4b06 0000 f705 0000  g...W...K.......
-00002120: f605 0000 e405 0000 c805 0000 8905 0000  ................
-00002130: 8805 0000 2f05 0000 d804 0000 c804 0000  ..../...........
-00002140: bc04 0000 6a04 0000 6904 0000 5704 0000  ....j...i...W...
-00002150: 2f04 0000 e003 0000 df03 0000 8c03 0000  /...............
-00002160: 3b03 0000 e702 0000 d702 0000 cb02 0000  ;...............
-00002170: 7602 0000 7502 0000 6302 0000 4702 0000  v...u...c...G...
-00002180: f101 0000 a801 0000 a701 0000 9501 0000  ................
-00002190: 0000 0000 0020 2020 2040 6c61 7a79 7072  .....    @lazypr
-000021a0: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-000021b0: 7265 7475 726e 2073 656c 662e 5f61 7373  return self._ass
-000021c0: 656d 626c 655f 6d61 7472 6978 2873 656c  emble_matrix(sel
-000021d0: 662e 5f6d 6561 7375 7265 732e 636f 6c75  f._measures.colu
-000021e0: 6d6e 5f69 6e64 6578 2e62 6c6f 636b 7329  mn_index.blocks)
-000021f0: 0020 2020 2020 2020 2022 2222 3244 206e  .        """2D n
-00002200: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
-00002210: 7920 6f66 2063 6f6c 756d 6e2d 696e 6465  y of column-inde
-00002220: 7820 2270 6572 6365 6e74 6167 6522 2066  x "percentage" f
-00002230: 6f72 2065 6163 6820 7461 626c 6520 6365  or each table ce
-00002240: 6c6c 2e22 2222 0020 2020 2064 6566 2063  ll.""".    def c
-00002250: 6f6c 756d 6e5f 696e 6465 7828 7365 6c66  olumn_index(self
-00002260: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-00002270: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-00002280: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
-00002290: 626c 655f 6d61 7472 6978 2873 656c 662e  ble_matrix(self.
-000022a0: 5f6d 6561 7375 7265 732e 636f 6c75 6d6e  _measures.column
-000022b0: 5f63 6f6d 7061 7261 626c 655f 636f 756e  _comparable_coun
-000022c0: 7473 2e62 6c6f 636b 7329 0020 2020 2020  ts.blocks).     
-000022d0: 2020 2022 2222 0020 2020 2020 2020 206e     """.        n
-000022e0: 702e 6e61 6e2e 0020 2020 2020 2020 2061  p.nan..        a
-000022f0: 7265 6e27 7420 7468 6520 7361 6d65 2e20  ren't the same. 
-00002300: 5468 6520 7661 6c75 6573 2061 6c6f 6e67  The values along
-00002310: 2074 6865 7365 2073 7562 746f 7461 6c20   these subtotal 
-00002320: 6469 6666 6572 656e 6365 7320 6172 6520  differences are 
-00002330: 6465 6669 6e65 6420 6173 0020 2020 2020  defined as.     
-00002340: 2020 2064 6966 6665 7265 6e63 6520 6265     difference be
-00002350: 6361 7573 6520 7468 6573 6520 6172 6520  cause these are 
-00002360: 6e6f 7420 636f 6e73 6964 6572 6564 2063  not considered c
-00002370: 6f6d 7061 7261 626c 6520 7369 6e63 6520  omparable since 
-00002380: 7468 6569 7220 6261 7365 7300 2020 2020  their bases.    
-00002390: 2020 2020 436f 6d70 6172 6162 6c65 2069      Comparable i
-000023a0: 6e20 7468 6520 2263 6f6c 756d 6e22 2064  n the "column" d
-000023b0: 696d 656e 7369 6f6e 206d 6561 6e73 2074  imension means t
-000023c0: 6861 7420 6974 2773 206e 6f74 2061 2063  hat it's not a c
-000023d0: 6f6c 756d 6e20 7375 6274 6f74 616c 0000  olumn subtotal..
-000023e0: 2020 2020 2020 2020 2222 2232 4420 6e70          """2D np
-000023f0: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
-00002400: 206f 6620 636f 756e 7473 2063 6f6d 7061   of counts compa
-00002410: 7261 626c 6520 696e 2074 6865 2063 6f6c  rable in the col
-00002420: 756d 6e20 6469 6d65 6e73 696f 6e2e 0020  umn dimension.. 
-00002430: 2020 2064 6566 2063 6f6c 756d 6e5f 636f     def column_co
-00002440: 6d70 6172 6162 6c65 5f63 6f75 6e74 7328  mparable_counts(
-00002450: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-00002460: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-00002470: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
-00002480: 696d 656e 7369 6f6e 5f63 6f64 6573 2873  imension_codes(s
-00002490: 656c 662e 5f63 6f6c 756d 6e73 5f64 696d  elf._columns_dim
-000024a0: 656e 7369 6f6e 2c20 7365 6c66 2e5f 636f  ension, self._co
-000024b0: 6c75 6d6e 5f6f 7264 6572 2900 2020 2020  lumn_order).    
-000024c0: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-000024d0: 636f 6c75 6d6e 2e00 2020 2020 2020 2020  column..        
-000024e0: 696e 2074 6865 2073 6571 7565 6e63 6520  in the sequence 
-000024f0: 616e 6420 636f 6465 7320 6172 6520 6f72  and codes are or
-00002500: 6465 7265 6420 746f 2063 6f72 7265 7370  dered to corresp
-00002510: 6f6e 6420 7769 7468 2074 6865 6972 2072  ond with their r
-00002520: 6573 7065 6374 6976 6520 6461 7461 0020  espective data. 
-00002530: 2020 2020 2020 2054 6865 7365 2061 7265         These are
-00002540: 2073 7569 7461 626c 6520 666f 7220 7573   suitable for us
-00002550: 6520 6173 2063 6f6c 756d 6e20 6865 6164  e as column head
-00002560: 696e 6773 3b20 636f 6465 7320 666f 7220  ings; codes for 
-00002570: 7375 6274 6f74 616c 2063 6f6c 756d 6e73  subtotal columns
-00002580: 2061 7070 6561 7200 0020 2020 2020 2020   appear..       
-00002590: 2022 2222 3144 2069 6e74 206e 6461 7272   """1D int ndarr
-000025a0: 6179 206f 6620 636f 6c75 6d6e 2063 6f64  ay of column cod
-000025b0: 6573 2066 6f72 2065 6163 6820 6d61 7472  es for each matr
-000025c0: 6978 2072 6f77 2e00 2020 2020 6465 6620  ix row..    def 
-000025d0: 636f 6c75 6d6e 5f63 6f64 6573 2873 656c  column_codes(sel
-000025e0: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-000025f0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-00002600: 6574 7572 6e20 7365 6c66 2e5f 6469 6d65  eturn self._dime
-00002610: 6e73 696f 6e5f 616c 6961 7365 7328 7365  nsion_aliases(se
-00002620: 6c66 2e5f 636f 6c75 6d6e 735f 6469 6d65  lf._columns_dime
-00002630: 6e73 696f 6e2c 2073 656c 662e 5f63 6f6c  nsion, self._col
-00002640: 756d 6e5f 6f72 6465 7229 0020 2020 2020  umn_order).     
-00002650: 2020 2022 2222 0020 2020 2020 2020 2063     """.        c
-00002660: 6f6c 756d 6e2e 0020 2020 2020 2020 2069  olumn..        i
-00002670: 6e20 7468 6520 7365 7175 656e 6365 2061  n the sequence a
-00002680: 6e64 2061 6c69 6173 2061 7265 206f 7264  nd alias are ord
-00002690: 6572 6564 2074 6f20 636f 7272 6573 706f  ered to correspo
-000026a0: 6e64 2077 6974 6820 7468 6569 7220 7265  nd with their re
-000026b0: 7370 6563 7469 7665 2064 6174 6100 2020  spective data.  
-000026c0: 2020 2020 2020 5468 6573 6520 6172 6520        These are 
-000026d0: 7375 6974 6162 6c65 2066 6f72 2075 7365  suitable for use
-000026e0: 2061 7320 636f 6c75 6d6e 2068 6561 6469   as column headi
-000026f0: 6e67 733b 2061 6c69 6173 2066 6f72 2073  ngs; alias for s
-00002700: 7562 746f 7461 6c20 636f 6c75 6d6e 7320  ubtotal columns 
-00002710: 6170 7065 6172 0000 2020 2020 2020 2020  appear..        
-00002720: 2222 2231 4420 7374 7220 6e64 6172 7261  """1D str ndarra
-00002730: 7920 6f66 2063 6f6c 756d 6e20 616c 6961  y of column alia
-00002740: 7320 666f 7220 6561 6368 206d 6174 7269  s for each matri
-00002750: 7820 726f 772e 0020 2020 2064 6566 2063  x row..    def c
-00002760: 6f6c 756d 6e5f 616c 6961 7365 7328 7365  olumn_aliases(se
-00002770: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-00002780: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00002790: 7365 6c66 2e5f 736c 6963 655f 6964 7820  self._slice_idx 
-000027a0: 3d20 736c 6963 655f 6964 7800 2020 2020  = slice_idx.    
-000027b0: 2020 2020 7365 6c66 2e5f 6469 6d65 6e73      self._dimens
-000027c0: 696f 6e73 203d 2064 696d 656e 7369 6f6e  ions = dimension
-000027d0: 7300 2020 2020 2020 2020 7365 6c66 2e5f  s.        self._
-000027e0: 6375 6265 203d 2063 7562 6500 2020 2020  cube = cube.    
-000027f0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00002800: 662c 2063 7562 652c 2064 696d 656e 7369  f, cube, dimensi
-00002810: 6f6e 732c 2073 6c69 6365 5f69 6478 293a  ons, slice_idx):
-00002820: 0000 2020 2020 2222 2200 2020 2020 6469  ..    """.    di
-00002830: 6d65 6e73 696f 6e29 2077 6865 6e20 7468  mension) when th
-00002840: 6520 6375 6265 2068 6173 206d 6f72 6520  e cube has more 
-00002850: 7468 616e 2074 776f 2064 696d 656e 7369  than two dimensi
-00002860: 6f6e 732e 0020 2020 206d 6174 7269 782e  ons..    matrix.
-00002870: 2054 6865 7265 2069 7320 6f6e 6520 736c   There is one sl
-00002880: 6963 6520 666f 7220 6561 6368 2065 6c65  ice for each ele
-00002890: 6d65 6e74 206f 6620 7468 6520 6669 7273  ment of the firs
-000028a0: 7420 6375 6265 2064 696d 656e 7369 6f6e  t cube dimension
-000028b0: 2028 7468 6520 2274 6162 6c65 2200 2020   (the "table".  
-000028c0: 2020 6073 6c69 6365 5f69 6478 6020 6973    `slice_idx` is
-000028d0: 2061 6e20 696e 7420 6f66 6673 6574 2069   an int offset i
-000028e0: 6e64 6963 6174 696e 6720 7768 6963 6820  ndicating which 
-000028f0: 706f 7274 696f 6e20 6f66 2060 6375 6265  portion of `cube
-00002900: 6020 6461 7461 2074 6f20 7573 6520 666f  ` data to use fo
-00002910: 7220 7468 6973 0000 2020 2020 7768 6963  r this..    whic
-00002920: 6820 7468 6579 2064 6572 6976 652e 0020  h they derive.. 
-00002930: 2020 2068 6176 6520 7472 616e 7366 6f72     have transfor
-00002940: 6d61 7469 6f6e 7320 6170 706c 6965 6420  mations applied 
-00002950: 7468 6174 2061 7265 206e 6f74 2070 7265  that are not pre
-00002960: 7365 6e74 206f 6e20 7468 6520 6063 7562  sent on the `cub
-00002970: 6560 2064 696d 656e 7369 6f6e 7320 6672  e` dimensions fr
-00002980: 6f6d 0020 2020 206f 626a 6563 7473 2e20  om.    objects. 
-00002990: 5468 6573 6520 6172 6520 616c 7761 7973  These are always
-000029a0: 2074 6865 206c 6173 7420 7477 6f20 6469   the last two di
-000029b0: 6d65 6e73 696f 6e73 206f 6620 6063 7562  mensions of `cub
-000029c0: 6560 2062 7574 206d 6179 2061 6e64 206f  e` but may and o
-000029d0: 6674 656e 2064 6f00 2020 2020 6064 696d  ften do.    `dim
-000029e0: 656e 7369 6f6e 7360 2069 7320 6120 7061  ensions` is a pa
-000029f0: 6972 2028 322d 7475 706c 6529 206f 6620  ir (2-tuple) of 
-00002a00: 2872 6f77 735f 6469 6d65 6e73 696f 6e2c  (rows_dimension,
-00002a10: 2063 6f6c 756d 6e73 5f64 696d 656e 7369   columns_dimensi
-00002a20: 6f6e 2920 4469 6d65 6e73 696f 6e00 0020  on) Dimension.. 
-00002a30: 2020 2060 5f53 6c69 6365 6020 6f62 6a65     `_Slice` obje
-00002a40: 6374 292e 0020 2020 206d 6f72 6520 7468  ct)..    more th
-00002a50: 616e 2032 2d64 696d 656e 7369 6f6e 616c  an 2-dimensional
-00002a60: 2c20 6974 2069 7320 2273 6c69 6365 6422  , it is "sliced"
-00002a70: 2061 6e64 2065 6163 6820 736c 6963 6520   and each slice 
-00002a80: 6765 7473 2069 7473 206f 776e 206d 6174  gets its own mat
-00002a90: 7269 7820 2861 6e64 0020 2020 206e 6f74  rix (and.    not
-00002aa0: 2061 6c6c 2074 6865 2064 6174 6120 696e   all the data in
-00002ab0: 2060 6375 6265 6020 7769 6c6c 206e 6563   `cube` will nec
-00002ac0: 6573 7361 7269 6c79 2062 6520 7573 6564  essarily be used
-00002ad0: 2062 7920 7468 6973 206d 6174 7269 782e   by this matrix.
-00002ae0: 2057 6865 6e20 6063 7562 6560 2069 7300   When `cube` is.
-00002af0: 2020 2020 6063 7562 6560 2069 7320 7468      `cube` is th
-00002b00: 6520 6063 722e 6375 6265 2e43 7562 6560  e `cr.cube.Cube`
-00002b10: 206f 626a 6563 7420 636f 6e74 6169 6e69   object containi
-00002b20: 6e67 2074 6865 2064 6174 6120 666f 7220  ng the data for 
-00002b30: 7468 6973 206d 6174 7269 782e 204e 6f74  this matrix. Not
-00002b40: 6520 7468 6174 0000 2020 2020 7768 6963  e that..    whic
-00002b50: 6820 6973 2073 696d 696c 6172 6c79 2066  h is similarly f
-00002b60: 6f72 6d65 6420 6672 6f6d 2069 6e73 6572  ormed from inser
-00002b70: 7465 6420 7661 6c75 6573 2c20 6f72 6465  ted values, orde
-00002b80: 7265 642c 2061 6e64 2076 616c 7565 2068  red, and value h
-00002b90: 6964 696e 6720 6170 706c 6965 642e 0020  iding applied.. 
-00002ba0: 2020 2074 7261 6e73 666f 726d 7320 6170     transforms ap
-00002bb0: 706c 6965 6420 746f 2074 6865 2064 696d  plied to the dim
-00002bc0: 656e 7369 6f6e 732e 2041 6e20 6173 7365  ensions. An asse
-00002bd0: 6d62 6c65 6420 6d61 7267 696e 2069 7320  mbled margin is 
-00002be0: 6f66 7465 6e20 6120 3144 206e 6461 7272  often a 1D ndarr
-00002bf0: 6179 0020 2020 2041 6e20 6173 7365 6d62  ay.    An assemb
-00002c00: 6c65 6420 6d61 7472 6978 2069 7320 6120  led matrix is a 
-00002c10: 3244 206e 6461 7272 6179 2072 6566 6c65  2D ndarray refle
-00002c20: 6374 696e 6720 616c 6c20 6f72 6465 7269  cting all orderi
-00002c30: 6e67 2c20 696e 7365 7274 696f 6e2c 2061  ng, insertion, a
-00002c40: 6e64 2068 6964 696e 6700 0020 2020 2022  nd hiding..    "
-00002c50: 2222 5072 6f76 6964 6573 206d 6561 7375  ""Provides measu
-00002c60: 7265 2061 6e64 206d 6172 6769 6e20 6d65  re and margin me
-00002c70: 7468 6f64 7320 666f 7220 6120 6375 6265  thods for a cube
-00002c80: 2d73 6c69 6365 2e00 636c 6173 7320 4173  -slice..class As
-00002c90: 7365 6d62 6c65 723a 0000 0066 726f 6d20  sembler:...from 
-00002ca0: 6372 2e63 7562 652e 7574 696c 2069 6d70  cr.cube.util imp
-00002cb0: 6f72 7420 6c61 7a79 7072 6f70 6572 7479  ort lazyproperty
-00002cc0: 0066 726f 6d20 6372 2e63 7562 652e 6d61  .from cr.cube.ma
-00002cd0: 7472 6978 2e73 7562 746f 7461 6c73 2069  trix.subtotals i
-00002ce0: 6d70 6f72 7420 5375 6d53 7562 746f 7461  mport SumSubtota
-00002cf0: 6c73 0066 726f 6d20 6372 2e63 7562 652e  ls.from cr.cube.
-00002d00: 6d61 7472 6978 2e6d 6561 7375 7265 2069  matrix.measure i
-00002d10: 6d70 6f72 7420 5365 636f 6e64 4f72 6465  mport SecondOrde
-00002d20: 724d 6561 7375 7265 7300 2900 2020 2020  rMeasures.).    
-00002d30: 4d45 4153 5552 4520 6173 204d 2c00 2020  MEASURE as M,.  
-00002d40: 2020 4d41 5247 494e 414c 5f4f 5249 454e    MARGINAL_ORIEN
-00002d50: 5441 5449 4f4e 2061 7320 4d4f 2c00 2020  TATION as MO,.  
-00002d60: 2020 4d41 5247 494e 414c 2c00 2020 2020    MARGINAL,.    
-00002d70: 4449 4d45 4e53 494f 4e5f 5459 5045 2061  DIMENSION_TYPE a
-00002d80: 7320 4454 2c00 2020 2020 434f 4c4c 4154  s DT,.    COLLAT
-00002d90: 494f 4e5f 4d45 5448 4f44 2061 7320 434d  ION_METHOD as CM
-00002da0: 2c00 6672 6f6d 2063 722e 6375 6265 2e65  ,.from cr.cube.e
-00002db0: 6e75 6d73 2069 6d70 6f72 7420 2800 2900  nums import (.).
-00002dc0: 2020 2020 536f 7274 4279 5661 6c75 6543      SortByValueC
-00002dd0: 6f6c 6c61 746f 722c 0020 2020 2050 6179  ollator,.    Pay
-00002de0: 6c6f 6164 4f72 6465 7243 6f6c 6c61 746f  loadOrderCollato
-00002df0: 722c 0020 2020 2045 7870 6c69 6369 744f  r,.    ExplicitO
-00002e00: 7264 6572 436f 6c6c 6174 6f72 2c00 6672  rderCollator,.fr
-00002e10: 6f6d 2063 722e 6375 6265 2e63 6f6c 6c61  om cr.cube.colla
-00002e20: 746f 7220 696d 706f 7274 2028 0000 696d  tor import (..im
-00002e30: 706f 7274 206e 756d 7079 2061 7320 6e70  port numpy as np
-00002e40: 0000 2222 2200 6f62 7365 7276 6174 696f  ..""".observatio
-00002e50: 6e73 2e00 636f 6c75 6d6e 7320 7468 6174  ns..columns that
-00002e60: 2061 7265 2065 6974 6865 7220 6869 6464   are either hidd
-00002e70: 656e 2062 7920 7468 6520 7573 6572 206f  en by the user o
-00002e80: 7220 2270 7275 6e65 6422 2062 6563 6175  r "pruned" becau
-00002e90: 7365 2074 6865 7920 636f 6e74 6169 6e20  se they contain 
-00002ea0: 6e6f 0072 6f77 7320 616e 6420 636f 6c75  no.rows and colu
-00002eb0: 6d6e 7320 6163 636f 7264 696e 6720 746f  mns according to
-00002ec0: 2074 6865 2064 696d 656e 7369 6f6e 202a   the dimension *
-00002ed0: 6f72 6465 722a 2074 7261 6e73 666f 726d  order* transform
-00002ee0: 732c 2061 6e64 2074 6f20 6869 6465 2072  s, and to hide r
-00002ef0: 6f77 7320 616e 6400 7061 7274 6963 756c  ows and.particul
-00002f00: 6172 206d 6561 7375 7265 2066 726f 6d20  ar measure from 
-00002f10: 7468 6520 6261 7365 206d 6561 7375 7265  the base measure
-00002f20: 2076 616c 7565 7320 616e 6420 696e 7365   values and inse
-00002f30: 7274 6564 2073 7562 746f 7461 6c73 2c20  rted subtotals, 
-00002f40: 746f 2072 656f 7264 6572 2074 6865 0049  to reorder the.I
-00002f50: 7473 206e 616d 6520 6465 7269 7665 7320  ts name derives 
-00002f60: 6672 6f6d 2069 7473 2072 6f6c 6520 746f  from its role to
-00002f70: 2022 6173 7365 6d62 6c65 2220 6120 6669   "assemble" a fi
-00002f80: 6e69 7368 6564 2032 4420 6172 7261 7920  nished 2D array 
-00002f90: 2822 6d61 7472 6978 2229 2066 6f72 2061  ("matrix") for a
-00002fa0: 0000 2222 2254 6865 2060 4173 7365 6d62  .."""The `Assemb
-00002fb0: 6c65 7260 206f 626a 6563 7420 7072 6f76  ler` object prov
-00002fc0: 6964 6573 2074 6865 2065 7874 6572 6e61  ides the externa
-00002fd0: 6c20 696e 7465 7266 6163 6520 666f 7220  l interface for 
-00002fe0: 7468 6973 206d 6f64 756c 652e 0000 2320  this module...# 
-00002ff0: 656e 636f 6469 6e67 3a20 7574 662d 3800  encoding: utf-8.
-00003000: 6164 0000 0304 0000 3f05 0000 0010 0000  ad......?.......
-00003010: 4800 0000 0000 0000 cd0f 0000 980f 0000  H...............
-00003020: 970f 0000 960f 0000 5c0f 0000 0e0f 0000  ........\.......
-00003030: 0d0f 0000 fb0e 0000 dc0e 0000 950e 0000  ................
-00003040: 940e 0000 400e 0000 f10d 0000 e50d 0000  ....@...........
-00003050: a90d 0000 a80d 0000 960d 0000 760d 0000  ............v...
-00003060: 280d 0000 270d 0000 d20c 0000 b90c 0000  (...'...........
-00003070: ad0c 0000 700c 0000 6f0c 0000 6e0c 0000  ....p...o...n...
-00003080: 310c 0000 ec0b 0000 eb0b 0000 970b 0000  1...............
-00003090: 410b 0000 0f0b 0000 070b 0000 060b 0000  A...............
-000030a0: f40a 0000 d50a 0000 8e0a 0000 8d0a 0000  ................
-000030b0: 390a 0000 ea09 0000 de09 0000 b609 0000  9...............
-000030c0: b509 0000 a309 0000 8a09 0000 5109 0000  ............Q...
-000030d0: 2409 0000 0609 0000 d308 0000 a008 0000  $...............
-000030e0: 5f08 0000 2b08 0000 e907 0000 a707 0000  _...+...........
-000030f0: 6f07 0000 5707 0000 5607 0000 3007 0000  o...W...V...0...
-00003100: 0907 0000 b906 0000 ab06 0000 aa06 0000  ................
-00003110: 6306 0000 6206 0000 5006 0000 3006 0000  c...b...P...0...
-00003120: e205 0000 e105 0000 8c05 0000 7305 0000  ............s...
-00003130: 6705 0000 3f05 0000 3e05 0000 0000 0000  g...?...>.......
-00003140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003530: 0000 0000 0000 0000 0000 0000 0000 0020  ............... 
-00003540: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00003550: 6c66 2e5f 6d61 7267 696e 616c 2e62 6c6f  lf._marginal.blo
-00003560: 636b 735b 315d 0020 2020 2020 2020 2022  cks[1].        "
-00003570: 2222 0020 2020 2020 2020 2069 6e73 6572  "".        inser
-00003580: 7469 6f6e 206f 7264 6572 2e00 2020 2020  tion order..    
-00003590: 2020 2020 5468 6572 6520 6973 206f 6e65      There is one
-000035a0: 2076 616c 7565 2070 6572 2072 6f77 2073   value per row s
-000035b0: 7562 746f 7461 6c20 616e 6420 7661 6c75  ubtotal and valu
-000035c0: 6573 2061 7070 6561 7220 696e 2070 6179  es appear in pay
-000035d0: 6c6f 6164 2028 6469 6d65 6e73 696f 6e29  load (dimension)
-000035e0: 0000 2020 2020 2020 2020 2222 2253 6571  ..        """Seq
-000035f0: 7565 6e63 6520 6f66 2072 6f77 2d73 7562  uence of row-sub
-00003600: 746f 7461 6c20 7661 6c75 6573 2074 6861  total values tha
-00003610: 7420 636f 6e74 7269 6275 7465 2074 6f20  t contribute to 
-00003620: 7468 6520 736f 7274 2062 6173 6973 2e00  the sort basis..
-00003630: 2020 2020 6465 6620 5f73 7562 746f 7461      def _subtota
-00003640: 6c5f 7661 6c75 6573 2873 656c 6629 3a00  l_values(self):.
-00003650: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00003660: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-00003670: 6e20 6765 7461 7474 7228 7365 6c66 2e5f  n getattr(self._
-00003680: 7365 636f 6e64 5f6f 7264 6572 5f6d 6561  second_order_mea
-00003690: 7375 7265 732c 206d 6172 6769 6e61 6c5f  sures, marginal_
-000036a0: 7072 6f70 6e61 6d65 2900 0020 2020 2020  propname)..     
-000036b0: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-000036c0: 2020 2020 2020 2020 2066 2273 6f72 742d           f"sort-
-000036d0: 6279 2d76 616c 7565 2066 6f72 206d 6172  by-value for mar
-000036e0: 6769 6e61 6c20 277b 6d61 7267 696e 616c  ginal '{marginal
-000036f0: 7d27 2069 7320 6e6f 7420 7965 7420 7375  }' is not yet su
-00003700: 7070 6f72 7465 6422 0020 2020 2020 2020  pported".       
-00003710: 2020 2020 2072 6169 7365 204e 6f74 496d       raise NotIm
-00003720: 706c 656d 656e 7465 6445 7272 6f72 2800  plementedError(.
-00003730: 2020 2020 2020 2020 6966 206d 6172 6769          if margi
-00003740: 6e61 6c5f 7072 6f70 6e61 6d65 2069 7320  nal_propname is 
-00003750: 4e6f 6e65 3a00 0020 2020 2020 2020 207d  None:..        }
-00003760: 2e67 6574 286d 6172 6769 6e61 6c29 0020  .get(marginal). 
-00003770: 2020 2020 2020 2020 2020 204d 4152 4749             MARGI
-00003780: 4e41 4c2e 5343 414c 455f 4d45 4449 414e  NAL.SCALE_MEDIAN
-00003790: 3a20 2272 6f77 735f 7363 616c 655f 6d65  : "rows_scale_me
-000037a0: 6469 616e 222c 0020 2020 2020 2020 2020  dian",.         
-000037b0: 2020 204d 4152 4749 4e41 4c2e 5343 414c     MARGINAL.SCAL
-000037c0: 455f 4d45 414e 5f53 5444 4552 523a 2022  E_MEAN_STDERR: "
-000037d0: 726f 7773 5f73 6361 6c65 5f6d 6561 6e5f  rows_scale_mean_
-000037e0: 7374 6465 7272 222c 0020 2020 2020 2020  stderr",.       
-000037f0: 2020 2020 204d 4152 4749 4e41 4c2e 5343       MARGINAL.SC
-00003800: 414c 455f 4d45 414e 5f53 5444 4445 563a  ALE_MEAN_STDDEV:
-00003810: 2022 726f 7773 5f73 6361 6c65 5f6d 6561   "rows_scale_mea
-00003820: 6e5f 7374 6464 6576 222c 0020 2020 2020  n_stddev",.     
-00003830: 2020 2020 2020 204d 4152 4749 4e41 4c2e         MARGINAL.
-00003840: 5343 414c 455f 4d45 414e 3a20 2272 6f77  SCALE_MEAN: "row
-00003850: 735f 7363 616c 655f 6d65 616e 222c 0020  s_scale_mean",. 
-00003860: 2020 2020 2020 2020 2020 204d 4152 4749             MARGI
-00003870: 4e41 4c2e 4d41 5247 494e 5f50 524f 504f  NAL.MARGIN_PROPO
-00003880: 5254 494f 4e3a 2022 726f 7773 5f74 6162  RTION: "rows_tab
-00003890: 6c65 5f70 726f 706f 7274 696f 6e22 2c00  le_proportion",.
-000038a0: 2020 2020 2020 2020 2020 2020 4d41 5247              MARG
-000038b0: 494e 414c 2e4d 4152 4749 4e3a 2022 726f  INAL.MARGIN: "ro
-000038c0: 7773 5f77 6569 6768 7465 645f 6261 7365  ws_weighted_base
-000038d0: 222c 0020 2020 2020 2020 2020 2020 204d  ",.            M
-000038e0: 4152 4749 4e41 4c2e 4241 5345 3a20 2272  ARGINAL.BASE: "r
-000038f0: 6f77 735f 756e 7765 6967 6874 6564 5f62  ows_unweighted_b
-00003900: 6173 6522 2c00 2020 2020 2020 2020 6d61  ase",.        ma
-00003910: 7267 696e 616c 5f70 726f 706e 616d 6520  rginal_propname 
-00003920: 3d20 7b00 2020 2020 2020 2020 6d61 7267  = {.        marg
-00003930: 696e 616c 203d 2073 656c 662e 5f6f 7264  inal = self._ord
-00003940: 6572 5f73 7065 632e 6d61 7267 696e 616c  er_spec.marginal
-00003950: 0020 2020 2020 2020 2022 2222 4d61 7267  .        """Marg
-00003960: 696e 616c 206f 626a 6563 7420 7072 6f76  inal object prov
-00003970: 6964 696e 6720 7661 6c75 6573 2066 6f72  iding values for
-00003980: 2073 6f72 742e 2222 2200 2020 2020 6465   sort.""".    de
-00003990: 6620 5f6d 6172 6769 6e61 6c28 7365 6c66  f _marginal(self
-000039a0: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-000039b0: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-000039c0: 7475 726e 2073 656c 662e 5f6d 6172 6769  turn self._margi
-000039d0: 6e61 6c2e 626c 6f63 6b73 5b30 5d00 2020  nal.blocks[0].  
-000039e0: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-000039f0: 2020 6f72 6465 722e 2054 6865 7365 2061    order. These a
-00003a00: 7265 206f 6e6c 7920 7468 6520 2262 6173  re only the "bas
-00003a10: 6522 2076 616c 7565 7320 616e 6420 646f  e" values and do
-00003a20: 206e 6f74 2069 6e63 6c75 6465 2069 6e73   not include ins
-00003a30: 6572 7469 6f6e 732e 0020 2020 2020 2020  ertions..       
-00003a40: 2054 6865 7265 2069 7320 6f6e 6520 7661   There is one va
-00003a50: 6c75 6520 7065 7220 726f 7720 616e 6420  lue per row and 
-00003a60: 7661 6c75 6573 2061 7070 6561 7220 696e  values appear in
-00003a70: 2070 6179 6c6f 6164 2028 6469 6d65 6e73   payload (dimens
-00003a80: 696f 6e29 2065 6c65 6d65 6e74 0000 2020  ion) element..  
-00003a90: 2020 2020 2020 2222 2253 6571 7565 6e63        """Sequenc
-00003aa0: 6520 6f66 2062 6f64 7920 7661 6c75 6573  e of body values
-00003ab0: 2074 6861 7420 666f 726d 2074 6865 2062   that form the b
-00003ac0: 6173 6973 2066 6f72 2073 6f72 7420 6f72  asis for sort or
-00003ad0: 6465 722e 0020 2020 2064 6566 205f 656c  der..    def _el
-00003ae0: 656d 656e 745f 7661 6c75 6573 2873 656c  ement_values(sel
-00003af0: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-00003b00: 7065 7274 7900 0020 2020 2022 2222 0020  perty..    """. 
-00003b10: 2020 2061 206d 6174 7269 7820 6469 6d65     a matrix dime
-00003b20: 6e73 696f 6e20 6861 7320 616e 206f 7070  nsion has an opp
-00003b30: 6f73 696e 6720 6469 6d65 6e73 696f 6e2e  osing dimension.
-00003b40: 0020 2020 2063 6f6c 756d 6e2e 2041 6e20  .    column. An 
-00003b50: 6f70 706f 7369 6e67 2d6d 6172 6769 6e61  opposing-margina
-00003b60: 6c20 6f72 6465 7269 6e67 2069 7320 6f6e  l ordering is on
-00003b70: 6c79 2061 7661 696c 6162 6c65 206f 6e20  ly available on 
-00003b80: 6120 6d61 7472 6978 2c20 6265 6361 7573  a matrix, becaus
-00003b90: 6520 6f6e 6c79 0020 2020 2054 6869 7320  e only.    This 
-00003ba0: 776f 756c 6420 6265 206c 696b 6520 226f  would be like "o
-00003bb0: 7264 6572 2072 6f77 7320 696e 2064 6573  rder rows in des
-00003bc0: 6365 6e64 696e 6720 6f72 6465 7220 6279  cending order by
-00003bd0: 2076 616c 7565 206f 6620 726f 7773 2073   value of rows s
-00003be0: 6361 6c65 206d 6561 6e2e 0000 2020 2020  cale mean...    
-00003bf0: 2222 224f 7264 6572 7320 656c 656d 656e  """Orders elemen
-00003c00: 7473 2062 7920 7468 6520 7661 6c75 6573  ts by the values
-00003c10: 206f 6620 616e 206f 7070 6f73 696e 6720   of an opposing 
-00003c20: 6d61 7267 696e 616c 2076 6563 746f 722e  marginal vector.
-00003c30: 0063 6c61 7373 205f 536f 7274 526f 7773  .class _SortRows
-00003c40: 4279 4d61 7267 696e 616c 4865 6c70 6572  ByMarginalHelper
-00003c50: 285f 4261 7365 536f 7274 526f 7773 4279  (_BaseSortRowsBy
-00003c60: 5661 6c75 6548 656c 7065 7229 3a00 0000  ValueHelper):...
-00003c70: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00003c80: 702e 6172 7261 7928 7365 6c66 2e5f 6469  p.array(self._di
-00003c90: 6d65 6e73 696f 6e73 5b30 5d2e 7375 6274  mensions[0].subt
-00003ca0: 6f74 616c 5f6c 6162 656c 7329 0020 2020  otal_labels).   
-00003cb0: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00003cc0: 2069 6e73 6572 7469 6f6e 206f 7264 6572   insertion order
-00003cd0: 2e00 2020 2020 2020 2020 5468 6572 6520  ..        There 
-00003ce0: 6973 206f 6e65 2076 616c 7565 2070 6572  is one value per
-00003cf0: 2072 6f77 2073 7562 746f 7461 6c20 616e   row subtotal an
-00003d00: 6420 6c61 6265 6c73 2061 7070 6561 7220  d labels appear 
-00003d10: 696e 2070 6179 6c6f 6164 2028 6469 6d65  in payload (dime
-00003d20: 6e73 696f 6e29 0000 2020 2020 2020 2020  nsion)..        
-00003d30: 2222 2253 6571 7565 6e63 6520 6f66 2072  """Sequence of r
-00003d40: 6f77 2d73 7562 746f 7461 6c20 6c61 6265  ow-subtotal labe
-00003d50: 6c73 2074 6861 7420 636f 6e74 7269 6275  ls that contribu
-00003d60: 7465 2074 6f20 7468 6520 736f 7274 2062  te to the sort b
-00003d70: 6173 6973 2e00 2020 2020 6465 6620 5f73  asis..    def _s
-00003d80: 7562 746f 7461 6c5f 7661 6c75 6573 2873  ubtotal_values(s
-00003d90: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-00003da0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00003db0: 2072 6574 7572 6e20 6e70 2e61 7272 6179   return np.array
-00003dc0: 2873 656c 662e 5f64 696d 656e 7369 6f6e  (self._dimension
-00003dd0: 735b 305d 2e65 6c65 6d65 6e74 5f6c 6162  s[0].element_lab
-00003de0: 656c 7329 0020 2020 2020 2020 2022 2222  els).        """
-00003df0: 0020 2020 2020 2020 206f 7264 6572 2e20  .        order. 
-00003e00: 5468 6573 6520 6172 6520 6f6e 6c79 2074  These are only t
-00003e10: 6865 2022 6261 7365 2220 7661 6c75 6573  he "base" values
-00003e20: 2061 6e64 2064 6f20 6e6f 7420 696e 636c   and do not incl
-00003e30: 7564 6520 696e 7365 7274 696f 6e73 2e00  ude insertions..
-00003e40: 2020 2020 2020 2020 5468 6572 6520 6973          There is
-00003e50: 206f 6e65 2076 616c 7565 2070 6572 2072   one value per r
-00003e60: 6f77 2061 6e64 2076 616c 7565 7320 6170  ow and values ap
-00003e70: 7065 6172 2069 6e20 7061 796c 6f61 6420  pear in payload 
-00003e80: 2864 696d 656e 7369 6f6e 2920 656c 656d  (dimension) elem
-00003e90: 656e 7400 0020 2020 2020 2020 2022 2222  ent..        """
-00003ea0: 5365 7175 656e 6365 206f 6620 626f 6479  Sequence of body
-00003eb0: 206c 6162 656c 7320 7468 6174 2066 6f72   labels that for
-00003ec0: 6d20 7468 6520 6261 7369 7320 666f 7220  m the basis for 
-00003ed0: 736f 7274 206f 7264 6572 2e00 2020 2020  sort order..    
-00003ee0: 6465 6620 5f65 6c65 6d65 6e74 5f76 616c  def _element_val
-00003ef0: 7565 7328 7365 6c66 293a 0020 2020 2040  ues(self):.    @
-00003f00: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00003f10: 2020 2222 224f 7264 6572 7320 656c 656d    """Orders elem
-00003f20: 656e 7473 2062 7920 7468 6520 7661 6c75  ents by the valu
-00003f30: 6573 206f 6620 7468 6569 7220 6c61 6265  es of their labe
-00003f40: 6c73 2028 6672 6f6d 2074 6865 2064 696d  ls (from the dim
-00003f50: 656e 7369 6f6e 292e 2222 2200 636c 6173  ension).""".clas
-00003f60: 7320 5f53 6f72 7452 6f77 7342 794c 6162  s _SortRowsByLab
-00003f70: 656c 4865 6c70 6572 285f 4261 7365 536f  elHelper(_BaseSo
-00003f80: 7274 526f 7773 4279 5661 6c75 6548 656c  rtRowsByValueHel
-00003f90: 7065 7229 3a00 0000 2020 2020 2020 2020  per):...        
-00003fa0: 7265 7475 726e 2069 6e74 6572 7365 6374  return intersect
-00003fb0: 696f 6e73 5b3a 2c20 7365 6c66 2e5f 696e  ions[:, self._in
-00003fc0: 7365 7274 696f 6e5f 6964 785d 0020 2020  sertion_idx].   
-00003fd0: 2020 2020 2069 6e74 6572 7365 6374 696f       intersectio
-00003fe0: 6e73 203d 2073 656c 662e 5f6d 6561 7375  ns = self._measu
-00003ff0: 7265 2e62 6c6f 636b 735b 315d 5b31 5d00  re.blocks[1][1].
-00004000: 6164 0000 8903 0000 9d04 0000 0010 0000  ad..............
-00004010: 3e00 0000 0000 0000 b30f 0000 b20f 0000  >...............
-00004020: a00f 0000 810f 0000 380f 0000 370f 0000  ........8...7...
-00004030: e00e 0000 8a0e 0000 330e 0000 270e 0000  ........3...'...
-00004040: db0d 0000 da0d 0000 c80d 0000 a00d 0000  ................
-00004050: 4b0d 0000 f60c 0000 f50c 0000 e30c 0000  K...............
-00004060: c60c 0000 790c 0000 780c 0000 240c 0000  ....y...x...$...
-00004070: 180c 0000 ce0b 0000 cd0b 0000 bb0b 0000  ................
-00004080: a00b 0000 4a0b 0000 020b 0000 010b 0000  ....J...........
-00004090: ef0a 0000 cb0a 0000 730a 0000 220a 0000  ........s..."...
-000040a0: 210a 0000 0f0a 0000 ed09 0000 9b09 0000  !...............
-000040b0: 4c09 0000 4b09 0000 3909 0000 2009 0000  L...K...9... ...
-000040c0: d008 0000 7c08 0000 2e08 0000 d707 0000  ....|...........
-000040d0: 9807 0000 6b07 0000 6a07 0000 3807 0000  ....k...j...8...
-000040e0: ec06 0000 eb06 0000 d906 0000 b506 0000  ................
-000040f0: 6506 0000 2e06 0000 fb05 0000 e505 0000  e...............
-00004100: 9405 0000 4405 0000 f404 0000 9d04 0000  ....D...........
-00004110: 5104 0000 7204 0000 7104 0000 5f04 0000  Q...r...q..._...
-00004120: 3204 0000 dd03 0000 dc03 0000 8b03 0000  2...............
-00004130: 3b03 0000 2f03 0000 f802 0000 df02 0000  ;.../...........
-00004140: d102 0000 8b02 0000 6002 0000 5202 0000  ........`...R...
-00004150: 4802 0000 4702 0000 3502 0000 1a02 0000  H...G...5.......
-00004160: c901 0000 c801 0000 7001 0000 7501 0000  ........p...u...
-00004170: 2020 2020 2020 2020 5468 6973 2076 616c          This val
-00004180: 7565 2069 7320 6120 3244 2061 7272 6179  ue is a 2D array
-00004190: 2069 6620 6f6e 6520 6f72 2062 6f74 6820   if one or both 
-000041a0: 6f66 2074 6865 2073 6c69 6365 2064 696d  of the slice dim
-000041b0: 656e 7369 6f6e 7320 6172 6520 4d52 2e20  ensions are MR. 
-000041c0: 5468 6973 2069 7300 0020 2020 2020 2020  This is..       
-000041d0: 2022 2222 3144 2f32 4420 6e70 2e66 6c6f   """1D/2D np.flo
-000041e0: 6174 3634 206e 6461 7272 6179 206f 6620  at64 ndarray of 
-000041f0: 7765 6967 6874 6564 2d4e 2066 6f72 2065  weighted-N for e
-00004200: 6163 6820 636f 6c75 6d6e 206f 6620 7468  ach column of th
-00004210: 6973 2073 6c69 6365 2e00 2020 2020 6465  is slice..    de
-00004220: 6620 726f 7773 5f6d 6172 6769 6e28 7365  f rows_margin(se
-00004230: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-00004240: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-00004250: 2900 2020 2020 2020 2020 2020 2020 5d00  ).            ].
-00004260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004270: 666f 7220 6964 7820 696e 2073 656c 662e  for idx in self.
-00004280: 5f72 6f77 5f6f 7264 6572 0020 2020 2020  _row_order.     
-00004290: 2020 2020 2020 2020 2020 2028 656c 656d             (elem
-000042a0: 656e 7473 5b69 6478 5d2e 6e75 6d65 7269  ents[idx].numeri
-000042b0: 635f 7661 6c75 6520 6966 2069 6478 203e  c_value if idx >
-000042c0: 3d20 3020 656c 7365 206e 702e 6e61 6e29  = 0 else np.nan)
-000042d0: 0020 2020 2020 2020 2020 2020 205b 0020  .            [. 
-000042e0: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
-000042f0: 2e61 7272 6179 2800 2020 2020 2020 2020  .array(.        
-00004300: 656c 656d 656e 7473 203d 2073 656c 662e  elements = self.
-00004310: 5f72 6f77 735f 6469 6d65 6e73 696f 6e2e  _rows_dimension.
-00004320: 7661 6c69 645f 656c 656d 656e 7473 0020  valid_elements. 
-00004330: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-00004340: 2020 2073 7562 746f 7461 6c20 726f 7773     subtotal rows
-00004350: 2068 6176 6520 6120 7661 6c75 6520 6f66   have a value of
-00004360: 206e 702e 6e61 6e20 2873 7562 746f 7461   np.nan (subtota
-00004370: 6c73 2068 6176 6520 6e6f 206e 756d 6572  ls have no numer
-00004380: 6963 2076 616c 7565 292e 0020 2020 2020  ic value)..     
-00004390: 2020 2041 2076 616c 7565 206f 6620 6e70     A value of np
-000043a0: 2e6e 616e 2061 7070 6561 7273 2066 6f72  .nan appears for
-000043b0: 2061 2072 6f77 2065 6c65 6d65 6e74 2077   a row element w
-000043c0: 6974 686f 7574 2061 206e 756d 6572 6963  ithout a numeric
-000043d0: 2d76 616c 7565 2e20 416c 6c00 0020 2020  -value. All..   
-000043e0: 2020 2020 2022 2222 3144 206f 7074 696f       """1D optio
-000043f0: 6e61 6c20 6e70 2e69 6e74 2f66 6c6f 6174  nal np.int/float
-00004400: 3634 206e 6461 7272 6179 206f 6620 6e75  64 ndarray of nu
-00004410: 6d65 7269 632d 7661 6c75 6520 666f 7220  meric-value for 
-00004420: 6561 6368 2072 6f77 2065 6c65 6d65 6e74  each row element
-00004430: 2e00 2020 2020 6465 6620 726f 7773 5f64  ..    def rows_d
-00004440: 696d 656e 7369 6f6e 5f6e 756d 6572 6963  imension_numeric
-00004450: 5f20 2020 2020 2020 2020 2020 2028 656c  _            (el
-00004460: 656d 656e 7473 5b69 6478 5d2e 6669 6c6c  ements[idx].fill
-00004470: 2069 6620 6964 7820 3e3d 2030 2065 6c73   if idx >= 0 els
-00004480: 6520 7375 6274 6f74 616c 735b 6964 7820  e subtotals[idx 
-00004490: 2b20 6c65 6e28 7375 6274 6f5d 2e20 2020  + len(subto].   
-000044a0: 2020 2020 2020 2020 2028 656c 656d 656e           (elemen
-000044b0: 7473 5b69 6478 5d2e 6669 6c6c 2069 6620  ts[idx].fill if 
-000044c0: 6964 7820 3e3d 2030 2065 6c73 6520 7375  idx >= 0 else su
-000044d0: 6274 6f74 616c 735b 6964 7820 2b20 6c65  btotals[idx + le
-000044e0: 6e28 7375 6274 6f74 616c 7329 5d2e 6669  n(subtotals)].fi
-000044f0: 6c6c 2900 2020 2020 2020 2020 2020 2020  ll).            
-00004500: 2320 2d2d 2d7a 6572 6f20 6261 7365 6420  # ---zero based 
-00004510: 706f 7369 7469 7665 2069 6e64 6578 6573  positive indexes
-00004520: 2028 302c 2031 2c20 2e2e 2e20 6d20 2d20   (0, 1, ... m - 
-00004530: 3129 2069 2e65 2e20 2d69 6478 202d 2031  1) i.e. -idx - 1
-00004540: 2d2d 2d00 2020 2020 2020 2020 2020 2020  ---.            
-00004550: 2320 2d2d 2d54 6f20 696e 6465 7820 7468  # ---To index th
-00004560: 656d 2070 726f 7065 726c 792c 2077 6520  em properly, we 
-00004570: 6e65 6564 2074 6f20 636f 6e76 6572 7420  need to convert 
-00004580: 7468 6f73 6520 696e 6465 7865 7320 746f  those indexes to
-00004590: 2d2d 2d00 2020 2020 2020 2020 2020 2020  ---.            
-000045a0: 2320 2d2d 2d53 7562 746f 7461 6c73 2068  # ---Subtotals h
-000045b0: 6176 6520 6e65 6761 7469 7665 2073 6571  ave negative seq
-000045c0: 7565 6e74 6961 6c20 696e 6465 7865 7320  uential indexes 
-000045d0: 282d 312c 202d 322c 202e 2e2e 2c20 2d6d  (-1, -2, ..., -m
-000045e0: 292d 2d2d 0020 2020 2020 2020 2072 6574  )---.        ret
-000045f0: 7572 6e20 7475 706c 6528 0020 2020 2020  urn tuple(.     
-00004600: 2020 2073 7562 746f 7461 6c73 203d 2073     subtotals = s
-00004610: 656c 662e 5f72 6f77 735f 6469 6d65 6e73  elf._rows_dimens
-00004620: 696f 6e2e 7375 6274 6f74 616c 7300 2020  ion.subtotals.  
-00004630: 2020 2020 2020 656c 656d 656e 7473 203d        elements =
-00004640: 2073 656c 662e 5f72 6f77 735f 6469 6d65   self._rows_dime
-00004650: 6e73 696f 6e2e 7661 6c69 645f 656c 656d  nsion.valid_elem
-00004660: 656e 7473 0020 2020 2020 2020 2022 2222  ents.        """
-00004670: 7475 706c 6520 6f66 2052 4742 2073 7472  tuple of RGB str
-00004680: 206c 696b 6520 2223 6465 6630 3332 2220   like "#def032" 
-00004690: 6669 6c6c 2063 6f6c 6f72 2066 6f72 2065  fill color for e
-000046a0: 6163 6820 726f 7720 696e 2073 6c69 6365  ach row in slice
-000046b0: 2e22 2222 0020 2020 2064 6566 2072 6f77  .""".    def row
-000046c0: 735f 6469 6d65 6e73 696f 6e5f 6669 6c6c  s_dimension_fill
-000046d0: 7328 7365 6c66 293a 0020 2020 2040 6c61  s(self):.    @la
-000046e0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-000046f0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00004700: 5f61 7373 656d 626c 655f 6d61 7267 696e  _assemble_margin
-00004710: 616c 2873 656c 662e 5f6d 6561 7375 7265  al(self._measure
-00004720: 732e 726f 7773 5f75 6e77 6569 6768 7465  s.rows_unweighte
-00004730: 645f 6261 7365 2900 2020 2020 2020 2020  d_base).        
-00004740: 2320 2d2d 2d20 6f74 6865 7277 6973 6520  # --- otherwise 
-00004750: 726f 7773 2d62 6173 6520 6973 2061 2076  rows-base is a v
-00004760: 6563 746f 7220 2d2d 2d00 0020 2020 2020  ector ---..     
-00004770: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00004780: 6c66 2e72 6f77 5f75 6e77 6569 6768 7465  lf.row_unweighte
-00004790: 645f 6261 7365 7300 2020 2020 2020 2020  d_bases.        
-000047a0: 6966 206e 6f74 2073 656c 662e 5f6d 6561  if not self._mea
-000047b0: 7375 7265 732e 726f 7773 5f75 6e77 6569  sures.rows_unwei
-000047c0: 6768 7465 645f 6261 7365 2e69 735f 6465  ghted_base.is_de
-000047d0: 6669 6e65 643a 0020 2020 2020 2020 2023  fined:.        #
-000047e0: 202d 2d2d 2072 6571 7569 7265 2063 6861   --- require cha
-000047f0: 6e67 6573 2074 6f20 6578 706f 7274 6572  nges to exporter
-00004800: 2074 6f20 7573 6520 7468 6520 6261 7365   to use the base
-00004810: 7320 746f 2067 6976 6520 6120 2272 6f77  s to give a "row
-00004820: 735f 6261 7365 5f72 616e 6765 2200 2020  s_base_range".  
-00004830: 2020 2020 2020 2320 2d2d 2d20 544f 444f        # --- TODO
-00004840: 3a20 5368 6f75 6c64 2072 6f77 735f 6261  : Should rows_ba
-00004850: 7365 206f 6e6c 7920 6265 2064 6566 696e  se only be defin
-00004860: 6564 2077 6865 6e20 6974 2773 2031 443f  ed when it's 1D?
-00004870: 2054 6869 7320 776f 756c 6400 2020 2020   This would.    
-00004880: 2020 2020 2320 2d2d 2d20 616e 2058 5f41      # --- an X_A
-00004890: 5252 4159 2073 6c69 6365 2070 726f 6475  RRAY slice produ
-000048a0: 6365 7320 6120 3244 2072 6f77 2d62 6173  ces a 2D row-bas
-000048b0: 6520 2865 6163 6820 6365 6c6c 2068 6173  e (each cell has
-000048c0: 2069 7473 206f 776e 204e 2920 2d2d 2d00   its own N) ---.
-000048d0: 2020 2020 2020 2020 2222 2231 442f 3244          """1D/2D
-000048e0: 206e 702e 666c 6f61 7436 3420 6e64 6172   np.float64 ndar
-000048f0: 7261 7920 6f66 2075 6e77 6569 6768 7465  ray of unweighte
-00004900: 642d 4e20 666f 7220 6561 6368 2073 6c69  d-N for each sli
-00004910: 6365 2072 6f77 2f63 656c 6c2e 2222 2200  ce row/cell.""".
-00004920: 2020 2020 6465 6620 726f 7773 5f62 6173      def rows_bas
-00004930: 6528 7365 6c66 293a 0020 2020 2040 6c61  e(self):.    @la
-00004940: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-00004950: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00004960: 5f61 7373 656d 626c 655f 6d61 7472 6978  _assemble_matrix
-00004970: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
-00004980: 726f 775f 7765 6967 6874 6564 5f62 6173  row_weighted_bas
-00004990: 6573 2e62 6c6f 636b 7329 0020 2020 2020  es.blocks).     
-000049a0: 2020 2022 2222 3244 206e 702e 666c 6f61     """2D np.floa
-000049b0: 7436 3420 6e64 6172 7261 7920 6f66 2072  t64 ndarray of r
-000049c0: 6f77 2d70 726f 706f 7274 696f 6e73 2064  ow-proportions d
-000049d0: 656e 6f6d 696e 6174 6f72 2066 6f72 2065  enominator for e
-000049e0: 6163 6820 6365 6c6c 2e22 2222 0020 2020  ach cell.""".   
-000049f0: 2064 6566 2072 6f77 5f77 6569 6768 7465   def row_weighte
-00004a00: 645f 6261 7365 7328 7365 6c66 293a 0020  d_bases(self):. 
-00004a10: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00004a20: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00004a30: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
-00004a40: 6d61 7472 6978 2873 656c 662e 5f6d 6561  matrix(self._mea
-00004a50: 7375 7265 732e 726f 775f 756e 7765 6967  sures.row_unweig
-00004a60: 6874 6564 5f62 6173 6573 2e62 6c6f 636b  hted_bases.block
-00004a70: 7329 0020 2020 2020 2020 2022 2222 3244  s).        """2D
-00004a80: 206e 702e 666c 6f61 7436 3420 6e64 6172   np.float64 ndar
-00004a90: 7261 7920 6f66 2075 6e77 6569 6768 7465  ray of unweighte
-00004aa0: 6420 726f 772d 7072 6f70 6f72 7469 6f6e  d row-proportion
-00004ab0: 7320 6465 6e6f 6d69 6e61 746f 7220 7065  s denominator pe
-00004ac0: 7220 6365 6c6c 2e22 2222 0020 2020 2064  r cell.""".    d
-00004ad0: 6566 2072 6f77 5f75 6e77 6569 6768 7465  ef row_unweighte
-00004ae0: 645f 6261 7365 7328 7365 6c66 293a 0020  d_bases(self):. 
-00004af0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00004b00: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00004b10: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
-00004b20: 6d61 7472 6978 2873 656c 662e 5f6d 6561  matrix(self._mea
-00004b30: 7375 7265 732e 726f 775f 7374 645f 6572  sures.row_std_er
-00004b40: 722e 626c 6f63 6b73 2900 2020 2020 2020  r.blocks).      
-00004b50: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
-00004b60: 3634 206e 6461 7272 6179 206f 6620 7374  64 ndarray of st
-00004b70: 642d 6572 726f 7220 6f66 2072 6f77 2d70  d-error of row-p
-00004b80: 6572 6365 6e74 2066 6f72 2065 6163 6820  ercent for each 
-00004b90: 6d61 7472 6978 2063 656c 6c2e 2222 2200  matrix cell.""".
-00004ba0: 2020 2020 6465 6620 726f 775f 7374 645f      def row_std_
-00004bb0: 6572 7228 7365 6c66 293a 0020 2020 2040  err(self):.    @
-00004bc0: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00004bd0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00004be0: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
-00004bf0: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
-00004c00: 732e 726f 775f 7368 6172 655f 7375 6d2e  s.row_share_sum.
-00004c10: 626c 6f63 6b73 2900 2020 2020 2020 2020  blocks).        
-00004c20: 2222 2200 2020 2020 2020 2020 5261 6973  """.        Rais
-00004c30: 6573 2060 5661 6c75 6545 7272 6f72 6020  es `ValueError` 
-00004c40: 6966 2074 6865 2063 7562 652d 7265 7375  if the cube-resu
-00004c50: 6c74 2064 6f65 7320 6e6f 7420 696e 636c  lt does not incl
-00004c60: 7564 6520 6120 7375 6d20 6375 6265 2d6d  ude a sum cube-m
-00004c70: 6561 7375 7265 2e00 0020 2020 2020 2020  easure...       
-00004c80: 2022 2222 3244 206f 7074 696f 6e61 6c20   """2D optional 
-00004c90: 6e70 2e66 6c6f 6174 3634 206e 6461 7272  np.float64 ndarr
-00004ca0: 6179 206f 6620 726f 7720 7368 6172 6520  ay of row share 
-00004cb0: 6f66 2073 756d 2066 6f72 2065 6163 6820  of sum for each 
-00004cc0: 6365 6c6c 2e00 2020 2020 6465 6620 726f  cell..    def ro
-00004cd0: 775f 7368 6172 655f 7375 6d28 7365 6c66  w_share_sum(self
-00004ce0: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-00004cf0: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-00004d00: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
-00004d10: 626c 655f 6d61 7472 6978 2873 656c 662e  ble_matrix(self.
-00004d20: 5f6d 6561 7375 7265 732e 726f 775f 7072  _measures.row_pr
-00004d30: 6f70 6f72 7469 6f6e 5f76 6172 6961 6e63  oportion_varianc
-00004d40: 6573 2e62 6c6f 636b 7329 0020 2020 2020  es.blocks).     
-00004d50: 2020 2022 2222 3244 206e 6461 7272 6179     """2D ndarray
-00004d60: 206f 6620 6e70 2e66 6c6f 6174 3634 2072   of np.float64 r
-00004d70: 6f77 2d70 726f 706f 7274 696f 6e20 7661  ow-proportion va
-00004d80: 7269 616e 6365 2066 6f72 2065 6163 6820  riance for each 
-00004d90: 6d61 7472 6978 2063 656c 6c2e 2222 2200  matrix cell.""".
-00004da0: 2020 2020 6465 6620 726f 775f 7072 6f70      def row_prop
-00004db0: 6f72 7469 6f6e 5f76 6172 6961 6e63 6573  ortion_variances
-00004dc0: 2873 656c 6629 3a00 2020 2020 406c 617a  (self):.    @laz
-00004dd0: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00004de0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00004df0: 6173 7365 6d62 6c65 5f6d 6174 7269 7828  assemble_matrix(
-00004e00: 7365 6c66 2e5f 6d65 6173 7572 6573 2e72  self._measures.r
-00004e10: 6f77 5f70 726f 706f 7274 696f 6e73 2e62  ow_proportions.b
-00004e20: 6c6f 636b 7329 0020 2020 2020 2020 2022  locks).        "
-00004e30: 2222 0020 2020 2020 2020 2031 2e30 2069  "".        1.0 i
-00004e40: 6e63 6c75 7369 7665 2c20 6275 7420 7375  nclusive, but su
-00004e50: 6274 6f74 616c 2064 6966 6665 7265 6e63  btotal differenc
-00004e60: 6573 2063 616e 2062 6520 6265 7477 6565  es can be betwee
-00004e70: 6e20 2d31 2e30 2061 6e64 2031 2e30 2069  n -1.0 and 1.0 i
-00004e80: 6e63 6c75 7369 7665 2e00 2020 2020 2020  nclusive..      
-00004e90: 2020 726f 7720 7468 6520 6365 6c6c 2061    row the cell a
-00004ea0: 7070 6561 7273 2069 6e20 2861 6b61 2e20  ppears in (aka. 
-00004eb0: 726f 772d 6d61 7267 696e 292e 2047 656e  row-margin). Gen
-00004ec0: 6572 616c 6c79 2061 206e 756d 6265 7220  erally a number 
-00004ed0: 6265 7477 6565 6e20 302e 3020 616e 6400  between 0.0 and.
-00004ee0: 2020 2020 2020 2020 5468 6973 2069 7320          This is 
-00004ef0: 7468 6520 7072 6f70 6f72 7469 6f6e 206f  the proportion o
-00004f00: 6620 7468 6520 7765 6967 6874 6564 2d63  f the weighted-c
-00004f10: 6f75 6e74 2066 6f72 2063 656c 6c20 746f  ount for cell to
-00004f20: 2074 6865 2077 6569 6768 7465 642d 4e20   the weighted-N 
-00004f30: 6f66 2074 6865 0000 2020 2020 2020 2020  of the..        
-00004f40: 2222 2232 4420 6e70 2e66 6c6f 6174 3634  """2D np.float64
-00004f50: 206e 6461 7272 6179 206f 6620 726f 772d   ndarray of row-
-00004f60: 7072 6f70 6f72 7469 6f6e 2066 6f72 2065  proportion for e
-00004f70: 6163 6820 6d61 7472 6978 2063 656c 6c2e  ach matrix cell.
-00004f80: 0020 2020 2064 6566 2072 6f77 5f70 726f  .    def row_pro
-00004f90: 706f 7274 696f 6e73 2873 656c 6629 3a00  portions(self):.
-00004fa0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00004fb0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-00004fc0: 6e20 7365 6c66 2e5f 6469 6d65 6e73 696f  n self._dimensio
-00004fd0: 6e5f 6c61 6265 6c73 2873 656c 662e 5f72  n_labels(self._r
-00004fe0: 6f77 735f 6469 6d65 6e73 696f 6e2c 2073  ows_dimension, s
-00004ff0: 656c 662e 5f72 6f77 5f6f 7264 6572 2900  elf._row_order).
-00005000: 6164 0000 550c 0000 cd0c 0000 0010 0000  ad..U...........
-00005010: 1700 0000 0000 0000 d90f 0000 cf0f 0000  ................
-00005020: ce0f 0000 bc0f 0000 8f0f 0000 3a0f 0000  ............:...
-00005030: 390f 0000 e80e 0000 980e 0000 8c0e 0000  9...............
-00005040: 550e 0000 3c0e 0000 2e0e 0000 e80d 0000  U...<...........
-00005050: bd0d 0000 af0d 0000 a50d 0000 a40d 0000  ................
-00005060: 920d 0000 770d 0000 260d 0000 250d 0000  ....w...&...%...
-00005070: cd0c 0000 0000 0000 0000 0000 0000 0000  ................
-00005080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cc0: 0000 0000 0000 0000 0000 0000 0020 2020  .............   
-00005cd0: 2020 2020 2054 6869 7320 7661 6c75 6520       This value 
-00005ce0: 6973 2061 2032 4420 6172 7261 7920 6966  is a 2D array if
-00005cf0: 206f 6e65 206f 7220 626f 7468 206f 6620   one or both of 
-00005d00: 7468 6520 736c 6963 6520 6469 6d65 6e73  the slice dimens
-00005d10: 696f 6e73 2061 7265 204d 522e 2054 6869  ions are MR. Thi
-00005d20: 7320 6973 0000 2020 2020 2020 2020 2222  s is..        ""
-00005d30: 2231 442f 3244 206e 702e 666c 6f61 7436  "1D/2D np.float6
-00005d40: 3420 6e64 6172 7261 7920 6f66 2077 6569  4 ndarray of wei
-00005d50: 6768 7465 642d 4e20 666f 7220 6561 6368  ghted-N for each
-00005d60: 2063 6f6c 756d 6e20 6f66 2074 6869 7320   column of this 
-00005d70: 736c 6963 652e 0020 2020 2064 6566 2072  slice..    def r
-00005d80: 6f77 735f 6d61 7267 696e 2873 656c 6629  ows_margin(self)
-00005d90: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-00005da0: 7274 7900 0020 2020 2020 2020 2029 0020  rty..        ). 
-00005db0: 2020 2020 2020 2020 2020 205d 0020 2020             ].   
-00005dc0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00005dd0: 2069 6478 2069 6e20 7365 6c66 2e5f 726f   idx in self._ro
-00005de0: 775f 6f72 6465 7200 2020 2020 2020 2020  w_order.        
-00005df0: 2020 2020 2020 2020 2865 6c65 6d65 6e74          (element
-00005e00: 735b 6964 785d 2e6e 756d 6572 6963 5f76  s[idx].numeric_v
-00005e10: 616c 7565 2069 6620 6964 7820 3e3d 2030  alue if idx >= 0
-00005e20: 2065 6c73 6520 6e70 2e6e 616e 2900 2020   else np.nan).  
-00005e30: 2020 2020 2020 2020 2020 5b00 2020 2020            [.    
-00005e40: 2020 2020 7265 7475 726e 206e 702e 6172      return np.ar
-00005e50: 7261 7928 0020 2020 2020 2020 2065 6c65  ray(.        ele
-00005e60: 6d65 6e74 7320 3d20 7365 6c66 2e5f 726f  ments = self._ro
-00005e70: 7773 5f64 696d 656e 7369 6f6e 2e76 616c  ws_dimension.val
-00005e80: 6964 5f65 6c65 6d65 6e74 7300 2020 2020  id_elements.    
-00005e90: 2020 2020 2222 2200 2020 2020 2020 2020      """.        
-00005ea0: 7375 6274 6f74 616c 2072 6f77 7320 6861  subtotal rows ha
-00005eb0: 7665 2061 2076 616c 7565 206f 6620 6e70  ve a value of np
-00005ec0: 2e6e 616e 2028 7375 6274 6f74 616c 7320  .nan (subtotals 
-00005ed0: 6861 7665 206e 6f20 6e75 6d65 7269 6320  have no numeric 
-00005ee0: 7661 6c75 6529 2e00 2020 2020 2020 2020  value)..        
-00005ef0: 4120 7661 6c75 6520 6f66 206e 702e 6e61  A value of np.na
-00005f00: 6e20 6170 7065 6172 7320 666f 7220 6120  n appears for a 
-00005f10: 726f 7720 656c 656d 656e 7420 7769 7468  row element with
-00005f20: 6f75 7420 6120 6e75 6d65 7269 632d 7661  out a numeric-va
-00005f30: 6c75 652e 2041 6c6c 0000 2020 2020 2020  lue. All..      
-00005f40: 2020 2222 2231 4420 6f70 7469 6f6e 616c    """1D optional
-00005f50: 206e 702e 696e 742f 666c 6f61 7436 3420   np.int/float64 
-00005f60: 6e64 6172 7261 7920 6f66 206e 756d 6572  ndarray of numer
-00005f70: 6963 2d76 616c 7565 2066 6f72 2065 6163  ic-value for eac
-00005f80: 6820 726f 7720 656c 656d 656e 742e 0020  h row element.. 
-00005f90: 2020 2064 6566 2072 6f77 735f 6469 6d65     def rows_dime
-00005fa0: 6e73 696f 6e5f 6e75 6d65 7269 635f 7661  nsion_numeric_va
-00005fb0: 6c75 6573 2873 656c 6629 3a00 2020 2020  lues(self):.    
-00005fc0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00005fd0: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-00005fe0: 2020 2020 2066 6f72 2069 6478 2069 6e20       for idx in 
-00005ff0: 7365 6c66 2e5f 726f 775f 6f72 6465 7200  self._row_order.
-00006000: 6164 0000 2d00 0000 9101 0000 0010 0000  ad..-...........
-00006010: 5200 0000 0000 0000 e30f 0000 a20f 0000  R...............
-00006020: a10f 0000 4e0f 0000 ff0e 0000 df0e 0000  ....N...........
-00006030: d30e 0000 800e 0000 7f0e 0000 6d0e 0000  ............m...
-00006040: 4b0e 0000 ff0d 0000 fe0d 0000 a70d 0000  K...............
-00006050: 4f0d 0000 ff0c 0000 ec0c 0000 e00c 0000  O...............
-00006060: 910c 0000 900c 0000 7e0c 0000 530c 0000  ........~...S...
-00006070: fb0b 0000 a30b 0000 a20b 0000 900b 0000  ................
-00006080: 700b 0000 200b 0000 1f0b 0000 cb0a 0000  p... ...........
-00006090: bf0a 0000 720a 0000 710a 0000 5f0a 0000  ....r...q..._...
-000060a0: 410a 0000 e809 0000 9d09 0000 9c09 0000  A...............
-000060b0: 8a09 0000 6309 0000 0b09 0000 b708 0000  ....c...........
-000060c0: b608 0000 a408 0000 7f08 0000 2a08 0000  ............*...
-000060d0: d807 0000 d707 0000 c507 0000 a907 0000  ................
-000060e0: 5607 0000 0107 0000 ac06 0000 5c06 0000  V...........\...
-000060f0: 1706 0000 f505 0000 b305 0000 8305 0000  ................
-00006100: 8205 0000 4d05 0000 fe04 0000 fd04 0000  ....M...........
-00006110: eb04 0000 bb04 0000 6304 0000 6204 0000  ........c...b...
-00006120: 0e04 0000 bb03 0000 af03 0000 7503 0000  ............u...
-00006130: 5c03 0000 4e03 0000 0803 0000 da02 0000  \...N...........
-00006140: cc02 0000 c202 0000 c102 0000 af02 0000  ................
-00006150: 9102 0000 3d02 0000 e601 0000 9101 0000  ....=...........
-00006160: 9001 0000 0000 0000 0000 0000 0000 0000  ................
-00006170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006190: 0020 2020 2020 2020 2023 202d 2d2d 2054  .        # --- T
-000061a0: 6869 7320 6973 2072 6561 6c6c 7920 6a75  his is really ju
-000061b0: 7374 2061 6e6f 7468 6572 2077 6179 2074  st another way t
-000061c0: 6f20 6361 6c6c 2074 6865 2063 6f6c 756d  o call the colum
-000061d0: 6e73 5f77 6569 6768 7465 645f 6261 7365  ns_weighted_base
-000061e0: 7320 2d2d 2d00 2020 2020 2020 2020 2320  s ---.        # 
-000061f0: 2d2d 2d20 616e 204d 525f 5820 736c 6963  --- an MR_X slic
-00006200: 6520 7072 6f64 7563 6573 2061 2032 4420  e produces a 2D 
-00006210: 636f 6c75 6d6e 732d 6d61 7267 696e 2028  columns-margin (
-00006220: 6561 6368 2063 656c 6c20 6861 7320 6974  each cell has it
-00006230: 7320 6f77 6e20 4e29 202d 2d2d 0020 2020  s own N) ---.   
-00006240: 2020 2020 2022 2222 3144 2f32 4420 6e70       """1D/2D np
-00006250: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
-00006260: 206f 6620 7765 6967 6874 6564 2d4e 2066   of weighted-N f
-00006270: 6f72 2065 6163 6820 636f 6c75 6d6e 206f  or each column o
-00006280: 6620 7468 6973 2073 6c69 6365 2e22 2222  f this slice."""
-00006290: 0020 2020 2064 6566 2063 6f6c 756d 6e73  .    def columns
-000062a0: 5f6d 6172 6769 6e28 7365 6c66 293a 0020  _margin(self):. 
-000062b0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-000062c0: 0000 2020 2020 2020 2020 2900 2020 2020  ..        ).    
-000062d0: 2020 2020 2020 2020 5d00 2020 2020 2020          ].      
-000062e0: 2020 2020 2020 2020 2020 666f 7220 6964            for id
-000062f0: 7820 696e 2073 656c 662e 5f63 6f6c 756d  x in self._colum
-00006300: 6e5f 6f72 6465 7200 2020 2020 2020 2020  n_order.        
-00006310: 2020 2020 2020 2020 2865 6c65 6d65 6e74          (element
-00006320: 735b 6964 785d 2e6e 756d 6572 6963 5f76  s[idx].numeric_v
-00006330: 616c 7565 2069 6620 6964 7820 3e3d 2030  alue if idx >= 0
-00006340: 2065 6c73 6520 6e70 2e6e 616e 2900 2020   else np.nan).  
-00006350: 2020 2020 2020 2020 2020 5b00 2020 2020            [.    
-00006360: 2020 2020 7265 7475 726e 206e 702e 6172      return np.ar
-00006370: 7261 7928 0020 2020 2020 2020 2065 6c65  ray(.        ele
-00006380: 6d65 6e74 7320 3d20 7365 6c66 2e5f 636f  ments = self._co
-00006390: 6c75 6d6e 735f 6469 6d65 6e73 696f 6e2e  lumns_dimension.
-000063a0: 7661 6c69 645f 656c 656d 656e 7473 0020  valid_elements. 
-000063b0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-000063c0: 2020 2073 7562 746f 7461 6c20 636f 6c75     subtotal colu
-000063d0: 6d6e 7320 6861 7665 2061 2076 616c 7565  mns have a value
-000063e0: 206f 6620 6e70 2e6e 616e 2028 7375 6274   of np.nan (subt
-000063f0: 6f74 616c 7320 6861 7665 206e 6f20 6e75  otals have no nu
-00006400: 6d65 7269 6320 7661 6c75 6529 2e00 2020  meric value)..  
-00006410: 2020 2020 2020 4120 7661 6c75 6520 6f66        A value of
-00006420: 206e 702e 6e61 6e20 6170 7065 6172 7320   np.nan appears 
-00006430: 666f 7220 6120 636f 6c75 6d6e 2065 6c65  for a column ele
-00006440: 6d65 6e74 2077 6974 686f 7574 2061 206e  ment without a n
-00006450: 756d 6572 6963 2d76 616c 7565 2e20 416c  umeric-value. Al
-00006460: 6c00 0020 2020 2020 2020 2022 2222 3144  l..        """1D
-00006470: 206f 7074 696f 6e61 6c20 6e70 2e69 6e74   optional np.int
-00006480: 2f66 6c6f 6174 3634 206e 6461 7272 6179  /float64 ndarray
-00006490: 206f 6620 6e75 6d65 7269 632d 7661 6c75   of numeric-valu
-000064a0: 6520 666f 7220 6561 6368 2063 6f6c 756d  e for each colum
-000064b0: 6e20 656c 656d 656e 742e 0020 2020 2064  n element..    d
-000064c0: 6566 2063 6f6c 756d 6e73 5f64 696d 656e  ef columns_dimen
-000064d0: 7369 6f6e 5f6e 756d 6572 6963 5f76 616c  sion_numeric_val
-000064e0: 7565 7328 7365 6c66 293a 0020 2020 2040  ues(self):.    @
-000064f0: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00006500: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00006510: 662e 5f61 7373 656d 626c 655f 6d61 7267  f._assemble_marg
-00006520: 696e 616c 2873 656c 662e 5f6d 6561 7375  inal(self._measu
-00006530: 7265 732e 636f 6c75 6d6e 735f 756e 7765  res.columns_unwe
-00006540: 6967 6874 6564 5f62 6173 6529 0020 2020  ighted_base).   
-00006550: 2020 2020 2023 202d 2d2d 206f 7468 6572       # --- other
-00006560: 7769 7365 2063 6f6c 756d 6e73 2d62 6173  wise columns-bas
-00006570: 6520 6973 2061 2076 6563 746f 7220 2d2d  e is a vector --
-00006580: 2d00 0020 2020 2020 2020 2020 2020 2072  -..            r
-00006590: 6574 7572 6e20 7365 6c66 2e63 6f6c 756d  eturn self.colum
-000065a0: 6e5f 756e 7765 6967 6874 6564 5f62 6173  n_unweighted_bas
-000065b0: 6573 0020 2020 2020 2020 2069 6620 6e6f  es.        if no
-000065c0: 7420 7365 6c66 2e5f 6d65 6173 7572 6573  t self._measures
-000065d0: 2e63 6f6c 756d 6e73 5f75 6e77 6569 6768  .columns_unweigh
-000065e0: 7465 645f 6261 7365 2e69 735f 6465 6669  ted_base.is_defi
-000065f0: 6e65 643a 0020 2020 2020 2020 2023 202d  ned:.        # -
-00006600: 2d2d 2022 636f 6c75 6d6e 5f62 6173 655f  -- "column_base_
-00006610: 7261 6e67 6522 0020 2020 2020 2020 2023  range".        #
-00006620: 202d 2d2d 2072 6571 7569 7265 2063 6861   --- require cha
-00006630: 6e67 6573 2074 6f20 6578 706f 7274 6572  nges to exporter
-00006640: 2074 6f20 7573 6520 7468 6520 6261 7365   to use the base
-00006650: 7320 746f 2067 6976 6520 6100 2020 2020  s to give a.    
-00006660: 2020 2020 2320 2d2d 2d20 544f 444f 3a20      # --- TODO: 
-00006670: 5368 6f75 6c64 2063 6f6c 756d 6e5f 6261  Should column_ba
-00006680: 7365 206f 6e6c 7920 6265 2064 6566 696e  se only be defin
-00006690: 6564 2077 6865 6e20 6974 2773 2031 443f  ed when it's 1D?
-000066a0: 2054 6869 7320 776f 756c 6400 2020 2020   This would.    
-000066b0: 2020 2020 2320 2d2d 2d20 5468 6973 2069      # --- This i
-000066c0: 7320 7265 616c 6c79 206a 7573 7420 616e  s really just an
-000066d0: 6f74 6865 7220 7761 7920 746f 2063 616c  other way to cal
-000066e0: 6c20 7468 6520 636f 6c75 6d6e 735f 7765  l the columns_we
-000066f0: 6967 6874 6564 5f62 6173 6573 202d 2d2d  ighted_bases ---
-00006700: 0020 2020 2020 2020 2023 202d 2d2d 2061  .        # --- a
-00006710: 6e20 4d52 5f58 2073 6c69 6365 2070 726f  n MR_X slice pro
-00006720: 6475 6365 7320 6120 3244 2063 6f6c 756d  duces a 2D colum
-00006730: 6e73 2d62 6173 6520 2865 6163 6820 6365  ns-base (each ce
-00006740: 6c6c 2068 6173 2069 7473 206f 776e 204e  ll has its own N
-00006750: 2920 2d2d 2d00 2020 2020 2020 2020 2222  ) ---.        ""
-00006760: 2231 442f 3244 206e 702e 666c 6f61 7436  "1D/2D np.float6
-00006770: 3420 6e64 6172 7261 7920 6f66 2075 6e77  4 ndarray of unw
-00006780: 6569 6768 7465 642d 4e20 666f 7220 6561  eighted-N for ea
-00006790: 6368 2073 6c69 6365 2063 6f6c 756d 6e2f  ch slice column/
-000067a0: 6365 6c6c 2e22 2222 0020 2020 2064 6566  cell.""".    def
-000067b0: 2063 6f6c 756d 6e73 5f62 6173 6528 7365   columns_base(se
-000067c0: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-000067d0: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-000067e0: 7265 7475 726e 2073 656c 662e 5f61 7373  return self._ass
-000067f0: 656d 626c 655f 6d61 7472 6978 2873 656c  emble_matrix(sel
-00006800: 662e 5f6d 6561 7375 7265 732e 636f 6c75  f._measures.colu
-00006810: 6d6e 5f77 6569 6768 7465 645f 6261 7365  mn_weighted_base
-00006820: 732e 626c 6f63 6b73 2900 2020 2020 2020  s.blocks).      
-00006830: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
-00006840: 3634 206e 6461 7272 6179 206f 6620 636f  64 ndarray of co
-00006850: 6c75 6d6e 2d70 726f 706f 7274 696f 6e73  lumn-proportions
-00006860: 2064 656e 6f6d 696e 6174 6f72 2066 6f72   denominator for
-00006870: 2065 6163 6820 6365 6c6c 2e22 2222 0020   each cell.""". 
-00006880: 2020 2064 6566 2063 6f6c 756d 6e5f 7765     def column_we
-00006890: 6967 6874 6564 5f62 6173 6573 2873 656c  ighted_bases(sel
-000068a0: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-000068b0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-000068c0: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
-000068d0: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
-000068e0: 2e5f 6d65 6173 7572 6573 2e63 6f6c 756d  ._measures.colum
-000068f0: 6e5f 756e 7765 6967 6874 6564 5f62 6173  n_unweighted_bas
-00006900: 6573 2e62 6c6f 636b 7329 0020 2020 2020  es.blocks).     
-00006910: 2020 2022 2222 3244 206e 702e 666c 6f61     """2D np.floa
-00006920: 7436 3420 6e64 6172 7261 7920 6f66 2075  t64 ndarray of u
-00006930: 6e77 6569 6768 7465 6420 636f 6c2d 7072  nweighted col-pr
-00006940: 6f70 6f72 7469 6f6e 7320 6465 6e6f 6d69  oportions denomi
-00006950: 6e61 746f 7220 7065 7220 6365 6c6c 2e22  nator per cell."
-00006960: 2222 0020 2020 2064 6566 2063 6f6c 756d  "".    def colum
-00006970: 6e5f 756e 7765 6967 6874 6564 5f62 6173  n_unweighted_bas
-00006980: 6573 2873 656c 6629 3a00 2020 2020 406c  es(self):.    @l
-00006990: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-000069a0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000069b0: 2e5f 6173 7365 6d62 6c65 5f6d 6174 7269  ._assemble_matri
-000069c0: 7828 7365 6c66 2e5f 6d65 6173 7572 6573  x(self._measures
-000069d0: 2e63 6f6c 756d 6e5f 7374 645f 6572 722e  .column_std_err.
-000069e0: 626c 6f63 6b73 2900 2020 2020 2020 2020  blocks).        
-000069f0: 2222 2232 4420 6e70 2e66 6c6f 6174 3634  """2D np.float64
-00006a00: 206e 6461 7272 6179 206f 6620 7374 642d   ndarray of std-
-00006a10: 6572 726f 7220 6f66 2063 6f6c 756d 6e2d  error of column-
-00006a20: 7065 7263 656e 7420 666f 7220 6561 6368  percent for each
-00006a30: 206d 6174 7269 7820 6365 6c6c 2e22 2222   matrix cell."""
-00006a40: 0020 2020 2064 6566 2063 6f6c 756d 6e5f  .    def column_
-00006a50: 7374 645f 6572 7228 7365 6c66 293a 0020  std_err(self):. 
-00006a60: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00006a70: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00006a80: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
-00006a90: 6d61 7472 6978 2873 656c 662e 5f6d 6561  matrix(self._mea
-00006aa0: 7375 7265 732e 636f 6c75 6d6e 5f73 6861  sures.column_sha
-00006ab0: 7265 5f73 756d 2e62 6c6f 636b 7329 0020  re_sum.blocks). 
-00006ac0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-00006ad0: 2020 2052 6169 7365 7320 6056 616c 7565     Raises `Value
-00006ae0: 4572 726f 7260 2069 6620 7468 6520 6375  Error` if the cu
-00006af0: 6265 2d72 6573 756c 7420 646f 6573 206e  be-result does n
-00006b00: 6f74 2069 6e63 6c75 6465 2061 2073 756d  ot include a sum
-00006b10: 2063 7562 652d 6d65 6173 7572 652e 0000   cube-measure...
-00006b20: 2020 2020 2020 2020 2222 2232 4420 6f70          """2D op
-00006b30: 7469 6f6e 616c 206e 702e 666c 6f61 7436  tional np.float6
-00006b40: 3420 6e64 6172 7261 7920 6f66 2063 6f6c  4 ndarray of col
-00006b50: 756d 6e20 7368 6172 6520 6f66 2073 756d  umn share of sum
-00006b60: 2066 6f72 2065 6163 6820 6365 6c6c 2e00   for each cell..
-00006b70: 2020 2020 6465 6620 636f 6c75 6d6e 5f73      def column_s
-00006b80: 6861 7265 5f73 756d 2873 656c 6629 3a00  hare_sum(self):.
-00006b90: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00006ba0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-00006bb0: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-00006bc0: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
-00006bd0: 6173 7572 6573 2e63 6f6c 756d 6e5f 7072  asures.column_pr
-00006be0: 6f70 6f72 7469 6f6e 5f76 6172 6961 6e63  oportion_varianc
-00006bf0: 6573 2e62 6c6f 636b 7329 0020 2020 2020  es.blocks).     
-00006c00: 2020 2022 2222 3244 206e 6461 7272 6179     """2D ndarray
-00006c10: 206f 6620 6e70 2e66 6c6f 6174 3634 2063   of np.float64 c
-00006c20: 6f6c 756d 6e2d 7072 6f70 6f72 7469 6f6e  olumn-proportion
-00006c30: 2076 6172 6961 6e63 6520 666f 7220 6561   variance for ea
-00006c40: 6368 206d 6174 7269 7820 6365 6c6c 2e22  ch matrix cell."
-00006c50: 2222 0020 2020 2064 6566 2063 6f6c 756d  "".    def colum
-00006c60: 6e5f 7072 6f70 6f72 7469 6f6e 5f76 6172  n_proportion_var
-00006c70: 6961 6e63 6573 2873 656c 6629 3a00 2020  iances(self):.  
-00006c80: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-00006c90: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00006ca0: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
-00006cb0: 6174 7269 7828 7365 6c66 2e5f 6d65 6173  atrix(self._meas
-00006cc0: 7572 6573 2e63 6f6c 756d 6e5f 7072 6f70  ures.column_prop
-00006cd0: 6f72 7469 6f6e 732e 626c 6f63 6b73 2900  ortions.blocks).
-00006ce0: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00006cf0: 2020 2020 696e 636c 7573 6976 652e 0020      inclusive.. 
-00006d00: 2020 2020 2020 2061 6e64 2031 2e30 2069         and 1.0 i
-00006d10: 6e63 6c75 7369 7665 2c20 6275 7420 7375  nclusive, but su
-00006d20: 6274 6f74 616c 2064 6966 6665 7265 6e63  btotal differenc
-00006d30: 6573 2063 616e 2062 6520 6265 7477 6565  es can be betwee
-00006d40: 6e20 2d31 2e30 2061 6e64 2031 2e30 0020  n -1.0 and 1.0. 
-00006d50: 2020 2020 2020 2063 6f6c 756d 6e20 7468         column th
-00006d60: 6520 6365 6c6c 2061 7070 6561 7273 2069  e cell appears i
-00006d70: 6e20 2861 6b61 2e20 636f 6c75 6d6e 2d6d  n (aka. column-m
-00006d80: 6172 6769 6e29 2e20 4765 6e65 7261 6c6c  argin). Generall
-00006d90: 7920 6120 6e75 6d62 6572 2062 6574 7765  y a number betwe
-00006da0: 656e 2030 2e30 0020 2020 2020 2020 2054  en 0.0.        T
-00006db0: 6869 7320 6973 2074 6865 2070 726f 706f  his is the propo
-00006dc0: 7274 696f 6e20 6f66 2074 6865 2077 6569  rtion of the wei
-00006dd0: 6768 7465 642d 636f 756e 7420 666f 7220  ghted-count for 
-00006de0: 6365 6c6c 2074 6f20 7468 6520 7765 6967  cell to the weig
-00006df0: 6874 6564 2d4e 206f 6620 7468 6500 0020  hted-N of the.. 
-00006e00: 2020 2020 2020 2022 2222 3244 206e 702e         """2D np.
-00006e10: 666c 6f61 7436 3420 6e64 6172 7261 7920  float64 ndarray 
-00006e20: 6f66 2063 6f6c 756d 6e2d 7072 6f70 6f72  of column-propor
-00006e30: 7469 6f6e 2066 6f72 2065 6163 6820 6d61  tion for each ma
-00006e40: 7472 6978 2063 656c 6c2e 0020 2020 2064  trix cell..    d
-00006e50: 6566 2063 6f6c 756d 6e5f 7072 6f70 6f72  ef column_propor
-00006e60: 7469 6f6e 7328 7365 6c66 293a 0020 2020  tions(self):.   
-00006e70: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00006e80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00006e90: 656c 662e 5f64 696d 656e 7369 6f6e 5f6c  elf._dimension_l
-00006ea0: 6162 656c 7328 7365 6c66 2e5f 636f 6c75  abels(self._colu
-00006eb0: 6d6e 735f 6469 6d65 6e73 696f 6e2c 2073  mns_dimension, s
-00006ec0: 656c 662e 5f63 6f6c 756d 6e5f 6f72 6465  elf._column_orde
-00006ed0: 7229 0020 2020 2020 2020 2022 2222 0020  r).        """. 
-00006ee0: 2020 2020 2020 2072 6573 7065 6374 6976         respectiv
-00006ef0: 6520 6461 7461 2063 6f6c 756d 6e2e 0020  e data column.. 
-00006f00: 2020 2020 2020 2061 7070 6561 7220 696e         appear in
-00006f10: 2074 6865 2073 6571 7565 6e63 6520 616e   the sequence an
-00006f20: 6420 6c61 6265 6c73 2061 7265 206f 7264  d labels are ord
-00006f30: 6572 6564 2074 6f20 636f 7272 6573 706f  ered to correspo
-00006f40: 6e64 2077 6974 6820 7468 6569 7200 2020  nd with their.  
-00006f50: 2020 2020 2020 5468 6573 6520 6172 6520        These are 
-00006f60: 7375 6974 6162 6c65 2066 6f72 2075 7365  suitable for use
-00006f70: 2061 7320 636f 6c75 6d6e 2068 6561 6469   as column headi
-00006f80: 6e67 733b 206c 6162 656c 7320 666f 7220  ngs; labels for 
-00006f90: 7375 6274 6f74 616c 2063 6f6c 756d 6e73  subtotal columns
-00006fa0: 0000 2020 2020 2020 2020 2222 2231 4420  ..        """1D 
-00006fb0: 7374 7220 6e64 6172 7261 7920 6f66 2063  str ndarray of c
-00006fc0: 6f6c 756d 6e20 6e61 6d65 2066 6f72 2065  olumn name for e
-00006fd0: 6163 6820 6d61 7472 6978 2063 6f6c 756d  ach matrix colum
-00006fe0: 6e2e 0020 2020 2064 6566 2063 6f6c 756d  n..    def colum
-00006ff0: 6e5f 6c61 6265 6c73 2873 656c 6629 3a00  n_labels(self):.
-00007000: 6164 0000 0300 0000 6301 0000 0010 0000  ad......c.......
-00007010: 5100 0000 0000 0000 ae0f 0000 690f 0000  Q...........i...
-00007020: 450f 0000 050f 0000 d70e 0000 d60e 0000  E...............
-00007030: a10e 0000 540e 0000 530e 0000 410e 0000  ....T...S...A...
-00007040: 180e 0000 c10d 0000 6a0d 0000 130d 0000  ........j.......
-00007050: cd0c 0000 a80c 0000 650c 0000 3b0c 0000  ........e...;...
-00007060: 160c 0000 d10b 0000 ab0b 0000 990b 0000  ................
-00007070: 8b0b 0000 8a0b 0000 470b 0000 f70a 0000  ........G.......
-00007080: f60a 0000 e40a 0000 c20a 0000 780a 0000  ............x...
-00007090: 2e0a 0000 2d0a 0000 1b0a 0000 f209 0000  ....-...........
-000070a0: a009 0000 4f09 0000 4e09 0000 3c09 0000  ....O...N...<...
-000070b0: 1309 0000 c108 0000 7008 0000 6f08 0000  ........p...o...
-000070c0: 5d08 0000 3908 0000 ed07 0000 a107 0000  ]...9...........
-000070d0: a007 0000 8e07 0000 6b07 0000 2207 0000  ........k..."...
-000070e0: 2107 0000 cb06 0000 7a06 0000 7906 0000  !.......z...y...
-000070f0: 2806 0000 d205 0000 8505 0000 7905 0000  (...........y...
-00007100: 2205 0000 2105 0000 0f05 0000 ef04 0000  "...!...........
-00007110: a904 0000 a804 0000 5204 0000 0104 0000  ........R.......
-00007120: 0004 0000 af03 0000 5903 0000 0c03 0000  ........Y.......
-00007130: 0003 0000 af02 0000 ae02 0000 9c02 0000  ................
-00007140: 7f02 0000 3302 0000 e501 0000 e401 0000  ....3...........
-00007150: d201 0000 b201 0000 6301 0000 0000 0000  ........c.......
-00007160: 0000 0020 2020 2020 2020 2022 2222 7475  ...        """tu
-00007170: 706c 6528 696e 7429 206f 6620 6469 6666  ple(int) of diff
-00007180: 6572 656e 6365 2063 6f6c 756d 6e20 656c  erence column el
-00007190: 656d 656e 7473 2720 696e 6465 7865 732c  ements' indexes,
-000071a0: 2063 616e 2062 6520 656d 7074 792e 2222   can be empty.""
-000071b0: 2200 2020 2020 6465 6620 6469 6666 5f63  ".    def diff_c
-000071c0: 6f6c 756d 6e5f 6964 7873 2873 656c 6629  olumn_idxs(self)
-000071d0: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-000071e0: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-000071f0: 7572 6e20 7365 6c66 2e5f 6469 6666 5f65  urn self._diff_e
-00007200: 6c65 6d65 6e74 5f69 6478 7328 7365 6c66  lement_idxs(self
-00007210: 2e5f 726f 7773 5f64 696d 656e 7369 6f6e  ._rows_dimension
-00007220: 2c20 7365 6c66 2e5f 726f 775f 6f72 6465  , self._row_orde
-00007230: 7229 0020 2020 2020 2020 2022 2222 7475  r).        """tu
-00007240: 706c 6528 696e 7429 206f 6620 6469 6666  ple(int) of diff
-00007250: 6572 656e 6365 2072 6f77 2065 6c65 6d65  erence row eleme
-00007260: 6e74 7327 2069 6e64 6578 6573 2c20 6361  nts' indexes, ca
-00007270: 6e20 6265 2065 6d70 7479 2e22 2222 0020  n be empty.""". 
-00007280: 2020 2064 6566 2064 6966 665f 726f 775f     def diff_row_
-00007290: 6964 7873 2873 656c 6629 3a00 2020 2020  idxs(self):.    
-000072a0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-000072b0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000072c0: 6c66 2e5f 6465 7269 7665 645f 656c 656d  lf._derived_elem
-000072d0: 656e 745f 6964 7873 2873 656c 662e 5f72  ent_idxs(self._r
-000072e0: 6f77 735f 6469 6d65 6e73 696f 6e2c 2073  ows_dimension, s
-000072f0: 656c 662e 5f72 6f77 5f6f 7264 6572 2900  elf._row_order).
-00007300: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00007310: 2020 2020 696e 2074 6869 7320 7365 6e73      in this sens
-00007320: 652c 2062 6563 6175 7365 2074 6865 7927  e, because they'
-00007330: 7265 206e 6f74 2065 7665 6e20 7061 7274  re not even part
-00007340: 206f 6620 7468 6520 6461 7461 2028 656c   of the data (el
-00007350: 656d 656e 7473 292e 0020 2020 2020 2020  ements)..       
-00007360: 2063 6174 6567 6f72 6965 7320 6f66 2043   categories of C
-00007370: 4154 2064 696d 656e 7369 6f6e 732c 2061  AT dimensions, a
-00007380: 7265 206e 6f74 2064 6572 6976 6564 2e20  re not derived. 
-00007390: 5375 6274 6f74 616c 7320 6172 6520 616c  Subtotals are al
-000073a0: 736f 206e 6f74 2064 6572 6976 6564 0020  so not derived. 
-000073b0: 2020 2020 2020 2041 6c6c 206f 7468 6572         All other
-000073c0: 2065 6c65 6d65 6e74 732c 2069 6e63 6c75   elements, inclu
-000073d0: 6469 6e67 2072 6567 756c 6172 204d 5220  ding regular MR 
-000073e0: 616e 6420 4341 2073 7562 7661 7269 6162  and CA subvariab
-000073f0: 6c65 732c 2061 7320 7765 6c6c 2061 7300  les, as well as.
-00007400: 0020 2020 2020 2020 2077 6869 6368 2068  .        which h
-00007410: 6173 2062 6565 6e20 7072 6f64 7563 6564  as been produced
-00007420: 2062 7920 7468 6520 7a7a 392c 2061 6e64   by the zz9, and
-00007430: 2069 6e73 6572 7465 6420 696e 746f 2074   inserted into t
-00007440: 6865 2072 6573 706f 6e73 6520 6461 7461  he response data
-00007450: 2e00 2020 2020 2020 2020 416e 2065 6c65  ..        An ele
-00007460: 6d65 6e74 2069 7320 6465 7269 7665 6420  ment is derived 
-00007470: 6966 2069 7427 7320 6120 7375 6276 6172  if it's a subvar
-00007480: 6961 626c 6520 6f66 2061 206d 756c 7469  iable of a multi
-00007490: 706c 6520 7265 7370 6f6e 7365 2064 696d  ple response dim
-000074a0: 656e 7369 6f6e 2c00 0020 2020 2020 2020  ension,..       
-000074b0: 2022 2222 7475 706c 6528 696e 7429 206f   """tuple(int) o
-000074c0: 6620 6465 7269 7665 6420 726f 7720 656c  f derived row el
-000074d0: 656d 656e 7473 2720 696e 6465 7865 732c  ements' indexes,
-000074e0: 2063 616e 2062 6520 656d 7074 792e 0020   can be empty.. 
-000074f0: 2020 2064 6566 2064 6572 6976 6564 5f72     def derived_r
-00007500: 6f77 5f69 6478 7328 7365 6c66 293a 0020  ow_idxs(self):. 
-00007510: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00007520: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00007530: 2073 656c 662e 5f64 6572 6976 6564 5f65   self._derived_e
-00007540: 6c65 6d65 6e74 5f69 6478 7328 7365 6c66  lement_idxs(self
-00007550: 2e5f 636f 6c75 6d6e 735f 6469 6d65 6e73  ._columns_dimens
-00007560: 696f 6e2c 2073 656c 662e 5f63 6f6c 756d  ion, self._colum
-00007570: 6e5f 6f72 6465 7229 0020 2020 2020 2020  n_order).       
-00007580: 2022 2222 0020 2020 2020 2020 2069 6e20   """.        in 
-00007590: 7468 6973 2073 656e 7365 2c20 6265 6361  this sense, beca
-000075a0: 7573 6520 7468 6579 2772 6520 6e6f 7420  use they're not 
-000075b0: 6576 656e 2070 6172 7420 6f66 2074 6865  even part of the
-000075c0: 2064 6174 6120 2865 6c65 6d65 6e74 7329   data (elements)
-000075d0: 2e00 2020 2020 2020 2020 6361 7465 676f  ..        catego
-000075e0: 7269 6573 206f 6620 4341 5420 6469 6d65  ries of CAT dime
-000075f0: 6e73 696f 6e73 2c20 6172 6520 6e6f 7420  nsions, are not 
-00007600: 6465 7269 7665 642e 2053 7562 746f 7461  derived. Subtota
-00007610: 6c73 2061 7265 2061 6c73 6f20 6e6f 7420  ls are also not 
-00007620: 6465 7269 7665 6400 2020 2020 2020 2020  derived.        
-00007630: 416c 6c20 6f74 6865 7220 656c 656d 656e  All other elemen
-00007640: 7473 2c20 696e 636c 7564 696e 6720 7265  ts, including re
-00007650: 6775 6c61 7220 4d52 2061 6e64 2043 4120  gular MR and CA 
-00007660: 7375 6276 6172 6961 626c 6573 2c20 6173  subvariables, as
-00007670: 2077 656c 6c20 6173 0000 2020 2020 2020   well as..      
-00007680: 2020 7768 6963 6820 6861 7320 6265 656e    which has been
-00007690: 2070 726f 6475 6365 6420 6279 2074 6865   produced by the
-000076a0: 207a 7a39 2c20 616e 6420 696e 7365 7274   zz9, and insert
-000076b0: 6564 2069 6e74 6f20 7468 6520 7265 7370  ed into the resp
-000076c0: 6f6e 7365 2064 6174 612e 0020 2020 2020  onse data..     
-000076d0: 2020 2041 6e20 656c 656d 656e 7420 6973     An element is
-000076e0: 2064 6572 6976 6564 2069 6620 6974 2773   derived if it's
-000076f0: 2061 2073 7562 7661 7269 6162 6c65 206f   a subvariable o
-00007700: 6620 6120 6d75 6c74 6970 6c65 2072 6573  f a multiple res
-00007710: 706f 6e73 6520 6469 6d65 6e73 696f 6e2c  ponse dimension,
-00007720: 0000 2020 2020 2020 2020 2222 2274 7570  ..        """tup
-00007730: 6c65 2869 6e74 2920 6f66 2064 6572 6976  le(int) of deriv
-00007740: 6564 2063 6f6c 756d 6e20 656c 656d 656e  ed column elemen
-00007750: 7473 2720 696e 6465 7865 732c 2063 616e  ts' indexes, can
-00007760: 2062 6520 656d 7074 792e 0020 2020 2064   be empty..    d
-00007770: 6566 2064 6572 6976 6564 5f63 6f6c 756d  ef derived_colum
-00007780: 6e5f 6964 7873 2873 656c 6629 3a00 2020  n_idxs(self):.  
-00007790: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-000077a0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000077b0: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
-000077c0: 6172 6769 6e61 6c28 7365 6c66 2e5f 6d65  arginal(self._me
-000077d0: 6173 7572 6573 2e63 6f6c 756d 6e73 5f73  asures.columns_s
-000077e0: 6361 6c65 5f6d 6564 6961 6e29 0020 2020  cale_median).   
-000077f0: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
-00007800: 2031 4420 636f 6c75 6d6e 2073 6361 6c65   1D column scale
-00007810: 206d 6564 6961 6e20 6d61 7267 696e 616c   median marginal
-00007820: 2066 6f72 2074 6869 7320 6375 6265 2d72   for this cube-r
-00007830: 6573 756c 7422 2222 0020 2020 2064 6566  esult""".    def
-00007840: 2063 6f6c 756d 6e73 5f73 6361 6c65 5f6d   columns_scale_m
-00007850: 6564 6961 6e28 7365 6c66 293a 0020 2020  edian(self):.   
-00007860: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00007870: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00007880: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
-00007890: 7267 696e 616c 2873 656c 662e 5f6d 6561  rginal(self._mea
-000078a0: 7375 7265 732e 636f 6c75 6d6e 735f 7363  sures.columns_sc
-000078b0: 616c 655f 6d65 616e 5f73 7464 6572 7229  ale_mean_stderr)
-000078c0: 0020 2020 2020 2020 2022 2222 4f70 7469  .        """Opti
-000078d0: 6f6e 616c 2031 4420 636f 6c75 6d6e 2073  onal 1D column s
-000078e0: 6361 6c65 206d 6561 6e20 7374 6420 6572  cale mean std er
-000078f0: 7220 6d61 7267 696e 616c 2066 6f72 2074  r marginal for t
-00007900: 6869 7320 6375 6265 2d72 6573 756c 7422  his cube-result"
-00007910: 2222 0020 2020 2064 6566 2063 6f6c 756d  "".    def colum
-00007920: 6e73 5f73 6361 6c65 5f6d 6561 6e5f 7374  ns_scale_mean_st
-00007930: 6465 7272 2873 656c 6629 3a00 2020 2020  derr(self):.    
-00007940: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00007950: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00007960: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6172  lf._assemble_mar
-00007970: 6769 6e61 6c28 7365 6c66 2e5f 6d65 6173  ginal(self._meas
-00007980: 7572 6573 2e63 6f6c 756d 6e73 5f73 6361  ures.columns_sca
-00007990: 6c65 5f6d 6561 6e5f 7374 6464 6576 2900  le_mean_stddev).
-000079a0: 2020 2020 2020 2020 2222 224f 7074 696f          """Optio
-000079b0: 6e61 6c20 3144 2063 6f6c 756d 6e20 7363  nal 1D column sc
-000079c0: 616c 6520 6d65 616e 2073 7464 2064 6576  ale mean std dev
-000079d0: 206d 6172 6769 6e61 6c20 666f 7220 7468   marginal for th
-000079e0: 6973 2063 7562 652d 7265 7375 6c74 2222  is cube-result""
-000079f0: 2200 2020 2020 6465 6620 636f 6c75 6d6e  ".    def column
-00007a00: 735f 7363 616c 655f 6d65 616e 5f73 7464  s_scale_mean_std
-00007a10: 6465 7628 7365 6c66 293a 0020 2020 2040  dev(self):.    @
-00007a20: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00007a30: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00007a40: 662e 5f61 7373 656d 626c 655f 6d61 7267  f._assemble_marg
-00007a50: 696e 616c 2873 656c 662e 5f6d 6561 7375  inal(self._measu
-00007a60: 7265 732e 636f 6c75 6d6e 735f 7363 616c  res.columns_scal
-00007a70: 655f 6d65 616e 2900 2020 2020 2020 2020  e_mean).        
-00007a80: 2222 224f 7074 696f 6e61 6c20 3144 2063  """Optional 1D c
-00007a90: 6f6c 756d 6e20 7363 616c 6520 6d65 616e  olumn scale mean
-00007aa0: 206d 6172 6769 6e61 6c20 666f 7220 7468   marginal for th
-00007ab0: 6973 2063 7562 652d 7265 7375 6c74 2222  is cube-result""
-00007ac0: 2200 2020 2020 6465 6620 636f 6c75 6d6e  ".    def column
-00007ad0: 735f 7363 616c 655f 6d65 616e 2873 656c  s_scale_mean(sel
-00007ae0: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-00007af0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-00007b00: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
-00007b10: 6d62 6c65 5f6d 6172 6769 6e61 6c28 7365  mble_marginal(se
-00007b20: 6c66 2e5f 6d65 6173 7572 6573 2e63 6f6c  lf._measures.col
-00007b30: 756d 6e73 5f74 6162 6c65 5f70 726f 706f  umns_table_propo
-00007b40: 7274 696f 6e29 0020 2020 2020 2020 2023  rtion).        #
-00007b50: 202d 2d2d 206f 7468 6572 7769 7365 2063   --- otherwise c
-00007b60: 6f6c 756d 6e73 2d6d 6172 6769 6e2d 7072  olumns-margin-pr
-00007b70: 6f70 6f72 7469 6f6e 2069 7320 6120 6d61  oportion is a ma
-00007b80: 6769 6e61 6c20 2d2d 2d00 0020 2020 2020  ginal ---..     
-00007b90: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-00007ba0: 2020 2020 2020 2020 2029 0020 2020 2020           ).     
-00007bb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007bc0: 656c 662e 5f64 696d 656e 7369 6f6e 732c  elf._dimensions,
-00007bd0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00007be0: 2020 2020 2073 656c 662e 636f 6c75 6d6e       self.column
-00007bf0: 735f 6d61 7267 696e 202f 2073 656c 662e  s_margin / self.
-00007c00: 7461 626c 655f 7765 6967 6874 6564 5f62  table_weighted_b
-00007c10: 6173 6573 2c00 2020 2020 2020 2020 2020  ases,.          
-00007c20: 2020 2020 2020 5375 6d53 7562 746f 7461        SumSubtota
-00007c30: 6c73 2e62 6c6f 636b 7328 0020 2020 2020  ls.blocks(.     
-00007c40: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00007c50: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
-00007c60: 7269 7828 0020 2020 2020 2020 2069 6620  rix(.        if 
-00007c70: 6e6f 7420 7365 6c66 2e5f 6d65 6173 7572  not self._measur
-00007c80: 6573 2e63 6f6c 756d 6e73 5f74 6162 6c65  es.columns_table
-00007c90: 5f70 726f 706f 7274 696f 6e2e 6973 5f64  _proportion.is_d
-00007ca0: 6566 696e 6564 3a00 2020 2020 2020 2020  efined:.        
-00007cb0: 2320 2d2d 2d20 2263 6f6c 756d 6e73 5f6d  # --- "columns_m
-00007cc0: 6172 6769 6e5f 7261 6e67 6522 0020 2020  argin_range".   
-00007cd0: 2020 2020 2023 202d 2d2d 2072 6571 7569       # --- requi
-00007ce0: 7265 7320 6368 616e 6765 7320 746f 2065  res changes to e
-00007cf0: 7870 6f72 7465 7220 746f 2075 7365 2074  xporter to use t
-00007d00: 6865 2062 6173 6573 2074 6f20 6769 7665  he bases to give
-00007d10: 2061 0020 2020 2020 2020 2023 202d 2d2d   a.        # ---
-00007d20: 2054 4f44 4f3a 2053 686f 756c 6420 636f   TODO: Should co
-00007d30: 6c75 6d73 5f6d 6172 6769 6e5f 7072 6f70  lums_margin_prop
-00007d40: 6f72 7469 6f6e 206f 6e6c 7920 6265 2064  ortion only be d
-00007d50: 6566 696e 6564 2077 6865 6e20 6974 2773  efined when it's
-00007d60: 2031 443f 2054 6869 7300 2020 2020 2020   1D? This.      
-00007d70: 2020 2320 2d2d 2d20 616e 204d 525f 5820    # --- an MR_X 
-00007d80: 736c 6963 6520 7072 6f64 7563 6573 2061  slice produces a
-00007d90: 2032 4420 636f 6c75 6d6e 732d 6d61 7267   2D columns-marg
-00007da0: 696e 2028 6561 6368 2063 656c 6c20 6861  in (each cell ha
-00007db0: 7320 6974 7320 6f77 6e20 4e29 202d 2d2d  s its own N) ---
-00007dc0: 0020 2020 2020 2020 2022 2222 3144 2f32  .        """1D/2
-00007dd0: 4420 6e70 2e66 6c6f 6174 3634 206e 6461  D np.float64 nda
-00007de0: 7272 6179 206f 6620 7765 6967 6874 6564  rray of weighted
-00007df0: 2d70 726f 7020 666f 7220 6561 6368 2063  -prop for each c
-00007e00: 6f6c 756d 6e20 6f66 2074 6869 7320 736c  olumn of this sl
-00007e10: 6963 652e 2222 2200 2020 2020 6465 6620  ice.""".    def 
-00007e20: 636f 6c75 6d6e 735f 6d61 7267 696e 5f70  columns_margin_p
-00007e30: 726f 706f 7274 696f 6e28 7365 6c66 293a  roportion(self):
-00007e40: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-00007e50: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-00007e60: 726e 2073 656c 662e 5f61 7373 656d 626c  rn self._assembl
-00007e70: 655f 6d61 7267 696e 616c 2873 656c 662e  e_marginal(self.
-00007e80: 5f6d 6561 7375 7265 732e 636f 6c75 6d6e  _measures.column
-00007e90: 735f 7765 6967 6874 6564 5f62 6173 6529  s_weighted_base)
-00007ea0: 0020 2020 2020 2020 2023 202d 2d2d 206f  .        # --- o
-00007eb0: 7468 6572 7769 7365 2063 6f6c 756d 6e73  therwise columns
-00007ec0: 2d62 6173 6520 6973 2061 2076 6563 746f  -base is a vecto
-00007ed0: 7220 2d2d 2d00 0020 2020 2020 2020 2020  r ---..         
-00007ee0: 2020 2072 6574 7572 6e20 7365 6c66 2e63     return self.c
-00007ef0: 6f6c 756d 6e5f 7765 6967 6874 6564 5f62  olumn_weighted_b
-00007f00: 6173 6573 0020 2020 2020 2020 2069 6620  ases.        if 
-00007f10: 6e6f 7420 7365 6c66 2e5f 6d65 6173 7572  not self._measur
-00007f20: 6573 2e63 6f6c 756d 6e73 5f77 6569 6768  es.columns_weigh
-00007f30: 7465 645f 6261 7365 2e69 735f 6465 6669  ted_base.is_defi
-00007f40: 6e65 643a 0020 2020 2020 2020 2023 202d  ned:.        # -
-00007f50: 2d2d 2022 636f 6c75 6d6e 5f6d 6172 6769  -- "column_margi
-00007f60: 6e5f 7261 6e67 6522 0020 2020 2020 2020  n_range".       
-00007f70: 2023 202d 2d2d 2072 6571 7569 7265 2063   # --- require c
-00007f80: 6861 6e67 6573 2074 6f20 6578 706f 7274  hanges to export
-00007f90: 6572 2074 6f20 7573 6520 7468 6520 6261  er to use the ba
-00007fa0: 7365 7320 746f 2067 6976 6520 6100 2020  ses to give a.  
-00007fb0: 2020 2020 2020 2320 2d2d 2d20 544f 444f        # --- TODO
-00007fc0: 3a20 5368 6f75 6c64 2063 6f6c 756d 6e5f  : Should column_
-00007fd0: 6d61 7267 696e 206f 6e6c 7920 6265 2064  margin only be d
-00007fe0: 6566 696e 6564 2077 6865 6e20 6974 2773  efined when it's
-00007ff0: 2031 443f 2054 6869 7320 776f 756c 6400   1D? This would.
-00008000: 6164 0000 0c00 0000 9001 0000 0010 0000  ad..............
-00008010: 5a00 0000 0000 0000 ac0f 0000 ab0f 0000  Z...............
-00008020: 990f 0000 750f 0000 320f 0000 e90e 0000  ....u...2.......
-00008030: 920e 0000 910e 0000 7f0e 0000 5e0e 0000  ............^...
-00008040: 1e0e 0000 d50d 0000 810d 0000 800d 0000  ................
-00008050: 6e0d 0000 590d 0000 180d 0000 170d 0000  n...Y...........
-00008060: c10c 0000 b50c 0000 730c 0000 720c 0000  ........s...r...
-00008070: 3e0c 0000 ed0b 0000 ec0b 0000 930b 0000  >...............
-00008080: 870b 0000 6e0b 0000 600b 0000 380b 0000  ....n...`...8...
-00008090: fc0a 0000 bf0a 0000 a40a 0000 830a 0000  ................
-000080a0: 710a 0000 370a 0000 290a 0000 1d0a 0000  q...7...).......
-000080b0: 1c0a 0000 e209 0000 8b09 0000 8a09 0000  ................
-000080c0: 3409 0000 2809 0000 0f09 0000 0109 0000  4...(...........
-000080d0: d908 0000 9708 0000 5408 0000 3908 0000  ........T...9...
-000080e0: 1808 0000 0608 0000 cc07 0000 be07 0000  ................
-000080f0: b207 0000 b107 0000 7907 0000 2307 0000  ........y...#...
-00008100: 2207 0000 d106 0000 b406 0000 b306 0000  "...............
-00008110: 5f06 0000 0b06 0000 da05 0000 d905 0000  _...............
-00008120: 8f05 0000 6305 0000 5705 0000 3305 0000  ....c...W...3...
-00008130: e704 0000 bd04 0000 7004 0000 6204 0000  ........p...b...
-00008140: 2904 0000 0304 0000 c003 0000 b603 0000  )...............
-00008150: b503 0000 7c03 0000 2503 0000 2403 0000  ....|...%...$...
-00008160: d302 0000 b602 0000 b502 0000 6102 0000  ............a...
-00008170: 0c02 0000 db01 0000 da01 0000 9001 0000  ................
-00008180: 8f01 0000 0000 0000 0000 0000 0000 0000  ................
-00008190: 2020 2020 2020 2020 5261 6973 6573 2060          Raises `
-000081a0: 5661 6c75 6545 7272 6f72 2069 6620 7468  ValueError if th
-000081b0: 6520 6375 6265 2d72 6573 756c 7420 646f  e cube-result do
-000081c0: 6573 206e 6f74 2069 6e63 6c75 6465 2060  es not include `
-000081d0: 6f76 6572 6c61 7073 6000 0020 2020 2020  overlaps`..     
-000081e0: 2020 2073 7562 7661 7269 6162 6c65 2069     subvariable i
-000081f0: 6e64 6578 2028 7468 6520 7365 6c65 6374  ndex (the select
-00008200: 6564 2063 6f6c 756d 6e29 2e00 2020 2020  ed column)..    
-00008210: 2020 2020 7061 6972 7769 7365 2073 6967      pairwise sig
-00008220: 6e69 6669 6361 6e63 6520 6d61 7472 6978  nificance matrix
-00008230: 2069 7320 6120 3244 206e 6461 7272 6179   is a 2D ndarray
-00008240: 206f 6620 7468 6520 742d 7374 6174 7320   of the t-stats 
-00008250: 666f 7220 7468 6520 7365 6c65 6374 6564  for the selected
-00008260: 0020 2020 2020 2020 2046 6f72 2063 7562  .        For cub
-00008270: 6573 2077 6865 7265 2074 6865 206c 6173  es where the las
-00008280: 7420 6469 6d65 6e73 696f 6e20 6973 2061  t dimension is a
-00008290: 206d 756c 7469 706c 6520 7265 7370 6f6e   multiple respon
-000082a0: 7365 2c20 6561 6368 2073 7562 7661 7269  se, each subvari
-000082b0: 6162 6c65 0000 2020 2020 2020 2020 7370  able..        sp
-000082c0: 6563 6966 6963 2063 6174 6567 6f72 6965  ecific categorie
-000082d0: 732e 0020 2020 2020 2020 2046 6f72 2063  s..        For c
-000082e0: 7562 6573 2077 6865 7265 2074 6865 206c  ubes where the l
-000082f0: 6173 7420 6469 6d65 6e73 696f 6e20 6973  ast dimension is
-00008300: 2063 6174 6567 6f72 6963 616c 2c20 636f   categorical, co
-00008310: 6c75 6d6e 2069 6478 7320 7265 7072 6573  lumn idxs repres
-00008320: 656e 7400 0020 2020 2020 2020 2022 2222  ent..        """
-00008330: 3244 206f 7074 696f 6e61 6c20 6e70 2e66  2D optional np.f
-00008340: 6c6f 6174 3634 206e 6461 7272 6179 206f  loat64 ndarray o
-00008350: 6620 6f76 6572 6c61 7073 2d74 5f73 7461  f overlaps-t_sta
-00008360: 7473 206d 6174 7269 6365 7320 666f 7220  ts matrices for 
-00008370: 7375 6276 6172 2069 6478 2e00 2020 2020  subvar idx..    
-00008380: 6465 6620 7061 6972 7769 7365 5f73 6967  def pairwise_sig
-00008390: 6e69 6669 6361 6e63 655f 745f 7374 6174  nificance_t_stat
-000083a0: 7328 7365 6c66 2c20 636f 6c75 6d6e 5f69  s(self, column_i
-000083b0: 6478 293a 0000 2020 2020 2020 2020 2900  dx):..        ).
-000083c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000083d0: 2e5f 6d65 6173 7572 6573 2e70 6169 7277  ._measures.pairw
-000083e0: 6973 655f 705f 7661 6c73 2862 6173 655f  ise_p_vals(base_
-000083f0: 636f 6c75 6d6e 5f69 6478 292e 626c 6f63  column_idx).bloc
-00008400: 6b73 0020 2020 2020 2020 2072 6574 7572  ks.        retur
-00008410: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-00008420: 5f6d 6174 7269 7828 0020 2020 2020 2020  _matrix(.       
-00008430: 2062 6173 655f 636f 6c75 6d6e 5f69 6478   base_column_idx
-00008440: 203d 2073 656c 662e 5f63 6f6c 756d 6e5f   = self._column_
-00008450: 6f72 6465 725b 636f 6c75 6d6e 5f69 6478  order[column_idx
-00008460: 5d00 2020 2020 2020 2020 2020 2020 2900  ].            ).
-00008470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008480: 7365 6c66 2e5f 6d65 6173 7572 6573 2e70  self._measures.p
-00008490: 6169 7277 6973 655f 705f 7661 6c73 5f66  airwise_p_vals_f
-000084a0: 6f72 5f73 7562 7661 7228 636f 6c75 6d6e  or_subvar(column
-000084b0: 5f69 6478 292e 626c 6f63 6b73 0020 2020  _idx).blocks.   
-000084c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000084d0: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
-000084e0: 6174 7269 7828 0020 2020 2020 2020 2020  atrix(.         
-000084f0: 2020 2023 2049 6620 6f76 6572 6c61 7073     # If overlaps
-00008500: 2061 7265 2064 6566 696e 6564 2c20 6361   are defined, ca
-00008510: 6c63 756c 6174 6520 7369 676e 6966 6963  lculate signific
-00008520: 616e 6365 2062 6173 6564 206f 6e20 7468  ance based on th
-00008530: 656d 0020 2020 2020 2020 2069 6620 7365  em.        if se
-00008540: 6c66 2e5f 6375 6265 5f68 6173 5f6f 7665  lf._cube_has_ove
-00008550: 726c 6170 733a 0020 2020 2020 2020 2022  rlaps:.        "
-00008560: 2222 0020 2020 2020 2020 2061 6e64 2060  "".        and `
-00008570: 7661 6c69 645f 6f76 6572 6c61 7073 6020  valid_overlaps` 
-00008580: 6375 6265 2d6d 6561 7375 7265 732e 0020  cube-measures.. 
-00008590: 2020 2020 2020 2052 6169 7365 7320 6056         Raises `V
-000085a0: 616c 7565 4572 726f 7220 6966 2074 6865  alueError if the
-000085b0: 2063 7562 652d 7265 7375 6c74 2064 6f65   cube-result doe
-000085c0: 7320 6e6f 7420 696e 636c 7564 6520 606f  s not include `o
-000085d0: 7665 726c 6170 7360 0000 2020 2020 2020  verlaps`..      
-000085e0: 2020 7375 6276 6172 6961 626c 6520 696e    subvariable in
-000085f0: 6465 7820 2874 6865 2073 656c 6563 7465  dex (the selecte
-00008600: 6420 636f 6c75 6d6e 292e 0020 2020 2020  d column)..     
-00008610: 2020 2070 6169 7277 6973 6520 7369 676e     pairwise sign
-00008620: 6966 6963 616e 6365 206d 6174 7269 7820  ificance matrix 
-00008630: 6973 2061 2032 4420 6e64 6172 7261 7920  is a 2D ndarray 
-00008640: 6f66 2074 6865 2070 2d76 616c 7320 666f  of the p-vals fo
-00008650: 7220 7468 6520 7365 6c65 6374 6564 0020  r the selected. 
-00008660: 2020 2020 2020 2046 6f72 2063 7562 6573         For cubes
-00008670: 2077 6865 7265 2074 6865 206c 6173 7420   where the last 
-00008680: 6469 6d65 6e73 696f 6e20 6973 2061 206d  dimension is a m
-00008690: 756c 7469 706c 6520 7265 7370 6f6e 7365  ultiple response
-000086a0: 2c20 6561 6368 2073 7562 7661 7269 6162  , each subvariab
-000086b0: 6c65 0000 2020 2020 2020 2020 7370 6563  le..        spec
-000086c0: 6966 6963 2063 6174 6567 6f72 6965 732e  ific categories.
-000086d0: 0020 2020 2020 2020 2046 6f72 2063 7562  .        For cub
-000086e0: 6573 2077 6865 7265 2074 6865 206c 6173  es where the las
-000086f0: 7420 6469 6d65 6e73 696f 6e20 6973 2063  t dimension is c
-00008700: 6174 6567 6f72 6963 616c 2c20 636f 6c75  ategorical, colu
-00008710: 6d6e 2069 6478 7320 7265 7072 6573 656e  mn idxs represen
-00008720: 7400 0020 2020 2020 2020 2022 2222 3244  t..        """2D
-00008730: 206f 7074 696f 6e61 6c20 6e70 2e66 6c6f   optional np.flo
-00008740: 6174 3634 206e 6461 7272 6179 206f 6620  at64 ndarray of 
-00008750: 6f76 6572 6c61 7073 2d70 5f76 616c 7320  overlaps-p_vals 
-00008760: 6d61 7472 6963 6573 2066 6f72 2073 7562  matrices for sub
-00008770: 7661 7220 6964 782e 0020 2020 2064 6566  var idx..    def
-00008780: 2070 6169 7277 6973 655f 7369 676e 6966   pairwise_signif
-00008790: 6963 616e 6365 5f70 5f76 616c 7328 7365  icance_p_vals(se
-000087a0: 6c66 2c20 636f 6c75 6d6e 5f69 6478 293a  lf, column_idx):
-000087b0: 0000 2020 2020 2020 2020 292e 5400 2020  ..        ).T.  
-000087c0: 2020 2020 2020 2020 2020 5d00 2020 2020            ].    
-000087d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000087e0: 636f 6c20 696e 2072 616e 6765 286c 656e  col in range(len
-000087f0: 2873 656c 662e 5f63 6f6c 756d 6e5f 6f72  (self._column_or
-00008800: 6465 7229 2900 2020 2020 2020 2020 2020  der)).          
-00008810: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-00008820: 2020 2020 2020 2020 2020 2020 6f6e 6c79              only
-00008830: 5f6c 6172 6765 722c 0020 2020 2020 2020  _larger,.       
-00008840: 2020 2020 2020 2020 2020 2020 2061 6c70               alp
-00008850: 6861 2c00 2020 2020 2020 2020 2020 2020  ha,.            
-00008860: 2020 2020 2020 2020 7365 6c66 2e70 6169          self.pai
-00008870: 7277 6973 655f 7369 676e 6966 6963 616e  rwise_significan
-00008880: 6365 5f6d 6561 6e73 5f74 5f73 7461 7473  ce_means_t_stats
-00008890: 2863 6f6c 292c 0020 2020 2020 2020 2020  (col),.         
-000088a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000088b0: 7061 6972 7769 7365 5f73 6967 6e69 6669  pairwise_signifi
-000088c0: 6361 6e63 655f 6d65 616e 735f 705f 7661  cance_means_p_va
-000088d0: 6c73 2863 6f6c 292c 0020 2020 2020 2020  ls(col),.       
-000088e0: 2020 2020 2020 2020 2073 656c 662e 5f70           self._p
-000088f0: 6169 7277 6973 655f 696e 6469 6365 7328  airwise_indices(
-00008900: 0020 2020 2020 2020 2020 2020 205b 0020  .            [. 
-00008910: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
-00008920: 2e61 7272 6179 2800 2020 2020 2020 2020  .array(.        
-00008930: 2222 2200 2020 2020 2020 2020 5261 6973  """.        Rais
-00008940: 6573 2060 5661 6c75 6545 7272 6f72 2069  es `ValueError i
-00008950: 6620 7468 6520 6375 6265 2d72 6573 756c  f the cube-resul
-00008960: 7420 646f 6573 206e 6f74 2069 6e63 6c75  t does not inclu
-00008970: 6465 2060 6d65 616e 7360 2063 7562 652d  de `means` cube-
-00008980: 6d65 6173 7572 6573 2e00 0020 2020 2020  measures...     
-00008990: 2020 2022 2222 3244 206f 7074 696f 6e61     """2D optiona
-000089a0: 6c20 6e64 6172 7261 7920 6f66 2074 7570  l ndarray of tup
-000089b0: 6c65 206f 6620 696e 7420 636f 6c75 6d6e  le of int column
-000089c0: 2d69 6478 7320 6d65 616e 7320 7061 6972  -idxs means pair
-000089d0: 7769 7365 2d74 2074 6872 6573 686f 6c64  wise-t threshold
-000089e0: 2e00 2020 2020 6465 6620 7061 6972 7769  ..    def pairwi
-000089f0: 7365 5f6d 6561 6e73 5f69 6e64 6963 6573  se_means_indices
-00008a00: 2873 656c 662c 2061 6c70 6861 2c20 6f6e  (self, alpha, on
-00008a10: 6c79 5f6c 6172 6765 7229 3a00 0020 2020  ly_larger):..   
-00008a20: 2020 2020 2029 2e54 0020 2020 2020 2020       ).T.       
-00008a30: 2020 2020 205d 0020 2020 2020 2020 2020       ].         
-00008a40: 2020 2020 2020 2066 6f72 2063 6f6c 2069         for col i
-00008a50: 6e20 7261 6e67 6528 6c65 6e28 7365 6c66  n range(len(self
-00008a60: 2e5f 636f 6c75 6d6e 5f6f 7264 6572 2929  ._column_order))
-00008a70: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00008a80: 2029 0020 2020 2020 2020 2020 2020 2020   ).             
-00008a90: 2020 2020 2020 206f 6e6c 795f 6c61 7267         only_larg
-00008aa0: 6572 2c00 2020 2020 2020 2020 2020 2020  er,.            
-00008ab0: 2020 2020 2020 2020 616c 7068 612c 0020          alpha,. 
-00008ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ad0: 2020 2073 656c 662e 7061 6972 7769 7365     self.pairwise
-00008ae0: 5f73 6967 6e69 6669 6361 6e63 655f 745f  _significance_t_
-00008af0: 7374 6174 7328 636f 6c29 2c00 2020 2020  stats(col),.    
-00008b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b10: 7365 6c66 2e70 6169 7277 6973 655f 7369  self.pairwise_si
-00008b20: 676e 6966 6963 616e 6365 5f70 5f76 616c  gnificance_p_val
-00008b30: 7328 636f 6c29 2c00 2020 2020 2020 2020  s(col),.        
-00008b40: 2020 2020 2020 2020 7365 6c66 2e5f 7061          self._pa
-00008b50: 6972 7769 7365 5f69 6e64 6963 6573 2800  irwise_indices(.
-00008b60: 2020 2020 2020 2020 2020 2020 5b00 2020              [.  
-00008b70: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-00008b80: 6172 7261 7928 0020 2020 2020 2020 2022  array(.        "
-00008b90: 2222 0020 2020 2020 2020 2052 6169 7365  "".        Raise
-00008ba0: 7320 6056 616c 7565 4572 726f 7220 6966  s `ValueError if
-00008bb0: 2074 6865 2063 7562 652d 7265 7375 6c74   the cube-result
-00008bc0: 2064 6f65 7320 6e6f 7420 696e 636c 7564   does not includ
-00008bd0: 6520 606f 7665 726c 6170 7360 2063 7562  e `overlaps` cub
-00008be0: 652d 6d65 6173 7572 6573 2e00 0020 2020  e-measures...   
-00008bf0: 2020 2020 2022 2222 3244 206f 7074 696f       """2D optio
-00008c00: 6e61 6c20 6e64 6172 7261 7920 6f66 2074  nal ndarray of t
-00008c10: 7570 6c65 206f 6620 696e 7420 636f 6c75  uple of int colu
-00008c20: 6d6e 2d69 6478 7320 7061 6972 7769 7365  mn-idxs pairwise
-00008c30: 2d74 2074 6872 6573 686f 6c64 2e00 2020  -t threshold..  
-00008c40: 2020 6465 6620 7061 6972 7769 7365 5f69    def pairwise_i
-00008c50: 6e64 6963 6573 2873 656c 662c 2061 6c70  ndices(self, alp
-00008c60: 6861 2c20 6f6e 6c79 5f6c 6172 6765 7229  ha, only_larger)
-00008c70: 3a00 0020 2020 2020 2020 2072 6574 7572  :..        retur
-00008c80: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-00008c90: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
-00008ca0: 6173 7572 6573 2e6d 6561 6e73 2e62 6c6f  asures.means.blo
-00008cb0: 636b 7329 0020 2020 2020 2020 2022 2222  cks).        """
-00008cc0: 0020 2020 2020 2020 2052 6169 7365 7320  .        Raises 
-00008cd0: 6056 616c 7565 4572 726f 7260 2069 6620  `ValueError` if 
-00008ce0: 7468 6520 6375 6265 2d72 6573 756c 7420  the cube-result 
-00008cf0: 646f 6573 206e 6f74 2069 6e63 6c75 6465  does not include
-00008d00: 2061 206d 6561 6e73 2063 7562 652d 6d65   a means cube-me
-00008d10: 6173 7572 652e 0000 2020 2020 2020 2020  asure...        
-00008d20: 2222 2232 4420 6f70 7469 6f6e 616c 206e  """2D optional n
-00008d30: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
-00008d40: 7920 6f66 206d 6561 6e20 666f 7220 6561  y of mean for ea
-00008d50: 6368 2063 656c 6c2e 0020 2020 2064 6566  ch cell..    def
-00008d60: 206d 6561 6e73 2873 656c 6629 3a00 2020   means(self):.  
-00008d70: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-00008d80: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00008d90: 7475 706c 6528 6920 666f 7220 692c 2072  tuple(i for i, r
-00008da0: 6f77 5f69 6478 2069 6e20 656e 756d 6572  ow_idx in enumer
-00008db0: 6174 6528 7365 6c66 2e5f 726f 775f 6f72  ate(self._row_or
-00008dc0: 6465 7229 2069 6620 726f 775f 6964 7820  der) if row_idx 
-00008dd0: 3c20 3029 0020 2020 2020 2020 2023 202d  < 0).        # -
-00008de0: 2d2d 2069 6e73 6572 7469 6f6e 7320 6861  -- insertions ha
-00008df0: 7665 2061 206e 6567 6174 6976 6520 6964  ve a negative id
-00008e00: 7820 696e 2074 6865 6972 206f 7264 6572  x in their order
-00008e10: 2073 6571 7565 6e63 6520 2d2d 2d00 2020   sequence ---.  
-00008e20: 2020 2020 2020 2222 2274 7570 6c65 206f        """tuple o
-00008e30: 6620 696e 7420 696e 6465 7820 6f66 2065  f int index of e
-00008e40: 6163 6820 7375 6274 6f74 616c 2072 6f77  ach subtotal row
-00008e50: 2069 6e20 736c 6963 652e 2222 2200 2020   in slice.""".  
-00008e60: 2020 6465 6620 696e 7365 7274 6564 5f72    def inserted_r
-00008e70: 6f77 5f69 6478 7328 7365 6c66 293a 0020  ow_idxs(self):. 
-00008e80: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00008e90: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00008ea0: 2074 7570 6c65 2869 2066 6f72 2069 2c20   tuple(i for i, 
-00008eb0: 636f 6c5f 6964 7820 696e 2065 6e75 6d65  col_idx in enume
-00008ec0: 7261 7465 2873 656c 662e 5f63 6f6c 756d  rate(self._colum
-00008ed0: 6e5f 6f72 6465 7229 2069 6620 636f 6c5f  n_order) if col_
-00008ee0: 6964 7820 3c20 3029 0020 2020 2020 2020  idx < 0).       
-00008ef0: 2023 202d 2d2d 2069 6e73 6572 7469 6f6e   # --- insertion
-00008f00: 7320 6861 7665 2061 206e 6567 6174 6976  s have a negativ
-00008f10: 6520 6964 7820 696e 2074 6865 6972 206f  e idx in their o
-00008f20: 7264 6572 2073 6571 7565 6e63 6520 2d2d  rder sequence --
-00008f30: 2d00 2020 2020 2020 2020 2222 2274 7570  -.        """tup
-00008f40: 6c65 206f 6620 696e 7420 696e 6465 7820  le of int index 
-00008f50: 6f66 2065 6163 6820 7375 6274 6f74 616c  of each subtotal
-00008f60: 2063 6f6c 756d 6e20 696e 2073 6c69 6365   column in slice
-00008f70: 2e22 2222 0020 2020 2064 6566 2069 6e73  .""".    def ins
-00008f80: 6572 7465 645f 636f 6c75 6d6e 5f69 6478  erted_column_idx
-00008f90: 7328 7365 6c66 293a 0020 2020 2040 6c61  s(self):.    @la
-00008fa0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-00008fb0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00008fc0: 5f64 6966 665f 656c 656d 656e 745f 6964  _diff_element_id
-00008fd0: 7873 2873 656c 662e 5f63 6f6c 756d 6e73  xs(self._columns
-00008fe0: 5f64 696d 656e 7369 6f6e 2c20 7365 6c66  _dimension, self
-00008ff0: 2e5f 636f 6c75 6d6e 5f6f 7264 6572 2900  ._column_order).
-00009000: 6164 0000 1100 0000 a501 0000 0010 0000  ad..............
-00009010: 5e00 0000 0000 0000 d40f 0000 c80f 0000  ^...............
-00009020: a40f 0000 580f 0000 2e0f 0000 e00e 0000  ....X...........
-00009030: d20e 0000 990e 0000 730e 0000 2f0e 0000  ........s.../...
-00009040: 250e 0000 240e 0000 e60d 0000 920d 0000  %...$...........
-00009050: 910d 0000 3c0d 0000 300d 0000 f70c 0000  ....<...0.......
-00009060: d10c 0000 7b0c 0000 710c 0000 700c 0000  ....{...q...p...
-00009070: 310c 0000 dc0b 0000 db0b 0000 860b 0000  1...............
-00009080: 7a0b 0000 410b 0000 1b0b 0000 c40a 0000  z...A...........
-00009090: ba0a 0000 b90a 0000 a70a 0000 810a 0000  ................
-000090a0: 510a 0000 500a 0000 fc09 0000 ed09 0000  Q...P...........
-000090b0: e109 0000 8e09 0000 8d09 0000 7b09 0000  ............{...
-000090c0: 5909 0000 2509 0000 2409 0000 d008 0000  Y...%...$.......
-000090d0: c108 0000 b508 0000 6608 0000 6508 0000  ........f...e...
-000090e0: 5308 0000 3c08 0000 f007 0000 ac07 0000  S...<...........
-000090f0: ab07 0000 9907 0000 7407 0000 2807 0000  ........t...(...
-00009100: 2707 0000 da06 0000 8906 0000 3506 0000  '...........5...
-00009110: 2506 0000 1906 0000 c705 0000 c605 0000  %...............
-00009120: b405 0000 9905 0000 5d05 0000 5c05 0000  ........]...\...
-00009130: 0605 0000 b204 0000 a504 0000 9904 0000  ................
-00009140: 4b04 0000 4a04 0000 3804 0000 1f04 0000  K...J...8.......
-00009150: e303 0000 e203 0000 8c03 0000 3803 0000  ............8...
-00009160: 2b03 0000 1f03 0000 d302 0000 d202 0000  +...............
-00009170: c002 0000 a602 0000 6b02 0000 6a02 0000  ........k...j...
-00009180: 1302 0000 be01 0000 b101 0000 a501 0000  ................
-00009190: a401 0000 0000 0000 0000 0000 0000 0000  ................
-000091a0: 0000 0000 0020 2020 2020 2020 2022 2222  .....        """
-000091b0: 0020 2020 2020 2020 2072 6f77 2e00 2020  .        row..  
-000091c0: 2020 2020 2020 7468 6520 7365 7175 656e        the sequen
-000091d0: 6365 2061 6e64 206c 6162 656c 7320 6172  ce and labels ar
-000091e0: 6520 6f72 6465 7265 6420 746f 2063 6f72  e ordered to cor
-000091f0: 7265 7370 6f6e 6420 7769 7468 2074 6865  respond with the
-00009200: 6972 2072 6573 7065 6374 6976 6520 6461  ir respective da
-00009210: 7461 0020 2020 2020 2020 2054 6865 7365  ta.        These
-00009220: 2061 7265 2073 7569 7461 626c 6520 666f   are suitable fo
-00009230: 7220 7573 6520 6173 2072 6f77 2068 6561  r use as row hea
-00009240: 6469 6e67 733b 206c 6162 656c 7320 666f  dings; labels fo
-00009250: 7220 7375 6274 6f74 616c 2072 6f77 7320  r subtotal rows 
-00009260: 6170 7065 6172 2069 6e00 0020 2020 2020  appear in..     
-00009270: 2020 2022 2222 3144 2073 7472 206e 6461     """1D str nda
-00009280: 7272 6179 206f 6620 726f 7720 6e61 6d65  rray of row name
-00009290: 2066 6f72 2065 6163 6820 6d61 7472 6978   for each matrix
-000092a0: 2072 6f77 2e00 2020 2020 6465 6620 726f   row..    def ro
-000092b0: 775f 6c61 6265 6c73 2873 656c 6629 3a00  w_labels(self):.
-000092c0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-000092d0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-000092e0: 6e20 7365 6c66 2e5f 6469 6d65 6e73 696f  n self._dimensio
-000092f0: 6e5f 636f 6465 7328 7365 6c66 2e5f 726f  n_codes(self._ro
-00009300: 7773 5f64 696d 656e 7369 6f6e 2c20 7365  ws_dimension, se
-00009310: 6c66 2e5f 726f 775f 6f72 6465 7229 0020  lf._row_order). 
-00009320: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-00009330: 2020 2072 6f77 2e00 2020 2020 2020 2020     row..        
-00009340: 7468 6520 7365 7175 656e 6365 2061 6e64  the sequence and
-00009350: 2063 6f64 6573 2061 7265 206f 7264 6572   codes are order
-00009360: 6564 2074 6f20 636f 7272 6573 706f 6e64  ed to correspond
-00009370: 2077 6974 6820 7468 6569 7220 7265 7370   with their resp
-00009380: 6563 7469 7665 2064 6174 6100 2020 2020  ective data.    
-00009390: 2020 2020 5468 6573 6520 6172 6520 7375      These are su
-000093a0: 6974 6162 6c65 2066 6f72 2075 7365 2061  itable for use a
-000093b0: 7320 726f 7720 6865 6164 696e 6773 3b20  s row headings; 
-000093c0: 636f 6465 7320 666f 7220 7375 6274 6f74  codes for subtot
-000093d0: 616c 2072 6f77 7320 6170 7065 6172 2069  al rows appear i
-000093e0: 6e00 0020 2020 2020 2020 2022 2222 3144  n..        """1D
-000093f0: 2069 6e74 206e 6461 7272 6179 206f 6620   int ndarray of 
-00009400: 726f 7720 636f 6465 7320 666f 7220 6561  row codes for ea
-00009410: 6368 206d 6174 7269 7820 726f 772e 0020  ch matrix row.. 
-00009420: 2020 2064 6566 2072 6f77 5f63 6f64 6573     def row_codes
-00009430: 2873 656c 6629 3a00 2020 2020 406c 617a  (self):.    @laz
-00009440: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-00009450: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00009460: 6469 6d65 6e73 696f 6e5f 616c 6961 7365  dimension_aliase
-00009470: 7328 7365 6c66 2e5f 726f 7773 5f64 696d  s(self._rows_dim
-00009480: 656e 7369 6f6e 2c20 7365 6c66 2e5f 726f  ension, self._ro
-00009490: 775f 6f72 6465 7229 0020 2020 2020 2020  w_order).       
-000094a0: 2022 2222 0020 2020 2020 2020 2072 6f77   """.        row
-000094b0: 2e00 2020 2020 2020 2020 7468 6520 7365  ..        the se
-000094c0: 7175 656e 6365 2061 6e64 2061 6c69 6173  quence and alias
-000094d0: 2061 7265 206f 7264 6572 6564 2074 6f20   are ordered to 
-000094e0: 636f 7272 6573 706f 6e64 2077 6974 6820  correspond with 
-000094f0: 7468 6569 7220 7265 7370 6563 7469 7665  their respective
-00009500: 2064 6174 6100 2020 2020 2020 2020 5468   data.        Th
-00009510: 6573 6520 6172 6520 7375 6974 6162 6c65  ese are suitable
-00009520: 2066 6f72 2075 7365 2061 7320 726f 7720   for use as row 
-00009530: 6865 6164 696e 6773 3b20 616c 6961 7320  headings; alias 
-00009540: 666f 7220 7375 6274 6f74 616c 2072 6f77  for subtotal row
-00009550: 7320 6170 7065 6172 2069 6e00 0020 2020  s appear in..   
-00009560: 2020 2020 2022 2222 3144 2073 7472 206e       """1D str n
-00009570: 6461 7272 6179 206f 6620 726f 7720 616c  darray of row al
-00009580: 6961 7320 666f 7220 6561 6368 206d 6174  ias for each mat
-00009590: 7269 7820 726f 772e 0020 2020 2064 6566  rix row..    def
-000095a0: 2072 6f77 5f61 6c69 6173 6573 2873 656c   row_aliases(sel
-000095b0: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-000095c0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-000095d0: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
-000095e0: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
-000095f0: 2e5f 6d65 6173 7572 6573 2e72 6f77 5f63  ._measures.row_c
-00009600: 6f6d 7061 7261 626c 655f 636f 756e 7473  omparable_counts
-00009610: 2e62 6c6f 636b 7329 0020 2020 2020 2020  .blocks).       
-00009620: 2022 2222 0020 2020 2020 2020 206e 702e   """.        np.
-00009630: 6e61 6e2e 0020 2020 2020 2020 2061 7265  nan..        are
-00009640: 6e27 7420 7468 6520 7361 6d65 2e20 5468  n't the same. Th
-00009650: 6520 7661 6c75 6573 2061 6c6f 6e67 2074  e values along t
-00009660: 6865 7365 2073 7562 746f 7461 6c20 6469  hese subtotal di
-00009670: 6666 6572 656e 6365 7320 6172 6520 6465  fferences are de
-00009680: 6669 6e65 6420 6173 0020 2020 2020 2020  fined as.       
-00009690: 2064 6966 6665 7265 6e63 6520 6265 6361   difference beca
-000096a0: 7573 6520 7468 6573 6520 6172 6520 6e6f  use these are no
-000096b0: 7420 636f 6e73 6964 6572 6564 2063 6f6d  t considered com
-000096c0: 7061 7261 626c 6520 7369 6e63 6520 7468  parable since th
-000096d0: 6569 7220 6261 7365 7300 2020 2020 2020  eir bases.      
-000096e0: 2020 436f 6d70 6172 6162 6c65 2069 6e20    Comparable in 
-000096f0: 7468 6520 2272 6f77 2220 6469 6d65 6e73  the "row" dimens
-00009700: 696f 6e20 6d65 616e 7320 7468 6174 2069  ion means that i
-00009710: 7427 7320 6e6f 7420 6120 726f 7720 7375  t's not a row su
-00009720: 6274 6f74 616c 0000 2020 2020 2020 2020  btotal..        
-00009730: 2222 2232 4420 6e70 2e66 6c6f 6174 3634  """2D np.float64
-00009740: 206e 6461 7272 6179 206f 6620 636f 756e   ndarray of coun
-00009750: 7473 2063 6f6d 7061 7261 626c 6520 696e  ts comparable in
-00009760: 2074 6865 2072 6f77 2064 696d 656e 7369   the row dimensi
-00009770: 6f6e 2e00 2020 2020 6465 6620 726f 775f  on..    def row_
-00009780: 636f 6d70 6172 6162 6c65 5f63 6f75 6e74  comparable_count
-00009790: 7328 7365 6c66 293a 0020 2020 2040 6c61  s(self):.    @la
-000097a0: 7a79 7072 6f70 6572 7479 0000 2020 2020  zyproperty..    
-000097b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000097c0: 5f61 7373 656d 626c 655f 6d61 7472 6978  _assemble_matrix
-000097d0: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
-000097e0: 7076 616c 7565 732e 626c 6f63 6b73 2900  pvalues.blocks).
-000097f0: 2020 2020 2020 2020 2222 2232 4420 6e70          """2D np
-00009800: 2e66 6c6f 6174 3634 2f6e 702e 6e61 6e20  .float64/np.nan 
-00009810: 6e64 6172 7261 7920 6f66 2070 2d76 616c  ndarray of p-val
-00009820: 7565 2066 6f72 2065 6163 6820 6d61 7472  ue for each matr
-00009830: 6978 2063 656c 6c2e 2222 2200 2020 2020  ix cell.""".    
-00009840: 6465 6620 7076 616c 7565 7328 7365 6c66  def pvalues(self
-00009850: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-00009860: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-00009870: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
-00009880: 626c 655f 6d61 7472 6978 2873 656c 662e  ble_matrix(self.
-00009890: 5f6d 6561 7375 7265 732e 706f 7075 6c61  _measures.popula
-000098a0: 7469 6f6e 5f73 7464 5f65 7272 2e62 6c6f  tion_std_err.blo
-000098b0: 636b 7329 0020 2020 2020 2020 2022 2222  cks).        """
-000098c0: 0020 2020 2020 2020 2074 7970 6573 2e00  .        types..
-000098d0: 2020 2020 2020 2020 5468 6520 7072 6f70          The prop
-000098e0: 6f72 7469 6f6e 2075 7365 6420 746f 2063  ortion used to c
-000098f0: 616c 6375 6c61 7465 2070 726f 706f 7274  alculate proport
-00009900: 696f 6e20 636f 756e 7473 2064 6570 656e  ion counts depen
-00009910: 6473 206f 6e20 7468 6520 6469 6d65 6e73  ds on the dimens
-00009920: 696f 6e00 0020 2020 2020 2020 2022 2222  ion..        """
-00009930: 3244 206e 702e 666c 6f61 7436 3420 6e64  2D np.float64 nd
-00009940: 6172 7261 7920 6f66 2073 7461 6e64 6172  array of standar
-00009950: 6420 6572 726f 7273 0020 2020 2064 6566  d errors.    def
-00009960: 2070 6f70 756c 6174 696f 6e5f 7374 645f   population_std_
-00009970: 6572 7228 7365 6c66 293a 0020 2020 2040  err(self):.    @
-00009980: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00009990: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000099a0: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
-000099b0: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
-000099c0: 732e 706f 7075 6c61 7469 6f6e 5f70 726f  s.population_pro
-000099d0: 706f 7274 696f 6e73 2e62 6c6f 636b 7329  portions.blocks)
-000099e0: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-000099f0: 2020 2020 2074 7970 6573 2e00 2020 2020       types..    
-00009a00: 2020 2020 5468 6520 7072 6f70 6f72 7469      The proporti
-00009a10: 6f6e 2075 7365 6420 746f 2063 616c 6375  on used to calcu
-00009a20: 6c61 7465 2070 726f 706f 7274 696f 6e20  late proportion 
-00009a30: 636f 756e 7473 2064 6570 656e 6473 206f  counts depends o
-00009a40: 6e20 7468 6520 6469 6d65 6e73 696f 6e00  n the dimension.
-00009a50: 0020 2020 2020 2020 2022 2222 3244 206e  .        """2D n
-00009a60: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
-00009a70: 7920 6f66 2070 726f 706f 7274 696f 6e73  y of proportions
-00009a80: 0020 2020 2064 6566 2070 6f70 756c 6174  .    def populat
-00009a90: 696f 6e5f 7072 6f70 6f72 7469 6f6e 7328  ion_proportions(
-00009aa0: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-00009ab0: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-00009ac0: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-00009ad0: 7365 6c66 2e5f 6d65 6173 7572 6573 2e70  self._measures.p
-00009ae0: 6169 7277 6973 655f 7369 676e 6966 6963  airwise_signific
-00009af0: 616e 6365 5f6d 6561 6e73 5f74 5f73 7461  ance_means_t_sta
-00009b00: 7473 2862 6173 655f 636f 6c75 6d6e 5f69  ts(base_column_i
-00009b10: 6478 292e 626c 6f63 6b73 0020 2020 2020  dx).blocks.     
-00009b20: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00009b30: 6173 7365 6d62 6c65 5f6d 6174 7269 7828  assemble_matrix(
-00009b40: 0020 2020 2020 2020 2062 6173 655f 636f  .        base_co
-00009b50: 6c75 6d6e 5f69 6478 203d 2073 656c 662e  lumn_idx = self.
-00009b60: 5f63 6f6c 756d 6e5f 6f72 6465 725b 636f  _column_order[co
-00009b70: 6c75 6d6e 5f69 6478 5d00 2020 2020 2020  lumn_idx].      
-00009b80: 2020 2222 2200 2020 2020 2020 2020 5261    """.        Ra
-00009b90: 6973 6573 2060 5661 6c75 6545 7272 6f72  ises `ValueError
-00009ba0: 2069 6620 7468 6520 6375 6265 2d72 6573   if the cube-res
-00009bb0: 756c 7420 646f 6573 206e 6f74 2069 6e63  ult does not inc
-00009bc0: 6c75 6465 2060 6d65 616e 6020 6375 6265  lude `mean` cube
-00009bd0: 2d6d 6561 7375 7265 732e 0000 2020 2020  -measures...    
-00009be0: 2020 2020 2222 2232 4420 6f70 7469 6f6e      """2D option
-00009bf0: 616c 206e 702e 666c 6f61 7436 3420 6e64  al np.float64 nd
-00009c00: 6172 7261 7920 6f66 206d 6561 6e20 6469  array of mean di
-00009c10: 6666 6572 656e 6365 2074 5f73 7461 7473  fference t_stats
-00009c20: 2066 6f72 2063 6f6c 756d 6e20 6964 782e   for column idx.
-00009c30: 0020 2020 2064 6566 2070 6169 7277 6973  .    def pairwis
-00009c40: 655f 7369 676e 6966 6963 616e 6365 5f6d  e_significance_m
-00009c50: 6561 6e73 5f74 5f73 7461 7473 2873 656c  eans_t_stats(sel
-00009c60: 662c 2063 6f6c 756d 6e5f 6964 7829 3a00  f, column_idx):.
-00009c70: 0020 2020 2020 2020 2029 0020 2020 2020  .        ).     
-00009c80: 2020 2020 2020 2073 656c 662e 5f6d 6561         self._mea
-00009c90: 7375 7265 732e 7061 6972 7769 7365 5f73  sures.pairwise_s
-00009ca0: 6967 6e69 6669 6361 6e63 655f 6d65 616e  ignificance_mean
-00009cb0: 735f 705f 7661 6c73 2862 6173 655f 636f  s_p_vals(base_co
-00009cc0: 6c75 6d6e 5f69 6478 292e 626c 6f63 6b73  lumn_idx).blocks
-00009cd0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009ce0: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
-00009cf0: 6174 7269 7828 0020 2020 2020 2020 2062  atrix(.        b
-00009d00: 6173 655f 636f 6c75 6d6e 5f69 6478 203d  ase_column_idx =
-00009d10: 2073 656c 662e 5f63 6f6c 756d 6e5f 6f72   self._column_or
-00009d20: 6465 725b 636f 6c75 6d6e 5f69 6478 5d00  der[column_idx].
-00009d30: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00009d40: 2020 2020 5261 6973 6573 2060 5661 6c75      Raises `Valu
-00009d50: 6545 7272 6f72 2069 6620 7468 6520 6375  eError if the cu
-00009d60: 6265 2d72 6573 756c 7420 646f 6573 206e  be-result does n
-00009d70: 6f74 2069 6e63 6c75 6465 2060 6d65 616e  ot include `mean
-00009d80: 6020 6375 6265 2d6d 6561 7375 7265 732e  ` cube-measures.
-00009d90: 0000 2020 2020 2020 2020 2222 2232 4420  ..        """2D 
-00009da0: 6f70 7469 6f6e 616c 206e 702e 666c 6f61  optional np.floa
-00009db0: 7436 3420 6e64 6172 7261 7920 6f66 206d  t64 ndarray of m
-00009dc0: 6561 6e20 6469 6666 6572 656e 6365 2070  ean difference p
-00009dd0: 5f76 616c 7320 666f 7220 636f 6c75 6d6e  _vals for column
-00009de0: 2069 6478 2e00 2020 2020 6465 6620 7061   idx..    def pa
-00009df0: 6972 7769 7365 5f73 6967 6e69 6669 6361  irwise_significa
-00009e00: 6e63 655f 6d65 616e 735f 705f 7661 6c73  nce_means_p_vals
-00009e10: 2873 656c 662c 2063 6f6c 756d 6e5f 6964  (self, column_id
-00009e20: 7829 3a00 0020 2020 2020 2020 2029 0020  x):..        ). 
-00009e30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009e40: 5f6d 6561 7375 7265 732e 7061 6972 7769  _measures.pairwi
-00009e50: 7365 5f74 5f73 7461 7473 2862 6173 655f  se_t_stats(base_
-00009e60: 636f 6c75 6d6e 5f69 6478 292e 626c 6f63  column_idx).bloc
-00009e70: 6b73 0020 2020 2020 2020 2072 6574 7572  ks.        retur
-00009e80: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-00009e90: 5f6d 6174 7269 7828 0020 2020 2020 2020  _matrix(.       
-00009ea0: 2062 6173 655f 636f 6c75 6d6e 5f69 6478   base_column_idx
-00009eb0: 203d 2073 656c 662e 5f63 6f6c 756d 6e5f   = self._column_
-00009ec0: 6f72 6465 725b 636f 6c75 6d6e 5f69 6478  order[column_idx
-00009ed0: 5d00 2020 2020 2020 2020 2020 2020 2900  ].            ).
-00009ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ef0: 7365 6c66 2e5f 6d65 6173 7572 6573 2e70  self._measures.p
-00009f00: 6169 7277 6973 655f 745f 7374 6174 735f  airwise_t_stats_
-00009f10: 666f 725f 7375 6276 6172 2863 6f6c 756d  for_subvar(colum
-00009f20: 6e5f 6964 7829 2e62 6c6f 636b 7300 2020  n_idx).blocks.  
-00009f30: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00009f40: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
-00009f50: 6d61 7472 6978 2800 2020 2020 2020 2020  matrix(.        
-00009f60: 2020 2020 2320 4966 206f 7665 726c 6170      # If overlap
-00009f70: 7320 6172 6520 6465 6669 6e65 642c 2063  s are defined, c
-00009f80: 616c 6375 6c61 7465 2073 6967 6e69 6669  alculate signifi
-00009f90: 6361 6e63 6520 6261 7365 6420 6f6e 2074  cance based on t
-00009fa0: 6865 6d00 2020 2020 2020 2020 6966 2073  hem.        if s
-00009fb0: 656c 662e 5f63 7562 655f 6861 735f 6f76  elf._cube_has_ov
-00009fc0: 6572 6c61 7073 3a00 2020 2020 2020 2020  erlaps:.        
-00009fd0: 2222 2200 2020 2020 2020 2020 616e 6420  """.        and 
-00009fe0: 6076 616c 6964 5f6f 7665 726c 6170 7360  `valid_overlaps`
-00009ff0: 2063 7562 652d 6d65 6173 7572 6573 2e00   cube-measures..
-0000a000: 6164 0000 0200 0000 6a01 0000 0010 0000  ad......j.......
-0000a010: 5300 0000 0000 0000 bf0f 0000 b30f 0000  S...............
-0000a020: 5f0f 0000 0e0f 0000 be0e 0000 650e 0000  _...........e...
-0000a030: 280e 0000 fd0d 0000 fc0d 0000 c80d 0000  (...............
-0000a040: 7e0d 0000 7d0d 0000 6b0d 0000 450d 0000  ~...}...k...E...
-0000a050: ee0c 0000 9a0c 0000 3f0c 0000 e60b 0000  ........?.......
-0000a060: a60b 0000 7c0b 0000 570b 0000 150b 0000  ....|...W.......
-0000a070: ef0a 0000 dd0a 0000 cf0a 0000 ce0a 0000  ................
-0000a080: 9a0a 0000 4d0a 0000 4c0a 0000 3a0a 0000  ....M...L...:...
-0000a090: 1b0a 0000 d209 0000 8b09 0000 8a09 0000  ................
-0000a0a0: 7809 0000 5209 0000 0309 0000 b508 0000  x...R...........
-0000a0b0: b408 0000 a208 0000 7c08 0000 2d08 0000  ........|...-...
-0000a0c0: df07 0000 de07 0000 cc07 0000 ab07 0000  ................
-0000a0d0: 6207 0000 1907 0000 1807 0000 0607 0000  b...............
-0000a0e0: e106 0000 8f06 0000 3d06 0000 3c06 0000  ........=...<...
-0000a0f0: 2a06 0000 ff05 0000 aa05 0000 a905 0000  *...............
-0000a100: 5205 0000 fa04 0000 aa04 0000 9704 0000  R...............
-0000a110: 8b04 0000 3304 0000 3204 0000 2004 0000  ....3...2... ...
-0000a120: f503 0000 a203 0000 4f03 0000 4e03 0000  ........O...N...
-0000a130: 3c03 0000 1e03 0000 d402 0000 d302 0000  <...............
-0000a140: 7d02 0000 7102 0000 2602 0000 2502 0000  }...q...&...%...
-0000a150: 1302 0000 ff01 0000 bf01 0000 be01 0000  ................
-0000a160: 6a01 0000 0000 0000 0000 2020 2020 2020  j.........      
-0000a170: 2020 5261 6973 6573 2060 5661 6c75 6545    Raises `ValueE
-0000a180: 7272 6f72 6020 6966 2074 6865 2063 7562  rror` if the cub
-0000a190: 652d 7265 7375 6c74 2064 6f65 7320 6e6f  e-result does no
-0000a1a0: 7420 696e 636c 7564 6520 6120 7375 6d20  t include a sum 
-0000a1b0: 6375 6265 2d6d 6561 7375 7265 2e00 0020  cube-measure... 
-0000a1c0: 2020 2020 2020 2022 2222 3244 206f 7074         """2D opt
-0000a1d0: 696f 6e61 6c20 6e70 2e66 6c6f 6174 3634  ional np.float64
-0000a1e0: 206e 6461 7272 6179 206f 6620 7375 6d20   ndarray of sum 
-0000a1f0: 666f 7220 6561 6368 2063 656c 6c2e 0020  for each cell.. 
-0000a200: 2020 2064 6566 2073 756d 7328 7365 6c66     def sums(self
-0000a210: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-0000a220: 6572 7479 0000 2020 2020 2020 2020 7265  erty..        re
-0000a230: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
-0000a240: 626c 655f 6d61 7472 6978 2873 656c 662e  ble_matrix(self.
-0000a250: 5f6d 6561 7375 7265 732e 736d 6f6f 7468  _measures.smooth
-0000a260: 6564 5f6d 6561 6e73 2e62 6c6f 636b 7329  ed_means.blocks)
-0000a270: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-0000a280: 2020 2020 2052 6169 7365 7320 6056 616c       Raises `Val
-0000a290: 7565 4572 726f 7260 2069 6620 7468 6520  ueError` if the 
-0000a2a0: 6375 6265 2d72 6573 756c 7420 646f 6573  cube-result does
-0000a2b0: 206e 6f74 2069 6e63 6c75 6465 2061 206d   not include a m
-0000a2c0: 6561 6e73 2063 7562 652d 6d65 6173 7572  eans cube-measur
-0000a2d0: 652e 0000 2020 2020 2020 2020 2222 2232  e...        """2
-0000a2e0: 4420 6f70 7469 6f6e 616c 206e 702e 666c  D optional np.fl
-0000a2f0: 6f61 7436 3420 6e64 6172 7261 7920 6f66  oat64 ndarray of
-0000a300: 2073 6d6f 6f74 6865 6420 6d65 616e 2066   smoothed mean f
-0000a310: 6f72 2065 6163 6820 6365 6c6c 2e00 2020  or each cell..  
-0000a320: 2020 6465 6620 736d 6f6f 7468 6564 5f6d    def smoothed_m
-0000a330: 6561 6e73 2873 656c 6629 3a00 2020 2020  eans(self):.    
-0000a340: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-0000a350: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000a360: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6172  lf._assemble_mar
-0000a370: 6769 6e61 6c28 7365 6c66 2e5f 6d65 6173  ginal(self._meas
-0000a380: 7572 6573 2e73 6d6f 6f74 6865 645f 636f  ures.smoothed_co
-0000a390: 6c75 6d6e 735f 7363 616c 655f 6d65 616e  lumns_scale_mean
-0000a3a0: 2900 2020 2020 2020 2020 2222 224f 7074  ).        """Opt
-0000a3b0: 696f 6e61 6c20 3144 2073 6d6f 6f74 6865  ional 1D smoothe
-0000a3c0: 6420 636f 6c75 6d6e 2073 6361 6c65 206d  d column scale m
-0000a3d0: 6561 6e20 6d61 7267 696e 616c 2066 6f72  ean marginal for
-0000a3e0: 2074 6869 7320 6375 6265 2d72 6573 756c   this cube-resul
-0000a3f0: 7422 2222 0020 2020 2064 6566 2073 6d6f  t""".    def smo
-0000a400: 6f74 6865 645f 636f 6c75 6d6e 735f 7363  othed_columns_sc
-0000a410: 616c 655f 6d65 616e 2873 656c 6629 3a00  ale_mean(self):.
-0000a420: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-0000a430: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-0000a440: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-0000a450: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
-0000a460: 6173 7572 6573 2e73 6d6f 6f74 6865 645f  asures.smoothed_
-0000a470: 636f 6c75 6d6e 5f70 726f 706f 7274 696f  column_proportio
-0000a480: 6e73 2e62 6c6f 636b 7329 0020 2020 2020  ns.blocks).     
-0000a490: 2020 2022 2222 0020 2020 2020 2020 2069     """.        i
-0000a4a0: 6e63 6c75 7369 7665 2e00 2020 2020 2020  nclusive..      
-0000a4b0: 2020 616e 6420 312e 3020 696e 636c 7573    and 1.0 inclus
-0000a4c0: 6976 652c 2062 7574 2073 7562 746f 7461  ive, but subtota
-0000a4d0: 6c20 6469 6666 6572 656e 6365 7320 6361  l differences ca
-0000a4e0: 6e20 6265 2062 6574 7765 656e 202d 312e  n be between -1.
-0000a4f0: 3020 616e 6420 312e 3000 2020 2020 2020  0 and 1.0.      
-0000a500: 2020 636f 6c75 6d6e 2074 6865 2063 656c    column the cel
-0000a510: 6c20 6170 7065 6172 7320 696e 2028 616b  l appears in (ak
-0000a520: 612e 2063 6f6c 756d 6e2d 6d61 7267 696e  a. column-margin
-0000a530: 292e 2047 656e 6572 616c 6c79 2061 206e  ). Generally a n
-0000a540: 756d 6265 7220 6265 7477 6565 6e20 302e  umber between 0.
-0000a550: 3000 2020 2020 2020 2020 5468 6973 2069  0.        This i
-0000a560: 7320 7468 6520 7072 6f70 6f72 7469 6f6e  s the proportion
-0000a570: 206f 6620 7468 6520 7765 6967 6874 6564   of the weighted
-0000a580: 2d63 6f75 6e74 2066 6f72 2063 656c 6c20  -count for cell 
-0000a590: 746f 2074 6865 2077 6569 6768 7465 642d  to the weighted-
-0000a5a0: 4e20 6f66 2074 6865 0000 2020 2020 2020  N of the..      
-0000a5b0: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
-0000a5c0: 3634 206e 6461 7272 6179 206f 6620 736d  64 ndarray of sm
-0000a5d0: 6f6f 7468 6564 2063 6f6c 756d 6e2d 7072  oothed column-pr
-0000a5e0: 6f70 6f72 7469 6f6e 2066 6f72 2065 6163  oportion for eac
-0000a5f0: 6820 6d61 7472 6978 2063 656c 6c2e 0020  h matrix cell.. 
-0000a600: 2020 2064 6566 2073 6d6f 6f74 6865 645f     def smoothed_
-0000a610: 636f 6c75 6d6e 5f70 726f 706f 7274 696f  column_proportio
-0000a620: 6e73 2873 656c 6629 3a00 2020 2020 406c  ns(self):.    @l
-0000a630: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-0000a640: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000a650: 2e5f 6173 7365 6d62 6c65 5f6d 6174 7269  ._assemble_matri
-0000a660: 7828 7365 6c66 2e5f 6d65 6173 7572 6573  x(self._measures
-0000a670: 2e73 6d6f 6f74 6865 645f 636f 6c75 6d6e  .smoothed_column
-0000a680: 5f69 6e64 6578 2e62 6c6f 636b 7329 0020  _index.blocks). 
-0000a690: 2020 2020 2020 2022 2222 3244 206e 702e         """2D np.
-0000a6a0: 666c 6f61 7436 3420 6e64 6172 7261 7920  float64 ndarray 
-0000a6b0: 6f66 2073 6d6f 6f74 6865 6420 636f 6c75  of smoothed colu
-0000a6c0: 6d6e 2d69 6e64 6578 2066 6f72 2065 6163  mn-index for eac
-0000a6d0: 6820 7461 626c 6520 6365 6c6c 2e22 2222  h table cell."""
-0000a6e0: 0020 2020 2064 6566 2073 6d6f 6f74 6865  .    def smoothe
-0000a6f0: 645f 636f 6c75 6d6e 5f69 6e64 6578 2873  d_column_index(s
-0000a700: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-0000a710: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-0000a720: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
-0000a730: 7365 6d62 6c65 5f6d 6172 6769 6e61 6c28  semble_marginal(
-0000a740: 7365 6c66 2e5f 6d65 6173 7572 6573 2e72  self._measures.r
-0000a750: 6f77 735f 7363 616c 655f 6d65 6469 616e  ows_scale_median
-0000a760: 2900 2020 2020 2020 2020 2222 224f 7074  ).        """Opt
-0000a770: 696f 6e61 6c20 3144 2052 6f77 2073 6361  ional 1D Row sca
-0000a780: 6c65 206d 6564 6961 6e20 6d61 7267 696e  le median margin
-0000a790: 616c 2066 6f72 2074 6869 7320 6375 6265  al for this cube
-0000a7a0: 2d72 6573 756c 7422 2222 0020 2020 2064  -result""".    d
-0000a7b0: 6566 2072 6f77 735f 7363 616c 655f 6d65  ef rows_scale_me
-0000a7c0: 6469 616e 2873 656c 6629 3a00 2020 2020  dian(self):.    
-0000a7d0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-0000a7e0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000a7f0: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6172  lf._assemble_mar
-0000a800: 6769 6e61 6c28 7365 6c66 2e5f 6d65 6173  ginal(self._meas
-0000a810: 7572 6573 2e72 6f77 735f 7363 616c 655f  ures.rows_scale_
-0000a820: 6d65 616e 5f73 7464 6572 7229 0020 2020  mean_stderr).   
-0000a830: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
-0000a840: 2031 4420 726f 7720 7363 616c 6520 6d65   1D row scale me
-0000a850: 616e 2073 7464 2064 6576 206d 6172 6769  an std dev margi
-0000a860: 6e61 6c20 666f 7220 7468 6973 2063 7562  nal for this cub
-0000a870: 652d 7265 7375 6c74 2222 2200 2020 2020  e-result""".    
-0000a880: 6465 6620 726f 7773 5f73 6361 6c65 5f6d  def rows_scale_m
-0000a890: 6561 6e5f 7374 6465 7272 2873 656c 6629  ean_stderr(self)
-0000a8a0: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-0000a8b0: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-0000a8c0: 7572 6e20 7365 6c66 2e5f 6173 7365 6d62  urn self._assemb
-0000a8d0: 6c65 5f6d 6172 6769 6e61 6c28 7365 6c66  le_marginal(self
-0000a8e0: 2e5f 6d65 6173 7572 6573 2e72 6f77 735f  ._measures.rows_
-0000a8f0: 7363 616c 655f 6d65 616e 5f73 7464 6465  scale_mean_stdde
-0000a900: 7629 0020 2020 2020 2020 2022 2222 4f70  v).        """Op
-0000a910: 7469 6f6e 616c 2031 4420 726f 7720 7363  tional 1D row sc
-0000a920: 616c 6520 6d65 616e 2073 7464 2064 6576  ale mean std dev
-0000a930: 206d 6172 6769 6e61 6c20 666f 7220 7468   marginal for th
-0000a940: 6973 2063 7562 652d 7265 7375 6c74 2222  is cube-result""
-0000a950: 2200 2020 2020 6465 6620 726f 7773 5f73  ".    def rows_s
-0000a960: 6361 6c65 5f6d 6561 6e5f 7374 6464 6576  cale_mean_stddev
-0000a970: 2873 656c 6629 3a00 2020 2020 406c 617a  (self):.    @laz
-0000a980: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-0000a990: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0000a9a0: 6173 7365 6d62 6c65 5f6d 6172 6769 6e61  assemble_margina
-0000a9b0: 6c28 7365 6c66 2e5f 6d65 6173 7572 6573  l(self._measures
-0000a9c0: 2e72 6f77 735f 7363 616c 655f 6d65 616e  .rows_scale_mean
-0000a9d0: 2900 2020 2020 2020 2020 2222 224f 7074  ).        """Opt
-0000a9e0: 696f 6e61 6c20 3144 2052 6f77 2073 6361  ional 1D Row sca
-0000a9f0: 6c65 206d 6564 6961 6e20 6d61 7267 696e  le median margin
-0000aa00: 616c 2066 6f72 2074 6869 7320 6375 6265  al for this cube
-0000aa10: 2d72 6573 756c 7422 2222 0020 2020 2064  -result""".    d
-0000aa20: 6566 2072 6f77 735f 7363 616c 655f 6d65  ef rows_scale_me
-0000aa30: 616e 2873 656c 6629 3a00 2020 2020 406c  an(self):.    @l
-0000aa40: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-0000aa50: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000aa60: 2e5f 6173 7365 6d62 6c65 5f6d 6172 6769  ._assemble_margi
-0000aa70: 6e61 6c28 7365 6c66 2e5f 6d65 6173 7572  nal(self._measur
-0000aa80: 6573 2e72 6f77 735f 7461 626c 655f 7072  es.rows_table_pr
-0000aa90: 6f70 6f72 7469 6f6e 2900 2020 2020 2020  oportion).      
-0000aaa0: 2020 2320 2d2d 2d20 6f74 6865 7277 6973    # --- otherwis
-0000aab0: 6520 726f 7773 2d6d 6172 6769 6e20 6973  e rows-margin is
-0000aac0: 2061 2076 6563 746f 7220 2d2d 2d00 0020   a vector ---.. 
-0000aad0: 2020 2020 2020 2020 2020 2029 0020 2020             ).   
-0000aae0: 2020 2020 2020 2020 2020 2020 2029 0020               ). 
-0000aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab00: 2020 2073 656c 662e 5f64 696d 656e 7369     self._dimensi
-0000ab10: 6f6e 732c 0020 2020 2020 2020 2020 2020  ons,.           
-0000ab20: 2020 2020 2020 2020 2073 656c 662e 726f           self.ro
-0000ab30: 7773 5f6d 6172 6769 6e20 2f20 7365 6c66  ws_margin / self
-0000ab40: 2e74 6162 6c65 5f77 6569 6768 7465 645f  .table_weighted_
-0000ab50: 6261 7365 732c 0020 2020 2020 2020 2020  bases,.         
-0000ab60: 2020 2020 2020 2053 756d 5375 6274 6f74         SumSubtot
-0000ab70: 616c 732e 626c 6f63 6b73 2800 2020 2020  als.blocks(.    
-0000ab80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000ab90: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
-0000aba0: 7472 6978 2800 2020 2020 2020 2020 6966  trix(.        if
-0000abb0: 206e 6f74 2073 656c 662e 5f6d 6561 7375   not self._measu
-0000abc0: 7265 732e 726f 7773 5f74 6162 6c65 5f70  res.rows_table_p
-0000abd0: 726f 706f 7274 696f 6e2e 6973 5f64 6566  roportion.is_def
-0000abe0: 696e 6564 3a00 2020 2020 2020 2020 2320  ined:.        # 
-0000abf0: 2d2d 2d20 7265 7175 6972 6520 6368 616e  --- require chan
-0000ac00: 6765 7320 746f 2065 7870 6f72 7465 7220  ges to exporter 
-0000ac10: 746f 2075 7365 2074 6865 2062 6173 6573  to use the bases
-0000ac20: 2074 6f20 6769 7665 2061 2022 726f 7773   to give a "rows
-0000ac30: 5f6d 6172 6769 6e5f 7261 6e67 6522 0020  _margin_range". 
-0000ac40: 2020 2020 2020 2023 202d 2d2d 2054 4f44         # --- TOD
-0000ac50: 4f3a 2053 686f 756c 6420 726f 7773 5f6d  O: Should rows_m
-0000ac60: 6172 6769 6e5f 7072 6f70 6f72 7469 6f6e  argin_proportion
-0000ac70: 206f 6e6c 7920 6265 2064 6566 696e 6564   only be defined
-0000ac80: 2077 6865 6e20 6974 2773 2031 443f 2054   when it's 1D? T
-0000ac90: 6869 7320 776f 756c 6400 2020 2020 2020  his would.      
-0000aca0: 2020 2320 2d2d 2d20 616e 2058 5f4d 5220    # --- an X_MR 
-0000acb0: 736c 6963 6520 7072 6f64 7563 6573 2061  slice produces a
-0000acc0: 2032 4420 726f 7773 2d6d 6172 6769 6e20   2D rows-margin 
-0000acd0: 2865 6163 6820 6365 6c6c 2068 6173 2069  (each cell has i
-0000ace0: 7473 206f 776e 204e 2920 2d2d 2d00 2020  ts own N) ---.  
-0000acf0: 2020 2020 2020 2222 2231 442f 3244 206e        """1D/2D n
-0000ad00: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
-0000ad10: 7920 6f66 2077 6569 6768 7465 642d 7072  y of weighted-pr
-0000ad20: 6f70 6f72 7469 6f6e 2066 6f72 2065 6163  oportion for eac
-0000ad30: 6820 736c 6963 6520 726f 772f 6365 6c6c  h slice row/cell
-0000ad40: 2e22 2222 0020 2020 2064 6566 2072 6f77  .""".    def row
-0000ad50: 735f 6d61 7267 696e 5f70 726f 706f 7274  s_margin_proport
-0000ad60: 696f 6e28 7365 6c66 293a 0020 2020 2040  ion(self):.    @
-0000ad70: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000ad80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000ad90: 662e 5f61 7373 656d 626c 655f 6d61 7267  f._assemble_marg
-0000ada0: 696e 616c 2873 656c 662e 5f6d 6561 7375  inal(self._measu
-0000adb0: 7265 732e 726f 7773 5f77 6569 6768 7465  res.rows_weighte
-0000adc0: 645f 6261 7365 2900 2020 2020 2020 2020  d_base).        
-0000add0: 2320 2d2d 2d20 6f74 6865 7277 6973 6520  # --- otherwise 
-0000ade0: 726f 7773 2d6d 6172 6769 6e20 6973 2061  rows-margin is a
-0000adf0: 2076 6563 746f 7220 2d2d 2d00 0020 2020   vector ---..   
-0000ae00: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000ae10: 7365 6c66 2e72 6f77 5f77 6569 6768 7465  self.row_weighte
-0000ae20: 645f 6261 7365 7300 2020 2020 2020 2020  d_bases.        
-0000ae30: 6966 206e 6f74 2073 656c 662e 5f6d 6561  if not self._mea
-0000ae40: 7375 7265 732e 726f 7773 5f77 6569 6768  sures.rows_weigh
-0000ae50: 7465 645f 6261 7365 2e69 735f 6465 6669  ted_base.is_defi
-0000ae60: 6e65 643a 0020 2020 2020 2020 2023 202d  ned:.        # -
-0000ae70: 2d2d 2072 6571 7569 7265 2063 6861 6e67  -- require chang
-0000ae80: 6573 2074 6f20 6578 706f 7274 6572 2074  es to exporter t
-0000ae90: 6f20 7573 6520 7468 6520 6261 7365 7320  o use the bases 
-0000aea0: 746f 2067 6976 6520 6120 2272 6f77 735f  to give a "rows_
-0000aeb0: 6d61 7267 696e 5f72 616e 6765 2200 2020  margin_range".  
-0000aec0: 2020 2020 2020 2320 2d2d 2d20 544f 444f        # --- TODO
-0000aed0: 3a20 5368 6f75 6c64 2072 6f77 735f 6d61  : Should rows_ma
-0000aee0: 7267 696e 206f 6e6c 7920 6265 2064 6566  rgin only be def
-0000aef0: 696e 6564 2077 6865 6e20 6974 2773 2031  ined when it's 1
-0000af00: 443f 2054 6869 7320 776f 756c 6400 2020  D? This would.  
-0000af10: 2020 2020 2020 2320 2d2d 2d20 5468 6973        # --- This
-0000af20: 2069 7320 7265 616c 6c79 206a 7573 7420   is really just 
-0000af30: 616e 6f74 6865 7220 7761 7920 746f 2063  another way to c
-0000af40: 616c 6c20 7468 6520 726f 775f 7765 6967  all the row_weig
-0000af50: 6874 6564 5f62 6173 6573 202d 2d2d 0020  hted_bases ---. 
-0000af60: 2020 2020 2020 2023 202d 2d2d 2061 6e20         # --- an 
-0000af70: 585f 4d52 2073 6c69 6365 2070 726f 6475  X_MR slice produ
-0000af80: 6365 7320 6120 3244 2072 6f77 732d 6d61  ces a 2D rows-ma
-0000af90: 7267 696e 2028 6561 6368 2063 656c 6c20  rgin (each cell 
-0000afa0: 6861 7320 6974 7320 6f77 6e20 4e29 202d  has its own N) -
-0000afb0: 2d2d 0020 2020 2020 2020 2022 2222 0020  --.        """. 
-0000afc0: 2020 2020 2020 2062 6563 6175 7365 2065         because e
-0000afd0: 6163 6820 6365 6c6c 2068 6173 2061 2064  ach cell has a d
-0000afe0: 6973 7469 6e63 7420 6d61 7267 696e 2069  istinct margin i
-0000aff0: 6e20 7375 6368 2061 2073 6c69 6365 2e00  n such a slice..
-0000b000: 6164 0000 5b00 0000 af01 0000 0010 0000  ad..[...........
-0000b010: 4e00 0000 0000 0000 f40f 0000 b30f 0000  N...............
-0000b020: b20f 0000 a00f 0000 8a0f 0000 470f 0000  ............G...
-0000b030: 460f 0000 ef0e 0000 e30e 0000 a00e 0000  F...............
-0000b040: 9f0e 0000 8d0e 0000 730e 0000 230e 0000  ........s...#...
-0000b050: 220e 0000 d30d 0000 d20d 0000 820d 0000  "...............
-0000b060: 2d0d 0000 d30c 0000 860c 0000 850c 0000  -...............
-0000b070: 790c 0000 3d0c 0000 ff0b 0000 bb0b 0000  y...=...........
-0000b080: 620b 0000 210b 0000 cb0a 0000 a00a 0000  b...!...........
-0000b090: 9f0a 0000 8d0a 0000 6d0a 0000 140a 0000  ........m.......
-0000b0a0: 130a 0000 ba09 0000 6409 0000 0e09 0000  ........d.......
-0000b0b0: ef08 0000 e308 0000 a208 0000 a108 0000  ................
-0000b0c0: 8f08 0000 7308 0000 2508 0000 2408 0000  ....s...%...$...
-0000b0d0: d507 0000 d407 0000 8407 0000 2b07 0000  ............+...
-0000b0e0: d706 0000 8106 0000 7506 0000 3b06 0000  ........u...;...
-0000b0f0: ff05 0000 bd05 0000 6605 0000 2705 0000  ........f...'...
-0000b100: d304 0000 aa04 0000 a904 0000 9704 0000  ................
-0000b110: 6d04 0000 1604 0000 bf03 0000 be03 0000  m...............
-0000b120: ac03 0000 8b03 0000 4003 0000 3f03 0000  ........@...?...
-0000b130: e802 0000 9002 0000 3902 0000 2d02 0000  ........9...-...
-0000b140: df01 0000 de01 0000 cc01 0000 af01 0000  ................
-0000b150: ae01 0000 0000 0000 0000 0000 0000 0000  ................
-0000b160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1a0: 0000 0000 0000 0000 0000 0000 0000 0020  ............... 
-0000b1b0: 2020 2064 6566 2074 6162 6c65 5f73 7464     def table_std
-0000b1c0: 5f65 7272 2873 656c 6629 3a00 2020 2020  _err(self):.    
-0000b1d0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-0000b1e0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000b1f0: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
-0000b200: 7269 7828 7365 6c66 2e5f 6d65 6173 7572  rix(self._measur
-0000b210: 6573 2e74 6162 6c65 5f70 726f 706f 7274  es.table_proport
-0000b220: 696f 6e73 2e62 6c6f 636b 7329 0020 2020  ions.blocks).   
-0000b230: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-0000b240: 2031 2e30 2069 6e63 6c75 7369 7665 2c20   1.0 inclusive, 
-0000b250: 6275 7420 7375 6274 6f74 616c 2064 6966  but subtotal dif
-0000b260: 6665 7265 6e63 6573 2063 616e 2062 6520  ferences can be 
-0000b270: 6265 7477 6565 6e20 2d31 2e30 2061 6e64  between -1.0 and
-0000b280: 2031 2e30 2069 6e63 6c75 7369 7665 2e00   1.0 inclusive..
-0000b290: 2020 2020 2020 2020 726f 7720 7468 6520          row the 
-0000b2a0: 6365 6c6c 2061 7070 6561 7273 2069 6e20  cell appears in 
-0000b2b0: 2861 6b61 2e20 7461 626c 652d 6d61 7267  (aka. table-marg
-0000b2c0: 696e 292e 2047 656e 6572 616c 6c79 2061  in). Generally a
-0000b2d0: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
-0000b2e0: 302e 3020 616e 6400 2020 2020 2020 2020  0.0 and.        
-0000b2f0: 5468 6973 2069 7320 7468 6520 7072 6f70  This is the prop
-0000b300: 6f72 7469 6f6e 206f 6620 7468 6520 7765  ortion of the we
-0000b310: 6967 6874 6564 2d63 6f75 6e74 2066 6f72  ighted-count for
-0000b320: 2063 656c 6c20 746f 2074 6865 2077 6569   cell to the wei
-0000b330: 6768 7465 642d 4e20 6f66 2074 6865 0000  ghted-N of the..
-0000b340: 2020 2020 2020 2020 2222 2232 4420 6e70          """2D np
-0000b350: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
-0000b360: 206f 6620 7461 626c 652d 7072 6f70 6f72   of table-propor
-0000b370: 7469 6f6e 2066 6f72 2065 6163 6820 6d61  tion for each ma
-0000b380: 7472 6978 2063 656c 6c2e 0020 2020 2064  trix cell..    d
-0000b390: 6566 2074 6162 6c65 5f70 726f 706f 7274  ef table_proport
-0000b3a0: 696f 6e73 2873 656c 6629 3a00 2020 2020  ions(self):.    
-0000b3b0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-0000b3c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000b3d0: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
-0000b3e0: 7269 7828 7365 6c66 2e5f 6d65 6173 7572  rix(self._measur
-0000b3f0: 6573 2e74 6162 6c65 5f70 726f 706f 7274  es.table_proport
-0000b400: 696f 6e5f 7661 7269 616e 6365 732e 626c  ion_variances.bl
-0000b410: 6f63 6b73 2900 2020 2020 2020 2020 2222  ocks).        ""
-0000b420: 2232 4420 6e64 6172 7261 7920 6f66 206e  "2D ndarray of n
-0000b430: 702e 666c 6f61 7436 3420 7461 626c 652d  p.float64 table-
-0000b440: 7072 6f70 6f72 7469 6f6e 2076 6172 6961  proportion varia
-0000b450: 6e63 6520 666f 7220 6561 6368 206d 6174  nce for each mat
-0000b460: 7269 7820 6365 6c6c 2e22 2222 0020 2020  rix cell.""".   
-0000b470: 2064 6566 2074 6162 6c65 5f70 726f 706f   def table_propo
-0000b480: 7274 696f 6e5f 7661 7269 616e 6365 7328  rtion_variances(
-0000b490: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-0000b4a0: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-0000b4b0: 2020 7265 7475 726e 2073 656c 662e 7461    return self.ta
-0000b4c0: 626c 655f 7765 6967 6874 6564 5f62 6173  ble_weighted_bas
-0000b4d0: 6573 0020 2020 2020 2020 2020 2020 2072  es.            r
-0000b4e0: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
-0000b4f0: 6d62 6c65 5f6d 6172 6769 6e61 6c28 7365  mble_marginal(se
-0000b500: 6c66 2e5f 6d65 6173 7572 6573 2e72 6f77  lf._measures.row
-0000b510: 735f 7461 626c 655f 7765 6967 6874 6564  s_table_weighted
-0000b520: 5f62 6173 6529 0020 2020 2020 2020 2069  _base).        i
-0000b530: 6620 7365 6c66 2e5f 6d65 6173 7572 6573  f self._measures
-0000b540: 2e72 6f77 735f 7461 626c 655f 7765 6967  .rows_table_weig
-0000b550: 6874 6564 5f62 6173 652e 6973 5f64 6566  hted_base.is_def
-0000b560: 696e 6564 3a00 2020 2020 2020 2020 2020  ined:.          
-0000b570: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
-0000b580: 7373 656d 626c 655f 6d61 7267 696e 616c  ssemble_marginal
-0000b590: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
-0000b5a0: 636f 6c75 6d6e 735f 7461 626c 655f 7765  columns_table_we
-0000b5b0: 6967 6874 6564 5f62 6173 6529 0020 2020  ighted_base).   
-0000b5c0: 2020 2020 2069 6620 7365 6c66 2e5f 6d65       if self._me
-0000b5d0: 6173 7572 6573 2e63 6f6c 756d 6e73 5f74  asures.columns_t
-0000b5e0: 6162 6c65 5f77 6569 6768 7465 645f 6261  able_weighted_ba
-0000b5f0: 7365 2e69 735f 6465 6669 6e65 643a 0020  se.is_defined:. 
-0000b600: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000b610: 6e20 7365 6c66 2e5f 6d65 6173 7572 6573  n self._measures
-0000b620: 2e74 6162 6c65 5f77 6569 6768 7465 645f  .table_weighted_
-0000b630: 6261 7365 2e76 616c 7565 0020 2020 2020  base.value.     
-0000b640: 2020 2069 6620 7365 6c66 2e5f 6d65 6173     if self._meas
-0000b650: 7572 6573 2e74 6162 6c65 5f77 6569 6768  ures.table_weigh
-0000b660: 7465 645f 6261 7365 2e69 735f 6465 6669  ted_base.is_defi
-0000b670: 6e65 643a 0020 2020 2020 2020 2022 2222  ned:.        """
-0000b680: 0020 2020 2020 2020 2020 2020 202a 2041  .            * A
-0000b690: 5252 4159 5f58 5f41 5252 4159 202d 2032  RRAY_X_ARRAY - 2
-0000b6a0: 4420 6e64 6172 7261 7920 7769 7468 2061  D ndarray with a
-0000b6b0: 2064 6973 7469 6e63 7420 7461 626c 652d   distinct table-
-0000b6c0: 6d61 7267 696e 2076 616c 7565 2070 6572  margin value per
-0000b6d0: 2063 656c 6c2e 0020 2020 2020 2020 2020   cell..         
-0000b6e0: 2020 202a 2058 5f41 5252 4159 202d 2031     * X_ARRAY - 1
-0000b6f0: 4420 6e64 6172 7261 7920 6f66 2076 616c  D ndarray of val
-0000b700: 7565 2070 6572 202a 636f 6c75 6d6e 2a20  ue per *column* 
-0000b710: 7768 656e 206f 6e6c 7920 636f 6c75 6d6e  when only column
-0000b720: 2069 7320 4152 5241 592e 0020 2020 2020   is ARRAY..     
-0000b730: 2020 2020 2020 202a 2041 5252 4159 5f58         * ARRAY_X
-0000b740: 202d 2031 4420 6e64 6172 7261 7920 6f66   - 1D ndarray of
-0000b750: 2076 616c 7565 2070 6572 202a 726f 772a   value per *row*
-0000b760: 2077 6865 6e20 6f6e 6c79 2072 6f77 7320   when only rows 
-0000b770: 6469 6d65 6e73 696f 6e20 6973 2041 5252  dimension is ARR
-0000b780: 4159 2e00 2020 2020 2020 2020 2020 2020  AY..            
-0000b790: 2a20 4341 545f 585f 4341 5420 2d20 7363  * CAT_X_CAT - sc
-0000b7a0: 616c 6172 2066 6c6f 6174 2076 616c 7565  alar float value
-0000b7b0: 2077 6865 6e20 736c 6963 6520 6861 7320   when slice has 
-0000b7c0: 6e6f 2041 5252 4159 2064 696d 656e 7369  no ARRAY dimensi
-0000b7d0: 6f6e 2e00 0020 2020 2020 2020 2054 6869  on...        Thi
-0000b7e0: 7320 7661 6c75 6520 6861 7320 666f 7572  s value has four
-0000b7f0: 2064 6973 7469 6e63 7420 666f 726d 732c   distinct forms,
-0000b800: 2064 6570 656e 6469 6e67 206f 6e20 7468   depending on th
-0000b810: 6520 736c 6963 6520 6469 6d65 6e73 696f  e slice dimensio
-0000b820: 6e73 3a00 0020 2020 2020 2020 2022 2222  ns:..        """
-0000b830: 5363 616c 6172 2c20 3144 2c20 6f72 2032  Scalar, 1D, or 2
-0000b840: 4420 6e64 6172 7261 7920 6f66 206e 702e  D ndarray of np.
-0000b850: 666c 6f61 7436 3420 7765 6967 6874 6564  float64 weighted
-0000b860: 2d4e 2066 6f72 2074 6869 7320 736c 6963  -N for this slic
-0000b870: 652e 0020 2020 2064 6566 2074 6162 6c65  e..    def table
-0000b880: 5f6d 6172 6769 6e28 7365 6c66 293a 0020  _margin(self):. 
-0000b890: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-0000b8a0: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000b8b0: 2073 656c 662e 5f6d 6561 7375 7265 732e   self._measures.
-0000b8c0: 7461 626c 655f 756e 7765 6967 6874 6564  table_unweighted
-0000b8d0: 5f62 6173 6573 5f72 616e 6765 2e76 616c  _bases_range.val
-0000b8e0: 7565 0020 2020 2020 2020 2022 2222 0020  ue.        """. 
-0000b8f0: 2020 2020 2020 206f 6620 656d 7074 7920         of empty 
-0000b900: 726f 7773 2f63 6f6c 756d 6e73 2e00 2020  rows/columns..  
-0000b910: 2020 2020 2020 6974 2069 7320 2275 6e70        it is "unp
-0000b920: 7275 6e65 6422 2c20 6d65 616e 696e 6720  runed", meaning 
-0000b930: 7468 6174 2069 7420 6973 2063 616c 6375  that it is calcu
-0000b940: 6c61 7465 6420 6265 666f 7265 2061 6e79  lated before any
-0000b950: 2068 6964 696e 6720 6f72 2072 656d 6f76   hiding or remov
-0000b960: 696e 6700 2020 2020 2020 2020 6f6e 6520  ing.        one 
-0000b970: 7461 626c 652d 7765 6967 6874 6564 2d62  table-weighted-b
-0000b980: 6173 652e 2054 6869 7320 636f 6c6c 6170  ase. This collap
-0000b990: 7365 7320 616c 6c20 7468 6520 7661 6c75  ses all the valu
-0000b9a0: 6573 2074 6865 6d20 746f 2074 6865 2072  es them to the r
-0000b9b0: 616e 6765 2c20 616e 6400 2020 2020 2020  ange, and.      
-0000b9c0: 2020 4120 4341 545f 585f 4341 5420 6861    A CAT_X_CAT ha
-0000b9d0: 7320 6120 7363 616c 6172 2066 6f72 2061  s a scalar for a
-0000b9e0: 6c6c 2074 6162 6c65 2d77 6569 6768 7465  ll table-weighte
-0000b9f0: 642d 6261 7365 732c 2062 7574 2061 7272  d-bases, but arr
-0000ba00: 6179 7320 6861 7665 206d 6f72 6520 7468  ays have more th
-0000ba10: 616e 0000 2020 2020 2020 2020 2222 225b  an..        """[
-0000ba20: 6d69 6e2c 206d 6178 5d20 6e70 2e66 6c6f  min, max] np.flo
-0000ba30: 6174 3634 206e 6461 7272 6179 2072 616e  at64 ndarray ran
-0000ba40: 6765 206f 6620 7468 6520 7461 626c 655f  ge of the table_
-0000ba50: 6d61 7267 696e 2028 7461 626c 652d 7765  margin (table-we
-0000ba60: 6967 6874 6564 2d62 6173 6529 0020 2020  ighted-base).   
-0000ba70: 2064 6566 2074 6162 6c65 5f62 6173 655f   def table_base_
-0000ba80: 7261 6e67 6528 7365 6c66 293a 0020 2020  range(self):.   
-0000ba90: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000baa0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000bab0: 656c 662e 7461 626c 655f 756e 7765 6967  elf.table_unweig
-0000bac0: 6874 6564 5f62 6173 6573 0020 2020 2020  hted_bases.     
-0000bad0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000bae0: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6172  lf._assemble_mar
-0000baf0: 6769 6e61 6c28 7365 6c66 2e5f 6d65 6173  ginal(self._meas
-0000bb00: 7572 6573 2e72 6f77 735f 7461 626c 655f  ures.rows_table_
-0000bb10: 756e 7765 6967 6874 6564 5f62 6173 6529  unweighted_base)
-0000bb20: 0020 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000bb30: 2e5f 6d65 6173 7572 6573 2e72 6f77 735f  ._measures.rows_
-0000bb40: 7461 626c 655f 756e 7765 6967 6874 6564  table_unweighted
-0000bb50: 5f62 6173 652e 6973 5f64 6566 696e 6564  _base.is_defined
-0000bb60: 3a00 2020 2020 2020 2020 2020 2020 7265  :.            re
-0000bb70: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
-0000bb80: 626c 655f 6d61 7267 696e 616c 2873 656c  ble_marginal(sel
-0000bb90: 662e 5f6d 6561 7375 7265 732e 636f 6c75  f._measures.colu
-0000bba0: 6d6e 735f 7461 626c 655f 756e 7765 6967  mns_table_unweig
-0000bbb0: 6874 6564 5f62 6173 6529 0020 2020 2020  hted_base).     
-0000bbc0: 2020 2069 6620 7365 6c66 2e5f 6d65 6173     if self._meas
-0000bbd0: 7572 6573 2e63 6f6c 756d 6e73 5f74 6162  ures.columns_tab
-0000bbe0: 6c65 5f75 6e77 6569 6768 7465 645f 6261  le_unweighted_ba
-0000bbf0: 7365 2e69 735f 6465 6669 6e65 643a 0020  se.is_defined:. 
-0000bc00: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000bc10: 6e20 7365 6c66 2e5f 6d65 6173 7572 6573  n self._measures
-0000bc20: 2e74 6162 6c65 5f75 6e77 6569 6768 7465  .table_unweighte
-0000bc30: 645f 6261 7365 2e76 616c 7565 0020 2020  d_base.value.   
-0000bc40: 2020 2020 2069 6620 7365 6c66 2e5f 6d65       if self._me
-0000bc50: 6173 7572 6573 2e74 6162 6c65 5f75 6e77  asures.table_unw
-0000bc60: 6569 6768 7465 645f 6261 7365 2e69 735f  eighted_base.is_
-0000bc70: 6465 6669 6e65 643a 0020 2020 2020 2020  defined:.       
-0000bc80: 2022 2222 0000 2020 2020 2020 2020 2020   """..          
-0000bc90: 2020 2a20 4341 545f 585f 4341 5420 2d20    * CAT_X_CAT - 
-0000bca0: 7363 616c 6172 2066 6c6f 6174 2076 616c  scalar float val
-0000bcb0: 7565 2077 6865 6e20 736c 6963 6520 6861  ue when slice ha
-0000bcc0: 7320 6e6f 204d 5220 6469 6d65 6e73 696f  s no MR dimensio
-0000bcd0: 6e2e 0020 2020 2020 2020 2020 2020 202a  n..            *
-0000bce0: 2058 5f41 5252 202d 2031 4420 6e64 6172   X_ARR - 1D ndar
-0000bcf0: 7261 7920 6f66 2076 616c 7565 2070 6572  ray of value per
-0000bd00: 202a 636f 6c75 6d6e 2a20 7768 656e 206f   *column* when o
-0000bd10: 6e6c 7920 636f 6c75 6d6e 7320 6469 6d65  nly columns dime
-0000bd20: 6e73 696f 6e20 6973 2041 5252 0020 2020  nsion is ARR.   
-0000bd30: 2020 2020 2020 2020 202a 2041 5252 5f58           * ARR_X
-0000bd40: 202d 2031 4420 6e64 6172 7261 7920 6f66   - 1D ndarray of
-0000bd50: 2076 616c 7565 2070 6572 202a 726f 772a   value per *row*
-0000bd60: 2077 6865 6e20 6f6e 6c79 2072 6f77 7320   when only rows 
-0000bd70: 6469 6d65 6e73 696f 6e20 6973 2041 5252  dimension is ARR
-0000bd80: 2e00 2020 2020 2020 2020 2020 2020 2a20  ..            * 
-0000bd90: 4152 525f 585f 4152 5220 2d20 3244 206e  ARR_X_ARR - 2D n
-0000bda0: 6461 7272 6179 2077 6974 6820 6120 6469  darray with a di
-0000bdb0: 7374 696e 6374 2074 6162 6c65 2d62 6173  stinct table-bas
-0000bdc0: 6520 7661 6c75 6520 7065 7220 6365 6c6c  e value per cell
-0000bdd0: 2e00 0020 2020 2020 2020 2054 6869 7320  ...        This 
-0000bde0: 7661 6c75 6520 6861 7320 666f 7572 2064  value has four d
-0000bdf0: 6973 7469 6e63 7420 666f 726d 732c 2064  istinct forms, d
-0000be00: 6570 656e 6469 6e67 206f 6e20 7468 6520  epending on the 
-0000be10: 736c 6963 6520 6469 6d65 6e73 696f 6e73  slice dimensions
-0000be20: 3a00 0020 2020 2020 2020 2022 2222 5363  :..        """Sc
-0000be30: 616c 6172 2c20 3144 2c20 6f72 2032 4420  alar, 1D, or 2D 
-0000be40: 6e64 6172 7261 7920 6f66 206e 702e 666c  ndarray of np.fl
-0000be50: 6f61 7436 3420 756e 7765 6967 6874 6564  oat64 unweighted
-0000be60: 2d4e 2066 6f72 2074 6869 7320 736c 6963  -N for this slic
-0000be70: 652e 0020 2020 2064 6566 2074 6162 6c65  e..    def table
-0000be80: 5f62 6173 6528 7365 6c66 293a 0020 2020  _base(self):.   
-0000be90: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000bea0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000beb0: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
-0000bec0: 7472 6978 2873 656c 662e 5f6d 6561 7375  trix(self._measu
-0000bed0: 7265 732e 7374 6464 6576 2e62 6c6f 636b  res.stddev.block
-0000bee0: 7329 0020 2020 2020 2020 2022 2222 0020  s).        """. 
-0000bef0: 2020 2020 2020 2052 6169 7365 7320 6056         Raises `V
-0000bf00: 616c 7565 4572 726f 7260 2069 6620 7468  alueError` if th
-0000bf10: 6520 6375 6265 2d72 6573 756c 7420 646f  e cube-result do
-0000bf20: 6573 206e 6f74 2069 6e63 6c75 6465 2061  es not include a
-0000bf30: 2073 7464 6465 7620 6375 6265 2d6d 6561   stddev cube-mea
-0000bf40: 7375 7265 2e00 0020 2020 2020 2020 2022  sure...        "
-0000bf50: 2222 3244 206f 7074 696f 6e61 6c20 6e70  ""2D optional np
-0000bf60: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
-0000bf70: 206f 6620 7374 6464 6576 2066 6f72 2065   of stddev for e
-0000bf80: 6163 6820 6365 6c6c 2e00 2020 2020 6465  ach cell..    de
-0000bf90: 6620 7374 6464 6576 2873 656c 6629 3a00  f stddev(self):.
-0000bfa0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-0000bfb0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-0000bfc0: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
-0000bfd0: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
-0000bfe0: 6173 7572 6573 2e73 756d 732e 626c 6f63  asures.sums.bloc
-0000bff0: 6b73 2900 2020 2020 2020 2020 2222 2200  ks).        """.
-0000c000: 6164 0000 3a00 0000 aa01 0000 0010 0000  ad..:...........
-0000c010: 5500 0000 0000 0000 a80f 0000 5e0f 0000  U...........^...
-0000c020: 5d0f 0000 4b0f 0000 250f 0000 cc0e 0000  ]...K...%.......
-0000c030: 790e 0000 780e 0000 660e 0000 420e 0000  y...x...f...B...
-0000c040: eb0d 0000 9a0d 0000 990d 0000 870d 0000  ................
-0000c050: 680d 0000 190d 0000 180d 0000 d20c 0000  h...............
-0000c060: bc0c 0000 b00c 0000 640c 0000 630c 0000  ........d...c...
-0000c070: 510c 0000 2f0c 0000 d60b 0000 d50b 0000  Q.../...........
-0000c080: 7c0b 0000 2a0b 0000 d40a 0000 b50a 0000  |...*...........
-0000c090: a90a 0000 6a0a 0000 690a 0000 570a 0000  ....j...i...W...
-0000c0a0: 360a 0000 ef09 0000 a109 0000 a009 0000  6...............
-0000c0b0: 8e09 0000 6f09 0000 2a09 0000 de08 0000  ....o...*.......
-0000c0c0: dd08 0000 cb08 0000 b408 0000 6908 0000  ............i...
-0000c0d0: 6808 0000 1408 0000 bf07 0000 ad07 0000  h...............
-0000c0e0: a107 0000 5d07 0000 5c07 0000 3007 0000  ....]...\...0...
-0000c0f0: f806 0000 f706 0000 a206 0000 5306 0000  ............S...
-0000c100: 3f06 0000 3e06 0000 f005 0000 e405 0000  ?...>...........
-0000c110: c005 0000 a805 0000 a705 0000 9505 0000  ................
-0000c120: 3e05 0000 3405 0000 3305 0000 0205 0000  >...4...3.......
-0000c130: 0105 0000 d904 0000 9c04 0000 9b04 0000  ................
-0000c140: 4504 0000 f303 0000 d503 0000 c903 0000  E...............
-0000c150: 7203 0000 1a03 0000 c702 0000 7102 0000  r...........q...
-0000c160: 1b02 0000 c801 0000 aa01 0000 a901 0000  ................
-0000c170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1a0: 0000 0000 0000 0000 0000 2020 2020 2020  ..........      
-0000c1b0: 2020 2320 2d2d 2d20 6465 7369 7265 6420    # --- desired 
-0000c1c0: 6f75 7470 7574 2e00 2020 2020 2020 2020  output..        
-0000c1d0: 2320 2d2d 2d20 6170 7065 6172 7320 696e  # --- appears in
-0000c1e0: 2e20 5468 6973 2064 6972 6563 746c 7920  . This directly 
-0000c1f0: 7072 6f64 7563 6573 2061 2066 696e 616c  produces a final
-0000c200: 2061 7272 6179 2074 6861 7420 6973 2065   array that is e
-0000c210: 7861 6374 6c79 2074 6865 0020 2020 2020  xactly the.     
-0000c220: 2020 2023 202d 2d2d 2074 6865 206f 7264     # --- the ord
-0000c230: 6572 696e 6720 6d65 7468 6f64 2068 6173  ering method has
-0000c240: 2062 6565 6e20 6170 706c 6965 6420 746f   been applied to
-0000c250: 2064 6574 6572 6d69 6e65 2074 6865 2073   determine the s
-0000c260: 6571 7565 6e63 6520 6561 6368 2069 6478  equence each idx
-0000c270: 0020 2020 2020 2020 2023 202d 2d2d 2069  .        # --- i
-0000c280: 6e73 6572 7469 6f6e 2069 6478 732c 2068  nsertion idxs, h
-0000c290: 6964 6465 6e20 616e 6420 7072 756e 6564  idden and pruned
-0000c2a0: 2076 6563 746f 7220 696e 6469 6365 7320   vector indices 
-0000c2b0: 6861 7665 2062 6565 6e20 7265 6d6f 7665  have been remove
-0000c2c0: 642c 2061 6e64 0020 2020 2020 2020 2023  d, and.        #
-0000c2d0: 202d 2d2d 2072 6566 6c65 6374 6564 2069   --- reflected i
-0000c2e0: 6e20 7468 6520 726f 7720 616e 6420 636f  n the row and co
-0000c2f0: 6c75 6d6e 206f 7264 6572 732e 2054 6865  lumn orders. The
-0000c300: 7920 6561 6368 2069 6e63 6c75 6465 2028  y each include (
-0000c310: 6e65 6761 7469 7665 2900 2020 2020 2020  negative).      
-0000c320: 2020 2320 2d2d 2d20 726f 7720 616e 6420    # --- row and 
-0000c330: 636f 6c75 6d6e 206f 7264 6572 732e 2041  column orders. A
-0000c340: 6c6c 2069 6e73 6572 7469 6f6e 2c20 6f72  ll insertion, or
-0000c350: 6465 7269 6e67 2c20 616e 6420 6869 6469  dering, and hidi
-0000c360: 6e67 2074 7261 6e73 666f 726d 7320 6172  ng transforms ar
-0000c370: 6500 2020 2020 2020 2020 2320 2d2d 2d20  e.        # --- 
-0000c380: 5468 6573 6520 6172 6520 6173 7365 6d62  These are assemb
-0000c390: 6c65 6420 696e 746f 2061 2073 696e 676c  led into a singl
-0000c3a0: 6520 3244 2061 7272 6179 2c20 616e 6420  e 2D array, and 
-0000c3b0: 7468 656e 2072 6561 7272 616e 6765 6420  then rearranged 
-0000c3c0: 6261 7365 6420 6f6e 0020 2020 2020 2020  based on.       
-0000c3d0: 2022 2222 0020 2020 2020 2020 2064 696d   """.        dim
-0000c3e0: 656e 7369 6f6e 2074 7261 6e73 666f 726d  ension transform
-0000c3f0: 732e 0020 2020 2020 2020 2076 6563 746f  s..        vecto
-0000c400: 7273 2072 656d 6f76 6564 2c20 616e 6420  rs removed, and 
-0000c410: 6973 206f 7264 6572 6564 2062 7920 7768  is ordered by wh
-0000c420: 6174 6576 6572 2073 6f72 7420 6d65 7468  atever sort meth
-0000c430: 6f64 2069 7320 6170 706c 6965 6420 696e  od is applied in
-0000c440: 2074 6865 0020 2020 2020 2020 2054 6865   the.        The
-0000c450: 2061 7373 656d 626c 6564 206d 6174 7269   assembled matri
-0000c460: 7820 696e 636c 7564 6573 2069 6e73 6572  x includes inser
-0000c470: 7465 6420 7665 6374 6f72 7320 2872 6f77  ted vectors (row
-0000c480: 7320 616e 6420 636f 6c75 6d6e 7329 2c20  s and columns), 
-0000c490: 6861 7320 6869 6464 656e 0000 2020 2020  has hidden..    
-0000c4a0: 2020 2020 2222 2252 6574 7572 6e20 3244      """Return 2D
-0000c4b0: 206e 6461 7272 6179 206d 6174 7269 7820   ndarray matrix 
-0000c4c0: 6173 7365 6d62 6c65 6420 6672 6f6d 2060  assembled from `
-0000c4d0: 626c 6f63 6b73 602e 0020 2020 2064 6566  blocks`..    def
-0000c4e0: 205f 6173 7365 6d62 6c65 5f6d 6174 7269   _assemble_matri
-0000c4f0: 7828 7365 6c66 2c20 626c 6f63 6b73 293a  x(self, blocks):
-0000c500: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000c510: 206e 702e 6873 7461 636b 286d 6172 6769   np.hstack(margi
-0000c520: 6e61 6c2e 626c 6f63 6b73 295b 6f72 6465  nal.blocks)[orde
-0000c530: 725d 0000 2020 2020 2020 2020 2900 2020  r]..        ).  
-0000c540: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-0000c550: 726f 775f 6f72 6465 7220 6966 206d 6172  row_order if mar
-0000c560: 6769 6e61 6c2e 6f72 6965 6e74 6174 696f  ginal.orientatio
-0000c570: 6e20 3d3d 204d 4f2e 524f 5753 2065 6c73  n == MO.ROWS els
-0000c580: 6520 7365 6c66 2e5f 636f 6c75 6d6e 5f6f  e self._column_o
-0000c590: 7264 6572 0020 2020 2020 2020 206f 7264  rder.        ord
-0000c5a0: 6572 203d 2028 0000 2020 2020 2020 2020  er = (..        
-0000c5b0: 2020 2020 7265 7475 726e 204e 6f6e 6500      return None.
-0000c5c0: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
-0000c5d0: 6172 6769 6e61 6c2e 6973 5f64 6566 696e  arginal.is_defin
-0000c5e0: 6564 3a00 2020 2020 2020 2020 2222 2200  ed:.        """.
-0000c5f0: 2020 2020 2020 2020 4974 2069 7320 4e6f          It is No
-0000c600: 6e65 2077 6865 6e20 7468 6520 6d61 7267  ne when the marg
-0000c610: 696e 616c 2069 7320 6e6f 7420 6465 6669  inal is not defi
-0000c620: 6e65 6420 2860 6d61 7267 696e 616c 2e5f  ned (`marginal._
-0000c630: 6973 5f64 6566 696e 6564 6029 2e00 0020  is_defined`)... 
-0000c640: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-0000c650: 732e 0020 2020 2020 2020 2060 6d61 7267  s..        `marg
-0000c660: 696e 616c 2e6f 7269 656e 7461 7469 6f6e  inal.orientation
-0000c670: 6029 2c20 616e 6420 7769 7468 2074 6865  `), and with the
-0000c680: 206f 7264 6572 696e 6720 7468 6174 2773   ordering that's
-0000c690: 2061 7070 6c69 6564 2074 6f20 7468 6f73   applied to thos
-0000c6a0: 6500 2020 2020 2020 2020 5468 6520 6173  e.        The as
-0000c6b0: 7365 6d62 6c65 6420 6d61 7267 696e 616c  sembled marginal
-0000c6c0: 2069 7320 7468 6520 7368 6170 6520 6f66   is the shape of
-0000c6d0: 2065 6974 6865 7220 6120 726f 7720 6f72   either a row or
-0000c6e0: 2063 6f6c 756d 6e20 2864 6574 6572 6d69   column (determi
-0000c6f0: 6e65 6420 6279 0000 2020 2020 2020 2020  ned by..        
-0000c700: 2222 224f 7074 696f 6e61 6c20 3144 206e  """Optional 1D n
-0000c710: 6461 7272 6179 2063 7265 6174 6564 2066  darray created f
-0000c720: 726f 6d20 6120 6d61 7267 696e 616c 2e00  rom a marginal..
-0000c730: 2020 2020 6465 6620 5f61 7373 656d 626c      def _assembl
-0000c740: 655f 6d61 7267 696e 616c 2873 656c 662c  e_marginal(self,
-0000c750: 206d 6172 6769 6e61 6c29 3a00 0020 2020   marginal):..   
-0000c760: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000c770: 2e5f 6173 7365 6d62 6c65 5f6d 6174 7269  ._assemble_matri
-0000c780: 7828 7365 6c66 2e5f 6d65 6173 7572 6573  x(self._measures
-0000c790: 2e7a 7363 6f72 6573 2e62 6c6f 636b 7329  .zscores.blocks)
-0000c7a0: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-0000c7b0: 2020 2020 2076 616c 7565 2069 732e 0020       value is.. 
-0000c7c0: 2020 2020 2020 2064 6576 6961 7469 6f6e         deviation
-0000c7d0: 7320 6162 6f76 6520 2870 6f73 6974 6976  s above (positiv
-0000c7e0: 6529 206f 7220 6265 6c6f 7720 286e 6567  e) or below (neg
-0000c7f0: 6174 6976 6529 2074 6865 2070 6f70 756c  ative) the popul
-0000c800: 6174 696f 6e20 6d65 616e 2061 2063 656c  ation mean a cel
-0000c810: 6c27 7300 2020 2020 2020 2020 4120 7a2d  l's.        A z-
-0000c820: 7363 6f72 6520 6973 2061 6c73 6f20 6b6e  score is also kn
-0000c830: 6f77 6e20 6173 2061 202a 7374 616e 6461  own as a *standa
-0000c840: 7264 2073 636f 7265 2a20 616e 6420 6973  rd score* and is
-0000c850: 2074 6865 206e 756d 6265 7220 6f66 2073   the number of s
-0000c860: 7461 6e64 6172 6400 0020 2020 2020 2020  tandard..       
-0000c870: 2022 2222 3244 206e 702e 666c 6f61 7436   """2D np.float6
-0000c880: 3420 6e64 6172 7261 7920 6f66 2073 7464  4 ndarray of std
-0000c890: 2d72 6573 2076 616c 7565 2066 6f72 2065  -res value for e
-0000c8a0: 6163 6820 6365 6c6c 206f 6620 6d61 7472  ach cell of matr
-0000c8b0: 6978 2e00 2020 2020 6465 6620 7a73 636f  ix..    def zsco
-0000c8c0: 7265 7328 7365 6c66 293a 0020 2020 2040  res(self):.    @
-0000c8d0: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000c8e0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000c8f0: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
-0000c900: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
-0000c910: 732e 7765 6967 6874 6564 5f63 6f75 6e74  s.weighted_count
-0000c920: 732e 626c 6f63 6b73 2900 2020 2020 2020  s.blocks).      
-0000c930: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
-0000c940: 3634 206e 6461 7272 6179 206f 6620 7765  64 ndarray of we
-0000c950: 6967 6874 6564 2d63 6f75 6e74 2066 6f72  ighted-count for
-0000c960: 2065 6163 6820 6365 6c6c 2e22 2222 0020   each cell.""". 
-0000c970: 2020 2064 6566 2077 6569 6768 7465 645f     def weighted_
-0000c980: 636f 756e 7473 2873 656c 6629 3a00 2020  counts(self):.  
-0000c990: 2020 406c 617a 7970 726f 7065 7274 7900    @lazyproperty.
-0000c9a0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000c9b0: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
-0000c9c0: 6174 7269 7828 7365 6c66 2e5f 6d65 6173  atrix(self._meas
-0000c9d0: 7572 6573 2e75 6e77 6569 6768 7465 645f  ures.unweighted_
-0000c9e0: 636f 756e 7473 2e62 6c6f 636b 7329 0020  counts.blocks). 
-0000c9f0: 2020 2020 2020 2022 2222 3244 206e 702e         """2D np.
-0000ca00: 666c 6f61 7436 3420 6e64 6172 7261 7920  float64 ndarray 
-0000ca10: 6f66 2075 6e77 6569 6768 7465 642d 636f  of unweighted-co
-0000ca20: 756e 7420 666f 7220 6561 6368 2063 656c  unt for each cel
-0000ca30: 6c2e 2222 2200 2020 2020 6465 6620 756e  l.""".    def un
-0000ca40: 7765 6967 6874 6564 5f63 6f75 6e74 7328  weighted_counts(
-0000ca50: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-0000ca60: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-0000ca70: 2020 7265 7475 726e 2073 656c 662e 5f6d    return self._m
-0000ca80: 6561 7375 7265 732e 7461 626c 655f 7765  easures.table_we
-0000ca90: 6967 6874 6564 5f62 6173 6573 5f72 616e  ighted_bases_ran
-0000caa0: 6765 2e76 616c 7565 0020 2020 2020 2020  ge.value.       
-0000cab0: 2022 2222 0020 2020 2020 2020 206f 6620   """.        of 
-0000cac0: 656d 7074 7920 726f 7773 2f63 6f6c 756d  empty rows/colum
-0000cad0: 6e73 2e00 2020 2020 2020 2020 6974 2069  ns..        it i
-0000cae0: 7320 2275 6e70 7275 6e65 6422 2c20 6d65  s "unpruned", me
-0000caf0: 616e 696e 6720 7468 6174 2069 7420 6973  aning that it is
-0000cb00: 2063 616c 6375 6c61 7465 6420 6265 666f   calculated befo
-0000cb10: 7265 2061 6e79 2068 6964 696e 6720 6f72  re any hiding or
-0000cb20: 2072 656d 6f76 696e 6700 2020 2020 2020   removing.      
-0000cb30: 2020 6f6e 6520 7461 626c 652d 7765 6967    one table-weig
-0000cb40: 6874 6564 2d62 6173 652e 2054 6869 7320  hted-base. This 
-0000cb50: 636f 6c6c 6170 7365 7320 616c 6c20 6f66  collapses all of
-0000cb60: 2074 6865 2076 616c 7565 7320 746f 2061   the values to a
-0000cb70: 2072 616e 6765 2c20 616e 6400 2020 2020   range, and.    
-0000cb80: 2020 2020 4120 4341 545f 585f 4341 5420      A CAT_X_CAT 
-0000cb90: 6861 7320 6120 7363 616c 6172 2066 6f72  has a scalar for
-0000cba0: 2061 6c6c 2074 6162 6c65 2d77 6569 6768   all table-weigh
-0000cbb0: 7465 642d 6261 7365 732c 2062 7574 2061  ted-bases, but a
-0000cbc0: 7272 6179 7320 6861 7665 206d 6f72 6520  rrays have more 
-0000cbd0: 7468 616e 0000 2020 2020 2020 2020 2222  than..        ""
-0000cbe0: 225b 6d69 6e2c 206d 6178 5d20 6e70 2e66  "[min, max] np.f
-0000cbf0: 6c6f 6174 3634 206e 6461 7272 6179 2072  loat64 ndarray r
-0000cc00: 616e 6765 206f 6620 7468 6520 7461 626c  ange of the tabl
-0000cc10: 655f 6d61 7267 696e 2028 7461 626c 652d  e_margin (table-
-0000cc20: 7765 6967 6874 6564 2d62 6173 6529 0020  weighted-base). 
-0000cc30: 2020 2064 6566 2074 6162 6c65 5f6d 6172     def table_mar
-0000cc40: 6769 6e5f 7261 6e67 6528 7365 6c66 293a  gin_range(self):
-0000cc50: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-0000cc60: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-0000cc70: 726e 2073 656c 662e 5f61 7373 656d 626c  rn self._assembl
-0000cc80: 655f 6d61 7472 6978 2873 656c 662e 5f6d  e_matrix(self._m
-0000cc90: 6561 7375 7265 732e 746f 7461 6c5f 7368  easures.total_sh
-0000cca0: 6172 655f 7375 6d2e 626c 6f63 6b73 2900  are_sum.blocks).
-0000ccb0: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-0000ccc0: 2020 2020 6375 6265 2d6d 6561 7375 7265      cube-measure
-0000ccd0: 2e00 2020 2020 2020 2020 5261 6973 6573  ..        Raises
-0000cce0: 2060 5661 6c75 6545 7272 6f72 6020 6966   `ValueError` if
-0000ccf0: 2074 6865 2063 7562 652d 7265 7375 6c74   the cube-result
-0000cd00: 2064 6f65 7320 6e6f 7420 696e 636c 7564   does not includ
-0000cd10: 6520 6120 7375 6d00 0020 2020 2020 2020  e a sum..       
-0000cd20: 2022 2222 3244 206f 7074 696f 6e61 6c20   """2D optional 
-0000cd30: 6e70 2e66 6c6f 6174 3634 206e 6461 7272  np.float64 ndarr
-0000cd40: 6179 206f 6620 746f 7461 6c20 7368 6172  ay of total shar
-0000cd50: 6520 6f66 2073 756d 2066 6f72 2065 6163  e of sum for eac
-0000cd60: 6820 6365 6c6c 2e00 2020 2020 6465 6620  h cell..    def 
-0000cd70: 746f 7461 6c5f 7368 6172 655f 7375 6d28  total_share_sum(
-0000cd80: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-0000cd90: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-0000cda0: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
-0000cdb0: 7373 656d 626c 655f 6d61 7472 6978 2873  ssemble_matrix(s
-0000cdc0: 656c 662e 5f6d 6561 7375 7265 732e 7461  elf._measures.ta
-0000cdd0: 626c 655f 7765 6967 6874 6564 5f62 6173  ble_weighted_bas
-0000cde0: 6573 2e62 6c6f 636b 7329 0020 2020 2020  es.blocks).     
-0000cdf0: 2020 2022 2222 3244 206e 702e 666c 6f61     """2D np.floa
-0000ce00: 7436 3420 6e64 6172 7261 7920 6f66 2077  t64 ndarray of w
-0000ce10: 6569 6768 7465 6420 7461 626c 652d 7072  eighted table-pr
-0000ce20: 6f70 6f72 7469 6f6e 2064 656e 6f6d 696e  oportion denomin
-0000ce30: 6174 6f72 2070 6572 2063 656c 6c2e 2222  ator per cell.""
-0000ce40: 2200 2020 2020 6465 6620 7461 626c 655f  ".    def table_
-0000ce50: 7765 6967 6874 6564 5f62 6173 6573 2873  weighted_bases(s
-0000ce60: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-0000ce70: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-0000ce80: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
-0000ce90: 7365 6d62 6c65 5f6d 6174 7269 7828 7365  semble_matrix(se
-0000cea0: 6c66 2e5f 6d65 6173 7572 6573 2e74 6162  lf._measures.tab
-0000ceb0: 6c65 5f75 6e77 6569 6768 7465 645f 6261  le_unweighted_ba
-0000cec0: 7365 732e 626c 6f63 6b73 2900 2020 2020  ses.blocks).    
-0000ced0: 2020 2020 2222 2232 4420 6e70 2e66 6c6f      """2D np.flo
-0000cee0: 6174 3634 206e 6461 7272 6179 206f 6620  at64 ndarray of 
-0000cef0: 756e 7765 6967 6874 6564 2074 6162 6c65  unweighted table
-0000cf00: 2d70 726f 706f 7274 696f 6e20 6465 6e6f  -proportion deno
-0000cf10: 6d69 6e61 746f 7220 7065 7220 6365 6c6c  minator per cell
-0000cf20: 2e22 2222 0020 2020 2064 6566 2074 6162  .""".    def tab
-0000cf30: 6c65 5f75 6e77 6569 6768 7465 645f 6261  le_unweighted_ba
-0000cf40: 7365 7328 7365 6c66 293a 0020 2020 2040  ses(self):.    @
-0000cf50: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000cf60: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000cf70: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
-0000cf80: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
-0000cf90: 732e 7461 626c 655f 7374 645f 6572 722e  s.table_std_err.
-0000cfa0: 626c 6f63 6b73 2900 2020 2020 2020 2020  blocks).        
-0000cfb0: 2222 2232 4420 6e70 2e66 6c6f 6174 3634  """2D np.float64
-0000cfc0: 206e 6461 7272 6179 206f 6620 7374 642d   ndarray of std-
-0000cfd0: 6572 726f 7220 6f66 2074 6162 6c65 2d70  error of table-p
-0000cfe0: 6572 6365 6e74 2066 6f72 2065 6163 6820  ercent for each 
-0000cff0: 6d61 7472 6978 2063 656c 6c2e 2222 2200  matrix cell.""".
-0000d000: 6164 0000 4f00 0000 b701 0000 0010 0000  ad..O...........
-0000d010: 5300 0000 0000 0000 b30f 0000 b20f 0000  S...............
-0000d020: 620f 0000 0d0f 0000 0c0f 0000 bc0e 0000  b...............
-0000d030: 6c0e 0000 170e 0000 c40d 0000 b40d 0000  l...............
-0000d040: a80d 0000 540d 0000 fe0c 0000 cd0c 0000  ....T...........
-0000d050: a80c 0000 9a0c 0000 830c 0000 400c 0000  ............@...
-0000d060: 010c 0000 c10b 0000 970b 0000 890b 0000  ................
-0000d070: 7f0b 0000 3e0b 0000 3d0b 0000 2b0b 0000  ....>...=...+...
-0000d080: 0e0b 0000 c20a 0000 c10a 0000 7b0a 0000  ............{...
-0000d090: 6f0a 0000 180a 0000 170a 0000 050a 0000  o...............
-0000d0a0: e409 0000 9f09 0000 6e09 0000 6d09 0000  ........n...m...
-0000d0b0: 5b09 0000 3909 0000 e708 0000 c408 0000  [...9...........
-0000d0c0: c308 0000 b108 0000 8f08 0000 3608 0000  ............6...
-0000d0d0: 2508 0000 ec07 0000 bc07 0000 8607 0000  %...............
-0000d0e0: 7c07 0000 7b07 0000 4407 0000 f906 0000  |...{...D.......
-0000d0f0: f806 0000 a306 0000 9706 0000 6306 0000  ............c...
-0000d100: 0c06 0000 d105 0000 d005 0000 9c05 0000  ................
-0000d110: 4e05 0000 4d05 0000 0605 0000 fa04 0000  N...M...........
-0000d120: c904 0000 7504 0000 3b04 0000 3a04 0000  ....u...;...:...
-0000d130: 0604 0000 c303 0000 c203 0000 6c03 0000  ............l...
-0000d140: 1d03 0000 e702 0000 db02 0000 8402 0000  ................
-0000d150: 8302 0000 5102 0000 0e02 0000 0d02 0000  ....Q...........
-0000d160: b701 0000 b601 0000 0000 0000 0000 0000  ................
-0000d170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000d1b0: 0000 0000 0000 0020 2020 2020 2020 2054  .......        T
-0000d1c0: 6865 7365 2061 7265 2073 7569 7461 626c  hese are suitabl
-0000d1d0: 6520 666f 7220 7573 6520 6173 2072 6f77  e for use as row
-0000d1e0: 2f63 6f6c 756d 6e20 6865 6164 696e 6773  /column headings
-0000d1f0: 3b20 636f 6465 7320 666f 7220 7375 6274  ; codes for subt
-0000d200: 6f74 616c 7320 6170 7065 6172 0000 2020  otals appear..  
-0000d210: 2020 2020 2020 2222 2231 4420 7374 7220        """1D str 
-0000d220: 6e64 6172 7261 7920 6f66 2063 6f64 6573  ndarray of codes
-0000d230: 2066 6f72 2065 6163 6820 7665 6374 6f72   for each vector
-0000d240: 206f 6620 6064 696d 656e 7369 6f6e 602e   of `dimension`.
-0000d250: 0020 2020 2064 6566 205f 6469 6d65 6e73  .    def _dimens
-0000d260: 696f 6e5f 636f 6465 7328 7365 6c66 2c20  ion_codes(self, 
-0000d270: 6469 6d65 6e73 696f 6e2c 206f 7264 6572  dimension, order
-0000d280: 293a 0000 2020 2020 2020 2020 7265 7475  ):..        retu
-0000d290: 726e 206e 702e 6172 7261 7928 6469 6d65  rn np.array(dime
-0000d2a0: 6e73 696f 6e2e 656c 656d 656e 745f 616c  nsion.element_al
-0000d2b0: 6961 7365 7320 2b20 6469 6d65 6e73 696f  iases + dimensio
-0000d2c0: 6e2e 7375 6274 6f74 616c 5f61 6c69 6173  n.subtotal_alias
-0000d2d0: 6573 295b 6f72 6465 725d 0020 2020 2020  es)[order].     
-0000d2e0: 2020 2022 2222 0020 2020 2020 2020 2063     """.        c
-0000d2f0: 6f72 7265 7370 6f6e 6420 7769 7468 2074  orrespond with t
-0000d300: 6865 6972 2072 6573 7065 6374 6976 6520  heir respective 
-0000d310: 6461 7461 2076 6563 746f 722e 0020 2020  data vector..   
-0000d320: 2020 2020 2069 6e20 7468 6520 7365 7175       in the sequ
-0000d330: 656e 6365 2073 7065 6369 6669 6564 2062  ence specified b
-0000d340: 7920 606f 7264 6572 602c 2073 7563 6820  y `order`, such 
-0000d350: 7468 6174 2061 6c69 6173 6573 2061 7265  that aliases are
-0000d360: 206f 7264 6572 6564 2074 6f00 2020 2020   ordered to.    
-0000d370: 2020 2020 5468 6573 6520 6172 6520 7375      These are su
-0000d380: 6974 6162 6c65 2066 6f72 2075 7365 2061  itable for use a
-0000d390: 7320 726f 772f 636f 6c75 6d6e 2068 6561  s row/column hea
-0000d3a0: 6469 6e67 733b 2061 6c69 6173 2066 6f72  dings; alias for
-0000d3b0: 2073 7562 746f 7461 6c73 2061 7070 6561   subtotals appea
-0000d3c0: 7200 0020 2020 2020 2020 2022 2222 3144  r..        """1D
-0000d3d0: 2073 7472 206e 6461 7272 6179 206f 6620   str ndarray of 
-0000d3e0: 616c 6961 7320 666f 7220 6561 6368 2076  alias for each v
-0000d3f0: 6563 746f 7220 6f66 2060 6469 6d65 6e73  ector of `dimens
-0000d400: 696f 6e60 2e00 2020 2020 6465 6620 5f64  ion`..    def _d
-0000d410: 696d 656e 7369 6f6e 5f61 6c69 6173 6573  imension_aliases
-0000d420: 2873 656c 662c 2064 696d 656e 7369 6f6e  (self, dimension
-0000d430: 2c20 6f72 6465 7229 3a00 0020 2020 2020  , order):..     
-0000d440: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-0000d450: 6e70 2e77 6865 7265 286e 702e 6172 7261  np.where(np.arra
-0000d460: 7928 6469 6666 7329 5b6f 7264 6572 5d29  y(diffs)[order])
-0000d470: 5b30 5d29 0020 2020 2020 2020 2064 6966  [0]).        dif
-0000d480: 6673 203d 205b 4661 6c73 655d 202a 206e  fs = [False] * n
-0000d490: 5f76 616c 6964 7320 2b20 5b65 2e69 735f  _valids + [e.is_
-0000d4a0: 6469 6666 6572 656e 6365 2066 6f72 2065  difference for e
-0000d4b0: 2069 6e20 6469 6d65 6e73 696f 6e2e 7375   in dimension.su
-0000d4c0: 6274 6f74 616c 735d 0020 2020 2020 2020  btotals].       
-0000d4d0: 206e 5f76 616c 6964 7320 3d20 6c65 6e28   n_valids = len(
-0000d4e0: 6469 6d65 6e73 696f 6e2e 7661 6c69 645f  dimension.valid_
-0000d4f0: 656c 656d 656e 7473 2900 2020 2020 2020  elements).      
-0000d500: 2020 2222 2200 2020 2020 2020 2020 5661    """.        Va
-0000d510: 6c69 6420 656c 656d 656e 7473 2063 616e  lid elements can
-0000d520: 6e6f 7420 6265 2064 6966 6665 7265 6e63  not be differenc
-0000d530: 6573 2e20 4f6e 6c79 2073 6f6d 6520 7375  es. Only some su
-0000d540: 6274 6f74 616c 7320 6361 6e2e 0000 2020  btotals can...  
-0000d550: 2020 2020 2020 2222 2252 6574 7572 6e20        """Return 
-0000d560: 7475 706c 6528 696e 7429 206f 6620 6469  tuple(int) of di
-0000d570: 6666 6572 656e 6365 2065 6c65 6d65 6e74  fference element
-0000d580: 7327 2069 6e64 6963 6573 2066 6f72 2061  s' indices for a
-0000d590: 2064 696d 656e 7369 6f6e 2e00 2020 2020   dimension..    
-0000d5a0: 6465 6620 5f64 6966 665f 656c 656d 656e  def _diff_elemen
-0000d5b0: 745f 6964 7873 2873 656c 662c 2064 696d  t_idxs(self, dim
-0000d5c0: 656e 7369 6f6e 2c20 6f72 6465 7229 3a00  ension, order):.
-0000d5d0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000d5e0: 7475 706c 6528 6e70 2e77 6865 7265 286e  tuple(np.where(n
-0000d5f0: 702e 6172 7261 7928 6465 7269 7673 295b  p.array(derivs)[
-0000d600: 6f72 6465 725d 295b 305d 2900 2020 2020  order])[0]).    
-0000d610: 2020 2020 6465 7269 7673 203d 205b 652e      derivs = [e.
-0000d620: 6465 7269 7665 6420 666f 7220 6520 696e  derived for e in
-0000d630: 2064 696d 656e 7369 6f6e 2e76 616c 6964   dimension.valid
-0000d640: 5f65 6c65 6d65 6e74 735d 202b 205b 4661  _elements] + [Fa
-0000d650: 6c73 655d 202a 206e 5f73 7562 746f 7461  lse] * n_subtota
-0000d660: 6c73 0020 2020 2020 2020 206e 5f73 7562  ls.        n_sub
-0000d670: 746f 7461 6c73 203d 206c 656e 2864 696d  totals = len(dim
-0000d680: 656e 7369 6f6e 2e76 616c 6964 5f65 6c65  ension.valid_ele
-0000d690: 6d65 6e74 7329 0020 2020 2020 2020 2022  ments).        "
-0000d6a0: 2222 0020 2020 2020 2020 2053 7562 746f  "".        Subto
-0000d6b0: 7461 6c73 2063 616e 6e6f 7420 6265 2064  tals cannot be d
-0000d6c0: 6572 6976 6564 2065 6c65 6d65 6e74 732e  erived elements.
-0000d6d0: 204f 6e6c 7920 736f 6d65 2065 6c65 6d65   Only some eleme
-0000d6e0: 6e74 7320 2873 7562 7661 7269 6162 6c65  nts (subvariable
-0000d6f0: 7329 2063 616e 2e00 0020 2020 2020 2020  s) can...       
-0000d700: 2022 2222 5265 7475 726e 2074 7570 6c65   """Return tuple
-0000d710: 2869 6e74 2920 6f66 2064 6572 6976 6564  (int) of derived
-0000d720: 2065 6c65 6d65 6e74 7327 2069 6e64 6963   elements' indic
-0000d730: 6573 2066 6f72 2061 2064 696d 656e 7369  es for a dimensi
-0000d740: 6f6e 2e00 2020 2020 6465 6620 5f64 6572  on..    def _der
-0000d750: 6976 6564 5f65 6c65 6d65 6e74 5f69 6478  ived_element_idx
-0000d760: 7328 7365 6c66 2c20 6469 6d65 6e73 696f  s(self, dimensio
-0000d770: 6e2c 206f 7264 6572 293a 0000 2020 2020  n, order):..    
-0000d780: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-0000d790: 2020 616e 6420 7365 6c66 2e5f 6375 6265    and self._cube
-0000d7a0: 2e76 616c 6964 5f6f 7665 726c 6170 7320  .valid_overlaps 
-0000d7b0: 6973 206e 6f74 204e 6f6e 6500 2020 2020  is not None.    
-0000d7c0: 2020 2020 2020 2020 616e 6420 7365 6c66          and self
-0000d7d0: 2e5f 6375 6265 2e6f 7665 726c 6170 7320  ._cube.overlaps 
-0000d7e0: 6973 206e 6f74 204e 6f6e 6500 2020 2020  is not None.    
-0000d7f0: 2020 2020 2020 2020 7365 6c66 2e5f 6469          self._di
-0000d800: 6d65 6e73 696f 6e73 5b2d 315d 2e64 696d  mensions[-1].dim
-0000d810: 656e 7369 6f6e 5f74 7970 6520 3d3d 2044  ension_type == D
-0000d820: 542e 4d52 0020 2020 2020 2020 2072 6574  T.MR.        ret
-0000d830: 7572 6e20 2800 2020 2020 2020 2020 2222  urn (.        ""
-0000d840: 2254 7275 6520 6966 206f 7665 726c 6170  "True if overlap
-0000d850: 7320 6172 6520 6465 6669 6e65 6420 616e  s are defined an
-0000d860: 6420 7468 6520 6c61 7374 2064 696d 656e  d the last dimen
-0000d870: 7369 6f6e 2069 7320 4d52 2c20 4661 6c73  sion is MR, Fals
-0000d880: 6520 6f74 6865 7277 6973 6522 2222 0020  e otherwise""". 
-0000d890: 2020 2064 6566 205f 6375 6265 5f68 6173     def _cube_has
-0000d8a0: 5f6f 7665 726c 6170 7328 7365 6c66 293a  _overlaps(self):
-0000d8b0: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-0000d8c0: 7479 0000 2020 2020 2020 2020 7265 7475  ty..        retu
-0000d8d0: 726e 2073 656c 662e 5f64 696d 656e 7369  rn self._dimensi
-0000d8e0: 6f6e 735b 315d 0020 2020 2020 2020 2022  ons[1].        "
-0000d8f0: 2222 5468 6520 6044 696d 656e 7369 6f6e  ""The `Dimension
-0000d900: 6020 6f62 6a65 6374 2072 6570 7265 7365  ` object represe
-0000d910: 6e74 696e 6720 636f 6c75 6d6e 2065 6c65  nting column ele
-0000d920: 6d65 6e74 7320 696e 2074 6869 7320 6d61  ments in this ma
-0000d930: 7472 6978 2e22 2222 0020 2020 2064 6566  trix.""".    def
-0000d940: 205f 636f 6c75 6d6e 735f 6469 6d65 6e73   _columns_dimens
-0000d950: 696f 6e28 7365 6c66 293a 0020 2020 2040  ion(self):.    @
-0000d960: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000d970: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000d980: 662e 5f63 6f6c 756d 6e73 5f64 696d 656e  f._columns_dimen
-0000d990: 7369 6f6e 2e73 7562 746f 7461 6c73 0020  sion.subtotals. 
-0000d9a0: 2020 2020 2020 2022 2222 5365 7175 656e         """Sequen
-0000d9b0: 6365 206f 6620 5f53 7562 746f 7461 6c20  ce of _Subtotal 
-0000d9c0: 6f62 6a65 6374 2066 6f72 2065 6163 6820  object for each 
-0000d9d0: 696e 7365 7274 6564 2063 6f6c 756d 6e2e  inserted column.
-0000d9e0: 2222 2200 2020 2020 6465 6620 5f63 6f6c  """.    def _col
-0000d9f0: 756d 6e5f 7375 6274 6f74 616c 7328 7365  umn_subtotals(se
-0000da00: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-0000da10: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-0000da20: 7265 7475 726e 205f 4261 7365 4f72 6465  return _BaseOrde
-0000da30: 7248 656c 7065 722e 636f 6c75 6d6e 5f64  rHelper.column_d
-0000da40: 6973 706c 6179 5f6f 7264 6572 2873 656c  isplay_order(sel
-0000da50: 662e 5f64 696d 656e 7369 6f6e 732c 2073  f._dimensions, s
-0000da60: 656c 662e 5f6d 6561 7375 7265 7329 0020  elf._measures). 
-0000da70: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-0000da80: 2020 204e 6567 6174 6976 6520 7661 6c75     Negative valu
-0000da90: 6573 2072 6570 7265 7365 6e74 2069 6e73  es represent ins
-0000daa0: 6572 7465 6420 7375 6274 6f74 616c 2d63  erted subtotal-c
-0000dab0: 6f6c 756d 6e20 6c6f 6361 7469 6f6e 732e  olumn locations.
-0000dac0: 0000 2020 2020 2020 2020 2222 2231 4420  ..        """1D 
-0000dad0: 6e70 2e69 6e74 3634 206e 6461 7272 6179  np.int64 ndarray
-0000dae0: 206f 6620 7369 676e 6564 2069 6e74 2069   of signed int i
-0000daf0: 6478 2066 6f72 2065 6163 6820 6173 7365  dx for each asse
-0000db00: 6d62 6c65 6420 636f 6c75 6d6e 2e00 2020  mbled column..  
-0000db10: 2020 6465 6620 5f63 6f6c 756d 6e5f 6f72    def _column_or
-0000db20: 6465 7228 7365 6c66 293a 0020 2020 2040  der(self):.    @
-0000db30: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000db40: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-0000db50: 6873 7461 636b 285b 6261 7365 5f76 6563  hstack([base_vec
-0000db60: 746f 722c 2076 6563 746f 725f 7375 6274  tor, vector_subt
-0000db70: 6f74 616c 735d 295b 6f72 6465 725d 0020  otals])[order]. 
-0000db80: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-0000db90: 2020 2020 205d 0020 2020 2020 2020 2020       ].         
-0000dba0: 2020 2020 2020 2066 6f72 2073 7562 746f         for subto
-0000dbb0: 7461 6c20 696e 2073 7562 746f 7461 6c73  tal in subtotals
-0000dbc0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000dbd0: 202d 206e 702e 7375 6d28 6261 7365 5f76   - np.sum(base_v
-0000dbe0: 6563 746f 725b 7375 6274 6f74 616c 2e73  ector[subtotal.s
-0000dbf0: 7562 7472 6168 656e 645f 6964 7873 5d29  ubtrahend_idxs])
-0000dc00: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000dc10: 2065 6c73 6520 6e70 2e73 756d 2862 6173   else np.sum(bas
-0000dc20: 655f 7665 6374 6f72 5b73 7562 746f 7461  e_vector[subtota
-0000dc30: 6c2e 6164 6465 6e64 5f69 6478 735d 2900  l.addend_idxs]).
-0000dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc50: 6966 2064 6966 6673 5f6e 616e 2061 6e64  if diffs_nan and
-0000dc60: 206c 656e 2873 7562 746f 7461 6c2e 7375   len(subtotal.su
-0000dc70: 6274 7261 6865 6e64 5f69 6478 7329 203e  btrahend_idxs) >
-0000dc80: 2030 0020 2020 2020 2020 2020 2020 2020   0.             
-0000dc90: 2020 206e 702e 6e61 6e00 2020 2020 2020     np.nan.      
-0000dca0: 2020 2020 2020 5b00 2020 2020 2020 2020        [.        
-0000dcb0: 7665 6374 6f72 5f73 7562 746f 7461 6c73  vector_subtotals
-0000dcc0: 203d 206e 702e 6172 7261 7928 0020 2020   = np.array(.   
-0000dcd0: 2020 2020 2023 2076 616c 7565 7320 6672       # values fr
-0000dce0: 6f6d 2061 205f 4261 7365 5375 6274 6f74  om a _BaseSubtot
-0000dcf0: 616c 7320 7375 6263 6c61 7373 2e00 2020  als subclass..  
-0000dd00: 2020 2020 2020 2320 6e61 6e20 6f72 2061        # nan or a
-0000dd10: 6464 2026 2073 7562 7472 6163 742c 2062  dd & subtract, b
-0000dd20: 7574 2061 2066 756c 6c65 7220 736f 6c75  ut a fuller solu
-0000dd30: 7469 6f6e 2077 696c 6c20 7072 6f62 6162  tion will probab
-0000dd40: 6c79 2067 6574 2074 6865 2073 7562 746f  ly get the subto
-0000dd50: 7461 6c00 2020 2020 2020 2020 2320 544f  tal.        # TO
-0000dd60: 444f 3a20 5468 6973 2077 6f72 6b73 2066  DO: This works f
-0000dd70: 6f72 2022 7375 6d22 2061 6e64 2022 6469  or "sum" and "di
-0000dd80: 6666 2220 7375 6274 6f74 616c 732c 2062  ff" subtotals, b
-0000dd90: 6563 6175 7365 2065 6974 6865 7220 7765  ecause either we
-0000dda0: 2073 6574 2074 6f00 2020 2020 2020 2020   set to.        
-0000ddb0: 2222 2200 2020 2020 2020 2020 7661 6c75  """.        valu
-0000ddc0: 6573 2e00 2020 2020 2020 2020 6172 7261  es..        arra
-0000ddd0: 7920 6973 2061 7272 616e 6765 6420 6279  y is arranged by
-0000dde0: 2060 6f72 6465 7260 2c20 696e 636c 7564   `order`, includ
-0000ddf0: 696e 6720 706f 7373 6962 6c79 2072 656d  ing possibly rem
-0000de00: 6f76 696e 6720 6869 6464 656e 206f 7220  oving hidden or 
-0000de10: 7072 756e 6564 0020 2020 2020 2020 2061  pruned.        a
-0000de20: 6e64 2060 7375 6274 7261 6865 6e64 5f69  nd `subtrahend_i
-0000de30: 6478 7360 2070 726f 7065 7274 7920 6f66  dxs` property of
-0000de40: 2065 6163 6820 7375 6274 6f74 616c 2069   each subtotal i
-0000de50: 6e20 6073 7562 746f 7461 6c73 602e 2054  n `subtotals`. T
-0000de60: 6865 2072 6574 7572 6e65 6400 2020 2020  he returned.    
-0000de70: 2020 2020 7375 6274 7261 6865 6e64 7320      subtrahends 
-0000de80: 6578 7472 6163 7465 6420 6672 6f6d 2060  extracted from `
-0000de90: 6261 7365 5f76 6563 746f 7260 2061 6363  base_vector` acc
-0000dea0: 6f72 6469 6e67 2074 6f20 7468 6520 6061  ording to the `a
-0000deb0: 6464 656e 645f 6964 7873 6000 2020 2020  ddend_idxs`.    
-0000dec0: 2020 2020 4561 6368 2073 7562 746f 7461      Each subtota
-0000ded0: 6c20 7661 6c75 6520 6973 2074 6865 2072  l value is the r
-0000dee0: 6573 756c 7420 6f66 2061 7070 6c79 696e  esult of applyin
-0000def0: 6720 6e70 2e73 756d 2074 6f20 7468 6520  g np.sum to the 
-0000df00: 6164 6465 6e64 7320 616e 6400 0020 2020  addends and..   
-0000df10: 2020 2020 2022 2222 5265 7475 726e 2031       """Return 1
-0000df20: 4420 6e64 6172 7261 7920 6f66 2060 6261  D ndarray of `ba
-0000df30: 7365 5f76 6563 746f 7260 2077 6974 6820  se_vector` with 
-0000df40: 696e 7365 7274 6564 2060 7375 6274 6f74  inserted `subtot
-0000df50: 616c 7360 2c20 696e 2060 6f72 6465 7260  als`, in `order`
-0000df60: 2e00 2020 2020 6465 6620 5f61 7373 656d  ..    def _assem
-0000df70: 626c 655f 7665 6374 6f72 2873 656c 662c  ble_vector(self,
-0000df80: 2062 6173 655f 7665 6374 6f72 2c20 7375   base_vector, su
-0000df90: 6274 6f74 616c 732c 206f 7264 6572 2c20  btotals, order, 
-0000dfa0: 6469 6666 735f 6e61 6e3d 4661 6c73 6529  diffs_nan=False)
-0000dfb0: 3a00 0020 2020 2020 2020 2072 6574 7572  :..        retur
-0000dfc0: 6e20 6e70 2e62 6c6f 636b 2862 6c6f 636b  n np.block(block
-0000dfd0: 7329 5b6e 702e 6978 5f28 7365 6c66 2e5f  s)[np.ix_(self._
-0000dfe0: 726f 775f 6f72 6465 722c 2073 656c 662e  row_order, self.
-0000dff0: 5f63 6f6c 756d 6e5f 6f72 6465 7229 5d00  _column_order)].
-0000e000: 6164 0000 4200 0000 ae01 0000 0010 0000  ad..B...........
-0000e010: 5400 0000 0000 0000 b30f 0000 7d0f 0000  T...........}...
-0000e020: 710f 0000 210f 0000 200f 0000 ed0e 0000  q...!... .......
-0000e030: ab0e 0000 aa0e 0000 530e 0000 fa0d 0000  ........S.......
-0000e040: cf0d 0000 c30d 0000 6e0d 0000 6d0d 0000  ........n...m...
-0000e050: 5b0d 0000 420d 0000 f80c 0000 a60c 0000  [...B...........
-0000e060: a50c 0000 930c 0000 530c 0000 000c 0000  ........S.......
-0000e070: da0b 0000 c20b 0000 7d0b 0000 350b 0000  ........}...5...
-0000e080: dd0a 0000 bd0a 0000 bc0a 0000 aa0a 0000  ................
-0000e090: 900a 0000 470a 0000 460a 0000 030a 0000  ....G...F.......
-0000e0a0: f709 0000 a309 0000 a209 0000 9009 0000  ................
-0000e0b0: 7209 0000 3009 0000 0209 0000 0109 0000  r...0...........
-0000e0c0: ef08 0000 d008 0000 8108 0000 5e08 0000  ............^...
-0000e0d0: 5d08 0000 5c08 0000 4408 0000 1908 0000  ]...\...D.......
-0000e0e0: 1808 0000 dd07 0000 b707 0000 7b07 0000  ............{...
-0000e0f0: 7a07 0000 6907 0000 2307 0000 cf06 0000  z...i...#.......
-0000e100: ce06 0000 7606 0000 2906 0000 0e06 0000  ....v...).......
-0000e110: 0206 0000 ac05 0000 6305 0000 1305 0000  ........c.......
-0000e120: bb04 0000 8c04 0000 3804 0000 3704 0000  ........8...7...
-0000e130: 2604 0000 e303 0000 9203 0000 9103 0000  &...............
-0000e140: 3903 0000 ec02 0000 d402 0000 c802 0000  9...............
-0000e150: 8302 0000 5302 0000 3d02 0000 1502 0000  ....S...=.......
-0000e160: de01 0000 ae01 0000 ad01 0000 0000 0000  ................
-0000e170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000e180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000e190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000e1a0: 0000 0000 0000 0000 0000 0000 0000 2020  ..............  
-0000e1b0: 2020 2020 2020 2020 2020 656c 7365 205f            else _
-0000e1c0: 536f 7274 526f 7773 4279 4465 7269 7665  SortRowsByDerive
-0000e1d0: 6443 6f6c 756d 6e48 656c 7065 7200 2020  dColumnHelper.  
-0000e1e0: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-0000e1f0: 6c61 7469 6f6e 5f6d 6574 686f 6420 3d3d  lation_method ==
-0000e200: 2043 4d2e 4f50 504f 5349 4e47 5f45 4c45   CM.OPPOSING_ELE
-0000e210: 4d45 4e54 0020 2020 2020 2020 2020 2020  MENT.           
-0000e220: 205f 536f 7274 526f 7773 4279 4261 7365   _SortRowsByBase
-0000e230: 436f 6c75 6d6e 4865 6c70 6572 0020 2020  ColumnHelper.   
-0000e240: 2020 2020 2048 656c 7065 7243 6c73 203d       HelperCls =
-0000e250: 2028 0020 2020 2020 2020 2064 696d 5f74   (.        dim_t
-0000e260: 7970 6520 3d20 6469 6d65 6e73 696f 6e73  ype = dimensions
-0000e270: 5b31 5d2e 6469 6d65 6e73 696f 6e5f 7479  [1].dimension_ty
-0000e280: 7065 0020 2020 2020 2020 2063 6f6c 6c61  pe.        colla
-0000e290: 7469 6f6e 5f6d 6574 686f 6420 3d20 6469  tion_method = di
-0000e2a0: 6d65 6e73 696f 6e73 5b30 5d2e 6f72 6465  mensions[0].orde
-0000e2b0: 725f 7370 6563 2e63 6f6c 6c61 7469 6f6e  r_spec.collation
-0000e2c0: 5f6d 6574 686f 6400 2020 2020 2020 2020  _method.        
-0000e2d0: 2222 2200 2020 2020 2020 2020 726f 7773  """.        rows
-0000e2e0: 2d64 696d 656e 7369 6f6e 2e00 2020 2020  -dimension..    
-0000e2f0: 2020 2020 696e 7365 7274 696f 6e2c 2068      insertion, h
-0000e300: 6964 696e 672c 2070 7275 6e69 6e67 2c20  iding, pruning, 
-0000e310: 616e 6420 6f72 6465 7269 6e67 2074 7261  and ordering tra
-0000e320: 6e73 666f 726d 7320 7370 6563 6966 6965  nsforms specifie
-0000e330: 6420 696e 2074 6865 0020 2020 2020 2020  d in the.       
-0000e340: 204e 6567 6174 6976 6520 7661 6c75 6573   Negative values
-0000e350: 2072 6570 7265 7365 6e74 2069 6e73 6572   represent inser
-0000e360: 7465 642d 7665 6374 6f72 206c 6f63 6174  ted-vector locat
-0000e370: 696f 6e73 2e20 5265 7475 726e 6564 2073  ions. Returned s
-0000e380: 6571 7565 6e63 6520 7265 666c 6563 7473  equence reflects
-0000e390: 0000 2020 2020 2020 2020 2222 2231 4420  ..        """1D 
-0000e3a0: 6e70 2e69 6e74 3634 206e 6461 7272 6179  np.int64 ndarray
-0000e3b0: 206f 6620 7369 676e 6564 2069 6e74 2069   of signed int i
-0000e3c0: 6478 2066 6f72 2065 6163 6820 726f 7720  dx for each row 
-0000e3d0: 6f66 206d 6561 7375 7265 206d 6174 7269  of measure matri
-0000e3e0: 782e 0020 2020 2064 6566 2072 6f77 5f64  x..    def row_d
-0000e3f0: 6973 706c 6179 5f6f 7264 6572 2863 6c73  isplay_order(cls
-0000e400: 2c20 6469 6d65 6e73 696f 6e73 2c20 7365  , dimensions, se
-0000e410: 636f 6e64 5f6f 7264 6572 5f6d 6561 7375  cond_order_measu
-0000e420: 7265 7329 3a00 2020 2020 4063 6c61 7373  res):.    @class
-0000e430: 6d65 7468 6f64 0000 2020 2020 2020 2020  method..        
-0000e440: 7265 7475 726e 205f 436f 6c75 6d6e 4f72  return _ColumnOr
-0000e450: 6465 7248 656c 7065 7228 6469 6d65 6e73  derHelper(dimens
-0000e460: 696f 6e73 2c20 7365 636f 6e64 5f6f 7264  ions, second_ord
-0000e470: 6572 5f6d 6561 7375 7265 7329 2e5f 6469  er_measures)._di
-0000e480: 7370 6c61 795f 6f72 6465 7200 2020 2020  splay_order.    
-0000e490: 2020 2020 2320 2d2d 2d20 7765 2061 6464      # --- we add
-0000e4a0: 2073 6f72 742d 6279 2d76 616c 7565 2074   sort-by-value t
-0000e4b0: 6f20 636f 6c75 6d6e 732e 0020 2020 2020  o columns..     
-0000e4c0: 2020 2023 202d 2d2d 2066 6f72 6d20 636f     # --- form co
-0000e4d0: 6e73 6973 7465 6e74 2077 6974 6820 602e  nsistent with `.
-0000e4e0: 726f 775f 6469 7370 6c61 795f 6f72 6465  row_display_orde
-0000e4f0: 7228 2960 2061 6e64 2077 6527 6c6c 2065  r()` and we'll e
-0000e500: 6c61 626f 7261 7465 2074 6869 7320 7768  laborate this wh
-0000e510: 656e 0020 2020 2020 2020 2023 202d 2d2d  en.        # ---
-0000e520: 205f 436f 6c75 6d6e 4f72 6465 7248 656c   _ColumnOrderHel
-0000e530: 7065 722c 2073 6f20 7468 6572 6527 7320  per, so there's 
-0000e540: 6e6f 7420 6d75 6368 2074 6f20 7468 6973  not much to this
-0000e550: 2079 6574 2c20 6a75 7374 206b 6565 7069   yet, just keepi
-0000e560: 6e67 0020 2020 2020 2020 2023 202d 2d2d  ng.        # ---
-0000e570: 2079 6574 2c20 616e 6420 626f 7468 2065   yet, and both e
-0000e580: 7870 6c69 6369 7420 616e 6420 7061 796c  xplicit and payl
-0000e590: 6f61 6420 6f72 6465 7269 6e67 2061 7265  oad ordering are
-0000e5a0: 2068 616e 646c 6564 2062 7900 2020 2020   handled by.    
-0000e5b0: 2020 2020 2320 2d2d 2d20 5468 6973 2069      # --- This i
-0000e5c0: 7320 6573 7365 6e74 6961 6c6c 7920 6120  s essentially a 
-0000e5d0: 6661 6374 6f72 7920 6d65 7468 6f64 2e20  factory method. 
-0000e5e0: 5468 6572 6520 6973 206e 6f20 736f 7274  There is no sort
-0000e5f0: 2d63 6f6c 756d 6e73 2d62 792d 7661 6c75  -columns-by-valu
-0000e600: 6500 2020 2020 2020 2020 2222 2200 2020  e.        """.  
-0000e610: 2020 2020 2020 636f 6c75 6d6e 732d 6469        columns-di
-0000e620: 6d65 6e73 696f 6e2e 0020 2020 2020 2020  mension..       
-0000e630: 2069 6e73 6572 7469 6f6e 2c20 6869 6469   insertion, hidi
-0000e640: 6e67 2c20 7072 756e 696e 672c 2061 6e64  ng, pruning, and
-0000e650: 206f 7264 6572 696e 6720 7472 616e 7366   ordering transf
-0000e660: 6f72 6d73 2073 7065 6369 6669 6564 2069  orms specified i
-0000e670: 6e20 7468 6500 2020 2020 2020 2020 4e65  n the.        Ne
-0000e680: 6761 7469 7665 2076 616c 7565 7320 7265  gative values re
-0000e690: 7072 6573 656e 7420 696e 7365 7274 6564  present inserted
-0000e6a0: 2d76 6563 746f 7220 6c6f 6361 7469 6f6e  -vector location
-0000e6b0: 732e 2052 6574 7572 6e65 6420 7365 7175  s. Returned sequ
-0000e6c0: 656e 6365 2072 6566 6c65 6374 7300 0020  ence reflects.. 
-0000e6d0: 2020 2020 2020 2022 2222 3144 206e 702e         """1D np.
-0000e6e0: 696e 7436 3420 6e64 6172 7261 7920 6f66  int64 ndarray of
-0000e6f0: 2073 6967 6e65 6420 696e 7420 6964 7820   signed int idx 
-0000e700: 666f 7220 6561 6368 2063 6f6c 756d 6e20  for each column 
-0000e710: 6f66 206d 6561 7375 7265 206d 6174 7269  of measure matri
-0000e720: 782e 0020 2020 2064 6566 2063 6f6c 756d  x..    def colum
-0000e730: 6e5f 6469 7370 6c61 795f 6f72 6465 7228  n_display_order(
-0000e740: 636c 732c 2064 696d 656e 7369 6f6e 732c  cls, dimensions,
-0000e750: 2073 6563 6f6e 645f 6f72 6465 725f 6d65   second_order_me
-0000e760: 6173 7572 6573 293a 0020 2020 2040 636c  asures):.    @cl
-0000e770: 6173 736d 6574 686f 6400 0020 2020 2020  assmethod..     
-0000e780: 2020 2073 656c 662e 5f73 6563 6f6e 645f     self._second_
-0000e790: 6f72 6465 725f 6d65 6173 7572 6573 203d  order_measures =
-0000e7a0: 2073 6563 6f6e 645f 6f72 6465 725f 6d65   second_order_me
-0000e7b0: 6173 7572 6573 0020 2020 2020 2020 2073  asures.        s
-0000e7c0: 656c 662e 5f64 696d 656e 7369 6f6e 7320  elf._dimensions 
-0000e7d0: 3d20 6469 6d65 6e73 696f 6e73 0020 2020  = dimensions.   
-0000e7e0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-0000e7f0: 6c66 2c20 6469 6d65 6e73 696f 6e73 2c20  lf, dimensions, 
-0000e800: 7365 636f 6e64 5f6f 7264 6572 5f6d 6561  second_order_mea
-0000e810: 7375 7265 7329 3a00 0020 2020 2022 2222  sures):..    """
-0000e820: 4261 7365 2063 6c61 7373 2066 6f72 206f  Base class for o
-0000e830: 7264 6572 696e 6720 6865 6c70 6572 732e  rdering helpers.
-0000e840: 2222 2200 636c 6173 7320 5f42 6173 654f  """.class _BaseO
-0000e850: 7264 6572 4865 6c70 6572 3a00 0000 2020  rderHelper:...  
-0000e860: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000e870: 662e 5f64 696d 656e 7369 6f6e 735b 305d  f._dimensions[0]
-0000e880: 0020 2020 2020 2020 2022 2222 5468 6520  .        """The 
-0000e890: 6044 696d 656e 7369 6f6e 6020 6f62 6a65  `Dimension` obje
-0000e8a0: 6374 2072 6570 7265 7365 6e74 696e 6720  ct representing 
-0000e8b0: 726f 7720 656c 656d 656e 7473 2069 6e20  row elements in 
-0000e8c0: 7468 6973 206d 6174 7269 782e 2222 2200  this matrix.""".
-0000e8d0: 2020 2020 6465 6620 5f72 6f77 735f 6469      def _rows_di
-0000e8e0: 6d65 6e73 696f 6e28 7365 6c66 293a 0020  mension(self):. 
-0000e8f0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-0000e900: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000e910: 2073 656c 662e 5f72 6f77 735f 6469 6d65   self._rows_dime
-0000e920: 6e73 696f 6e2e 7375 6274 6f74 616c 7300  nsion.subtotals.
-0000e930: 2020 2020 2020 2020 2222 2253 6571 7565          """Seque
-0000e940: 6e63 6520 6f66 205f 5375 6274 6f74 616c  nce of _Subtotal
-0000e950: 206f 626a 6563 7420 666f 7220 6561 6368   object for each
-0000e960: 2069 6e73 6572 7465 6420 726f 772e 2222   inserted row.""
-0000e970: 2200 2020 2020 6465 6620 5f72 6f77 5f73  ".    def _row_s
-0000e980: 7562 746f 7461 6c73 2873 656c 6629 3a00  ubtotals(self):.
-0000e990: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-0000e9a0: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-0000e9b0: 6e20 5f42 6173 654f 7264 6572 4865 6c70  n _BaseOrderHelp
-0000e9c0: 6572 2e72 6f77 5f64 6973 706c 6179 5f6f  er.row_display_o
-0000e9d0: 7264 6572 2873 656c 662e 5f64 696d 656e  rder(self._dimen
-0000e9e0: 7369 6f6e 732c 2073 656c 662e 5f6d 6561  sions, self._mea
-0000e9f0: 7375 7265 7329 0020 2020 2020 2020 2022  sures).        "
-0000ea00: 2222 0020 2020 2020 2020 204e 6567 6174  "".        Negat
-0000ea10: 6976 6520 7661 6c75 6573 2072 6570 7265  ive values repre
-0000ea20: 7365 6e74 2069 6e73 6572 7465 6420 7375  sent inserted su
-0000ea30: 6274 6f74 616c 2d72 6f77 206c 6f63 6174  btotal-row locat
-0000ea40: 696f 6e73 2e00 0020 2020 2020 2020 2022  ions...        "
-0000ea50: 2222 3144 206e 702e 696e 7436 3420 6e64  ""1D np.int64 nd
-0000ea60: 6172 7261 7920 6f66 2073 6967 6e65 6420  array of signed 
-0000ea70: 696e 7420 6964 7820 666f 7220 6561 6368  int idx for each
-0000ea80: 2061 7373 656d 626c 6564 2072 6f77 2e00   assembled row..
-0000ea90: 2020 2020 6465 6620 5f72 6f77 5f6f 7264      def _row_ord
-0000eaa0: 6572 2873 656c 6629 3a00 2020 2020 406c  er(self):.    @l
-0000eab0: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-0000eac0: 2020 2020 2072 6574 7572 6e20 636f 6c5f       return col_
-0000ead0: 7369 676e 6966 6963 616e 6365 0020 2020  significance.   
-0000eae0: 2020 2020 2063 6f6c 5f73 6967 6e69 6669       col_signifi
-0000eaf0: 6361 6e63 655b 3a5d 203d 205b 7475 706c  cance[:] = [tupl
-0000eb00: 6528 6e70 2e77 6865 7265 2873 6967 5f72  e(np.where(sig_r
-0000eb10: 6f77 295b 305d 2920 666f 7220 7369 675f  ow)[0]) for sig_
-0000eb20: 726f 7720 696e 2073 6967 6e69 6669 6361  row in significa
-0000eb30: 6e63 655d 0020 2020 2020 2020 2063 6f6c  nce].        col
-0000eb40: 5f73 6967 6e69 6669 6361 6e63 6520 3d20  _significance = 
-0000eb50: 6e70 2e65 6d70 7479 2828 6c65 6e28 7369  np.empty((len(si
-0000eb60: 676e 6966 6963 616e 6365 292c 292c 2064  gnificance),), d
-0000eb70: 7479 7065 3d6f 626a 6563 7429 0020 2020  type=object).   
-0000eb80: 2020 2020 2020 2020 2073 6967 6e69 6669           signifi
-0000eb90: 6361 6e63 6520 3d20 6e70 2e6c 6f67 6963  cance = np.logic
-0000eba0: 616c 5f61 6e64 2874 5f73 7461 7473 203c  al_and(t_stats <
-0000ebb0: 2030 2c20 7369 676e 6966 6963 616e 6365   0, significance
-0000ebc0: 2900 2020 2020 2020 2020 6966 206f 6e6c  ).        if onl
-0000ebd0: 795f 6c61 7267 6572 3a00 2020 2020 2020  y_larger:.      
-0000ebe0: 2020 7369 676e 6966 6963 616e 6365 203d    significance =
-0000ebf0: 2070 5f76 616c 7320 3c20 616c 7068 6100   p_vals < alpha.
-0000ec00: 2020 2020 2020 2020 2222 2231 4420 6e64          """1D nd
-0000ec10: 6172 7261 7920 636f 6e74 6169 6e69 6e67  array containing
-0000ec20: 2074 7570 6c65 7320 6f66 2069 6e74 2070   tuples of int p
-0000ec30: 6169 7277 6973 6520 696e 6469 6365 7320  airwise indices 
-0000ec40: 6f66 2065 6163 6820 636f 6c75 6d6e 2e22  of each column."
-0000ec50: 2222 0020 2020 2064 6566 205f 7061 6972  "".    def _pair
-0000ec60: 7769 7365 5f69 6e64 6963 6573 2870 5f76  wise_indices(p_v
-0000ec70: 616c 732c 2074 5f73 7461 7473 2c20 616c  als, t_stats, al
-0000ec80: 7068 612c 206f 6e6c 795f 6c61 7267 6572  pha, only_larger
-0000ec90: 293a 0020 2020 2040 7374 6174 6963 6d65  ):.    @staticme
-0000eca0: 7468 6f64 0000 2020 2020 2020 2020 7265  thod..        re
-0000ecb0: 7475 726e 2053 6563 6f6e 644f 7264 6572  turn SecondOrder
-0000ecc0: 4d65 6173 7572 6573 2873 656c 662e 5f63  Measures(self._c
-0000ecd0: 7562 652c 2073 656c 662e 5f64 696d 656e  ube, self._dimen
-0000ece0: 7369 6f6e 732c 2073 656c 662e 5f73 6c69  sions, self._sli
-0000ecf0: 6365 5f69 6478 2900 2020 2020 2020 2020  ce_idx).        
-0000ed00: 2222 2253 6563 6f6e 644f 7264 6572 4d65  """SecondOrderMe
-0000ed10: 6173 7572 6573 2063 6f6c 6c65 6374 696f  asures collectio
-0000ed20: 6e20 6f62 6a65 6374 2066 6f72 2074 6869  n object for thi
-0000ed30: 7320 6375 6265 2d72 6573 756c 742e 2222  s cube-result.""
-0000ed40: 2200 2020 2020 6465 6620 5f6d 6561 7375  ".    def _measu
-0000ed50: 7265 7328 7365 6c66 293a 0020 2020 2040  res(self):.    @
-0000ed60: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-0000ed70: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-0000ed80: 6172 7261 7928 6469 6d65 6e73 696f 6e2e  array(dimension.
-0000ed90: 656c 656d 656e 745f 6c61 6265 6c73 202b  element_labels +
-0000eda0: 2064 696d 656e 7369 6f6e 2e73 7562 746f   dimension.subto
-0000edb0: 7461 6c5f 6c61 6265 6c73 295b 6f72 6465  tal_labels)[orde
-0000edc0: 725d 0020 2020 2020 2020 2022 2222 0020  r].        """. 
-0000edd0: 2020 2020 2020 2077 6974 6820 7468 6569         with thei
-0000ede0: 7220 7265 7370 6563 7469 7665 2064 6174  r respective dat
-0000edf0: 6120 7665 6374 6f72 2e00 2020 2020 2020  a vector..      
-0000ee00: 2020 696e 2074 6865 2073 6571 7565 6e63    in the sequenc
-0000ee10: 6520 7370 6563 6966 6965 6420 6279 2060  e specified by `
-0000ee20: 6f72 6465 7260 2c20 7375 6368 2074 6861  order`, such tha
-0000ee30: 7420 6c61 6265 6c73 2061 7265 206f 7264  t labels are ord
-0000ee40: 6572 6564 2074 6f20 636f 7272 6573 706f  ered to correspo
-0000ee50: 6e64 0020 2020 2020 2020 2054 6865 7365  nd.        These
-0000ee60: 2061 7265 2073 7569 7461 626c 6520 666f   are suitable fo
-0000ee70: 7220 7573 6520 6173 2072 6f77 2f63 6f6c  r use as row/col
-0000ee80: 756d 6e20 6865 6164 696e 6773 3b20 6c61  umn headings; la
-0000ee90: 6265 6c73 2066 6f72 2073 7562 746f 7461  bels for subtota
-0000eea0: 6c73 2061 7070 6561 7200 0020 2020 2020  ls appear..     
-0000eeb0: 2020 2022 2222 3144 2073 7472 206e 6461     """1D str nda
-0000eec0: 7272 6179 206f 6620 6e61 6d65 2066 6f72  rray of name for
-0000eed0: 2065 6163 6820 7665 6374 6f72 206f 6620   each vector of 
-0000eee0: 6064 696d 656e 7369 6f6e 602e 0020 2020  `dimension`..   
-0000eef0: 2064 6566 205f 6469 6d65 6e73 696f 6e5f   def _dimension_
-0000ef00: 6c61 6265 6c73 2873 656c 662c 2064 696d  labels(self, dim
-0000ef10: 656e 7369 6f6e 2c20 6f72 6465 7229 3a00  ension, order):.
-0000ef20: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000ef30: 6e70 2e61 7272 6179 2864 696d 656e 7369  np.array(dimensi
-0000ef40: 6f6e 2e65 6c65 6d65 6e74 5f69 6473 202b  on.element_ids +
-0000ef50: 2064 696d 656e 7369 6f6e 2e69 6e73 6572   dimension.inser
-0000ef60: 7469 6f6e 5f69 6473 295b 6f72 6465 725d  tion_ids)[order]
-0000ef70: 0020 2020 2020 2020 2022 2222 0020 2020  .        """.   
-0000ef80: 2020 2020 2063 6f72 7265 7370 6f6e 6420       correspond 
-0000ef90: 7769 7468 2074 6865 6972 2072 6573 7065  with their respe
-0000efa0: 6374 6976 6520 6461 7461 2076 6563 746f  ctive data vecto
-0000efb0: 722e 0020 2020 2020 2020 2069 6e20 7468  r..        in th
-0000efc0: 6520 7365 7175 656e 6365 2073 7065 6369  e sequence speci
-0000efd0: 6669 6564 2062 7920 606f 7264 6572 602c  fied by `order`,
-0000efe0: 2073 7563 6820 7468 6174 2063 6f64 6573   such that codes
-0000eff0: 2061 7265 206f 7264 6572 6564 2074 6f00   are ordered to.
-0000f000: 6164 0000 3d00 0000 9901 0000 0010 0000  ad..=...........
-0000f010: 5000 0000 0000 0000 a80f 0000 770f 0000  P...........w...
-0000f020: 3e0f 0000 160f 0000 ea0e 0000 bf0e 0000  >...............
-0000f030: 900e 0000 6f0e 0000 650e 0000 640e 0000  ....o...e...d...
-0000f040: 190e 0000 180e 0000 060e 0000 e80d 0000  ................
-0000f050: 990d 0000 980d 0000 400d 0000 f30c 0000  ........@.......
-0000f060: db0c 0000 cf0c 0000 770c 0000 220c 0000  ........w..."...
-0000f070: cc0b 0000 aa0b 0000 590b 0000 290b 0000  ........Y...)...
-0000f080: 280b 0000 160b 0000 f40a 0000 a30a 0000  (...............
-0000f090: 800a 0000 7f0a 0000 6d0a 0000 4b0a 0000  ........m...K...
-0000f0a0: 040a 0000 030a 0000 b209 0000 9f09 0000  ................
-0000f0b0: 9309 0000 4109 0000 ed08 0000 ec08 0000  ....A...........
-0000f0c0: da08 0000 bb08 0000 8408 0000 8308 0000  ................
-0000f0d0: 2a08 0000 1e08 0000 cc07 0000 7b07 0000  *...........{...
-0000f0e0: 7a07 0000 6807 0000 5007 0000 0e07 0000  z...h...P.......
-0000f0f0: 0d07 0000 b806 0000 b706 0000 8106 0000  ................
-0000f100: 7506 0000 2206 0000 cf05 0000 7f05 0000  u..."...........
-0000f110: 5f05 0000 1e05 0000 e104 0000 b504 0000  _...............
-0000f120: 8104 0000 3604 0000 0204 0000 af03 0000  ....6...........
-0000f130: 8003 0000 6303 0000 1903 0000 ce02 0000  ....c...........
-0000f140: ac02 0000 7102 0000 3a02 0000 0c02 0000  ....q...:.......
-0000f150: c701 0000 9901 0000 9801 0000 0000 0000  ................
-0000f160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000f190: 0000 0000 0000 0000 0020 2020 2020 2020  .........       
-0000f1a0: 2020 2020 204d 2e52 4f57 5f53 4841 5245       M.ROW_SHARE
-0000f1b0: 5f53 554d 3a20 2272 6f77 5f73 6861 7265  _SUM: "row_share
-0000f1c0: 5f73 756d 222c 0020 2020 2020 2020 2020  _sum",.         
-0000f1d0: 2020 204d 2e52 4f57 5f50 4552 4345 4e54     M.ROW_PERCENT
-0000f1e0: 5f4d 4f45 3a20 2272 6f77 5f73 7464 5f65  _MOE: "row_std_e
-0000f1f0: 7272 222c 2020 2320 6d6f 6e6f 746f 6e69  rr",  # monotoni
-0000f200: 6320 7472 616e 7366 6f72 6d00 2020 2020  c transform.    
-0000f210: 2020 2020 2020 2020 4d2e 524f 575f 5045          M.ROW_PE
-0000f220: 5243 454e 543a 2022 726f 775f 7072 6f70  RCENT: "row_prop
-0000f230: 6f72 7469 6f6e 7322 2c00 2020 2020 2020  ortions",.      
-0000f240: 2020 2020 2020 4d2e 524f 575f 4241 5345        M.ROW_BASE
-0000f250: 5f57 4549 4748 5445 443a 2022 726f 775f  _WEIGHTED: "row_
-0000f260: 7765 6967 6874 6564 5f62 6173 6573 222c  weighted_bases",
-0000f270: 0020 2020 2020 2020 2020 2020 204d 2e52  .            M.R
-0000f280: 4f57 5f42 4153 455f 554e 5745 4947 4854  OW_BASE_UNWEIGHT
-0000f290: 4544 3a20 2272 6f77 5f75 6e77 6569 6768  ED: "row_unweigh
-0000f2a0: 7465 645f 6261 7365 7322 2c00 2020 2020  ted_bases",.    
-0000f2b0: 2020 2020 2020 2020 4d2e 5056 414c 5545          M.PVALUE
-0000f2c0: 533a 2022 7076 616c 7565 7322 2c00 2020  S: "pvalues",.  
-0000f2d0: 2020 2020 2020 2020 2020 4d2e 504f 5055            M.POPU
-0000f2e0: 4c41 5449 4f4e 5f4d 4f45 3a20 2270 6f70  LATION_MOE: "pop
-0000f2f0: 756c 6174 696f 6e5f 7374 645f 6572 7222  ulation_std_err"
-0000f300: 2c20 2023 206d 6f6e 6f74 6f6e 6963 2074  ,  # monotonic t
-0000f310: 7261 6e73 666f 726d 0020 2020 2020 2020  ransform.       
-0000f320: 2020 2020 204d 2e50 4f50 554c 4154 494f       M.POPULATIO
-0000f330: 4e3a 2022 706f 7075 6c61 7469 6f6e 5f70  N: "population_p
-0000f340: 726f 706f 7274 696f 6e73 222c 2020 2320  roportions",  # 
-0000f350: 6d6f 6e74 6f6e 6963 2074 7261 6e73 666f  montonic transfo
-0000f360: 726d 0020 2020 2020 2020 2020 2020 204d  rm.            M
-0000f370: 2e4d 4541 4e3a 2022 6d65 616e 7322 2c00  .MEAN: "means",.
-0000f380: 2020 2020 2020 2020 2020 2020 4d2e 434f              M.CO
-0000f390: 4c55 4d4e 5f53 5444 4552 523a 2022 636f  LUMN_STDERR: "co
-0000f3a0: 6c75 6d6e 5f73 7464 5f65 7272 222c 0020  lumn_std_err",. 
-0000f3b0: 2020 2020 2020 2020 2020 204d 2e43 4f4c             M.COL
-0000f3c0: 554d 4e5f 5354 4444 4556 3a20 2263 6f6c  UMN_STDDEV: "col
-0000f3d0: 756d 6e5f 7072 6f70 6f72 7469 6f6e 5f76  umn_proportion_v
-0000f3e0: 6172 6961 6e63 6573 222c 2020 2320 6d6f  ariances",  # mo
-0000f3f0: 6e6f 746f 6e69 6320 7472 616e 7366 6f72  notonic transfor
-0000f400: 6d00 2020 2020 2020 2020 2020 2020 4d2e  m.            M.
-0000f410: 434f 4c55 4d4e 5f53 4841 5245 5f53 554d  COLUMN_SHARE_SUM
-0000f420: 3a20 2263 6f6c 756d 6e5f 7368 6172 655f  : "column_share_
-0000f430: 7375 6d22 2c00 2020 2020 2020 2020 2020  sum",.          
-0000f440: 2020 4d2e 434f 4c55 4d4e 5f50 4552 4345    M.COLUMN_PERCE
-0000f450: 4e54 5f4d 4f45 3a20 2263 6f6c 756d 6e5f  NT_MOE: "column_
-0000f460: 7374 645f 6572 7222 2c20 2023 206d 6f6e  std_err",  # mon
-0000f470: 6f74 6f6e 6963 2074 7261 6e73 666f 726d  otonic transform
-0000f480: 0020 2020 2020 2020 2020 2020 204d 2e43  .            M.C
-0000f490: 4f4c 554d 4e5f 5045 5243 454e 543a 2022  OLUMN_PERCENT: "
-0000f4a0: 636f 6c75 6d6e 5f70 726f 706f 7274 696f  column_proportio
-0000f4b0: 6e73 222c 0020 2020 2020 2020 2020 2020  ns",.           
-0000f4c0: 204d 2e43 4f4c 554d 4e5f 494e 4445 583a   M.COLUMN_INDEX:
-0000f4d0: 2022 636f 6c75 6d6e 5f69 6e64 6578 222c   "column_index",
-0000f4e0: 0020 2020 2020 2020 2020 2020 204d 2e43  .            M.C
-0000f4f0: 4f4c 554d 4e5f 4241 5345 5f57 4549 4748  OLUMN_BASE_WEIGH
-0000f500: 5445 443a 2022 636f 6c75 6d6e 5f77 6569  TED: "column_wei
-0000f510: 6768 7465 645f 6261 7365 7322 2c00 2020  ghted_bases",.  
-0000f520: 2020 2020 2020 2020 2020 4d2e 434f 4c55            M.COLU
-0000f530: 4d4e 5f42 4153 455f 554e 5745 4947 4854  MN_BASE_UNWEIGHT
-0000f540: 4544 3a20 2263 6f6c 756d 6e5f 756e 7765  ED: "column_unwe
-0000f550: 6967 6874 6564 5f62 6173 6573 222c 0020  ighted_bases",. 
-0000f560: 2020 2020 2020 2070 726f 706e 616d 655f         propname_
-0000f570: 6279 5f6d 6561 7375 7265 203d 207b 0020  by_measure = {. 
-0000f580: 2020 2020 2020 2023 202d 2d2d 206d 6f6e         # --- mon
-0000f590: 6f74 6f6e 6963 2074 7261 6e73 666f 726d  otonic transform
-0000f5a0: 6174 696f 6e73 2070 7265 7365 7276 6520  ations preserve 
-0000f5b0: 6f72 6465 722c 2074 6865 2073 6f72 7469  order, the sorti
-0000f5c0: 6e67 2069 7320 636f 7272 6563 742e 0020  ng is correct.. 
-0000f5d0: 2020 2020 2020 2023 202d 2d2d 2061 6e6f         # --- ano
-0000f5e0: 7468 6572 206d 6561 7375 7265 2074 6861  ther measure tha
-0000f5f0: 7420 6973 2061 6c72 6561 6479 2063 616c  t is already cal
-0000f600: 6375 6c61 7465 6420 6279 2074 6865 2061  culated by the a
-0000f610: 7373 656d 626c 6572 2e20 4265 6361 7573  ssembler. Becaus
-0000f620: 6500 2020 2020 2020 2020 2320 2d2d 2d20  e.        # --- 
-0000f630: 536f 6d65 7469 6d65 7320 7765 2073 6f72  Sometimes we sor
-0000f640: 7420 6279 2061 206d 6561 7375 7265 2074  t by a measure t
-0000f650: 6861 7420 6973 2061 206d 6f6e 6f74 6f6e  hat is a monoton
-0000f660: 6963 2074 7261 6e73 666f 726d 6174 696f  ic transformatio
-0000f670: 6e20 6f66 0020 2020 2020 2020 2022 2222  n of.        """
-0000f680: 0020 2020 2020 2020 2054 6869 7320 7072  .        This pr
-0000f690: 6f70 6572 7479 2069 7320 6e6f 7420 7573  operty is not us
-0000f6a0: 6564 2062 7920 736f 6d65 2073 7562 636c  ed by some subcl
-0000f6b0: 6173 7365 732e 0000 2020 2020 2020 2020  asses...        
-0000f6c0: 5265 7475 726e 7320 4e6f 6e65 2077 6865  Returns None whe
-0000f6d0: 6e20 7468 6520 6d65 6173 7572 6520 696e  n the measure in
-0000f6e0: 2074 6865 2060 6f72 6465 725f 7370 6563   the `order_spec
-0000f6f0: 6020 6973 206e 6f74 2065 6e61 626c 6520  ` is not enable 
-0000f700: 666f 7220 736f 7274 696e 672e 0000 2020  for sorting...  
-0000f710: 2020 2020 2020 2222 2253 6563 6f6e 642d        """Second-
-0000f720: 6f72 6465 7220 6d65 6173 7572 6520 6f62  order measure ob
-0000f730: 6a65 6374 2070 726f 7669 6469 6e67 2076  ject providing v
-0000f740: 616c 7565 7320 666f 7220 736f 7274 2e00  alues for sort..
-0000f750: 2020 2020 6465 6620 5f6d 6561 7375 7265      def _measure
-0000f760: 2873 656c 6629 3a00 2020 2020 406c 617a  (self):.    @laz
-0000f770: 7970 726f 7065 7274 7900 0020 2020 2020  yproperty..     
-0000f780: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-0000f790: 6e70 2e77 6865 7265 2873 656c 662e 5f73  np.where(self._s
-0000f7a0: 6563 6f6e 645f 6f72 6465 725f 6d65 6173  econd_order_meas
-0000f7b0: 7572 6573 2e72 6f77 735f 7072 756e 696e  ures.rows_prunin
-0000f7c0: 675f 6d61 736b 295b 305d 2900 2020 2020  g_mask)[0]).    
-0000f7d0: 2020 2020 2320 2d2d 2d20 7375 6273 6574      # --- subset
-0000f7e0: 2062 6563 6175 7365 206e 756d 7079 2e77   because numpy.w
-0000f7f0: 6865 7265 2072 6574 7572 6e73 2074 7570  here returns tup
-0000f800: 6c65 2074 6f20 616c 6c6f 7720 666f 7220  le to allow for 
-0000f810: 6d75 6c74 6970 6c65 2061 7865 7300 2020  multiple axes.  
-0000f820: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-0000f830: 2020 5468 6573 6520 726f 7773 2061 7265    These rows are
-0000f840: 2073 7562 6a65 6374 2074 6f20 7072 756e   subject to prun
-0000f850: 696e 672c 2064 6570 656e 6469 6e67 206f  ing, depending o
-0000f860: 6e20 6120 7573 6572 2073 6574 7469 6e67  n a user setting
-0000f870: 2069 6e20 7468 6520 6469 6d65 6e73 696f   in the dimensio
-0000f880: 6e2e 0000 2020 2020 2020 2020 2222 2274  n...        """t
-0000f890: 7570 6c65 206f 6620 696e 7420 696e 6465  uple of int inde
-0000f8a0: 7820 666f 7220 6561 6368 2072 6f77 2077  x for each row w
-0000f8b0: 6974 6820 4e20 3d20 302e 0020 2020 2064  ith N = 0..    d
-0000f8c0: 6566 205f 656d 7074 795f 726f 775f 6964  ef _empty_row_id
-0000f8d0: 7873 2873 656c 6629 3a00 2020 2020 406c  xs(self):.    @l
-0000f8e0: 617a 7970 726f 7065 7274 7900 0020 2020  azyproperty..   
-0000f8f0: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-0000f900: 6528 6e70 2e77 6865 7265 2873 656c 662e  e(np.where(self.
-0000f910: 5f73 6563 6f6e 645f 6f72 6465 725f 6d65  _second_order_me
-0000f920: 6173 7572 6573 2e63 6f6c 756d 6e73 5f70  asures.columns_p
-0000f930: 7275 6e69 6e67 5f6d 6173 6b29 5b30 5d29  runing_mask)[0])
-0000f940: 0020 2020 2020 2020 2023 202d 2d2d 2073  .        # --- s
-0000f950: 7562 7365 7420 6265 6361 7573 6520 6e75  ubset because nu
-0000f960: 6d70 792e 7768 6572 6520 7265 7475 726e  mpy.where return
-0000f970: 7320 7475 706c 6520 746f 2061 6c6c 6f77  s tuple to allow
-0000f980: 2066 6f72 206d 756c 7469 706c 6520 6178   for multiple ax
-0000f990: 6573 0020 2020 2020 2020 2022 2222 0020  es.        """. 
-0000f9a0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-0000f9b0: 2e00 2020 2020 2020 2020 5468 6573 6520  ..        These 
-0000f9c0: 636f 6c75 6d6e 7320 6172 6520 7375 626a  columns are subj
-0000f9d0: 6563 7420 746f 2070 7275 6e69 6e67 2c20  ect to pruning, 
-0000f9e0: 6465 7065 6e64 696e 6720 6f6e 2061 2075  depending on a u
-0000f9f0: 7365 7220 7365 7474 696e 6720 696e 2074  ser setting in t
-0000fa00: 6865 0000 2020 2020 2020 2020 2222 2274  he..        """t
-0000fa10: 7570 6c65 206f 6620 696e 7420 696e 6465  uple of int inde
-0000fa20: 7820 666f 7220 6561 6368 2063 6f6c 756d  x for each colum
-0000fa30: 6e20 7769 7468 2028 756e 7765 6967 6874  n with (unweight
-0000fa40: 6564 2920 4e20 3d20 302e 0020 2020 2064  ed) N = 0..    d
-0000fa50: 6566 205f 656d 7074 795f 636f 6c75 6d6e  ef _empty_column
-0000fa60: 5f69 6478 7328 7365 6c66 293a 0020 2020  _idxs(self):.   
-0000fa70: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-0000fa80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000fa90: 656c 662e 5f64 696d 656e 7369 6f6e 735b  elf._dimensions[
-0000faa0: 315d 0020 2020 2020 2020 2022 2222 5468  1].        """Th
-0000fab0: 6520 6044 696d 656e 7369 6f6e 6020 6f62  e `Dimension` ob
-0000fac0: 6a65 6374 2072 6570 7265 7365 6e74 696e  ject representin
-0000fad0: 6720 636f 6c75 6d6e 2065 6c65 6d65 6e74  g column element
-0000fae0: 7320 696e 2074 6865 206d 6174 7269 782e  s in the matrix.
-0000faf0: 2222 2200 2020 2020 6465 6620 5f63 6f6c  """.    def _col
-0000fb00: 756d 6e73 5f64 696d 656e 7369 6f6e 2873  umns_dimension(s
-0000fb10: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-0000fb20: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-0000fb30: 2072 6574 7572 6e20 6e70 2e61 7272 6179   return np.array
-0000fb40: 2873 656c 662e 5f6f 7264 6572 2c20 6474  (self._order, dt
-0000fb50: 7970 653d 696e 7429 0020 2020 2020 2020  ype=int).       
-0000fb60: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
-0000fb70: 7272 6179 285b 6964 7820 666f 7220 6964  rray([idx for id
-0000fb80: 7820 696e 2073 656c 662e 5f6f 7264 6572  x in self._order
-0000fb90: 2069 6620 6964 7820 3e3d 2030 5d2c 2064   if idx >= 0], d
-0000fba0: 7479 7065 3d69 6e74 2900 2020 2020 2020  type=int).      
-0000fbb0: 2020 6966 2073 656c 662e 5f70 7275 6e65    if self._prune
-0000fbc0: 5f73 7562 746f 7461 6c73 3a00 2020 2020  _subtotals:.    
-0000fbd0: 2020 2020 2320 2d2d 2d20 7573 652e 2053      # --- use. S
-0000fbe0: 7065 6369 6679 696e 6720 696e 7420 7479  pecifying int ty
-0000fbf0: 7065 2070 7265 7665 6e74 7320 6661 696c  pe prevents fail
-0000fc00: 7572 6520 7768 656e 2074 6865 7265 2061  ure when there a
-0000fc10: 7265 207a 6572 6f20 656c 656d 656e 7473  re zero elements
-0000fc20: 2e00 2020 2020 2020 2020 2320 2d2d 2d20  ..        # --- 
-0000fc30: 696e 2061 6e20 6e70 2e5f 6978 2829 2063  in an np._ix() c
-0000fc40: 616c 6c2e 2049 7420 776f 726b 7320 6669  all. It works fi
-0000fc50: 6e65 2061 7320 6120 7365 7175 656e 6365  ne as a sequence
-0000fc60: 2074 6f6f 2066 6f72 2061 6e79 2061 6c74   too for any alt
-0000fc70: 6572 6e61 7465 0020 2020 2020 2020 2023  ernate.        #
-0000fc80: 202d 2d2d 2052 6574 7572 6e69 6e67 2061   --- Returning a
-0000fc90: 7320 6e70 2e61 7272 6179 2073 7569 7473  s np.array suits
-0000fca0: 2069 7473 2069 6e74 656e 6465 6420 7075   its intended pu
-0000fcb0: 7270 6f73 652c 2077 6869 6368 2069 7320  rpose, which is 
-0000fcc0: 746f 2070 6172 7469 6369 7061 7465 0020  to participate. 
-0000fcd0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-0000fce0: 2020 2072 6f77 732d 6469 6d65 6e73 696f     rows-dimensio
-0000fcf0: 6e2e 0020 2020 2020 2020 2069 6e73 6572  n..        inser
-0000fd00: 7469 6f6e 2c20 6869 6469 6e67 2c20 7072  tion, hiding, pr
-0000fd10: 756e 696e 672c 2061 6e64 206f 7264 6572  uning, and order
-0000fd20: 696e 6720 7472 616e 7366 6f72 6d73 2073  ing transforms s
-0000fd30: 7065 6369 6669 6564 2069 6e20 7468 6500  pecified in the.
-0000fd40: 2020 2020 2020 2020 4e65 6761 7469 7665          Negative
-0000fd50: 2076 616c 7565 7320 7265 7072 6573 656e   values represen
-0000fd60: 7420 696e 7365 7274 6564 2d76 6563 746f  t inserted-vecto
-0000fd70: 7220 6c6f 6361 7469 6f6e 732e 2052 6574  r locations. Ret
-0000fd80: 7572 6e65 6420 7365 7175 656e 6365 2072  urned sequence r
-0000fd90: 6566 6c65 6374 7300 0020 2020 2020 2020  eflects..       
-0000fda0: 2022 2222 3144 206e 702e 696e 7436 3420   """1D np.int64 
-0000fdb0: 6e64 6172 7261 7920 6f66 2073 6967 6e65  ndarray of signe
-0000fdc0: 6420 696e 7420 6964 7820 666f 7220 6561  d int idx for ea
-0000fdd0: 6368 2076 6563 746f 7220 6f66 2064 696d  ch vector of dim
-0000fde0: 656e 7369 6f6e 2e00 2020 2020 6465 6620  ension..    def 
-0000fdf0: 5f64 6973 706c 6179 5f6f 7264 6572 2873  _display_order(s
-0000fe00: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-0000fe10: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-0000fe20: 2072 6574 7572 6e20 4865 6c70 6572 436c   return HelperCl
-0000fe30: 7328 6469 6d65 6e73 696f 6e73 2c20 7365  s(dimensions, se
-0000fe40: 636f 6e64 5f6f 7264 6572 5f6d 6561 7375  cond_order_measu
-0000fe50: 7265 7329 2e5f 6469 7370 6c61 795f 6f72  res)._display_or
-0000fe60: 6465 7200 0020 2020 2020 2020 2029 0020  der..        ). 
-0000fe70: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
-0000fe80: 5f52 6f77 4f72 6465 7248 656c 7065 7200  _RowOrderHelper.
-0000fe90: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-0000fea0: 6f6c 6c61 7469 6f6e 5f6d 6574 686f 6420  ollation_method 
-0000feb0: 3d3d 2043 4d2e 4d41 5247 494e 414c 0020  == CM.MARGINAL. 
-0000fec0: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
-0000fed0: 5f53 6f72 7452 6f77 7342 794d 6172 6769  _SortRowsByMargi
-0000fee0: 6e61 6c48 656c 7065 7200 2020 2020 2020  nalHelper.      
-0000fef0: 2020 2020 2020 6966 2063 6f6c 6c61 7469        if collati
-0000ff00: 6f6e 5f6d 6574 686f 6420 3d3d 2043 4d2e  on_method == CM.
-0000ff10: 4c41 4245 4c00 2020 2020 2020 2020 2020  LABEL.          
-0000ff20: 2020 656c 7365 205f 536f 7274 526f 7773    else _SortRows
-0000ff30: 4279 4c61 6265 6c48 656c 7065 7200 2020  ByLabelHelper.  
-0000ff40: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-0000ff50: 6c61 7469 6f6e 5f6d 6574 686f 6420 3d3d  lation_method ==
-0000ff60: 2043 4d2e 4f50 504f 5349 4e47 5f49 4e53   CM.OPPOSING_INS
-0000ff70: 4552 5449 4f4e 0020 2020 2020 2020 2020  ERTION.         
-0000ff80: 2020 2065 6c73 6520 5f53 6f72 7452 6f77     else _SortRow
-0000ff90: 7342 7949 6e73 6572 7465 6443 6f6c 756d  sByInsertedColum
-0000ffa0: 6e48 656c 7065 7200 2020 2020 2020 2020  nHelper.        
-0000ffb0: 2020 2020 6966 2063 6f6c 6c61 7469 6f6e      if collation
-0000ffc0: 5f6d 6574 686f 6420 3d3d 2043 4d2e 4f50  _method == CM.OP
-0000ffd0: 504f 5349 4e47 5f49 4e53 4552 5449 4f4e  POSING_INSERTION
-0000ffe0: 2061 6e64 2064 696d 5f74 7970 6520 696e   and dim_type in
-0000fff0: 2044 542e 4152 5241 595f 5459 5045 5300   DT.ARRAY_TYPES.
-00010000: 6164 0000 3c00 0000 d801 0000 0010 0000  ad..<...........
-00010010: 6000 0000 0000 0000 b40f 0000 8b0f 0000  `...............
-00010020: 6b0f 0000 500f 0000 1e0f 0000 ec0e 0000  k...P...........
-00010030: a30e 0000 520e 0000 250e 0000 e60d 0000  ....R...%.......
-00010040: ab0d 0000 790d 0000 440d 0000 090d 0000  ....y...D.......
-00010050: d80c 0000 a10c 0000 7f0c 0000 750c 0000  ............u...
-00010060: 4a0c 0000 0e0c 0000 0d0c 0000 e80b 0000  J...............
-00010070: c10b 0000 730b 0000 650b 0000 640b 0000  ....s...e...d...
-00010080: 1e0b 0000 1d0b 0000 0b0b 0000 f50a 0000  ................
-00010090: a80a 0000 a70a 0000 4f0a 0000 020a 0000  ........O.......
-000100a0: ea09 0000 de09 0000 a709 0000 6909 0000  ............i...
-000100b0: 5f09 0000 5e09 0000 4c09 0000 3109 0000  _...^...L...1...
-000100c0: f808 0000 f708 0000 aa08 0000 9e08 0000  ................
-000100d0: 6708 0000 2408 0000 1a08 0000 1908 0000  g...$...........
-000100e0: 0708 0000 e707 0000 9c07 0000 6507 0000  ............e...
-000100f0: 1d07 0000 1307 0000 1207 0000 0007 0000  ................
-00010100: e106 0000 9306 0000 7006 0000 6f06 0000  ........p...o...
-00010110: 6e06 0000 4206 0000 f305 0000 f205 0000  n...B...........
-00010120: e005 0000 ca05 0000 8405 0000 8305 0000  ................
-00010130: 2b05 0000 de04 0000 c604 0000 ba04 0000  +...............
-00010140: a204 0000 8004 0000 3a04 0000 1404 0000  ........:.......
-00010150: 0a04 0000 e003 0000 a303 0000 9903 0000  ................
-00010160: 9803 0000 8603 0000 6b03 0000 3303 0000  ........k...3...
-00010170: 3203 0000 e502 0000 d902 0000 a702 0000  2...............
-00010180: a602 0000 9402 0000 7402 0000 2c02 0000  ........t...,...
-00010190: 2b02 0000 d801 0000 d701 0000 0000 0000  +...............
-000101a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101d0: 0000 0000 0000 0000 2020 2020 2020 2020  ........        
-000101e0: 5375 6274 6f74 616c 2d63 6f6c 756d 6e73  Subtotal-columns
-000101f0: 206e 6565 6420 746f 2062 6520 7072 756e   need to be prun
-00010200: 6564 2077 6865 6e20 616c 6c20 6261 7365  ed when all base
-00010210: 2d72 6f77 7320 6172 6520 7072 756e 6564  -rows are pruned
-00010220: 2e20 5375 6274 6f74 616c 0000 2020 2020  . Subtotal..    
-00010230: 2020 2020 2222 2254 7275 6520 6966 2073      """True if s
-00010240: 7562 746f 7461 6c20 636f 6c75 6d6e 7320  ubtotal columns 
-00010250: 6e65 6564 2074 6f20 6265 2070 7275 6e65  need to be prune
-00010260: 642c 2046 616c 7365 206f 7468 6572 7769  d, False otherwi
-00010270: 7365 2e00 2020 2020 6465 6620 5f70 7275  se..    def _pru
-00010280: 6e65 5f73 7562 746f 7461 6c73 2873 656c  ne_subtotals(sel
-00010290: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-000102a0: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-000102b0: 6574 7572 6e20 7365 6c66 2e5f 636f 6c75  eturn self._colu
-000102c0: 6d6e 735f 6469 6d65 6e73 696f 6e2e 6f72  mns_dimension.or
-000102d0: 6465 725f 7370 6563 0020 2020 2020 2020  der_spec.       
-000102e0: 2022 2222 0020 2020 2020 2020 2050 726f   """.        Pro
-000102f0: 7669 6465 7320 6163 6365 7373 2074 6f20  vides access to 
-00010300: 6f72 6465 7269 6e67 2064 6574 6169 6c73  ordering details
-00010310: 206c 696b 6520 6d65 6173 7572 6520 616e   like measure an
-00010320: 6420 736f 7274 2d64 6972 6563 7469 6f6e  d sort-direction
-00010330: 2e00 0020 2020 2020 2020 2022 2222 5f4f  ...        """_O
-00010340: 7264 6572 5370 6563 206f 626a 6563 7420  rderSpec object 
-00010350: 666f 7220 7468 6520 636f 6c75 6d6e 7320  for the columns 
-00010360: 6469 6d65 6e73 696f 6e2e 0020 2020 2064  dimension..    d
-00010370: 6566 205f 6f72 6465 725f 7370 6563 2873  ef _order_spec(s
-00010380: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-00010390: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-000103a0: 2029 0020 2020 2020 2020 2020 2020 2073   ).            s
-000103b0: 656c 662e 5f63 6f6c 756d 6e73 5f64 696d  elf._columns_dim
-000103c0: 656e 7369 6f6e 2c20 7365 6c66 2e5f 656d  ension, self._em
-000103d0: 7074 795f 636f 6c75 6d6e 5f69 6478 7300  pty_column_idxs.
-000103e0: 2020 2020 2020 2020 7265 7475 726e 2043          return C
-000103f0: 6f6c 6c61 746f 7243 6c73 2e64 6973 706c  ollatorCls.displ
-00010400: 6179 5f6f 7264 6572 2800 2020 2020 2020  ay_order(.      
-00010410: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-00010420: 656c 7365 2050 6179 6c6f 6164 4f72 6465  else PayloadOrde
-00010430: 7243 6f6c 6c61 746f 7200 2020 2020 2020  rCollator.      
-00010440: 2020 2020 2020 6966 2073 656c 662e 5f6f        if self._o
-00010450: 7264 6572 5f73 7065 632e 636f 6c6c 6174  rder_spec.collat
-00010460: 696f 6e5f 6d65 7468 6f64 203d 3d20 434d  ion_method == CM
-00010470: 2e45 5850 4c49 4349 545f 4f52 4445 5200  .EXPLICIT_ORDER.
-00010480: 2020 2020 2020 2020 2020 2020 4578 706c              Expl
-00010490: 6963 6974 4f72 6465 7243 6f6c 6c61 746f  icitOrderCollato
-000104a0: 7200 2020 2020 2020 2020 436f 6c6c 6174  r.        Collat
-000104b0: 6f72 436c 7320 3d20 2800 2020 2020 2020  orCls = (.      
-000104c0: 2020 2222 2200 2020 2020 2020 2020 726f    """.        ro
-000104d0: 7773 2d64 696d 656e 7369 6f6e 2e00 2020  ws-dimension..  
-000104e0: 2020 2020 2020 696e 7365 7274 696f 6e2c        insertion,
-000104f0: 2068 6964 696e 672c 2070 7275 6e69 6e67   hiding, pruning
-00010500: 2c20 616e 6420 6f72 6465 7269 6e67 2074  , and ordering t
-00010510: 7261 6e73 666f 726d 7320 7370 6563 6966  ransforms specif
-00010520: 6965 6420 696e 2074 6865 0020 2020 2020  ied in the.     
-00010530: 2020 204e 6567 6174 6976 6520 7661 6c75     Negative valu
-00010540: 6573 2072 6570 7265 7365 6e74 2069 6e73  es represent ins
-00010550: 6572 7465 642d 7665 6374 6f72 206c 6f63  erted-vector loc
-00010560: 6174 696f 6e73 2e20 5265 7475 726e 6564  ations. Returned
-00010570: 2073 6571 7565 6e63 6520 7265 666c 6563   sequence reflec
-00010580: 7473 0000 2020 2020 2020 2020 2222 2274  ts..        """t
-00010590: 7570 6c65 206f 6620 7369 676e 6564 2069  uple of signed i
-000105a0: 6e74 2069 6478 2066 6f72 2065 6163 6820  nt idx for each 
-000105b0: 636f 6c75 6d6e 206f 6620 6d65 6173 7572  column of measur
-000105c0: 6520 6d61 7472 6978 2e00 2020 2020 6465  e matrix..    de
-000105d0: 6620 5f6f 7264 6572 2873 656c 6629 3a00  f _order(self):.
-000105e0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-000105f0: 7900 0020 2020 2022 2222 456e 6361 7073  y..    """Encaps
-00010600: 756c 6174 6573 2074 6865 2063 6f6d 706c  ulates the compl
-00010610: 6578 6974 7920 6f66 2074 6865 2076 6172  exity of the var
-00010620: 696f 7573 206b 696e 6473 206f 6620 636f  ious kinds of co
-00010630: 6c75 6d6e 206f 7264 6572 696e 672e 2222  lumn ordering.""
-00010640: 2200 636c 6173 7320 5f43 6f6c 756d 6e4f  ".class _ColumnO
-00010650: 7264 6572 4865 6c70 6572 285f 4261 7365  rderHelper(_Base
-00010660: 4f72 6465 7248 656c 7065 7229 3a00 0000  OrderHelper):...
-00010670: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00010680: 656c 662e 5f64 696d 656e 7369 6f6e 735b  elf._dimensions[
-00010690: 305d 0020 2020 2020 2020 2022 2222 5468  0].        """Th
-000106a0: 6520 6044 696d 656e 7369 6f6e 6020 6f62  e `Dimension` ob
-000106b0: 6a65 6374 2072 6570 7265 7365 6e74 696e  ject representin
-000106c0: 6720 726f 7720 656c 656d 656e 7473 2069  g row elements i
-000106d0: 6e20 7468 6520 6d61 7472 6978 2e22 2222  n the matrix."""
-000106e0: 0020 2020 2064 6566 205f 726f 7773 5f64  .    def _rows_d
-000106f0: 696d 656e 7369 6f6e 2873 656c 6629 3a00  imension(self):.
-00010700: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00010710: 7900 0020 2020 2020 2020 2029 0020 2020  y..        ).   
-00010720: 2020 2020 2020 2020 2066 227b 7479 7065           f"{type
-00010730: 2873 656c 6629 2e5f 5f6e 616d 655f 5f7d  (self).__name__}
-00010740: 206d 7573 7420 696d 706c 656d 656e 7420   must implement 
-00010750: 602e 5f70 7275 6e65 5f73 7562 746f 7461  `._prune_subtota
-00010760: 6c73 6022 0020 2020 2020 2020 2072 6169  ls`".        rai
-00010770: 7365 204e 6f74 496d 706c 656d 656e 7465  se NotImplemente
-00010780: 6445 7272 6f72 2820 2023 2070 7261 676d  dError(  # pragm
-00010790: 613a 206e 6f20 636f 7665 7200 2020 2020  a: no cover.    
-000107a0: 2020 2020 2222 2254 7275 6520 6966 2073      """True if s
-000107b0: 7562 746f 7461 6c20 7665 6374 6f72 7320  ubtotal vectors 
-000107c0: 6e65 6564 2074 6f20 6265 2070 7275 6e65  need to be prune
-000107d0: 642c 2046 616c 7365 206f 7468 6572 7769  d, False otherwi
-000107e0: 7365 2e22 2222 0020 2020 2064 6566 205f  se.""".    def _
-000107f0: 7072 756e 655f 7375 6274 6f74 616c 7328  prune_subtotals(
-00010800: 7365 6c66 293a 0020 2020 2040 6c61 7a79  self):.    @lazy
-00010810: 7072 6f70 6572 7479 0000 2020 2020 2020  property..      
-00010820: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-00010830: 6622 7b74 7970 6528 7365 6c66 292e 5f5f  f"{type(self).__
-00010840: 6e61 6d65 5f5f 7d20 6d75 7374 2069 6d70  name__} must imp
-00010850: 6c65 6d65 6e74 2060 2e5f 6f72 6465 725f  lement `._order_
-00010860: 7370 6563 6022 0020 2020 2020 2020 2072  spec`".        r
-00010870: 6169 7365 204e 6f74 496d 706c 656d 656e  aise NotImplemen
-00010880: 7465 6445 7272 6f72 2820 2023 2070 7261  tedError(  # pra
-00010890: 676d 613a 206e 6f20 636f 7665 7200 2020  gma: no cover.  
-000108a0: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-000108b0: 2020 5072 6f76 6964 6573 2061 6363 6573    Provides acces
-000108c0: 7320 746f 206f 7264 6572 696e 6720 6465  s to ordering de
-000108d0: 7461 696c 7320 6c69 6b65 206d 6561 7375  tails like measu
-000108e0: 7265 2061 6e64 2073 6f72 742d 6469 7265  re and sort-dire
-000108f0: 6374 696f 6e2e 0000 2020 2020 2020 2020  ction...        
-00010900: 2222 225f 4f72 6465 7253 7065 6320 6f62  """_OrderSpec ob
-00010910: 6a65 6374 2066 6f72 2064 696d 656e 7369  ject for dimensi
-00010920: 6f6e 2062 6569 6e67 2073 6f72 7465 642e  on being sorted.
-00010930: 0020 2020 2064 6566 205f 6f72 6465 725f  .    def _order_
-00010940: 7370 6563 2873 656c 6629 3a00 2020 2020  spec(self):.    
-00010950: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-00010960: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-00010970: 2020 2020 2066 227b 7479 7065 2873 656c       f"{type(sel
-00010980: 6629 2e5f 5f6e 616d 655f 5f7d 206d 7573  f).__name__} mus
-00010990: 7420 696d 706c 656d 656e 7420 602e 5f6f  t implement `._o
-000109a0: 7264 6572 6022 0020 2020 2020 2020 2072  rder`".        r
-000109b0: 6169 7365 204e 6f74 496d 706c 656d 656e  aise NotImplemen
-000109c0: 7465 6445 7272 6f72 2820 2023 2070 7261  tedError(  # pra
-000109d0: 676d 613a 206e 6f20 636f 7665 7200 2020  gma: no cover.  
-000109e0: 2020 2020 2020 2222 2200 2020 2020 2020        """.      
-000109f0: 2020 726f 7773 2d64 696d 656e 7369 6f6e    rows-dimension
-00010a00: 2e00 2020 2020 2020 2020 696e 7365 7274  ..        insert
-00010a10: 696f 6e2c 2068 6964 696e 672c 2070 7275  ion, hiding, pru
-00010a20: 6e69 6e67 2c20 616e 6420 6f72 6465 7269  ning, and orderi
-00010a30: 6e67 2074 7261 6e73 666f 726d 7320 7370  ng transforms sp
-00010a40: 6563 6966 6965 6420 696e 2074 6865 0020  ecified in the. 
-00010a50: 2020 2020 2020 204e 6567 6174 6976 6520         Negative 
-00010a60: 7661 6c75 6573 2072 6570 7265 7365 6e74  values represent
-00010a70: 2069 6e73 6572 7465 642d 7665 6374 6f72   inserted-vector
-00010a80: 206c 6f63 6174 696f 6e73 2e20 5265 7475   locations. Retu
-00010a90: 726e 6564 2073 6571 7565 6e63 6520 7265  rned sequence re
-00010aa0: 666c 6563 7473 0000 2020 2020 2020 2020  flects..        
-00010ab0: 2222 2274 7570 6c65 206f 6620 7369 676e  """tuple of sign
-00010ac0: 6564 2069 6e74 2069 6478 2066 6f72 2065  ed int idx for e
-00010ad0: 6163 6820 736f 7274 6564 2076 6563 746f  ach sorted vecto
-00010ae0: 7220 6f66 206d 6561 7375 7265 206d 6174  r of measure mat
-00010af0: 7269 782e 0020 2020 2064 6566 205f 6f72  rix..    def _or
-00010b00: 6465 7228 7365 6c66 293a 0020 2020 2040  der(self):.    @
-00010b10: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00010b20: 2020 2020 2020 7265 7475 726e 2067 6574        return get
-00010b30: 6174 7472 2873 656c 662e 5f73 6563 6f6e  attr(self._secon
-00010b40: 645f 6f72 6465 725f 6d65 6173 7572 6573  d_order_measures
-00010b50: 2c20 6d65 6173 7572 655f 7072 6f70 6e61  , measure_propna
-00010b60: 6d65 2900 0020 2020 2020 2020 2020 2020  me)..           
-00010b70: 2029 0020 2020 2020 2020 2020 2020 2020   ).             
-00010b80: 2020 2066 2273 6f72 742d 6279 2d76 616c     f"sort-by-val
-00010b90: 7565 2066 6f72 206d 6561 7375 7265 2027  ue for measure '
-00010ba0: 7b6d 6561 7375 7265 7d27 2069 7320 6e6f  {measure}' is no
-00010bb0: 7420 7965 7420 7375 7070 6f72 7465 6422  t yet supported"
-00010bc0: 0020 2020 2020 2020 2020 2020 2072 6169  .            rai
-00010bd0: 7365 204e 6f74 496d 706c 656d 656e 7465  se NotImplemente
-00010be0: 6445 7272 6f72 2800 2020 2020 2020 2020  dError(.        
-00010bf0: 6966 206d 6561 7375 7265 5f70 726f 706e  if measure_propn
-00010c00: 616d 6520 6973 204e 6f6e 653a 0000 2020  ame is None:..  
-00010c10: 2020 2020 2020 6d65 6173 7572 655f 7072        measure_pr
-00010c20: 6f70 6e61 6d65 203d 2070 726f 706e 616d  opname = propnam
-00010c30: 655f 6279 5f6d 6561 7375 7265 2e67 6574  e_by_measure.get
-00010c40: 286d 6561 7375 7265 2900 2020 2020 2020  (measure).      
-00010c50: 2020 6d65 6173 7572 6520 3d20 7365 6c66    measure = self
-00010c60: 2e5f 6f72 6465 725f 7370 6563 2e6d 6561  ._order_spec.mea
-00010c70: 7375 7265 0020 2020 2020 2020 207d 0020  sure.        }. 
-00010c80: 2020 2020 2020 2020 2020 204d 2e5a 5f53             M.Z_S
-00010c90: 434f 5245 3a20 227a 7363 6f72 6573 222c  CORE: "zscores",
-00010ca0: 0020 2020 2020 2020 2020 2020 204d 2e57  .            M.W
-00010cb0: 4549 4748 5445 445f 5641 4c49 445f 434f  EIGHTED_VALID_CO
-00010cc0: 554e 543a 2022 7765 6967 6874 6564 5f63  UNT: "weighted_c
-00010cd0: 6f75 6e74 7322 2c00 2020 2020 2020 2020  ounts",.        
-00010ce0: 2020 2020 4d2e 5745 4947 4854 4544 5f43      M.WEIGHTED_C
-00010cf0: 4f55 4e54 3a20 2277 6569 6768 7465 645f  OUNT: "weighted_
-00010d00: 636f 756e 7473 222c 0020 2020 2020 2020  counts",.       
-00010d10: 2020 2020 204d 2e55 4e57 4549 4748 5445       M.UNWEIGHTE
-00010d20: 445f 5641 4c49 445f 434f 554e 543a 2022  D_VALID_COUNT: "
-00010d30: 756e 7765 6967 6874 6564 5f63 6f75 6e74  unweighted_count
-00010d40: 7322 2c00 2020 2020 2020 2020 2020 2020  s",.            
-00010d50: 4d2e 554e 5745 4947 4854 4544 5f43 4f55  M.UNWEIGHTED_COU
-00010d60: 4e54 3a20 2275 6e77 6569 6768 7465 645f  NT: "unweighted_
-00010d70: 636f 756e 7473 222c 0020 2020 2020 2020  counts",.       
-00010d80: 2020 2020 204d 2e54 4f54 414c 5f53 4841       M.TOTAL_SHA
-00010d90: 5245 5f53 554d 3a20 2274 6f74 616c 5f73  RE_SUM: "total_s
-00010da0: 6861 7265 5f73 756d 222c 0020 2020 2020  hare_sum",.     
-00010db0: 2020 2020 2020 204d 2e54 4142 4c45 5f42         M.TABLE_B
-00010dc0: 4153 455f 5745 4947 4854 4544 3a20 2274  ASE_WEIGHTED: "t
-00010dd0: 6162 6c65 5f77 6569 6768 7465 645f 6261  able_weighted_ba
-00010de0: 7365 7322 2c00 2020 2020 2020 2020 2020  ses",.          
-00010df0: 2020 4d2e 5441 424c 455f 4241 5345 5f55    M.TABLE_BASE_U
-00010e00: 4e57 4549 4748 5445 443a 2022 7461 626c  NWEIGHTED: "tabl
-00010e10: 655f 756e 7765 6967 6874 6564 5f62 6173  e_unweighted_bas
-00010e20: 6573 222c 0020 2020 2020 2020 2020 2020  es",.           
-00010e30: 204d 2e54 4142 4c45 5f53 5444 4552 523a   M.TABLE_STDERR:
-00010e40: 2022 7461 626c 655f 7374 645f 6572 7222   "table_std_err"
-00010e50: 2c00 2020 2020 2020 2020 2020 2020 4d2e  ,.            M.
-00010e60: 5441 424c 455f 5354 4444 4556 3a20 2274  TABLE_STDDEV: "t
-00010e70: 6162 6c65 5f70 726f 706f 7274 696f 6e5f  able_proportion_
-00010e80: 7661 7269 616e 6365 7322 2c20 2023 206d  variances",  # m
-00010e90: 6f6e 6f74 6f6e 6963 2074 7261 6e73 666f  onotonic transfo
-00010ea0: 726d 0020 2020 2020 2020 2020 2020 204d  rm.            M
-00010eb0: 2e54 4142 4c45 5f50 4552 4345 4e54 5f4d  .TABLE_PERCENT_M
-00010ec0: 4f45 3a20 2274 6162 6c65 5f73 7464 5f65  OE: "table_std_e
-00010ed0: 7272 222c 2020 2320 6d6f 6e6f 746f 6e69  rr",  # monotoni
-00010ee0: 6320 7472 616e 7366 6f72 6d00 2020 2020  c transform.    
-00010ef0: 2020 2020 2020 2020 4d2e 5441 424c 455f          M.TABLE_
-00010f00: 5045 5243 454e 543a 2022 7461 626c 655f  PERCENT: "table_
-00010f10: 7072 6f70 6f72 7469 6f6e 7322 2c00 2020  proportions",.  
-00010f20: 2020 2020 2020 2020 2020 4d2e 5441 424c            M.TABL
-00010f30: 455f 5045 5243 454e 543a 2022 7461 626c  E_PERCENT: "tabl
-00010f40: 655f 7072 6f70 6f72 7469 6f6e 7322 2c00  e_proportions",.
-00010f50: 2020 2020 2020 2020 2020 2020 4d2e 5355              M.SU
-00010f60: 4d3a 2022 7375 6d73 222c 0020 2020 2020  M: "sums",.     
-00010f70: 2020 2020 2020 204d 2e53 5444 4445 563a         M.STDDEV:
-00010f80: 2022 7374 6464 6576 222c 0020 2020 2020   "stddev",.     
-00010f90: 2020 2020 2020 204d 2e52 4f57 5f53 5444         M.ROW_STD
-00010fa0: 4552 523a 2022 726f 775f 7374 645f 6572  ERR: "row_std_er
-00010fb0: 7222 2c00 2020 2020 2020 2020 2020 2020  r",.            
-00010fc0: 4d2e 524f 575f 5354 4444 4556 3a20 2272  M.ROW_STDDEV: "r
-00010fd0: 6f77 5f70 726f 706f 7274 696f 6e5f 7661  ow_proportion_va
-00010fe0: 7269 616e 6365 7322 2c20 2023 206d 6f6e  riances",  # mon
-00010ff0: 746f 6e69 6320 7472 616e 7366 6f72 6d00  tonic transform.
-00011000: 6164 0000 1c00 0000 dc01 0000 0010 0000  ad..............
-00011010: 6900 0000 0000 0000 af0f 0000 9e0f 0000  i...............
-00011020: 920f 0000 810f 0000 320f 0000 080f 0000  ........2.......
-00011030: f10e 0000 e70e 0000 e60e 0000 e50e 0000  ................
-00011040: bc0e 0000 700e 0000 6f0e 0000 5d0e 0000  ....p...o...]...
-00011050: 470e 0000 040e 0000 030e 0000 ab0d 0000  G...............
-00011060: 5e0d 0000 460d 0000 3a0d 0000 220d 0000  ^...F...:..."...
-00011070: 000d 0000 ba0c 0000 940c 0000 8a0c 0000  ................
-00011080: 350c 0000 340c 0000 220c 0000 070c 0000  5...4...".......
-00011090: d20b 0000 d10b 0000 840b 0000 780b 0000  ............x...
-000110a0: 490b 0000 480b 0000 360b 0000 160b 0000  I...H...6.......
-000110b0: d10a 0000 d00a 0000 780a 0000 270a 0000  ........x...'...
-000110c0: 1b0a 0000 0a0a 0000 b509 0000 8809 0000  ................
-000110d0: 7109 0000 6709 0000 6609 0000 6509 0000  q...g...f...e...
-000110e0: 3209 0000 f508 0000 f408 0000 9d08 0000  2...............
-000110f0: 5108 0000 3908 0000 3808 0000 ec07 0000  Q...9...8.......
-00011100: e407 0000 e307 0000 d107 0000 b207 0000  ................
-00011110: 6b07 0000 6a07 0000 3c07 0000 3007 0000  k...j...<...0...
-00011120: f906 0000 b206 0000 a806 0000 a706 0000  ................
-00011130: 9506 0000 7f06 0000 2d06 0000 2006 0000  ........-... ...
-00011140: ea05 0000 c405 0000 9e05 0000 7705 0000  ............w...
-00011150: 5105 0000 4305 0000 2805 0000 f104 0000  Q...C...(.......
-00011160: b604 0000 a804 0000 a704 0000 9504 0000  ................
-00011170: 7504 0000 2a04 0000 2904 0000 fb03 0000  u...*...).......
-00011180: ef03 0000 b803 0000 7003 0000 6603 0000  ........p...f...
-00011190: 6503 0000 6403 0000 2503 0000 d302 0000  e...d...%.......
-000111a0: d202 0000 7e02 0000 2902 0000 f701 0000  ....~...).......
-000111b0: ef01 0000 ee01 0000 dc01 0000 db01 0000  ................
-000111c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000111d0: 0000 0000 0000 0000 0000 0000 2020 2020  ............    
-000111e0: 406c 617a 7970 726f 7065 7274 7900 0020  @lazyproperty.. 
-000111f0: 2020 2022 2222 0020 2020 2061 206d 6174     """.    a mat
-00011200: 7269 7820 6469 6d65 6e73 696f 6e20 6861  rix dimension ha
-00011210: 7320 616e 206f 7070 6f73 696e 6720 6469  s an opposing di
-00011220: 6d65 6e73 696f 6e2e 0020 2020 2063 6f6c  mension..    col
-00011230: 756d 6e2e 2041 6e20 6f70 706f 7369 6e67  umn. An opposing
-00011240: 2d65 6c65 6d65 6e74 206f 7264 6572 696e  -element orderin
-00011250: 6720 6973 206f 6e6c 7920 6176 6169 6c61  g is only availa
-00011260: 626c 6520 6f6e 2061 206d 6174 7269 782c  ble on a matrix,
-00011270: 2062 6563 6175 7365 206f 6e6c 7900 2020   because only.  
-00011280: 2020 5468 6973 2077 6f75 6c64 2062 6520    This would be 
-00011290: 6c69 6b65 2022 6f72 6465 7220 726f 7773  like "order rows
-000112a0: 2069 6e20 6465 7363 656e 6469 6e67 206f   in descending o
-000112b0: 7264 6572 2062 7920 7661 6c75 6520 6f66  rder by value of
-000112c0: 2027 5374 726f 6e67 6c79 2041 6772 6565   'Strongly Agree
-000112d0: 2700 0020 2020 2022 2222 4f72 6465 7273  '..    """Orders
-000112e0: 2065 6c65 6d65 6e74 7320 6279 2074 6865   elements by the
-000112f0: 2076 616c 7565 7320 6f66 2061 6e20 6f70   values of an op
-00011300: 706f 7369 6e67 2062 6173 6520 286e 6f74  posing base (not
-00011310: 2061 2073 7562 746f 7461 6c29 2076 6563   a subtotal) vec
-00011320: 746f 722e 0063 6c61 7373 205f 536f 7274  tor..class _Sort
-00011330: 526f 7773 4279 4261 7365 436f 6c75 6d6e  RowsByBaseColumn
-00011340: 4865 6c70 6572 285f 4261 7365 536f 7274  Helper(_BaseSort
-00011350: 526f 7773 4279 5661 6c75 6548 656c 7065  RowsByValueHelpe
-00011360: 7229 3a00 0000 2020 2020 2020 2020 2900  r):...        ).
-00011370: 2020 2020 2020 2020 2020 2020 6622 7b74              f"{t
-00011380: 7970 6528 7365 6c66 292e 5f5f 6e61 6d65  ype(self).__name
-00011390: 5f5f 7d20 6d75 7374 2069 6d70 6c65 6d65  __} must impleme
-000113a0: 6e74 2060 2e5f 7375 6274 6f74 616c 5f76  nt `._subtotal_v
-000113b0: 616c 7565 7360 2200 2020 2020 2020 2020  alues`".        
-000113c0: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
-000113d0: 6e74 6564 4572 726f 7228 2020 2320 7072  ntedError(  # pr
-000113e0: 6167 6d61 3a20 6e6f 2063 6f76 6572 0020  agma: no cover. 
-000113f0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-00011400: 2020 204d 7573 7420 6265 2069 6d70 6c65     Must be imple
-00011410: 6d65 6e74 6564 2062 7920 6368 696c 6420  mented by child 
-00011420: 636c 6173 7365 732e 0000 2020 2020 2020  classes...      
-00011430: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
-00011440: 2073 7562 746f 7461 6c20 7661 6c75 6573   subtotal values
-00011450: 2074 6861 7420 666f 726d 2074 6865 2062   that form the b
-00011460: 6173 6973 2066 6f72 2073 6f72 7420 6f72  asis for sort or
-00011470: 6465 722e 0020 2020 2064 6566 205f 7375  der..    def _su
-00011480: 6274 6f74 616c 5f76 616c 7565 7328 7365  btotal_values(se
-00011490: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-000114a0: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-000114b0: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-000114c0: 2020 2020 2020 7365 6c66 2e5f 726f 7773        self._rows
-000114d0: 5f64 696d 656e 7369 6f6e 2c20 7365 6c66  _dimension, self
-000114e0: 2e5f 656d 7074 795f 726f 775f 6964 7873  ._empty_row_idxs
-000114f0: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-00011500: 7572 6e20 5061 796c 6f61 644f 7264 6572  urn PayloadOrder
-00011510: 436f 6c6c 6174 6f72 2e64 6973 706c 6179  Collator.display
-00011520: 5f6f 7264 6572 2800 2020 2020 2020 2020  _order(.        
-00011530: 6578 6365 7074 2056 616c 7565 4572 726f  except ValueErro
-00011540: 723a 0020 2020 2020 2020 2020 2020 2029  r:.            )
-00011550: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00011560: 2073 656c 662e 5f65 6d70 7479 5f72 6f77   self._empty_row
-00011570: 5f69 6478 732c 0020 2020 2020 2020 2020  _idxs,.         
-00011580: 2020 2020 2020 2073 656c 662e 5f73 7562         self._sub
-00011590: 746f 7461 6c5f 7661 6c75 6573 2c00 2020  total_values,.  
-000115a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000115b0: 6c66 2e5f 656c 656d 656e 745f 7661 6c75  lf._element_valu
-000115c0: 6573 2c00 2020 2020 2020 2020 2020 2020  es,.            
-000115d0: 2020 2020 7365 6c66 2e5f 726f 7773 5f64      self._rows_d
-000115e0: 696d 656e 7369 6f6e 2c00 2020 2020 2020  imension,.      
-000115f0: 2020 2020 2020 7265 7475 726e 2053 6f72        return Sor
-00011600: 7442 7956 616c 7565 436f 6c6c 6174 6f72  tByValueCollator
-00011610: 2e64 6973 706c 6179 5f6f 7264 6572 2800  .display_order(.
-00011620: 2020 2020 2020 2020 7472 793a 0020 2020          try:.   
-00011630: 2020 2020 2022 2222 7475 706c 6520 6f66       """tuple of
-00011640: 2069 6e74 2065 6c65 6d65 6e74 2d69 6478   int element-idx
-00011650: 2073 7065 6369 6679 696e 6720 6f72 6465   specifying orde
-00011660: 7269 6e67 206f 6620 6469 6d65 6e73 696f  ring of dimensio
-00011670: 6e20 656c 656d 656e 7473 2e22 2222 0020  n elements.""". 
-00011680: 2020 2064 6566 205f 6f72 6465 7228 7365     def _order(se
-00011690: 6c66 293a 0020 2020 2040 6c61 7a79 7072  lf):.    @lazypr
-000116a0: 6f70 6572 7479 0000 2020 2020 2020 2020  operty..        
-000116b0: 2900 2020 2020 2020 2020 2020 2020 6622  ).            f"
-000116c0: 7b74 7970 6528 7365 6c66 292e 5f5f 6e61  {type(self).__na
-000116d0: 6d65 5f5f 7d20 6d75 7374 2069 6d70 6c65  me__} must imple
-000116e0: 6d65 6e74 2060 2e5f 656c 656d 656e 745f  ment `._element_
-000116f0: 7661 6c75 6573 6022 0020 2020 2020 2020  values`".       
-00011700: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
-00011710: 656e 7465 6445 7272 6f72 2820 2023 2070  entedError(  # p
-00011720: 7261 676d 613a 206e 6f20 636f 7665 7200  ragma: no cover.
-00011730: 2020 2020 2020 2020 2222 2200 2020 2020          """.    
-00011740: 2020 2020 4d75 7374 2062 6520 696d 706c      Must be impl
-00011750: 656d 656e 7465 6420 6279 2063 6869 6c64  emented by child
-00011760: 2063 6c61 7373 6573 2e00 0020 2020 2020   classes...     
-00011770: 2020 2022 2222 5365 7175 656e 6365 206f     """Sequence o
-00011780: 6620 626f 6479 2076 616c 7565 7320 7468  f body values th
-00011790: 6174 2066 6f72 6d20 7468 6520 6261 7369  at form the basi
-000117a0: 7320 666f 7220 736f 7274 206f 7264 6572  s for sort order
-000117b0: 2e00 2020 2020 6465 6620 5f65 6c65 6d65  ..    def _eleme
-000117c0: 6e74 5f76 616c 7565 7328 7365 6c66 293a  nt_values(self):
-000117d0: 0020 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
-000117e0: 7479 0000 2020 2020 2222 2200 2020 2020  ty..    """.    
-000117f0: 4966 2060 5f6f 7264 6572 6020 656e 636f  If `_order` enco
-00011800: 7574 6572 7320 6120 5661 6c75 6545 7272  uters a ValueErr
-00011810: 6f72 2c20 6974 2066 616c 6c73 2062 6163  or, it falls bac
-00011820: 6b20 746f 2074 6865 2070 6179 6c6f 6164  k to the payload
-00011830: 206f 7264 6572 2e00 0020 2020 2060 5f73   order...    `_s
-00011840: 7562 746f 7461 6c5f 7661 6c75 6573 602e  ubtotal_values`.
-00011850: 0020 2020 2077 6869 6368 206d 7573 7420  .    which must 
-00011860: 616c 6c20 7072 6f76 6964 6520 7468 6569  all provide thei
-00011870: 7220 6f77 6e20 696d 706c 656e 7461 7469  r own implentati
-00011880: 6f6e 7320 6f66 2060 5f65 6c65 6d65 6e74  ons of `_element
-00011890: 5f76 616c 7565 7360 2061 6e64 0020 2020  _values` and.   
-000118a0: 2054 6869 7320 636c 6173 7320 6973 2069   This class is i
-000118b0: 6e74 656e 6465 6420 6f6e 6c79 2074 6f20  ntended only to 
-000118c0: 7365 7276 6520 6173 2061 2062 6173 6520  serve as a base 
-000118d0: 666f 7220 7468 6520 6f74 6865 7220 736f  for the other so
-000118e0: 7274 2d62 792d 7661 6c75 6520 636c 6173  rt-by-value clas
-000118f0: 7365 7300 0020 2020 2022 2222 4120 6261  ses..    """A ba
-00011900: 7365 2063 6c61 7373 2074 6861 7420 6f72  se class that or
-00011910: 6465 7273 2065 6c65 6d65 6e74 7320 6279  ders elements by
-00011920: 2061 2073 6574 206f 6620 7661 6c75 6573   a set of values
-00011930: 2e00 636c 6173 7320 5f42 6173 6553 6f72  ..class _BaseSor
-00011940: 7452 6f77 7342 7956 616c 7565 4865 6c70  tRowsByValueHelp
-00011950: 6572 285f 526f 774f 7264 6572 4865 6c70  er(_RowOrderHelp
-00011960: 6572 293a 0000 0020 2020 2020 2020 2029  er):...        )
-00011970: 0020 2020 2020 2020 2020 2020 2065 6c73  .            els
-00011980: 6520 4661 6c73 6500 2020 2020 2020 2020  e False.        
-00011990: 2020 2020 6966 2073 656c 662e 5f63 6f6c      if self._col
-000119a0: 756d 6e73 5f64 696d 656e 7369 6f6e 2e70  umns_dimension.p
-000119b0: 7275 6e65 0020 2020 2020 2020 2020 2020  rune.           
-000119c0: 206c 656e 2873 656c 662e 5f65 6d70 7479   len(self._empty
-000119d0: 5f63 6f6c 756d 6e5f 6964 7873 2920 3d3d  _column_idxs) ==
-000119e0: 206c 656e 2873 656c 662e 5f63 6f6c 756d   len(self._colum
-000119f0: 6e73 5f64 696d 656e 7369 6f6e 2e65 6c65  ns_dimension.ele
-00011a00: 6d65 6e74 5f69 6473 2900 2020 2020 2020  ment_ids).      
-00011a10: 2020 7265 7475 726e 2028 0020 2020 2020    return (.     
-00011a20: 2020 2022 2222 0020 2020 2020 2020 206f     """.        o
-00011a30: 6e6c 7920 7375 626a 6563 7420 746f 2070  nly subject to p
-00011a40: 7275 6e69 6e67 2077 6865 6e20 636f 6c75  runing when colu
-00011a50: 6d6e 2d70 7275 6e69 6e67 2069 7320 7370  mn-pruning is sp
-00011a60: 6563 6966 6965 6420 696e 2074 6865 2072  ecified in the r
-00011a70: 6571 7565 7374 2e00 2020 2020 2020 2020  equest..        
-00011a80: 5375 6274 6f74 616c 2d72 6f77 7320 6e65  Subtotal-rows ne
-00011a90: 6564 2074 6f20 6265 2070 7275 6e65 6420  ed to be pruned 
-00011aa0: 7768 656e 2061 6c6c 2062 6173 652d 636f  when all base-co
-00011ab0: 6c75 6d6e 7320 6172 6520 7072 756e 6564  lumns are pruned
-00011ac0: 2e20 5375 6274 6f74 616c 2072 6f77 7300  . Subtotal rows.
-00011ad0: 0020 2020 2020 2020 2022 2222 5472 7565  .        """True
-00011ae0: 2069 6620 7375 6274 6f74 616c 2072 6f77   if subtotal row
-00011af0: 7320 6e65 6564 2074 6f20 6265 2070 7275  s need to be pru
-00011b00: 6e65 642c 2046 616c 7365 206f 7468 6572  ned, False other
-00011b10: 7769 7365 2e00 2020 2020 6465 6620 5f70  wise..    def _p
-00011b20: 7275 6e65 5f73 7562 746f 7461 6c73 2873  rune_subtotals(s
-00011b30: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-00011b40: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00011b50: 2072 6574 7572 6e20 7365 6c66 2e5f 726f   return self._ro
-00011b60: 7773 5f64 696d 656e 7369 6f6e 2e6f 7264  ws_dimension.ord
-00011b70: 6572 5f73 7065 6300 2020 2020 2020 2020  er_spec.        
-00011b80: 2222 2200 2020 2020 2020 2020 5072 6f76  """.        Prov
-00011b90: 6964 6573 2061 6363 6573 7320 746f 206f  ides access to o
-00011ba0: 7264 6572 696e 6720 6465 7461 696c 7320  rdering details 
-00011bb0: 6c69 6b65 206d 6561 7375 7265 2061 6e64  like measure and
-00011bc0: 2073 6f72 742d 6469 7265 6374 696f 6e2e   sort-direction.
-00011bd0: 0000 2020 2020 2020 2020 2222 225f 4f72  ..        """_Or
-00011be0: 6465 7253 7065 6320 6f62 6a65 6374 2066  derSpec object f
-00011bf0: 6f72 2074 6869 7320 726f 7720 6469 6d65  or this row dime
-00011c00: 6e73 696f 6e2e 0020 2020 2064 6566 205f  nsion..    def _
-00011c10: 6f72 6465 725f 7370 6563 2873 656c 6629  order_spec(self)
-00011c20: 3a00 2020 2020 406c 617a 7970 726f 7065  :.    @lazyprope
-00011c30: 7274 7900 0020 2020 2020 2020 2072 6574  rty..        ret
-00011c40: 7572 6e20 436f 6c6c 6174 6f72 436c 732e  urn CollatorCls.
-00011c50: 6469 7370 6c61 795f 6f72 6465 7228 7365  display_order(se
-00011c60: 6c66 2e5f 726f 7773 5f64 696d 656e 7369  lf._rows_dimensi
-00011c70: 6f6e 2c20 7365 6c66 2e5f 656d 7074 795f  on, self._empty_
-00011c80: 726f 775f 6964 7873 2900 2020 2020 2020  row_idxs).      
-00011c90: 2020 2900 2020 2020 2020 2020 2020 2020    ).            
-00011ca0: 656c 7365 2050 6179 6c6f 6164 4f72 6465  else PayloadOrde
-00011cb0: 7243 6f6c 6c61 746f 7200 2020 2020 2020  rCollator.      
-00011cc0: 2020 2020 2020 6966 2073 656c 662e 5f6f        if self._o
-00011cd0: 7264 6572 5f73 7065 632e 636f 6c6c 6174  rder_spec.collat
-00011ce0: 696f 6e5f 6d65 7468 6f64 203d 3d20 434d  ion_method == CM
-00011cf0: 2e45 5850 4c49 4349 545f 4f52 4445 5200  .EXPLICIT_ORDER.
-00011d00: 2020 2020 2020 2020 2020 2020 4578 706c              Expl
-00011d10: 6963 6974 4f72 6465 7243 6f6c 6c61 746f  icitOrderCollato
-00011d20: 7200 2020 2020 2020 2020 436f 6c6c 6174  r.        Collat
-00011d30: 6f72 436c 7320 3d20 2800 2020 2020 2020  orCls = (.      
-00011d40: 2020 2222 2200 2020 2020 2020 2020 726f    """.        ro
-00011d50: 7773 2d64 696d 656e 7369 6f6e 2e00 2020  ws-dimension..  
-00011d60: 2020 2020 2020 696e 7365 7274 696f 6e2c        insertion,
-00011d70: 2068 6964 696e 672c 2070 7275 6e69 6e67   hiding, pruning
-00011d80: 2c20 616e 6420 6f72 6465 7269 6e67 2074  , and ordering t
-00011d90: 7261 6e73 666f 726d 7320 7370 6563 6966  ransforms specif
-00011da0: 6965 6420 696e 2074 6865 0020 2020 2020  ied in the.     
-00011db0: 2020 204e 6567 6174 6976 6520 7661 6c75     Negative valu
-00011dc0: 6573 2072 6570 7265 7365 6e74 2069 6e73  es represent ins
-00011dd0: 6572 7465 642d 7665 6374 6f72 206c 6f63  erted-vector loc
-00011de0: 6174 696f 6e73 2e20 5265 7475 726e 6564  ations. Returned
-00011df0: 2073 6571 7565 6e63 6520 7265 666c 6563   sequence reflec
-00011e00: 7473 0000 2020 2020 2020 2020 2222 2274  ts..        """t
-00011e10: 7570 6c65 206f 6620 7369 676e 6564 2069  uple of signed i
-00011e20: 6e74 2069 6478 2066 6f72 2065 6163 6820  nt idx for each 
-00011e30: 726f 7720 6f66 206d 6561 7375 7265 206d  row of measure m
-00011e40: 6174 7269 782e 0020 2020 2064 6566 205f  atrix..    def _
-00011e50: 6f72 6465 7228 7365 6c66 293a 0020 2020  order(self):.   
-00011e60: 2040 6c61 7a79 7072 6f70 6572 7479 0000   @lazyproperty..
-00011e70: 2020 2020 2222 2245 6e63 6170 7375 6c61      """Encapsula
-00011e80: 7465 7320 7468 6520 636f 6d70 6c65 7869  tes the complexi
-00011e90: 7479 206f 6620 7468 6520 7661 7269 6f75  ty of the variou
-00011ea0: 7320 6b69 6e64 7320 6f66 2072 6f77 206f  s kinds of row o
-00011eb0: 7264 6572 696e 672e 2222 2200 636c 6173  rdering.""".clas
-00011ec0: 7320 5f52 6f77 4f72 6465 7248 656c 7065  s _RowOrderHelpe
-00011ed0: 7228 5f42 6173 654f 7264 6572 4865 6c70  r(_BaseOrderHelp
-00011ee0: 6572 293a 0000 0020 2020 2020 2020 2029  er):...        )
-00011ef0: 0020 2020 2020 2020 2020 2020 2065 6c73  .            els
-00011f00: 6520 4661 6c73 6500 2020 2020 2020 2020  e False.        
-00011f10: 2020 2020 6966 2073 656c 662e 5f72 6f77      if self._row
-00011f20: 735f 6469 6d65 6e73 696f 6e2e 7072 756e  s_dimension.prun
-00011f30: 6500 2020 2020 2020 2020 2020 2020 6c65  e.            le
-00011f40: 6e28 7365 6c66 2e5f 656d 7074 795f 726f  n(self._empty_ro
-00011f50: 775f 6964 7873 2920 3d3d 206c 656e 2873  w_idxs) == len(s
-00011f60: 656c 662e 5f72 6f77 735f 6469 6d65 6e73  elf._rows_dimens
-00011f70: 696f 6e2e 656c 656d 656e 745f 6964 7329  ion.element_ids)
-00011f80: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00011f90: 2800 2020 2020 2020 2020 2222 2200 2020  (.        """.  
-00011fa0: 2020 2020 2020 7265 7175 6573 742e 0020        request.. 
-00011fb0: 2020 2020 2020 2063 6f6c 756d 6e73 2061         columns a
-00011fc0: 7265 206f 6e6c 7920 7375 626a 6563 7420  re only subject 
-00011fd0: 746f 2070 7275 6e69 6e67 2077 6865 6e20  to pruning when 
-00011fe0: 726f 772d 7072 756e 696e 6720 6973 2073  row-pruning is s
-00011ff0: 7065 6369 6669 6564 2069 6e20 7468 6500  pecified in the.
-00012000: 6164 0000 0900 0000 7901 0000 0010 0000  ad......y.......
-00012010: 5500 0000 0000 0000 e50f 0000 a00f 0000  U...............
-00012020: 5f0f 0000 2a0f 0000 e10e 0000 8b0e 0000  _...*...........
-00012030: 530e 0000 520e 0000 400e 0000 210e 0000  S...R...@...!...
-00012040: da0d 0000 d90d 0000 850d 0000 360d 0000  ............6...
-00012050: 2a0d 0000 f10c 0000 b90c 0000 b80c 0000  *...............
-00012060: a60c 0000 860c 0000 380c 0000 370c 0000  ........8...7...
-00012070: e20b 0000 c90b 0000 bd0b 0000 820b 0000  ................
-00012080: 480b 0000 470b 0000 460b 0000 030b 0000  H...G...F.......
-00012090: b50a 0000 b40a 0000 630a 0000 100a 0000  ........c.......
-000120a0: bc09 0000 6b09 0000 2c09 0000 2b09 0000  ....k...,...+...
-000120b0: d208 0000 7c08 0000 3e08 0000 3608 0000  ....|...>...6...
-000120c0: 3508 0000 2308 0000 0808 0000 c307 0000  5...#...........
-000120d0: 8207 0000 4b07 0000 0207 0000 ac06 0000  ....K...........
-000120e0: 7406 0000 7306 0000 7206 0000 2f06 0000  t...s...r.../...
-000120f0: f705 0000 f605 0000 a205 0000 4c05 0000  ............L...
-00012100: 1a05 0000 1205 0000 1105 0000 ff04 0000  ................
-00012110: e004 0000 8d04 0000 8c04 0000 3604 0000  ............6...
-00012120: eb03 0000 df03 0000 a403 0000 6703 0000  ............g...
-00012130: 6603 0000 5403 0000 3603 0000 ee02 0000  f...T...6.......
-00012140: b202 0000 8802 0000 7e02 0000 7d02 0000  ........~...}...
-00012150: 6b02 0000 4b02 0000 f401 0000 f301 0000  k...K...........
-00012160: 9e01 0000 8501 0000 7901 0000 7801 0000  ........y...x...
-00012170: 0000 0000 0000 0000 0020 2020 2020 2020  .........       
-00012180: 2022 2222 0020 2020 2020 2020 2069 6e73   """.        ins
-00012190: 6572 7469 6f6e 206f 7264 6572 2e00 2020  ertion order..  
-000121a0: 2020 2020 2020 5468 6572 6520 6973 206f        There is o
-000121b0: 6e65 2076 616c 7565 2070 6572 2072 6f77  ne value per row
-000121c0: 2073 7562 746f 7461 6c20 616e 6420 7661   subtotal and va
-000121d0: 6c75 6573 2061 7070 6561 7220 696e 2070  lues appear in p
-000121e0: 6179 6c6f 6164 2028 6469 6d65 6e73 696f  ayload (dimensio
-000121f0: 6e29 0000 2020 2020 2020 2020 2222 2253  n)..        """S
-00012200: 6571 7565 6e63 6520 6f66 2072 6f77 2d73  equence of row-s
-00012210: 7562 746f 7461 6c20 696e 7465 7273 6563  ubtotal intersec
-00012220: 7469 6f6e 2076 616c 7565 7320 7468 6174  tion values that
-00012230: 2063 6f6e 7472 6962 7574 6520 746f 2073   contribute to s
-00012240: 6f72 7420 6261 7369 732e 0020 2020 2064  ort basis..    d
-00012250: 6566 205f 7375 6274 6f74 616c 5f76 616c  ef _subtotal_val
-00012260: 7565 7328 7365 6c66 293a 0020 2020 2040  ues(self):.    @
-00012270: 6c61 7a79 7072 6f70 6572 7479 0000 2020  lazyproperty..  
-00012280: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-00012290: 2020 2020 7365 6c66 2e5f 6f72 6465 725f      self._order_
-000122a0: 7370 6563 2e69 6e73 6572 7469 6f6e 5f69  spec.insertion_i
-000122b0: 6400 2020 2020 2020 2020 7265 7475 726e  d.        return
-000122c0: 2073 656c 662e 5f63 6f6c 756d 6e73 5f64   self._columns_d
-000122d0: 696d 656e 7369 6f6e 2e69 6e73 6572 7469  imension.inserti
-000122e0: 6f6e 5f69 6473 2e69 6e64 6578 2800 2020  on_ids.index(.  
-000122f0: 2020 2020 2020 2222 2269 6e74 2069 6e64        """int ind
-00012300: 6578 206f 6620 696e 7365 7274 696f 6e20  ex of insertion 
-00012310: 7768 6f73 6520 7661 6c75 6573 2074 6865  whose values the
-00012320: 2073 6f72 7420 6973 2062 6173 6564 206f   sort is based o
-00012330: 6e2e 2222 2200 2020 2020 6465 6620 5f69  n.""".    def _i
-00012340: 6e73 6572 7469 6f6e 5f69 6478 2873 656c  nsertion_idx(sel
-00012350: 6629 3a00 2020 2020 406c 617a 7970 726f  f):.    @lazypro
-00012360: 7065 7274 7900 0020 2020 2020 2020 2072  perty..        r
-00012370: 6574 7572 6e20 696e 7365 7274 696f 6e5f  eturn insertion_
-00012380: 6261 7365 5f76 616c 7565 735b 3a2c 2073  base_values[:, s
-00012390: 656c 662e 5f69 6e73 6572 7469 6f6e 5f69  elf._insertion_i
-000123a0: 6478 5d00 2020 2020 2020 2020 696e 7365  dx].        inse
-000123b0: 7274 696f 6e5f 6261 7365 5f76 616c 7565  rtion_base_value
-000123c0: 7320 3d20 7365 6c66 2e5f 6d65 6173 7572  s = self._measur
-000123d0: 652e 626c 6f63 6b73 5b30 5d5b 315d 0020  e.blocks[0][1]. 
-000123e0: 2020 2020 2020 2022 2222 0020 2020 2020         """.     
-000123f0: 2020 206f 6e6c 7920 7468 6520 2262 6173     only the "bas
-00012400: 6522 2069 6e73 6572 7469 6f6e 2076 616c  e" insertion val
-00012410: 7565 7320 616e 6420 646f 206e 6f74 2069  ues and do not i
-00012420: 6e63 6c75 6465 2069 6e74 6572 7365 6374  nclude intersect
-00012430: 696f 6e73 2e00 2020 2020 2020 2020 5468  ions..        Th
-00012440: 6572 6520 6973 206f 6e65 2076 616c 7565  ere is one value
-00012450: 2070 6572 2062 6173 6520 726f 7720 616e   per base row an
-00012460: 6420 7661 6c75 6573 2061 7070 6561 7220  d values appear 
-00012470: 696e 2070 6179 6c6f 6164 206f 7264 6572  in payload order
-00012480: 2e20 5468 6573 6520 6172 6500 0020 2020  . These are..   
-00012490: 2020 2020 2022 2222 5365 7175 656e 6365       """Sequence
-000124a0: 206f 6620 696e 7365 7274 696f 6e20 2262   of insertion "b
-000124b0: 6f64 7922 2076 616c 7565 7320 7468 6174  ody" values that
-000124c0: 2066 6f72 6d20 7468 6520 6261 7369 7320   form the basis 
-000124d0: 666f 7220 736f 7274 206f 7264 6572 2e00  for sort order..
-000124e0: 2020 2020 6465 6620 5f65 6c65 6d65 6e74      def _element
-000124f0: 5f76 616c 7565 7328 7365 6c66 293a 0020  _values(self):. 
-00012500: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
-00012510: 0000 2020 2020 2222 2200 2020 2020 6120  ..    """.    a 
-00012520: 6d61 7472 6978 2064 696d 656e 7369 6f6e  matrix dimension
-00012530: 2068 6173 2061 6e20 6f70 706f 7369 6e67   has an opposing
-00012540: 2064 696d 656e 7369 6f6e 2e00 2020 2020   dimension..    
-00012550: 636f 6c75 6d6e 2e20 416e 206f 7070 6f73  column. An oppos
-00012560: 696e 672d 696e 7365 7274 696f 6e20 6f72  ing-insertion or
-00012570: 6465 7269 6e67 2069 7320 6f6e 6c79 2061  dering is only a
-00012580: 7661 696c 6162 6c65 206f 6e20 6120 6d61  vailable on a ma
-00012590: 7472 6978 2062 6563 6175 7365 206f 6e6c  trix because onl
-000125a0: 7900 2020 2020 5468 6973 2077 6f75 6c64  y.    This would
-000125b0: 2062 6520 6c69 6b65 2022 6f72 6465 7220   be like "order 
-000125c0: 726f 7773 2069 6e20 6465 7363 656e 6469  rows in descendi
-000125d0: 6e67 206f 7264 6572 2062 7920 7661 6c75  ng order by valu
-000125e0: 6520 6f66 2027 546f 7020 3327 2073 7562  e of 'Top 3' sub
-000125f0: 746f 7461 6c00 0020 2020 2022 2222 4f72  total..    """Or
-00012600: 6465 7273 2072 6f77 7320 6279 2074 6865  ders rows by the
-00012610: 2076 616c 7565 7320 696e 2061 6e20 696e   values in an in
-00012620: 7365 7274 6564 2063 6f6c 756d 6e2e 0063  serted column..c
-00012630: 6c61 7373 205f 536f 7274 526f 7773 4279  lass _SortRowsBy
-00012640: 496e 7365 7274 6564 436f 6c75 6d6e 4865  InsertedColumnHe
-00012650: 6c70 6572 285f 4261 7365 536f 7274 526f  lper(_BaseSortRo
-00012660: 7773 4279 5661 6c75 6548 656c 7065 7229  wsByValueHelper)
-00012670: 3a00 0000 2020 2020 2020 2020 7265 7475  :...        retu
-00012680: 726e 2063 6f6c 756d 6e5f 656c 656d 656e  rn column_elemen
-00012690: 745f 6964 732e 696e 6465 7828 736f 7274  t_ids.index(sort
-000126a0: 5f63 6f6c 756d 6e5f 6964 2900 2020 2020  _column_id).    
-000126b0: 2020 2020 736f 7274 5f63 6f6c 756d 6e5f      sort_column_
-000126c0: 6964 203d 2073 656c 662e 5f63 6f6c 756d  id = self._colum
-000126d0: 6e73 5f64 696d 656e 7369 6f6e 2e74 7261  ns_dimension.tra
-000126e0: 6e73 6c61 7465 5f65 6c65 6d65 6e74 5f69  nslate_element_i
-000126f0: 6428 736f 7274 5f63 6f6c 756d 6e5f 6964  d(sort_column_id
-00012700: 2900 2020 2020 2020 2020 2320 2d2d 2d20  ).        # --- 
-00012710: 4e65 6564 2074 6f20 7472 616e 736c 6174  Need to translat
-00012720: 6520 7468 6520 656c 656d 656e 7420 6964  e the element id
-00012730: 2074 6f20 7468 6520 7368 696d 6d65 6420   to the shimmed 
-00012740: 656c 656d 656e 7420 6964 0020 2020 2020  element id.     
-00012750: 2020 2073 6f72 745f 636f 6c75 6d6e 5f69     sort_column_i
-00012760: 6420 3d20 7365 6c66 2e5f 6f72 6465 725f  d = self._order_
-00012770: 7370 6563 2e69 6e73 6572 7469 6f6e 5f69  spec.insertion_i
-00012780: 6400 2020 2020 2020 2020 636f 6c75 6d6e  d.        column
-00012790: 5f65 6c65 6d65 6e74 5f69 6473 203d 2073  _element_ids = s
-000127a0: 656c 662e 5f63 6f6c 756d 6e73 5f64 696d  elf._columns_dim
-000127b0: 656e 7369 6f6e 2e65 6c65 6d65 6e74 5f69  ension.element_i
-000127c0: 6473 0020 2020 2020 2020 2022 2222 696e  ds.        """in
-000127d0: 7420 696e 6465 7820 6f66 2063 6f6c 756d  t index of colum
-000127e0: 6e20 7768 6f73 6520 7661 6c75 6573 2074  n whose values t
-000127f0: 6865 2073 6f72 7420 6973 2062 6173 6564  he sort is based
-00012800: 206f 6e2e 2222 2200 2020 2020 6465 6620   on.""".    def 
-00012810: 5f63 6f6c 756d 6e5f 6964 7828 7365 6c66  _column_idx(self
-00012820: 293a 0020 2020 2040 6c61 7a79 7072 6f70  ):.    @lazyprop
-00012830: 6572 7479 0000 2020 2020 2222 2200 2020  erty..    """.  
-00012840: 2020 7370 6563 6966 7969 6e67 2073 6f72    specifying sor
-00012850: 742d 6279 2d76 616c 7565 2061 7320 6966  t-by-value as if
-00012860: 2074 6865 7365 2077 6572 6520 7472 7565   these were true
-00012870: 2073 7562 746f 7461 6c73 2e00 2020 2020   subtotals..    
-00012880: 6c69 6272 6172 792c 2062 7574 2062 6563  library, but bec
-00012890: 6175 7365 2074 6865 2075 7365 722d 6661  ause the user-fa
-000128a0: 6369 6e67 206c 616e 6775 6167 6520 7472  cing language tr
-000128b0: 6561 7473 2074 6865 7365 2061 7320 7375  eats these as su
-000128c0: 6274 6f74 616c 732c 2077 6520 616c 6c6f  btotals, we allo
-000128d0: 7700 2020 2020 466f 7220 7468 6520 6d6f  w.    For the mo
-000128e0: 7374 2070 6172 742c 2077 6520 7472 6561  st part, we trea
-000128f0: 7420 7468 6573 6520 656c 656d 656e 7473  t these elements
-00012900: 2061 7320 7265 6775 6c61 7220 2262 6173   as regular "bas
-00012910: 6522 2063 6f6c 756d 6e73 2c20 696e 2074  e" columns, in t
-00012920: 6865 2063 722e 6375 6265 0000 2020 2020  he cr.cube..    
-00012930: 6265 6361 7573 6520 6f6e 6c79 2061 206d  because only a m
-00012940: 6174 7269 7820 6469 6d65 6e73 696f 6e20  atrix dimension 
-00012950: 6861 7320 616e 206f 7070 6f73 696e 6720  has an opposing 
-00012960: 6469 6d65 6e73 696f 6e2e 0020 2020 204d  dimension..    M
-00012970: 5220 6172 7261 7920 636f 6c75 6d6e 2e20  R array column. 
-00012980: 416e 206f 7070 6f73 696e 672d 656c 656d  An opposing-elem
-00012990: 656e 7420 6f72 6465 7269 6e67 2069 7320  ent ordering is 
-000129a0: 6f6e 6c79 2061 7661 696c 6162 6c65 206f  only available o
-000129b0: 6e20 6120 6d61 7472 6978 2c00 2020 2020  n a matrix,.    
-000129c0: 6f6e 2061 2073 7562 7661 7269 6162 6c65  on a subvariable
-000129d0: 2064 696d 656e 7369 6f6e 2c20 616e 2065   dimension, an e
-000129e0: 7861 6d70 6c65 2077 6f75 6c64 2062 6520  xample would be 
-000129f0: 746f 2073 6f72 7420 2227 436f 6b65 2720  to sort "'Coke' 
-00012a00: 6f72 2027 4469 6574 2043 6f6b 6527 2200  or 'Diet Coke'".
-00012a10: 2020 2020 6375 6265 2072 6573 756c 7420      cube result 
-00012a20: 6265 666f 7265 2074 6869 7320 6372 2e63  before this cr.c
-00012a30: 7562 6520 6c69 6272 6172 7920 6765 7473  ube library gets
-00012a40: 2074 6865 6d2e 2054 6865 7365 2069 6e73   them. These ins
-00012a50: 6572 7469 6f6e 7320 6172 6520 616c 7761  ertions are alwa
-00012a60: 7973 0020 2020 2022 4465 7269 7665 6422  ys.    "Derived"
-00012a70: 2063 6f6c 756d 6e73 2061 7265 2069 6e73   columns are ins
-00012a80: 6572 7469 6f6e 7320 7468 6174 2061 7265  ertions that are
-00012a90: 2063 616c 6375 6c61 7465 6420 6279 207a   calculated by z
-00012aa0: 7a39 2061 6e64 2070 7574 2069 6e74 6f20  z9 and put into 
-00012ab0: 7468 6500 0020 2020 2022 2222 4f72 6465  the..    """Orde
-00012ac0: 7273 2065 6c65 6d65 6e74 7320 6279 2074  rs elements by t
-00012ad0: 6865 2076 616c 7565 7320 6f66 2061 6e20  he values of an 
-00012ae0: 6f70 706f 7369 6e67 2022 6465 7269 7665  opposing "derive
-00012af0: 6422 2065 6c65 6d65 6e74 2076 6563 746f  d" element vecto
-00012b00: 722e 0063 6c61 7373 205f 536f 7274 526f  r..class _SortRo
-00012b10: 7773 4279 4465 7269 7665 6443 6f6c 756d  wsByDerivedColum
-00012b20: 6e48 656c 7065 7228 5f53 6f72 7452 6f77  nHelper(_SortRow
-00012b30: 7342 7942 6173 6543 6f6c 756d 6e48 656c  sByBaseColumnHel
-00012b40: 7065 7229 3a00 0000 2020 2020 2020 2020  per):...        
-00012b50: 7265 7475 726e 206d 6561 7375 7265 5f73  return measure_s
-00012b60: 7562 746f 7461 6c5f 726f 7773 5b3a 2c20  ubtotal_rows[:, 
-00012b70: 7365 6c66 2e5f 636f 6c75 6d6e 5f69 6478  self._column_idx
-00012b80: 5d00 2020 2020 2020 2020 6d65 6173 7572  ].        measur
-00012b90: 655f 7375 6274 6f74 616c 5f72 6f77 7320  e_subtotal_rows 
-00012ba0: 3d20 7365 6c66 2e5f 6d65 6173 7572 652e  = self._measure.
-00012bb0: 626c 6f63 6b73 5b31 5d5b 305d 0020 2020  blocks[1][0].   
-00012bc0: 2020 2020 2022 2222 0020 2020 2020 2020       """.       
-00012bd0: 2069 6e73 6572 7469 6f6e 206f 7264 6572   insertion order
-00012be0: 2e00 2020 2020 2020 2020 5468 6572 6520  ..        There 
-00012bf0: 6973 206f 6e65 2076 616c 7565 2070 6572  is one value per
-00012c00: 2072 6f77 2073 7562 746f 7461 6c20 616e   row subtotal an
-00012c10: 6420 7661 6c75 6573 2061 7070 6561 7220  d values appear 
-00012c20: 696e 2070 6179 6c6f 6164 2028 6469 6d65  in payload (dime
-00012c30: 6e73 696f 6e29 0000 2020 2020 2020 2020  nsion)..        
-00012c40: 2222 2253 6571 7565 6e63 6520 6f66 2072  """Sequence of r
-00012c50: 6f77 2d73 7562 746f 7461 6c20 7661 6c75  ow-subtotal valu
-00012c60: 6573 2074 6861 7420 636f 6e74 7269 6275  es that contribu
-00012c70: 7465 2074 6f20 7468 6520 736f 7274 2062  te to the sort b
-00012c80: 6173 6973 2e00 2020 2020 6465 6620 5f73  asis..    def _s
-00012c90: 7562 746f 7461 6c5f 7661 6c75 6573 2873  ubtotal_values(s
-00012ca0: 656c 6629 3a00 2020 2020 406c 617a 7970  elf):.    @lazyp
-00012cb0: 726f 7065 7274 7900 0020 2020 2020 2020  roperty..       
-00012cc0: 2072 6574 7572 6e20 6d65 6173 7572 655f   return measure_
-00012cd0: 6261 7365 5f76 616c 7565 735b 3a2c 2073  base_values[:, s
-00012ce0: 656c 662e 5f63 6f6c 756d 6e5f 6964 785d  elf._column_idx]
-00012cf0: 0020 2020 2020 2020 206d 6561 7375 7265  .        measure
-00012d00: 5f62 6173 655f 7661 6c75 6573 203d 2073  _base_values = s
-00012d10: 656c 662e 5f6d 6561 7375 7265 2e62 6c6f  elf._measure.blo
-00012d20: 636b 735b 305d 5b30 5d00 2020 2020 2020  cks[0][0].      
-00012d30: 2020 2222 2200 2020 2020 2020 2020 6f72    """.        or
-00012d40: 6465 722e 2054 6865 7365 2061 7265 206f  der. These are o
-00012d50: 6e6c 7920 7468 6520 2262 6173 6522 2076  nly the "base" v
-00012d60: 616c 7565 7320 616e 6420 646f 206e 6f74  alues and do not
-00012d70: 2069 6e63 6c75 6465 2069 6e73 6572 7469   include inserti
-00012d80: 6f6e 732e 0020 2020 2020 2020 2054 6865  ons..        The
-00012d90: 7265 2069 7320 6f6e 6520 7661 6c75 6520  re is one value 
-00012da0: 7065 7220 726f 7720 616e 6420 7661 6c75  per row and valu
-00012db0: 6573 2061 7070 6561 7220 696e 2070 6179  es appear in pay
-00012dc0: 6c6f 6164 2028 6469 6d65 6e73 696f 6e29  load (dimension)
-00012dd0: 2065 6c65 6d65 6e74 0000 2020 2020 2020   element..      
-00012de0: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
-00012df0: 2062 6f64 7920 7661 6c75 6573 2074 6861   body values tha
-00012e00: 7420 666f 726d 2074 6865 2062 6173 6973  t form the basis
-00012e10: 2066 6f72 2073 6f72 7420 6f72 6465 722e   for sort order.
-00012e20: 0020 2020 2064 6566 205f 656c 656d 656e  .    def _elemen
-00012e30: 745f 7661 6c75 6573 2873 656c 6629 3a00  t_values(self):.
-00012e40: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
-00012e50: 7900 0020 2020 2020 2020 2072 6574 7572  y..        retur
-00012e60: 6e20 636f 6c75 6d6e 5f65 6c65 6d65 6e74  n column_element
-00012e70: 5f69 6473 2e69 6e64 6578 2873 6f72 745f  _ids.index(sort_
-00012e80: 636f 6c75 6d6e 5f69 6429 0020 2020 2020  column_id).     
-00012e90: 2020 2073 6f72 745f 636f 6c75 6d6e 5f69     sort_column_i
-00012ea0: 6420 3d20 7365 6c66 2e5f 636f 6c75 6d6e  d = self._column
-00012eb0: 735f 6469 6d65 6e73 696f 6e2e 7472 616e  s_dimension.tran
-00012ec0: 736c 6174 655f 656c 656d 656e 745f 6964  slate_element_id
-00012ed0: 2873 6f72 745f 636f 6c75 6d6e 5f69 6429  (sort_column_id)
-00012ee0: 0020 2020 2020 2020 2023 202d 2d2d 204e  .        # --- N
-00012ef0: 6565 6420 746f 2074 7261 6e73 6c61 7465  eed to translate
-00012f00: 2074 6865 2065 6c65 6d65 6e74 2069 6420   the element id 
-00012f10: 746f 2074 6865 2073 6869 6d6d 6564 2065  to the shimmed e
-00012f20: 6c65 6d65 6e74 2069 6400 2020 2020 2020  lement id.      
-00012f30: 2020 736f 7274 5f63 6f6c 756d 6e5f 6964    sort_column_id
-00012f40: 203d 2073 656c 662e 5f6f 7264 6572 5f73   = self._order_s
-00012f50: 7065 632e 656c 656d 656e 745f 6964 0020  pec.element_id. 
-00012f60: 2020 2020 2020 2063 6f6c 756d 6e5f 656c         column_el
-00012f70: 656d 656e 745f 6964 7320 3d20 7365 6c66  ement_ids = self
-00012f80: 2e5f 636f 6c75 6d6e 735f 6469 6d65 6e73  ._columns_dimens
-00012f90: 696f 6e2e 656c 656d 656e 745f 6964 7300  ion.element_ids.
-00012fa0: 2020 2020 2020 2020 2222 2269 6e74 2069          """int i
-00012fb0: 6e64 6578 206f 6620 636f 6c75 6d6e 2077  ndex of column w
-00012fc0: 686f 7365 2076 616c 7565 7320 7468 6520  hose values the 
-00012fd0: 736f 7274 2069 7320 6261 7365 6420 6f6e  sort is based on
-00012fe0: 2e22 2222 0020 2020 2064 6566 205f 636f  .""".    def _co
-00012ff0: 6c75 6d6e 5f69 6478 2873 656c 6629 3a00  lumn_idx(self):.
+00000000: 2320 656e 636f 6469 6e67 3a20 7574 662d  # encoding: utf-
+00000010: 380a 0a22 2222 5468 6520 6041 7373 656d  8.."""The `Assem
+00000020: 626c 6572 6020 6f62 6a65 6374 2070 726f  bler` object pro
+00000030: 7669 6465 7320 7468 6520 6578 7465 726e  vides the extern
+00000040: 616c 2069 6e74 6572 6661 6365 2066 6f72  al interface for
+00000050: 2074 6869 7320 6d6f 6475 6c65 2e0a 0a49   this module...I
+00000060: 7473 206e 616d 6520 6465 7269 7665 7320  ts name derives 
+00000070: 6672 6f6d 2069 7473 2072 6f6c 6520 746f  from its role to
+00000080: 2022 6173 7365 6d62 6c65 2220 6120 6669   "assemble" a fi
+00000090: 6e69 7368 6564 2032 4420 6172 7261 7920  nished 2D array 
+000000a0: 2822 6d61 7472 6978 2229 2066 6f72 2061  ("matrix") for a
+000000b0: 0a70 6172 7469 6375 6c61 7220 6d65 6173  .particular meas
+000000c0: 7572 6520 6672 6f6d 2074 6865 2062 6173  ure from the bas
+000000d0: 6520 6d65 6173 7572 6520 7661 6c75 6573  e measure values
+000000e0: 2061 6e64 2069 6e73 6572 7465 6420 7375   and inserted su
+000000f0: 6274 6f74 616c 732c 2074 6f20 7265 6f72  btotals, to reor
+00000100: 6465 7220 7468 650a 726f 7773 2061 6e64  der the.rows and
+00000110: 2063 6f6c 756d 6e73 2061 6363 6f72 6469   columns accordi
+00000120: 6e67 2074 6f20 7468 6520 6469 6d65 6e73  ng to the dimens
+00000130: 696f 6e20 2a6f 7264 6572 2a20 7472 616e  ion *order* tran
+00000140: 7366 6f72 6d73 2c20 616e 6420 746f 2068  sforms, and to h
+00000150: 6964 6520 726f 7773 2061 6e64 0a63 6f6c  ide rows and.col
+00000160: 756d 6e73 2074 6861 7420 6172 6520 6569  umns that are ei
+00000170: 7468 6572 2068 6964 6465 6e20 6279 2074  ther hidden by t
+00000180: 6865 2075 7365 7220 6f72 2022 7072 756e  he user or "prun
+00000190: 6564 2220 6265 6361 7573 6520 7468 6579  ed" because they
+000001a0: 2063 6f6e 7461 696e 206e 6f0a 6f62 7365   contain no.obse
+000001b0: 7276 6174 696f 6e73 2e0a 2222 220a 0a69  rvations.."""..i
+000001c0: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
+000001d0: 700a 0a66 726f 6d20 6372 2e63 7562 652e  p..from cr.cube.
+000001e0: 636f 6c6c 6174 6f72 2069 6d70 6f72 7420  collator import 
+000001f0: 280a 2020 2020 4578 706c 6963 6974 4f72  (.    ExplicitOr
+00000200: 6465 7243 6f6c 6c61 746f 722c 0a20 2020  derCollator,.   
+00000210: 2050 6179 6c6f 6164 4f72 6465 7243 6f6c   PayloadOrderCol
+00000220: 6c61 746f 722c 0a20 2020 2053 6f72 7442  lator,.    SortB
+00000230: 7956 616c 7565 436f 6c6c 6174 6f72 2c0a  yValueCollator,.
+00000240: 290a 6672 6f6d 2063 722e 6375 6265 2e65  ).from cr.cube.e
+00000250: 6e75 6d73 2069 6d70 6f72 7420 280a 2020  nums import (.  
+00000260: 2020 434f 4c4c 4154 494f 4e5f 4d45 5448    COLLATION_METH
+00000270: 4f44 2061 7320 434d 2c0a 2020 2020 4449  OD as CM,.    DI
+00000280: 4d45 4e53 494f 4e5f 5459 5045 2061 7320  MENSION_TYPE as 
+00000290: 4454 2c0a 2020 2020 4d41 5247 494e 414c  DT,.    MARGINAL
+000002a0: 2c0a 2020 2020 4d41 5247 494e 414c 5f4f  ,.    MARGINAL_O
+000002b0: 5249 454e 5441 5449 4f4e 2061 7320 4d4f  RIENTATION as MO
+000002c0: 2c0a 2020 2020 4d45 4153 5552 4520 6173  ,.    MEASURE as
+000002d0: 204d 2c0a 290a 6672 6f6d 2063 722e 6375   M,.).from cr.cu
+000002e0: 6265 2e6d 6174 7269 782e 6d65 6173 7572  be.matrix.measur
+000002f0: 6520 696d 706f 7274 2053 6563 6f6e 644f  e import SecondO
+00000300: 7264 6572 4d65 6173 7572 6573 0a66 726f  rderMeasures.fro
+00000310: 6d20 6372 2e63 7562 652e 6d61 7472 6978  m cr.cube.matrix
+00000320: 2e73 7562 746f 7461 6c73 2069 6d70 6f72  .subtotals impor
+00000330: 7420 5375 6d53 7562 746f 7461 6c73 0a66  t SumSubtotals.f
+00000340: 726f 6d20 6372 2e63 7562 652e 7574 696c  rom cr.cube.util
+00000350: 2069 6d70 6f72 7420 6c61 7a79 7072 6f70   import lazyprop
+00000360: 6572 7479 0a0a 0a63 6c61 7373 2041 7373  erty...class Ass
+00000370: 656d 626c 6572 3a0a 2020 2020 2222 2250  embler:.    """P
+00000380: 726f 7669 6465 7320 6d65 6173 7572 6520  rovides measure 
+00000390: 616e 6420 6d61 7267 696e 206d 6574 686f  and margin metho
+000003a0: 6473 2066 6f72 2061 2063 7562 652d 736c  ds for a cube-sl
+000003b0: 6963 652e 0a0a 2020 2020 416e 2061 7373  ice...    An ass
+000003c0: 656d 626c 6564 206d 6174 7269 7820 6973  embled matrix is
+000003d0: 2061 2032 4420 6e64 6172 7261 7920 7265   a 2D ndarray re
+000003e0: 666c 6563 7469 6e67 2061 6c6c 206f 7264  flecting all ord
+000003f0: 6572 696e 672c 2069 6e73 6572 7469 6f6e  ering, insertion
+00000400: 2c20 616e 6420 6869 6469 6e67 0a20 2020  , and hiding.   
+00000410: 2074 7261 6e73 666f 726d 7320 6170 706c   transforms appl
+00000420: 6965 6420 746f 2074 6865 2064 696d 656e  ied to the dimen
+00000430: 7369 6f6e 732e 2041 6e20 6173 7365 6d62  sions. An assemb
+00000440: 6c65 6420 6d61 7267 696e 2069 7320 6f66  led margin is of
+00000450: 7465 6e20 6120 3144 206e 6461 7272 6179  ten a 1D ndarray
+00000460: 0a20 2020 2077 6869 6368 2069 7320 7369  .    which is si
+00000470: 6d69 6c61 726c 7920 666f 726d 6564 2066  milarly formed f
+00000480: 726f 6d20 696e 7365 7274 6564 2076 616c  rom inserted val
+00000490: 7565 732c 206f 7264 6572 6564 2c20 616e  ues, ordered, an
+000004a0: 6420 7661 6c75 6520 6869 6469 6e67 2061  d value hiding a
+000004b0: 7070 6c69 6564 2e0a 0a20 2020 2060 6375  pplied...    `cu
+000004c0: 6265 6020 6973 2074 6865 2060 6372 2e63  be` is the `cr.c
+000004d0: 7562 652e 4375 6265 6020 6f62 6a65 6374  ube.Cube` object
+000004e0: 2063 6f6e 7461 696e 696e 6720 7468 6520   containing the 
+000004f0: 6461 7461 2066 6f72 2074 6869 7320 6d61  data for this ma
+00000500: 7472 6978 2e20 4e6f 7465 2074 6861 740a  trix. Note that.
+00000510: 2020 2020 6e6f 7420 616c 6c20 7468 6520      not all the 
+00000520: 6461 7461 2069 6e20 6063 7562 6560 2077  data in `cube` w
+00000530: 696c 6c20 6e65 6365 7373 6172 696c 7920  ill necessarily 
+00000540: 6265 2075 7365 6420 6279 2074 6869 7320  be used by this 
+00000550: 6d61 7472 6978 2e20 5768 656e 2060 6375  matrix. When `cu
+00000560: 6265 6020 6973 0a20 2020 206d 6f72 6520  be` is.    more 
+00000570: 7468 616e 2032 2d64 696d 656e 7369 6f6e  than 2-dimension
+00000580: 616c 2c20 6974 2069 7320 2273 6c69 6365  al, it is "slice
+00000590: 6422 2061 6e64 2065 6163 6820 736c 6963  d" and each slic
+000005a0: 6520 6765 7473 2069 7473 206f 776e 206d  e gets its own m
+000005b0: 6174 7269 7820 2861 6e64 0a20 2020 2060  atrix (and.    `
+000005c0: 5f53 6c69 6365 6020 6f62 6a65 6374 292e  _Slice` object).
+000005d0: 0a0a 2020 2020 6064 696d 656e 7369 6f6e  ..    `dimension
+000005e0: 7360 2069 7320 6120 7061 6972 2028 322d  s` is a pair (2-
+000005f0: 7475 706c 6529 206f 6620 2872 6f77 735f  tuple) of (rows_
+00000600: 6469 6d65 6e73 696f 6e2c 2063 6f6c 756d  dimension, colum
+00000610: 6e73 5f64 696d 656e 7369 6f6e 2920 4469  ns_dimension) Di
+00000620: 6d65 6e73 696f 6e0a 2020 2020 6f62 6a65  mension.    obje
+00000630: 6374 732e 2054 6865 7365 2061 7265 2061  cts. These are a
+00000640: 6c77 6179 7320 7468 6520 6c61 7374 2074  lways the last t
+00000650: 776f 2064 696d 656e 7369 6f6e 7320 6f66  wo dimensions of
+00000660: 2060 6375 6265 6020 6275 7420 6d61 7920   `cube` but may 
+00000670: 616e 6420 6f66 7465 6e20 646f 0a20 2020  and often do.   
+00000680: 2068 6176 6520 7472 616e 7366 6f72 6d61   have transforma
+00000690: 7469 6f6e 7320 6170 706c 6965 6420 7468  tions applied th
+000006a0: 6174 2061 7265 206e 6f74 2070 7265 7365  at are not prese
+000006b0: 6e74 206f 6e20 7468 6520 6063 7562 6560  nt on the `cube`
+000006c0: 2064 696d 656e 7369 6f6e 7320 6672 6f6d   dimensions from
+000006d0: 0a20 2020 2077 6869 6368 2074 6865 7920  .    which they 
+000006e0: 6465 7269 7665 2e0a 0a20 2020 2060 736c  derive...    `sl
+000006f0: 6963 655f 6964 7860 2069 7320 616e 2069  ice_idx` is an i
+00000700: 6e74 206f 6666 7365 7420 696e 6469 6361  nt offset indica
+00000710: 7469 6e67 2077 6869 6368 2070 6f72 7469  ting which porti
+00000720: 6f6e 206f 6620 6063 7562 6560 2064 6174  on of `cube` dat
+00000730: 6120 746f 2075 7365 2066 6f72 2074 6869  a to use for thi
+00000740: 730a 2020 2020 6d61 7472 6978 2e20 5468  s.    matrix. Th
+00000750: 6572 6520 6973 206f 6e65 2073 6c69 6365  ere is one slice
+00000760: 2066 6f72 2065 6163 6820 656c 656d 656e   for each elemen
+00000770: 7420 6f66 2074 6865 2066 6972 7374 2063  t of the first c
+00000780: 7562 6520 6469 6d65 6e73 696f 6e20 2874  ube dimension (t
+00000790: 6865 2022 7461 626c 6522 0a20 2020 2064  he "table".    d
+000007a0: 696d 656e 7369 6f6e 2920 7768 656e 2074  imension) when t
+000007b0: 6865 2063 7562 6520 6861 7320 6d6f 7265  he cube has more
+000007c0: 2074 6861 6e20 7477 6f20 6469 6d65 6e73   than two dimens
+000007d0: 696f 6e73 2e0a 2020 2020 2222 220a 0a20  ions..    """.. 
+000007e0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000007f0: 7365 6c66 2c20 6375 6265 2c20 6469 6d65  self, cube, dime
+00000800: 6e73 696f 6e73 2c20 736c 6963 655f 6964  nsions, slice_id
+00000810: 7829 3a0a 2020 2020 2020 2020 7365 6c66  x):.        self
+00000820: 2e5f 6375 6265 203d 2063 7562 650a 2020  ._cube = cube.  
+00000830: 2020 2020 2020 7365 6c66 2e5f 6469 6d65        self._dime
+00000840: 6e73 696f 6e73 203d 2064 696d 656e 7369  nsions = dimensi
+00000850: 6f6e 730a 2020 2020 2020 2020 7365 6c66  ons.        self
+00000860: 2e5f 736c 6963 655f 6964 7820 3d20 736c  ._slice_idx = sl
+00000870: 6963 655f 6964 780a 0a20 2020 2040 6c61  ice_idx..    @la
+00000880: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00000890: 6566 2063 6f6c 756d 6e5f 616c 6961 7365  ef column_aliase
+000008a0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+000008b0: 2022 2222 3144 2073 7472 206e 6461 7272   """1D str ndarr
+000008c0: 6179 206f 6620 636f 6c75 6d6e 2061 6c69  ay of column ali
+000008d0: 6173 2066 6f72 2065 6163 6820 6d61 7472  as for each matr
+000008e0: 6978 2072 6f77 2e0a 0a20 2020 2020 2020  ix row...       
+000008f0: 2054 6865 7365 2061 7265 2073 7569 7461   These are suita
+00000900: 626c 6520 666f 7220 7573 6520 6173 2063  ble for use as c
+00000910: 6f6c 756d 6e20 6865 6164 696e 6773 3b20  olumn headings; 
+00000920: 616c 6961 7320 666f 7220 7375 6274 6f74  alias for subtot
+00000930: 616c 2063 6f6c 756d 6e73 2061 7070 6561  al columns appea
+00000940: 720a 2020 2020 2020 2020 696e 2074 6865  r.        in the
+00000950: 2073 6571 7565 6e63 6520 616e 6420 616c   sequence and al
+00000960: 6961 7320 6172 6520 6f72 6465 7265 6420  ias are ordered 
+00000970: 746f 2063 6f72 7265 7370 6f6e 6420 7769  to correspond wi
+00000980: 7468 2074 6865 6972 2072 6573 7065 6374  th their respect
+00000990: 6976 6520 6461 7461 0a20 2020 2020 2020  ive data.       
+000009a0: 2063 6f6c 756d 6e2e 0a20 2020 2020 2020   column..       
+000009b0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+000009c0: 7572 6e20 7365 6c66 2e5f 6469 6d65 6e73  urn self._dimens
+000009d0: 696f 6e5f 616c 6961 7365 7328 7365 6c66  ion_aliases(self
+000009e0: 2e5f 636f 6c75 6d6e 735f 6469 6d65 6e73  ._columns_dimens
+000009f0: 696f 6e2c 2073 656c 662e 5f63 6f6c 756d  ion, self._colum
+00000a00: 6e5f 6f72 6465 7229 0a0a 2020 2020 406c  n_order)..    @l
+00000a10: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00000a20: 6465 6620 636f 6c75 6d6e 5f63 6f64 6573  def column_codes
+00000a30: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00000a40: 2222 2231 4420 696e 7420 6e64 6172 7261  """1D int ndarra
+00000a50: 7920 6f66 2063 6f6c 756d 6e20 636f 6465  y of column code
+00000a60: 7320 666f 7220 6561 6368 206d 6174 7269  s for each matri
+00000a70: 7820 726f 772e 0a0a 2020 2020 2020 2020  x row...        
+00000a80: 5468 6573 6520 6172 6520 7375 6974 6162  These are suitab
+00000a90: 6c65 2066 6f72 2075 7365 2061 7320 636f  le for use as co
+00000aa0: 6c75 6d6e 2068 6561 6469 6e67 733b 2063  lumn headings; c
+00000ab0: 6f64 6573 2066 6f72 2073 7562 746f 7461  odes for subtota
+00000ac0: 6c20 636f 6c75 6d6e 7320 6170 7065 6172  l columns appear
+00000ad0: 0a20 2020 2020 2020 2069 6e20 7468 6520  .        in the 
+00000ae0: 7365 7175 656e 6365 2061 6e64 2063 6f64  sequence and cod
+00000af0: 6573 2061 7265 206f 7264 6572 6564 2074  es are ordered t
+00000b00: 6f20 636f 7272 6573 706f 6e64 2077 6974  o correspond wit
+00000b10: 6820 7468 6569 7220 7265 7370 6563 7469  h their respecti
+00000b20: 7665 2064 6174 610a 2020 2020 2020 2020  ve data.        
+00000b30: 636f 6c75 6d6e 2e0a 2020 2020 2020 2020  column..        
+00000b40: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00000b50: 726e 2073 656c 662e 5f64 696d 656e 7369  rn self._dimensi
+00000b60: 6f6e 5f63 6f64 6573 2873 656c 662e 5f63  on_codes(self._c
+00000b70: 6f6c 756d 6e73 5f64 696d 656e 7369 6f6e  olumns_dimension
+00000b80: 2c20 7365 6c66 2e5f 636f 6c75 6d6e 5f6f  , self._column_o
+00000b90: 7264 6572 290a 0a20 2020 2040 6c61 7a79  rder)..    @lazy
+00000ba0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00000bb0: 2063 6f6c 756d 6e5f 636f 6d70 6172 6162   column_comparab
+00000bc0: 6c65 5f63 6f75 6e74 7328 7365 6c66 293a  le_counts(self):
+00000bd0: 0a20 2020 2020 2020 2022 2222 3244 206e  .        """2D n
+00000be0: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
+00000bf0: 7920 6f66 2063 6f75 6e74 7320 636f 6d70  y of counts comp
+00000c00: 6172 6162 6c65 2069 6e20 7468 6520 636f  arable in the co
+00000c10: 6c75 6d6e 2064 696d 656e 7369 6f6e 2e0a  lumn dimension..
+00000c20: 0a20 2020 2020 2020 2043 6f6d 7061 7261  .        Compara
+00000c30: 626c 6520 696e 2074 6865 2022 636f 6c75  ble in the "colu
+00000c40: 6d6e 2220 6469 6d65 6e73 696f 6e20 6d65  mn" dimension me
+00000c50: 616e 7320 7468 6174 2069 7427 7320 6e6f  ans that it's no
+00000c60: 7420 6120 636f 6c75 6d6e 2073 7562 746f  t a column subto
+00000c70: 7461 6c0a 2020 2020 2020 2020 6469 6666  tal.        diff
+00000c80: 6572 656e 6365 2062 6563 6175 7365 2074  erence because t
+00000c90: 6865 7365 2061 7265 206e 6f74 2063 6f6e  hese are not con
+00000ca0: 7369 6465 7265 6420 636f 6d70 6172 6162  sidered comparab
+00000cb0: 6c65 2073 696e 6365 2074 6865 6972 2062  le since their b
+00000cc0: 6173 6573 0a20 2020 2020 2020 2061 7265  ases.        are
+00000cd0: 6e27 7420 7468 6520 7361 6d65 2e20 5468  n't the same. Th
+00000ce0: 6520 7661 6c75 6573 2061 6c6f 6e67 2074  e values along t
+00000cf0: 6865 7365 2073 7562 746f 7461 6c20 6469  hese subtotal di
+00000d00: 6666 6572 656e 6365 7320 6172 6520 6465  fferences are de
+00000d10: 6669 6e65 6420 6173 0a20 2020 2020 2020  fined as.       
+00000d20: 206e 702e 6e61 6e2e 0a20 2020 2020 2020   np.nan..       
+00000d30: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00000d40: 7572 6e20 7365 6c66 2e5f 6173 7365 6d62  urn self._assemb
+00000d50: 6c65 5f6d 6174 7269 7828 7365 6c66 2e5f  le_matrix(self._
+00000d60: 6d65 6173 7572 6573 2e63 6f6c 756d 6e5f  measures.column_
+00000d70: 636f 6d70 6172 6162 6c65 5f63 6f75 6e74  comparable_count
+00000d80: 732e 626c 6f63 6b73 290a 0a20 2020 2040  s.blocks)..    @
+00000d90: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00000da0: 2064 6566 2063 6f6c 756d 6e5f 696e 6465   def column_inde
+00000db0: 7828 7365 6c66 293a 0a20 2020 2020 2020  x(self):.       
+00000dc0: 2022 2222 3244 206e 702e 666c 6f61 7436   """2D np.float6
+00000dd0: 3420 6e64 6172 7261 7920 6f66 2063 6f6c  4 ndarray of col
+00000de0: 756d 6e2d 696e 6465 7820 2270 6572 6365  umn-index "perce
+00000df0: 6e74 6167 6522 2066 6f72 2065 6163 6820  ntage" for each 
+00000e00: 7461 626c 6520 6365 6c6c 2e22 2222 0a20  table cell.""". 
+00000e10: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00000e20: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
+00000e30: 7269 7828 7365 6c66 2e5f 6d65 6173 7572  rix(self._measur
+00000e40: 6573 2e63 6f6c 756d 6e5f 696e 6465 782e  es.column_index.
+00000e50: 626c 6f63 6b73 290a 0a20 2020 2040 6c61  blocks)..    @la
+00000e60: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+00000e70: 6566 2063 6f6c 756d 6e5f 6c61 6265 6c73  ef column_labels
+00000e80: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00000e90: 2222 2231 4420 7374 7220 6e64 6172 7261  """1D str ndarra
+00000ea0: 7920 6f66 2063 6f6c 756d 6e20 6e61 6d65  y of column name
+00000eb0: 2066 6f72 2065 6163 6820 6d61 7472 6978   for each matrix
+00000ec0: 2063 6f6c 756d 6e2e 0a0a 2020 2020 2020   column...      
+00000ed0: 2020 5468 6573 6520 6172 6520 7375 6974    These are suit
+00000ee0: 6162 6c65 2066 6f72 2075 7365 2061 7320  able for use as 
+00000ef0: 636f 6c75 6d6e 2068 6561 6469 6e67 733b  column headings;
+00000f00: 206c 6162 656c 7320 666f 7220 7375 6274   labels for subt
+00000f10: 6f74 616c 2063 6f6c 756d 6e73 0a20 2020  otal columns.   
+00000f20: 2020 2020 2061 7070 6561 7220 696e 2074       appear in t
+00000f30: 6865 2073 6571 7565 6e63 6520 616e 6420  he sequence and 
+00000f40: 6c61 6265 6c73 2061 7265 206f 7264 6572  labels are order
+00000f50: 6564 2074 6f20 636f 7272 6573 706f 6e64  ed to correspond
+00000f60: 2077 6974 6820 7468 6569 720a 2020 2020   with their.    
+00000f70: 2020 2020 7265 7370 6563 7469 7665 2064      respective d
+00000f80: 6174 6120 636f 6c75 6d6e 2e0a 2020 2020  ata column..    
+00000f90: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00000fa0: 7265 7475 726e 2073 656c 662e 5f64 696d  return self._dim
+00000fb0: 656e 7369 6f6e 5f6c 6162 656c 7328 7365  ension_labels(se
+00000fc0: 6c66 2e5f 636f 6c75 6d6e 735f 6469 6d65  lf._columns_dime
+00000fd0: 6e73 696f 6e2c 2073 656c 662e 5f63 6f6c  nsion, self._col
+00000fe0: 756d 6e5f 6f72 6465 7229 0a0a 2020 2020  umn_order)..    
+00000ff0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00001000: 2020 6465 6620 636f 6c75 6d6e 5f70 726f    def column_pro
+00001010: 706f 7274 696f 6e73 2873 656c 6629 3a0a  portions(self):.
+00001020: 2020 2020 2020 2020 2222 2232 4420 6e70          """2D np
+00001030: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
+00001040: 206f 6620 636f 6c75 6d6e 2d70 726f 706f   of column-propo
+00001050: 7274 696f 6e20 666f 7220 6561 6368 206d  rtion for each m
+00001060: 6174 7269 7820 6365 6c6c 2e0a 0a20 2020  atrix cell...   
+00001070: 2020 2020 2054 6869 7320 6973 2074 6865       This is the
+00001080: 2070 726f 706f 7274 696f 6e20 6f66 2074   proportion of t
+00001090: 6865 2077 6569 6768 7465 642d 636f 756e  he weighted-coun
+000010a0: 7420 666f 7220 6365 6c6c 2074 6f20 7468  t for cell to th
+000010b0: 6520 7765 6967 6874 6564 2d4e 206f 6620  e weighted-N of 
+000010c0: 7468 650a 2020 2020 2020 2020 636f 6c75  the.        colu
+000010d0: 6d6e 2074 6865 2063 656c 6c20 6170 7065  mn the cell appe
+000010e0: 6172 7320 696e 2028 616b 612e 2063 6f6c  ars in (aka. col
+000010f0: 756d 6e2d 6d61 7267 696e 292e 2047 656e  umn-margin). Gen
+00001100: 6572 616c 6c79 2061 206e 756d 6265 7220  erally a number 
+00001110: 6265 7477 6565 6e20 302e 300a 2020 2020  between 0.0.    
+00001120: 2020 2020 616e 6420 312e 3020 696e 636c      and 1.0 incl
+00001130: 7573 6976 652c 2062 7574 2073 7562 746f  usive, but subto
+00001140: 7461 6c20 6469 6666 6572 656e 6365 7320  tal differences 
+00001150: 6361 6e20 6265 2062 6574 7765 656e 202d  can be between -
+00001160: 312e 3020 616e 6420 312e 300a 2020 2020  1.0 and 1.0.    
+00001170: 2020 2020 696e 636c 7573 6976 652e 0a20      inclusive.. 
+00001180: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00001190: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+000011a0: 6173 7365 6d62 6c65 5f6d 6174 7269 7828  assemble_matrix(
+000011b0: 7365 6c66 2e5f 6d65 6173 7572 6573 2e63  self._measures.c
+000011c0: 6f6c 756d 6e5f 7072 6f70 6f72 7469 6f6e  olumn_proportion
+000011d0: 732e 626c 6f63 6b73 290a 0a20 2020 2040  s.blocks)..    @
+000011e0: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+000011f0: 2064 6566 2063 6f6c 756d 6e5f 7072 6f70   def column_prop
+00001200: 6f72 7469 6f6e 5f76 6172 6961 6e63 6573  ortion_variances
+00001210: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00001220: 2222 2232 4420 6e64 6172 7261 7920 6f66  """2D ndarray of
+00001230: 206e 702e 666c 6f61 7436 3420 636f 6c75   np.float64 colu
+00001240: 6d6e 2d70 726f 706f 7274 696f 6e20 7661  mn-proportion va
+00001250: 7269 616e 6365 2066 6f72 2065 6163 6820  riance for each 
+00001260: 6d61 7472 6978 2063 656c 6c2e 2222 220a  matrix cell.""".
+00001270: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00001280: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
+00001290: 7472 6978 2873 656c 662e 5f6d 6561 7375  trix(self._measu
+000012a0: 7265 732e 636f 6c75 6d6e 5f70 726f 706f  res.column_propo
+000012b0: 7274 696f 6e5f 7661 7269 616e 6365 732e  rtion_variances.
+000012c0: 626c 6f63 6b73 290a 0a20 2020 2040 6c61  blocks)..    @la
+000012d0: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+000012e0: 6566 2063 6f6c 756d 6e5f 7368 6172 655f  ef column_share_
+000012f0: 7375 6d28 7365 6c66 293a 0a20 2020 2020  sum(self):.     
+00001300: 2020 2022 2222 3244 206f 7074 696f 6e61     """2D optiona
+00001310: 6c20 6e70 2e66 6c6f 6174 3634 206e 6461  l np.float64 nda
+00001320: 7272 6179 206f 6620 636f 6c75 6d6e 2073  rray of column s
+00001330: 6861 7265 206f 6620 7375 6d20 666f 7220  hare of sum for 
+00001340: 6561 6368 2063 656c 6c2e 0a0a 2020 2020  each cell...    
+00001350: 2020 2020 5261 6973 6573 2060 5661 6c75      Raises `Valu
+00001360: 6545 7272 6f72 6020 6966 2074 6865 2063  eError` if the c
+00001370: 7562 652d 7265 7375 6c74 2064 6f65 7320  ube-result does 
+00001380: 6e6f 7420 696e 636c 7564 6520 6120 7375  not include a su
+00001390: 6d20 6375 6265 2d6d 6561 7375 7265 2e0a  m cube-measure..
+000013a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000013b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000013c0: 5f61 7373 656d 626c 655f 6d61 7472 6978  _assemble_matrix
+000013d0: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
+000013e0: 636f 6c75 6d6e 5f73 6861 7265 5f73 756d  column_share_sum
+000013f0: 2e62 6c6f 636b 7329 0a0a 2020 2020 406c  .blocks)..    @l
+00001400: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00001410: 6465 6620 636f 6c75 6d6e 5f73 7464 5f65  def column_std_e
+00001420: 7272 2873 656c 6629 3a0a 2020 2020 2020  rr(self):.      
+00001430: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
+00001440: 3634 206e 6461 7272 6179 206f 6620 7374  64 ndarray of st
+00001450: 642d 6572 726f 7220 6f66 2063 6f6c 756d  d-error of colum
+00001460: 6e2d 7065 7263 656e 7420 666f 7220 6561  n-percent for ea
+00001470: 6368 206d 6174 7269 7820 6365 6c6c 2e22  ch matrix cell."
+00001480: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00001490: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
+000014a0: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
+000014b0: 6173 7572 6573 2e63 6f6c 756d 6e5f 7374  asures.column_st
+000014c0: 645f 6572 722e 626c 6f63 6b73 290a 0a20  d_err.blocks).. 
+000014d0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+000014e0: 0a20 2020 2064 6566 2063 6f6c 756d 6e5f  .    def column_
+000014f0: 756e 7765 6967 6874 6564 5f62 6173 6573  unweighted_bases
+00001500: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00001510: 2222 2232 4420 6e70 2e66 6c6f 6174 3634  """2D np.float64
+00001520: 206e 6461 7272 6179 206f 6620 756e 7765   ndarray of unwe
+00001530: 6967 6874 6564 2063 6f6c 2d70 726f 706f  ighted col-propo
+00001540: 7274 696f 6e73 2064 656e 6f6d 696e 6174  rtions denominat
+00001550: 6f72 2070 6572 2063 656c 6c2e 2222 220a  or per cell.""".
+00001560: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00001570: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
+00001580: 7472 6978 2873 656c 662e 5f6d 6561 7375  trix(self._measu
+00001590: 7265 732e 636f 6c75 6d6e 5f75 6e77 6569  res.column_unwei
+000015a0: 6768 7465 645f 6261 7365 732e 626c 6f63  ghted_bases.bloc
+000015b0: 6b73 290a 0a20 2020 2040 6c61 7a79 7072  ks)..    @lazypr
+000015c0: 6f70 6572 7479 0a20 2020 2064 6566 2063  operty.    def c
+000015d0: 6f6c 756d 6e5f 7765 6967 6874 6564 5f62  olumn_weighted_b
+000015e0: 6173 6573 2873 656c 6629 3a0a 2020 2020  ases(self):.    
+000015f0: 2020 2020 2222 2232 4420 6e70 2e66 6c6f      """2D np.flo
+00001600: 6174 3634 206e 6461 7272 6179 206f 6620  at64 ndarray of 
+00001610: 636f 6c75 6d6e 2d70 726f 706f 7274 696f  column-proportio
+00001620: 6e73 2064 656e 6f6d 696e 6174 6f72 2066  ns denominator f
+00001630: 6f72 2065 6163 6820 6365 6c6c 2e22 2222  or each cell."""
+00001640: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00001650: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
+00001660: 6174 7269 7828 7365 6c66 2e5f 6d65 6173  atrix(self._meas
+00001670: 7572 6573 2e63 6f6c 756d 6e5f 7765 6967  ures.column_weig
+00001680: 6874 6564 5f62 6173 6573 2e62 6c6f 636b  hted_bases.block
+00001690: 7329 0a0a 2020 2020 406c 617a 7970 726f  s)..    @lazypro
+000016a0: 7065 7274 790a 2020 2020 6465 6620 636f  perty.    def co
+000016b0: 6c75 6d6e 735f 6261 7365 2873 656c 6629  lumns_base(self)
+000016c0: 3a0a 2020 2020 2020 2020 2222 2231 442f  :.        """1D/
+000016d0: 3244 206e 702e 666c 6f61 7436 3420 6e64  2D np.float64 nd
+000016e0: 6172 7261 7920 6f66 2075 6e77 6569 6768  array of unweigh
+000016f0: 7465 642d 4e20 666f 7220 6561 6368 2073  ted-N for each s
+00001700: 6c69 6365 2063 6f6c 756d 6e2f 6365 6c6c  lice column/cell
+00001710: 2e22 2222 0a20 2020 2020 2020 2023 202d  .""".        # -
+00001720: 2d2d 2061 6e20 4d52 5f58 2073 6c69 6365  -- an MR_X slice
+00001730: 2070 726f 6475 6365 7320 6120 3244 2063   produces a 2D c
+00001740: 6f6c 756d 6e73 2d62 6173 6520 2865 6163  olumns-base (eac
+00001750: 6820 6365 6c6c 2068 6173 2069 7473 206f  h cell has its o
+00001760: 776e 204e 2920 2d2d 2d0a 2020 2020 2020  wn N) ---.      
+00001770: 2020 2320 2d2d 2d20 5468 6973 2069 7320    # --- This is 
+00001780: 7265 616c 6c79 206a 7573 7420 616e 6f74  really just anot
+00001790: 6865 7220 7761 7920 746f 2063 616c 6c20  her way to call 
+000017a0: 7468 6520 636f 6c75 6d6e 735f 7765 6967  the columns_weig
+000017b0: 6874 6564 5f62 6173 6573 202d 2d2d 0a20  hted_bases ---. 
+000017c0: 2020 2020 2020 2023 202d 2d2d 2054 4f44         # --- TOD
+000017d0: 4f3a 2053 686f 756c 6420 636f 6c75 6d6e  O: Should column
+000017e0: 5f62 6173 6520 6f6e 6c79 2062 6520 6465  _base only be de
+000017f0: 6669 6e65 6420 7768 656e 2069 7427 7320  fined when it's 
+00001800: 3144 3f20 5468 6973 2077 6f75 6c64 0a20  1D? This would. 
+00001810: 2020 2020 2020 2023 202d 2d2d 2072 6571         # --- req
+00001820: 7569 7265 2063 6861 6e67 6573 2074 6f20  uire changes to 
+00001830: 6578 706f 7274 6572 2074 6f20 7573 6520  exporter to use 
+00001840: 7468 6520 6261 7365 7320 746f 2067 6976  the bases to giv
+00001850: 6520 610a 2020 2020 2020 2020 2320 2d2d  e a.        # --
+00001860: 2d20 2263 6f6c 756d 6e5f 6261 7365 5f72  - "column_base_r
+00001870: 616e 6765 220a 2020 2020 2020 2020 6966  ange".        if
+00001880: 206e 6f74 2073 656c 662e 5f6d 6561 7375   not self._measu
+00001890: 7265 732e 636f 6c75 6d6e 735f 756e 7765  res.columns_unwe
+000018a0: 6967 6874 6564 5f62 6173 652e 6973 5f64  ighted_base.is_d
+000018b0: 6566 696e 6564 3a0a 2020 2020 2020 2020  efined:.        
+000018c0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000018d0: 636f 6c75 6d6e 5f75 6e77 6569 6768 7465  column_unweighte
+000018e0: 645f 6261 7365 730a 0a20 2020 2020 2020  d_bases..       
+000018f0: 2023 202d 2d2d 206f 7468 6572 7769 7365   # --- otherwise
+00001900: 2063 6f6c 756d 6e73 2d62 6173 6520 6973   columns-base is
+00001910: 2061 2076 6563 746f 7220 2d2d 2d0a 2020   a vector ---.  
+00001920: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00001930: 662e 5f61 7373 656d 626c 655f 6d61 7267  f._assemble_marg
+00001940: 696e 616c 2873 656c 662e 5f6d 6561 7375  inal(self._measu
+00001950: 7265 732e 636f 6c75 6d6e 735f 756e 7765  res.columns_unwe
+00001960: 6967 6874 6564 5f62 6173 6529 0a0a 2020  ighted_base)..  
+00001970: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+00001980: 2020 2020 6465 6620 636f 6c75 6d6e 735f      def columns_
+00001990: 6469 6d65 6e73 696f 6e5f 6e75 6d65 7269  dimension_numeri
+000019a0: 635f 7661 6c75 6573 2873 656c 6629 3a0a  c_values(self):.
+000019b0: 2020 2020 2020 2020 2222 2231 4420 6f70          """1D op
+000019c0: 7469 6f6e 616c 206e 702e 696e 742f 666c  tional np.int/fl
+000019d0: 6f61 7436 3420 6e64 6172 7261 7920 6f66  oat64 ndarray of
+000019e0: 206e 756d 6572 6963 2d76 616c 7565 2066   numeric-value f
+000019f0: 6f72 2065 6163 6820 636f 6c75 6d6e 2065  or each column e
+00001a00: 6c65 6d65 6e74 2e0a 0a20 2020 2020 2020  lement...       
+00001a10: 2041 2076 616c 7565 206f 6620 6e70 2e6e   A value of np.n
+00001a20: 616e 2061 7070 6561 7273 2066 6f72 2061  an appears for a
+00001a30: 2063 6f6c 756d 6e20 656c 656d 656e 7420   column element 
+00001a40: 7769 7468 6f75 7420 6120 6e75 6d65 7269  without a numeri
+00001a50: 632d 7661 6c75 652e 2041 6c6c 0a20 2020  c-value. All.   
+00001a60: 2020 2020 2073 7562 746f 7461 6c20 636f       subtotal co
+00001a70: 6c75 6d6e 7320 6861 7665 2061 2076 616c  lumns have a val
+00001a80: 7565 206f 6620 6e70 2e6e 616e 2028 7375  ue of np.nan (su
+00001a90: 6274 6f74 616c 7320 6861 7665 206e 6f20  btotals have no 
+00001aa0: 6e75 6d65 7269 6320 7661 6c75 6529 2e0a  numeric value)..
+00001ab0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00001ac0: 2020 2020 656c 656d 656e 7473 203d 2073      elements = s
+00001ad0: 656c 662e 5f63 6f6c 756d 6e73 5f64 696d  elf._columns_dim
+00001ae0: 656e 7369 6f6e 2e76 616c 6964 5f65 6c65  ension.valid_ele
+00001af0: 6d65 6e74 730a 2020 2020 2020 2020 7265  ments.        re
+00001b00: 7475 726e 206e 702e 6172 7261 7928 0a20  turn np.array(. 
+00001b10: 2020 2020 2020 2020 2020 205b 0a20 2020             [.   
+00001b20: 2020 2020 2020 2020 2020 2020 2028 656c               (el
+00001b30: 656d 656e 7473 5b69 6478 5d2e 6e75 6d65  ements[idx].nume
+00001b40: 7269 635f 7661 6c75 6520 6966 2069 6478  ric_value if idx
+00001b50: 203e 3d20 3020 656c 7365 206e 702e 6e61   >= 0 else np.na
+00001b60: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+00001b70: 2020 2066 6f72 2069 6478 2069 6e20 7365     for idx in se
+00001b80: 6c66 2e5f 636f 6c75 6d6e 5f6f 7264 6572  lf._column_order
+00001b90: 0a20 2020 2020 2020 2020 2020 205d 0a20  .            ]. 
+00001ba0: 2020 2020 2020 2029 0a0a 2020 2020 406c         )..    @l
+00001bb0: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00001bc0: 6465 6620 636f 6c75 6d6e 735f 6d61 7267  def columns_marg
+00001bd0: 696e 2873 656c 6629 3a0a 2020 2020 2020  in(self):.      
+00001be0: 2020 2222 2231 442f 3244 206e 702e 666c    """1D/2D np.fl
+00001bf0: 6f61 7436 3420 6e64 6172 7261 7920 6f66  oat64 ndarray of
+00001c00: 2077 6569 6768 7465 642d 4e20 666f 7220   weighted-N for 
+00001c10: 6561 6368 2063 6f6c 756d 6e20 6f66 2074  each column of t
+00001c20: 6869 7320 736c 6963 652e 2222 220a 2020  his slice.""".  
+00001c30: 2020 2020 2020 2320 2d2d 2d20 616e 204d        # --- an M
+00001c40: 525f 5820 736c 6963 6520 7072 6f64 7563  R_X slice produc
+00001c50: 6573 2061 2032 4420 636f 6c75 6d6e 732d  es a 2D columns-
+00001c60: 6d61 7267 696e 2028 6561 6368 2063 656c  margin (each cel
+00001c70: 6c20 6861 7320 6974 7320 6f77 6e20 4e29  l has its own N)
+00001c80: 202d 2d2d 0a20 2020 2020 2020 2023 202d   ---.        # -
+00001c90: 2d2d 2054 6869 7320 6973 2072 6561 6c6c  -- This is reall
+00001ca0: 7920 6a75 7374 2061 6e6f 7468 6572 2077  y just another w
+00001cb0: 6179 2074 6f20 6361 6c6c 2074 6865 2063  ay to call the c
+00001cc0: 6f6c 756d 6e73 5f77 6569 6768 7465 645f  olumns_weighted_
+00001cd0: 6261 7365 7320 2d2d 2d0a 2020 2020 2020  bases ---.      
+00001ce0: 2020 2320 2d2d 2d20 544f 444f 3a20 5368    # --- TODO: Sh
+00001cf0: 6f75 6c64 2063 6f6c 756d 6e5f 6d61 7267  ould column_marg
+00001d00: 696e 206f 6e6c 7920 6265 2064 6566 696e  in only be defin
+00001d10: 6564 2077 6865 6e20 6974 2773 2031 443f  ed when it's 1D?
+00001d20: 2054 6869 7320 776f 756c 640a 2020 2020   This would.    
+00001d30: 2020 2020 2320 2d2d 2d20 7265 7175 6972      # --- requir
+00001d40: 6520 6368 616e 6765 7320 746f 2065 7870  e changes to exp
+00001d50: 6f72 7465 7220 746f 2075 7365 2074 6865  orter to use the
+00001d60: 2062 6173 6573 2074 6f20 6769 7665 2061   bases to give a
+00001d70: 0a20 2020 2020 2020 2023 202d 2d2d 2022  .        # --- "
+00001d80: 636f 6c75 6d6e 5f6d 6172 6769 6e5f 7261  column_margin_ra
+00001d90: 6e67 6522 0a20 2020 2020 2020 2069 6620  nge".        if 
+00001da0: 6e6f 7420 7365 6c66 2e5f 6d65 6173 7572  not self._measur
+00001db0: 6573 2e63 6f6c 756d 6e73 5f77 6569 6768  es.columns_weigh
+00001dc0: 7465 645f 6261 7365 2e69 735f 6465 6669  ted_base.is_defi
+00001dd0: 6e65 643a 0a20 2020 2020 2020 2020 2020  ned:.           
+00001de0: 2072 6574 7572 6e20 7365 6c66 2e63 6f6c   return self.col
+00001df0: 756d 6e5f 7765 6967 6874 6564 5f62 6173  umn_weighted_bas
+00001e00: 6573 0a0a 2020 2020 2020 2020 2320 2d2d  es..        # --
+00001e10: 2d20 6f74 6865 7277 6973 6520 636f 6c75  - otherwise colu
+00001e20: 6d6e 732d 6261 7365 2069 7320 6120 7665  mns-base is a ve
+00001e30: 6374 6f72 202d 2d2d 0a20 2020 2020 2020  ctor ---.       
+00001e40: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
+00001e50: 7365 6d62 6c65 5f6d 6172 6769 6e61 6c28  semble_marginal(
+00001e60: 7365 6c66 2e5f 6d65 6173 7572 6573 2e63  self._measures.c
+00001e70: 6f6c 756d 6e73 5f77 6569 6768 7465 645f  olumns_weighted_
+00001e80: 6261 7365 290a 0a20 2020 2040 6c61 7a79  base)..    @lazy
+00001e90: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00001ea0: 2063 6f6c 756d 6e73 5f6d 6172 6769 6e5f   columns_margin_
+00001eb0: 7072 6f70 6f72 7469 6f6e 2873 656c 6629  proportion(self)
+00001ec0: 3a0a 2020 2020 2020 2020 2222 2231 442f  :.        """1D/
+00001ed0: 3244 206e 702e 666c 6f61 7436 3420 6e64  2D np.float64 nd
+00001ee0: 6172 7261 7920 6f66 2077 6569 6768 7465  array of weighte
+00001ef0: 642d 7072 6f70 2066 6f72 2065 6163 6820  d-prop for each 
+00001f00: 636f 6c75 6d6e 206f 6620 7468 6973 2073  column of this s
+00001f10: 6c69 6365 2e22 2222 0a20 2020 2020 2020  lice.""".       
+00001f20: 2023 202d 2d2d 2061 6e20 4d52 5f58 2073   # --- an MR_X s
+00001f30: 6c69 6365 2070 726f 6475 6365 7320 6120  lice produces a 
+00001f40: 3244 2063 6f6c 756d 6e73 2d6d 6172 6769  2D columns-margi
+00001f50: 6e20 2865 6163 6820 6365 6c6c 2068 6173  n (each cell has
+00001f60: 2069 7473 206f 776e 204e 2920 2d2d 2d0a   its own N) ---.
+00001f70: 2020 2020 2020 2020 2320 2d2d 2d20 544f          # --- TO
+00001f80: 444f 3a20 5368 6f75 6c64 2063 6f6c 756d  DO: Should colum
+00001f90: 735f 6d61 7267 696e 5f70 726f 706f 7274  s_margin_proport
+00001fa0: 696f 6e20 6f6e 6c79 2062 6520 6465 6669  ion only be defi
+00001fb0: 6e65 6420 7768 656e 2069 7427 7320 3144  ned when it's 1D
+00001fc0: 3f20 5468 6973 0a20 2020 2020 2020 2023  ? This.        #
+00001fd0: 202d 2d2d 2072 6571 7569 7265 7320 6368   --- requires ch
+00001fe0: 616e 6765 7320 746f 2065 7870 6f72 7465  anges to exporte
+00001ff0: 7220 746f 2075 7365 2074 6865 2062 6173  r to use the bas
+00002000: 6573 2074 6f20 6769 7665 2061 0a20 2020  es to give a.   
+00002010: 2020 2020 2023 202d 2d2d 2022 636f 6c75       # --- "colu
+00002020: 6d6e 735f 6d61 7267 696e 5f72 616e 6765  mns_margin_range
+00002030: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+00002040: 2073 656c 662e 5f6d 6561 7375 7265 732e   self._measures.
+00002050: 636f 6c75 6d6e 735f 7461 626c 655f 7072  columns_table_pr
+00002060: 6f70 6f72 7469 6f6e 2e69 735f 6465 6669  oportion.is_defi
+00002070: 6e65 643a 0a20 2020 2020 2020 2020 2020  ned:.           
+00002080: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
+00002090: 7365 6d62 6c65 5f6d 6174 7269 7828 0a20  semble_matrix(. 
+000020a0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+000020b0: 756d 5375 6274 6f74 616c 732e 626c 6f63  umSubtotals.bloc
+000020c0: 6b73 280a 2020 2020 2020 2020 2020 2020  ks(.            
+000020d0: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
+000020e0: 756d 6e73 5f6d 6172 6769 6e20 2f20 7365  umns_margin / se
+000020f0: 6c66 2e74 6162 6c65 5f77 6569 6768 7465  lf.table_weighte
+00002100: 645f 6261 7365 732c 0a20 2020 2020 2020  d_bases,.       
+00002110: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00002120: 662e 5f64 696d 656e 7369 6f6e 732c 0a20  f._dimensions,. 
+00002130: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00002140: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00002150: 2020 2020 2020 2020 2320 2d2d 2d20 6f74          # --- ot
+00002160: 6865 7277 6973 6520 636f 6c75 6d6e 732d  herwise columns-
+00002170: 6d61 7267 696e 2d70 726f 706f 7274 696f  margin-proportio
+00002180: 6e20 6973 2061 206d 6167 696e 616c 202d  n is a maginal -
+00002190: 2d2d 0a20 2020 2020 2020 2072 6574 7572  --.        retur
+000021a0: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
+000021b0: 5f6d 6172 6769 6e61 6c28 7365 6c66 2e5f  _marginal(self._
+000021c0: 6d65 6173 7572 6573 2e63 6f6c 756d 6e73  measures.columns
+000021d0: 5f74 6162 6c65 5f70 726f 706f 7274 696f  _table_proportio
+000021e0: 6e29 0a0a 2020 2020 406c 617a 7970 726f  n)..    @lazypro
+000021f0: 7065 7274 790a 2020 2020 6465 6620 636f  perty.    def co
+00002200: 6c75 6d6e 735f 7363 616c 655f 6d65 616e  lumns_scale_mean
+00002210: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00002220: 2222 224f 7074 696f 6e61 6c20 3144 2063  """Optional 1D c
+00002230: 6f6c 756d 6e20 7363 616c 6520 6d65 616e  olumn scale mean
+00002240: 206d 6172 6769 6e61 6c20 666f 7220 7468   marginal for th
+00002250: 6973 2063 7562 652d 7265 7375 6c74 2222  is cube-result""
+00002260: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00002270: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
+00002280: 6d61 7267 696e 616c 2873 656c 662e 5f6d  marginal(self._m
+00002290: 6561 7375 7265 732e 636f 6c75 6d6e 735f  easures.columns_
+000022a0: 7363 616c 655f 6d65 616e 290a 0a20 2020  scale_mean)..   
+000022b0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+000022c0: 2020 2064 6566 2063 6f6c 756d 6e73 5f73     def columns_s
+000022d0: 6361 6c65 5f6d 6561 6e5f 7374 6464 6576  cale_mean_stddev
+000022e0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000022f0: 2222 224f 7074 696f 6e61 6c20 3144 2063  """Optional 1D c
+00002300: 6f6c 756d 6e20 7363 616c 6520 6d65 616e  olumn scale mean
+00002310: 2073 7464 2064 6576 206d 6172 6769 6e61   std dev margina
+00002320: 6c20 666f 7220 7468 6973 2063 7562 652d  l for this cube-
+00002330: 7265 7375 6c74 2222 220a 2020 2020 2020  result""".      
+00002340: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
+00002350: 7373 656d 626c 655f 6d61 7267 696e 616c  ssemble_marginal
+00002360: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
+00002370: 636f 6c75 6d6e 735f 7363 616c 655f 6d65  columns_scale_me
+00002380: 616e 5f73 7464 6465 7629 0a0a 2020 2020  an_stddev)..    
+00002390: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+000023a0: 2020 6465 6620 636f 6c75 6d6e 735f 7363    def columns_sc
+000023b0: 616c 655f 6d65 616e 5f73 7464 6572 7228  ale_mean_stderr(
+000023c0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+000023d0: 2222 4f70 7469 6f6e 616c 2031 4420 636f  ""Optional 1D co
+000023e0: 6c75 6d6e 2073 6361 6c65 206d 6561 6e20  lumn scale mean 
+000023f0: 7374 6420 6572 7220 6d61 7267 696e 616c  std err marginal
+00002400: 2066 6f72 2074 6869 7320 6375 6265 2d72   for this cube-r
+00002410: 6573 756c 7422 2222 0a20 2020 2020 2020  esult""".       
+00002420: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
+00002430: 7365 6d62 6c65 5f6d 6172 6769 6e61 6c28  semble_marginal(
+00002440: 7365 6c66 2e5f 6d65 6173 7572 6573 2e63  self._measures.c
+00002450: 6f6c 756d 6e73 5f73 6361 6c65 5f6d 6561  olumns_scale_mea
+00002460: 6e5f 7374 6465 7272 290a 0a20 2020 2040  n_stderr)..    @
+00002470: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00002480: 2064 6566 2063 6f6c 756d 6e73 5f73 6361   def columns_sca
+00002490: 6c65 5f6d 6564 6961 6e28 7365 6c66 293a  le_median(self):
+000024a0: 0a20 2020 2020 2020 2022 2222 4f70 7469  .        """Opti
+000024b0: 6f6e 616c 2031 4420 636f 6c75 6d6e 2073  onal 1D column s
+000024c0: 6361 6c65 206d 6564 6961 6e20 6d61 7267  cale median marg
+000024d0: 696e 616c 2066 6f72 2074 6869 7320 6375  inal for this cu
+000024e0: 6265 2d72 6573 756c 7422 2222 0a20 2020  be-result""".   
+000024f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00002500: 2e5f 6173 7365 6d62 6c65 5f6d 6172 6769  ._assemble_margi
+00002510: 6e61 6c28 7365 6c66 2e5f 6d65 6173 7572  nal(self._measur
+00002520: 6573 2e63 6f6c 756d 6e73 5f73 6361 6c65  es.columns_scale
+00002530: 5f6d 6564 6961 6e29 0a0a 2020 2020 406c  _median)..    @l
+00002540: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00002550: 6465 6620 6465 7269 7665 645f 636f 6c75  def derived_colu
+00002560: 6d6e 5f69 6478 7328 7365 6c66 293a 0a20  mn_idxs(self):. 
+00002570: 2020 2020 2020 2022 2222 7475 706c 6528         """tuple(
+00002580: 696e 7429 206f 6620 6465 7269 7665 6420  int) of derived 
+00002590: 636f 6c75 6d6e 2065 6c65 6d65 6e74 7327  column elements'
+000025a0: 2069 6e64 6578 6573 2c20 6361 6e20 6265   indexes, can be
+000025b0: 2065 6d70 7479 2e0a 0a20 2020 2020 2020   empty...       
+000025c0: 2041 6e20 656c 656d 656e 7420 6973 2064   An element is d
+000025d0: 6572 6976 6564 2069 6620 6974 2773 2061  erived if it's a
+000025e0: 2073 7562 7661 7269 6162 6c65 206f 6620   subvariable of 
+000025f0: 6120 6d75 6c74 6970 6c65 2072 6573 706f  a multiple respo
+00002600: 6e73 6520 6469 6d65 6e73 696f 6e2c 0a20  nse dimension,. 
+00002610: 2020 2020 2020 2077 6869 6368 2068 6173         which has
+00002620: 2062 6565 6e20 7072 6f64 7563 6564 2062   been produced b
+00002630: 7920 7468 6520 7a7a 392c 2061 6e64 2069  y the zz9, and i
+00002640: 6e73 6572 7465 6420 696e 746f 2074 6865  nserted into the
+00002650: 2072 6573 706f 6e73 6520 6461 7461 2e0a   response data..
+00002660: 0a20 2020 2020 2020 2041 6c6c 206f 7468  .        All oth
+00002670: 6572 2065 6c65 6d65 6e74 732c 2069 6e63  er elements, inc
+00002680: 6c75 6469 6e67 2072 6567 756c 6172 204d  luding regular M
+00002690: 5220 616e 6420 4341 2073 7562 7661 7269  R and CA subvari
+000026a0: 6162 6c65 732c 2061 7320 7765 6c6c 2061  ables, as well a
+000026b0: 730a 2020 2020 2020 2020 6361 7465 676f  s.        catego
+000026c0: 7269 6573 206f 6620 4341 5420 6469 6d65  ries of CAT dime
+000026d0: 6e73 696f 6e73 2c20 6172 6520 6e6f 7420  nsions, are not 
+000026e0: 6465 7269 7665 642e 2053 7562 746f 7461  derived. Subtota
+000026f0: 6c73 2061 7265 2061 6c73 6f20 6e6f 7420  ls are also not 
+00002700: 6465 7269 7665 640a 2020 2020 2020 2020  derived.        
+00002710: 696e 2074 6869 7320 7365 6e73 652c 2062  in this sense, b
+00002720: 6563 6175 7365 2074 6865 7927 7265 206e  ecause they're n
+00002730: 6f74 2065 7665 6e20 7061 7274 206f 6620  ot even part of 
+00002740: 7468 6520 6461 7461 2028 656c 656d 656e  the data (elemen
+00002750: 7473 292e 0a20 2020 2020 2020 2022 2222  ts)..        """
+00002760: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00002770: 7365 6c66 2e5f 6465 7269 7665 645f 656c  self._derived_el
+00002780: 656d 656e 745f 6964 7873 2873 656c 662e  ement_idxs(self.
+00002790: 5f63 6f6c 756d 6e73 5f64 696d 656e 7369  _columns_dimensi
+000027a0: 6f6e 2c20 7365 6c66 2e5f 636f 6c75 6d6e  on, self._column
+000027b0: 5f6f 7264 6572 290a 0a20 2020 2040 6c61  _order)..    @la
+000027c0: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+000027d0: 6566 2064 6572 6976 6564 5f72 6f77 5f69  ef derived_row_i
+000027e0: 6478 7328 7365 6c66 293a 0a20 2020 2020  dxs(self):.     
+000027f0: 2020 2022 2222 7475 706c 6528 696e 7429     """tuple(int)
+00002800: 206f 6620 6465 7269 7665 6420 726f 7720   of derived row 
+00002810: 656c 656d 656e 7473 2720 696e 6465 7865  elements' indexe
+00002820: 732c 2063 616e 2062 6520 656d 7074 792e  s, can be empty.
+00002830: 0a0a 2020 2020 2020 2020 416e 2065 6c65  ..        An ele
+00002840: 6d65 6e74 2069 7320 6465 7269 7665 6420  ment is derived 
+00002850: 6966 2069 7427 7320 6120 7375 6276 6172  if it's a subvar
+00002860: 6961 626c 6520 6f66 2061 206d 756c 7469  iable of a multi
+00002870: 706c 6520 7265 7370 6f6e 7365 2064 696d  ple response dim
+00002880: 656e 7369 6f6e 2c0a 2020 2020 2020 2020  ension,.        
+00002890: 7768 6963 6820 6861 7320 6265 656e 2070  which has been p
+000028a0: 726f 6475 6365 6420 6279 2074 6865 207a  roduced by the z
+000028b0: 7a39 2c20 616e 6420 696e 7365 7274 6564  z9, and inserted
+000028c0: 2069 6e74 6f20 7468 6520 7265 7370 6f6e   into the respon
+000028d0: 7365 2064 6174 612e 0a0a 2020 2020 2020  se data...      
+000028e0: 2020 416c 6c20 6f74 6865 7220 656c 656d    All other elem
+000028f0: 656e 7473 2c20 696e 636c 7564 696e 6720  ents, including 
+00002900: 7265 6775 6c61 7220 4d52 2061 6e64 2043  regular MR and C
+00002910: 4120 7375 6276 6172 6961 626c 6573 2c20  A subvariables, 
+00002920: 6173 2077 656c 6c20 6173 0a20 2020 2020  as well as.     
+00002930: 2020 2063 6174 6567 6f72 6965 7320 6f66     categories of
+00002940: 2043 4154 2064 696d 656e 7369 6f6e 732c   CAT dimensions,
+00002950: 2061 7265 206e 6f74 2064 6572 6976 6564   are not derived
+00002960: 2e20 5375 6274 6f74 616c 7320 6172 6520  . Subtotals are 
+00002970: 616c 736f 206e 6f74 2064 6572 6976 6564  also not derived
+00002980: 0a20 2020 2020 2020 2069 6e20 7468 6973  .        in this
+00002990: 2073 656e 7365 2c20 6265 6361 7573 6520   sense, because 
+000029a0: 7468 6579 2772 6520 6e6f 7420 6576 656e  they're not even
+000029b0: 2070 6172 7420 6f66 2074 6865 2064 6174   part of the dat
+000029c0: 6120 2865 6c65 6d65 6e74 7329 2e0a 2020  a (elements)..  
+000029d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000029e0: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
+000029f0: 6572 6976 6564 5f65 6c65 6d65 6e74 5f69  erived_element_i
+00002a00: 6478 7328 7365 6c66 2e5f 726f 7773 5f64  dxs(self._rows_d
+00002a10: 696d 656e 7369 6f6e 2c20 7365 6c66 2e5f  imension, self._
+00002a20: 726f 775f 6f72 6465 7229 0a0a 2020 2020  row_order)..    
+00002a30: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00002a40: 2020 6465 6620 6469 6666 5f72 6f77 5f69    def diff_row_i
+00002a50: 6478 7328 7365 6c66 293a 0a20 2020 2020  dxs(self):.     
+00002a60: 2020 2022 2222 7475 706c 6528 696e 7429     """tuple(int)
+00002a70: 206f 6620 6469 6666 6572 656e 6365 2072   of difference r
+00002a80: 6f77 2065 6c65 6d65 6e74 7327 2069 6e64  ow elements' ind
+00002a90: 6578 6573 2c20 6361 6e20 6265 2065 6d70  exes, can be emp
+00002aa0: 7479 2e22 2222 0a20 2020 2020 2020 2072  ty.""".        r
+00002ab0: 6574 7572 6e20 7365 6c66 2e5f 6469 6666  eturn self._diff
+00002ac0: 5f65 6c65 6d65 6e74 5f69 6478 7328 7365  _element_idxs(se
+00002ad0: 6c66 2e5f 726f 7773 5f64 696d 656e 7369  lf._rows_dimensi
+00002ae0: 6f6e 2c20 7365 6c66 2e5f 726f 775f 6f72  on, self._row_or
+00002af0: 6465 7229 0a0a 2020 2020 406c 617a 7970  der)..    @lazyp
+00002b00: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00002b10: 6469 6666 5f63 6f6c 756d 6e5f 6964 7873  diff_column_idxs
+00002b20: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00002b30: 2222 2274 7570 6c65 2869 6e74 2920 6f66  """tuple(int) of
+00002b40: 2064 6966 6665 7265 6e63 6520 636f 6c75   difference colu
+00002b50: 6d6e 2065 6c65 6d65 6e74 7327 2069 6e64  mn elements' ind
+00002b60: 6578 6573 2c20 6361 6e20 6265 2065 6d70  exes, can be emp
+00002b70: 7479 2e22 2222 0a20 2020 2020 2020 2072  ty.""".        r
+00002b80: 6574 7572 6e20 7365 6c66 2e5f 6469 6666  eturn self._diff
+00002b90: 5f65 6c65 6d65 6e74 5f69 6478 7328 7365  _element_idxs(se
+00002ba0: 6c66 2e5f 636f 6c75 6d6e 735f 6469 6d65  lf._columns_dime
+00002bb0: 6e73 696f 6e2c 2073 656c 662e 5f63 6f6c  nsion, self._col
+00002bc0: 756d 6e5f 6f72 6465 7229 0a0a 2020 2020  umn_order)..    
+00002bd0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00002be0: 2020 6465 6620 696e 7365 7274 6564 5f63    def inserted_c
+00002bf0: 6f6c 756d 6e5f 6964 7873 2873 656c 6629  olumn_idxs(self)
+00002c00: 3a0a 2020 2020 2020 2020 2222 2274 7570  :.        """tup
+00002c10: 6c65 206f 6620 696e 7420 696e 6465 7820  le of int index 
+00002c20: 6f66 2065 6163 6820 7375 6274 6f74 616c  of each subtotal
+00002c30: 2063 6f6c 756d 6e20 696e 2073 6c69 6365   column in slice
+00002c40: 2e22 2222 0a20 2020 2020 2020 2023 202d  .""".        # -
+00002c50: 2d2d 2069 6e73 6572 7469 6f6e 7320 6861  -- insertions ha
+00002c60: 7665 2061 206e 6567 6174 6976 6520 6964  ve a negative id
+00002c70: 7820 696e 2074 6865 6972 206f 7264 6572  x in their order
+00002c80: 2073 6571 7565 6e63 6520 2d2d 2d0a 2020   sequence ---.  
+00002c90: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+00002ca0: 6c65 2869 2066 6f72 2069 2c20 636f 6c5f  le(i for i, col_
+00002cb0: 6964 7820 696e 2065 6e75 6d65 7261 7465  idx in enumerate
+00002cc0: 2873 656c 662e 5f63 6f6c 756d 6e5f 6f72  (self._column_or
+00002cd0: 6465 7229 2069 6620 636f 6c5f 6964 7820  der) if col_idx 
+00002ce0: 3c20 3029 0a0a 2020 2020 406c 617a 7970  < 0)..    @lazyp
+00002cf0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00002d00: 696e 7365 7274 6564 5f72 6f77 5f69 6478  inserted_row_idx
+00002d10: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+00002d20: 2022 2222 7475 706c 6520 6f66 2069 6e74   """tuple of int
+00002d30: 2069 6e64 6578 206f 6620 6561 6368 2073   index of each s
+00002d40: 7562 746f 7461 6c20 726f 7720 696e 2073  ubtotal row in s
+00002d50: 6c69 6365 2e22 2222 0a20 2020 2020 2020  lice.""".       
+00002d60: 2023 202d 2d2d 2069 6e73 6572 7469 6f6e   # --- insertion
+00002d70: 7320 6861 7665 2061 206e 6567 6174 6976  s have a negativ
+00002d80: 6520 6964 7820 696e 2074 6865 6972 206f  e idx in their o
+00002d90: 7264 6572 2073 6571 7565 6e63 6520 2d2d  rder sequence --
+00002da0: 2d0a 2020 2020 2020 2020 7265 7475 726e  -.        return
+00002db0: 2074 7570 6c65 2869 2066 6f72 2069 2c20   tuple(i for i, 
+00002dc0: 726f 775f 6964 7820 696e 2065 6e75 6d65  row_idx in enume
+00002dd0: 7261 7465 2873 656c 662e 5f72 6f77 5f6f  rate(self._row_o
+00002de0: 7264 6572 2920 6966 2072 6f77 5f69 6478  rder) if row_idx
+00002df0: 203c 2030 290a 0a20 2020 2040 6c61 7a79   < 0)..    @lazy
+00002e00: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00002e10: 206d 6561 6e73 2873 656c 6629 3a0a 2020   means(self):.  
+00002e20: 2020 2020 2020 2222 2232 4420 6f70 7469        """2D opti
+00002e30: 6f6e 616c 206e 702e 666c 6f61 7436 3420  onal np.float64 
+00002e40: 6e64 6172 7261 7920 6f66 206d 6561 6e20  ndarray of mean 
+00002e50: 666f 7220 6561 6368 2063 656c 6c2e 0a0a  for each cell...
+00002e60: 2020 2020 2020 2020 5261 6973 6573 2060          Raises `
+00002e70: 5661 6c75 6545 7272 6f72 6020 6966 2074  ValueError` if t
+00002e80: 6865 2063 7562 652d 7265 7375 6c74 2064  he cube-result d
+00002e90: 6f65 7320 6e6f 7420 696e 636c 7564 6520  oes not include 
+00002ea0: 6120 6d65 616e 7320 6375 6265 2d6d 6561  a means cube-mea
+00002eb0: 7375 7265 2e0a 2020 2020 2020 2020 2222  sure..        ""
+00002ec0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00002ed0: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
+00002ee0: 6d61 7472 6978 2873 656c 662e 5f6d 6561  matrix(self._mea
+00002ef0: 7375 7265 732e 6d65 616e 732e 626c 6f63  sures.means.bloc
+00002f00: 6b73 290a 0a20 2020 2064 6566 2070 6169  ks)..    def pai
+00002f10: 7277 6973 655f 696e 6469 6365 7328 7365  rwise_indices(se
+00002f20: 6c66 2c20 616c 7068 612c 206f 6e6c 795f  lf, alpha, only_
+00002f30: 6c61 7267 6572 293a 0a20 2020 2020 2020  larger):.       
+00002f40: 2022 2222 3244 206f 7074 696f 6e61 6c20   """2D optional 
+00002f50: 6e64 6172 7261 7920 6f66 2074 7570 6c65  ndarray of tuple
+00002f60: 206f 6620 696e 7420 636f 6c75 6d6e 2d69   of int column-i
+00002f70: 6478 7320 7061 6972 7769 7365 2d74 2074  dxs pairwise-t t
+00002f80: 6872 6573 686f 6c64 2e0a 0a20 2020 2020  hreshold...     
+00002f90: 2020 2052 6169 7365 7320 6056 616c 7565     Raises `Value
+00002fa0: 4572 726f 7220 6966 2074 6865 2063 7562  Error if the cub
+00002fb0: 652d 7265 7375 6c74 2064 6f65 7320 6e6f  e-result does no
+00002fc0: 7420 696e 636c 7564 6520 606f 7665 726c  t include `overl
+00002fd0: 6170 7360 2063 7562 652d 6d65 6173 7572  aps` cube-measur
+00002fe0: 6573 2e0a 2020 2020 2020 2020 2222 220a  es..        """.
+00002ff0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00003000: 702e 6172 7261 7928 0a20 2020 2020 2020  p.array(.       
+00003010: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00003020: 2020 2020 2020 2073 656c 662e 5f70 6169         self._pai
+00003030: 7277 6973 655f 696e 6469 6365 7328 0a20  rwise_indices(. 
+00003040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003050: 2020 2073 656c 662e 7061 6972 7769 7365     self.pairwise
+00003060: 5f73 6967 6e69 6669 6361 6e63 655f 705f  _significance_p_
+00003070: 7661 6c73 2863 6f6c 292c 0a20 2020 2020  vals(col),.     
+00003080: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00003090: 656c 662e 7061 6972 7769 7365 5f73 6967  elf.pairwise_sig
+000030a0: 6e69 6669 6361 6e63 655f 745f 7374 6174  nificance_t_stat
+000030b0: 7328 636f 6c29 2c0a 2020 2020 2020 2020  s(col),.        
+000030c0: 2020 2020 2020 2020 2020 2020 616c 7068              alph
+000030d0: 612c 0a20 2020 2020 2020 2020 2020 2020  a,.             
+000030e0: 2020 2020 2020 206f 6e6c 795f 6c61 7267         only_larg
+000030f0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00003100: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00003110: 2020 2020 2020 666f 7220 636f 6c20 696e        for col in
+00003120: 2072 616e 6765 286c 656e 2873 656c 662e   range(len(self.
+00003130: 5f63 6f6c 756d 6e5f 6f72 6465 7229 290a  _column_order)).
+00003140: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+00003150: 2020 2020 2020 292e 540a 0a20 2020 2064        ).T..    d
+00003160: 6566 2070 6169 7277 6973 655f 6d65 616e  ef pairwise_mean
+00003170: 735f 696e 6469 6365 7328 7365 6c66 2c20  s_indices(self, 
+00003180: 616c 7068 612c 206f 6e6c 795f 6c61 7267  alpha, only_larg
+00003190: 6572 293a 0a20 2020 2020 2020 2022 2222  er):.        """
+000031a0: 3244 206f 7074 696f 6e61 6c20 6e64 6172  2D optional ndar
+000031b0: 7261 7920 6f66 2074 7570 6c65 206f 6620  ray of tuple of 
+000031c0: 696e 7420 636f 6c75 6d6e 2d69 6478 7320  int column-idxs 
+000031d0: 6d65 616e 7320 7061 6972 7769 7365 2d74  means pairwise-t
+000031e0: 2074 6872 6573 686f 6c64 2e0a 0a20 2020   threshold...   
+000031f0: 2020 2020 2052 6169 7365 7320 6056 616c       Raises `Val
+00003200: 7565 4572 726f 7220 6966 2074 6865 2063  ueError if the c
+00003210: 7562 652d 7265 7375 6c74 2064 6f65 7320  ube-result does 
+00003220: 6e6f 7420 696e 636c 7564 6520 606d 6561  not include `mea
+00003230: 6e73 6020 6375 6265 2d6d 6561 7375 7265  ns` cube-measure
+00003240: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+00003250: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
+00003260: 2e61 7272 6179 280a 2020 2020 2020 2020  .array(.        
+00003270: 2020 2020 5b0a 2020 2020 2020 2020 2020      [.          
+00003280: 2020 2020 2020 7365 6c66 2e5f 7061 6972        self._pair
+00003290: 7769 7365 5f69 6e64 6963 6573 280a 2020  wise_indices(.  
+000032a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032b0: 2020 7365 6c66 2e70 6169 7277 6973 655f    self.pairwise_
+000032c0: 7369 676e 6966 6963 616e 6365 5f6d 6561  significance_mea
+000032d0: 6e73 5f70 5f76 616c 7328 636f 6c29 2c0a  ns_p_vals(col),.
+000032e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032f0: 2020 2020 7365 6c66 2e70 6169 7277 6973      self.pairwis
+00003300: 655f 7369 676e 6966 6963 616e 6365 5f6d  e_significance_m
+00003310: 6561 6e73 5f74 5f73 7461 7473 2863 6f6c  eans_t_stats(col
+00003320: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00003330: 2020 2020 2020 2061 6c70 6861 2c0a 2020         alpha,.  
+00003340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003350: 2020 6f6e 6c79 5f6c 6172 6765 722c 0a20    only_larger,. 
+00003360: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00003370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003380: 2066 6f72 2063 6f6c 2069 6e20 7261 6e67   for col in rang
+00003390: 6528 6c65 6e28 7365 6c66 2e5f 636f 6c75  e(len(self._colu
+000033a0: 6d6e 5f6f 7264 6572 2929 0a20 2020 2020  mn_order)).     
+000033b0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+000033c0: 2029 2e54 0a0a 2020 2020 6465 6620 7061   ).T..    def pa
+000033d0: 6972 7769 7365 5f73 6967 6e69 6669 6361  irwise_significa
+000033e0: 6e63 655f 705f 7661 6c73 2873 656c 662c  nce_p_vals(self,
+000033f0: 2063 6f6c 756d 6e5f 6964 7829 3a0a 2020   column_idx):.  
+00003400: 2020 2020 2020 2222 2232 4420 6f70 7469        """2D opti
+00003410: 6f6e 616c 206e 702e 666c 6f61 7436 3420  onal np.float64 
+00003420: 6e64 6172 7261 7920 6f66 206f 7665 726c  ndarray of overl
+00003430: 6170 732d 705f 7661 6c73 206d 6174 7269  aps-p_vals matri
+00003440: 6365 7320 666f 7220 7375 6276 6172 2069  ces for subvar i
+00003450: 6478 2e0a 0a20 2020 2020 2020 2046 6f72  dx...        For
+00003460: 2063 7562 6573 2077 6865 7265 2074 6865   cubes where the
+00003470: 206c 6173 7420 6469 6d65 6e73 696f 6e20   last dimension 
+00003480: 6973 2063 6174 6567 6f72 6963 616c 2c20  is categorical, 
+00003490: 636f 6c75 6d6e 2069 6478 7320 7265 7072  column idxs repr
+000034a0: 6573 656e 740a 2020 2020 2020 2020 7370  esent.        sp
+000034b0: 6563 6966 6963 2063 6174 6567 6f72 6965  ecific categorie
+000034c0: 732e 0a0a 2020 2020 2020 2020 466f 7220  s...        For 
+000034d0: 6375 6265 7320 7768 6572 6520 7468 6520  cubes where the 
+000034e0: 6c61 7374 2064 696d 656e 7369 6f6e 2069  last dimension i
+000034f0: 7320 6120 6d75 6c74 6970 6c65 2072 6573  s a multiple res
+00003500: 706f 6e73 652c 2065 6163 6820 7375 6276  ponse, each subv
+00003510: 6172 6961 626c 650a 2020 2020 2020 2020  ariable.        
+00003520: 7061 6972 7769 7365 2073 6967 6e69 6669  pairwise signifi
+00003530: 6361 6e63 6520 6d61 7472 6978 2069 7320  cance matrix is 
+00003540: 6120 3244 206e 6461 7272 6179 206f 6620  a 2D ndarray of 
+00003550: 7468 6520 702d 7661 6c73 2066 6f72 2074  the p-vals for t
+00003560: 6865 2073 656c 6563 7465 640a 2020 2020  he selected.    
+00003570: 2020 2020 7375 6276 6172 6961 626c 6520      subvariable 
+00003580: 696e 6465 7820 2874 6865 2073 656c 6563  index (the selec
+00003590: 7465 6420 636f 6c75 6d6e 292e 0a0a 2020  ted column)...  
+000035a0: 2020 2020 2020 5261 6973 6573 2060 5661        Raises `Va
+000035b0: 6c75 6545 7272 6f72 2069 6620 7468 6520  lueError if the 
+000035c0: 6375 6265 2d72 6573 756c 7420 646f 6573  cube-result does
+000035d0: 206e 6f74 2069 6e63 6c75 6465 2060 6f76   not include `ov
+000035e0: 6572 6c61 7073 600a 2020 2020 2020 2020  erlaps`.        
+000035f0: 616e 6420 6076 616c 6964 5f6f 7665 726c  and `valid_overl
+00003600: 6170 7360 2063 7562 652d 6d65 6173 7572  aps` cube-measur
+00003610: 6573 2e0a 2020 2020 2020 2020 2222 220a  es..        """.
+00003620: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00003630: 5f63 7562 655f 6861 735f 6f76 6572 6c61  _cube_has_overla
+00003640: 7073 3a0a 2020 2020 2020 2020 2020 2020  ps:.            
+00003650: 2320 4966 206f 7665 726c 6170 7320 6172  # If overlaps ar
+00003660: 6520 6465 6669 6e65 642c 2063 616c 6375  e defined, calcu
+00003670: 6c61 7465 2073 6967 6e69 6669 6361 6e63  late significanc
+00003680: 6520 6261 7365 6420 6f6e 2074 6865 6d0a  e based on them.
+00003690: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000036a0: 726e 2073 656c 662e 5f61 7373 656d 626c  rn self._assembl
+000036b0: 655f 6d61 7472 6978 280a 2020 2020 2020  e_matrix(.      
+000036c0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000036d0: 6d65 6173 7572 6573 2e70 6169 7277 6973  measures.pairwis
+000036e0: 655f 705f 7661 6c73 5f66 6f72 5f73 7562  e_p_vals_for_sub
+000036f0: 7661 7228 636f 6c75 6d6e 5f69 6478 292e  var(column_idx).
+00003700: 626c 6f63 6b73 0a20 2020 2020 2020 2020  blocks.         
+00003710: 2020 2029 0a20 2020 2020 2020 2062 6173     ).        bas
+00003720: 655f 636f 6c75 6d6e 5f69 6478 203d 2073  e_column_idx = s
+00003730: 656c 662e 5f63 6f6c 756d 6e5f 6f72 6465  elf._column_orde
+00003740: 725b 636f 6c75 6d6e 5f69 6478 5d0a 2020  r[column_idx].  
+00003750: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00003760: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
+00003770: 6978 280a 2020 2020 2020 2020 2020 2020  ix(.            
+00003780: 7365 6c66 2e5f 6d65 6173 7572 6573 2e70  self._measures.p
+00003790: 6169 7277 6973 655f 705f 7661 6c73 2862  airwise_p_vals(b
+000037a0: 6173 655f 636f 6c75 6d6e 5f69 6478 292e  ase_column_idx).
+000037b0: 626c 6f63 6b73 0a20 2020 2020 2020 2029  blocks.        )
+000037c0: 0a0a 2020 2020 6465 6620 7061 6972 7769  ..    def pairwi
+000037d0: 7365 5f73 6967 6e69 6669 6361 6e63 655f  se_significance_
+000037e0: 745f 7374 6174 7328 7365 6c66 2c20 636f  t_stats(self, co
+000037f0: 6c75 6d6e 5f69 6478 293a 0a20 2020 2020  lumn_idx):.     
+00003800: 2020 2022 2222 3244 206f 7074 696f 6e61     """2D optiona
+00003810: 6c20 6e70 2e66 6c6f 6174 3634 206e 6461  l np.float64 nda
+00003820: 7272 6179 206f 6620 6f76 6572 6c61 7073  rray of overlaps
+00003830: 2d74 5f73 7461 7473 206d 6174 7269 6365  -t_stats matrice
+00003840: 7320 666f 7220 7375 6276 6172 2069 6478  s for subvar idx
+00003850: 2e0a 0a20 2020 2020 2020 2046 6f72 2063  ...        For c
+00003860: 7562 6573 2077 6865 7265 2074 6865 206c  ubes where the l
+00003870: 6173 7420 6469 6d65 6e73 696f 6e20 6973  ast dimension is
+00003880: 2063 6174 6567 6f72 6963 616c 2c20 636f   categorical, co
+00003890: 6c75 6d6e 2069 6478 7320 7265 7072 6573  lumn idxs repres
+000038a0: 656e 740a 2020 2020 2020 2020 7370 6563  ent.        spec
+000038b0: 6966 6963 2063 6174 6567 6f72 6965 732e  ific categories.
+000038c0: 0a0a 2020 2020 2020 2020 466f 7220 6375  ..        For cu
+000038d0: 6265 7320 7768 6572 6520 7468 6520 6c61  bes where the la
+000038e0: 7374 2064 696d 656e 7369 6f6e 2069 7320  st dimension is 
+000038f0: 6120 6d75 6c74 6970 6c65 2072 6573 706f  a multiple respo
+00003900: 6e73 652c 2065 6163 6820 7375 6276 6172  nse, each subvar
+00003910: 6961 626c 650a 2020 2020 2020 2020 7061  iable.        pa
+00003920: 6972 7769 7365 2073 6967 6e69 6669 6361  irwise significa
+00003930: 6e63 6520 6d61 7472 6978 2069 7320 6120  nce matrix is a 
+00003940: 3244 206e 6461 7272 6179 206f 6620 7468  2D ndarray of th
+00003950: 6520 742d 7374 6174 7320 666f 7220 7468  e t-stats for th
+00003960: 6520 7365 6c65 6374 6564 0a20 2020 2020  e selected.     
+00003970: 2020 2073 7562 7661 7269 6162 6c65 2069     subvariable i
+00003980: 6e64 6578 2028 7468 6520 7365 6c65 6374  ndex (the select
+00003990: 6564 2063 6f6c 756d 6e29 2e0a 0a20 2020  ed column)...   
+000039a0: 2020 2020 2052 6169 7365 7320 6056 616c       Raises `Val
+000039b0: 7565 4572 726f 7220 6966 2074 6865 2063  ueError if the c
+000039c0: 7562 652d 7265 7375 6c74 2064 6f65 7320  ube-result does 
+000039d0: 6e6f 7420 696e 636c 7564 6520 606f 7665  not include `ove
+000039e0: 726c 6170 7360 0a20 2020 2020 2020 2061  rlaps`.        a
+000039f0: 6e64 2060 7661 6c69 645f 6f76 6572 6c61  nd `valid_overla
+00003a00: 7073 6020 6375 6265 2d6d 6561 7375 7265  ps` cube-measure
+00003a10: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+00003a20: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00003a30: 6375 6265 5f68 6173 5f6f 7665 726c 6170  cube_has_overlap
+00003a40: 733a 0a20 2020 2020 2020 2020 2020 2023  s:.            #
+00003a50: 2049 6620 6f76 6572 6c61 7073 2061 7265   If overlaps are
+00003a60: 2064 6566 696e 6564 2c20 6361 6c63 756c   defined, calcul
+00003a70: 6174 6520 7369 676e 6966 6963 616e 6365  ate significance
+00003a80: 2062 6173 6564 206f 6e20 7468 656d 0a20   based on them. 
+00003a90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00003aa0: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
+00003ab0: 5f6d 6174 7269 7828 0a20 2020 2020 2020  _matrix(.       
+00003ac0: 2020 2020 2020 2020 2073 656c 662e 5f6d           self._m
+00003ad0: 6561 7375 7265 732e 7061 6972 7769 7365  easures.pairwise
+00003ae0: 5f74 5f73 7461 7473 5f66 6f72 5f73 7562  _t_stats_for_sub
+00003af0: 7661 7228 636f 6c75 6d6e 5f69 6478 292e  var(column_idx).
+00003b00: 626c 6f63 6b73 0a20 2020 2020 2020 2020  blocks.         
+00003b10: 2020 2029 0a20 2020 2020 2020 2062 6173     ).        bas
+00003b20: 655f 636f 6c75 6d6e 5f69 6478 203d 2073  e_column_idx = s
+00003b30: 656c 662e 5f63 6f6c 756d 6e5f 6f72 6465  elf._column_orde
+00003b40: 725b 636f 6c75 6d6e 5f69 6478 5d0a 2020  r[column_idx].  
+00003b50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00003b60: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
+00003b70: 6978 280a 2020 2020 2020 2020 2020 2020  ix(.            
+00003b80: 7365 6c66 2e5f 6d65 6173 7572 6573 2e70  self._measures.p
+00003b90: 6169 7277 6973 655f 745f 7374 6174 7328  airwise_t_stats(
+00003ba0: 6261 7365 5f63 6f6c 756d 6e5f 6964 7829  base_column_idx)
+00003bb0: 2e62 6c6f 636b 730a 2020 2020 2020 2020  .blocks.        
+00003bc0: 290a 0a20 2020 2064 6566 2070 6169 7277  )..    def pairw
+00003bd0: 6973 655f 7369 676e 6966 6963 616e 6365  ise_significance
+00003be0: 5f6d 6561 6e73 5f70 5f76 616c 7328 7365  _means_p_vals(se
+00003bf0: 6c66 2c20 636f 6c75 6d6e 5f69 6478 293a  lf, column_idx):
+00003c00: 0a20 2020 2020 2020 2022 2222 3244 206f  .        """2D o
+00003c10: 7074 696f 6e61 6c20 6e70 2e66 6c6f 6174  ptional np.float
+00003c20: 3634 206e 6461 7272 6179 206f 6620 6d65  64 ndarray of me
+00003c30: 616e 2064 6966 6665 7265 6e63 6520 705f  an difference p_
+00003c40: 7661 6c73 2066 6f72 2063 6f6c 756d 6e20  vals for column 
+00003c50: 6964 782e 0a0a 2020 2020 2020 2020 5261  idx...        Ra
+00003c60: 6973 6573 2060 5661 6c75 6545 7272 6f72  ises `ValueError
+00003c70: 2069 6620 7468 6520 6375 6265 2d72 6573   if the cube-res
+00003c80: 756c 7420 646f 6573 206e 6f74 2069 6e63  ult does not inc
+00003c90: 6c75 6465 2060 6d65 616e 6020 6375 6265  lude `mean` cube
+00003ca0: 2d6d 6561 7375 7265 732e 0a20 2020 2020  -measures..     
+00003cb0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
+00003cc0: 6173 655f 636f 6c75 6d6e 5f69 6478 203d  ase_column_idx =
+00003cd0: 2073 656c 662e 5f63 6f6c 756d 6e5f 6f72   self._column_or
+00003ce0: 6465 725b 636f 6c75 6d6e 5f69 6478 5d0a  der[column_idx].
+00003cf0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00003d00: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
+00003d10: 7472 6978 280a 2020 2020 2020 2020 2020  trix(.          
+00003d20: 2020 7365 6c66 2e5f 6d65 6173 7572 6573    self._measures
+00003d30: 2e70 6169 7277 6973 655f 7369 676e 6966  .pairwise_signif
+00003d40: 6963 616e 6365 5f6d 6561 6e73 5f70 5f76  icance_means_p_v
+00003d50: 616c 7328 6261 7365 5f63 6f6c 756d 6e5f  als(base_column_
+00003d60: 6964 7829 2e62 6c6f 636b 730a 2020 2020  idx).blocks.    
+00003d70: 2020 2020 290a 0a20 2020 2064 6566 2070      )..    def p
+00003d80: 6169 7277 6973 655f 7369 676e 6966 6963  airwise_signific
+00003d90: 616e 6365 5f6d 6561 6e73 5f74 5f73 7461  ance_means_t_sta
+00003da0: 7473 2873 656c 662c 2063 6f6c 756d 6e5f  ts(self, column_
+00003db0: 6964 7829 3a0a 2020 2020 2020 2020 2222  idx):.        ""
+00003dc0: 2232 4420 6f70 7469 6f6e 616c 206e 702e  "2D optional np.
+00003dd0: 666c 6f61 7436 3420 6e64 6172 7261 7920  float64 ndarray 
+00003de0: 6f66 206d 6561 6e20 6469 6666 6572 656e  of mean differen
+00003df0: 6365 2074 5f73 7461 7473 2066 6f72 2063  ce t_stats for c
+00003e00: 6f6c 756d 6e20 6964 782e 0a0a 2020 2020  olumn idx...    
+00003e10: 2020 2020 5261 6973 6573 2060 5661 6c75      Raises `Valu
+00003e20: 6545 7272 6f72 2069 6620 7468 6520 6375  eError if the cu
+00003e30: 6265 2d72 6573 756c 7420 646f 6573 206e  be-result does n
+00003e40: 6f74 2069 6e63 6c75 6465 2060 6d65 616e  ot include `mean
+00003e50: 6020 6375 6265 2d6d 6561 7375 7265 732e  ` cube-measures.
+00003e60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00003e70: 2020 2020 2062 6173 655f 636f 6c75 6d6e       base_column
+00003e80: 5f69 6478 203d 2073 656c 662e 5f63 6f6c  _idx = self._col
+00003e90: 756d 6e5f 6f72 6465 725b 636f 6c75 6d6e  umn_order[column
+00003ea0: 5f69 6478 5d0a 2020 2020 2020 2020 7265  _idx].        re
+00003eb0: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00003ec0: 626c 655f 6d61 7472 6978 280a 2020 2020  ble_matrix(.    
+00003ed0: 2020 2020 2020 2020 7365 6c66 2e5f 6d65          self._me
+00003ee0: 6173 7572 6573 2e70 6169 7277 6973 655f  asures.pairwise_
+00003ef0: 7369 676e 6966 6963 616e 6365 5f6d 6561  significance_mea
+00003f00: 6e73 5f74 5f73 7461 7473 2862 6173 655f  ns_t_stats(base_
+00003f10: 636f 6c75 6d6e 5f69 6478 292e 626c 6f63  column_idx).bloc
+00003f20: 6b73 0a20 2020 2020 2020 2029 0a0a 2020  ks.        )..  
+00003f30: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+00003f40: 2020 2020 6465 6620 706f 7075 6c61 7469      def populati
+00003f50: 6f6e 5f70 726f 706f 7274 696f 6e73 2873  on_proportions(s
+00003f60: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00003f70: 2232 4420 6e70 2e66 6c6f 6174 3634 206e  "2D np.float64 n
+00003f80: 6461 7272 6179 206f 6620 7072 6f70 6f72  darray of propor
+00003f90: 7469 6f6e 730a 0a20 2020 2020 2020 2054  tions..        T
+00003fa0: 6865 2070 726f 706f 7274 696f 6e20 7573  he proportion us
+00003fb0: 6564 2074 6f20 6361 6c63 756c 6174 6520  ed to calculate 
+00003fc0: 7072 6f70 6f72 7469 6f6e 2063 6f75 6e74  proportion count
+00003fd0: 7320 6465 7065 6e64 7320 6f6e 2074 6865  s depends on the
+00003fe0: 2064 696d 656e 7369 6f6e 0a20 2020 2020   dimension.     
+00003ff0: 2020 2074 7970 6573 2e0a 2020 2020 2020     types..      
+00004000: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00004010: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00004020: 626c 655f 6d61 7472 6978 2873 656c 662e  ble_matrix(self.
+00004030: 5f6d 6561 7375 7265 732e 706f 7075 6c61  _measures.popula
+00004040: 7469 6f6e 5f70 726f 706f 7274 696f 6e73  tion_proportions
+00004050: 2e62 6c6f 636b 7329 0a0a 2020 2020 406c  .blocks)..    @l
+00004060: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00004070: 6465 6620 706f 7075 6c61 7469 6f6e 5f73  def population_s
+00004080: 7464 5f65 7272 2873 656c 6629 3a0a 2020  td_err(self):.  
+00004090: 2020 2020 2020 2222 2232 4420 6e70 2e66        """2D np.f
+000040a0: 6c6f 6174 3634 206e 6461 7272 6179 206f  loat64 ndarray o
+000040b0: 6620 7374 616e 6461 7264 2065 7272 6f72  f standard error
+000040c0: 730a 0a20 2020 2020 2020 2054 6865 2070  s..        The p
+000040d0: 726f 706f 7274 696f 6e20 7573 6564 2074  roportion used t
+000040e0: 6f20 6361 6c63 756c 6174 6520 7072 6f70  o calculate prop
+000040f0: 6f72 7469 6f6e 2063 6f75 6e74 7320 6465  ortion counts de
+00004100: 7065 6e64 7320 6f6e 2074 6865 2064 696d  pends on the dim
+00004110: 656e 7369 6f6e 0a20 2020 2020 2020 2074  ension.        t
+00004120: 7970 6573 2e0a 2020 2020 2020 2020 2222  ypes..        ""
+00004130: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00004140: 2073 656c 662e 5f61 7373 656d 626c 655f   self._assemble_
+00004150: 6d61 7472 6978 2873 656c 662e 5f6d 6561  matrix(self._mea
+00004160: 7375 7265 732e 706f 7075 6c61 7469 6f6e  sures.population
+00004170: 5f73 7464 5f65 7272 2e62 6c6f 636b 7329  _std_err.blocks)
+00004180: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00004190: 7274 790a 2020 2020 6465 6620 7076 616c  rty.    def pval
+000041a0: 7565 7328 7365 6c66 293a 0a20 2020 2020  ues(self):.     
+000041b0: 2020 2022 2222 3244 206e 702e 666c 6f61     """2D np.floa
+000041c0: 7436 342f 6e70 2e6e 616e 206e 6461 7272  t64/np.nan ndarr
+000041d0: 6179 206f 6620 702d 7661 6c75 6520 666f  ay of p-value fo
+000041e0: 7220 6561 6368 206d 6174 7269 7820 6365  r each matrix ce
+000041f0: 6c6c 2e22 2222 0a20 2020 2020 2020 2072  ll.""".        r
+00004200: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+00004210: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
+00004220: 2e5f 6d65 6173 7572 6573 2e70 7661 6c75  ._measures.pvalu
+00004230: 6573 2e62 6c6f 636b 7329 0a0a 2020 2020  es.blocks)..    
+00004240: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00004250: 2020 6465 6620 726f 775f 636f 6d70 6172    def row_compar
+00004260: 6162 6c65 5f63 6f75 6e74 7328 7365 6c66  able_counts(self
+00004270: 293a 0a20 2020 2020 2020 2022 2222 3244  ):.        """2D
+00004280: 206e 702e 666c 6f61 7436 3420 6e64 6172   np.float64 ndar
+00004290: 7261 7920 6f66 2063 6f75 6e74 7320 636f  ray of counts co
+000042a0: 6d70 6172 6162 6c65 2069 6e20 7468 6520  mparable in the 
+000042b0: 726f 7720 6469 6d65 6e73 696f 6e2e 0a0a  row dimension...
+000042c0: 2020 2020 2020 2020 436f 6d70 6172 6162          Comparab
+000042d0: 6c65 2069 6e20 7468 6520 2272 6f77 2220  le in the "row" 
+000042e0: 6469 6d65 6e73 696f 6e20 6d65 616e 7320  dimension means 
+000042f0: 7468 6174 2069 7427 7320 6e6f 7420 6120  that it's not a 
+00004300: 726f 7720 7375 6274 6f74 616c 0a20 2020  row subtotal.   
+00004310: 2020 2020 2064 6966 6665 7265 6e63 6520       difference 
+00004320: 6265 6361 7573 6520 7468 6573 6520 6172  because these ar
+00004330: 6520 6e6f 7420 636f 6e73 6964 6572 6564  e not considered
+00004340: 2063 6f6d 7061 7261 626c 6520 7369 6e63   comparable sinc
+00004350: 6520 7468 6569 7220 6261 7365 730a 2020  e their bases.  
+00004360: 2020 2020 2020 6172 656e 2774 2074 6865        aren't the
+00004370: 2073 616d 652e 2054 6865 2076 616c 7565   same. The value
+00004380: 7320 616c 6f6e 6720 7468 6573 6520 7375  s along these su
+00004390: 6274 6f74 616c 2064 6966 6665 7265 6e63  btotal differenc
+000043a0: 6573 2061 7265 2064 6566 696e 6564 2061  es are defined a
+000043b0: 730a 2020 2020 2020 2020 6e70 2e6e 616e  s.        np.nan
+000043c0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+000043d0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000043e0: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
+000043f0: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
+00004400: 732e 726f 775f 636f 6d70 6172 6162 6c65  s.row_comparable
+00004410: 5f63 6f75 6e74 732e 626c 6f63 6b73 290a  _counts.blocks).
+00004420: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00004430: 7479 0a20 2020 2064 6566 2072 6f77 5f61  ty.    def row_a
+00004440: 6c69 6173 6573 2873 656c 6629 3a0a 2020  liases(self):.  
+00004450: 2020 2020 2020 2222 2231 4420 7374 7220        """1D str 
+00004460: 6e64 6172 7261 7920 6f66 2072 6f77 2061  ndarray of row a
+00004470: 6c69 6173 2066 6f72 2065 6163 6820 6d61  lias for each ma
+00004480: 7472 6978 2072 6f77 2e0a 0a20 2020 2020  trix row...     
+00004490: 2020 2054 6865 7365 2061 7265 2073 7569     These are sui
+000044a0: 7461 626c 6520 666f 7220 7573 6520 6173  table for use as
+000044b0: 2072 6f77 2068 6561 6469 6e67 733b 2061   row headings; a
+000044c0: 6c69 6173 2066 6f72 2073 7562 746f 7461  lias for subtota
+000044d0: 6c20 726f 7773 2061 7070 6561 7220 696e  l rows appear in
+000044e0: 0a20 2020 2020 2020 2074 6865 2073 6571  .        the seq
+000044f0: 7565 6e63 6520 616e 6420 616c 6961 7320  uence and alias 
+00004500: 6172 6520 6f72 6465 7265 6420 746f 2063  are ordered to c
+00004510: 6f72 7265 7370 6f6e 6420 7769 7468 2074  orrespond with t
+00004520: 6865 6972 2072 6573 7065 6374 6976 6520  heir respective 
+00004530: 6461 7461 0a20 2020 2020 2020 2072 6f77  data.        row
+00004540: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00004550: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00004560: 662e 5f64 696d 656e 7369 6f6e 5f61 6c69  f._dimension_ali
+00004570: 6173 6573 2873 656c 662e 5f72 6f77 735f  ases(self._rows_
+00004580: 6469 6d65 6e73 696f 6e2c 2073 656c 662e  dimension, self.
+00004590: 5f72 6f77 5f6f 7264 6572 290a 0a20 2020  _row_order)..   
+000045a0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+000045b0: 2020 2064 6566 2072 6f77 5f63 6f64 6573     def row_codes
+000045c0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000045d0: 2222 2231 4420 696e 7420 6e64 6172 7261  """1D int ndarra
+000045e0: 7920 6f66 2072 6f77 2063 6f64 6573 2066  y of row codes f
+000045f0: 6f72 2065 6163 6820 6d61 7472 6978 2072  or each matrix r
+00004600: 6f77 2e0a 0a20 2020 2020 2020 2054 6865  ow...        The
+00004610: 7365 2061 7265 2073 7569 7461 626c 6520  se are suitable 
+00004620: 666f 7220 7573 6520 6173 2072 6f77 2068  for use as row h
+00004630: 6561 6469 6e67 733b 2063 6f64 6573 2066  eadings; codes f
+00004640: 6f72 2073 7562 746f 7461 6c20 726f 7773  or subtotal rows
+00004650: 2061 7070 6561 7220 696e 0a20 2020 2020   appear in.     
+00004660: 2020 2074 6865 2073 6571 7565 6e63 6520     the sequence 
+00004670: 616e 6420 636f 6465 7320 6172 6520 6f72  and codes are or
+00004680: 6465 7265 6420 746f 2063 6f72 7265 7370  dered to corresp
+00004690: 6f6e 6420 7769 7468 2074 6865 6972 2072  ond with their r
+000046a0: 6573 7065 6374 6976 6520 6461 7461 0a20  espective data. 
+000046b0: 2020 2020 2020 2072 6f77 2e0a 2020 2020         row..    
+000046c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000046d0: 7265 7475 726e 2073 656c 662e 5f64 696d  return self._dim
+000046e0: 656e 7369 6f6e 5f63 6f64 6573 2873 656c  ension_codes(sel
+000046f0: 662e 5f72 6f77 735f 6469 6d65 6e73 696f  f._rows_dimensio
+00004700: 6e2c 2073 656c 662e 5f72 6f77 5f6f 7264  n, self._row_ord
+00004710: 6572 290a 0a20 2020 2040 6c61 7a79 7072  er)..    @lazypr
+00004720: 6f70 6572 7479 0a20 2020 2064 6566 2072  operty.    def r
+00004730: 6f77 5f6c 6162 656c 7328 7365 6c66 293a  ow_labels(self):
+00004740: 0a20 2020 2020 2020 2022 2222 3144 2073  .        """1D s
+00004750: 7472 206e 6461 7272 6179 206f 6620 726f  tr ndarray of ro
+00004760: 7720 6e61 6d65 2066 6f72 2065 6163 6820  w name for each 
+00004770: 6d61 7472 6978 2072 6f77 2e0a 0a20 2020  matrix row...   
+00004780: 2020 2020 2054 6865 7365 2061 7265 2073       These are s
+00004790: 7569 7461 626c 6520 666f 7220 7573 6520  uitable for use 
+000047a0: 6173 2072 6f77 2068 6561 6469 6e67 733b  as row headings;
+000047b0: 206c 6162 656c 7320 666f 7220 7375 6274   labels for subt
+000047c0: 6f74 616c 2072 6f77 7320 6170 7065 6172  otal rows appear
+000047d0: 2069 6e0a 2020 2020 2020 2020 7468 6520   in.        the 
+000047e0: 7365 7175 656e 6365 2061 6e64 206c 6162  sequence and lab
+000047f0: 656c 7320 6172 6520 6f72 6465 7265 6420  els are ordered 
+00004800: 746f 2063 6f72 7265 7370 6f6e 6420 7769  to correspond wi
+00004810: 7468 2074 6865 6972 2072 6573 7065 6374  th their respect
+00004820: 6976 6520 6461 7461 0a20 2020 2020 2020  ive data.       
+00004830: 2072 6f77 2e0a 2020 2020 2020 2020 2222   row..        ""
+00004840: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00004850: 2073 656c 662e 5f64 696d 656e 7369 6f6e   self._dimension
+00004860: 5f6c 6162 656c 7328 7365 6c66 2e5f 726f  _labels(self._ro
+00004870: 7773 5f64 696d 656e 7369 6f6e 2c20 7365  ws_dimension, se
+00004880: 6c66 2e5f 726f 775f 6f72 6465 7229 0a0a  lf._row_order)..
+00004890: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+000048a0: 790a 2020 2020 6465 6620 726f 775f 7072  y.    def row_pr
+000048b0: 6f70 6f72 7469 6f6e 7328 7365 6c66 293a  oportions(self):
+000048c0: 0a20 2020 2020 2020 2022 2222 3244 206e  .        """2D n
+000048d0: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
+000048e0: 7920 6f66 2072 6f77 2d70 726f 706f 7274  y of row-proport
+000048f0: 696f 6e20 666f 7220 6561 6368 206d 6174  ion for each mat
+00004900: 7269 7820 6365 6c6c 2e0a 0a20 2020 2020  rix cell...     
+00004910: 2020 2054 6869 7320 6973 2074 6865 2070     This is the p
+00004920: 726f 706f 7274 696f 6e20 6f66 2074 6865  roportion of the
+00004930: 2077 6569 6768 7465 642d 636f 756e 7420   weighted-count 
+00004940: 666f 7220 6365 6c6c 2074 6f20 7468 6520  for cell to the 
+00004950: 7765 6967 6874 6564 2d4e 206f 6620 7468  weighted-N of th
+00004960: 650a 2020 2020 2020 2020 726f 7720 7468  e.        row th
+00004970: 6520 6365 6c6c 2061 7070 6561 7273 2069  e cell appears i
+00004980: 6e20 2861 6b61 2e20 726f 772d 6d61 7267  n (aka. row-marg
+00004990: 696e 292e 2047 656e 6572 616c 6c79 2061  in). Generally a
+000049a0: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
+000049b0: 302e 3020 616e 640a 2020 2020 2020 2020  0.0 and.        
+000049c0: 312e 3020 696e 636c 7573 6976 652c 2062  1.0 inclusive, b
+000049d0: 7574 2073 7562 746f 7461 6c20 6469 6666  ut subtotal diff
+000049e0: 6572 656e 6365 7320 6361 6e20 6265 2062  erences can be b
+000049f0: 6574 7765 656e 202d 312e 3020 616e 6420  etween -1.0 and 
+00004a00: 312e 3020 696e 636c 7573 6976 652e 0a20  1.0 inclusive.. 
+00004a10: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00004a20: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00004a30: 6173 7365 6d62 6c65 5f6d 6174 7269 7828  assemble_matrix(
+00004a40: 7365 6c66 2e5f 6d65 6173 7572 6573 2e72  self._measures.r
+00004a50: 6f77 5f70 726f 706f 7274 696f 6e73 2e62  ow_proportions.b
+00004a60: 6c6f 636b 7329 0a0a 2020 2020 406c 617a  locks)..    @laz
+00004a70: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+00004a80: 6620 726f 775f 7072 6f70 6f72 7469 6f6e  f row_proportion
+00004a90: 5f76 6172 6961 6e63 6573 2873 656c 6629  _variances(self)
+00004aa0: 3a0a 2020 2020 2020 2020 2222 2232 4420  :.        """2D 
+00004ab0: 6e64 6172 7261 7920 6f66 206e 702e 666c  ndarray of np.fl
+00004ac0: 6f61 7436 3420 726f 772d 7072 6f70 6f72  oat64 row-propor
+00004ad0: 7469 6f6e 2076 6172 6961 6e63 6520 666f  tion variance fo
+00004ae0: 7220 6561 6368 206d 6174 7269 7820 6365  r each matrix ce
+00004af0: 6c6c 2e22 2222 0a20 2020 2020 2020 2072  ll.""".        r
+00004b00: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+00004b10: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
+00004b20: 2e5f 6d65 6173 7572 6573 2e72 6f77 5f70  ._measures.row_p
+00004b30: 726f 706f 7274 696f 6e5f 7661 7269 616e  roportion_varian
+00004b40: 6365 732e 626c 6f63 6b73 290a 0a20 2020  ces.blocks)..   
+00004b50: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00004b60: 2020 2064 6566 2072 6f77 5f73 6861 7265     def row_share
+00004b70: 5f73 756d 2873 656c 6629 3a0a 2020 2020  _sum(self):.    
+00004b80: 2020 2020 2222 2232 4420 6f70 7469 6f6e      """2D option
+00004b90: 616c 206e 702e 666c 6f61 7436 3420 6e64  al np.float64 nd
+00004ba0: 6172 7261 7920 6f66 2072 6f77 2073 6861  array of row sha
+00004bb0: 7265 206f 6620 7375 6d20 666f 7220 6561  re of sum for ea
+00004bc0: 6368 2063 656c 6c2e 0a0a 2020 2020 2020  ch cell...      
+00004bd0: 2020 5261 6973 6573 2060 5661 6c75 6545    Raises `ValueE
+00004be0: 7272 6f72 6020 6966 2074 6865 2063 7562  rror` if the cub
+00004bf0: 652d 7265 7375 6c74 2064 6f65 7320 6e6f  e-result does no
+00004c00: 7420 696e 636c 7564 6520 6120 7375 6d20  t include a sum 
+00004c10: 6375 6265 2d6d 6561 7375 7265 2e0a 2020  cube-measure..  
+00004c20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00004c30: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
+00004c40: 7373 656d 626c 655f 6d61 7472 6978 2873  ssemble_matrix(s
+00004c50: 656c 662e 5f6d 6561 7375 7265 732e 726f  elf._measures.ro
+00004c60: 775f 7368 6172 655f 7375 6d2e 626c 6f63  w_share_sum.bloc
+00004c70: 6b73 290a 0a20 2020 2040 6c61 7a79 7072  ks)..    @lazypr
+00004c80: 6f70 6572 7479 0a20 2020 2064 6566 2072  operty.    def r
+00004c90: 6f77 5f73 7464 5f65 7272 2873 656c 6629  ow_std_err(self)
+00004ca0: 3a0a 2020 2020 2020 2020 2222 2232 4420  :.        """2D 
+00004cb0: 6e70 2e66 6c6f 6174 3634 206e 6461 7272  np.float64 ndarr
+00004cc0: 6179 206f 6620 7374 642d 6572 726f 7220  ay of std-error 
+00004cd0: 6f66 2072 6f77 2d70 6572 6365 6e74 2066  of row-percent f
+00004ce0: 6f72 2065 6163 6820 6d61 7472 6978 2063  or each matrix c
+00004cf0: 656c 6c2e 2222 220a 2020 2020 2020 2020  ell.""".        
+00004d00: 7265 7475 726e 2073 656c 662e 5f61 7373  return self._ass
+00004d10: 656d 626c 655f 6d61 7472 6978 2873 656c  emble_matrix(sel
+00004d20: 662e 5f6d 6561 7375 7265 732e 726f 775f  f._measures.row_
+00004d30: 7374 645f 6572 722e 626c 6f63 6b73 290a  std_err.blocks).
+00004d40: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00004d50: 7479 0a20 2020 2064 6566 2072 6f77 5f75  ty.    def row_u
+00004d60: 6e77 6569 6768 7465 645f 6261 7365 7328  nweighted_bases(
+00004d70: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00004d80: 2222 3244 206e 702e 666c 6f61 7436 3420  ""2D np.float64 
+00004d90: 6e64 6172 7261 7920 6f66 2075 6e77 6569  ndarray of unwei
+00004da0: 6768 7465 6420 726f 772d 7072 6f70 6f72  ghted row-propor
+00004db0: 7469 6f6e 7320 6465 6e6f 6d69 6e61 746f  tions denominato
+00004dc0: 7220 7065 7220 6365 6c6c 2e22 2222 0a20  r per cell.""". 
+00004dd0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00004de0: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
+00004df0: 7269 7828 7365 6c66 2e5f 6d65 6173 7572  rix(self._measur
+00004e00: 6573 2e72 6f77 5f75 6e77 6569 6768 7465  es.row_unweighte
+00004e10: 645f 6261 7365 732e 626c 6f63 6b73 290a  d_bases.blocks).
+00004e20: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00004e30: 7479 0a20 2020 2064 6566 2072 6f77 5f77  ty.    def row_w
+00004e40: 6569 6768 7465 645f 6261 7365 7328 7365  eighted_bases(se
+00004e50: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00004e60: 3244 206e 702e 666c 6f61 7436 3420 6e64  2D np.float64 nd
+00004e70: 6172 7261 7920 6f66 2072 6f77 2d70 726f  array of row-pro
+00004e80: 706f 7274 696f 6e73 2064 656e 6f6d 696e  portions denomin
+00004e90: 6174 6f72 2066 6f72 2065 6163 6820 6365  ator for each ce
+00004ea0: 6c6c 2e22 2222 0a20 2020 2020 2020 2072  ll.""".        r
+00004eb0: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+00004ec0: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
+00004ed0: 2e5f 6d65 6173 7572 6573 2e72 6f77 5f77  ._measures.row_w
+00004ee0: 6569 6768 7465 645f 6261 7365 732e 626c  eighted_bases.bl
+00004ef0: 6f63 6b73 290a 0a20 2020 2040 6c61 7a79  ocks)..    @lazy
+00004f00: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00004f10: 2072 6f77 735f 6261 7365 2873 656c 6629   rows_base(self)
+00004f20: 3a0a 2020 2020 2020 2020 2222 2231 442f  :.        """1D/
+00004f30: 3244 206e 702e 666c 6f61 7436 3420 6e64  2D np.float64 nd
+00004f40: 6172 7261 7920 6f66 2075 6e77 6569 6768  array of unweigh
+00004f50: 7465 642d 4e20 666f 7220 6561 6368 2073  ted-N for each s
+00004f60: 6c69 6365 2072 6f77 2f63 656c 6c2e 2222  lice row/cell.""
+00004f70: 220a 2020 2020 2020 2020 2320 2d2d 2d20  ".        # --- 
+00004f80: 616e 2058 5f41 5252 4159 2073 6c69 6365  an X_ARRAY slice
+00004f90: 2070 726f 6475 6365 7320 6120 3244 2072   produces a 2D r
+00004fa0: 6f77 2d62 6173 6520 2865 6163 6820 6365  ow-base (each ce
+00004fb0: 6c6c 2068 6173 2069 7473 206f 776e 204e  ll has its own N
+00004fc0: 2920 2d2d 2d0a 2020 2020 2020 2020 2320  ) ---.        # 
+00004fd0: 2d2d 2d20 544f 444f 3a20 5368 6f75 6c64  --- TODO: Should
+00004fe0: 2072 6f77 735f 6261 7365 206f 6e6c 7920   rows_base only 
+00004ff0: 6265 2064 6566 696e 6564 2077 6865 6e20  be defined when 
+00005000: 6974 2773 2031 443f 2054 6869 7320 776f  it's 1D? This wo
+00005010: 756c 640a 2020 2020 2020 2020 2320 2d2d  uld.        # --
+00005020: 2d20 7265 7175 6972 6520 6368 616e 6765  - require change
+00005030: 7320 746f 2065 7870 6f72 7465 7220 746f  s to exporter to
+00005040: 2075 7365 2074 6865 2062 6173 6573 2074   use the bases t
+00005050: 6f20 6769 7665 2061 2022 726f 7773 5f62  o give a "rows_b
+00005060: 6173 655f 7261 6e67 6522 0a20 2020 2020  ase_range".     
+00005070: 2020 2069 6620 6e6f 7420 7365 6c66 2e5f     if not self._
+00005080: 6d65 6173 7572 6573 2e72 6f77 735f 756e  measures.rows_un
+00005090: 7765 6967 6874 6564 5f62 6173 652e 6973  weighted_base.is
+000050a0: 5f64 6566 696e 6564 3a0a 2020 2020 2020  _defined:.      
+000050b0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000050c0: 662e 726f 775f 756e 7765 6967 6874 6564  f.row_unweighted
+000050d0: 5f62 6173 6573 0a0a 2020 2020 2020 2020  _bases..        
+000050e0: 2320 2d2d 2d20 6f74 6865 7277 6973 6520  # --- otherwise 
+000050f0: 726f 7773 2d62 6173 6520 6973 2061 2076  rows-base is a v
+00005100: 6563 746f 7220 2d2d 2d0a 2020 2020 2020  ector ---.      
+00005110: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
+00005120: 7373 656d 626c 655f 6d61 7267 696e 616c  ssemble_marginal
+00005130: 2873 656c 662e 5f6d 6561 7375 7265 732e  (self._measures.
+00005140: 726f 7773 5f75 6e77 6569 6768 7465 645f  rows_unweighted_
+00005150: 6261 7365 290a 0a20 2020 2040 6c61 7a79  base)..    @lazy
+00005160: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00005170: 2072 6f77 735f 6469 6d65 6e73 696f 6e5f   rows_dimension_
+00005180: 6669 6c6c 7328 7365 6c66 293a 0a20 2020  fills(self):.   
+00005190: 2020 2020 2022 2222 7475 706c 6520 6f66       """tuple of
+000051a0: 2052 4742 2073 7472 206c 696b 6520 2223   RGB str like "#
+000051b0: 6465 6630 3332 2220 6669 6c6c 2063 6f6c  def032" fill col
+000051c0: 6f72 2066 6f72 2065 6163 6820 726f 7720  or for each row 
+000051d0: 696e 2073 6c69 6365 2e22 2222 0a20 2020  in slice.""".   
+000051e0: 2020 2020 2065 6c65 6d65 6e74 7320 3d20       elements = 
+000051f0: 7365 6c66 2e5f 726f 7773 5f64 696d 656e  self._rows_dimen
+00005200: 7369 6f6e 2e76 616c 6964 5f65 6c65 6d65  sion.valid_eleme
+00005210: 6e74 730a 2020 2020 2020 2020 7375 6274  nts.        subt
+00005220: 6f74 616c 7320 3d20 7365 6c66 2e5f 726f  otals = self._ro
+00005230: 7773 5f64 696d 656e 7369 6f6e 2e73 7562  ws_dimension.sub
+00005240: 746f 7461 6c73 0a20 2020 2020 2020 2072  totals.        r
+00005250: 6574 7572 6e20 7475 706c 6528 0a20 2020  eturn tuple(.   
+00005260: 2020 2020 2020 2020 2023 202d 2d2d 5375           # ---Su
+00005270: 6274 6f74 616c 7320 6861 7665 206e 6567  btotals have neg
+00005280: 6174 6976 6520 7365 7175 656e 7469 616c  ative sequential
+00005290: 2069 6e64 6578 6573 2028 2d31 2c20 2d32   indexes (-1, -2
+000052a0: 2c20 2e2e 2e2c 202d 6d29 2d2d 2d0a 2020  , ..., -m)---.  
+000052b0: 2020 2020 2020 2020 2020 2320 2d2d 2d54            # ---T
+000052c0: 6f20 696e 6465 7820 7468 656d 2070 726f  o index them pro
+000052d0: 7065 726c 792c 2077 6520 6e65 6564 2074  perly, we need t
+000052e0: 6f20 636f 6e76 6572 7420 7468 6f73 6520  o convert those 
+000052f0: 696e 6465 7865 7320 746f 2d2d 2d0a 2020  indexes to---.  
+00005300: 2020 2020 2020 2020 2020 2320 2d2d 2d7a            # ---z
+00005310: 6572 6f20 6261 7365 6420 706f 7369 7469  ero based positi
+00005320: 7665 2069 6e64 6578 6573 2028 302c 2031  ve indexes (0, 1
+00005330: 2c20 2e2e 2e20 6d20 2d20 3129 2069 2e65  , ... m - 1) i.e
+00005340: 2e20 2d69 6478 202d 2031 2d2d 2d0a 2020  . -idx - 1---.  
+00005350: 2020 2020 2020 2020 2020 2865 6c65 6d65            (eleme
+00005360: 6e74 735b 6964 785d 2e66 696c 6c20 6966  nts[idx].fill if
+00005370: 2069 6478 203e 3d20 3020 656c 7365 2073   idx >= 0 else s
+00005380: 7562 746f 7461 6c73 5b69 6478 202b 206c  ubtotals[idx + l
+00005390: 656e 2873 7562 746f 7461 6c73 295d 2e66  en(subtotals)].f
+000053a0: 696c 6c29 0a20 2020 2020 2020 2020 2020  ill).           
+000053b0: 2066 6f72 2069 6478 2069 6e20 7365 6c66   for idx in self
+000053c0: 2e5f 726f 775f 6f72 6465 720a 2020 2020  ._row_order.    
+000053d0: 2020 2020 290a 0a20 2020 2040 6c61 7a79      )..    @lazy
+000053e0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+000053f0: 2072 6f77 735f 6469 6d65 6e73 696f 6e5f   rows_dimension_
+00005400: 6e75 6d65 7269 635f 7661 6c75 6573 2873  numeric_values(s
+00005410: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00005420: 2231 4420 6f70 7469 6f6e 616c 206e 702e  "1D optional np.
+00005430: 696e 742f 666c 6f61 7436 3420 6e64 6172  int/float64 ndar
+00005440: 7261 7920 6f66 206e 756d 6572 6963 2d76  ray of numeric-v
+00005450: 616c 7565 2066 6f72 2065 6163 6820 726f  alue for each ro
+00005460: 7720 656c 656d 656e 742e 0a0a 2020 2020  w element...    
+00005470: 2020 2020 4120 7661 6c75 6520 6f66 206e      A value of n
+00005480: 702e 6e61 6e20 6170 7065 6172 7320 666f  p.nan appears fo
+00005490: 7220 6120 726f 7720 656c 656d 656e 7420  r a row element 
+000054a0: 7769 7468 6f75 7420 6120 6e75 6d65 7269  without a numeri
+000054b0: 632d 7661 6c75 652e 2041 6c6c 0a20 2020  c-value. All.   
+000054c0: 2020 2020 2073 7562 746f 7461 6c20 726f       subtotal ro
+000054d0: 7773 2068 6176 6520 6120 7661 6c75 6520  ws have a value 
+000054e0: 6f66 206e 702e 6e61 6e20 2873 7562 746f  of np.nan (subto
+000054f0: 7461 6c73 2068 6176 6520 6e6f 206e 756d  tals have no num
+00005500: 6572 6963 2076 616c 7565 292e 0a20 2020  eric value)..   
+00005510: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00005520: 2065 6c65 6d65 6e74 7320 3d20 7365 6c66   elements = self
+00005530: 2e5f 726f 7773 5f64 696d 656e 7369 6f6e  ._rows_dimension
+00005540: 2e76 616c 6964 5f65 6c65 6d65 6e74 730a  .valid_elements.
+00005550: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00005560: 702e 6172 7261 7928 0a20 2020 2020 2020  p.array(.       
+00005570: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00005580: 2020 2020 2020 2028 656c 656d 656e 7473         (elements
+00005590: 5b69 6478 5d2e 6e75 6d65 7269 635f 7661  [idx].numeric_va
+000055a0: 6c75 6520 6966 2069 6478 203e 3d20 3020  lue if idx >= 0 
+000055b0: 656c 7365 206e 702e 6e61 6e29 0a20 2020  else np.nan).   
+000055c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+000055d0: 2069 6478 2069 6e20 7365 6c66 2e5f 726f   idx in self._ro
+000055e0: 775f 6f72 6465 720a 2020 2020 2020 2020  w_order.        
+000055f0: 2020 2020 5d0a 2020 2020 2020 2020 290a      ].        ).
+00005600: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00005610: 7479 0a20 2020 2064 6566 2072 6f77 735f  ty.    def rows_
+00005620: 6d61 7267 696e 2873 656c 6629 3a0a 2020  margin(self):.  
+00005630: 2020 2020 2020 2222 2231 442f 3244 206e        """1D/2D n
+00005640: 702e 666c 6f61 7436 3420 6e64 6172 7261  p.float64 ndarra
+00005650: 7920 6f66 2077 6569 6768 7465 642d 4e20  y of weighted-N 
+00005660: 666f 7220 6561 6368 2063 6f6c 756d 6e20  for each column 
+00005670: 6f66 2074 6869 7320 736c 6963 652e 0a0a  of this slice...
+00005680: 2020 2020 2020 2020 5468 6973 2076 616c          This val
+00005690: 7565 2069 7320 6120 3244 2061 7272 6179  ue is a 2D array
+000056a0: 2069 6620 6f6e 6520 6f72 2062 6f74 6820   if one or both 
+000056b0: 6f66 2074 6865 2073 6c69 6365 2064 696d  of the slice dim
+000056c0: 656e 7369 6f6e 7320 6172 6520 4d52 2e20  ensions are MR. 
+000056d0: 5468 6973 2069 730a 2020 2020 2020 2020  This is.        
+000056e0: 6265 6361 7573 6520 6561 6368 2063 656c  because each cel
+000056f0: 6c20 6861 7320 6120 6469 7374 696e 6374  l has a distinct
+00005700: 206d 6172 6769 6e20 696e 2073 7563 6820   margin in such 
+00005710: 6120 736c 6963 652e 0a20 2020 2020 2020  a slice..       
+00005720: 2022 2222 0a20 2020 2020 2020 2023 202d   """.        # -
+00005730: 2d2d 2061 6e20 585f 4d52 2073 6c69 6365  -- an X_MR slice
+00005740: 2070 726f 6475 6365 7320 6120 3244 2072   produces a 2D r
+00005750: 6f77 732d 6d61 7267 696e 2028 6561 6368  ows-margin (each
+00005760: 2063 656c 6c20 6861 7320 6974 7320 6f77   cell has its ow
+00005770: 6e20 4e29 202d 2d2d 0a20 2020 2020 2020  n N) ---.       
+00005780: 2023 202d 2d2d 2054 6869 7320 6973 2072   # --- This is r
+00005790: 6561 6c6c 7920 6a75 7374 2061 6e6f 7468  eally just anoth
+000057a0: 6572 2077 6179 2074 6f20 6361 6c6c 2074  er way to call t
+000057b0: 6865 2072 6f77 5f77 6569 6768 7465 645f  he row_weighted_
+000057c0: 6261 7365 7320 2d2d 2d0a 2020 2020 2020  bases ---.      
+000057d0: 2020 2320 2d2d 2d20 544f 444f 3a20 5368    # --- TODO: Sh
+000057e0: 6f75 6c64 2072 6f77 735f 6d61 7267 696e  ould rows_margin
+000057f0: 206f 6e6c 7920 6265 2064 6566 696e 6564   only be defined
+00005800: 2077 6865 6e20 6974 2773 2031 443f 2054   when it's 1D? T
+00005810: 6869 7320 776f 756c 640a 2020 2020 2020  his would.      
+00005820: 2020 2320 2d2d 2d20 7265 7175 6972 6520    # --- require 
+00005830: 6368 616e 6765 7320 746f 2065 7870 6f72  changes to expor
+00005840: 7465 7220 746f 2075 7365 2074 6865 2062  ter to use the b
+00005850: 6173 6573 2074 6f20 6769 7665 2061 2022  ases to give a "
+00005860: 726f 7773 5f6d 6172 6769 6e5f 7261 6e67  rows_margin_rang
+00005870: 6522 0a20 2020 2020 2020 2069 6620 6e6f  e".        if no
+00005880: 7420 7365 6c66 2e5f 6d65 6173 7572 6573  t self._measures
+00005890: 2e72 6f77 735f 7765 6967 6874 6564 5f62  .rows_weighted_b
+000058a0: 6173 652e 6973 5f64 6566 696e 6564 3a0a  ase.is_defined:.
+000058b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000058c0: 726e 2073 656c 662e 726f 775f 7765 6967  rn self.row_weig
+000058d0: 6874 6564 5f62 6173 6573 0a0a 2020 2020  hted_bases..    
+000058e0: 2020 2020 2320 2d2d 2d20 6f74 6865 7277      # --- otherw
+000058f0: 6973 6520 726f 7773 2d6d 6172 6769 6e20  ise rows-margin 
+00005900: 6973 2061 2076 6563 746f 7220 2d2d 2d0a  is a vector ---.
+00005910: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00005920: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
+00005930: 7267 696e 616c 2873 656c 662e 5f6d 6561  rginal(self._mea
+00005940: 7375 7265 732e 726f 7773 5f77 6569 6768  sures.rows_weigh
+00005950: 7465 645f 6261 7365 290a 0a20 2020 2040  ted_base)..    @
+00005960: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+00005970: 2064 6566 2072 6f77 735f 6d61 7267 696e   def rows_margin
+00005980: 5f70 726f 706f 7274 696f 6e28 7365 6c66  _proportion(self
+00005990: 293a 0a20 2020 2020 2020 2022 2222 3144  ):.        """1D
+000059a0: 2f32 4420 6e70 2e66 6c6f 6174 3634 206e  /2D np.float64 n
+000059b0: 6461 7272 6179 206f 6620 7765 6967 6874  darray of weight
+000059c0: 6564 2d70 726f 706f 7274 696f 6e20 666f  ed-proportion fo
+000059d0: 7220 6561 6368 2073 6c69 6365 2072 6f77  r each slice row
+000059e0: 2f63 656c 6c2e 2222 220a 2020 2020 2020  /cell.""".      
+000059f0: 2020 2320 2d2d 2d20 616e 2058 5f4d 5220    # --- an X_MR 
+00005a00: 736c 6963 6520 7072 6f64 7563 6573 2061  slice produces a
+00005a10: 2032 4420 726f 7773 2d6d 6172 6769 6e20   2D rows-margin 
+00005a20: 2865 6163 6820 6365 6c6c 2068 6173 2069  (each cell has i
+00005a30: 7473 206f 776e 204e 2920 2d2d 2d0a 2020  ts own N) ---.  
+00005a40: 2020 2020 2020 2320 2d2d 2d20 544f 444f        # --- TODO
+00005a50: 3a20 5368 6f75 6c64 2072 6f77 735f 6d61  : Should rows_ma
+00005a60: 7267 696e 5f70 726f 706f 7274 696f 6e20  rgin_proportion 
+00005a70: 6f6e 6c79 2062 6520 6465 6669 6e65 6420  only be defined 
+00005a80: 7768 656e 2069 7427 7320 3144 3f20 5468  when it's 1D? Th
+00005a90: 6973 2077 6f75 6c64 0a20 2020 2020 2020  is would.       
+00005aa0: 2023 202d 2d2d 2072 6571 7569 7265 2063   # --- require c
+00005ab0: 6861 6e67 6573 2074 6f20 6578 706f 7274  hanges to export
+00005ac0: 6572 2074 6f20 7573 6520 7468 6520 6261  er to use the ba
+00005ad0: 7365 7320 746f 2067 6976 6520 6120 2272  ses to give a "r
+00005ae0: 6f77 735f 6d61 7267 696e 5f72 616e 6765  ows_margin_range
+00005af0: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+00005b00: 2073 656c 662e 5f6d 6561 7375 7265 732e   self._measures.
+00005b10: 726f 7773 5f74 6162 6c65 5f70 726f 706f  rows_table_propo
+00005b20: 7274 696f 6e2e 6973 5f64 6566 696e 6564  rtion.is_defined
+00005b30: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00005b40: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00005b50: 626c 655f 6d61 7472 6978 280a 2020 2020  ble_matrix(.    
+00005b60: 2020 2020 2020 2020 2020 2020 5375 6d53              SumS
+00005b70: 7562 746f 7461 6c73 2e62 6c6f 636b 7328  ubtotals.blocks(
+00005b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005b90: 2020 2020 2073 656c 662e 726f 7773 5f6d       self.rows_m
+00005ba0: 6172 6769 6e20 2f20 7365 6c66 2e74 6162  argin / self.tab
+00005bb0: 6c65 5f77 6569 6768 7465 645f 6261 7365  le_weighted_base
+00005bc0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00005bd0: 2020 2020 2020 2073 656c 662e 5f64 696d         self._dim
+00005be0: 656e 7369 6f6e 732c 0a20 2020 2020 2020  ensions,.       
+00005bf0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00005c00: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00005c10: 2020 2320 2d2d 2d20 6f74 6865 7277 6973    # --- otherwis
+00005c20: 6520 726f 7773 2d6d 6172 6769 6e20 6973  e rows-margin is
+00005c30: 2061 2076 6563 746f 7220 2d2d 2d0a 2020   a vector ---.  
+00005c40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00005c50: 662e 5f61 7373 656d 626c 655f 6d61 7267  f._assemble_marg
+00005c60: 696e 616c 2873 656c 662e 5f6d 6561 7375  inal(self._measu
+00005c70: 7265 732e 726f 7773 5f74 6162 6c65 5f70  res.rows_table_p
+00005c80: 726f 706f 7274 696f 6e29 0a0a 2020 2020  roportion)..    
+00005c90: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00005ca0: 2020 6465 6620 726f 7773 5f73 6361 6c65    def rows_scale
+00005cb0: 5f6d 6561 6e28 7365 6c66 293a 0a20 2020  _mean(self):.   
+00005cc0: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
+00005cd0: 2031 4420 526f 7720 7363 616c 6520 6d65   1D Row scale me
+00005ce0: 6469 616e 206d 6172 6769 6e61 6c20 666f  dian marginal fo
+00005cf0: 7220 7468 6973 2063 7562 652d 7265 7375  r this cube-resu
+00005d00: 6c74 2222 220a 2020 2020 2020 2020 7265  lt""".        re
+00005d10: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00005d20: 626c 655f 6d61 7267 696e 616c 2873 656c  ble_marginal(sel
+00005d30: 662e 5f6d 6561 7375 7265 732e 726f 7773  f._measures.rows
+00005d40: 5f73 6361 6c65 5f6d 6561 6e29 0a0a 2020  _scale_mean)..  
+00005d50: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+00005d60: 2020 2020 6465 6620 726f 7773 5f73 6361      def rows_sca
+00005d70: 6c65 5f6d 6561 6e5f 7374 6464 6576 2873  le_mean_stddev(s
+00005d80: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00005d90: 224f 7074 696f 6e61 6c20 3144 2072 6f77  "Optional 1D row
+00005da0: 2073 6361 6c65 206d 6561 6e20 7374 6420   scale mean std 
+00005db0: 6465 7620 6d61 7267 696e 616c 2066 6f72  dev marginal for
+00005dc0: 2074 6869 7320 6375 6265 2d72 6573 756c   this cube-resul
+00005dd0: 7422 2222 0a20 2020 2020 2020 2072 6574  t""".        ret
+00005de0: 7572 6e20 7365 6c66 2e5f 6173 7365 6d62  urn self._assemb
+00005df0: 6c65 5f6d 6172 6769 6e61 6c28 7365 6c66  le_marginal(self
+00005e00: 2e5f 6d65 6173 7572 6573 2e72 6f77 735f  ._measures.rows_
+00005e10: 7363 616c 655f 6d65 616e 5f73 7464 6465  scale_mean_stdde
+00005e20: 7629 0a0a 2020 2020 406c 617a 7970 726f  v)..    @lazypro
+00005e30: 7065 7274 790a 2020 2020 6465 6620 726f  perty.    def ro
+00005e40: 7773 5f73 6361 6c65 5f6d 6561 6e5f 7374  ws_scale_mean_st
+00005e50: 6465 7272 2873 656c 6629 3a0a 2020 2020  derr(self):.    
+00005e60: 2020 2020 2222 224f 7074 696f 6e61 6c20      """Optional 
+00005e70: 3144 2072 6f77 2073 6361 6c65 206d 6561  1D row scale mea
+00005e80: 6e20 7374 6420 6465 7620 6d61 7267 696e  n std dev margin
+00005e90: 616c 2066 6f72 2074 6869 7320 6375 6265  al for this cube
+00005ea0: 2d72 6573 756c 7422 2222 0a20 2020 2020  -result""".     
+00005eb0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00005ec0: 6173 7365 6d62 6c65 5f6d 6172 6769 6e61  assemble_margina
+00005ed0: 6c28 7365 6c66 2e5f 6d65 6173 7572 6573  l(self._measures
+00005ee0: 2e72 6f77 735f 7363 616c 655f 6d65 616e  .rows_scale_mean
+00005ef0: 5f73 7464 6572 7229 0a0a 2020 2020 406c  _stderr)..    @l
+00005f00: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+00005f10: 6465 6620 726f 7773 5f73 6361 6c65 5f6d  def rows_scale_m
+00005f20: 6564 6961 6e28 7365 6c66 293a 0a20 2020  edian(self):.   
+00005f30: 2020 2020 2022 2222 4f70 7469 6f6e 616c       """Optional
+00005f40: 2031 4420 526f 7720 7363 616c 6520 6d65   1D Row scale me
+00005f50: 6469 616e 206d 6172 6769 6e61 6c20 666f  dian marginal fo
+00005f60: 7220 7468 6973 2063 7562 652d 7265 7375  r this cube-resu
+00005f70: 6c74 2222 220a 2020 2020 2020 2020 7265  lt""".        re
+00005f80: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00005f90: 626c 655f 6d61 7267 696e 616c 2873 656c  ble_marginal(sel
+00005fa0: 662e 5f6d 6561 7375 7265 732e 726f 7773  f._measures.rows
+00005fb0: 5f73 6361 6c65 5f6d 6564 6961 6e29 0a0a  _scale_median)..
+00005fc0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+00005fd0: 790a 2020 2020 6465 6620 736d 6f6f 7468  y.    def smooth
+00005fe0: 6564 5f63 6f6c 756d 6e5f 696e 6465 7828  ed_column_index(
+00005ff0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00006000: 2222 3244 206e 702e 666c 6f61 7436 3420  ""2D np.float64 
+00006010: 6e64 6172 7261 7920 6f66 2073 6d6f 6f74  ndarray of smoot
+00006020: 6865 6420 636f 6c75 6d6e 2d69 6e64 6578  hed column-index
+00006030: 2066 6f72 2065 6163 6820 7461 626c 6520   for each table 
+00006040: 6365 6c6c 2e22 2222 0a20 2020 2020 2020  cell.""".       
+00006050: 2072 6574 7572 6e20 7365 6c66 2e5f 6173   return self._as
+00006060: 7365 6d62 6c65 5f6d 6174 7269 7828 7365  semble_matrix(se
+00006070: 6c66 2e5f 6d65 6173 7572 6573 2e73 6d6f  lf._measures.smo
+00006080: 6f74 6865 645f 636f 6c75 6d6e 5f69 6e64  othed_column_ind
+00006090: 6578 2e62 6c6f 636b 7329 0a0a 2020 2020  ex.blocks)..    
+000060a0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+000060b0: 2020 6465 6620 736d 6f6f 7468 6564 5f63    def smoothed_c
+000060c0: 6f6c 756d 6e5f 7072 6f70 6f72 7469 6f6e  olumn_proportion
+000060d0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+000060e0: 2022 2222 3244 206e 702e 666c 6f61 7436   """2D np.float6
+000060f0: 3420 6e64 6172 7261 7920 6f66 2073 6d6f  4 ndarray of smo
+00006100: 6f74 6865 6420 636f 6c75 6d6e 2d70 726f  othed column-pro
+00006110: 706f 7274 696f 6e20 666f 7220 6561 6368  portion for each
+00006120: 206d 6174 7269 7820 6365 6c6c 2e0a 0a20   matrix cell... 
+00006130: 2020 2020 2020 2054 6869 7320 6973 2074         This is t
+00006140: 6865 2070 726f 706f 7274 696f 6e20 6f66  he proportion of
+00006150: 2074 6865 2077 6569 6768 7465 642d 636f   the weighted-co
+00006160: 756e 7420 666f 7220 6365 6c6c 2074 6f20  unt for cell to 
+00006170: 7468 6520 7765 6967 6874 6564 2d4e 206f  the weighted-N o
+00006180: 6620 7468 650a 2020 2020 2020 2020 636f  f the.        co
+00006190: 6c75 6d6e 2074 6865 2063 656c 6c20 6170  lumn the cell ap
+000061a0: 7065 6172 7320 696e 2028 616b 612e 2063  pears in (aka. c
+000061b0: 6f6c 756d 6e2d 6d61 7267 696e 292e 2047  olumn-margin). G
+000061c0: 656e 6572 616c 6c79 2061 206e 756d 6265  enerally a numbe
+000061d0: 7220 6265 7477 6565 6e20 302e 300a 2020  r between 0.0.  
+000061e0: 2020 2020 2020 616e 6420 312e 3020 696e        and 1.0 in
+000061f0: 636c 7573 6976 652c 2062 7574 2073 7562  clusive, but sub
+00006200: 746f 7461 6c20 6469 6666 6572 656e 6365  total difference
+00006210: 7320 6361 6e20 6265 2062 6574 7765 656e  s can be between
+00006220: 202d 312e 3020 616e 6420 312e 300a 2020   -1.0 and 1.0.  
+00006230: 2020 2020 2020 696e 636c 7573 6976 652e        inclusive.
+00006240: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00006250: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00006260: 2e5f 6173 7365 6d62 6c65 5f6d 6174 7269  ._assemble_matri
+00006270: 7828 7365 6c66 2e5f 6d65 6173 7572 6573  x(self._measures
+00006280: 2e73 6d6f 6f74 6865 645f 636f 6c75 6d6e  .smoothed_column
+00006290: 5f70 726f 706f 7274 696f 6e73 2e62 6c6f  _proportions.blo
+000062a0: 636b 7329 0a0a 2020 2020 406c 617a 7970  cks)..    @lazyp
+000062b0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+000062c0: 736d 6f6f 7468 6564 5f63 6f6c 756d 6e73  smoothed_columns
+000062d0: 5f73 6361 6c65 5f6d 6561 6e28 7365 6c66  _scale_mean(self
+000062e0: 293a 0a20 2020 2020 2020 2022 2222 4f70  ):.        """Op
+000062f0: 7469 6f6e 616c 2031 4420 736d 6f6f 7468  tional 1D smooth
+00006300: 6564 2063 6f6c 756d 6e20 7363 616c 6520  ed column scale 
+00006310: 6d65 616e 206d 6172 6769 6e61 6c20 666f  mean marginal fo
+00006320: 7220 7468 6973 2063 7562 652d 7265 7375  r this cube-resu
+00006330: 6c74 2222 220a 2020 2020 2020 2020 7265  lt""".        re
+00006340: 7475 726e 2073 656c 662e 5f61 7373 656d  turn self._assem
+00006350: 626c 655f 6d61 7267 696e 616c 2873 656c  ble_marginal(sel
+00006360: 662e 5f6d 6561 7375 7265 732e 736d 6f6f  f._measures.smoo
+00006370: 7468 6564 5f63 6f6c 756d 6e73 5f73 6361  thed_columns_sca
+00006380: 6c65 5f6d 6561 6e29 0a0a 2020 2020 406c  le_mean)..    @l
+00006390: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+000063a0: 6465 6620 736d 6f6f 7468 6564 5f6d 6561  def smoothed_mea
+000063b0: 6e73 2873 656c 6629 3a0a 2020 2020 2020  ns(self):.      
+000063c0: 2020 2222 2232 4420 6f70 7469 6f6e 616c    """2D optional
+000063d0: 206e 702e 666c 6f61 7436 3420 6e64 6172   np.float64 ndar
+000063e0: 7261 7920 6f66 2073 6d6f 6f74 6865 6420  ray of smoothed 
+000063f0: 6d65 616e 2066 6f72 2065 6163 6820 6365  mean for each ce
+00006400: 6c6c 2e0a 0a20 2020 2020 2020 2052 6169  ll...        Rai
+00006410: 7365 7320 6056 616c 7565 4572 726f 7260  ses `ValueError`
+00006420: 2069 6620 7468 6520 6375 6265 2d72 6573   if the cube-res
+00006430: 756c 7420 646f 6573 206e 6f74 2069 6e63  ult does not inc
+00006440: 6c75 6465 2061 206d 6561 6e73 2063 7562  lude a means cub
+00006450: 652d 6d65 6173 7572 652e 0a20 2020 2020  e-measure..     
+00006460: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00006470: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+00006480: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
+00006490: 2e5f 6d65 6173 7572 6573 2e73 6d6f 6f74  ._measures.smoot
+000064a0: 6865 645f 6d65 616e 732e 626c 6f63 6b73  hed_means.blocks
+000064b0: 290a 0a20 2020 2040 6c61 7a79 7072 6f70  )..    @lazyprop
+000064c0: 6572 7479 0a20 2020 2064 6566 2073 756d  erty.    def sum
+000064d0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+000064e0: 2022 2222 3244 206f 7074 696f 6e61 6c20   """2D optional 
+000064f0: 6e70 2e66 6c6f 6174 3634 206e 6461 7272  np.float64 ndarr
+00006500: 6179 206f 6620 7375 6d20 666f 7220 6561  ay of sum for ea
+00006510: 6368 2063 656c 6c2e 0a0a 2020 2020 2020  ch cell...      
+00006520: 2020 5261 6973 6573 2060 5661 6c75 6545    Raises `ValueE
+00006530: 7272 6f72 6020 6966 2074 6865 2063 7562  rror` if the cub
+00006540: 652d 7265 7375 6c74 2064 6f65 7320 6e6f  e-result does no
+00006550: 7420 696e 636c 7564 6520 6120 7375 6d20  t include a sum 
+00006560: 6375 6265 2d6d 6561 7375 7265 2e0a 2020  cube-measure..  
+00006570: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00006580: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
+00006590: 7373 656d 626c 655f 6d61 7472 6978 2873  ssemble_matrix(s
+000065a0: 656c 662e 5f6d 6561 7375 7265 732e 7375  elf._measures.su
+000065b0: 6d73 2e62 6c6f 636b 7329 0a0a 2020 2020  ms.blocks)..    
+000065c0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+000065d0: 2020 6465 6620 7374 6464 6576 2873 656c    def stddev(sel
+000065e0: 6629 3a0a 2020 2020 2020 2020 2222 2232  f):.        """2
+000065f0: 4420 6f70 7469 6f6e 616c 206e 702e 666c  D optional np.fl
+00006600: 6f61 7436 3420 6e64 6172 7261 7920 6f66  oat64 ndarray of
+00006610: 2073 7464 6465 7620 666f 7220 6561 6368   stddev for each
+00006620: 2063 656c 6c2e 0a0a 2020 2020 2020 2020   cell...        
+00006630: 5261 6973 6573 2060 5661 6c75 6545 7272  Raises `ValueErr
+00006640: 6f72 6020 6966 2074 6865 2063 7562 652d  or` if the cube-
+00006650: 7265 7375 6c74 2064 6f65 7320 6e6f 7420  result does not 
+00006660: 696e 636c 7564 6520 6120 7374 6464 6576  include a stddev
+00006670: 2063 7562 652d 6d65 6173 7572 652e 0a20   cube-measure.. 
+00006680: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00006690: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+000066a0: 6173 7365 6d62 6c65 5f6d 6174 7269 7828  assemble_matrix(
+000066b0: 7365 6c66 2e5f 6d65 6173 7572 6573 2e73  self._measures.s
+000066c0: 7464 6465 762e 626c 6f63 6b73 290a 0a20  tddev.blocks).. 
+000066d0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+000066e0: 0a20 2020 2064 6566 2074 6162 6c65 5f62  .    def table_b
+000066f0: 6173 6528 7365 6c66 293a 0a20 2020 2020  ase(self):.     
+00006700: 2020 2022 2222 5363 616c 6172 2c20 3144     """Scalar, 1D
+00006710: 2c20 6f72 2032 4420 6e64 6172 7261 7920  , or 2D ndarray 
+00006720: 6f66 206e 702e 666c 6f61 7436 3420 756e  of np.float64 un
+00006730: 7765 6967 6874 6564 2d4e 2066 6f72 2074  weighted-N for t
+00006740: 6869 7320 736c 6963 652e 0a0a 2020 2020  his slice...    
+00006750: 2020 2020 5468 6973 2076 616c 7565 2068      This value h
+00006760: 6173 2066 6f75 7220 6469 7374 696e 6374  as four distinct
+00006770: 2066 6f72 6d73 2c20 6465 7065 6e64 696e   forms, dependin
+00006780: 6720 6f6e 2074 6865 2073 6c69 6365 2064  g on the slice d
+00006790: 696d 656e 7369 6f6e 733a 0a0a 2020 2020  imensions:..    
+000067a0: 2020 2020 2020 2020 2a20 4152 525f 585f          * ARR_X_
+000067b0: 4152 5220 2d20 3244 206e 6461 7272 6179  ARR - 2D ndarray
+000067c0: 2077 6974 6820 6120 6469 7374 696e 6374   with a distinct
+000067d0: 2074 6162 6c65 2d62 6173 6520 7661 6c75   table-base valu
+000067e0: 6520 7065 7220 6365 6c6c 2e0a 2020 2020  e per cell..    
+000067f0: 2020 2020 2020 2020 2a20 4152 525f 5820          * ARR_X 
+00006800: 2d20 3144 206e 6461 7272 6179 206f 6620  - 1D ndarray of 
+00006810: 7661 6c75 6520 7065 7220 2a72 6f77 2a20  value per *row* 
+00006820: 7768 656e 206f 6e6c 7920 726f 7773 2064  when only rows d
+00006830: 696d 656e 7369 6f6e 2069 7320 4152 522e  imension is ARR.
+00006840: 0a20 2020 2020 2020 2020 2020 202a 2058  .            * X
+00006850: 5f41 5252 202d 2031 4420 6e64 6172 7261  _ARR - 1D ndarra
+00006860: 7920 6f66 2076 616c 7565 2070 6572 202a  y of value per *
+00006870: 636f 6c75 6d6e 2a20 7768 656e 206f 6e6c  column* when onl
+00006880: 7920 636f 6c75 6d6e 7320 6469 6d65 6e73  y columns dimens
+00006890: 696f 6e20 6973 2041 5252 0a20 2020 2020  ion is ARR.     
+000068a0: 2020 2020 2020 202a 2043 4154 5f58 5f43         * CAT_X_C
+000068b0: 4154 202d 2073 6361 6c61 7220 666c 6f61  AT - scalar floa
+000068c0: 7420 7661 6c75 6520 7768 656e 2073 6c69  t value when sli
+000068d0: 6365 2068 6173 206e 6f20 4d52 2064 696d  ce has no MR dim
+000068e0: 656e 7369 6f6e 2e0a 0a20 2020 2020 2020  ension...       
+000068f0: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+00006900: 7365 6c66 2e5f 6d65 6173 7572 6573 2e74  self._measures.t
+00006910: 6162 6c65 5f75 6e77 6569 6768 7465 645f  able_unweighted_
+00006920: 6261 7365 2e69 735f 6465 6669 6e65 643a  base.is_defined:
+00006930: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00006940: 7572 6e20 7365 6c66 2e5f 6d65 6173 7572  urn self._measur
+00006950: 6573 2e74 6162 6c65 5f75 6e77 6569 6768  es.table_unweigh
+00006960: 7465 645f 6261 7365 2e76 616c 7565 0a20  ted_base.value. 
+00006970: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00006980: 6d65 6173 7572 6573 2e63 6f6c 756d 6e73  measures.columns
+00006990: 5f74 6162 6c65 5f75 6e77 6569 6768 7465  _table_unweighte
+000069a0: 645f 6261 7365 2e69 735f 6465 6669 6e65  d_base.is_define
+000069b0: 643a 0a20 2020 2020 2020 2020 2020 2072  d:.            r
+000069c0: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+000069d0: 6d62 6c65 5f6d 6172 6769 6e61 6c28 7365  mble_marginal(se
+000069e0: 6c66 2e5f 6d65 6173 7572 6573 2e63 6f6c  lf._measures.col
+000069f0: 756d 6e73 5f74 6162 6c65 5f75 6e77 6569  umns_table_unwei
+00006a00: 6768 7465 645f 6261 7365 290a 2020 2020  ghted_base).    
+00006a10: 2020 2020 6966 2073 656c 662e 5f6d 6561      if self._mea
+00006a20: 7375 7265 732e 726f 7773 5f74 6162 6c65  sures.rows_table
+00006a30: 5f75 6e77 6569 6768 7465 645f 6261 7365  _unweighted_base
+00006a40: 2e69 735f 6465 6669 6e65 643a 0a20 2020  .is_defined:.   
+00006a50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00006a60: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
+00006a70: 6172 6769 6e61 6c28 7365 6c66 2e5f 6d65  arginal(self._me
+00006a80: 6173 7572 6573 2e72 6f77 735f 7461 626c  asures.rows_tabl
+00006a90: 655f 756e 7765 6967 6874 6564 5f62 6173  e_unweighted_bas
+00006aa0: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
+00006ab0: 6e20 7365 6c66 2e74 6162 6c65 5f75 6e77  n self.table_unw
+00006ac0: 6569 6768 7465 645f 6261 7365 730a 0a20  eighted_bases.. 
+00006ad0: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+00006ae0: 0a20 2020 2064 6566 2074 6162 6c65 5f62  .    def table_b
+00006af0: 6173 655f 7261 6e67 6528 7365 6c66 293a  ase_range(self):
+00006b00: 0a20 2020 2020 2020 2022 2222 5b6d 696e  .        """[min
+00006b10: 2c20 6d61 785d 206e 702e 666c 6f61 7436  , max] np.float6
+00006b20: 3420 6e64 6172 7261 7920 7261 6e67 6520  4 ndarray range 
+00006b30: 6f66 2074 6865 2074 6162 6c65 5f6d 6172  of the table_mar
+00006b40: 6769 6e20 2874 6162 6c65 2d77 6569 6768  gin (table-weigh
+00006b50: 7465 642d 6261 7365 290a 0a20 2020 2020  ted-base)..     
+00006b60: 2020 2041 2043 4154 5f58 5f43 4154 2068     A CAT_X_CAT h
+00006b70: 6173 2061 2073 6361 6c61 7220 666f 7220  as a scalar for 
+00006b80: 616c 6c20 7461 626c 652d 7765 6967 6874  all table-weight
+00006b90: 6564 2d62 6173 6573 2c20 6275 7420 6172  ed-bases, but ar
+00006ba0: 7261 7973 2068 6176 6520 6d6f 7265 2074  rays have more t
+00006bb0: 6861 6e0a 2020 2020 2020 2020 6f6e 6520  han.        one 
+00006bc0: 7461 626c 652d 7765 6967 6874 6564 2d62  table-weighted-b
+00006bd0: 6173 652e 2054 6869 7320 636f 6c6c 6170  ase. This collap
+00006be0: 7365 7320 616c 6c20 7468 6520 7661 6c75  ses all the valu
+00006bf0: 6573 2074 6865 6d20 746f 2074 6865 2072  es them to the r
+00006c00: 616e 6765 2c20 616e 640a 2020 2020 2020  ange, and.      
+00006c10: 2020 6974 2069 7320 2275 6e70 7275 6e65    it is "unprune
+00006c20: 6422 2c20 6d65 616e 696e 6720 7468 6174  d", meaning that
+00006c30: 2069 7420 6973 2063 616c 6375 6c61 7465   it is calculate
+00006c40: 6420 6265 666f 7265 2061 6e79 2068 6964  d before any hid
+00006c50: 696e 6720 6f72 2072 656d 6f76 696e 670a  ing or removing.
+00006c60: 2020 2020 2020 2020 6f66 2065 6d70 7479          of empty
+00006c70: 2072 6f77 732f 636f 6c75 6d6e 732e 0a20   rows/columns.. 
+00006c80: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00006c90: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00006ca0: 6d65 6173 7572 6573 2e74 6162 6c65 5f75  measures.table_u
+00006cb0: 6e77 6569 6768 7465 645f 6261 7365 735f  nweighted_bases_
+00006cc0: 7261 6e67 652e 7661 6c75 650a 0a20 2020  range.value..   
+00006cd0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00006ce0: 2020 2064 6566 2074 6162 6c65 5f6d 6172     def table_mar
+00006cf0: 6769 6e28 7365 6c66 293a 0a20 2020 2020  gin(self):.     
+00006d00: 2020 2022 2222 5363 616c 6172 2c20 3144     """Scalar, 1D
+00006d10: 2c20 6f72 2032 4420 6e64 6172 7261 7920  , or 2D ndarray 
+00006d20: 6f66 206e 702e 666c 6f61 7436 3420 7765  of np.float64 we
+00006d30: 6967 6874 6564 2d4e 2066 6f72 2074 6869  ighted-N for thi
+00006d40: 7320 736c 6963 652e 0a0a 2020 2020 2020  s slice...      
+00006d50: 2020 5468 6973 2076 616c 7565 2068 6173    This value has
+00006d60: 2066 6f75 7220 6469 7374 696e 6374 2066   four distinct f
+00006d70: 6f72 6d73 2c20 6465 7065 6e64 696e 6720  orms, depending 
+00006d80: 6f6e 2074 6865 2073 6c69 6365 2064 696d  on the slice dim
+00006d90: 656e 7369 6f6e 733a 0a0a 2020 2020 2020  ensions:..      
+00006da0: 2020 2020 2020 2a20 4341 545f 585f 4341        * CAT_X_CA
+00006db0: 5420 2d20 7363 616c 6172 2066 6c6f 6174  T - scalar float
+00006dc0: 2076 616c 7565 2077 6865 6e20 736c 6963   value when slic
+00006dd0: 6520 6861 7320 6e6f 2041 5252 4159 2064  e has no ARRAY d
+00006de0: 696d 656e 7369 6f6e 2e0a 2020 2020 2020  imension..      
+00006df0: 2020 2020 2020 2a20 4152 5241 595f 5820        * ARRAY_X 
+00006e00: 2d20 3144 206e 6461 7272 6179 206f 6620  - 1D ndarray of 
+00006e10: 7661 6c75 6520 7065 7220 2a72 6f77 2a20  value per *row* 
+00006e20: 7768 656e 206f 6e6c 7920 726f 7773 2064  when only rows d
+00006e30: 696d 656e 7369 6f6e 2069 7320 4152 5241  imension is ARRA
+00006e40: 592e 0a20 2020 2020 2020 2020 2020 202a  Y..            *
+00006e50: 2058 5f41 5252 4159 202d 2031 4420 6e64   X_ARRAY - 1D nd
+00006e60: 6172 7261 7920 6f66 2076 616c 7565 2070  array of value p
+00006e70: 6572 202a 636f 6c75 6d6e 2a20 7768 656e  er *column* when
+00006e80: 206f 6e6c 7920 636f 6c75 6d6e 2069 7320   only column is 
+00006e90: 4152 5241 592e 0a20 2020 2020 2020 2020  ARRAY..         
+00006ea0: 2020 202a 2041 5252 4159 5f58 5f41 5252     * ARRAY_X_ARR
+00006eb0: 4159 202d 2032 4420 6e64 6172 7261 7920  AY - 2D ndarray 
+00006ec0: 7769 7468 2061 2064 6973 7469 6e63 7420  with a distinct 
+00006ed0: 7461 626c 652d 6d61 7267 696e 2076 616c  table-margin val
+00006ee0: 7565 2070 6572 2063 656c 6c2e 0a20 2020  ue per cell..   
+00006ef0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00006f00: 2069 6620 7365 6c66 2e5f 6d65 6173 7572   if self._measur
+00006f10: 6573 2e74 6162 6c65 5f77 6569 6768 7465  es.table_weighte
+00006f20: 645f 6261 7365 2e69 735f 6465 6669 6e65  d_base.is_define
+00006f30: 643a 0a20 2020 2020 2020 2020 2020 2072  d:.            r
+00006f40: 6574 7572 6e20 7365 6c66 2e5f 6d65 6173  eturn self._meas
+00006f50: 7572 6573 2e74 6162 6c65 5f77 6569 6768  ures.table_weigh
+00006f60: 7465 645f 6261 7365 2e76 616c 7565 0a20  ted_base.value. 
+00006f70: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00006f80: 6d65 6173 7572 6573 2e63 6f6c 756d 6e73  measures.columns
+00006f90: 5f74 6162 6c65 5f77 6569 6768 7465 645f  _table_weighted_
+00006fa0: 6261 7365 2e69 735f 6465 6669 6e65 643a  base.is_defined:
+00006fb0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00006fc0: 7572 6e20 7365 6c66 2e5f 6173 7365 6d62  urn self._assemb
+00006fd0: 6c65 5f6d 6172 6769 6e61 6c28 7365 6c66  le_marginal(self
+00006fe0: 2e5f 6d65 6173 7572 6573 2e63 6f6c 756d  ._measures.colum
+00006ff0: 6e73 5f74 6162 6c65 5f77 6569 6768 7465  ns_table_weighte
+00007000: 645f 6261 7365 290a 2020 2020 2020 2020  d_base).        
+00007010: 6966 2073 656c 662e 5f6d 6561 7375 7265  if self._measure
+00007020: 732e 726f 7773 5f74 6162 6c65 5f77 6569  s.rows_table_wei
+00007030: 6768 7465 645f 6261 7365 2e69 735f 6465  ghted_base.is_de
+00007040: 6669 6e65 643a 0a20 2020 2020 2020 2020  fined:.         
+00007050: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00007060: 6173 7365 6d62 6c65 5f6d 6172 6769 6e61  assemble_margina
+00007070: 6c28 7365 6c66 2e5f 6d65 6173 7572 6573  l(self._measures
+00007080: 2e72 6f77 735f 7461 626c 655f 7765 6967  .rows_table_weig
+00007090: 6874 6564 5f62 6173 6529 0a20 2020 2020  hted_base).     
+000070a0: 2020 2072 6574 7572 6e20 7365 6c66 2e74     return self.t
+000070b0: 6162 6c65 5f77 6569 6768 7465 645f 6261  able_weighted_ba
+000070c0: 7365 730a 0a20 2020 2040 6c61 7a79 7072  ses..    @lazypr
+000070d0: 6f70 6572 7479 0a20 2020 2064 6566 2074  operty.    def t
+000070e0: 6162 6c65 5f70 726f 706f 7274 696f 6e5f  able_proportion_
+000070f0: 7661 7269 616e 6365 7328 7365 6c66 293a  variances(self):
+00007100: 0a20 2020 2020 2020 2022 2222 3244 206e  .        """2D n
+00007110: 6461 7272 6179 206f 6620 6e70 2e66 6c6f  darray of np.flo
+00007120: 6174 3634 2074 6162 6c65 2d70 726f 706f  at64 table-propo
+00007130: 7274 696f 6e20 7661 7269 616e 6365 2066  rtion variance f
+00007140: 6f72 2065 6163 6820 6d61 7472 6978 2063  or each matrix c
+00007150: 656c 6c2e 2222 220a 2020 2020 2020 2020  ell.""".        
+00007160: 7265 7475 726e 2073 656c 662e 5f61 7373  return self._ass
+00007170: 656d 626c 655f 6d61 7472 6978 2873 656c  emble_matrix(sel
+00007180: 662e 5f6d 6561 7375 7265 732e 7461 626c  f._measures.tabl
+00007190: 655f 7072 6f70 6f72 7469 6f6e 5f76 6172  e_proportion_var
+000071a0: 6961 6e63 6573 2e62 6c6f 636b 7329 0a0a  iances.blocks)..
+000071b0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+000071c0: 790a 2020 2020 6465 6620 7461 626c 655f  y.    def table_
+000071d0: 7072 6f70 6f72 7469 6f6e 7328 7365 6c66  proportions(self
+000071e0: 293a 0a20 2020 2020 2020 2022 2222 3244  ):.        """2D
+000071f0: 206e 702e 666c 6f61 7436 3420 6e64 6172   np.float64 ndar
+00007200: 7261 7920 6f66 2074 6162 6c65 2d70 726f  ray of table-pro
+00007210: 706f 7274 696f 6e20 666f 7220 6561 6368  portion for each
+00007220: 206d 6174 7269 7820 6365 6c6c 2e0a 0a20   matrix cell... 
+00007230: 2020 2020 2020 2054 6869 7320 6973 2074         This is t
+00007240: 6865 2070 726f 706f 7274 696f 6e20 6f66  he proportion of
+00007250: 2074 6865 2077 6569 6768 7465 642d 636f   the weighted-co
+00007260: 756e 7420 666f 7220 6365 6c6c 2074 6f20  unt for cell to 
+00007270: 7468 6520 7765 6967 6874 6564 2d4e 206f  the weighted-N o
+00007280: 6620 7468 650a 2020 2020 2020 2020 726f  f the.        ro
+00007290: 7720 7468 6520 6365 6c6c 2061 7070 6561  w the cell appea
+000072a0: 7273 2069 6e20 2861 6b61 2e20 7461 626c  rs in (aka. tabl
+000072b0: 652d 6d61 7267 696e 292e 2047 656e 6572  e-margin). Gener
+000072c0: 616c 6c79 2061 206e 756d 6265 7220 6265  ally a number be
+000072d0: 7477 6565 6e20 302e 3020 616e 640a 2020  tween 0.0 and.  
+000072e0: 2020 2020 2020 312e 3020 696e 636c 7573        1.0 inclus
+000072f0: 6976 652c 2062 7574 2073 7562 746f 7461  ive, but subtota
+00007300: 6c20 6469 6666 6572 656e 6365 7320 6361  l differences ca
+00007310: 6e20 6265 2062 6574 7765 656e 202d 312e  n be between -1.
+00007320: 3020 616e 6420 312e 3020 696e 636c 7573  0 and 1.0 inclus
+00007330: 6976 652e 0a20 2020 2020 2020 2022 2222  ive..        """
+00007340: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00007350: 7365 6c66 2e5f 6173 7365 6d62 6c65 5f6d  self._assemble_m
+00007360: 6174 7269 7828 7365 6c66 2e5f 6d65 6173  atrix(self._meas
+00007370: 7572 6573 2e74 6162 6c65 5f70 726f 706f  ures.table_propo
+00007380: 7274 696f 6e73 2e62 6c6f 636b 7329 0a0a  rtions.blocks)..
+00007390: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+000073a0: 790a 2020 2020 6465 6620 7461 626c 655f  y.    def table_
+000073b0: 7374 645f 6572 7228 7365 6c66 293a 0a20  std_err(self):. 
+000073c0: 2020 2020 2020 2022 2222 3244 206e 702e         """2D np.
+000073d0: 666c 6f61 7436 3420 6e64 6172 7261 7920  float64 ndarray 
+000073e0: 6f66 2073 7464 2d65 7272 6f72 206f 6620  of std-error of 
+000073f0: 7461 626c 652d 7065 7263 656e 7420 666f  table-percent fo
+00007400: 7220 6561 6368 206d 6174 7269 7820 6365  r each matrix ce
+00007410: 6c6c 2e22 2222 0a20 2020 2020 2020 2072  ll.""".        r
+00007420: 6574 7572 6e20 7365 6c66 2e5f 6173 7365  eturn self._asse
+00007430: 6d62 6c65 5f6d 6174 7269 7828 7365 6c66  mble_matrix(self
+00007440: 2e5f 6d65 6173 7572 6573 2e74 6162 6c65  ._measures.table
+00007450: 5f73 7464 5f65 7272 2e62 6c6f 636b 7329  _std_err.blocks)
+00007460: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00007470: 7274 790a 2020 2020 6465 6620 7461 626c  rty.    def tabl
+00007480: 655f 756e 7765 6967 6874 6564 5f62 6173  e_unweighted_bas
+00007490: 6573 2873 656c 6629 3a0a 2020 2020 2020  es(self):.      
+000074a0: 2020 2222 2232 4420 6e70 2e66 6c6f 6174    """2D np.float
+000074b0: 3634 206e 6461 7272 6179 206f 6620 756e  64 ndarray of un
+000074c0: 7765 6967 6874 6564 2074 6162 6c65 2d70  weighted table-p
+000074d0: 726f 706f 7274 696f 6e20 6465 6e6f 6d69  roportion denomi
+000074e0: 6e61 746f 7220 7065 7220 6365 6c6c 2e22  nator per cell."
+000074f0: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00007500: 6e20 7365 6c66 2e5f 6173 7365 6d62 6c65  n self._assemble
+00007510: 5f6d 6174 7269 7828 7365 6c66 2e5f 6d65  _matrix(self._me
+00007520: 6173 7572 6573 2e74 6162 6c65 5f75 6e77  asures.table_unw
+00007530: 6569 6768 7465 645f 6261 7365 732e 626c  eighted_bases.bl
+00007540: 6f63 6b73 290a 0a20 2020 2040 6c61 7a79  ocks)..    @lazy
+00007550: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00007560: 2074 6162 6c65 5f77 6569 6768 7465 645f   table_weighted_
+00007570: 6261 7365 7328 7365 6c66 293a 0a20 2020  bases(self):.   
+00007580: 2020 2020 2022 2222 3244 206e 702e 666c       """2D np.fl
+00007590: 6f61 7436 3420 6e64 6172 7261 7920 6f66  oat64 ndarray of
+000075a0: 2077 6569 6768 7465 6420 7461 626c 652d   weighted table-
+000075b0: 7072 6f70 6f72 7469 6f6e 2064 656e 6f6d  proportion denom
+000075c0: 696e 6174 6f72 2070 6572 2063 656c 6c2e  inator per cell.
+000075d0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+000075e0: 726e 2073 656c 662e 5f61 7373 656d 626c  rn self._assembl
+000075f0: 655f 6d61 7472 6978 2873 656c 662e 5f6d  e_matrix(self._m
+00007600: 6561 7375 7265 732e 7461 626c 655f 7765  easures.table_we
+00007610: 6967 6874 6564 5f62 6173 6573 2e62 6c6f  ighted_bases.blo
+00007620: 636b 7329 0a0a 2020 2020 406c 617a 7970  cks)..    @lazyp
+00007630: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00007640: 746f 7461 6c5f 7368 6172 655f 7375 6d28  total_share_sum(
+00007650: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00007660: 2222 3244 206f 7074 696f 6e61 6c20 6e70  ""2D optional np
+00007670: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
+00007680: 206f 6620 746f 7461 6c20 7368 6172 6520   of total share 
+00007690: 6f66 2073 756d 2066 6f72 2065 6163 6820  of sum for each 
+000076a0: 6365 6c6c 2e0a 0a20 2020 2020 2020 2052  cell...        R
+000076b0: 6169 7365 7320 6056 616c 7565 4572 726f  aises `ValueErro
+000076c0: 7260 2069 6620 7468 6520 6375 6265 2d72  r` if the cube-r
+000076d0: 6573 756c 7420 646f 6573 206e 6f74 2069  esult does not i
+000076e0: 6e63 6c75 6465 2061 2073 756d 0a20 2020  nclude a sum.   
+000076f0: 2020 2020 2063 7562 652d 6d65 6173 7572       cube-measur
+00007700: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
+00007710: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00007720: 6c66 2e5f 6173 7365 6d62 6c65 5f6d 6174  lf._assemble_mat
+00007730: 7269 7828 7365 6c66 2e5f 6d65 6173 7572  rix(self._measur
+00007740: 6573 2e74 6f74 616c 5f73 6861 7265 5f73  es.total_share_s
+00007750: 756d 2e62 6c6f 636b 7329 0a0a 2020 2020  um.blocks)..    
+00007760: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+00007770: 2020 6465 6620 7461 626c 655f 6d61 7267    def table_marg
+00007780: 696e 5f72 616e 6765 2873 656c 6629 3a0a  in_range(self):.
+00007790: 2020 2020 2020 2020 2222 225b 6d69 6e2c          """[min,
+000077a0: 206d 6178 5d20 6e70 2e66 6c6f 6174 3634   max] np.float64
+000077b0: 206e 6461 7272 6179 2072 616e 6765 206f   ndarray range o
+000077c0: 6620 7468 6520 7461 626c 655f 6d61 7267  f the table_marg
+000077d0: 696e 2028 7461 626c 652d 7765 6967 6874  in (table-weight
+000077e0: 6564 2d62 6173 6529 0a0a 2020 2020 2020  ed-base)..      
+000077f0: 2020 4120 4341 545f 585f 4341 5420 6861    A CAT_X_CAT ha
+00007800: 7320 6120 7363 616c 6172 2066 6f72 2061  s a scalar for a
+00007810: 6c6c 2074 6162 6c65 2d77 6569 6768 7465  ll table-weighte
+00007820: 642d 6261 7365 732c 2062 7574 2061 7272  d-bases, but arr
+00007830: 6179 7320 6861 7665 206d 6f72 6520 7468  ays have more th
+00007840: 616e 0a20 2020 2020 2020 206f 6e65 2074  an.        one t
+00007850: 6162 6c65 2d77 6569 6768 7465 642d 6261  able-weighted-ba
+00007860: 7365 2e20 5468 6973 2063 6f6c 6c61 7073  se. This collaps
+00007870: 6573 2061 6c6c 206f 6620 7468 6520 7661  es all of the va
+00007880: 6c75 6573 2074 6f20 6120 7261 6e67 652c  lues to a range,
+00007890: 2061 6e64 0a20 2020 2020 2020 2069 7420   and.        it 
+000078a0: 6973 2022 756e 7072 756e 6564 222c 206d  is "unpruned", m
+000078b0: 6561 6e69 6e67 2074 6861 7420 6974 2069  eaning that it i
+000078c0: 7320 6361 6c63 756c 6174 6564 2062 6566  s calculated bef
+000078d0: 6f72 6520 616e 7920 6869 6469 6e67 206f  ore any hiding o
+000078e0: 7220 7265 6d6f 7669 6e67 0a20 2020 2020  r removing.     
+000078f0: 2020 206f 6620 656d 7074 7920 726f 7773     of empty rows
+00007900: 2f63 6f6c 756d 6e73 2e0a 2020 2020 2020  /columns..      
+00007910: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00007920: 7475 726e 2073 656c 662e 5f6d 6561 7375  turn self._measu
+00007930: 7265 732e 7461 626c 655f 7765 6967 6874  res.table_weight
+00007940: 6564 5f62 6173 6573 5f72 616e 6765 2e76  ed_bases_range.v
+00007950: 616c 7565 0a0a 2020 2020 406c 617a 7970  alue..    @lazyp
+00007960: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00007970: 756e 7765 6967 6874 6564 5f63 6f75 6e74  unweighted_count
+00007980: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+00007990: 2022 2222 3244 206e 702e 666c 6f61 7436   """2D np.float6
+000079a0: 3420 6e64 6172 7261 7920 6f66 2075 6e77  4 ndarray of unw
+000079b0: 6569 6768 7465 642d 636f 756e 7420 666f  eighted-count fo
+000079c0: 7220 6561 6368 2063 656c 6c2e 2222 220a  r each cell.""".
+000079d0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000079e0: 656c 662e 5f61 7373 656d 626c 655f 6d61  elf._assemble_ma
+000079f0: 7472 6978 2873 656c 662e 5f6d 6561 7375  trix(self._measu
+00007a00: 7265 732e 756e 7765 6967 6874 6564 5f63  res.unweighted_c
+00007a10: 6f75 6e74 732e 626c 6f63 6b73 290a 0a20  ounts.blocks).. 
+00007a20: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+00007a30: 0a20 2020 2064 6566 2077 6569 6768 7465  .    def weighte
+00007a40: 645f 636f 756e 7473 2873 656c 6629 3a0a  d_counts(self):.
+00007a50: 2020 2020 2020 2020 2222 2232 4420 6e70          """2D np
+00007a60: 2e66 6c6f 6174 3634 206e 6461 7272 6179  .float64 ndarray
+00007a70: 206f 6620 7765 6967 6874 6564 2d63 6f75   of weighted-cou
+00007a80: 6e74 2066 6f72 2065 6163 6820 6365 6c6c  nt for each cell
+00007a90: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
+00007aa0: 7572 6e20 7365 6c66 2e5f 6173 7365 6d62  urn self._assemb
+00007ab0: 6c65 5f6d 6174 7269 7828 7365 6c66 2e5f  le_matrix(self._
+00007ac0: 6d65 6173 7572 6573 2e77 6569 6768 7465  measures.weighte
+00007ad0: 645f 636f 756e 7473 2e62 6c6f 636b 7329  d_counts.blocks)
+00007ae0: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00007af0: 7274 790a 2020 2020 6465 6620 7a73 636f  rty.    def zsco
+00007b00: 7265 7328 7365 6c66 293a 0a20 2020 2020  res(self):.     
+00007b10: 2020 2022 2222 3244 206e 702e 666c 6f61     """2D np.floa
+00007b20: 7436 3420 6e64 6172 7261 7920 6f66 2073  t64 ndarray of s
+00007b30: 7464 2d72 6573 2076 616c 7565 2066 6f72  td-res value for
+00007b40: 2065 6163 6820 6365 6c6c 206f 6620 6d61   each cell of ma
+00007b50: 7472 6978 2e0a 0a20 2020 2020 2020 2041  trix...        A
+00007b60: 207a 2d73 636f 7265 2069 7320 616c 736f   z-score is also
+00007b70: 206b 6e6f 776e 2061 7320 6120 2a73 7461   known as a *sta
+00007b80: 6e64 6172 6420 7363 6f72 652a 2061 6e64  ndard score* and
+00007b90: 2069 7320 7468 6520 6e75 6d62 6572 206f   is the number o
+00007ba0: 6620 7374 616e 6461 7264 0a20 2020 2020  f standard.     
+00007bb0: 2020 2064 6576 6961 7469 6f6e 7320 6162     deviations ab
+00007bc0: 6f76 6520 2870 6f73 6974 6976 6529 206f  ove (positive) o
+00007bd0: 7220 6265 6c6f 7720 286e 6567 6174 6976  r below (negativ
+00007be0: 6529 2074 6865 2070 6f70 756c 6174 696f  e) the populatio
+00007bf0: 6e20 6d65 616e 2061 2063 656c 6c27 730a  n mean a cell's.
+00007c00: 2020 2020 2020 2020 7661 6c75 6520 6973          value is
+00007c10: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00007c20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00007c30: 662e 5f61 7373 656d 626c 655f 6d61 7472  f._assemble_matr
+00007c40: 6978 2873 656c 662e 5f6d 6561 7375 7265  ix(self._measure
+00007c50: 732e 7a73 636f 7265 732e 626c 6f63 6b73  s.zscores.blocks
+00007c60: 290a 0a20 2020 2064 6566 205f 6173 7365  )..    def _asse
+00007c70: 6d62 6c65 5f6d 6172 6769 6e61 6c28 7365  mble_marginal(se
+00007c80: 6c66 2c20 6d61 7267 696e 616c 293a 0a20  lf, marginal):. 
+00007c90: 2020 2020 2020 2022 2222 4f70 7469 6f6e         """Option
+00007ca0: 616c 2031 4420 6e64 6172 7261 7920 6372  al 1D ndarray cr
+00007cb0: 6561 7465 6420 6672 6f6d 2061 206d 6172  eated from a mar
+00007cc0: 6769 6e61 6c2e 0a0a 2020 2020 2020 2020  ginal...        
+00007cd0: 5468 6520 6173 7365 6d62 6c65 6420 6d61  The assembled ma
+00007ce0: 7267 696e 616c 2069 7320 7468 6520 7368  rginal is the sh
+00007cf0: 6170 6520 6f66 2065 6974 6865 7220 6120  ape of either a 
+00007d00: 726f 7720 6f72 2063 6f6c 756d 6e20 2864  row or column (d
+00007d10: 6574 6572 6d69 6e65 6420 6279 0a20 2020  etermined by.   
+00007d20: 2020 2020 2060 6d61 7267 696e 616c 2e6f       `marginal.o
+00007d30: 7269 656e 7461 7469 6f6e 6029 2c20 616e  rientation`), an
+00007d40: 6420 7769 7468 2074 6865 206f 7264 6572  d with the order
+00007d50: 696e 6720 7468 6174 2773 2061 7070 6c69  ing that's appli
+00007d60: 6564 2074 6f20 7468 6f73 650a 2020 2020  ed to those.    
+00007d70: 2020 2020 6469 6d65 6e73 696f 6e73 2e0a      dimensions..
+00007d80: 0a20 2020 2020 2020 2049 7420 6973 204e  .        It is N
+00007d90: 6f6e 6520 7768 656e 2074 6865 206d 6172  one when the mar
+00007da0: 6769 6e61 6c20 6973 206e 6f74 2064 6566  ginal is not def
+00007db0: 696e 6564 2028 606d 6172 6769 6e61 6c2e  ined (`marginal.
+00007dc0: 5f69 735f 6465 6669 6e65 6460 292e 0a20  _is_defined`).. 
+00007dd0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00007de0: 2020 2069 6620 6e6f 7420 6d61 7267 696e     if not margin
+00007df0: 616c 2e69 735f 6465 6669 6e65 643a 0a20  al.is_defined:. 
+00007e00: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00007e10: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
+00007e20: 6f72 6465 7220 3d20 280a 2020 2020 2020  order = (.      
+00007e30: 2020 2020 2020 7365 6c66 2e5f 726f 775f        self._row_
+00007e40: 6f72 6465 7220 6966 206d 6172 6769 6e61  order if margina
+00007e50: 6c2e 6f72 6965 6e74 6174 696f 6e20 3d3d  l.orientation ==
+00007e60: 204d 4f2e 524f 5753 2065 6c73 6520 7365   MO.ROWS else se
+00007e70: 6c66 2e5f 636f 6c75 6d6e 5f6f 7264 6572  lf._column_order
+00007e80: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00007e90: 2020 2020 7265 7475 726e 206e 702e 6873      return np.hs
+00007ea0: 7461 636b 286d 6172 6769 6e61 6c2e 626c  tack(marginal.bl
+00007eb0: 6f63 6b73 295b 6f72 6465 725d 0a0a 2020  ocks)[order]..  
+00007ec0: 2020 6465 6620 5f61 7373 656d 626c 655f    def _assemble_
+00007ed0: 6d61 7472 6978 2873 656c 662c 2062 6c6f  matrix(self, blo
+00007ee0: 636b 7329 3a0a 2020 2020 2020 2020 2222  cks):.        ""
+00007ef0: 2252 6574 7572 6e20 3244 206e 6461 7272  "Return 2D ndarr
+00007f00: 6179 206d 6174 7269 7820 6173 7365 6d62  ay matrix assemb
+00007f10: 6c65 6420 6672 6f6d 2060 626c 6f63 6b73  led from `blocks
+00007f20: 602e 0a0a 2020 2020 2020 2020 5468 6520  `...        The 
+00007f30: 6173 7365 6d62 6c65 6420 6d61 7472 6978  assembled matrix
+00007f40: 2069 6e63 6c75 6465 7320 696e 7365 7274   includes insert
+00007f50: 6564 2076 6563 746f 7273 2028 726f 7773  ed vectors (rows
+00007f60: 2061 6e64 2063 6f6c 756d 6e73 292c 2068   and columns), h
+00007f70: 6173 2068 6964 6465 6e0a 2020 2020 2020  as hidden.      
+00007f80: 2020 7665 6374 6f72 7320 7265 6d6f 7665    vectors remove
+00007f90: 642c 2061 6e64 2069 7320 6f72 6465 7265  d, and is ordere
+00007fa0: 6420 6279 2077 6861 7465 7665 7220 736f  d by whatever so
+00007fb0: 7274 206d 6574 686f 6420 6973 2061 7070  rt method is app
+00007fc0: 6c69 6564 2069 6e20 7468 650a 2020 2020  lied in the.    
+00007fd0: 2020 2020 6469 6d65 6e73 696f 6e20 7472      dimension tr
+00007fe0: 616e 7366 6f72 6d73 2e0a 2020 2020 2020  ansforms..      
+00007ff0: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
+00008000: 2d2d 2d20 5468 6573 6520 6172 6520 6173  --- These are as
+00008010: 7365 6d62 6c65 6420 696e 746f 2061 2073  sembled into a s
+00008020: 696e 676c 6520 3244 2061 7272 6179 2c20  ingle 2D array, 
+00008030: 616e 6420 7468 656e 2072 6561 7272 616e  and then rearran
+00008040: 6765 6420 6261 7365 6420 6f6e 0a20 2020  ged based on.   
+00008050: 2020 2020 2023 202d 2d2d 2072 6f77 2061       # --- row a
+00008060: 6e64 2063 6f6c 756d 6e20 6f72 6465 7273  nd column orders
+00008070: 2e20 416c 6c20 696e 7365 7274 696f 6e2c  . All insertion,
+00008080: 206f 7264 6572 696e 672c 2061 6e64 2068   ordering, and h
+00008090: 6964 696e 6720 7472 616e 7366 6f72 6d73  iding transforms
+000080a0: 2061 7265 0a20 2020 2020 2020 2023 202d   are.        # -
+000080b0: 2d2d 2072 6566 6c65 6374 6564 2069 6e20  -- reflected in 
+000080c0: 7468 6520 726f 7720 616e 6420 636f 6c75  the row and colu
+000080d0: 6d6e 206f 7264 6572 732e 2054 6865 7920  mn orders. They 
+000080e0: 6561 6368 2069 6e63 6c75 6465 2028 6e65  each include (ne
+000080f0: 6761 7469 7665 290a 2020 2020 2020 2020  gative).        
+00008100: 2320 2d2d 2d20 696e 7365 7274 696f 6e20  # --- insertion 
+00008110: 6964 7873 2c20 6869 6464 656e 2061 6e64  idxs, hidden and
+00008120: 2070 7275 6e65 6420 7665 6374 6f72 2069   pruned vector i
+00008130: 6e64 6963 6573 2068 6176 6520 6265 656e  ndices have been
+00008140: 2072 656d 6f76 6564 2c20 616e 640a 2020   removed, and.  
+00008150: 2020 2020 2020 2320 2d2d 2d20 7468 6520        # --- the 
+00008160: 6f72 6465 7269 6e67 206d 6574 686f 6420  ordering method 
+00008170: 6861 7320 6265 656e 2061 7070 6c69 6564  has been applied
+00008180: 2074 6f20 6465 7465 726d 696e 6520 7468   to determine th
+00008190: 6520 7365 7175 656e 6365 2065 6163 6820  e sequence each 
+000081a0: 6964 780a 2020 2020 2020 2020 2320 2d2d  idx.        # --
+000081b0: 2d20 6170 7065 6172 7320 696e 2e20 5468  - appears in. Th
+000081c0: 6973 2064 6972 6563 746c 7920 7072 6f64  is directly prod
+000081d0: 7563 6573 2061 2066 696e 616c 2061 7272  uces a final arr
+000081e0: 6179 2074 6861 7420 6973 2065 7861 6374  ay that is exact
+000081f0: 6c79 2074 6865 0a20 2020 2020 2020 2023  ly the.        #
+00008200: 202d 2d2d 2064 6573 6972 6564 206f 7574   --- desired out
+00008210: 7075 742e 0a20 2020 2020 2020 2072 6574  put..        ret
+00008220: 7572 6e20 6e70 2e62 6c6f 636b 2862 6c6f  urn np.block(blo
+00008230: 636b 7329 5b6e 702e 6978 5f28 7365 6c66  cks)[np.ix_(self
+00008240: 2e5f 726f 775f 6f72 6465 722c 2073 656c  ._row_order, sel
+00008250: 662e 5f63 6f6c 756d 6e5f 6f72 6465 7229  f._column_order)
+00008260: 5d0a 0a20 2020 2064 6566 205f 6173 7365  ]..    def _asse
+00008270: 6d62 6c65 5f76 6563 746f 7228 7365 6c66  mble_vector(self
+00008280: 2c20 6261 7365 5f76 6563 746f 722c 2073  , base_vector, s
+00008290: 7562 746f 7461 6c73 2c20 6f72 6465 722c  ubtotals, order,
+000082a0: 2064 6966 6673 5f6e 616e 3d46 616c 7365   diffs_nan=False
+000082b0: 293a 0a20 2020 2020 2020 2022 2222 5265  ):.        """Re
+000082c0: 7475 726e 2031 4420 6e64 6172 7261 7920  turn 1D ndarray 
+000082d0: 6f66 2060 6261 7365 5f76 6563 746f 7260  of `base_vector`
+000082e0: 2077 6974 6820 696e 7365 7274 6564 2060   with inserted `
+000082f0: 7375 6274 6f74 616c 7360 2c20 696e 2060  subtotals`, in `
+00008300: 6f72 6465 7260 2e0a 0a20 2020 2020 2020  order`...       
+00008310: 2045 6163 6820 7375 6274 6f74 616c 2076   Each subtotal v
+00008320: 616c 7565 2069 7320 7468 6520 7265 7375  alue is the resu
+00008330: 6c74 206f 6620 6170 706c 7969 6e67 206e  lt of applying n
+00008340: 702e 7375 6d20 746f 2074 6865 2061 6464  p.sum to the add
+00008350: 656e 6473 2061 6e64 0a20 2020 2020 2020  ends and.       
+00008360: 2073 7562 7472 6168 656e 6473 2065 7874   subtrahends ext
+00008370: 7261 6374 6564 2066 726f 6d20 6062 6173  racted from `bas
+00008380: 655f 7665 6374 6f72 6020 6163 636f 7264  e_vector` accord
+00008390: 696e 6720 746f 2074 6865 2060 6164 6465  ing to the `adde
+000083a0: 6e64 5f69 6478 7360 0a20 2020 2020 2020  nd_idxs`.       
+000083b0: 2061 6e64 2060 7375 6274 7261 6865 6e64   and `subtrahend
+000083c0: 5f69 6478 7360 2070 726f 7065 7274 7920  _idxs` property 
+000083d0: 6f66 2065 6163 6820 7375 6274 6f74 616c  of each subtotal
+000083e0: 2069 6e20 6073 7562 746f 7461 6c73 602e   in `subtotals`.
+000083f0: 2054 6865 2072 6574 7572 6e65 640a 2020   The returned.  
+00008400: 2020 2020 2020 6172 7261 7920 6973 2061        array is a
+00008410: 7272 616e 6765 6420 6279 2060 6f72 6465  rranged by `orde
+00008420: 7260 2c20 696e 636c 7564 696e 6720 706f  r`, including po
+00008430: 7373 6962 6c79 2072 656d 6f76 696e 6720  ssibly removing 
+00008440: 6869 6464 656e 206f 7220 7072 756e 6564  hidden or pruned
+00008450: 0a20 2020 2020 2020 2076 616c 7565 732e  .        values.
+00008460: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00008470: 2020 2020 2023 2054 4f44 4f3a 2054 6869       # TODO: Thi
+00008480: 7320 776f 726b 7320 666f 7220 2273 756d  s works for "sum
+00008490: 2220 616e 6420 2264 6966 6622 2073 7562  " and "diff" sub
+000084a0: 746f 7461 6c73 2c20 6265 6361 7573 6520  totals, because 
+000084b0: 6569 7468 6572 2077 6520 7365 7420 746f  either we set to
+000084c0: 0a20 2020 2020 2020 2023 206e 616e 206f  .        # nan o
+000084d0: 7220 6164 6420 2620 7375 6274 7261 6374  r add & subtract
+000084e0: 2c20 6275 7420 6120 6675 6c6c 6572 2073  , but a fuller s
+000084f0: 6f6c 7574 696f 6e20 7769 6c6c 2070 726f  olution will pro
+00008500: 6261 626c 7920 6765 7420 7468 6520 7375  bably get the su
+00008510: 6274 6f74 616c 0a20 2020 2020 2020 2023  btotal.        #
+00008520: 2076 616c 7565 7320 6672 6f6d 2061 205f   values from a _
+00008530: 4261 7365 5375 6274 6f74 616c 7320 7375  BaseSubtotals su
+00008540: 6263 6c61 7373 2e0a 2020 2020 2020 2020  bclass..        
+00008550: 7665 6374 6f72 5f73 7562 746f 7461 6c73  vector_subtotals
+00008560: 203d 206e 702e 6172 7261 7928 0a20 2020   = np.array(.   
+00008570: 2020 2020 2020 2020 205b 0a20 2020 2020           [.     
+00008580: 2020 2020 2020 2020 2020 206e 702e 6e61             np.na
+00008590: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+000085a0: 2020 6966 2064 6966 6673 5f6e 616e 2061    if diffs_nan a
+000085b0: 6e64 206c 656e 2873 7562 746f 7461 6c2e  nd len(subtotal.
+000085c0: 7375 6274 7261 6865 6e64 5f69 6478 7329  subtrahend_idxs)
+000085d0: 203e 2030 0a20 2020 2020 2020 2020 2020   > 0.           
+000085e0: 2020 2020 2065 6c73 6520 6e70 2e73 756d       else np.sum
+000085f0: 2862 6173 655f 7665 6374 6f72 5b73 7562  (base_vector[sub
+00008600: 746f 7461 6c2e 6164 6465 6e64 5f69 6478  total.addend_idx
+00008610: 735d 290a 2020 2020 2020 2020 2020 2020  s]).            
+00008620: 2020 2020 2d20 6e70 2e73 756d 2862 6173      - np.sum(bas
+00008630: 655f 7665 6374 6f72 5b73 7562 746f 7461  e_vector[subtota
+00008640: 6c2e 7375 6274 7261 6865 6e64 5f69 6478  l.subtrahend_idx
+00008650: 735d 290a 2020 2020 2020 2020 2020 2020  s]).            
+00008660: 2020 2020 666f 7220 7375 6274 6f74 616c      for subtotal
+00008670: 2069 6e20 7375 6274 6f74 616c 730a 2020   in subtotals.  
+00008680: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+00008690: 2020 2020 290a 2020 2020 2020 2020 7265      ).        re
+000086a0: 7475 726e 206e 702e 6873 7461 636b 285b  turn np.hstack([
+000086b0: 6261 7365 5f76 6563 746f 722c 2076 6563  base_vector, vec
+000086c0: 746f 725f 7375 6274 6f74 616c 735d 295b  tor_subtotals])[
+000086d0: 6f72 6465 725d 0a0a 2020 2020 406c 617a  order]..    @laz
+000086e0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+000086f0: 6620 5f63 6f6c 756d 6e5f 6f72 6465 7228  f _column_order(
+00008700: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00008710: 2222 3144 206e 702e 696e 7436 3420 6e64  ""1D np.int64 nd
+00008720: 6172 7261 7920 6f66 2073 6967 6e65 6420  array of signed 
+00008730: 696e 7420 6964 7820 666f 7220 6561 6368  int idx for each
+00008740: 2061 7373 656d 626c 6564 2063 6f6c 756d   assembled colum
+00008750: 6e2e 0a0a 2020 2020 2020 2020 4e65 6761  n...        Nega
+00008760: 7469 7665 2076 616c 7565 7320 7265 7072  tive values repr
+00008770: 6573 656e 7420 696e 7365 7274 6564 2073  esent inserted s
+00008780: 7562 746f 7461 6c2d 636f 6c75 6d6e 206c  ubtotal-column l
+00008790: 6f63 6174 696f 6e73 2e0a 2020 2020 2020  ocations..      
+000087a0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+000087b0: 7475 726e 205f 4261 7365 4f72 6465 7248  turn _BaseOrderH
+000087c0: 656c 7065 722e 636f 6c75 6d6e 5f64 6973  elper.column_dis
+000087d0: 706c 6179 5f6f 7264 6572 2873 656c 662e  play_order(self.
+000087e0: 5f64 696d 656e 7369 6f6e 732c 2073 656c  _dimensions, sel
+000087f0: 662e 5f6d 6561 7375 7265 7329 0a0a 2020  f._measures)..  
+00008800: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+00008810: 2020 2020 6465 6620 5f63 6f6c 756d 6e5f      def _column_
+00008820: 7375 6274 6f74 616c 7328 7365 6c66 293a  subtotals(self):
+00008830: 0a20 2020 2020 2020 2022 2222 5365 7175  .        """Sequ
+00008840: 656e 6365 206f 6620 5f53 7562 746f 7461  ence of _Subtota
+00008850: 6c20 6f62 6a65 6374 2066 6f72 2065 6163  l object for eac
+00008860: 6820 696e 7365 7274 6564 2063 6f6c 756d  h inserted colum
+00008870: 6e2e 2222 220a 2020 2020 2020 2020 7265  n.""".        re
+00008880: 7475 726e 2073 656c 662e 5f63 6f6c 756d  turn self._colum
+00008890: 6e73 5f64 696d 656e 7369 6f6e 2e73 7562  ns_dimension.sub
+000088a0: 746f 7461 6c73 0a0a 2020 2020 406c 617a  totals..    @laz
+000088b0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+000088c0: 6620 5f63 6f6c 756d 6e73 5f64 696d 656e  f _columns_dimen
+000088d0: 7369 6f6e 2873 656c 6629 3a0a 2020 2020  sion(self):.    
+000088e0: 2020 2020 2222 2254 6865 2060 4469 6d65      """The `Dime
+000088f0: 6e73 696f 6e60 206f 626a 6563 7420 7265  nsion` object re
+00008900: 7072 6573 656e 7469 6e67 2063 6f6c 756d  presenting colum
+00008910: 6e20 656c 656d 656e 7473 2069 6e20 7468  n elements in th
+00008920: 6973 206d 6174 7269 782e 2222 220a 2020  is matrix.""".  
+00008930: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00008940: 662e 5f64 696d 656e 7369 6f6e 735b 315d  f._dimensions[1]
+00008950: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+00008960: 7274 790a 2020 2020 6465 6620 5f63 7562  rty.    def _cub
+00008970: 655f 6861 735f 6f76 6572 6c61 7073 2873  e_has_overlaps(s
+00008980: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00008990: 2254 7275 6520 6966 206f 7665 726c 6170  "True if overlap
+000089a0: 7320 6172 6520 6465 6669 6e65 6420 616e  s are defined an
+000089b0: 6420 7468 6520 6c61 7374 2064 696d 656e  d the last dimen
+000089c0: 7369 6f6e 2069 7320 4d52 2c20 4661 6c73  sion is MR, Fals
+000089d0: 6520 6f74 6865 7277 6973 6522 2222 0a20  e otherwise""". 
+000089e0: 2020 2020 2020 2072 6574 7572 6e20 280a         return (.
+000089f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00008a00: 2e5f 6469 6d65 6e73 696f 6e73 5b2d 315d  ._dimensions[-1]
+00008a10: 2e64 696d 656e 7369 6f6e 5f74 7970 6520  .dimension_type 
+00008a20: 3d3d 2044 542e 4d52 0a20 2020 2020 2020  == DT.MR.       
+00008a30: 2020 2020 2061 6e64 2073 656c 662e 5f63       and self._c
+00008a40: 7562 652e 6f76 6572 6c61 7073 2069 7320  ube.overlaps is 
+00008a50: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+00008a60: 2020 2020 2061 6e64 2073 656c 662e 5f63       and self._c
+00008a70: 7562 652e 7661 6c69 645f 6f76 6572 6c61  ube.valid_overla
+00008a80: 7073 2069 7320 6e6f 7420 4e6f 6e65 0a20  ps is not None. 
+00008a90: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
+00008aa0: 6620 5f64 6572 6976 6564 5f65 6c65 6d65  f _derived_eleme
+00008ab0: 6e74 5f69 6478 7328 7365 6c66 2c20 6469  nt_idxs(self, di
+00008ac0: 6d65 6e73 696f 6e2c 206f 7264 6572 293a  mension, order):
+00008ad0: 0a20 2020 2020 2020 2022 2222 5265 7475  .        """Retu
+00008ae0: 726e 2074 7570 6c65 2869 6e74 2920 6f66  rn tuple(int) of
+00008af0: 2064 6572 6976 6564 2065 6c65 6d65 6e74   derived element
+00008b00: 7327 2069 6e64 6963 6573 2066 6f72 2061  s' indices for a
+00008b10: 2064 696d 656e 7369 6f6e 2e0a 0a20 2020   dimension...   
+00008b20: 2020 2020 2053 7562 746f 7461 6c73 2063       Subtotals c
+00008b30: 616e 6e6f 7420 6265 2064 6572 6976 6564  annot be derived
+00008b40: 2065 6c65 6d65 6e74 732e 204f 6e6c 7920   elements. Only 
+00008b50: 736f 6d65 2065 6c65 6d65 6e74 7320 2873  some elements (s
+00008b60: 7562 7661 7269 6162 6c65 7329 2063 616e  ubvariables) can
+00008b70: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00008b80: 2020 2020 2020 6e5f 7375 6274 6f74 616c        n_subtotal
+00008b90: 7320 3d20 6c65 6e28 6469 6d65 6e73 696f  s = len(dimensio
+00008ba0: 6e2e 7661 6c69 645f 656c 656d 656e 7473  n.valid_elements
+00008bb0: 290a 2020 2020 2020 2020 6465 7269 7673  ).        derivs
+00008bc0: 203d 205b 652e 6465 7269 7665 6420 666f   = [e.derived fo
+00008bd0: 7220 6520 696e 2064 696d 656e 7369 6f6e  r e in dimension
+00008be0: 2e76 616c 6964 5f65 6c65 6d65 6e74 735d  .valid_elements]
+00008bf0: 202b 205b 4661 6c73 655d 202a 206e 5f73   + [False] * n_s
+00008c00: 7562 746f 7461 6c73 0a20 2020 2020 2020  ubtotals.       
+00008c10: 2072 6574 7572 6e20 7475 706c 6528 6e70   return tuple(np
+00008c20: 2e77 6865 7265 286e 702e 6172 7261 7928  .where(np.array(
+00008c30: 6465 7269 7673 295b 6f72 6465 725d 295b  derivs)[order])[
+00008c40: 305d 290a 0a20 2020 2064 6566 205f 6469  0])..    def _di
+00008c50: 6666 5f65 6c65 6d65 6e74 5f69 6478 7328  ff_element_idxs(
+00008c60: 7365 6c66 2c20 6469 6d65 6e73 696f 6e2c  self, dimension,
+00008c70: 206f 7264 6572 293a 0a20 2020 2020 2020   order):.       
+00008c80: 2022 2222 5265 7475 726e 2074 7570 6c65   """Return tuple
+00008c90: 2869 6e74 2920 6f66 2064 6966 6665 7265  (int) of differe
+00008ca0: 6e63 6520 656c 656d 656e 7473 2720 696e  nce elements' in
+00008cb0: 6469 6365 7320 666f 7220 6120 6469 6d65  dices for a dime
+00008cc0: 6e73 696f 6e2e 0a0a 2020 2020 2020 2020  nsion...        
+00008cd0: 5661 6c69 6420 656c 656d 656e 7473 2063  Valid elements c
+00008ce0: 616e 6e6f 7420 6265 2064 6966 6665 7265  annot be differe
+00008cf0: 6e63 6573 2e20 4f6e 6c79 2073 6f6d 6520  nces. Only some 
+00008d00: 7375 6274 6f74 616c 7320 6361 6e2e 0a20  subtotals can.. 
+00008d10: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00008d20: 2020 206e 5f76 616c 6964 7320 3d20 6c65     n_valids = le
+00008d30: 6e28 6469 6d65 6e73 696f 6e2e 7661 6c69  n(dimension.vali
+00008d40: 645f 656c 656d 656e 7473 290a 2020 2020  d_elements).    
+00008d50: 2020 2020 6469 6666 7320 3d20 5b46 616c      diffs = [Fal
+00008d60: 7365 5d20 2a20 6e5f 7661 6c69 6473 202b  se] * n_valids +
+00008d70: 205b 652e 6973 5f64 6966 6665 7265 6e63   [e.is_differenc
+00008d80: 6520 666f 7220 6520 696e 2064 696d 656e  e for e in dimen
+00008d90: 7369 6f6e 2e73 7562 746f 7461 6c73 5d0a  sion.subtotals].
+00008da0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00008db0: 7570 6c65 286e 702e 7768 6572 6528 6e70  uple(np.where(np
+00008dc0: 2e61 7272 6179 2864 6966 6673 295b 6f72  .array(diffs)[or
+00008dd0: 6465 725d 295b 305d 290a 0a20 2020 2064  der])[0])..    d
+00008de0: 6566 205f 6469 6d65 6e73 696f 6e5f 616c  ef _dimension_al
+00008df0: 6961 7365 7328 7365 6c66 2c20 6469 6d65  iases(self, dime
+00008e00: 6e73 696f 6e2c 206f 7264 6572 293a 0a20  nsion, order):. 
+00008e10: 2020 2020 2020 2022 2222 3144 2073 7472         """1D str
+00008e20: 206e 6461 7272 6179 206f 6620 616c 6961   ndarray of alia
+00008e30: 7320 666f 7220 6561 6368 2076 6563 746f  s for each vecto
+00008e40: 7220 6f66 2060 6469 6d65 6e73 696f 6e60  r of `dimension`
+00008e50: 2e0a 0a20 2020 2020 2020 2054 6865 7365  ...        These
+00008e60: 2061 7265 2073 7569 7461 626c 6520 666f   are suitable fo
+00008e70: 7220 7573 6520 6173 2072 6f77 2f63 6f6c  r use as row/col
+00008e80: 756d 6e20 6865 6164 696e 6773 3b20 616c  umn headings; al
+00008e90: 6961 7320 666f 7220 7375 6274 6f74 616c  ias for subtotal
+00008ea0: 7320 6170 7065 6172 0a20 2020 2020 2020  s appear.       
+00008eb0: 2069 6e20 7468 6520 7365 7175 656e 6365   in the sequence
+00008ec0: 2073 7065 6369 6669 6564 2062 7920 606f   specified by `o
+00008ed0: 7264 6572 602c 2073 7563 6820 7468 6174  rder`, such that
+00008ee0: 2061 6c69 6173 6573 2061 7265 206f 7264   aliases are ord
+00008ef0: 6572 6564 2074 6f0a 2020 2020 2020 2020  ered to.        
+00008f00: 636f 7272 6573 706f 6e64 2077 6974 6820  correspond with 
+00008f10: 7468 6569 7220 7265 7370 6563 7469 7665  their respective
+00008f20: 2064 6174 6120 7665 6374 6f72 2e0a 2020   data vector..  
+00008f30: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00008f40: 2020 7265 7475 726e 206e 702e 6172 7261    return np.arra
+00008f50: 7928 6469 6d65 6e73 696f 6e2e 656c 656d  y(dimension.elem
+00008f60: 656e 745f 616c 6961 7365 7320 2b20 6469  ent_aliases + di
+00008f70: 6d65 6e73 696f 6e2e 7375 6274 6f74 616c  mension.subtotal
+00008f80: 5f61 6c69 6173 6573 295b 6f72 6465 725d  _aliases)[order]
+00008f90: 0a0a 2020 2020 6465 6620 5f64 696d 656e  ..    def _dimen
+00008fa0: 7369 6f6e 5f63 6f64 6573 2873 656c 662c  sion_codes(self,
+00008fb0: 2064 696d 656e 7369 6f6e 2c20 6f72 6465   dimension, orde
+00008fc0: 7229 3a0a 2020 2020 2020 2020 2222 2231  r):.        """1
+00008fd0: 4420 7374 7220 6e64 6172 7261 7920 6f66  D str ndarray of
+00008fe0: 2063 6f64 6573 2066 6f72 2065 6163 6820   codes for each 
+00008ff0: 7665 6374 6f72 206f 6620 6064 696d 656e  vector of `dimen
+00009000: 7369 6f6e 602e 0a0a 2020 2020 2020 2020  sion`...        
+00009010: 5468 6573 6520 6172 6520 7375 6974 6162  These are suitab
+00009020: 6c65 2066 6f72 2075 7365 2061 7320 726f  le for use as ro
+00009030: 772f 636f 6c75 6d6e 2068 6561 6469 6e67  w/column heading
+00009040: 733b 2063 6f64 6573 2066 6f72 2073 7562  s; codes for sub
+00009050: 746f 7461 6c73 2061 7070 6561 720a 2020  totals appear.  
+00009060: 2020 2020 2020 696e 2074 6865 2073 6571        in the seq
+00009070: 7565 6e63 6520 7370 6563 6966 6965 6420  uence specified 
+00009080: 6279 2060 6f72 6465 7260 2c20 7375 6368  by `order`, such
+00009090: 2074 6861 7420 636f 6465 7320 6172 6520   that codes are 
+000090a0: 6f72 6465 7265 6420 746f 0a20 2020 2020  ordered to.     
+000090b0: 2020 2063 6f72 7265 7370 6f6e 6420 7769     correspond wi
+000090c0: 7468 2074 6865 6972 2072 6573 7065 6374  th their respect
+000090d0: 6976 6520 6461 7461 2076 6563 746f 722e  ive data vector.
+000090e0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000090f0: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
+00009100: 7272 6179 2864 696d 656e 7369 6f6e 2e65  rray(dimension.e
+00009110: 6c65 6d65 6e74 5f69 6473 202b 2064 696d  lement_ids + dim
+00009120: 656e 7369 6f6e 2e69 6e73 6572 7469 6f6e  ension.insertion
+00009130: 5f69 6473 295b 6f72 6465 725d 0a0a 2020  _ids)[order]..  
+00009140: 2020 6465 6620 5f64 696d 656e 7369 6f6e    def _dimension
+00009150: 5f6c 6162 656c 7328 7365 6c66 2c20 6469  _labels(self, di
+00009160: 6d65 6e73 696f 6e2c 206f 7264 6572 293a  mension, order):
+00009170: 0a20 2020 2020 2020 2022 2222 3144 2073  .        """1D s
+00009180: 7472 206e 6461 7272 6179 206f 6620 6e61  tr ndarray of na
+00009190: 6d65 2066 6f72 2065 6163 6820 7665 6374  me for each vect
+000091a0: 6f72 206f 6620 6064 696d 656e 7369 6f6e  or of `dimension
+000091b0: 602e 0a0a 2020 2020 2020 2020 5468 6573  `...        Thes
+000091c0: 6520 6172 6520 7375 6974 6162 6c65 2066  e are suitable f
+000091d0: 6f72 2075 7365 2061 7320 726f 772f 636f  or use as row/co
+000091e0: 6c75 6d6e 2068 6561 6469 6e67 733b 206c  lumn headings; l
+000091f0: 6162 656c 7320 666f 7220 7375 6274 6f74  abels for subtot
+00009200: 616c 7320 6170 7065 6172 0a20 2020 2020  als appear.     
+00009210: 2020 2069 6e20 7468 6520 7365 7175 656e     in the sequen
+00009220: 6365 2073 7065 6369 6669 6564 2062 7920  ce specified by 
+00009230: 606f 7264 6572 602c 2073 7563 6820 7468  `order`, such th
+00009240: 6174 206c 6162 656c 7320 6172 6520 6f72  at labels are or
+00009250: 6465 7265 6420 746f 2063 6f72 7265 7370  dered to corresp
+00009260: 6f6e 640a 2020 2020 2020 2020 7769 7468  ond.        with
+00009270: 2074 6865 6972 2072 6573 7065 6374 6976   their respectiv
+00009280: 6520 6461 7461 2076 6563 746f 722e 0a20  e data vector.. 
+00009290: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000092a0: 2020 2072 6574 7572 6e20 6e70 2e61 7272     return np.arr
+000092b0: 6179 2864 696d 656e 7369 6f6e 2e65 6c65  ay(dimension.ele
+000092c0: 6d65 6e74 5f6c 6162 656c 7320 2b20 6469  ment_labels + di
+000092d0: 6d65 6e73 696f 6e2e 7375 6274 6f74 616c  mension.subtotal
+000092e0: 5f6c 6162 656c 7329 5b6f 7264 6572 5d0a  _labels)[order].
+000092f0: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+00009300: 7479 0a20 2020 2064 6566 205f 6d65 6173  ty.    def _meas
+00009310: 7572 6573 2873 656c 6629 3a0a 2020 2020  ures(self):.    
+00009320: 2020 2020 2222 2253 6563 6f6e 644f 7264      """SecondOrd
+00009330: 6572 4d65 6173 7572 6573 2063 6f6c 6c65  erMeasures colle
+00009340: 6374 696f 6e20 6f62 6a65 6374 2066 6f72  ction object for
+00009350: 2074 6869 7320 6375 6265 2d72 6573 756c   this cube-resul
+00009360: 742e 2222 220a 2020 2020 2020 2020 7265  t.""".        re
+00009370: 7475 726e 2053 6563 6f6e 644f 7264 6572  turn SecondOrder
+00009380: 4d65 6173 7572 6573 2873 656c 662e 5f63  Measures(self._c
+00009390: 7562 652c 2073 656c 662e 5f64 696d 656e  ube, self._dimen
+000093a0: 7369 6f6e 732c 2073 656c 662e 5f73 6c69  sions, self._sli
+000093b0: 6365 5f69 6478 290a 0a20 2020 2040 7374  ce_idx)..    @st
+000093c0: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
+000093d0: 6566 205f 7061 6972 7769 7365 5f69 6e64  ef _pairwise_ind
+000093e0: 6963 6573 2870 5f76 616c 732c 2074 5f73  ices(p_vals, t_s
+000093f0: 7461 7473 2c20 616c 7068 612c 206f 6e6c  tats, alpha, onl
+00009400: 795f 6c61 7267 6572 293a 0a20 2020 2020  y_larger):.     
+00009410: 2020 2022 2222 3144 206e 6461 7272 6179     """1D ndarray
+00009420: 2063 6f6e 7461 696e 696e 6720 7475 706c   containing tupl
+00009430: 6573 206f 6620 696e 7420 7061 6972 7769  es of int pairwi
+00009440: 7365 2069 6e64 6963 6573 206f 6620 6561  se indices of ea
+00009450: 6368 2063 6f6c 756d 6e2e 2222 220a 2020  ch column.""".  
+00009460: 2020 2020 2020 7369 676e 6966 6963 616e        significan
+00009470: 6365 203d 2070 5f76 616c 7320 3c20 616c  ce = p_vals < al
+00009480: 7068 610a 2020 2020 2020 2020 6966 206f  pha.        if o
+00009490: 6e6c 795f 6c61 7267 6572 3a0a 2020 2020  nly_larger:.    
+000094a0: 2020 2020 2020 2020 7369 676e 6966 6963          signific
+000094b0: 616e 6365 203d 206e 702e 6c6f 6769 6361  ance = np.logica
+000094c0: 6c5f 616e 6428 745f 7374 6174 7320 3c20  l_and(t_stats < 
+000094d0: 302c 2073 6967 6e69 6669 6361 6e63 6529  0, significance)
+000094e0: 0a20 2020 2020 2020 2063 6f6c 5f73 6967  .        col_sig
+000094f0: 6e69 6669 6361 6e63 6520 3d20 6e70 2e65  nificance = np.e
+00009500: 6d70 7479 2828 6c65 6e28 7369 676e 6966  mpty((len(signif
+00009510: 6963 616e 6365 292c 292c 2064 7479 7065  icance),), dtype
+00009520: 3d6f 626a 6563 7429 0a20 2020 2020 2020  =object).       
+00009530: 2063 6f6c 5f73 6967 6e69 6669 6361 6e63   col_significanc
+00009540: 655b 3a5d 203d 205b 7475 706c 6528 6e70  e[:] = [tuple(np
+00009550: 2e77 6865 7265 2873 6967 5f72 6f77 295b  .where(sig_row)[
+00009560: 305d 2920 666f 7220 7369 675f 726f 7720  0]) for sig_row 
+00009570: 696e 2073 6967 6e69 6669 6361 6e63 655d  in significance]
+00009580: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009590: 636f 6c5f 7369 676e 6966 6963 616e 6365  col_significance
+000095a0: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+000095b0: 7274 790a 2020 2020 6465 6620 5f72 6f77  rty.    def _row
+000095c0: 5f6f 7264 6572 2873 656c 6629 3a0a 2020  _order(self):.  
+000095d0: 2020 2020 2020 2222 2231 4420 6e70 2e69        """1D np.i
+000095e0: 6e74 3634 206e 6461 7272 6179 206f 6620  nt64 ndarray of 
+000095f0: 7369 676e 6564 2069 6e74 2069 6478 2066  signed int idx f
+00009600: 6f72 2065 6163 6820 6173 7365 6d62 6c65  or each assemble
+00009610: 6420 726f 772e 0a0a 2020 2020 2020 2020  d row...        
+00009620: 4e65 6761 7469 7665 2076 616c 7565 7320  Negative values 
+00009630: 7265 7072 6573 656e 7420 696e 7365 7274  represent insert
+00009640: 6564 2073 7562 746f 7461 6c2d 726f 7720  ed subtotal-row 
+00009650: 6c6f 6361 7469 6f6e 732e 0a20 2020 2020  locations..     
+00009660: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00009670: 6574 7572 6e20 5f42 6173 654f 7264 6572  eturn _BaseOrder
+00009680: 4865 6c70 6572 2e72 6f77 5f64 6973 706c  Helper.row_displ
+00009690: 6179 5f6f 7264 6572 2873 656c 662e 5f64  ay_order(self._d
+000096a0: 696d 656e 7369 6f6e 732c 2073 656c 662e  imensions, self.
+000096b0: 5f6d 6561 7375 7265 7329 0a0a 2020 2020  _measures)..    
+000096c0: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+000096d0: 2020 6465 6620 5f72 6f77 5f73 7562 746f    def _row_subto
+000096e0: 7461 6c73 2873 656c 6629 3a0a 2020 2020  tals(self):.    
+000096f0: 2020 2020 2222 2253 6571 7565 6e63 6520      """Sequence 
+00009700: 6f66 205f 5375 6274 6f74 616c 206f 626a  of _Subtotal obj
+00009710: 6563 7420 666f 7220 6561 6368 2069 6e73  ect for each ins
+00009720: 6572 7465 6420 726f 772e 2222 220a 2020  erted row.""".  
+00009730: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00009740: 662e 5f72 6f77 735f 6469 6d65 6e73 696f  f._rows_dimensio
+00009750: 6e2e 7375 6274 6f74 616c 730a 0a20 2020  n.subtotals..   
+00009760: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+00009770: 2020 2064 6566 205f 726f 7773 5f64 696d     def _rows_dim
+00009780: 656e 7369 6f6e 2873 656c 6629 3a0a 2020  ension(self):.  
+00009790: 2020 2020 2020 2222 2254 6865 2060 4469        """The `Di
+000097a0: 6d65 6e73 696f 6e60 206f 626a 6563 7420  mension` object 
+000097b0: 7265 7072 6573 656e 7469 6e67 2072 6f77  representing row
+000097c0: 2065 6c65 6d65 6e74 7320 696e 2074 6869   elements in thi
+000097d0: 7320 6d61 7472 6978 2e22 2222 0a20 2020  s matrix.""".   
+000097e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000097f0: 2e5f 6469 6d65 6e73 696f 6e73 5b30 5d0a  ._dimensions[0].
+00009800: 0a0a 636c 6173 7320 5f42 6173 654f 7264  ..class _BaseOrd
+00009810: 6572 4865 6c70 6572 3a0a 2020 2020 2222  erHelper:.    ""
+00009820: 2242 6173 6520 636c 6173 7320 666f 7220  "Base class for 
+00009830: 6f72 6465 7269 6e67 2068 656c 7065 7273  ordering helpers
+00009840: 2e22 2222 0a0a 2020 2020 6465 6620 5f5f  ."""..    def __
+00009850: 696e 6974 5f5f 2873 656c 662c 2064 696d  init__(self, dim
+00009860: 656e 7369 6f6e 732c 2073 6563 6f6e 645f  ensions, second_
+00009870: 6f72 6465 725f 6d65 6173 7572 6573 293a  order_measures):
+00009880: 0a20 2020 2020 2020 2073 656c 662e 5f64  .        self._d
+00009890: 696d 656e 7369 6f6e 7320 3d20 6469 6d65  imensions = dime
+000098a0: 6e73 696f 6e73 0a20 2020 2020 2020 2073  nsions.        s
+000098b0: 656c 662e 5f73 6563 6f6e 645f 6f72 6465  elf._second_orde
+000098c0: 725f 6d65 6173 7572 6573 203d 2073 6563  r_measures = sec
+000098d0: 6f6e 645f 6f72 6465 725f 6d65 6173 7572  ond_order_measur
+000098e0: 6573 0a0a 2020 2020 4063 6c61 7373 6d65  es..    @classme
+000098f0: 7468 6f64 0a20 2020 2064 6566 2063 6f6c  thod.    def col
+00009900: 756d 6e5f 6469 7370 6c61 795f 6f72 6465  umn_display_orde
+00009910: 7228 636c 732c 2064 696d 656e 7369 6f6e  r(cls, dimension
+00009920: 732c 2073 6563 6f6e 645f 6f72 6465 725f  s, second_order_
+00009930: 6d65 6173 7572 6573 293a 0a20 2020 2020  measures):.     
+00009940: 2020 2022 2222 3144 206e 702e 696e 7436     """1D np.int6
+00009950: 3420 6e64 6172 7261 7920 6f66 2073 6967  4 ndarray of sig
+00009960: 6e65 6420 696e 7420 6964 7820 666f 7220  ned int idx for 
+00009970: 6561 6368 2063 6f6c 756d 6e20 6f66 206d  each column of m
+00009980: 6561 7375 7265 206d 6174 7269 782e 0a0a  easure matrix...
+00009990: 2020 2020 2020 2020 4e65 6761 7469 7665          Negative
+000099a0: 2076 616c 7565 7320 7265 7072 6573 656e   values represen
+000099b0: 7420 696e 7365 7274 6564 2d76 6563 746f  t inserted-vecto
+000099c0: 7220 6c6f 6361 7469 6f6e 732e 2052 6574  r locations. Ret
+000099d0: 7572 6e65 6420 7365 7175 656e 6365 2072  urned sequence r
+000099e0: 6566 6c65 6374 730a 2020 2020 2020 2020  eflects.        
+000099f0: 696e 7365 7274 696f 6e2c 2068 6964 696e  insertion, hidin
+00009a00: 672c 2070 7275 6e69 6e67 2c20 616e 6420  g, pruning, and 
+00009a10: 6f72 6465 7269 6e67 2074 7261 6e73 666f  ordering transfo
+00009a20: 726d 7320 7370 6563 6966 6965 6420 696e  rms specified in
+00009a30: 2074 6865 0a20 2020 2020 2020 2063 6f6c   the.        col
+00009a40: 756d 6e73 2d64 696d 656e 7369 6f6e 2e0a  umns-dimension..
+00009a50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00009a60: 2020 2020 2320 2d2d 2d20 5468 6973 2069      # --- This i
+00009a70: 7320 6573 7365 6e74 6961 6c6c 7920 6120  s essentially a 
+00009a80: 6661 6374 6f72 7920 6d65 7468 6f64 2e20  factory method. 
+00009a90: 5468 6572 6520 6973 206e 6f20 736f 7274  There is no sort
+00009aa0: 2d63 6f6c 756d 6e73 2d62 792d 7661 6c75  -columns-by-valu
+00009ab0: 650a 2020 2020 2020 2020 2320 2d2d 2d20  e.        # --- 
+00009ac0: 7965 742c 2061 6e64 2062 6f74 6820 6578  yet, and both ex
+00009ad0: 706c 6963 6974 2061 6e64 2070 6179 6c6f  plicit and paylo
+00009ae0: 6164 206f 7264 6572 696e 6720 6172 6520  ad ordering are 
+00009af0: 6861 6e64 6c65 6420 6279 0a20 2020 2020  handled by.     
+00009b00: 2020 2023 202d 2d2d 205f 436f 6c75 6d6e     # --- _Column
+00009b10: 4f72 6465 7248 656c 7065 722c 2073 6f20  OrderHelper, so 
+00009b20: 7468 6572 6527 7320 6e6f 7420 6d75 6368  there's not much
+00009b30: 2074 6f20 7468 6973 2079 6574 2c20 6a75   to this yet, ju
+00009b40: 7374 206b 6565 7069 6e67 0a20 2020 2020  st keeping.     
+00009b50: 2020 2023 202d 2d2d 2066 6f72 6d20 636f     # --- form co
+00009b60: 6e73 6973 7465 6e74 2077 6974 6820 602e  nsistent with `.
+00009b70: 726f 775f 6469 7370 6c61 795f 6f72 6465  row_display_orde
+00009b80: 7228 2960 2061 6e64 2077 6527 6c6c 2065  r()` and we'll e
+00009b90: 6c61 626f 7261 7465 2074 6869 7320 7768  laborate this wh
+00009ba0: 656e 0a20 2020 2020 2020 2023 202d 2d2d  en.        # ---
+00009bb0: 2077 6520 6164 6420 736f 7274 2d62 792d   we add sort-by-
+00009bc0: 7661 6c75 6520 746f 2063 6f6c 756d 6e73  value to columns
+00009bd0: 2e0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00009be0: 205f 436f 6c75 6d6e 4f72 6465 7248 656c   _ColumnOrderHel
+00009bf0: 7065 7228 6469 6d65 6e73 696f 6e73 2c20  per(dimensions, 
+00009c00: 7365 636f 6e64 5f6f 7264 6572 5f6d 6561  second_order_mea
+00009c10: 7375 7265 7329 2e5f 6469 7370 6c61 795f  sures)._display_
+00009c20: 6f72 6465 720a 0a20 2020 2040 636c 6173  order..    @clas
+00009c30: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
+00009c40: 726f 775f 6469 7370 6c61 795f 6f72 6465  row_display_orde
+00009c50: 7228 636c 732c 2064 696d 656e 7369 6f6e  r(cls, dimension
+00009c60: 732c 2073 6563 6f6e 645f 6f72 6465 725f  s, second_order_
+00009c70: 6d65 6173 7572 6573 293a 0a20 2020 2020  measures):.     
+00009c80: 2020 2022 2222 3144 206e 702e 696e 7436     """1D np.int6
+00009c90: 3420 6e64 6172 7261 7920 6f66 2073 6967  4 ndarray of sig
+00009ca0: 6e65 6420 696e 7420 6964 7820 666f 7220  ned int idx for 
+00009cb0: 6561 6368 2072 6f77 206f 6620 6d65 6173  each row of meas
+00009cc0: 7572 6520 6d61 7472 6978 2e0a 0a20 2020  ure matrix...   
+00009cd0: 2020 2020 204e 6567 6174 6976 6520 7661       Negative va
+00009ce0: 6c75 6573 2072 6570 7265 7365 6e74 2069  lues represent i
+00009cf0: 6e73 6572 7465 642d 7665 6374 6f72 206c  nserted-vector l
+00009d00: 6f63 6174 696f 6e73 2e20 5265 7475 726e  ocations. Return
+00009d10: 6564 2073 6571 7565 6e63 6520 7265 666c  ed sequence refl
+00009d20: 6563 7473 0a20 2020 2020 2020 2069 6e73  ects.        ins
+00009d30: 6572 7469 6f6e 2c20 6869 6469 6e67 2c20  ertion, hiding, 
+00009d40: 7072 756e 696e 672c 2061 6e64 206f 7264  pruning, and ord
+00009d50: 6572 696e 6720 7472 616e 7366 6f72 6d73  ering transforms
+00009d60: 2073 7065 6369 6669 6564 2069 6e20 7468   specified in th
+00009d70: 650a 2020 2020 2020 2020 726f 7773 2d64  e.        rows-d
+00009d80: 696d 656e 7369 6f6e 2e0a 2020 2020 2020  imension..      
+00009d90: 2020 2222 220a 2020 2020 2020 2020 636f    """.        co
+00009da0: 6c6c 6174 696f 6e5f 6d65 7468 6f64 203d  llation_method =
+00009db0: 2064 696d 656e 7369 6f6e 735b 305d 2e6f   dimensions[0].o
+00009dc0: 7264 6572 5f73 7065 632e 636f 6c6c 6174  rder_spec.collat
+00009dd0: 696f 6e5f 6d65 7468 6f64 0a20 2020 2020  ion_method.     
+00009de0: 2020 2064 696d 5f74 7970 6520 3d20 6469     dim_type = di
+00009df0: 6d65 6e73 696f 6e73 5b31 5d2e 6469 6d65  mensions[1].dime
+00009e00: 6e73 696f 6e5f 7479 7065 0a20 2020 2020  nsion_type.     
+00009e10: 2020 2048 656c 7065 7243 6c73 203d 2028     HelperCls = (
+00009e20: 0a20 2020 2020 2020 2020 2020 205f 536f  .            _So
+00009e30: 7274 526f 7773 4279 4261 7365 436f 6c75  rtRowsByBaseColu
+00009e40: 6d6e 4865 6c70 6572 0a20 2020 2020 2020  mnHelper.       
+00009e50: 2020 2020 2069 6620 636f 6c6c 6174 696f       if collatio
+00009e60: 6e5f 6d65 7468 6f64 203d 3d20 434d 2e4f  n_method == CM.O
+00009e70: 5050 4f53 494e 475f 454c 454d 454e 540a  PPOSING_ELEMENT.
+00009e80: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00009e90: 205f 536f 7274 526f 7773 4279 4465 7269   _SortRowsByDeri
+00009ea0: 7665 6443 6f6c 756d 6e48 656c 7065 720a  vedColumnHelper.
+00009eb0: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00009ec0: 6f6c 6c61 7469 6f6e 5f6d 6574 686f 6420  ollation_method 
+00009ed0: 3d3d 2043 4d2e 4f50 504f 5349 4e47 5f49  == CM.OPPOSING_I
+00009ee0: 4e53 4552 5449 4f4e 2061 6e64 2064 696d  NSERTION and dim
+00009ef0: 5f74 7970 6520 696e 2044 542e 4152 5241  _type in DT.ARRA
+00009f00: 595f 5459 5045 530a 2020 2020 2020 2020  Y_TYPES.        
+00009f10: 2020 2020 656c 7365 205f 536f 7274 526f      else _SortRo
+00009f20: 7773 4279 496e 7365 7274 6564 436f 6c75  wsByInsertedColu
+00009f30: 6d6e 4865 6c70 6572 0a20 2020 2020 2020  mnHelper.       
+00009f40: 2020 2020 2069 6620 636f 6c6c 6174 696f       if collatio
+00009f50: 6e5f 6d65 7468 6f64 203d 3d20 434d 2e4f  n_method == CM.O
+00009f60: 5050 4f53 494e 475f 494e 5345 5254 494f  PPOSING_INSERTIO
+00009f70: 4e0a 2020 2020 2020 2020 2020 2020 656c  N.            el
+00009f80: 7365 205f 536f 7274 526f 7773 4279 4c61  se _SortRowsByLa
+00009f90: 6265 6c48 656c 7065 720a 2020 2020 2020  belHelper.      
+00009fa0: 2020 2020 2020 6966 2063 6f6c 6c61 7469        if collati
+00009fb0: 6f6e 5f6d 6574 686f 6420 3d3d 2043 4d2e  on_method == CM.
+00009fc0: 4c41 4245 4c0a 2020 2020 2020 2020 2020  LABEL.          
+00009fd0: 2020 656c 7365 205f 536f 7274 526f 7773    else _SortRows
+00009fe0: 4279 4d61 7267 696e 616c 4865 6c70 6572  ByMarginalHelper
+00009ff0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000a000: 636f 6c6c 6174 696f 6e5f 6d65 7468 6f64  collation_method
+0000a010: 203d 3d20 434d 2e4d 4152 4749 4e41 4c0a   == CM.MARGINAL.
+0000a020: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000a030: 205f 526f 774f 7264 6572 4865 6c70 6572   _RowOrderHelper
+0000a040: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0000a050: 2020 2020 7265 7475 726e 2048 656c 7065      return Helpe
+0000a060: 7243 6c73 2864 696d 656e 7369 6f6e 732c  rCls(dimensions,
+0000a070: 2073 6563 6f6e 645f 6f72 6465 725f 6d65   second_order_me
+0000a080: 6173 7572 6573 292e 5f64 6973 706c 6179  asures)._display
+0000a090: 5f6f 7264 6572 0a0a 2020 2020 406c 617a  _order..    @laz
+0000a0a0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000a0b0: 6620 5f64 6973 706c 6179 5f6f 7264 6572  f _display_order
+0000a0c0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000a0d0: 2222 2231 4420 6e70 2e69 6e74 3634 206e  """1D np.int64 n
+0000a0e0: 6461 7272 6179 206f 6620 7369 676e 6564  darray of signed
+0000a0f0: 2069 6e74 2069 6478 2066 6f72 2065 6163   int idx for eac
+0000a100: 6820 7665 6374 6f72 206f 6620 6469 6d65  h vector of dime
+0000a110: 6e73 696f 6e2e 0a0a 2020 2020 2020 2020  nsion...        
+0000a120: 4e65 6761 7469 7665 2076 616c 7565 7320  Negative values 
+0000a130: 7265 7072 6573 656e 7420 696e 7365 7274  represent insert
+0000a140: 6564 2d76 6563 746f 7220 6c6f 6361 7469  ed-vector locati
+0000a150: 6f6e 732e 2052 6574 7572 6e65 6420 7365  ons. Returned se
+0000a160: 7175 656e 6365 2072 6566 6c65 6374 730a  quence reflects.
+0000a170: 2020 2020 2020 2020 696e 7365 7274 696f          insertio
+0000a180: 6e2c 2068 6964 696e 672c 2070 7275 6e69  n, hiding, pruni
+0000a190: 6e67 2c20 616e 6420 6f72 6465 7269 6e67  ng, and ordering
+0000a1a0: 2074 7261 6e73 666f 726d 7320 7370 6563   transforms spec
+0000a1b0: 6966 6965 6420 696e 2074 6865 0a20 2020  ified in the.   
+0000a1c0: 2020 2020 2072 6f77 732d 6469 6d65 6e73       rows-dimens
+0000a1d0: 696f 6e2e 0a20 2020 2020 2020 2022 2222  ion..        """
+0000a1e0: 0a20 2020 2020 2020 2023 202d 2d2d 2052  .        # --- R
+0000a1f0: 6574 7572 6e69 6e67 2061 7320 6e70 2e61  eturning as np.a
+0000a200: 7272 6179 2073 7569 7473 2069 7473 2069  rray suits its i
+0000a210: 6e74 656e 6465 6420 7075 7270 6f73 652c  ntended purpose,
+0000a220: 2077 6869 6368 2069 7320 746f 2070 6172   which is to par
+0000a230: 7469 6369 7061 7465 0a20 2020 2020 2020  ticipate.       
+0000a240: 2023 202d 2d2d 2069 6e20 616e 206e 702e   # --- in an np.
+0000a250: 5f69 7828 2920 6361 6c6c 2e20 4974 2077  _ix() call. It w
+0000a260: 6f72 6b73 2066 696e 6520 6173 2061 2073  orks fine as a s
+0000a270: 6571 7565 6e63 6520 746f 6f20 666f 7220  equence too for 
+0000a280: 616e 7920 616c 7465 726e 6174 650a 2020  any alternate.  
+0000a290: 2020 2020 2020 2320 2d2d 2d20 7573 652e        # --- use.
+0000a2a0: 2053 7065 6369 6679 696e 6720 696e 7420   Specifying int 
+0000a2b0: 7479 7065 2070 7265 7665 6e74 7320 6661  type prevents fa
+0000a2c0: 696c 7572 6520 7768 656e 2074 6865 7265  ilure when there
+0000a2d0: 2061 7265 207a 6572 6f20 656c 656d 656e   are zero elemen
+0000a2e0: 7473 2e0a 2020 2020 2020 2020 6966 2073  ts..        if s
+0000a2f0: 656c 662e 5f70 7275 6e65 5f73 7562 746f  elf._prune_subto
+0000a300: 7461 6c73 3a0a 2020 2020 2020 2020 2020  tals:.          
+0000a310: 2020 7265 7475 726e 206e 702e 6172 7261    return np.arra
+0000a320: 7928 5b69 6478 2066 6f72 2069 6478 2069  y([idx for idx i
+0000a330: 6e20 7365 6c66 2e5f 6f72 6465 7220 6966  n self._order if
+0000a340: 2069 6478 203e 3d20 305d 2c20 6474 7970   idx >= 0], dtyp
+0000a350: 653d 696e 7429 0a20 2020 2020 2020 2072  e=int).        r
+0000a360: 6574 7572 6e20 6e70 2e61 7272 6179 2873  eturn np.array(s
+0000a370: 656c 662e 5f6f 7264 6572 2c20 6474 7970  elf._order, dtyp
+0000a380: 653d 696e 7429 0a0a 2020 2020 406c 617a  e=int)..    @laz
+0000a390: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000a3a0: 6620 5f63 6f6c 756d 6e73 5f64 696d 656e  f _columns_dimen
+0000a3b0: 7369 6f6e 2873 656c 6629 3a0a 2020 2020  sion(self):.    
+0000a3c0: 2020 2020 2222 2254 6865 2060 4469 6d65      """The `Dime
+0000a3d0: 6e73 696f 6e60 206f 626a 6563 7420 7265  nsion` object re
+0000a3e0: 7072 6573 656e 7469 6e67 2063 6f6c 756d  presenting colum
+0000a3f0: 6e20 656c 656d 656e 7473 2069 6e20 7468  n elements in th
+0000a400: 6520 6d61 7472 6978 2e22 2222 0a20 2020  e matrix.""".   
+0000a410: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0000a420: 2e5f 6469 6d65 6e73 696f 6e73 5b31 5d0a  ._dimensions[1].
+0000a430: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+0000a440: 7479 0a20 2020 2064 6566 205f 656d 7074  ty.    def _empt
+0000a450: 795f 636f 6c75 6d6e 5f69 6478 7328 7365  y_column_idxs(se
+0000a460: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000a470: 7475 706c 6520 6f66 2069 6e74 2069 6e64  tuple of int ind
+0000a480: 6578 2066 6f72 2065 6163 6820 636f 6c75  ex for each colu
+0000a490: 6d6e 2077 6974 6820 2875 6e77 6569 6768  mn with (unweigh
+0000a4a0: 7465 6429 204e 203d 2030 2e0a 0a20 2020  ted) N = 0...   
+0000a4b0: 2020 2020 2054 6865 7365 2063 6f6c 756d       These colum
+0000a4c0: 6e73 2061 7265 2073 7562 6a65 6374 2074  ns are subject t
+0000a4d0: 6f20 7072 756e 696e 672c 2064 6570 656e  o pruning, depen
+0000a4e0: 6469 6e67 206f 6e20 6120 7573 6572 2073  ding on a user s
+0000a4f0: 6574 7469 6e67 2069 6e20 7468 650a 2020  etting in the.  
+0000a500: 2020 2020 2020 6469 6d65 6e73 696f 6e2e        dimension.
+0000a510: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000a520: 2020 2020 2023 202d 2d2d 2073 7562 7365       # --- subse
+0000a530: 7420 6265 6361 7573 6520 6e75 6d70 792e  t because numpy.
+0000a540: 7768 6572 6520 7265 7475 726e 7320 7475  where returns tu
+0000a550: 706c 6520 746f 2061 6c6c 6f77 2066 6f72  ple to allow for
+0000a560: 206d 756c 7469 706c 6520 6178 6573 0a20   multiple axes. 
+0000a570: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
+0000a580: 706c 6528 6e70 2e77 6865 7265 2873 656c  ple(np.where(sel
+0000a590: 662e 5f73 6563 6f6e 645f 6f72 6465 725f  f._second_order_
+0000a5a0: 6d65 6173 7572 6573 2e63 6f6c 756d 6e73  measures.columns
+0000a5b0: 5f70 7275 6e69 6e67 5f6d 6173 6b29 5b30  _pruning_mask)[0
+0000a5c0: 5d29 0a0a 2020 2020 406c 617a 7970 726f  ])..    @lazypro
+0000a5d0: 7065 7274 790a 2020 2020 6465 6620 5f65  perty.    def _e
+0000a5e0: 6d70 7479 5f72 6f77 5f69 6478 7328 7365  mpty_row_idxs(se
+0000a5f0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000a600: 7475 706c 6520 6f66 2069 6e74 2069 6e64  tuple of int ind
+0000a610: 6578 2066 6f72 2065 6163 6820 726f 7720  ex for each row 
+0000a620: 7769 7468 204e 203d 2030 2e0a 0a20 2020  with N = 0...   
+0000a630: 2020 2020 2054 6865 7365 2072 6f77 7320       These rows 
+0000a640: 6172 6520 7375 626a 6563 7420 746f 2070  are subject to p
+0000a650: 7275 6e69 6e67 2c20 6465 7065 6e64 696e  runing, dependin
+0000a660: 6720 6f6e 2061 2075 7365 7220 7365 7474  g on a user sett
+0000a670: 696e 6720 696e 2074 6865 2064 696d 656e  ing in the dimen
+0000a680: 7369 6f6e 2e0a 2020 2020 2020 2020 2222  sion..        ""
+0000a690: 220a 2020 2020 2020 2020 2320 2d2d 2d20  ".        # --- 
+0000a6a0: 7375 6273 6574 2062 6563 6175 7365 206e  subset because n
+0000a6b0: 756d 7079 2e77 6865 7265 2072 6574 7572  umpy.where retur
+0000a6c0: 6e73 2074 7570 6c65 2074 6f20 616c 6c6f  ns tuple to allo
+0000a6d0: 7720 666f 7220 6d75 6c74 6970 6c65 2061  w for multiple a
+0000a6e0: 7865 730a 2020 2020 2020 2020 7265 7475  xes.        retu
+0000a6f0: 726e 2074 7570 6c65 286e 702e 7768 6572  rn tuple(np.wher
+0000a700: 6528 7365 6c66 2e5f 7365 636f 6e64 5f6f  e(self._second_o
+0000a710: 7264 6572 5f6d 6561 7375 7265 732e 726f  rder_measures.ro
+0000a720: 7773 5f70 7275 6e69 6e67 5f6d 6173 6b29  ws_pruning_mask)
+0000a730: 5b30 5d29 0a0a 2020 2020 406c 617a 7970  [0])..    @lazyp
+0000a740: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000a750: 5f6d 6561 7375 7265 2873 656c 6629 3a0a  _measure(self):.
+0000a760: 2020 2020 2020 2020 2222 2253 6563 6f6e          """Secon
+0000a770: 642d 6f72 6465 7220 6d65 6173 7572 6520  d-order measure 
+0000a780: 6f62 6a65 6374 2070 726f 7669 6469 6e67  object providing
+0000a790: 2076 616c 7565 7320 666f 7220 736f 7274   values for sort
+0000a7a0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+0000a7b0: 6e73 204e 6f6e 6520 7768 656e 2074 6865  ns None when the
+0000a7c0: 206d 6561 7375 7265 2069 6e20 7468 6520   measure in the 
+0000a7d0: 606f 7264 6572 5f73 7065 6360 2069 7320  `order_spec` is 
+0000a7e0: 6e6f 7420 656e 6162 6c65 2066 6f72 2073  not enable for s
+0000a7f0: 6f72 7469 6e67 2e0a 0a20 2020 2020 2020  orting...       
+0000a800: 2054 6869 7320 7072 6f70 6572 7479 2069   This property i
+0000a810: 7320 6e6f 7420 7573 6564 2062 7920 736f  s not used by so
+0000a820: 6d65 2073 7562 636c 6173 7365 732e 0a20  me subclasses.. 
+0000a830: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000a840: 2020 2023 202d 2d2d 2053 6f6d 6574 696d     # --- Sometim
+0000a850: 6573 2077 6520 736f 7274 2062 7920 6120  es we sort by a 
+0000a860: 6d65 6173 7572 6520 7468 6174 2069 7320  measure that is 
+0000a870: 6120 6d6f 6e6f 746f 6e69 6320 7472 616e  a monotonic tran
+0000a880: 7366 6f72 6d61 7469 6f6e 206f 660a 2020  sformation of.  
+0000a890: 2020 2020 2020 2320 2d2d 2d20 616e 6f74        # --- anot
+0000a8a0: 6865 7220 6d65 6173 7572 6520 7468 6174  her measure that
+0000a8b0: 2069 7320 616c 7265 6164 7920 6361 6c63   is already calc
+0000a8c0: 756c 6174 6564 2062 7920 7468 6520 6173  ulated by the as
+0000a8d0: 7365 6d62 6c65 722e 2042 6563 6175 7365  sembler. Because
+0000a8e0: 0a20 2020 2020 2020 2023 202d 2d2d 206d  .        # --- m
+0000a8f0: 6f6e 6f74 6f6e 6963 2074 7261 6e73 666f  onotonic transfo
+0000a900: 726d 6174 696f 6e73 2070 7265 7365 7276  rmations preserv
+0000a910: 6520 6f72 6465 722c 2074 6865 2073 6f72  e order, the sor
+0000a920: 7469 6e67 2069 7320 636f 7272 6563 742e  ting is correct.
+0000a930: 0a20 2020 2020 2020 2070 726f 706e 616d  .        propnam
+0000a940: 655f 6279 5f6d 6561 7375 7265 203d 207b  e_by_measure = {
+0000a950: 0a20 2020 2020 2020 2020 2020 204d 2e43  .            M.C
+0000a960: 4f4c 554d 4e5f 4241 5345 5f55 4e57 4549  OLUMN_BASE_UNWEI
+0000a970: 4748 5445 443a 2022 636f 6c75 6d6e 5f75  GHTED: "column_u
+0000a980: 6e77 6569 6768 7465 645f 6261 7365 7322  nweighted_bases"
+0000a990: 2c0a 2020 2020 2020 2020 2020 2020 4d2e  ,.            M.
+0000a9a0: 434f 4c55 4d4e 5f42 4153 455f 5745 4947  COLUMN_BASE_WEIG
+0000a9b0: 4854 4544 3a20 2263 6f6c 756d 6e5f 7765  HTED: "column_we
+0000a9c0: 6967 6874 6564 5f62 6173 6573 222c 0a20  ighted_bases",. 
+0000a9d0: 2020 2020 2020 2020 2020 204d 2e43 4f4c             M.COL
+0000a9e0: 554d 4e5f 494e 4445 583a 2022 636f 6c75  UMN_INDEX: "colu
+0000a9f0: 6d6e 5f69 6e64 6578 222c 0a20 2020 2020  mn_index",.     
+0000aa00: 2020 2020 2020 204d 2e43 4f4c 554d 4e5f         M.COLUMN_
+0000aa10: 5045 5243 454e 543a 2022 636f 6c75 6d6e  PERCENT: "column
+0000aa20: 5f70 726f 706f 7274 696f 6e73 222c 0a20  _proportions",. 
+0000aa30: 2020 2020 2020 2020 2020 204d 2e43 4f4c             M.COL
+0000aa40: 554d 4e5f 5045 5243 454e 545f 4d4f 453a  UMN_PERCENT_MOE:
+0000aa50: 2022 636f 6c75 6d6e 5f73 7464 5f65 7272   "column_std_err
+0000aa60: 222c 2020 2320 6d6f 6e6f 746f 6e69 6320  ",  # monotonic 
+0000aa70: 7472 616e 7366 6f72 6d0a 2020 2020 2020  transform.      
+0000aa80: 2020 2020 2020 4d2e 434f 4c55 4d4e 5f53        M.COLUMN_S
+0000aa90: 4841 5245 5f53 554d 3a20 2263 6f6c 756d  HARE_SUM: "colum
+0000aaa0: 6e5f 7368 6172 655f 7375 6d22 2c0a 2020  n_share_sum",.  
+0000aab0: 2020 2020 2020 2020 2020 4d2e 434f 4c55            M.COLU
+0000aac0: 4d4e 5f53 5444 4445 563a 2022 636f 6c75  MN_STDDEV: "colu
+0000aad0: 6d6e 5f70 726f 706f 7274 696f 6e5f 7661  mn_proportion_va
+0000aae0: 7269 616e 6365 7322 2c20 2023 206d 6f6e  riances",  # mon
+0000aaf0: 6f74 6f6e 6963 2074 7261 6e73 666f 726d  otonic transform
+0000ab00: 0a20 2020 2020 2020 2020 2020 204d 2e43  .            M.C
+0000ab10: 4f4c 554d 4e5f 5354 4445 5252 3a20 2263  OLUMN_STDERR: "c
+0000ab20: 6f6c 756d 6e5f 7374 645f 6572 7222 2c0a  olumn_std_err",.
+0000ab30: 2020 2020 2020 2020 2020 2020 4d2e 4d45              M.ME
+0000ab40: 414e 3a20 226d 6561 6e73 222c 0a20 2020  AN: "means",.   
+0000ab50: 2020 2020 2020 2020 204d 2e50 4f50 554c           M.POPUL
+0000ab60: 4154 494f 4e3a 2022 706f 7075 6c61 7469  ATION: "populati
+0000ab70: 6f6e 5f70 726f 706f 7274 696f 6e73 222c  on_proportions",
+0000ab80: 2020 2320 6d6f 6e74 6f6e 6963 2074 7261    # montonic tra
+0000ab90: 6e73 666f 726d 0a20 2020 2020 2020 2020  nsform.         
+0000aba0: 2020 204d 2e50 4f50 554c 4154 494f 4e5f     M.POPULATION_
+0000abb0: 4d4f 453a 2022 706f 7075 6c61 7469 6f6e  MOE: "population
+0000abc0: 5f73 7464 5f65 7272 222c 2020 2320 6d6f  _std_err",  # mo
+0000abd0: 6e6f 746f 6e69 6320 7472 616e 7366 6f72  notonic transfor
+0000abe0: 6d0a 2020 2020 2020 2020 2020 2020 4d2e  m.            M.
+0000abf0: 5056 414c 5545 533a 2022 7076 616c 7565  PVALUES: "pvalue
+0000ac00: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
+0000ac10: 4d2e 524f 575f 4241 5345 5f55 4e57 4549  M.ROW_BASE_UNWEI
+0000ac20: 4748 5445 443a 2022 726f 775f 756e 7765  GHTED: "row_unwe
+0000ac30: 6967 6874 6564 5f62 6173 6573 222c 0a20  ighted_bases",. 
+0000ac40: 2020 2020 2020 2020 2020 204d 2e52 4f57             M.ROW
+0000ac50: 5f42 4153 455f 5745 4947 4854 4544 3a20  _BASE_WEIGHTED: 
+0000ac60: 2272 6f77 5f77 6569 6768 7465 645f 6261  "row_weighted_ba
+0000ac70: 7365 7322 2c0a 2020 2020 2020 2020 2020  ses",.          
+0000ac80: 2020 4d2e 524f 575f 5045 5243 454e 543a    M.ROW_PERCENT:
+0000ac90: 2022 726f 775f 7072 6f70 6f72 7469 6f6e   "row_proportion
+0000aca0: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
+0000acb0: 4d2e 524f 575f 5045 5243 454e 545f 4d4f  M.ROW_PERCENT_MO
+0000acc0: 453a 2022 726f 775f 7374 645f 6572 7222  E: "row_std_err"
+0000acd0: 2c20 2023 206d 6f6e 6f74 6f6e 6963 2074  ,  # monotonic t
+0000ace0: 7261 6e73 666f 726d 0a20 2020 2020 2020  ransform.       
+0000acf0: 2020 2020 204d 2e52 4f57 5f53 4841 5245       M.ROW_SHARE
+0000ad00: 5f53 554d 3a20 2272 6f77 5f73 6861 7265  _SUM: "row_share
+0000ad10: 5f73 756d 222c 0a20 2020 2020 2020 2020  _sum",.         
+0000ad20: 2020 204d 2e52 4f57 5f53 5444 4445 563a     M.ROW_STDDEV:
+0000ad30: 2022 726f 775f 7072 6f70 6f72 7469 6f6e   "row_proportion
+0000ad40: 5f76 6172 6961 6e63 6573 222c 2020 2320  _variances",  # 
+0000ad50: 6d6f 6e74 6f6e 6963 2074 7261 6e73 666f  montonic transfo
+0000ad60: 726d 0a20 2020 2020 2020 2020 2020 204d  rm.            M
+0000ad70: 2e52 4f57 5f53 5444 4552 523a 2022 726f  .ROW_STDERR: "ro
+0000ad80: 775f 7374 645f 6572 7222 2c0a 2020 2020  w_std_err",.    
+0000ad90: 2020 2020 2020 2020 4d2e 5354 4444 4556          M.STDDEV
+0000ada0: 3a20 2273 7464 6465 7622 2c0a 2020 2020  : "stddev",.    
+0000adb0: 2020 2020 2020 2020 4d2e 5355 4d3a 2022          M.SUM: "
+0000adc0: 7375 6d73 222c 0a20 2020 2020 2020 2020  sums",.         
+0000add0: 2020 204d 2e54 4142 4c45 5f50 4552 4345     M.TABLE_PERCE
+0000ade0: 4e54 3a20 2274 6162 6c65 5f70 726f 706f  NT: "table_propo
+0000adf0: 7274 696f 6e73 222c 0a20 2020 2020 2020  rtions",.       
+0000ae00: 2020 2020 204d 2e54 4142 4c45 5f50 4552       M.TABLE_PER
+0000ae10: 4345 4e54 3a20 2274 6162 6c65 5f70 726f  CENT: "table_pro
+0000ae20: 706f 7274 696f 6e73 222c 0a20 2020 2020  portions",.     
+0000ae30: 2020 2020 2020 204d 2e54 4142 4c45 5f50         M.TABLE_P
+0000ae40: 4552 4345 4e54 5f4d 4f45 3a20 2274 6162  ERCENT_MOE: "tab
+0000ae50: 6c65 5f73 7464 5f65 7272 222c 2020 2320  le_std_err",  # 
+0000ae60: 6d6f 6e6f 746f 6e69 6320 7472 616e 7366  monotonic transf
+0000ae70: 6f72 6d0a 2020 2020 2020 2020 2020 2020  orm.            
+0000ae80: 4d2e 5441 424c 455f 5354 4444 4556 3a20  M.TABLE_STDDEV: 
+0000ae90: 2274 6162 6c65 5f70 726f 706f 7274 696f  "table_proportio
+0000aea0: 6e5f 7661 7269 616e 6365 7322 2c20 2023  n_variances",  #
+0000aeb0: 206d 6f6e 6f74 6f6e 6963 2074 7261 6e73   monotonic trans
+0000aec0: 666f 726d 0a20 2020 2020 2020 2020 2020  form.           
+0000aed0: 204d 2e54 4142 4c45 5f53 5444 4552 523a   M.TABLE_STDERR:
+0000aee0: 2022 7461 626c 655f 7374 645f 6572 7222   "table_std_err"
+0000aef0: 2c0a 2020 2020 2020 2020 2020 2020 4d2e  ,.            M.
+0000af00: 5441 424c 455f 4241 5345 5f55 4e57 4549  TABLE_BASE_UNWEI
+0000af10: 4748 5445 443a 2022 7461 626c 655f 756e  GHTED: "table_un
+0000af20: 7765 6967 6874 6564 5f62 6173 6573 222c  weighted_bases",
+0000af30: 0a20 2020 2020 2020 2020 2020 204d 2e54  .            M.T
+0000af40: 4142 4c45 5f42 4153 455f 5745 4947 4854  ABLE_BASE_WEIGHT
+0000af50: 4544 3a20 2274 6162 6c65 5f77 6569 6768  ED: "table_weigh
+0000af60: 7465 645f 6261 7365 7322 2c0a 2020 2020  ted_bases",.    
+0000af70: 2020 2020 2020 2020 4d2e 544f 5441 4c5f          M.TOTAL_
+0000af80: 5348 4152 455f 5355 4d3a 2022 746f 7461  SHARE_SUM: "tota
+0000af90: 6c5f 7368 6172 655f 7375 6d22 2c0a 2020  l_share_sum",.  
+0000afa0: 2020 2020 2020 2020 2020 4d2e 554e 5745            M.UNWE
+0000afb0: 4947 4854 4544 5f43 4f55 4e54 3a20 2275  IGHTED_COUNT: "u
+0000afc0: 6e77 6569 6768 7465 645f 636f 756e 7473  nweighted_counts
+0000afd0: 222c 0a20 2020 2020 2020 2020 2020 204d  ",.            M
+0000afe0: 2e55 4e57 4549 4748 5445 445f 5641 4c49  .UNWEIGHTED_VALI
+0000aff0: 445f 434f 554e 543a 2022 756e 7765 6967  D_COUNT: "unweig
+0000b000: 6874 6564 5f63 6f75 6e74 7322 2c0a 2020  hted_counts",.  
+0000b010: 2020 2020 2020 2020 2020 4d2e 5745 4947            M.WEIG
+0000b020: 4854 4544 5f43 4f55 4e54 3a20 2277 6569  HTED_COUNT: "wei
+0000b030: 6768 7465 645f 636f 756e 7473 222c 0a20  ghted_counts",. 
+0000b040: 2020 2020 2020 2020 2020 204d 2e57 4549             M.WEI
+0000b050: 4748 5445 445f 5641 4c49 445f 434f 554e  GHTED_VALID_COUN
+0000b060: 543a 2022 7765 6967 6874 6564 5f63 6f75  T: "weighted_cou
+0000b070: 6e74 7322 2c0a 2020 2020 2020 2020 2020  nts",.          
+0000b080: 2020 4d2e 5a5f 5343 4f52 453a 2022 7a73    M.Z_SCORE: "zs
+0000b090: 636f 7265 7322 2c0a 2020 2020 2020 2020  cores",.        
+0000b0a0: 7d0a 2020 2020 2020 2020 6d65 6173 7572  }.        measur
+0000b0b0: 6520 3d20 7365 6c66 2e5f 6f72 6465 725f  e = self._order_
+0000b0c0: 7370 6563 2e6d 6561 7375 7265 0a20 2020  spec.measure.   
+0000b0d0: 2020 2020 206d 6561 7375 7265 5f70 726f       measure_pro
+0000b0e0: 706e 616d 6520 3d20 7072 6f70 6e61 6d65  pname = propname
+0000b0f0: 5f62 795f 6d65 6173 7572 652e 6765 7428  _by_measure.get(
+0000b100: 6d65 6173 7572 6529 0a0a 2020 2020 2020  measure)..      
+0000b110: 2020 6966 206d 6561 7375 7265 5f70 726f    if measure_pro
+0000b120: 706e 616d 6520 6973 204e 6f6e 653a 0a20  pname is None:. 
+0000b130: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000b140: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
+0000b150: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+0000b160: 2020 2020 2020 6622 736f 7274 2d62 792d        f"sort-by-
+0000b170: 7661 6c75 6520 666f 7220 6d65 6173 7572  value for measur
+0000b180: 6520 277b 6d65 6173 7572 657d 2720 6973  e '{measure}' is
+0000b190: 206e 6f74 2079 6574 2073 7570 706f 7274   not yet support
+0000b1a0: 6564 220a 2020 2020 2020 2020 2020 2020  ed".            
+0000b1b0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0000b1c0: 6e20 6765 7461 7474 7228 7365 6c66 2e5f  n getattr(self._
+0000b1d0: 7365 636f 6e64 5f6f 7264 6572 5f6d 6561  second_order_mea
+0000b1e0: 7375 7265 732c 206d 6561 7375 7265 5f70  sures, measure_p
+0000b1f0: 726f 706e 616d 6529 0a0a 2020 2020 406c  ropname)..    @l
+0000b200: 617a 7970 726f 7065 7274 790a 2020 2020  azyproperty.    
+0000b210: 6465 6620 5f6f 7264 6572 2873 656c 6629  def _order(self)
+0000b220: 3a0a 2020 2020 2020 2020 2222 2274 7570  :.        """tup
+0000b230: 6c65 206f 6620 7369 676e 6564 2069 6e74  le of signed int
+0000b240: 2069 6478 2066 6f72 2065 6163 6820 736f   idx for each so
+0000b250: 7274 6564 2076 6563 746f 7220 6f66 206d  rted vector of m
+0000b260: 6561 7375 7265 206d 6174 7269 782e 0a0a  easure matrix...
+0000b270: 2020 2020 2020 2020 4e65 6761 7469 7665          Negative
+0000b280: 2076 616c 7565 7320 7265 7072 6573 656e   values represen
+0000b290: 7420 696e 7365 7274 6564 2d76 6563 746f  t inserted-vecto
+0000b2a0: 7220 6c6f 6361 7469 6f6e 732e 2052 6574  r locations. Ret
+0000b2b0: 7572 6e65 6420 7365 7175 656e 6365 2072  urned sequence r
+0000b2c0: 6566 6c65 6374 730a 2020 2020 2020 2020  eflects.        
+0000b2d0: 696e 7365 7274 696f 6e2c 2068 6964 696e  insertion, hidin
+0000b2e0: 672c 2070 7275 6e69 6e67 2c20 616e 6420  g, pruning, and 
+0000b2f0: 6f72 6465 7269 6e67 2074 7261 6e73 666f  ordering transfo
+0000b300: 726d 7320 7370 6563 6966 6965 6420 696e  rms specified in
+0000b310: 2074 6865 0a20 2020 2020 2020 2072 6f77   the.        row
+0000b320: 732d 6469 6d65 6e73 696f 6e2e 0a20 2020  s-dimension..   
+0000b330: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000b340: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+0000b350: 656e 7465 6445 7272 6f72 2820 2023 2070  entedError(  # p
+0000b360: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+0000b370: 2020 2020 2020 2020 2020 2020 6622 7b74              f"{t
+0000b380: 7970 6528 7365 6c66 292e 5f5f 6e61 6d65  ype(self).__name
+0000b390: 5f5f 7d20 6d75 7374 2069 6d70 6c65 6d65  __} must impleme
+0000b3a0: 6e74 2060 2e5f 6f72 6465 7260 220a 2020  nt `._order`".  
+0000b3b0: 2020 2020 2020 290a 0a20 2020 2040 6c61        )..    @la
+0000b3c0: 7a79 7072 6f70 6572 7479 0a20 2020 2064  zyproperty.    d
+0000b3d0: 6566 205f 6f72 6465 725f 7370 6563 2873  ef _order_spec(s
+0000b3e0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000b3f0: 225f 4f72 6465 7253 7065 6320 6f62 6a65  "_OrderSpec obje
+0000b400: 6374 2066 6f72 2064 696d 656e 7369 6f6e  ct for dimension
+0000b410: 2062 6569 6e67 2073 6f72 7465 642e 0a0a   being sorted...
+0000b420: 2020 2020 2020 2020 5072 6f76 6964 6573          Provides
+0000b430: 2061 6363 6573 7320 746f 206f 7264 6572   access to order
+0000b440: 696e 6720 6465 7461 696c 7320 6c69 6b65  ing details like
+0000b450: 206d 6561 7375 7265 2061 6e64 2073 6f72   measure and sor
+0000b460: 742d 6469 7265 6374 696f 6e2e 0a20 2020  t-direction..   
+0000b470: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000b480: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+0000b490: 656e 7465 6445 7272 6f72 2820 2023 2070  entedError(  # p
+0000b4a0: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+0000b4b0: 2020 2020 2020 2020 2020 2020 6622 7b74              f"{t
+0000b4c0: 7970 6528 7365 6c66 292e 5f5f 6e61 6d65  ype(self).__name
+0000b4d0: 5f5f 7d20 6d75 7374 2069 6d70 6c65 6d65  __} must impleme
+0000b4e0: 6e74 2060 2e5f 6f72 6465 725f 7370 6563  nt `._order_spec
+0000b4f0: 6022 0a20 2020 2020 2020 2029 0a0a 2020  `".        )..  
+0000b500: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000b510: 2020 2020 6465 6620 5f70 7275 6e65 5f73      def _prune_s
+0000b520: 7562 746f 7461 6c73 2873 656c 6629 3a0a  ubtotals(self):.
+0000b530: 2020 2020 2020 2020 2222 2254 7275 6520          """True 
+0000b540: 6966 2073 7562 746f 7461 6c20 7665 6374  if subtotal vect
+0000b550: 6f72 7320 6e65 6564 2074 6f20 6265 2070  ors need to be p
+0000b560: 7275 6e65 642c 2046 616c 7365 206f 7468  runed, False oth
+0000b570: 6572 7769 7365 2e22 2222 0a20 2020 2020  erwise.""".     
+0000b580: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+0000b590: 656d 656e 7465 6445 7272 6f72 2820 2023  ementedError(  #
+0000b5a0: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
+0000b5b0: 720a 2020 2020 2020 2020 2020 2020 6622  r.            f"
+0000b5c0: 7b74 7970 6528 7365 6c66 292e 5f5f 6e61  {type(self).__na
+0000b5d0: 6d65 5f5f 7d20 6d75 7374 2069 6d70 6c65  me__} must imple
+0000b5e0: 6d65 6e74 2060 2e5f 7072 756e 655f 7375  ment `._prune_su
+0000b5f0: 6274 6f74 616c 7360 220a 2020 2020 2020  btotals`".      
+0000b600: 2020 290a 0a20 2020 2040 6c61 7a79 7072    )..    @lazypr
+0000b610: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+0000b620: 726f 7773 5f64 696d 656e 7369 6f6e 2873  rows_dimension(s
+0000b630: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000b640: 2254 6865 2060 4469 6d65 6e73 696f 6e60  "The `Dimension`
+0000b650: 206f 626a 6563 7420 7265 7072 6573 656e   object represen
+0000b660: 7469 6e67 2072 6f77 2065 6c65 6d65 6e74  ting row element
+0000b670: 7320 696e 2074 6865 206d 6174 7269 782e  s in the matrix.
+0000b680: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0000b690: 726e 2073 656c 662e 5f64 696d 656e 7369  rn self._dimensi
+0000b6a0: 6f6e 735b 305d 0a0a 0a63 6c61 7373 205f  ons[0]...class _
+0000b6b0: 436f 6c75 6d6e 4f72 6465 7248 656c 7065  ColumnOrderHelpe
+0000b6c0: 7228 5f42 6173 654f 7264 6572 4865 6c70  r(_BaseOrderHelp
+0000b6d0: 6572 293a 0a20 2020 2022 2222 456e 6361  er):.    """Enca
+0000b6e0: 7073 756c 6174 6573 2074 6865 2063 6f6d  psulates the com
+0000b6f0: 706c 6578 6974 7920 6f66 2074 6865 2076  plexity of the v
+0000b700: 6172 696f 7573 206b 696e 6473 206f 6620  arious kinds of 
+0000b710: 636f 6c75 6d6e 206f 7264 6572 696e 672e  column ordering.
+0000b720: 2222 220a 0a20 2020 2040 6c61 7a79 7072  """..    @lazypr
+0000b730: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+0000b740: 6f72 6465 7228 7365 6c66 293a 0a20 2020  order(self):.   
+0000b750: 2020 2020 2022 2222 7475 706c 6520 6f66       """tuple of
+0000b760: 2073 6967 6e65 6420 696e 7420 6964 7820   signed int idx 
+0000b770: 666f 7220 6561 6368 2063 6f6c 756d 6e20  for each column 
+0000b780: 6f66 206d 6561 7375 7265 206d 6174 7269  of measure matri
+0000b790: 782e 0a0a 2020 2020 2020 2020 4e65 6761  x...        Nega
+0000b7a0: 7469 7665 2076 616c 7565 7320 7265 7072  tive values repr
+0000b7b0: 6573 656e 7420 696e 7365 7274 6564 2d76  esent inserted-v
+0000b7c0: 6563 746f 7220 6c6f 6361 7469 6f6e 732e  ector locations.
+0000b7d0: 2052 6574 7572 6e65 6420 7365 7175 656e   Returned sequen
+0000b7e0: 6365 2072 6566 6c65 6374 730a 2020 2020  ce reflects.    
+0000b7f0: 2020 2020 696e 7365 7274 696f 6e2c 2068      insertion, h
+0000b800: 6964 696e 672c 2070 7275 6e69 6e67 2c20  iding, pruning, 
+0000b810: 616e 6420 6f72 6465 7269 6e67 2074 7261  and ordering tra
+0000b820: 6e73 666f 726d 7320 7370 6563 6966 6965  nsforms specifie
+0000b830: 6420 696e 2074 6865 0a20 2020 2020 2020  d in the.       
+0000b840: 2072 6f77 732d 6469 6d65 6e73 696f 6e2e   rows-dimension.
+0000b850: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000b860: 2020 2020 2043 6f6c 6c61 746f 7243 6c73       CollatorCls
+0000b870: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+0000b880: 2045 7870 6c69 6369 744f 7264 6572 436f   ExplicitOrderCo
+0000b890: 6c6c 6174 6f72 0a20 2020 2020 2020 2020  llator.         
+0000b8a0: 2020 2069 6620 7365 6c66 2e5f 6f72 6465     if self._orde
+0000b8b0: 725f 7370 6563 2e63 6f6c 6c61 7469 6f6e  r_spec.collation
+0000b8c0: 5f6d 6574 686f 6420 3d3d 2043 4d2e 4558  _method == CM.EX
+0000b8d0: 504c 4943 4954 5f4f 5244 4552 0a20 2020  PLICIT_ORDER.   
+0000b8e0: 2020 2020 2020 2020 2065 6c73 6520 5061           else Pa
+0000b8f0: 796c 6f61 644f 7264 6572 436f 6c6c 6174  yloadOrderCollat
+0000b900: 6f72 0a20 2020 2020 2020 2029 0a20 2020  or.        ).   
+0000b910: 2020 2020 2072 6574 7572 6e20 436f 6c6c       return Coll
+0000b920: 6174 6f72 436c 732e 6469 7370 6c61 795f  atorCls.display_
+0000b930: 6f72 6465 7228 0a20 2020 2020 2020 2020  order(.         
+0000b940: 2020 2073 656c 662e 5f63 6f6c 756d 6e73     self._columns
+0000b950: 5f64 696d 656e 7369 6f6e 2c20 7365 6c66  _dimension, self
+0000b960: 2e5f 656d 7074 795f 636f 6c75 6d6e 5f69  ._empty_column_i
+0000b970: 6478 730a 2020 2020 2020 2020 290a 0a20  dxs.        ).. 
+0000b980: 2020 2040 6c61 7a79 7072 6f70 6572 7479     @lazyproperty
+0000b990: 0a20 2020 2064 6566 205f 6f72 6465 725f  .    def _order_
+0000b9a0: 7370 6563 2873 656c 6629 3a0a 2020 2020  spec(self):.    
+0000b9b0: 2020 2020 2222 225f 4f72 6465 7253 7065      """_OrderSpe
+0000b9c0: 6320 6f62 6a65 6374 2066 6f72 2074 6865  c object for the
+0000b9d0: 2063 6f6c 756d 6e73 2064 696d 656e 7369   columns dimensi
+0000b9e0: 6f6e 2e0a 0a20 2020 2020 2020 2050 726f  on...        Pro
+0000b9f0: 7669 6465 7320 6163 6365 7373 2074 6f20  vides access to 
+0000ba00: 6f72 6465 7269 6e67 2064 6574 6169 6c73  ordering details
+0000ba10: 206c 696b 6520 6d65 6173 7572 6520 616e   like measure an
+0000ba20: 6420 736f 7274 2d64 6972 6563 7469 6f6e  d sort-direction
+0000ba30: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000ba40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000ba50: 662e 5f63 6f6c 756d 6e73 5f64 696d 656e  f._columns_dimen
+0000ba60: 7369 6f6e 2e6f 7264 6572 5f73 7065 630a  sion.order_spec.
+0000ba70: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+0000ba80: 7479 0a20 2020 2064 6566 205f 7072 756e  ty.    def _prun
+0000ba90: 655f 7375 6274 6f74 616c 7328 7365 6c66  e_subtotals(self
+0000baa0: 293a 0a20 2020 2020 2020 2022 2222 5472  ):.        """Tr
+0000bab0: 7565 2069 6620 7375 6274 6f74 616c 2063  ue if subtotal c
+0000bac0: 6f6c 756d 6e73 206e 6565 6420 746f 2062  olumns need to b
+0000bad0: 6520 7072 756e 6564 2c20 4661 6c73 6520  e pruned, False 
+0000bae0: 6f74 6865 7277 6973 652e 0a0a 2020 2020  otherwise...    
+0000baf0: 2020 2020 5375 6274 6f74 616c 2d63 6f6c      Subtotal-col
+0000bb00: 756d 6e73 206e 6565 6420 746f 2062 6520  umns need to be 
+0000bb10: 7072 756e 6564 2077 6865 6e20 616c 6c20  pruned when all 
+0000bb20: 6261 7365 2d72 6f77 7320 6172 6520 7072  base-rows are pr
+0000bb30: 756e 6564 2e20 5375 6274 6f74 616c 0a20  uned. Subtotal. 
+0000bb40: 2020 2020 2020 2063 6f6c 756d 6e73 2061         columns a
+0000bb50: 7265 206f 6e6c 7920 7375 626a 6563 7420  re only subject 
+0000bb60: 746f 2070 7275 6e69 6e67 2077 6865 6e20  to pruning when 
+0000bb70: 726f 772d 7072 756e 696e 6720 6973 2073  row-pruning is s
+0000bb80: 7065 6369 6669 6564 2069 6e20 7468 650a  pecified in the.
+0000bb90: 2020 2020 2020 2020 7265 7175 6573 742e          request.
+0000bba0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000bbb0: 2020 2020 2072 6574 7572 6e20 280a 2020       return (.  
+0000bbc0: 2020 2020 2020 2020 2020 6c65 6e28 7365            len(se
+0000bbd0: 6c66 2e5f 656d 7074 795f 726f 775f 6964  lf._empty_row_id
+0000bbe0: 7873 2920 3d3d 206c 656e 2873 656c 662e  xs) == len(self.
+0000bbf0: 5f72 6f77 735f 6469 6d65 6e73 696f 6e2e  _rows_dimension.
+0000bc00: 656c 656d 656e 745f 6964 7329 0a20 2020  element_ids).   
+0000bc10: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0000bc20: 2e5f 726f 7773 5f64 696d 656e 7369 6f6e  ._rows_dimension
+0000bc30: 2e70 7275 6e65 0a20 2020 2020 2020 2020  .prune.         
+0000bc40: 2020 2065 6c73 6520 4661 6c73 650a 2020     else False.  
+0000bc50: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+0000bc60: 5f52 6f77 4f72 6465 7248 656c 7065 7228  _RowOrderHelper(
+0000bc70: 5f42 6173 654f 7264 6572 4865 6c70 6572  _BaseOrderHelper
+0000bc80: 293a 0a20 2020 2022 2222 456e 6361 7073  ):.    """Encaps
+0000bc90: 756c 6174 6573 2074 6865 2063 6f6d 706c  ulates the compl
+0000bca0: 6578 6974 7920 6f66 2074 6865 2076 6172  exity of the var
+0000bcb0: 696f 7573 206b 696e 6473 206f 6620 726f  ious kinds of ro
+0000bcc0: 7720 6f72 6465 7269 6e67 2e22 2222 0a0a  w ordering."""..
+0000bcd0: 2020 2020 406c 617a 7970 726f 7065 7274      @lazypropert
+0000bce0: 790a 2020 2020 6465 6620 5f6f 7264 6572  y.    def _order
+0000bcf0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000bd00: 2222 2274 7570 6c65 206f 6620 7369 676e  """tuple of sign
+0000bd10: 6564 2069 6e74 2069 6478 2066 6f72 2065  ed int idx for e
+0000bd20: 6163 6820 726f 7720 6f66 206d 6561 7375  ach row of measu
+0000bd30: 7265 206d 6174 7269 782e 0a0a 2020 2020  re matrix...    
+0000bd40: 2020 2020 4e65 6761 7469 7665 2076 616c      Negative val
+0000bd50: 7565 7320 7265 7072 6573 656e 7420 696e  ues represent in
+0000bd60: 7365 7274 6564 2d76 6563 746f 7220 6c6f  serted-vector lo
+0000bd70: 6361 7469 6f6e 732e 2052 6574 7572 6e65  cations. Returne
+0000bd80: 6420 7365 7175 656e 6365 2072 6566 6c65  d sequence refle
+0000bd90: 6374 730a 2020 2020 2020 2020 696e 7365  cts.        inse
+0000bda0: 7274 696f 6e2c 2068 6964 696e 672c 2070  rtion, hiding, p
+0000bdb0: 7275 6e69 6e67 2c20 616e 6420 6f72 6465  runing, and orde
+0000bdc0: 7269 6e67 2074 7261 6e73 666f 726d 7320  ring transforms 
+0000bdd0: 7370 6563 6966 6965 6420 696e 2074 6865  specified in the
+0000bde0: 0a20 2020 2020 2020 2072 6f77 732d 6469  .        rows-di
+0000bdf0: 6d65 6e73 696f 6e2e 0a20 2020 2020 2020  mension..       
+0000be00: 2022 2222 0a20 2020 2020 2020 2043 6f6c   """.        Col
+0000be10: 6c61 746f 7243 6c73 203d 2028 0a20 2020  latorCls = (.   
+0000be20: 2020 2020 2020 2020 2045 7870 6c69 6369           Explici
+0000be30: 744f 7264 6572 436f 6c6c 6174 6f72 0a20  tOrderCollator. 
+0000be40: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0000be50: 6c66 2e5f 6f72 6465 725f 7370 6563 2e63  lf._order_spec.c
+0000be60: 6f6c 6c61 7469 6f6e 5f6d 6574 686f 6420  ollation_method 
+0000be70: 3d3d 2043 4d2e 4558 504c 4943 4954 5f4f  == CM.EXPLICIT_O
+0000be80: 5244 4552 0a20 2020 2020 2020 2020 2020  RDER.           
+0000be90: 2065 6c73 6520 5061 796c 6f61 644f 7264   else PayloadOrd
+0000bea0: 6572 436f 6c6c 6174 6f72 0a20 2020 2020  erCollator.     
+0000beb0: 2020 2029 0a20 2020 2020 2020 2072 6574     ).        ret
+0000bec0: 7572 6e20 436f 6c6c 6174 6f72 436c 732e  urn CollatorCls.
+0000bed0: 6469 7370 6c61 795f 6f72 6465 7228 7365  display_order(se
+0000bee0: 6c66 2e5f 726f 7773 5f64 696d 656e 7369  lf._rows_dimensi
+0000bef0: 6f6e 2c20 7365 6c66 2e5f 656d 7074 795f  on, self._empty_
+0000bf00: 726f 775f 6964 7873 290a 0a20 2020 2040  row_idxs)..    @
+0000bf10: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+0000bf20: 2064 6566 205f 6f72 6465 725f 7370 6563   def _order_spec
+0000bf30: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000bf40: 2222 225f 4f72 6465 7253 7065 6320 6f62  """_OrderSpec ob
+0000bf50: 6a65 6374 2066 6f72 2074 6869 7320 726f  ject for this ro
+0000bf60: 7720 6469 6d65 6e73 696f 6e2e 0a0a 2020  w dimension...  
+0000bf70: 2020 2020 2020 5072 6f76 6964 6573 2061        Provides a
+0000bf80: 6363 6573 7320 746f 206f 7264 6572 696e  ccess to orderin
+0000bf90: 6720 6465 7461 696c 7320 6c69 6b65 206d  g details like m
+0000bfa0: 6561 7375 7265 2061 6e64 2073 6f72 742d  easure and sort-
+0000bfb0: 6469 7265 6374 696f 6e2e 0a20 2020 2020  direction..     
+0000bfc0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+0000bfd0: 6574 7572 6e20 7365 6c66 2e5f 726f 7773  eturn self._rows
+0000bfe0: 5f64 696d 656e 7369 6f6e 2e6f 7264 6572  _dimension.order
+0000bff0: 5f73 7065 630a 0a20 2020 2040 6c61 7a79  _spec..    @lazy
+0000c000: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+0000c010: 205f 7072 756e 655f 7375 6274 6f74 616c   _prune_subtotal
+0000c020: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000c030: 2022 2222 5472 7565 2069 6620 7375 6274   """True if subt
+0000c040: 6f74 616c 2072 6f77 7320 6e65 6564 2074  otal rows need t
+0000c050: 6f20 6265 2070 7275 6e65 642c 2046 616c  o be pruned, Fal
+0000c060: 7365 206f 7468 6572 7769 7365 2e0a 0a20  se otherwise... 
+0000c070: 2020 2020 2020 2053 7562 746f 7461 6c2d         Subtotal-
+0000c080: 726f 7773 206e 6565 6420 746f 2062 6520  rows need to be 
+0000c090: 7072 756e 6564 2077 6865 6e20 616c 6c20  pruned when all 
+0000c0a0: 6261 7365 2d63 6f6c 756d 6e73 2061 7265  base-columns are
+0000c0b0: 2070 7275 6e65 642e 2053 7562 746f 7461   pruned. Subtota
+0000c0c0: 6c20 726f 7773 0a20 2020 2020 2020 206f  l rows.        o
+0000c0d0: 6e6c 7920 7375 626a 6563 7420 746f 2070  nly subject to p
+0000c0e0: 7275 6e69 6e67 2077 6865 6e20 636f 6c75  runing when colu
+0000c0f0: 6d6e 2d70 7275 6e69 6e67 2069 7320 7370  mn-pruning is sp
+0000c100: 6563 6966 6965 6420 696e 2074 6865 2072  ecified in the r
+0000c110: 6571 7565 7374 2e0a 2020 2020 2020 2020  equest..        
+0000c120: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0000c130: 726e 2028 0a20 2020 2020 2020 2020 2020  rn (.           
+0000c140: 206c 656e 2873 656c 662e 5f65 6d70 7479   len(self._empty
+0000c150: 5f63 6f6c 756d 6e5f 6964 7873 2920 3d3d  _column_idxs) ==
+0000c160: 206c 656e 2873 656c 662e 5f63 6f6c 756d   len(self._colum
+0000c170: 6e73 5f64 696d 656e 7369 6f6e 2e65 6c65  ns_dimension.ele
+0000c180: 6d65 6e74 5f69 6473 290a 2020 2020 2020  ment_ids).      
+0000c190: 2020 2020 2020 6966 2073 656c 662e 5f63        if self._c
+0000c1a0: 6f6c 756d 6e73 5f64 696d 656e 7369 6f6e  olumns_dimension
+0000c1b0: 2e70 7275 6e65 0a20 2020 2020 2020 2020  .prune.         
+0000c1c0: 2020 2065 6c73 6520 4661 6c73 650a 2020     else False.  
+0000c1d0: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+0000c1e0: 5f42 6173 6553 6f72 7452 6f77 7342 7956  _BaseSortRowsByV
+0000c1f0: 616c 7565 4865 6c70 6572 285f 526f 774f  alueHelper(_RowO
+0000c200: 7264 6572 4865 6c70 6572 293a 0a20 2020  rderHelper):.   
+0000c210: 2022 2222 4120 6261 7365 2063 6c61 7373   """A base class
+0000c220: 2074 6861 7420 6f72 6465 7273 2065 6c65   that orders ele
+0000c230: 6d65 6e74 7320 6279 2061 2073 6574 206f  ments by a set o
+0000c240: 6620 7661 6c75 6573 2e0a 0a20 2020 2054  f values...    T
+0000c250: 6869 7320 636c 6173 7320 6973 2069 6e74  his class is int
+0000c260: 656e 6465 6420 6f6e 6c79 2074 6f20 7365  ended only to se
+0000c270: 7276 6520 6173 2061 2062 6173 6520 666f  rve as a base fo
+0000c280: 7220 7468 6520 6f74 6865 7220 736f 7274  r the other sort
+0000c290: 2d62 792d 7661 6c75 6520 636c 6173 7365  -by-value classe
+0000c2a0: 730a 2020 2020 7768 6963 6820 6d75 7374  s.    which must
+0000c2b0: 2061 6c6c 2070 726f 7669 6465 2074 6865   all provide the
+0000c2c0: 6972 206f 776e 2069 6d70 6c65 6e74 6174  ir own implentat
+0000c2d0: 696f 6e73 206f 6620 605f 656c 656d 656e  ions of `_elemen
+0000c2e0: 745f 7661 6c75 6573 6020 616e 640a 2020  t_values` and.  
+0000c2f0: 2020 605f 7375 6274 6f74 616c 5f76 616c    `_subtotal_val
+0000c300: 7565 7360 2e0a 0a20 2020 2049 6620 605f  ues`...    If `_
+0000c310: 6f72 6465 7260 2065 6e63 6f75 7465 7273  order` encouters
+0000c320: 2061 2056 616c 7565 4572 726f 722c 2069   a ValueError, i
+0000c330: 7420 6661 6c6c 7320 6261 636b 2074 6f20  t falls back to 
+0000c340: 7468 6520 7061 796c 6f61 6420 6f72 6465  the payload orde
+0000c350: 722e 0a20 2020 2022 2222 0a0a 2020 2020  r..    """..    
+0000c360: 406c 617a 7970 726f 7065 7274 790a 2020  @lazyproperty.  
+0000c370: 2020 6465 6620 5f65 6c65 6d65 6e74 5f76    def _element_v
+0000c380: 616c 7565 7328 7365 6c66 293a 0a20 2020  alues(self):.   
+0000c390: 2020 2020 2022 2222 5365 7175 656e 6365       """Sequence
+0000c3a0: 206f 6620 626f 6479 2076 616c 7565 7320   of body values 
+0000c3b0: 7468 6174 2066 6f72 6d20 7468 6520 6261  that form the ba
+0000c3c0: 7369 7320 666f 7220 736f 7274 206f 7264  sis for sort ord
+0000c3d0: 6572 2e0a 0a20 2020 2020 2020 204d 7573  er...        Mus
+0000c3e0: 7420 6265 2069 6d70 6c65 6d65 6e74 6564  t be implemented
+0000c3f0: 2062 7920 6368 696c 6420 636c 6173 7365   by child classe
+0000c400: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+0000c410: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
+0000c420: 496d 706c 656d 656e 7465 6445 7272 6f72  ImplementedError
+0000c430: 2820 2023 2070 7261 676d 613a 206e 6f20  (  # pragma: no 
+0000c440: 636f 7665 720a 2020 2020 2020 2020 2020  cover.          
+0000c450: 2020 6622 7b74 7970 6528 7365 6c66 292e    f"{type(self).
+0000c460: 5f5f 6e61 6d65 5f5f 7d20 6d75 7374 2069  __name__} must i
+0000c470: 6d70 6c65 6d65 6e74 2060 2e5f 656c 656d  mplement `._elem
+0000c480: 656e 745f 7661 6c75 6573 6022 0a20 2020  ent_values`".   
+0000c490: 2020 2020 2029 0a0a 2020 2020 406c 617a       )..    @laz
+0000c4a0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000c4b0: 6620 5f6f 7264 6572 2873 656c 6629 3a0a  f _order(self):.
+0000c4c0: 2020 2020 2020 2020 2222 2274 7570 6c65          """tuple
+0000c4d0: 206f 6620 696e 7420 656c 656d 656e 742d   of int element-
+0000c4e0: 6964 7820 7370 6563 6966 7969 6e67 206f  idx specifying o
+0000c4f0: 7264 6572 696e 6720 6f66 2064 696d 656e  rdering of dimen
+0000c500: 7369 6f6e 2065 6c65 6d65 6e74 732e 2222  sion elements.""
+0000c510: 220a 2020 2020 2020 2020 7472 793a 0a20  ".        try:. 
+0000c520: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000c530: 6e20 536f 7274 4279 5661 6c75 6543 6f6c  n SortByValueCol
+0000c540: 6c61 746f 722e 6469 7370 6c61 795f 6f72  lator.display_or
+0000c550: 6465 7228 0a20 2020 2020 2020 2020 2020  der(.           
+0000c560: 2020 2020 2073 656c 662e 5f72 6f77 735f       self._rows_
+0000c570: 6469 6d65 6e73 696f 6e2c 0a20 2020 2020  dimension,.     
+0000c580: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000c590: 5f65 6c65 6d65 6e74 5f76 616c 7565 732c  _element_values,
+0000c5a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c5b0: 2073 656c 662e 5f73 7562 746f 7461 6c5f   self._subtotal_
+0000c5c0: 7661 6c75 6573 2c0a 2020 2020 2020 2020  values,.        
+0000c5d0: 2020 2020 2020 2020 7365 6c66 2e5f 656d          self._em
+0000c5e0: 7074 795f 726f 775f 6964 7873 2c0a 2020  pty_row_idxs,.  
+0000c5f0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000c600: 2020 2020 6578 6365 7074 2056 616c 7565      except Value
+0000c610: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
+0000c620: 2020 2072 6574 7572 6e20 5061 796c 6f61     return Payloa
+0000c630: 644f 7264 6572 436f 6c6c 6174 6f72 2e64  dOrderCollator.d
+0000c640: 6973 706c 6179 5f6f 7264 6572 280a 2020  isplay_order(.  
+0000c650: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000c660: 6c66 2e5f 726f 7773 5f64 696d 656e 7369  lf._rows_dimensi
+0000c670: 6f6e 2c20 7365 6c66 2e5f 656d 7074 795f  on, self._empty_
+0000c680: 726f 775f 6964 7873 0a20 2020 2020 2020  row_idxs.       
+0000c690: 2020 2020 2029 0a0a 2020 2020 406c 617a       )..    @laz
+0000c6a0: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000c6b0: 6620 5f73 7562 746f 7461 6c5f 7661 6c75  f _subtotal_valu
+0000c6c0: 6573 2873 656c 6629 3a0a 2020 2020 2020  es(self):.      
+0000c6d0: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
+0000c6e0: 2073 7562 746f 7461 6c20 7661 6c75 6573   subtotal values
+0000c6f0: 2074 6861 7420 666f 726d 2074 6865 2062   that form the b
+0000c700: 6173 6973 2066 6f72 2073 6f72 7420 6f72  asis for sort or
+0000c710: 6465 722e 0a0a 2020 2020 2020 2020 4d75  der...        Mu
+0000c720: 7374 2062 6520 696d 706c 656d 656e 7465  st be implemente
+0000c730: 6420 6279 2063 6869 6c64 2063 6c61 7373  d by child class
+0000c740: 6573 2e0a 2020 2020 2020 2020 2222 220a  es..        """.
+0000c750: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+0000c760: 7449 6d70 6c65 6d65 6e74 6564 4572 726f  tImplementedErro
+0000c770: 7228 2020 2320 7072 6167 6d61 3a20 6e6f  r(  # pragma: no
+0000c780: 2063 6f76 6572 0a20 2020 2020 2020 2020   cover.         
+0000c790: 2020 2066 227b 7479 7065 2873 656c 6629     f"{type(self)
+0000c7a0: 2e5f 5f6e 616d 655f 5f7d 206d 7573 7420  .__name__} must 
+0000c7b0: 696d 706c 656d 656e 7420 602e 5f73 7562  implement `._sub
+0000c7c0: 746f 7461 6c5f 7661 6c75 6573 6022 0a20  total_values`". 
+0000c7d0: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
+0000c7e0: 205f 536f 7274 526f 7773 4279 4261 7365   _SortRowsByBase
+0000c7f0: 436f 6c75 6d6e 4865 6c70 6572 285f 4261  ColumnHelper(_Ba
+0000c800: 7365 536f 7274 526f 7773 4279 5661 6c75  seSortRowsByValu
+0000c810: 6548 656c 7065 7229 3a0a 2020 2020 2222  eHelper):.    ""
+0000c820: 224f 7264 6572 7320 656c 656d 656e 7473  "Orders elements
+0000c830: 2062 7920 7468 6520 7661 6c75 6573 206f   by the values o
+0000c840: 6620 616e 206f 7070 6f73 696e 6720 6261  f an opposing ba
+0000c850: 7365 2028 6e6f 7420 6120 7375 6274 6f74  se (not a subtot
+0000c860: 616c 2920 7665 6374 6f72 2e0a 0a20 2020  al) vector...   
+0000c870: 2054 6869 7320 776f 756c 6420 6265 206c   This would be l
+0000c880: 696b 6520 226f 7264 6572 2072 6f77 7320  ike "order rows 
+0000c890: 696e 2064 6573 6365 6e64 696e 6720 6f72  in descending or
+0000c8a0: 6465 7220 6279 2076 616c 7565 206f 6620  der by value of 
+0000c8b0: 2753 7472 6f6e 676c 7920 4167 7265 6527  'Strongly Agree'
+0000c8c0: 0a20 2020 2063 6f6c 756d 6e2e 2041 6e20  .    column. An 
+0000c8d0: 6f70 706f 7369 6e67 2d65 6c65 6d65 6e74  opposing-element
+0000c8e0: 206f 7264 6572 696e 6720 6973 206f 6e6c   ordering is onl
+0000c8f0: 7920 6176 6169 6c61 626c 6520 6f6e 2061  y available on a
+0000c900: 206d 6174 7269 782c 2062 6563 6175 7365   matrix, because
+0000c910: 206f 6e6c 790a 2020 2020 6120 6d61 7472   only.    a matr
+0000c920: 6978 2064 696d 656e 7369 6f6e 2068 6173  ix dimension has
+0000c930: 2061 6e20 6f70 706f 7369 6e67 2064 696d   an opposing dim
+0000c940: 656e 7369 6f6e 2e0a 2020 2020 2222 220a  ension..    """.
+0000c950: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+0000c960: 7479 0a20 2020 2064 6566 205f 636f 6c75  ty.    def _colu
+0000c970: 6d6e 5f69 6478 2873 656c 6629 3a0a 2020  mn_idx(self):.  
+0000c980: 2020 2020 2020 2222 2269 6e74 2069 6e64        """int ind
+0000c990: 6578 206f 6620 636f 6c75 6d6e 2077 686f  ex of column who
+0000c9a0: 7365 2076 616c 7565 7320 7468 6520 736f  se values the so
+0000c9b0: 7274 2069 7320 6261 7365 6420 6f6e 2e22  rt is based on."
+0000c9c0: 2222 0a20 2020 2020 2020 2063 6f6c 756d  "".        colum
+0000c9d0: 6e5f 656c 656d 656e 745f 6964 7320 3d20  n_element_ids = 
+0000c9e0: 7365 6c66 2e5f 636f 6c75 6d6e 735f 6469  self._columns_di
+0000c9f0: 6d65 6e73 696f 6e2e 656c 656d 656e 745f  mension.element_
+0000ca00: 6964 730a 2020 2020 2020 2020 736f 7274  ids.        sort
+0000ca10: 5f63 6f6c 756d 6e5f 6964 203d 2073 656c  _column_id = sel
+0000ca20: 662e 5f6f 7264 6572 5f73 7065 632e 656c  f._order_spec.el
+0000ca30: 656d 656e 745f 6964 0a20 2020 2020 2020  ement_id.       
+0000ca40: 2023 202d 2d2d 204e 6565 6420 746f 2074   # --- Need to t
+0000ca50: 7261 6e73 6c61 7465 2074 6865 2065 6c65  ranslate the ele
+0000ca60: 6d65 6e74 2069 6420 746f 2074 6865 2073  ment id to the s
+0000ca70: 6869 6d6d 6564 2065 6c65 6d65 6e74 2069  himmed element i
+0000ca80: 640a 2020 2020 2020 2020 736f 7274 5f63  d.        sort_c
+0000ca90: 6f6c 756d 6e5f 6964 203d 2073 656c 662e  olumn_id = self.
+0000caa0: 5f63 6f6c 756d 6e73 5f64 696d 656e 7369  _columns_dimensi
+0000cab0: 6f6e 2e74 7261 6e73 6c61 7465 5f65 6c65  on.translate_ele
+0000cac0: 6d65 6e74 5f69 6428 736f 7274 5f63 6f6c  ment_id(sort_col
+0000cad0: 756d 6e5f 6964 290a 2020 2020 2020 2020  umn_id).        
+0000cae0: 7265 7475 726e 2063 6f6c 756d 6e5f 656c  return column_el
+0000caf0: 656d 656e 745f 6964 732e 696e 6465 7828  ement_ids.index(
+0000cb00: 736f 7274 5f63 6f6c 756d 6e5f 6964 290a  sort_column_id).
+0000cb10: 0a20 2020 2040 6c61 7a79 7072 6f70 6572  .    @lazyproper
+0000cb20: 7479 0a20 2020 2064 6566 205f 656c 656d  ty.    def _elem
+0000cb30: 656e 745f 7661 6c75 6573 2873 656c 6629  ent_values(self)
+0000cb40: 3a0a 2020 2020 2020 2020 2222 2253 6571  :.        """Seq
+0000cb50: 7565 6e63 6520 6f66 2062 6f64 7920 7661  uence of body va
+0000cb60: 6c75 6573 2074 6861 7420 666f 726d 2074  lues that form t
+0000cb70: 6865 2062 6173 6973 2066 6f72 2073 6f72  he basis for sor
+0000cb80: 7420 6f72 6465 722e 0a0a 2020 2020 2020  t order...      
+0000cb90: 2020 5468 6572 6520 6973 206f 6e65 2076    There is one v
+0000cba0: 616c 7565 2070 6572 2072 6f77 2061 6e64  alue per row and
+0000cbb0: 2076 616c 7565 7320 6170 7065 6172 2069   values appear i
+0000cbc0: 6e20 7061 796c 6f61 6420 2864 696d 656e  n payload (dimen
+0000cbd0: 7369 6f6e 2920 656c 656d 656e 740a 2020  sion) element.  
+0000cbe0: 2020 2020 2020 6f72 6465 722e 2054 6865        order. The
+0000cbf0: 7365 2061 7265 206f 6e6c 7920 7468 6520  se are only the 
+0000cc00: 2262 6173 6522 2076 616c 7565 7320 616e  "base" values an
+0000cc10: 6420 646f 206e 6f74 2069 6e63 6c75 6465  d do not include
+0000cc20: 2069 6e73 6572 7469 6f6e 732e 0a20 2020   insertions..   
+0000cc30: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000cc40: 206d 6561 7375 7265 5f62 6173 655f 7661   measure_base_va
+0000cc50: 6c75 6573 203d 2073 656c 662e 5f6d 6561  lues = self._mea
+0000cc60: 7375 7265 2e62 6c6f 636b 735b 305d 5b30  sure.blocks[0][0
+0000cc70: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
+0000cc80: 206d 6561 7375 7265 5f62 6173 655f 7661   measure_base_va
+0000cc90: 6c75 6573 5b3a 2c20 7365 6c66 2e5f 636f  lues[:, self._co
+0000cca0: 6c75 6d6e 5f69 6478 5d0a 0a20 2020 2040  lumn_idx]..    @
+0000ccb0: 6c61 7a79 7072 6f70 6572 7479 0a20 2020  lazyproperty.   
+0000ccc0: 2064 6566 205f 7375 6274 6f74 616c 5f76   def _subtotal_v
+0000ccd0: 616c 7565 7328 7365 6c66 293a 0a20 2020  alues(self):.   
+0000cce0: 2020 2020 2022 2222 5365 7175 656e 6365       """Sequence
+0000ccf0: 206f 6620 726f 772d 7375 6274 6f74 616c   of row-subtotal
+0000cd00: 2076 616c 7565 7320 7468 6174 2063 6f6e   values that con
+0000cd10: 7472 6962 7574 6520 746f 2074 6865 2073  tribute to the s
+0000cd20: 6f72 7420 6261 7369 732e 0a0a 2020 2020  ort basis...    
+0000cd30: 2020 2020 5468 6572 6520 6973 206f 6e65      There is one
+0000cd40: 2076 616c 7565 2070 6572 2072 6f77 2073   value per row s
+0000cd50: 7562 746f 7461 6c20 616e 6420 7661 6c75  ubtotal and valu
+0000cd60: 6573 2061 7070 6561 7220 696e 2070 6179  es appear in pay
+0000cd70: 6c6f 6164 2028 6469 6d65 6e73 696f 6e29  load (dimension)
+0000cd80: 0a20 2020 2020 2020 2069 6e73 6572 7469  .        inserti
+0000cd90: 6f6e 206f 7264 6572 2e0a 2020 2020 2020  on order..      
+0000cda0: 2020 2222 220a 2020 2020 2020 2020 6d65    """.        me
+0000cdb0: 6173 7572 655f 7375 6274 6f74 616c 5f72  asure_subtotal_r
+0000cdc0: 6f77 7320 3d20 7365 6c66 2e5f 6d65 6173  ows = self._meas
+0000cdd0: 7572 652e 626c 6f63 6b73 5b31 5d5b 305d  ure.blocks[1][0]
+0000cde0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000cdf0: 6d65 6173 7572 655f 7375 6274 6f74 616c  measure_subtotal
+0000ce00: 5f72 6f77 735b 3a2c 2073 656c 662e 5f63  _rows[:, self._c
+0000ce10: 6f6c 756d 6e5f 6964 785d 0a0a 0a63 6c61  olumn_idx]...cla
+0000ce20: 7373 205f 536f 7274 526f 7773 4279 4465  ss _SortRowsByDe
+0000ce30: 7269 7665 6443 6f6c 756d 6e48 656c 7065  rivedColumnHelpe
+0000ce40: 7228 5f53 6f72 7452 6f77 7342 7942 6173  r(_SortRowsByBas
+0000ce50: 6543 6f6c 756d 6e48 656c 7065 7229 3a0a  eColumnHelper):.
+0000ce60: 2020 2020 2222 224f 7264 6572 7320 656c      """Orders el
+0000ce70: 656d 656e 7473 2062 7920 7468 6520 7661  ements by the va
+0000ce80: 6c75 6573 206f 6620 616e 206f 7070 6f73  lues of an oppos
+0000ce90: 696e 6720 2264 6572 6976 6564 2220 656c  ing "derived" el
+0000cea0: 656d 656e 7420 7665 6374 6f72 2e0a 0a20  ement vector... 
+0000ceb0: 2020 2022 4465 7269 7665 6422 2063 6f6c     "Derived" col
+0000cec0: 756d 6e73 2061 7265 2069 6e73 6572 7469  umns are inserti
+0000ced0: 6f6e 7320 7468 6174 2061 7265 2063 616c  ons that are cal
+0000cee0: 6375 6c61 7465 6420 6279 207a 7a39 2061  culated by zz9 a
+0000cef0: 6e64 2070 7574 2069 6e74 6f20 7468 650a  nd put into the.
+0000cf00: 2020 2020 6375 6265 2072 6573 756c 7420      cube result 
+0000cf10: 6265 666f 7265 2074 6869 7320 6372 2e63  before this cr.c
+0000cf20: 7562 6520 6c69 6272 6172 7920 6765 7473  ube library gets
+0000cf30: 2074 6865 6d2e 2054 6865 7365 2069 6e73   them. These ins
+0000cf40: 6572 7469 6f6e 7320 6172 6520 616c 7761  ertions are alwa
+0000cf50: 7973 0a20 2020 206f 6e20 6120 7375 6276  ys.    on a subv
+0000cf60: 6172 6961 626c 6520 6469 6d65 6e73 696f  ariable dimensio
+0000cf70: 6e2c 2061 6e20 6578 616d 706c 6520 776f  n, an example wo
+0000cf80: 756c 6420 6265 2074 6f20 736f 7274 2022  uld be to sort "
+0000cf90: 2743 6f6b 6527 206f 7220 2744 6965 7420  'Coke' or 'Diet 
+0000cfa0: 436f 6b65 2722 0a20 2020 204d 5220 6172  Coke'".    MR ar
+0000cfb0: 7261 7920 636f 6c75 6d6e 2e20 416e 206f  ray column. An o
+0000cfc0: 7070 6f73 696e 672d 656c 656d 656e 7420  pposing-element 
+0000cfd0: 6f72 6465 7269 6e67 2069 7320 6f6e 6c79  ordering is only
+0000cfe0: 2061 7661 696c 6162 6c65 206f 6e20 6120   available on a 
+0000cff0: 6d61 7472 6978 2c0a 2020 2020 6265 6361  matrix,.    beca
+0000d000: 7573 6520 6f6e 6c79 2061 206d 6174 7269  use only a matri
+0000d010: 7820 6469 6d65 6e73 696f 6e20 6861 7320  x dimension has 
+0000d020: 616e 206f 7070 6f73 696e 6720 6469 6d65  an opposing dime
+0000d030: 6e73 696f 6e2e 0a0a 2020 2020 466f 7220  nsion...    For 
+0000d040: 7468 6520 6d6f 7374 2070 6172 742c 2077  the most part, w
+0000d050: 6520 7472 6561 7420 7468 6573 6520 656c  e treat these el
+0000d060: 656d 656e 7473 2061 7320 7265 6775 6c61  ements as regula
+0000d070: 7220 2262 6173 6522 2063 6f6c 756d 6e73  r "base" columns
+0000d080: 2c20 696e 2074 6865 2063 722e 6375 6265  , in the cr.cube
+0000d090: 0a20 2020 206c 6962 7261 7279 2c20 6275  .    library, bu
+0000d0a0: 7420 6265 6361 7573 6520 7468 6520 7573  t because the us
+0000d0b0: 6572 2d66 6163 696e 6720 6c61 6e67 7561  er-facing langua
+0000d0c0: 6765 2074 7265 6174 7320 7468 6573 6520  ge treats these 
+0000d0d0: 6173 2073 7562 746f 7461 6c73 2c20 7765  as subtotals, we
+0000d0e0: 2061 6c6c 6f77 0a20 2020 2073 7065 6369   allow.    speci
+0000d0f0: 6679 696e 6720 736f 7274 2d62 792d 7661  fying sort-by-va
+0000d100: 6c75 6520 6173 2069 6620 7468 6573 6520  lue as if these 
+0000d110: 7765 7265 2074 7275 6520 7375 6274 6f74  were true subtot
+0000d120: 616c 732e 0a20 2020 2022 2222 0a0a 2020  als..    """..  
+0000d130: 2020 406c 617a 7970 726f 7065 7274 790a    @lazyproperty.
+0000d140: 2020 2020 6465 6620 5f63 6f6c 756d 6e5f      def _column_
+0000d150: 6964 7828 7365 6c66 293a 0a20 2020 2020  idx(self):.     
+0000d160: 2020 2022 2222 696e 7420 696e 6465 7820     """int index 
+0000d170: 6f66 2063 6f6c 756d 6e20 7768 6f73 6520  of column whose 
+0000d180: 7661 6c75 6573 2074 6865 2073 6f72 7420  values the sort 
+0000d190: 6973 2062 6173 6564 206f 6e2e 2222 220a  is based on.""".
+0000d1a0: 2020 2020 2020 2020 636f 6c75 6d6e 5f65          column_e
+0000d1b0: 6c65 6d65 6e74 5f69 6473 203d 2073 656c  lement_ids = sel
+0000d1c0: 662e 5f63 6f6c 756d 6e73 5f64 696d 656e  f._columns_dimen
+0000d1d0: 7369 6f6e 2e65 6c65 6d65 6e74 5f69 6473  sion.element_ids
+0000d1e0: 0a20 2020 2020 2020 2073 6f72 745f 636f  .        sort_co
+0000d1f0: 6c75 6d6e 5f69 6420 3d20 7365 6c66 2e5f  lumn_id = self._
+0000d200: 6f72 6465 725f 7370 6563 2e69 6e73 6572  order_spec.inser
+0000d210: 7469 6f6e 5f69 640a 2020 2020 2020 2020  tion_id.        
+0000d220: 2320 2d2d 2d20 4e65 6564 2074 6f20 7472  # --- Need to tr
+0000d230: 616e 736c 6174 6520 7468 6520 656c 656d  anslate the elem
+0000d240: 656e 7420 6964 2074 6f20 7468 6520 7368  ent id to the sh
+0000d250: 696d 6d65 6420 656c 656d 656e 7420 6964  immed element id
+0000d260: 0a20 2020 2020 2020 2073 6f72 745f 636f  .        sort_co
+0000d270: 6c75 6d6e 5f69 6420 3d20 7365 6c66 2e5f  lumn_id = self._
+0000d280: 636f 6c75 6d6e 735f 6469 6d65 6e73 696f  columns_dimensio
+0000d290: 6e2e 7472 616e 736c 6174 655f 656c 656d  n.translate_elem
+0000d2a0: 656e 745f 6964 2873 6f72 745f 636f 6c75  ent_id(sort_colu
+0000d2b0: 6d6e 5f69 6429 0a20 2020 2020 2020 2072  mn_id).        r
+0000d2c0: 6574 7572 6e20 636f 6c75 6d6e 5f65 6c65  eturn column_ele
+0000d2d0: 6d65 6e74 5f69 6473 2e69 6e64 6578 2873  ment_ids.index(s
+0000d2e0: 6f72 745f 636f 6c75 6d6e 5f69 6429 0a0a  ort_column_id)..
+0000d2f0: 0a63 6c61 7373 205f 536f 7274 526f 7773  .class _SortRows
+0000d300: 4279 496e 7365 7274 6564 436f 6c75 6d6e  ByInsertedColumn
+0000d310: 4865 6c70 6572 285f 4261 7365 536f 7274  Helper(_BaseSort
+0000d320: 526f 7773 4279 5661 6c75 6548 656c 7065  RowsByValueHelpe
+0000d330: 7229 3a0a 2020 2020 2222 224f 7264 6572  r):.    """Order
+0000d340: 7320 726f 7773 2062 7920 7468 6520 7661  s rows by the va
+0000d350: 6c75 6573 2069 6e20 616e 2069 6e73 6572  lues in an inser
+0000d360: 7465 6420 636f 6c75 6d6e 2e0a 0a20 2020  ted column...   
+0000d370: 2054 6869 7320 776f 756c 6420 6265 206c   This would be l
+0000d380: 696b 6520 226f 7264 6572 2072 6f77 7320  ike "order rows 
+0000d390: 696e 2064 6573 6365 6e64 696e 6720 6f72  in descending or
+0000d3a0: 6465 7220 6279 2076 616c 7565 206f 6620  der by value of 
+0000d3b0: 2754 6f70 2033 2720 7375 6274 6f74 616c  'Top 3' subtotal
+0000d3c0: 0a20 2020 2063 6f6c 756d 6e2e 2041 6e20  .    column. An 
+0000d3d0: 6f70 706f 7369 6e67 2d69 6e73 6572 7469  opposing-inserti
+0000d3e0: 6f6e 206f 7264 6572 696e 6720 6973 206f  on ordering is o
+0000d3f0: 6e6c 7920 6176 6169 6c61 626c 6520 6f6e  nly available on
+0000d400: 2061 206d 6174 7269 7820 6265 6361 7573   a matrix becaus
+0000d410: 6520 6f6e 6c79 0a20 2020 2061 206d 6174  e only.    a mat
+0000d420: 7269 7820 6469 6d65 6e73 696f 6e20 6861  rix dimension ha
+0000d430: 7320 616e 206f 7070 6f73 696e 6720 6469  s an opposing di
+0000d440: 6d65 6e73 696f 6e2e 0a20 2020 2022 2222  mension..    """
+0000d450: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+0000d460: 7274 790a 2020 2020 6465 6620 5f65 6c65  rty.    def _ele
+0000d470: 6d65 6e74 5f76 616c 7565 7328 7365 6c66  ment_values(self
+0000d480: 293a 0a20 2020 2020 2020 2022 2222 5365  ):.        """Se
+0000d490: 7175 656e 6365 206f 6620 696e 7365 7274  quence of insert
+0000d4a0: 696f 6e20 2262 6f64 7922 2076 616c 7565  ion "body" value
+0000d4b0: 7320 7468 6174 2066 6f72 6d20 7468 6520  s that form the 
+0000d4c0: 6261 7369 7320 666f 7220 736f 7274 206f  basis for sort o
+0000d4d0: 7264 6572 2e0a 0a20 2020 2020 2020 2054  rder...        T
+0000d4e0: 6865 7265 2069 7320 6f6e 6520 7661 6c75  here is one valu
+0000d4f0: 6520 7065 7220 6261 7365 2072 6f77 2061  e per base row a
+0000d500: 6e64 2076 616c 7565 7320 6170 7065 6172  nd values appear
+0000d510: 2069 6e20 7061 796c 6f61 6420 6f72 6465   in payload orde
+0000d520: 722e 2054 6865 7365 2061 7265 0a20 2020  r. These are.   
+0000d530: 2020 2020 206f 6e6c 7920 7468 6520 2262       only the "b
+0000d540: 6173 6522 2069 6e73 6572 7469 6f6e 2076  ase" insertion v
+0000d550: 616c 7565 7320 616e 6420 646f 206e 6f74  alues and do not
+0000d560: 2069 6e63 6c75 6465 2069 6e74 6572 7365   include interse
+0000d570: 6374 696f 6e73 2e0a 2020 2020 2020 2020  ctions..        
+0000d580: 2222 220a 2020 2020 2020 2020 696e 7365  """.        inse
+0000d590: 7274 696f 6e5f 6261 7365 5f76 616c 7565  rtion_base_value
+0000d5a0: 7320 3d20 7365 6c66 2e5f 6d65 6173 7572  s = self._measur
+0000d5b0: 652e 626c 6f63 6b73 5b30 5d5b 315d 0a20  e.blocks[0][1]. 
+0000d5c0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+0000d5d0: 7365 7274 696f 6e5f 6261 7365 5f76 616c  sertion_base_val
+0000d5e0: 7565 735b 3a2c 2073 656c 662e 5f69 6e73  ues[:, self._ins
+0000d5f0: 6572 7469 6f6e 5f69 6478 5d0a 0a20 2020  ertion_idx]..   
+0000d600: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+0000d610: 2020 2064 6566 205f 696e 7365 7274 696f     def _insertio
+0000d620: 6e5f 6964 7828 7365 6c66 293a 0a20 2020  n_idx(self):.   
+0000d630: 2020 2020 2022 2222 696e 7420 696e 6465       """int inde
+0000d640: 7820 6f66 2069 6e73 6572 7469 6f6e 2077  x of insertion w
+0000d650: 686f 7365 2076 616c 7565 7320 7468 6520  hose values the 
+0000d660: 736f 7274 2069 7320 6261 7365 6420 6f6e  sort is based on
+0000d670: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
+0000d680: 7572 6e20 7365 6c66 2e5f 636f 6c75 6d6e  urn self._column
+0000d690: 735f 6469 6d65 6e73 696f 6e2e 696e 7365  s_dimension.inse
+0000d6a0: 7274 696f 6e5f 6964 732e 696e 6465 7828  rtion_ids.index(
+0000d6b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000d6c0: 662e 5f6f 7264 6572 5f73 7065 632e 696e  f._order_spec.in
+0000d6d0: 7365 7274 696f 6e5f 6964 0a20 2020 2020  sertion_id.     
+0000d6e0: 2020 2029 0a0a 2020 2020 406c 617a 7970     )..    @lazyp
+0000d6f0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000d700: 5f73 7562 746f 7461 6c5f 7661 6c75 6573  _subtotal_values
+0000d710: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000d720: 2222 2253 6571 7565 6e63 6520 6f66 2072  """Sequence of r
+0000d730: 6f77 2d73 7562 746f 7461 6c20 696e 7465  ow-subtotal inte
+0000d740: 7273 6563 7469 6f6e 2076 616c 7565 7320  rsection values 
+0000d750: 7468 6174 2063 6f6e 7472 6962 7574 6520  that contribute 
+0000d760: 746f 2073 6f72 7420 6261 7369 732e 0a0a  to sort basis...
+0000d770: 2020 2020 2020 2020 5468 6572 6520 6973          There is
+0000d780: 206f 6e65 2076 616c 7565 2070 6572 2072   one value per r
+0000d790: 6f77 2073 7562 746f 7461 6c20 616e 6420  ow subtotal and 
+0000d7a0: 7661 6c75 6573 2061 7070 6561 7220 696e  values appear in
+0000d7b0: 2070 6179 6c6f 6164 2028 6469 6d65 6e73   payload (dimens
+0000d7c0: 696f 6e29 0a20 2020 2020 2020 2069 6e73  ion).        ins
+0000d7d0: 6572 7469 6f6e 206f 7264 6572 2e0a 2020  ertion order..  
+0000d7e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000d7f0: 2020 696e 7465 7273 6563 7469 6f6e 7320    intersections 
+0000d800: 3d20 7365 6c66 2e5f 6d65 6173 7572 652e  = self._measure.
+0000d810: 626c 6f63 6b73 5b31 5d5b 315d 0a20 2020  blocks[1][1].   
+0000d820: 2020 2020 2072 6574 7572 6e20 696e 7465       return inte
+0000d830: 7273 6563 7469 6f6e 735b 3a2c 2073 656c  rsections[:, sel
+0000d840: 662e 5f69 6e73 6572 7469 6f6e 5f69 6478  f._insertion_idx
+0000d850: 5d0a 0a0a 636c 6173 7320 5f53 6f72 7452  ]...class _SortR
+0000d860: 6f77 7342 794c 6162 656c 4865 6c70 6572  owsByLabelHelper
+0000d870: 285f 4261 7365 536f 7274 526f 7773 4279  (_BaseSortRowsBy
+0000d880: 5661 6c75 6548 656c 7065 7229 3a0a 2020  ValueHelper):.  
+0000d890: 2020 2222 224f 7264 6572 7320 656c 656d    """Orders elem
+0000d8a0: 656e 7473 2062 7920 7468 6520 7661 6c75  ents by the valu
+0000d8b0: 6573 206f 6620 7468 6569 7220 6c61 6265  es of their labe
+0000d8c0: 6c73 2028 6672 6f6d 2074 6865 2064 696d  ls (from the dim
+0000d8d0: 656e 7369 6f6e 292e 2222 220a 0a20 2020  ension)."""..   
+0000d8e0: 2040 6c61 7a79 7072 6f70 6572 7479 0a20   @lazyproperty. 
+0000d8f0: 2020 2064 6566 205f 656c 656d 656e 745f     def _element_
+0000d900: 7661 6c75 6573 2873 656c 6629 3a0a 2020  values(self):.  
+0000d910: 2020 2020 2020 2222 2253 6571 7565 6e63        """Sequenc
+0000d920: 6520 6f66 2062 6f64 7920 6c61 6265 6c73  e of body labels
+0000d930: 2074 6861 7420 666f 726d 2074 6865 2062   that form the b
+0000d940: 6173 6973 2066 6f72 2073 6f72 7420 6f72  asis for sort or
+0000d950: 6465 722e 0a0a 2020 2020 2020 2020 5468  der...        Th
+0000d960: 6572 6520 6973 206f 6e65 2076 616c 7565  ere is one value
+0000d970: 2070 6572 2072 6f77 2061 6e64 2076 616c   per row and val
+0000d980: 7565 7320 6170 7065 6172 2069 6e20 7061  ues appear in pa
+0000d990: 796c 6f61 6420 2864 696d 656e 7369 6f6e  yload (dimension
+0000d9a0: 2920 656c 656d 656e 740a 2020 2020 2020  ) element.      
+0000d9b0: 2020 6f72 6465 722e 2054 6865 7365 2061    order. These a
+0000d9c0: 7265 206f 6e6c 7920 7468 6520 2262 6173  re only the "bas
+0000d9d0: 6522 2076 616c 7565 7320 616e 6420 646f  e" values and do
+0000d9e0: 206e 6f74 2069 6e63 6c75 6465 2069 6e73   not include ins
+0000d9f0: 6572 7469 6f6e 732e 0a20 2020 2020 2020  ertions..       
+0000da00: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+0000da10: 7572 6e20 6e70 2e61 7272 6179 2873 656c  urn np.array(sel
+0000da20: 662e 5f64 696d 656e 7369 6f6e 735b 305d  f._dimensions[0]
+0000da30: 2e65 6c65 6d65 6e74 5f6c 6162 656c 7329  .element_labels)
+0000da40: 0a0a 2020 2020 406c 617a 7970 726f 7065  ..    @lazyprope
+0000da50: 7274 790a 2020 2020 6465 6620 5f73 7562  rty.    def _sub
+0000da60: 746f 7461 6c5f 7661 6c75 6573 2873 656c  total_values(sel
+0000da70: 6629 3a0a 2020 2020 2020 2020 2222 2253  f):.        """S
+0000da80: 6571 7565 6e63 6520 6f66 2072 6f77 2d73  equence of row-s
+0000da90: 7562 746f 7461 6c20 6c61 6265 6c73 2074  ubtotal labels t
+0000daa0: 6861 7420 636f 6e74 7269 6275 7465 2074  hat contribute t
+0000dab0: 6f20 7468 6520 736f 7274 2062 6173 6973  o the sort basis
+0000dac0: 2e0a 0a20 2020 2020 2020 2054 6865 7265  ...        There
+0000dad0: 2069 7320 6f6e 6520 7661 6c75 6520 7065   is one value pe
+0000dae0: 7220 726f 7720 7375 6274 6f74 616c 2061  r row subtotal a
+0000daf0: 6e64 206c 6162 656c 7320 6170 7065 6172  nd labels appear
+0000db00: 2069 6e20 7061 796c 6f61 6420 2864 696d   in payload (dim
+0000db10: 656e 7369 6f6e 290a 2020 2020 2020 2020  ension).        
+0000db20: 696e 7365 7274 696f 6e20 6f72 6465 722e  insertion order.
+0000db30: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000db40: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
+0000db50: 7272 6179 2873 656c 662e 5f64 696d 656e  rray(self._dimen
+0000db60: 7369 6f6e 735b 305d 2e73 7562 746f 7461  sions[0].subtota
+0000db70: 6c5f 6c61 6265 6c73 290a 0a0a 636c 6173  l_labels)...clas
+0000db80: 7320 5f53 6f72 7452 6f77 7342 794d 6172  s _SortRowsByMar
+0000db90: 6769 6e61 6c48 656c 7065 7228 5f42 6173  ginalHelper(_Bas
+0000dba0: 6553 6f72 7452 6f77 7342 7956 616c 7565  eSortRowsByValue
+0000dbb0: 4865 6c70 6572 293a 0a20 2020 2022 2222  Helper):.    """
+0000dbc0: 4f72 6465 7273 2065 6c65 6d65 6e74 7320  Orders elements 
+0000dbd0: 6279 2074 6865 2076 616c 7565 7320 6f66  by the values of
+0000dbe0: 2061 6e20 6f70 706f 7369 6e67 206d 6172   an opposing mar
+0000dbf0: 6769 6e61 6c20 7665 6374 6f72 2e0a 0a20  ginal vector... 
+0000dc00: 2020 2054 6869 7320 776f 756c 6420 6265     This would be
+0000dc10: 206c 696b 6520 226f 7264 6572 2072 6f77   like "order row
+0000dc20: 7320 696e 2064 6573 6365 6e64 696e 6720  s in descending 
+0000dc30: 6f72 6465 7220 6279 2076 616c 7565 206f  order by value o
+0000dc40: 6620 726f 7773 2073 6361 6c65 206d 6561  f rows scale mea
+0000dc50: 6e2e 0a20 2020 2063 6f6c 756d 6e2e 2041  n..    column. A
+0000dc60: 6e20 6f70 706f 7369 6e67 2d6d 6172 6769  n opposing-margi
+0000dc70: 6e61 6c20 6f72 6465 7269 6e67 2069 7320  nal ordering is 
+0000dc80: 6f6e 6c79 2061 7661 696c 6162 6c65 206f  only available o
+0000dc90: 6e20 6120 6d61 7472 6978 2c20 6265 6361  n a matrix, beca
+0000dca0: 7573 6520 6f6e 6c79 0a20 2020 2061 206d  use only.    a m
+0000dcb0: 6174 7269 7820 6469 6d65 6e73 696f 6e20  atrix dimension 
+0000dcc0: 6861 7320 616e 206f 7070 6f73 696e 6720  has an opposing 
+0000dcd0: 6469 6d65 6e73 696f 6e2e 0a20 2020 2022  dimension..    "
+0000dce0: 2222 0a0a 2020 2020 406c 617a 7970 726f  ""..    @lazypro
+0000dcf0: 7065 7274 790a 2020 2020 6465 6620 5f65  perty.    def _e
+0000dd00: 6c65 6d65 6e74 5f76 616c 7565 7328 7365  lement_values(se
+0000dd10: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000dd20: 5365 7175 656e 6365 206f 6620 626f 6479  Sequence of body
+0000dd30: 2076 616c 7565 7320 7468 6174 2066 6f72   values that for
+0000dd40: 6d20 7468 6520 6261 7369 7320 666f 7220  m the basis for 
+0000dd50: 736f 7274 206f 7264 6572 2e0a 0a20 2020  sort order...   
+0000dd60: 2020 2020 2054 6865 7265 2069 7320 6f6e       There is on
+0000dd70: 6520 7661 6c75 6520 7065 7220 726f 7720  e value per row 
+0000dd80: 616e 6420 7661 6c75 6573 2061 7070 6561  and values appea
+0000dd90: 7220 696e 2070 6179 6c6f 6164 2028 6469  r in payload (di
+0000dda0: 6d65 6e73 696f 6e29 2065 6c65 6d65 6e74  mension) element
+0000ddb0: 0a20 2020 2020 2020 206f 7264 6572 2e20  .        order. 
+0000ddc0: 5468 6573 6520 6172 6520 6f6e 6c79 2074  These are only t
+0000ddd0: 6865 2022 6261 7365 2220 7661 6c75 6573  he "base" values
+0000dde0: 2061 6e64 2064 6f20 6e6f 7420 696e 636c   and do not incl
+0000ddf0: 7564 6520 696e 7365 7274 696f 6e73 2e0a  ude insertions..
+0000de00: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000de10: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0000de20: 5f6d 6172 6769 6e61 6c2e 626c 6f63 6b73  _marginal.blocks
+0000de30: 5b30 5d0a 0a20 2020 2040 6c61 7a79 7072  [0]..    @lazypr
+0000de40: 6f70 6572 7479 0a20 2020 2064 6566 205f  operty.    def _
+0000de50: 6d61 7267 696e 616c 2873 656c 6629 3a0a  marginal(self):.
+0000de60: 2020 2020 2020 2020 2222 224d 6172 6769          """Margi
+0000de70: 6e61 6c20 6f62 6a65 6374 2070 726f 7669  nal object provi
+0000de80: 6469 6e67 2076 616c 7565 7320 666f 7220  ding values for 
+0000de90: 736f 7274 2e22 2222 0a20 2020 2020 2020  sort.""".       
+0000dea0: 206d 6172 6769 6e61 6c20 3d20 7365 6c66   marginal = self
+0000deb0: 2e5f 6f72 6465 725f 7370 6563 2e6d 6172  ._order_spec.mar
+0000dec0: 6769 6e61 6c0a 2020 2020 2020 2020 6d61  ginal.        ma
+0000ded0: 7267 696e 616c 5f70 726f 706e 616d 6520  rginal_propname 
+0000dee0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0000def0: 4d41 5247 494e 414c 2e42 4153 453a 2022  MARGINAL.BASE: "
+0000df00: 726f 7773 5f75 6e77 6569 6768 7465 645f  rows_unweighted_
+0000df10: 6261 7365 222c 0a20 2020 2020 2020 2020  base",.         
+0000df20: 2020 204d 4152 4749 4e41 4c2e 4d41 5247     MARGINAL.MARG
+0000df30: 494e 3a20 2272 6f77 735f 7765 6967 6874  IN: "rows_weight
+0000df40: 6564 5f62 6173 6522 2c0a 2020 2020 2020  ed_base",.      
+0000df50: 2020 2020 2020 4d41 5247 494e 414c 2e4d        MARGINAL.M
+0000df60: 4152 4749 4e5f 5052 4f50 4f52 5449 4f4e  ARGIN_PROPORTION
+0000df70: 3a20 2272 6f77 735f 7461 626c 655f 7072  : "rows_table_pr
+0000df80: 6f70 6f72 7469 6f6e 222c 0a20 2020 2020  oportion",.     
+0000df90: 2020 2020 2020 204d 4152 4749 4e41 4c2e         MARGINAL.
+0000dfa0: 5343 414c 455f 4d45 414e 3a20 2272 6f77  SCALE_MEAN: "row
+0000dfb0: 735f 7363 616c 655f 6d65 616e 222c 0a20  s_scale_mean",. 
+0000dfc0: 2020 2020 2020 2020 2020 204d 4152 4749             MARGI
+0000dfd0: 4e41 4c2e 5343 414c 455f 4d45 414e 5f53  NAL.SCALE_MEAN_S
+0000dfe0: 5444 4445 563a 2022 726f 7773 5f73 6361  TDDEV: "rows_sca
+0000dff0: 6c65 5f6d 6561 6e5f 7374 6464 6576 222c  le_mean_stddev",
+0000e000: 0a20 2020 2020 2020 2020 2020 204d 4152  .            MAR
+0000e010: 4749 4e41 4c2e 5343 414c 455f 4d45 414e  GINAL.SCALE_MEAN
+0000e020: 5f53 5444 4552 523a 2022 726f 7773 5f73  _STDERR: "rows_s
+0000e030: 6361 6c65 5f6d 6561 6e5f 7374 6465 7272  cale_mean_stderr
+0000e040: 222c 0a20 2020 2020 2020 2020 2020 204d  ",.            M
+0000e050: 4152 4749 4e41 4c2e 5343 414c 455f 4d45  ARGINAL.SCALE_ME
+0000e060: 4449 414e 3a20 2272 6f77 735f 7363 616c  DIAN: "rows_scal
+0000e070: 655f 6d65 6469 616e 222c 0a20 2020 2020  e_median",.     
+0000e080: 2020 207d 2e67 6574 286d 6172 6769 6e61     }.get(margina
+0000e090: 6c29 0a0a 2020 2020 2020 2020 6966 206d  l)..        if m
+0000e0a0: 6172 6769 6e61 6c5f 7072 6f70 6e61 6d65  arginal_propname
+0000e0b0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0000e0c0: 2020 2020 2020 7261 6973 6520 4e6f 7449        raise NotI
+0000e0d0: 6d70 6c65 6d65 6e74 6564 4572 726f 7228  mplementedError(
+0000e0e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e0f0: 2066 2273 6f72 742d 6279 2d76 616c 7565   f"sort-by-value
+0000e100: 2066 6f72 206d 6172 6769 6e61 6c20 277b   for marginal '{
+0000e110: 6d61 7267 696e 616c 7d27 2069 7320 6e6f  marginal}' is no
+0000e120: 7420 7965 7420 7375 7070 6f72 7465 6422  t yet supported"
+0000e130: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+0000e140: 2020 2020 2020 2020 7265 7475 726e 2067          return g
+0000e150: 6574 6174 7472 2873 656c 662e 5f73 6563  etattr(self._sec
+0000e160: 6f6e 645f 6f72 6465 725f 6d65 6173 7572  ond_order_measur
+0000e170: 6573 2c20 6d61 7267 696e 616c 5f70 726f  es, marginal_pro
+0000e180: 706e 616d 6529 0a0a 2020 2020 406c 617a  pname)..    @laz
+0000e190: 7970 726f 7065 7274 790a 2020 2020 6465  yproperty.    de
+0000e1a0: 6620 5f73 7562 746f 7461 6c5f 7661 6c75  f _subtotal_valu
+0000e1b0: 6573 2873 656c 6629 3a0a 2020 2020 2020  es(self):.      
+0000e1c0: 2020 2222 2253 6571 7565 6e63 6520 6f66    """Sequence of
+0000e1d0: 2072 6f77 2d73 7562 746f 7461 6c20 7661   row-subtotal va
+0000e1e0: 6c75 6573 2074 6861 7420 636f 6e74 7269  lues that contri
+0000e1f0: 6275 7465 2074 6f20 7468 6520 736f 7274  bute to the sort
+0000e200: 2062 6173 6973 2e0a 0a20 2020 2020 2020   basis...       
+0000e210: 2054 6865 7265 2069 7320 6f6e 6520 7661   There is one va
+0000e220: 6c75 6520 7065 7220 726f 7720 7375 6274  lue per row subt
+0000e230: 6f74 616c 2061 6e64 2076 616c 7565 7320  otal and values 
+0000e240: 6170 7065 6172 2069 6e20 7061 796c 6f61  appear in payloa
+0000e250: 6420 2864 696d 656e 7369 6f6e 290a 2020  d (dimension).  
+0000e260: 2020 2020 2020 696e 7365 7274 696f 6e20        insertion 
+0000e270: 6f72 6465 722e 0a20 2020 2020 2020 2022  order..        "
+0000e280: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000e290: 6e20 7365 6c66 2e5f 6d61 7267 696e 616c  n self._marginal
+0000e2a0: 2e62 6c6f 636b 735b 315d 0a              .blocks[1].
```

### Comparing `cr.cube-3.0.8/src/cr/cube/matrix/assembler.py` & `cr.cube-3.0.9/src/cr/cube/matrix/cubemeasure.py`

 * *Files 23% similar despite different names*

```diff
@@ -1,1377 +1,1368 @@
 # encoding: utf-8
 
-"""The `Assembler` object provides the external interface for this module.
+"""Provides abstracted cube-measure objects used as the basis for second-order measures.
 
-Its name derives from its role to "assemble" a finished 2D array ("matrix") for a
-particular measure from the base measure values and inserted subtotals, to reorder the
-rows and columns according to the dimension *order* transforms, and to hide rows and
-columns that are either hidden by the user or "pruned" because they contain no
-observations.
+There are several cube-measures that can appear in a cube-response, including
+unweighted-counts, weighted-counts (aka. counts), means, and others.
 """
 
 import numpy as np
 
-from cr.cube.collator import (
-    ExplicitOrderCollator,
-    PayloadOrderCollator,
-    SortByValueCollator,
-)
-from cr.cube.enums import (
-    COLLATION_METHOD as CM,
-    DIMENSION_TYPE as DT,
-    MARGINAL,
-    MARGINAL_ORIENTATION as MO,
-    MEASURE as M,
-)
-from cr.cube.matrix.measure import SecondOrderMeasures
-from cr.cube.matrix.subtotals import SumSubtotals
+from cr.cube.enums import DIMENSION_TYPE as DT
 from cr.cube.util import lazyproperty
 
 
-class Assembler:
-    """Provides measure and margin methods for a cube-slice.
-
-    An assembled matrix is a 2D ndarray reflecting all ordering, insertion, and hiding
-    transforms applied to the dimensions. An assembled margin is often a 1D ndarray
-    which is similarly formed from inserted values, ordered, and value hiding applied.
-
-    `cube` is the `cr.cube.Cube` object containing the data for this matrix. Note that
-    not all the data in `cube` will necessarily be used by this matrix. When `cube` is
-    more than 2-dimensional, it is "sliced" and each slice gets its own matrix (and
-    `_Slice` object).
-
-    `dimensions` is a pair (2-tuple) of (rows_dimension, columns_dimension) Dimension
-    objects. These are always the last two dimensions of `cube` but may and often do
-    have transformations applied that are not present on the `cube` dimensions from
-    which they derive.
-
-    `slice_idx` is an int offset indicating which portion of `cube` data to use for this
-    matrix. There is one slice for each element of the first cube dimension (the "table"
-    dimension) when the cube has more than two dimensions.
-    """
+class CubeMeasures:
+    """Provides access to all cube-measure objects for this cube-result."""
 
     def __init__(self, cube, dimensions, slice_idx):
         self._cube = cube
         self._dimensions = dimensions
         self._slice_idx = slice_idx
 
     @lazyproperty
-    def column_aliases(self):
-        """1D str ndarray of column alias for each matrix row.
-
-        These are suitable for use as column headings; alias for subtotal columns appear
-        in the sequence and alias are ordered to correspond with their respective data
-        column.
-        """
-        return self._dimension_aliases(self._columns_dimension, self._column_order)
+    def cube_means(self):
+        """_BaseCubeMeans subclass object for this cube-result."""
+        return _BaseCubeMeans.factory(self._cube, self._dimensions, self._slice_idx)
 
     @lazyproperty
-    def column_codes(self):
-        """1D int ndarray of column codes for each matrix row.
-
-        These are suitable for use as column headings; codes for subtotal columns appear
-        in the sequence and codes are ordered to correspond with their respective data
-        column.
-        """
-        return self._dimension_codes(self._columns_dimension, self._column_order)
+    def cube_overlaps(self):
+        """_BaseCubeOverlaps subclass object for this cube-result."""
+        return _BaseCubeOverlaps.factory(self._cube, self._dimensions, self._slice_idx)
 
     @lazyproperty
-    def column_comparable_counts(self):
-        """2D np.float64 ndarray of counts comparable in the column dimension.
+    def cube_sum(self):
+        """_BaseCubeSums subclass object for this cube-result."""
+        return _BaseCubeSums.factory(self._cube, self._dimensions, self._slice_idx)
 
-        Comparable in the "column" dimension means that it's not a column subtotal
-        difference because these are not considered comparable since their bases
-        aren't the same. The values along these subtotal differences are defined as
-        np.nan.
-        """
-        return self._assemble_matrix(self._measures.column_comparable_counts.blocks)
+    @lazyproperty
+    def cube_stddev(self):
+        """_BaseCubeStdDev subclass object for this cube-result."""
+        return _BaseCubeStdDev.factory(self._cube, self._dimensions, self._slice_idx)
 
     @lazyproperty
-    def column_index(self):
-        """2D np.float64 ndarray of column-index "percentage" for each table cell."""
-        return self._assemble_matrix(self._measures.column_index.blocks)
+    def unconditional_cube_counts(self):
+        """_BaseUnconditionalCounts subclass object for this cube-result."""
+        return _BaseUnconditionalCubeCounts.factory(
+            self._cube, self._dimensions, self._slice_idx
+        )
 
     @lazyproperty
-    def column_labels(self):
-        """1D str ndarray of column name for each matrix column.
+    def unweighted_cube_counts(self):
+        """_BaseWeightedCounts subclass object for this cube-result."""
+        valid_counts = self._cube.unweighted_valid_counts
+        counts = (
+            valid_counts if valid_counts is not None else self._cube.unweighted_counts
+        )
+        diff_nans = True if valid_counts is not None else False
 
-        These are suitable for use as column headings; labels for subtotal columns
-        appear in the sequence and labels are ordered to correspond with their
-        respective data column.
-        """
-        return self._dimension_labels(self._columns_dimension, self._column_order)
+        return _BaseCubeCounts.factory(
+            counts, diff_nans, self._cube, self._dimensions, self._slice_idx
+        )
 
     @lazyproperty
-    def column_proportions(self):
-        """2D np.float64 ndarray of column-proportion for each matrix cell.
+    def weighted_cube_counts(self):
+        """_BaseWeightedCounts subclass object for this cube-result."""
+        valid_counts = self._cube.weighted_valid_counts
+        counts = valid_counts if valid_counts is not None else self._cube.counts
+        diff_nans = True if valid_counts is not None else False
 
-        This is the proportion of the weighted-count for cell to the weighted-N of the
-        column the cell appears in (aka. column-margin). Generally a number between 0.0
-        and 1.0 inclusive, but subtotal differences can be between -1.0 and 1.0
-        inclusive.
-        """
-        return self._assemble_matrix(self._measures.column_proportions.blocks)
+        return _BaseCubeCounts.factory(
+            counts, diff_nans, self._cube, self._dimensions, self._slice_idx
+        )
 
-    @lazyproperty
-    def column_proportion_variances(self):
-        """2D ndarray of np.float64 column-proportion variance for each matrix cell."""
-        return self._assemble_matrix(self._measures.column_proportion_variances.blocks)
 
-    @lazyproperty
-    def column_share_sum(self):
-        """2D optional np.float64 ndarray of column share of sum for each cell.
+class _BaseCubeMeasure:
+    """Base class for all cube-measure objects."""
 
-        Raises `ValueError` if the cube-result does not include a sum cube-measure.
+    def __init__(self, dimensions):
+        self._dimensions = dimensions
+
+    @classmethod
+    def _slice_idx_expr(cls, cube, slice_idx):
+        """Return np.s_ advanced-indexing slice object to extract values for slice_idx.
+
+        `cube` can contain data for multiple `_Slice` objects. The returned `numpy`
+        advanced-indexing expression selects only those values of `cube` that pertain
+        to the slice indicated by `slice_idx`.
         """
-        return self._assemble_matrix(self._measures.column_share_sum.blocks)
+        # --- for a 2D cube we take the whole thing (1D is not expected here) ---
+        if cube.ndim < 3:
+            return np.s_[:]
 
-    @lazyproperty
-    def column_std_err(self):
-        """2D np.float64 ndarray of std-error of column-percent for each matrix cell."""
-        return self._assemble_matrix(self._measures.column_std_err.blocks)
+        # --- if 0th dimension of a >2D cube is MR, we only take the "Selected" portion
+        # --- of the indicated initial-MR subvar, because the slice is to represent the
+        # --- values for "respondents who selected" that MR response (and not those who
+        # --- didn't select it or did not respond).
+        if cube.dimension_types[0] == DT.MR:
+            return np.s_[slice_idx, 0]
 
-    @lazyproperty
-    def column_unweighted_bases(self):
-        """2D np.float64 ndarray of unweighted col-proportions denominator per cell."""
-        return self._assemble_matrix(self._measures.column_unweighted_bases.blocks)
+        # --- for other 3D cubes we just select the 2D "table" portion associated with
+        # --- the `slice_idx`-th table dimension element.
+        return np.s_[slice_idx]
 
-    @lazyproperty
-    def column_weighted_bases(self):
-        """2D np.float64 ndarray of column-proportions denominator for each cell."""
-        return self._assemble_matrix(self._measures.column_weighted_bases.blocks)
 
-    @lazyproperty
-    def columns_base(self):
-        """1D/2D np.float64 ndarray of unweighted-N for each slice column/cell."""
-        # --- an MR_X slice produces a 2D columns-base (each cell has its own N) ---
-        # --- This is really just another way to call the columns_weighted_bases ---
-        # --- TODO: Should column_base only be defined when it's 1D? This would
-        # --- require changes to exporter to use the bases to give a
-        # --- "column_base_range"
-        if not self._measures.columns_unweighted_base.is_defined:
-            return self.column_unweighted_bases
+# === COUNTS (UNWEIGHTED & WEIGHTED) ===
 
-        # --- otherwise columns-base is a vector ---
-        return self._assemble_marginal(self._measures.columns_unweighted_base)
 
-    @lazyproperty
-    def columns_dimension_numeric_values(self):
-        """1D optional np.int/float64 ndarray of numeric-value for each column element.
+class _BaseCubeCounts(_BaseCubeMeasure):
+    """Base class for count (weighted & unweighted) cube-measure variants."""
+
+    def __init__(self, dimensions, counts, diff_nans):
+        super(_BaseCubeCounts, self).__init__(dimensions)
+        self._counts = counts
+        self._diff_nans = diff_nans
+
+    @classmethod
+    def factory(cls, counts, diff_nans, cube, dimensions, slice_idx):
+        """Return _BaseCubeCounts subclass instance appropriate to `cube`
 
-        A value of np.nan appears for a column element without a numeric-value. All
-        subtotal columns have a value of np.nan (subtotals have no numeric value).
+        Chooses between unweighted and weighted counts based on `type`.
         """
-        elements = self._columns_dimension.valid_elements
-        return np.array(
-            [
-                (elements[idx].numeric_value if idx >= 0 else np.nan)
-                for idx in self._column_order
-            ]
+        dimension_type_strings = tuple(
+            "MR"
+            if dim_type == DT.MR
+            else "ARR"
+            if dim_type in DT.ARRAY_TYPES
+            else "CAT"
+            for dim_type in cube.dimension_types[-2:]
+        )
+        CubeCountsCls = {
+            ("MR", "MR"): _MrXMrCubeCounts,
+            ("MR", "ARR"): _MrXArrCubeCounts,
+            ("MR", "CAT"): _MrXCatCubeCounts,
+            ("ARR", "MR"): _ArrXMrCubeCounts,
+            ("ARR", "ARR"): _ArrXArrCubeCounts,
+            ("ARR", "CAT"): _ArrXCatCubeCounts,
+            ("CAT", "MR"): _CatXMrCubeCounts,
+            ("CAT", "ARR"): _CatXArrCubeCounts,
+        }.get(dimension_type_strings, _CatXCatCubeCounts)
+
+        return CubeCountsCls(
+            dimensions, counts[cls._slice_idx_expr(cube, slice_idx)], diff_nans
         )
 
     @lazyproperty
-    def columns_margin(self):
-        """1D/2D np.float64 ndarray of weighted-N for each column of this slice."""
-        # --- an MR_X slice produces a 2D columns-margin (each cell has its own N) ---
-        # --- This is really just another way to call the columns_weighted_bases ---
-        # --- TODO: Should column_margin only be defined when it's 1D? This would
-        # --- require changes to exporter to use the bases to give a
-        # --- "column_margin_range"
-        if not self._measures.columns_weighted_base.is_defined:
-            return self.column_weighted_bases
-
-        # --- otherwise columns-base is a vector ---
-        return self._assemble_marginal(self._measures.columns_weighted_base)
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.column_bases`"
+        )
 
     @lazyproperty
-    def columns_margin_proportion(self):
-        """1D/2D np.float64 ndarray of weighted-prop for each column of this slice."""
-        # --- an MR_X slice produces a 2D columns-margin (each cell has its own N) ---
-        # --- TODO: Should colums_margin_proportion only be defined when it's 1D? This
-        # --- requires changes to exporter to use the bases to give a
-        # --- "columns_margin_range"
-        if not self._measures.columns_table_proportion.is_defined:
-            return self._assemble_matrix(
-                SumSubtotals.blocks(
-                    self.columns_margin / self.table_weighted_bases,
-                    self._dimensions,
-                )
-            )
+    def columns_base(self):
+        """Optional 1D np.float64 ndarray of column-wise base for each column.
 
-        # --- otherwise columns-margin-proportion is a maginal ---
-        return self._assemble_marginal(self._measures.columns_table_proportion)
+        This marginal is used as the (un)weighted N row that is shown (typically)
+        below other measures.
 
-    @lazyproperty
-    def columns_scale_mean(self):
-        """Optional 1D column scale mean marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.columns_scale_mean)
+        This value is None if the columns dimension is not CAT because in that case each
+        row has a unique rows base, and so it is not possible to reduce to a 1D
+        vector in the columns orientation (aka a single row). Subclasses with legitimite
+        values (eg *_X_CAT) must override this default method.
+        """
+        return None
 
     @lazyproperty
-    def columns_scale_mean_stddev(self):
-        """Optional 1D column scale mean std dev marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.columns_scale_mean_stddev)
+    def columns_pruning_mask(self):
+        """1D bool np.ndarray indicating whether all cells in column are empty
 
-    @lazyproperty
-    def columns_scale_mean_stderr(self):
-        """Optional 1D column scale mean std err marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.columns_scale_mean_stderr)
+        The columns-pruning-mask indicates when every cell in a column has base values
+        of 0. When the column is *not* an MR, the base used is equal to the columns_base,
+        but when the column is an MR, we use the sum of selected & non-selected values from
+        the column, whereas the columns_base uses just the selected values.
+        """
+        # --- Bases are positive, so we can sum them to see if all of them are equal to 0
+        return self._columns_pruning_base == 0
 
     @lazyproperty
-    def columns_scale_median(self):
-        """Optional 1D column scale median marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.columns_scale_median)
+    def columns_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each column.
 
-    @lazyproperty
-    def derived_column_idxs(self):
-        """tuple(int) of derived column elements' indexes, can be empty.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, but each component is meaningful:
 
-        An element is derived if it's a subvariable of a multiple response dimension,
-        which has been produced by the zz9, and inserted into the response data.
+        * "columns": Indicates it is a marginal in the "columns" orientation (kind of
+          like a stripe in the shape of a row).
+        * "table": Indicates that it is the base for the whole table. When the
+          `.table_base` exists (CAT X CAT), it is a repetition of that, but when
+          the rows are array (and therefore we can't sum across them), each cell has
+          its own value.
+        * "base": Indicates that it is the base, not necessarily the counts (eg the sum
+          of selected and non-selected for MR variables)
 
-        All other elements, including regular MR and CA subvariables, as well as
-        categories of CAT dimensions, are not derived. Subtotals are also not derived
-        in this sense, because they're not even part of the data (elements).
+        This value is None if the columns dimension is not CAT because in that case each
+        row has a unique table base, and so it is not possible to reduce to a 1D
+        vector in the columns orientation (aka a single row). Subclasses with legitimite
+        values (eg *_X_CAT) must override this default method.
         """
-        return self._derived_element_idxs(self._columns_dimension, self._column_order)
+        return None
+
+    @lazyproperty
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.counts`"
+        )
 
     @lazyproperty
-    def derived_row_idxs(self):
-        """tuple(int) of derived row elements' indexes, can be empty.
+    def diff_nans(self):
+        """Boolean, indicates if subtotal differences (rows and cols) has to be NaN.
 
-        An element is derived if it's a subvariable of a multiple response dimension,
-        which has been produced by the zz9, and inserted into the response data.
+        We set the subtotal differences to be NaN for count measures that are paired
+        alongside numeric dimension collapsing measures (eg mean/count/etc.) because
+        those measures are undefined for subtotal differences. We want to do this here
+        because we want to make sure that all calculations derived from the counts are
+        also correctly set to NaN, rather than having to track down all the derived
+        calculations.
 
-        All other elements, including regular MR and CA subvariables, as well as
-        categories of CAT dimensions, are not derived. Subtotals are also not derived
-        in this sense, because they're not even part of the data (elements).
+        The parameter must be passed in during _BaseCubeCount's creation because it has
+        no knowledge of what type of counts it's using, and the way to tell if the counts
+        are paired with a numeric variable is by knowing if it comes from `*_counts`
+        or `*_valid_counts`.
         """
-        return self._derived_element_idxs(self._rows_dimension, self._row_order)
+        return self._diff_nans
 
     @lazyproperty
-    def diff_row_idxs(self):
-        """tuple(int) of difference row elements' indexes, can be empty."""
-        return self._diff_element_idxs(self._rows_dimension, self._row_order)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.row_bases`"
+        )
 
     @lazyproperty
-    def diff_column_idxs(self):
-        """tuple(int) of difference column elements' indexes, can be empty."""
-        return self._diff_element_idxs(self._columns_dimension, self._column_order)
+    def rows_base(self):
+        """Optional 1D np.float64 ndarray of row-wise base for each row.
 
-    @lazyproperty
-    def inserted_column_idxs(self):
-        """tuple of int index of each subtotal column in slice."""
-        # --- insertions have a negative idx in their order sequence ---
-        return tuple(i for i, col_idx in enumerate(self._column_order) if col_idx < 0)
+        This marginal is used as the (un)weighted N column that is shown alongside other
+        measures.
 
-    @lazyproperty
-    def inserted_row_idxs(self):
-        """tuple of int index of each subtotal row in slice."""
-        # --- insertions have a negative idx in their order sequence ---
-        return tuple(i for i, row_idx in enumerate(self._row_order) if row_idx < 0)
+        This value is None if the rows dimension is not CAT because in that case each
+        column has a unique rows base, and so it is not possible to reduce to a 1D
+        vector in the rows orientation (aka a single column). Subclasses with legitimite
+        values (eg CAT_X_*) must override this default method.
+        """
+        return None
 
     @lazyproperty
-    def means(self):
-        """2D optional np.float64 ndarray of mean for each cell.
+    def rows_pruning_mask(self):
+        """1D bool np.ndarray indicating whether all cells in rows are empty
 
-        Raises `ValueError` if the cube-result does not include a means cube-measure.
+        The rows-pruning-mask indicates when every cell in a row has base values
+        of 0. When the row is *not* an MR, the base used is equal to the rows_base,
+        but when the row is an MR, we use the sum of selected & non-selected values from
+        the row, whereas the rows_base uses just the selected values.
         """
-        return self._assemble_matrix(self._measures.means.blocks)
+        # --- Bases are positive, so we can sum them to see if all of them are equal
+        # --- to 0.
+        return self._rows_pruning_base == 0
 
-    def pairwise_indices(self, alpha, only_larger):
-        """2D optional ndarray of tuple of int column-idxs pairwise-t threshold.
+    @lazyproperty
+    def rows_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each row.
 
-        Raises `ValueError if the cube-result does not include `overlaps` cube-measures.
-        """
-        return np.array(
-            [
-                self._pairwise_indices(
-                    self.pairwise_significance_p_vals(col),
-                    self.pairwise_significance_t_stats(col),
-                    alpha,
-                    only_larger,
-                )
-                for col in range(len(self._column_order))
-            ]
-        ).T
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, but each component is meaningful:
 
-    def pairwise_means_indices(self, alpha, only_larger):
-        """2D optional ndarray of tuple of int column-idxs means pairwise-t threshold.
+        * "rows": Indicates it is a marginal in the "rows" orientation (kind of
+          like a stripe in the shape of a row).
+        * "table": Indicates that it is the base for the whole table. When the
+          `.table_base` exists (CAT X CAT), it is a repetition of that, but when
+          the columns are array (and therefore we can't sum across them), each cell has
+          its own value.
+        * "base": Indicates that it is the base, not necessarily the counts (eg the sum
+          of selected and non-selected for MR variables)
 
-        Raises `ValueError if the cube-result does not include `means` cube-measures.
+        This value is None if the rows dimension is not CAT because in that case each
+        column has a unique table base, and so it is not possible to reduce to a 1D
+        vector in the rows orientation (aka a single column). Subclasses with legitimite
+        values (eg CAT_X_*) must override this default method.
         """
-        return np.array(
-            [
-                self._pairwise_indices(
-                    self.pairwise_significance_means_p_vals(col),
-                    self.pairwise_significance_means_t_stats(col),
-                    alpha,
-                    only_larger,
-                )
-                for col in range(len(self._column_order))
-            ]
-        ).T
+        return None
 
-    def pairwise_significance_p_vals(self, column_idx):
-        """2D optional np.float64 ndarray of overlaps-p_vals matrices for subvar idx.
-
-        For cubes where the last dimension is categorical, column idxs represent
-        specific categories.
-
-        For cubes where the last dimension is a multiple response, each subvariable
-        pairwise significance matrix is a 2D ndarray of the p-vals for the selected
-        subvariable index (the selected column).
+    @lazyproperty
+    def table_base(self):
+        """Optional float of the table-wise base for the whole table
 
-        Raises `ValueError if the cube-result does not include `overlaps`
-        and `valid_overlaps` cube-measures.
+        None if either dimension is an ARRAY or MR because the table base varies.
+        The subclass with a legitimite value (CAT_X_CAT) must override this default
+        method.
         """
-        if self._cube_has_overlaps:
-            # If overlaps are defined, calculate significance based on them
-            return self._assemble_matrix(
-                self._measures.pairwise_p_vals_for_subvar(column_idx).blocks
-            )
-        base_column_idx = self._column_order[column_idx]
-        return self._assemble_matrix(
-            self._measures.pairwise_p_vals(base_column_idx).blocks
-        )
+        return None
 
-    def pairwise_significance_t_stats(self, column_idx):
-        """2D optional np.float64 ndarray of overlaps-t_stats matrices for subvar idx.
+    @lazyproperty
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.table_bases`"
+        )
 
-        For cubes where the last dimension is categorical, column idxs represent
-        specific categories.
+    @lazyproperty
+    def _columns_pruning_base(self):
+        """1D bool np.ndarray of the sum of the column-bases for cells in a column
 
-        For cubes where the last dimension is a multiple response, each subvariable
-        pairwise significance matrix is a 2D ndarray of the t-stats for the selected
-        subvariable index (the selected column).
+        Used to calculate the columns-pruning-mask, which indicates when every cell in a
+        column has base values of 0. When the column is *not* an MR, the base used is
+        equal to the columns_base, but when the column is an MR, we use the sum of
+        selected & non-selected values the column, whereas the columns_base uses just the
+        selected values. These values are not meaningful on their own, but used to
+        calculate the columns-pruning-mask.
 
-        Raises `ValueError if the cube-result does not include `overlaps`
-        and `valid_overlaps` cube-measures.
+        This method works when the column is not an MR, and must be overriden when it is
+        MR.
         """
-        if self._cube_has_overlaps:
-            # If overlaps are defined, calculate significance based on them
-            return self._assemble_matrix(
-                self._measures.pairwise_t_stats_for_subvar(column_idx).blocks
-            )
-        base_column_idx = self._column_order[column_idx]
-        return self._assemble_matrix(
-            self._measures.pairwise_t_stats(base_column_idx).blocks
-        )
-
-    def pairwise_significance_means_p_vals(self, column_idx):
-        """2D optional np.float64 ndarray of mean difference p_vals for column idx.
+        # --- Bases are positive, so we can sum them to see if all of them are equal to 0
+        # --- To really hammer home the point that this number is invalid, we keep it
+        # --- private. But it's easier to test, so it is separate from the mask.
+        return np.sum(self.column_bases, axis=0)
 
-        Raises `ValueError if the cube-result does not include `mean` cube-measures.
-        """
-        base_column_idx = self._column_order[column_idx]
-        return self._assemble_matrix(
-            self._measures.pairwise_significance_means_p_vals(base_column_idx).blocks
-        )
+    @lazyproperty
+    def _rows_pruning_base(self):
+        """1D bool np.ndarray of the sum of the row-bases for cells in a row
 
-    def pairwise_significance_means_t_stats(self, column_idx):
-        """2D optional np.float64 ndarray of mean difference t_stats for column idx.
+        Used to calculate he rows-pruning-mask, which indicates when every cell in a row
+        of 0. When the row is *not* an MR, the base used is equal to the rows_base,
+        but when the row is an MR, we use the sum of selected & non-selected values from
+        the row, whereas the rows_base uses just the selected values. These values
+        are not meaningful on their own, but used to calculate the rows-pruning-mask.
 
-        Raises `ValueError if the cube-result does not include `mean` cube-measures.
+        This method works when the row is not an MR, and must be overriden when it is MR.
         """
-        base_column_idx = self._column_order[column_idx]
-        return self._assemble_matrix(
-            self._measures.pairwise_significance_means_t_stats(base_column_idx).blocks
-        )
+        # --- Bases are positive, so we can sum them to see if all of them are equal to 0
+        # --- To really hammer home the point that this number is invalid, we keep it
+        # --- private. But it's easier to test, so it is separate from the mask.
+        return np.sum(self.row_bases, axis=1)
 
-    @lazyproperty
-    def population_proportions(self):
-        """2D np.float64 ndarray of proportions
 
-        The proportion used to calculate proportion counts depends on the dimension
-        types.
-        """
-        return self._assemble_matrix(self._measures.population_proportions.blocks)
+class _ArrXArrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=ARR & columns=ARR dimensions"""
 
     @lazyproperty
-    def population_std_err(self):
-        """2D np.float64 ndarray of standard errors
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, bases are equal to counts
+        return self.counts
 
-        The proportion used to calculate proportion counts depends on the dimension
-        types.
-        """
-        return self._assemble_matrix(self._measures.population_std_err.blocks)
+    @lazyproperty
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- No MR, so counts are already in correct shape
+        return self._counts
 
     @lazyproperty
-    def pvalues(self):
-        """2D np.float64/np.nan ndarray of p-value for each matrix cell."""
-        return self._assemble_matrix(self._measures.pvalues.blocks)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, bases are equal to counts
+        return self.counts
 
     @lazyproperty
-    def row_comparable_counts(self):
-        """2D np.float64 ndarray of counts comparable in the row dimension.
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, bases are equal to counts
+        return self.counts
 
-        Comparable in the "row" dimension means that it's not a row subtotal
-        difference because these are not considered comparable since their bases
-        aren't the same. The values along these subtotal differences are defined as
-        np.nan.
-        """
-        return self._assemble_matrix(self._measures.row_comparable_counts.blocks)
 
-    @lazyproperty
-    def row_aliases(self):
-        """1D str ndarray of row alias for each matrix row.
+class _ArrXCatCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=ARR & columns=CAT dimensions"""
 
-        These are suitable for use as row headings; alias for subtotal rows appear in
-        the sequence and alias are ordered to correspond with their respective data
-        row.
-        """
-        return self._dimension_aliases(self._rows_dimension, self._row_order)
+    @lazyproperty
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, bases are equal to counts
+        return self.counts
 
     @lazyproperty
-    def row_codes(self):
-        """1D int ndarray of row codes for each matrix row.
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- No MR, so counts are already in correct shape
+        return self._counts
 
-        These are suitable for use as row headings; codes for subtotal rows appear in
-        the sequence and codes are ordered to correspond with their respective data
-        row.
-        """
-        return self._dimension_codes(self._rows_dimension, self._row_order)
+    @lazyproperty
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        return np.broadcast_to(self.rows_base[:, None], self.counts.shape)
 
     @lazyproperty
-    def row_labels(self):
-        """1D str ndarray of row name for each matrix row.
+    def rows_base(self):
+        """Optional 1D np.float64 ndarray of row-wise base for each row.
 
-        These are suitable for use as row headings; labels for subtotal rows appear in
-        the sequence and labels are ordered to correspond with their respective data
-        row.
+        This marginal is used as the (un)weighted N column that is shown alongside other
+        measures.
         """
-        return self._dimension_labels(self._rows_dimension, self._row_order)
+        # --- Avaialable because column is CAT, equal to the sum across cols dimension.
+        return np.sum(self._counts, axis=1)
 
     @lazyproperty
-    def row_proportions(self):
-        """2D np.float64 ndarray of row-proportion for each matrix cell.
+    def rows_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each row.
 
-        This is the proportion of the weighted-count for cell to the weighted-N of the
-        row the cell appears in (aka. row-margin). Generally a number between 0.0 and
-        1.0 inclusive, but subtotal differences can be between -1.0 and 1.0 inclusive.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.rows_table_base` for details.
         """
-        return self._assemble_matrix(self._measures.row_proportions.blocks)
+        # --- Available because columns are CAT, equal to the rows_base because the row
+        # --- is array and so addition over rows is not possible
+        return self.rows_base
 
     @lazyproperty
-    def row_proportion_variances(self):
-        """2D ndarray of np.float64 row-proportion variance for each matrix cell."""
-        return self._assemble_matrix(self._measures.row_proportion_variances.blocks)
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- Can't sum across rows array, table bases equal to rows bases
+        return self.row_bases
 
-    @lazyproperty
-    def row_share_sum(self):
-        """2D optional np.float64 ndarray of row share of sum for each cell.
 
-        Raises `ValueError` if the cube-result does not include a sum cube-measure.
-        """
-        return self._assemble_matrix(self._measures.row_share_sum.blocks)
+class _ArrXMrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=ARR & columns=MR dimensions"""
 
     @lazyproperty
-    def row_std_err(self):
-        """2D np.float64 ndarray of std-error of row-percent for each matrix cell."""
-        return self._assemble_matrix(self._measures.row_std_err.blocks)
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        return self.counts
 
     @lazyproperty
-    def row_unweighted_bases(self):
-        """2D np.float64 ndarray of unweighted row-proportions denominator per cell."""
-        return self._assemble_matrix(self._measures.row_unweighted_bases.blocks)
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- Only selected from the selection dimension
+        return self._counts[:, :, 0]
 
     @lazyproperty
-    def row_weighted_bases(self):
-        """2D np.float64 ndarray of row-proportions denominator for each cell."""
-        return self._assemble_matrix(self._measures.row_weighted_bases.blocks)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        # --- selected and not-selected both contribute to margin (axis=2), both rows
+        # --- and columns are retained.
+        return np.sum(self._counts, axis=2)
 
     @lazyproperty
-    def rows_base(self):
-        """1D/2D np.float64 ndarray of unweighted-N for each slice row/cell."""
-        # --- an X_ARRAY slice produces a 2D row-base (each cell has its own N) ---
-        # --- TODO: Should rows_base only be defined when it's 1D? This would
-        # --- require changes to exporter to use the bases to give a "rows_base_range"
-        if not self._measures.rows_unweighted_base.is_defined:
-            return self.row_unweighted_bases
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, but use row bases to add
+        # --- over the selected/not selected dimension
+        return self.row_bases
+
+    @lazyproperty
+    def _columns_pruning_base(self):
+        """1D bool np.ndarray of the sum of the row-bases for cells in a row.
+
+        Used to compute the columns-pruning-mask; not meaningful on its own.
+        """
+        # --- Because column is MR we need to override. We want to sum over the
+        # --- selection dimension (dim=2) & the rows (dim=0)
+        return np.sum(self._counts, axis=(0, 2))
 
-        # --- otherwise rows-base is a vector ---
-        return self._assemble_marginal(self._measures.rows_unweighted_base)
+
+class _CatXArrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=CAT & columns=ARR dimensions"""
 
     @lazyproperty
-    def rows_dimension_fills(self):
-        """tuple of RGB str like "#def032" fill color for each row in slice."""
-        elements = self._rows_dimension.valid_elements
-        subtotals = self._rows_dimension.subtotals
-        return tuple(
-            # ---Subtotals have negative sequential indexes (-1, -2, ..., -m)---
-            # ---To index them properly, we need to convert those indexes to---
-            # ---zero based positive indexes (0, 1, ... m - 1) i.e. -idx - 1---
-            (elements[idx].fill if idx >= 0 else subtotals[idx + len(subtotals)].fill)
-            for idx in self._row_order
-        )
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        return np.broadcast_to(self.columns_base, self.counts.shape)
 
     @lazyproperty
-    def rows_dimension_numeric_values(self):
-        """1D optional np.int/float64 ndarray of numeric-value for each row element.
+    def columns_base(self):
+        """Optional 1D np.float64 ndarray of column-wise base for each column.
 
-        A value of np.nan appears for a row element without a numeric-value. All
-        subtotal rows have a value of np.nan (subtotals have no numeric value).
+        This marginal is used as the (un)weighted N row that is shown (typically)
+        below other measures.
         """
-        elements = self._rows_dimension.valid_elements
-        return np.array(
-            [
-                (elements[idx].numeric_value if idx >= 0 else np.nan)
-                for idx in self._row_order
-            ]
-        )
+        # --- Avaialable because row is CAT, equal to the sum across rows dimension.
+        return np.sum(self._counts, axis=0)
 
     @lazyproperty
-    def rows_margin(self):
-        """1D/2D np.float64 ndarray of weighted-N for each column of this slice.
+    def columns_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each column.
 
-        This value is a 2D array if one or both of the slice dimensions are MR. This is
-        because each cell has a distinct margin in such a slice.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.columns_table_base` for details.
         """
-        # --- an X_MR slice produces a 2D rows-margin (each cell has its own N) ---
-        # --- This is really just another way to call the row_weighted_bases ---
-        # --- TODO: Should rows_margin only be defined when it's 1D? This would
-        # --- require changes to exporter to use the bases to give a "rows_margin_range"
-        if not self._measures.rows_weighted_base.is_defined:
-            return self.row_weighted_bases
-
-        # --- otherwise rows-margin is a vector ---
-        return self._assemble_marginal(self._measures.rows_weighted_base)
+        # --- Available because row is CAT, equal to columns_base because column is ARR
+        return self.columns_base
 
     @lazyproperty
-    def rows_margin_proportion(self):
-        """1D/2D np.float64 ndarray of weighted-proportion for each slice row/cell."""
-        # --- an X_MR slice produces a 2D rows-margin (each cell has its own N) ---
-        # --- TODO: Should rows_margin_proportion only be defined when it's 1D? This would
-        # --- require changes to exporter to use the bases to give a "rows_margin_range"
-        if not self._measures.rows_table_proportion.is_defined:
-            return self._assemble_matrix(
-                SumSubtotals.blocks(
-                    self.rows_margin / self.table_weighted_bases,
-                    self._dimensions,
-                )
-            )
-
-        # --- otherwise rows-margin is a vector ---
-        return self._assemble_marginal(self._measures.rows_table_proportion)
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- No MR, so counts are already in correct shape
+        return self._counts
 
     @lazyproperty
-    def rows_scale_mean(self):
-        """Optional 1D Row scale median marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.rows_scale_mean)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, bases are equal to counts
+        return self.counts
 
     @lazyproperty
-    def rows_scale_mean_stddev(self):
-        """Optional 1D row scale mean std dev marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.rows_scale_mean_stddev)
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- Can't sum across columns array, table bases equal to column bases
+        return self.column_bases
 
-    @lazyproperty
-    def rows_scale_mean_stderr(self):
-        """Optional 1D row scale mean std dev marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.rows_scale_mean_stderr)
 
-    @lazyproperty
-    def rows_scale_median(self):
-        """Optional 1D Row scale median marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.rows_scale_median)
+class _CatXCatCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=CAT & columns=CAT dimensions"""
 
     @lazyproperty
-    def smoothed_column_index(self):
-        """2D np.float64 ndarray of smoothed column-index for each table cell."""
-        return self._assemble_matrix(self._measures.smoothed_column_index.blocks)
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        return np.broadcast_to(self.columns_base, self.counts.shape)
 
     @lazyproperty
-    def smoothed_column_proportions(self):
-        """2D np.float64 ndarray of smoothed column-proportion for each matrix cell.
+    def columns_base(self):
+        """Optional 1D np.float64 ndarray of column-wise base for each column.
 
-        This is the proportion of the weighted-count for cell to the weighted-N of the
-        column the cell appears in (aka. column-margin). Generally a number between 0.0
-        and 1.0 inclusive, but subtotal differences can be between -1.0 and 1.0
-        inclusive.
+        This marginal is used as the (un)weighted N row that is shown (typically)
+        below other measures.
         """
-        return self._assemble_matrix(self._measures.smoothed_column_proportions.blocks)
+        # --- Avaialable because row is CAT, equal to the sum across rows dimension.
+        return np.sum(self._counts, axis=0)
 
     @lazyproperty
-    def smoothed_columns_scale_mean(self):
-        """Optional 1D smoothed column scale mean marginal for this cube-result"""
-        return self._assemble_marginal(self._measures.smoothed_columns_scale_mean)
+    def columns_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each column.
+
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.columns_table_base` for details.
+        """
+        # --- Available because rows are CAT, equal to a repeat of the scalar table base
+        # --- because both dimensions are CAT.
+        return np.repeat(self.table_base, self.counts.shape[1])
 
     @lazyproperty
-    def smoothed_means(self):
-        """2D optional np.float64 ndarray of smoothed mean for each cell.
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- No MR, so counts are already in correct shape
+        return self._counts
 
-        Raises `ValueError` if the cube-result does not include a means cube-measure.
-        """
-        return self._assemble_matrix(self._measures.smoothed_means.blocks)
+    @lazyproperty
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        return np.broadcast_to(self.rows_base[:, None], self.counts.shape)
 
     @lazyproperty
-    def sums(self):
-        """2D optional np.float64 ndarray of sum for each cell.
+    def rows_base(self):
+        """Optional 1D np.float64 ndarray of row-wise base for each row.
 
-        Raises `ValueError` if the cube-result does not include a sum cube-measure.
+        This marginal is used as the (un)weighted N column that is shown alongside other
+        measures.
         """
-        return self._assemble_matrix(self._measures.sums.blocks)
+        # --- Avaialable because column is CAT, equal to the sum across cols dimension.
+        return np.sum(self._counts, axis=1)
 
     @lazyproperty
-    def stddev(self):
-        """2D optional np.float64 ndarray of stddev for each cell.
+    def rows_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each row.
 
-        Raises `ValueError` if the cube-result does not include a stddev cube-measure.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.rows_table_base` for details.
         """
-        return self._assemble_matrix(self._measures.stddev.blocks)
+        # --- Available because columns are CAT, equal to a repeat of the scalar table
+        # --- base because both dimensions are CAT.
+        return np.repeat(self.table_base, self.counts.shape[0])
 
     @lazyproperty
     def table_base(self):
-        """Scalar, 1D, or 2D ndarray of np.float64 unweighted-N for this slice.
+        """Optional float of the table-wise base for the whole table."""
+        # --- Available because both dimensions are CAT, equal to sum of counts
+        return np.sum(self._counts)
 
-        This value has four distinct forms, depending on the slice dimensions:
+    @lazyproperty
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- Scalar table_base, broadcast it to the correct shape
+        return np.broadcast_to(self.table_base, self.counts.shape)
 
-            * ARR_X_ARR - 2D ndarray with a distinct table-base value per cell.
-            * ARR_X - 1D ndarray of value per *row* when only rows dimension is ARR.
-            * X_ARR - 1D ndarray of value per *column* when only columns dimension is ARR
-            * CAT_X_CAT - scalar float value when slice has no MR dimension.
 
-        """
-        if self._measures.table_unweighted_base.is_defined:
-            return self._measures.table_unweighted_base.value
-        if self._measures.columns_table_unweighted_base.is_defined:
-            return self._assemble_marginal(self._measures.columns_table_unweighted_base)
-        if self._measures.rows_table_unweighted_base.is_defined:
-            return self._assemble_marginal(self._measures.rows_table_unweighted_base)
-        return self.table_unweighted_bases
+class _CatXMrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=CAT & columns=MR dimensions"""
 
     @lazyproperty
-    def table_base_range(self):
-        """[min, max] np.float64 ndarray range of the table_margin (table-weighted-base)
-
-        A CAT_X_CAT has a scalar for all table-weighted-bases, but arrays have more than
-        one table-weighted-base. This collapses all the values them to the range, and
-        it is "unpruned", meaning that it is calculated before any hiding or removing
-        of empty rows/columns.
-        """
-        return self._measures.table_unweighted_bases_range.value
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        return np.broadcast_to(self.columns_base, self.counts.shape)
 
     @lazyproperty
-    def table_margin(self):
-        """Scalar, 1D, or 2D ndarray of np.float64 weighted-N for this slice.
-
-        This value has four distinct forms, depending on the slice dimensions:
+    def columns_base(self):
+        """Optional 1D np.float64 ndarray of column-wise base for each column.
 
-            * CAT_X_CAT - scalar float value when slice has no ARRAY dimension.
-            * ARRAY_X - 1D ndarray of value per *row* when only rows dimension is ARRAY.
-            * X_ARRAY - 1D ndarray of value per *column* when only column is ARRAY.
-            * ARRAY_X_ARRAY - 2D ndarray with a distinct table-margin value per cell.
+        This marginal is used as the (un)weighted N row that is shown (typically)
+        below other measures.
         """
-        if self._measures.table_weighted_base.is_defined:
-            return self._measures.table_weighted_base.value
-        if self._measures.columns_table_weighted_base.is_defined:
-            return self._assemble_marginal(self._measures.columns_table_weighted_base)
-        if self._measures.rows_table_weighted_base.is_defined:
-            return self._assemble_marginal(self._measures.rows_table_weighted_base)
-        return self.table_weighted_bases
-
-    @lazyproperty
-    def table_proportion_variances(self):
-        """2D ndarray of np.float64 table-proportion variance for each matrix cell."""
-        return self._assemble_matrix(self._measures.table_proportion_variances.blocks)
+        # --- Avaialable because row is CAT, equal to the sum across rows dimension.
+        return np.sum(self.counts, axis=0)
 
     @lazyproperty
-    def table_proportions(self):
-        """2D np.float64 ndarray of table-proportion for each matrix cell.
+    def columns_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each column.
 
-        This is the proportion of the weighted-count for cell to the weighted-N of the
-        row the cell appears in (aka. table-margin). Generally a number between 0.0 and
-        1.0 inclusive, but subtotal differences can be between -1.0 and 1.0 inclusive.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.columns_table_base` for details.
         """
-        return self._assemble_matrix(self._measures.table_proportions.blocks)
+        return np.sum(self._counts, axis=(0, 2))
 
     @lazyproperty
-    def table_std_err(self):
-        """2D np.float64 ndarray of std-error of table-percent for each matrix cell."""
-        return self._assemble_matrix(self._measures.table_std_err.blocks)
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- No MR, so counts are already in correct shape
+        return self._counts[:, :, 0]
 
     @lazyproperty
-    def table_unweighted_bases(self):
-        """2D np.float64 ndarray of unweighted table-proportion denominator per cell."""
-        return self._assemble_matrix(self._measures.table_unweighted_bases.blocks)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        # --- selected and not-selected both contribute to margin (axis=2), both rows
+        # --- and columns are retained.
+        return np.sum(self._counts, axis=2)
 
     @lazyproperty
-    def table_weighted_bases(self):
-        """2D np.float64 ndarray of weighted table-proportion denominator per cell."""
-        return self._assemble_matrix(self._measures.table_weighted_bases.blocks)
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- weighted-counts is (rows, cols, selected/not) so axis 1 is preserved to
+        # --- provide a distinct value for each MR subvar.
+        return np.broadcast_to(self.columns_table_base, self.counts.shape)
 
     @lazyproperty
-    def total_share_sum(self):
-        """2D optional np.float64 ndarray of total share of sum for each cell.
+    def _columns_pruning_base(self):
+        """1D bool np.ndarray of the sum of the row-bases for cells in a row.
 
-        Raises `ValueError` if the cube-result does not include a sum
-        cube-measure.
+        Used to compute the columns-pruning-mask; not meaningful on its own.
         """
-        return self._assemble_matrix(self._measures.total_share_sum.blocks)
+        # --- Because column is MR we need to override. We want to sum over the
+        # --- selection dimension (dim=2) & the rows (dim=0)
+        return np.sum(self._counts, axis=(0, 2))
+
+
+class _MrXArrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=MR & columns=ARR dimensions"""
 
     @lazyproperty
-    def table_margin_range(self):
-        """[min, max] np.float64 ndarray range of the table_margin (table-weighted-base)
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        # --- selected and not-selected both contribute to margin (axis=2), both rows
+        # --- and columns are retained.
+        return np.sum(self._counts, axis=1)
 
-        A CAT_X_CAT has a scalar for all table-weighted-bases, but arrays have more than
-        one table-weighted-base. This collapses all of the values to a range, and
-        it is "unpruned", meaning that it is calculated before any hiding or removing
-        of empty rows/columns.
-        """
-        return self._measures.table_weighted_bases_range.value
+    @lazyproperty
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- Only selected from the selection dimension
+        return self._counts[:, 0, :]
 
     @lazyproperty
-    def unweighted_counts(self):
-        """2D np.float64 ndarray of unweighted-count for each cell."""
-        return self._assemble_matrix(self._measures.unweighted_counts.blocks)
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        return self.counts
 
     @lazyproperty
-    def weighted_counts(self):
-        """2D np.float64 ndarray of weighted-count for each cell."""
-        return self._assemble_matrix(self._measures.weighted_counts.blocks)
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- No addition across subvariables possible, but use column bases to add
+        # --- over the selected/not selected dimension
+        return self.column_bases
 
     @lazyproperty
-    def zscores(self):
-        """2D np.float64 ndarray of std-res value for each cell of matrix.
+    def _rows_pruning_base(self):
+        """1D bool np.ndarray of the sum of the column-bases for cells in a column.
 
-        A z-score is also known as a *standard score* and is the number of standard
-        deviations above (positive) or below (negative) the population mean a cell's
-        value is.
+        Used to compute the rows-pruning-mask; not meaningful on its own.
         """
-        return self._assemble_matrix(self._measures.zscores.blocks)
+        # --- Because row is MR we need to override. We want to sum over the
+        # --- selection dimension (dim=1) & the columns (dim=1)
+        return np.sum(self._counts, axis=(1, 2))
 
-    def _assemble_marginal(self, marginal):
-        """Optional 1D ndarray created from a marginal.
 
-        The assembled marginal is the shape of either a row or column (determined by
-        `marginal.orientation`), and with the ordering that's applied to those
-        dimensions.
+class _MrXCatCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=MR & columns=CAT dimensions"""
 
-        It is None when the marginal is not defined (`marginal._is_defined`).
-        """
-        if not marginal.is_defined:
-            return None
+    @lazyproperty
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        # --- selected and not-selected both contribute to margin (axis=1), both rows
+        # --- and columns are retained.
+        return np.sum(self._counts, axis=1)
 
-        order = (
-            self._row_order if marginal.orientation == MO.ROWS else self._column_order
-        )
+    @lazyproperty
+    def counts(self):
+        """2D np.float64 ndarray of the count for each valid matrix cell."""
+        # --- Only selected from the selection dimension
+        return self._counts[:, 0, :]
 
-        return np.hstack(marginal.blocks)[order]
+    @lazyproperty
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        return np.broadcast_to(self.rows_base[:, None], self.counts.shape)
 
-    def _assemble_matrix(self, blocks):
-        """Return 2D ndarray matrix assembled from `blocks`.
+    @lazyproperty
+    def rows_base(self):
+        """Optional 1D np.float64 ndarray of row-wise base for each row.
 
-        The assembled matrix includes inserted vectors (rows and columns), has hidden
-        vectors removed, and is ordered by whatever sort method is applied in the
-        dimension transforms.
+        This marginal is used as the (un)weighted N column that is shown alongside other
+        measures.
         """
-        # --- These are assembled into a single 2D array, and then rearranged based on
-        # --- row and column orders. All insertion, ordering, and hiding transforms are
-        # --- reflected in the row and column orders. They each include (negative)
-        # --- insertion idxs, hidden and pruned vector indices have been removed, and
-        # --- the ordering method has been applied to determine the sequence each idx
-        # --- appears in. This directly produces a final array that is exactly the
-        # --- desired output.
-        return np.block(blocks)[np.ix_(self._row_order, self._column_order)]
+        # --- Avaialable because column is CAT, equal to the sum across cols dimension.
+        return np.sum(self.counts, axis=1)
 
-    def _assemble_vector(self, base_vector, subtotals, order, diffs_nan=False):
-        """Return 1D ndarray of `base_vector` with inserted `subtotals`, in `order`.
+    @lazyproperty
+    def rows_table_base(self):
+        """Optional 1D np.float64 ndarray of table-wise base for each row.
 
-        Each subtotal value is the result of applying np.sum to the addends and
-        subtrahends extracted from `base_vector` according to the `addend_idxs`
-        and `subtrahend_idxs` property of each subtotal in `subtotals`. The returned
-        array is arranged by `order`, including possibly removing hidden or pruned
-        values.
+        This marginal is used as the denominator of the margin-table-proportions. The
+        name is a mouthful, see `_BaseCubeCounts.rows_table_base` for details.
         """
-        # TODO: This works for "sum" and "diff" subtotals, because either we set to
-        # nan or add & subtract, but a fuller solution will probably get the subtotal
-        # values from a _BaseSubtotals subclass.
-        vector_subtotals = np.array(
-            [
-                np.nan
-                if diffs_nan and len(subtotal.subtrahend_idxs) > 0
-                else np.sum(base_vector[subtotal.addend_idxs])
-                - np.sum(base_vector[subtotal.subtrahend_idxs])
-                for subtotal in subtotals
-            ]
-        )
-        return np.hstack([base_vector, vector_subtotals])[order]
+        # --- Since the rows-dimension is MR, each row has a distinct table base, since
+        # --- not all of the multiple responses were necessarily offered to all
+        # --- respondents. The table-base for each row indicates the weighted number
+        # --- of respondents who were offered that option.
+        return np.sum(self._counts, axis=(1, 2))
 
     @lazyproperty
-    def _column_order(self):
-        """1D np.int64 ndarray of signed int idx for each assembled column.
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- Broadcast the rows_table_base to the correct shape
+        return np.broadcast_to(self.rows_table_base[:, None], self.counts.shape)
 
-        Negative values represent inserted subtotal-column locations.
+    @lazyproperty
+    def _rows_pruning_base(self):
+        """1D bool np.ndarray of the sum of the column-bases for cells in a column.
+
+        Used to compute the rows-pruning-mask; not meaningful on its own.
         """
-        return _BaseOrderHelper.column_display_order(self._dimensions, self._measures)
+        # --- Because row is MR we need to override. We want to sum over the
+        # --- selection dimension (dim=1) & the columns (dim=1)
+        return np.sum(self._counts, axis=(1, 2))
+
+
+class _MrXMrCubeCounts(_BaseCubeCounts):
+    """Counts cube-measure for a slice with rows=MR & columns=MR dimensions"""
 
     @lazyproperty
-    def _column_subtotals(self):
-        """Sequence of _Subtotal object for each inserted column."""
-        return self._columns_dimension.subtotals
+    def column_bases(self):
+        """2D np.float64 ndarray of column-wise bases for each matrix cell."""
+        # --- only column-selected counts contribute ([:, :, :, 0]), row-selected and
+        # --- not-selected are summed (axis=1), rows and columns are retained.
+        return np.sum(self._counts[:, :, :, 0], axis=1)
 
     @lazyproperty
-    def _columns_dimension(self):
-        """The `Dimension` object representing column elements in this matrix."""
-        return self._dimensions[1]
+    def counts(self):
+        """2D np.float64 ndarray of the count for each matrix cell."""
+        # --- Only selected from the selection dimension
+        return self._counts[:, 0, :, 0]
 
     @lazyproperty
-    def _cube_has_overlaps(self):
-        """True if overlaps are defined and the last dimension is MR, False otherwise"""
-        return (
-            self._dimensions[-1].dimension_type == DT.MR
-            and self._cube.overlaps is not None
-            and self._cube.valid_overlaps is not None
-        )
+    def row_bases(self):
+        """2D np.float64 ndarray of row-wise bases for each matrix cell."""
+        # --- only selecteds in rows contribute ([:, 0, :, :]), selected and not from
+        # --- columns both contribute (axis=2 after rows sel/not axis is collapsed)
+        return np.sum(self._counts[:, 0, :, :], axis=2)
+
+    @lazyproperty
+    def table_bases(self):
+        """2D np.float64 ndarray of table-wise bases for each matrix cell."""
+        # --- Reduce second and fourth axes (the two MR_CAT dimensions) with sum()
+        # --- producing 2D (nrows, ncols). This sums the (selected, selected),
+        # --- (selected, not), (not, selected) and (not, not) cells of the subtable for
+        # --- each matrix cell.
+        return np.sum(self._counts, axis=(1, 3))
 
-    def _derived_element_idxs(self, dimension, order):
-        """Return tuple(int) of derived elements' indices for a dimension.
+    @lazyproperty
+    def _columns_pruning_base(self):
+        """1D bool np.ndarray of the sum of the row-bases for cells in a row.
 
-        Subtotals cannot be derived elements. Only some elements (subvariables) can.
+        Used to compute the columns-pruning-mask; not meaningful on its own.
         """
-        n_subtotals = len(dimension.valid_elements)
-        derivs = [e.derived for e in dimension.valid_elements] + [False] * n_subtotals
-        return tuple(np.where(np.array(derivs)[order])[0])
+        return np.sum(self._counts[:, :, :, 0], axis=(0, 1))
 
-    def _diff_element_idxs(self, dimension, order):
-        """Return tuple(int) of difference elements' indices for a dimension.
+    @lazyproperty
+    def _rows_pruning_base(self):
+        """1D bool np.ndarray of the sum of the column-bases for cells in a column.
 
-        Valid elements cannot be differences. Only some subtotals can.
+        Used to compute the rows-pruning-mask; not meaningful on its own.
         """
-        n_valids = len(dimension.valid_elements)
-        diffs = [False] * n_valids + [e.is_difference for e in dimension.subtotals]
-        return tuple(np.where(np.array(diffs)[order])[0])
+        return np.sum(self._counts[:, 0, :, :], axis=(1, 2))
 
-    def _dimension_aliases(self, dimension, order):
-        """1D str ndarray of alias for each vector of `dimension`.
 
-        These are suitable for use as row/column headings; alias for subtotals appear
-        in the sequence specified by `order`, such that aliases are ordered to
-        correspond with their respective data vector.
-        """
-        return np.array(dimension.element_aliases + dimension.subtotal_aliases)[order]
+# === MEANS ===
 
-    def _dimension_codes(self, dimension, order):
-        """1D str ndarray of codes for each vector of `dimension`.
 
-        These are suitable for use as row/column headings; codes for subtotals appear
-        in the sequence specified by `order`, such that codes are ordered to
-        correspond with their respective data vector.
-        """
-        return np.array(dimension.element_ids + dimension.insertion_ids)[order]
+class _BaseCubeMeans(_BaseCubeMeasure):
+    """Base class for mean cube-measure variants."""
+
+    def __init__(self, dimensions, means):
+        super(_BaseCubeMeans, self).__init__(dimensions)
+        self._means = means
 
-    def _dimension_labels(self, dimension, order):
-        """1D str ndarray of name for each vector of `dimension`.
+    @classmethod
+    def factory(cls, cube, dimensions, slice_idx):
+        """Return _BaseCubeMeans subclass instance appropriate to `cube`.
 
-        These are suitable for use as row/column headings; labels for subtotals appear
-        in the sequence specified by `order`, such that labels are ordered to correspond
-        with their respective data vector.
+        Raises `ValueError` if the cube-result does not include a cube-means measure.
         """
-        return np.array(dimension.element_labels + dimension.subtotal_labels)[order]
+        if cube.means is None:
+            raise ValueError("cube-result does not contain cube-means measure")
+        dimension_types = cube.dimension_types[-2:]
+        CubeMeansCls = (
+            _MrXMrCubeMeans
+            if dimension_types == (DT.MR, DT.MR)
+            else _MrXCatCubeMeans
+            if dimension_types[0] == DT.MR
+            else _CatXMrCubeMeans
+            if dimension_types[1] == DT.MR
+            else _CatXCatCubeMeans
+        )
+        return CubeMeansCls(
+            dimensions, cube.means[cls._slice_idx_expr(cube, slice_idx)]
+        )
 
     @lazyproperty
-    def _measures(self):
-        """SecondOrderMeasures collection object for this cube-result."""
-        return SecondOrderMeasures(self._cube, self._dimensions, self._slice_idx)
+    def means(self):
+        """2D np.float64 ndarray of cube means."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.means`"
+        )
 
-    @staticmethod
-    def _pairwise_indices(p_vals, t_stats, alpha, only_larger):
-        """1D ndarray containing tuples of int pairwise indices of each column."""
-        significance = p_vals < alpha
-        if only_larger:
-            significance = np.logical_and(t_stats < 0, significance)
-        col_significance = np.empty((len(significance),), dtype=object)
-        col_significance[:] = [tuple(np.where(sig_row)[0]) for sig_row in significance]
-        return col_significance
+
+class _CatXCatCubeMeans(_BaseCubeMeans):
+    """Means cube-measure for a slice with no MR dimensions."""
 
     @lazyproperty
-    def _row_order(self):
-        """1D np.int64 ndarray of signed int idx for each assembled row.
+    def means(self):
+        """2D np.float64 ndarray of means for each valid matrix cell."""
+        return self._means
 
-        Negative values represent inserted subtotal-row locations.
-        """
-        return _BaseOrderHelper.row_display_order(self._dimensions, self._measures)
+
+class _CatXMrCubeMeans(_BaseCubeMeans):
+    """Means cube-measure for a NOT_MR_X_MR slice.
+
+    Note that the rows-dimensions need not actually be CAT.
+    """
 
     @lazyproperty
-    def _row_subtotals(self):
-        """Sequence of _Subtotal object for each inserted row."""
-        return self._rows_dimension.subtotals
+    def means(self):
+        """2D np.float64 ndarray of means for each valid matrix cell."""
+        return self._means[:, :, 0]
+
+
+class _MrXCatCubeMeans(_BaseCubeMeans):
+    """Means cube-measure for an MR_X_NOT_MR slice.
+
+    Note that the columns-dimension need not actually be CAT.
+    """
 
     @lazyproperty
-    def _rows_dimension(self):
-        """The `Dimension` object representing row elements in this matrix."""
-        return self._dimensions[0]
+    def means(self):
+        """2D np.float64 ndarray of means for each valid matrix cell."""
+        return self._means[:, 0, :]
 
 
-class _BaseOrderHelper:
-    """Base class for ordering helpers."""
+class _MrXMrCubeMeans(_BaseCubeMeans):
+    """Means cube-measure for an MR_X_MR slice."""
 
-    def __init__(self, dimensions, second_order_measures):
-        self._dimensions = dimensions
-        self._second_order_measures = second_order_measures
+    @lazyproperty
+    def means(self):
+        """2D np.float64 ndarray of means for each valid matrix cell."""
+        # --- indexing is: all-rows, sel-only, all-cols, sel-only ---
+        return self._means[:, 0, :, 0]
 
-    @classmethod
-    def column_display_order(cls, dimensions, second_order_measures):
-        """1D np.int64 ndarray of signed int idx for each column of measure matrix.
 
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        columns-dimension.
-        """
-        # --- This is essentially a factory method. There is no sort-columns-by-value
-        # --- yet, and both explicit and payload ordering are handled by
-        # --- _ColumnOrderHelper, so there's not much to this yet, just keeping
-        # --- form consistent with `.row_display_order()` and we'll elaborate this when
-        # --- we add sort-by-value to columns.
-        return _ColumnOrderHelper(dimensions, second_order_measures)._display_order
+# === OVERLAPS ===
+
+
+class _BaseCubeOverlaps(_BaseCubeMeasure):
+    """Base class for overlap cube-measure variants."""
+
+    def __init__(self, dimensions, overlaps, valid_overlaps):
+        super(_BaseCubeOverlaps, self).__init__(dimensions)
+        self._overlaps = overlaps
+        self._valid_overlaps = valid_overlaps
 
     @classmethod
-    def row_display_order(cls, dimensions, second_order_measures):
-        """1D np.int64 ndarray of signed int idx for each row of measure matrix.
+    def factory(cls, cube, dimensions, slice_idx):
+        """Return _BaseCubeOverlaps subclass instance appropriate to `cube`.
 
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        rows-dimension.
-        """
-        collation_method = dimensions[0].order_spec.collation_method
-        dim_type = dimensions[1].dimension_type
-        HelperCls = (
-            _SortRowsByBaseColumnHelper
-            if collation_method == CM.OPPOSING_ELEMENT
-            else _SortRowsByDerivedColumnHelper
-            if collation_method == CM.OPPOSING_INSERTION and dim_type in DT.ARRAY_TYPES
-            else _SortRowsByInsertedColumnHelper
-            if collation_method == CM.OPPOSING_INSERTION
-            else _SortRowsByLabelHelper
-            if collation_method == CM.LABEL
-            else _SortRowsByMarginalHelper
-            if collation_method == CM.MARGINAL
-            else _RowOrderHelper
-        )
-
-        return HelperCls(dimensions, second_order_measures)._display_order
-
-    @lazyproperty
-    def _display_order(self):
-        """1D np.int64 ndarray of signed int idx for each vector of dimension.
-
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        rows-dimension.
-        """
-        # --- Returning as np.array suits its intended purpose, which is to participate
-        # --- in an np._ix() call. It works fine as a sequence too for any alternate
-        # --- use. Specifying int type prevents failure when there are zero elements.
-        if self._prune_subtotals:
-            return np.array([idx for idx in self._order if idx >= 0], dtype=int)
-        return np.array(self._order, dtype=int)
-
-    @lazyproperty
-    def _columns_dimension(self):
-        """The `Dimension` object representing column elements in the matrix."""
-        return self._dimensions[1]
-
-    @lazyproperty
-    def _empty_column_idxs(self):
-        """tuple of int index for each column with (unweighted) N = 0.
-
-        These columns are subject to pruning, depending on a user setting in the
-        dimension.
-        """
-        # --- subset because numpy.where returns tuple to allow for multiple axes
-        return tuple(np.where(self._second_order_measures.columns_pruning_mask)[0])
-
-    @lazyproperty
-    def _empty_row_idxs(self):
-        """tuple of int index for each row with N = 0.
-
-        These rows are subject to pruning, depending on a user setting in the dimension.
-        """
-        # --- subset because numpy.where returns tuple to allow for multiple axes
-        return tuple(np.where(self._second_order_measures.rows_pruning_mask)[0])
-
-    @lazyproperty
-    def _measure(self):
-        """Second-order measure object providing values for sort.
-
-        Returns None when the measure in the `order_spec` is not enable for sorting.
-
-        This property is not used by some subclasses.
-        """
-        # --- Sometimes we sort by a measure that is a monotonic transformation of
-        # --- another measure that is already calculated by the assembler. Because
-        # --- monotonic transformations preserve order, the sorting is correct.
-        propname_by_measure = {
-            M.COLUMN_BASE_UNWEIGHTED: "column_unweighted_bases",
-            M.COLUMN_BASE_WEIGHTED: "column_weighted_bases",
-            M.COLUMN_INDEX: "column_index",
-            M.COLUMN_PERCENT: "column_proportions",
-            M.COLUMN_PERCENT_MOE: "column_std_err",  # monotonic transform
-            M.COLUMN_SHARE_SUM: "column_share_sum",
-            M.COLUMN_STDDEV: "column_proportion_variances",  # monotonic transform
-            M.COLUMN_STDERR: "column_std_err",
-            M.MEAN: "means",
-            M.POPULATION: "population_proportions",  # montonic transform
-            M.POPULATION_MOE: "population_std_err",  # monotonic transform
-            M.PVALUES: "pvalues",
-            M.ROW_BASE_UNWEIGHTED: "row_unweighted_bases",
-            M.ROW_BASE_WEIGHTED: "row_weighted_bases",
-            M.ROW_PERCENT: "row_proportions",
-            M.ROW_PERCENT_MOE: "row_std_err",  # monotonic transform
-            M.ROW_SHARE_SUM: "row_share_sum",
-            M.ROW_STDDEV: "row_proportion_variances",  # montonic transform
-            M.ROW_STDERR: "row_std_err",
-            M.STDDEV: "stddev",
-            M.SUM: "sums",
-            M.TABLE_PERCENT: "table_proportions",
-            M.TABLE_PERCENT: "table_proportions",
-            M.TABLE_PERCENT_MOE: "table_std_err",  # monotonic transform
-            M.TABLE_STDDEV: "table_proportion_variances",  # monotonic transform
-            M.TABLE_STDERR: "table_std_err",
-            M.TABLE_BASE_UNWEIGHTED: "table_unweighted_bases",
-            M.TABLE_BASE_WEIGHTED: "table_weighted_bases",
-            M.TOTAL_SHARE_SUM: "total_share_sum",
-            M.UNWEIGHTED_COUNT: "unweighted_counts",
-            M.UNWEIGHTED_VALID_COUNT: "unweighted_counts",
-            M.WEIGHTED_COUNT: "weighted_counts",
-            M.WEIGHTED_VALID_COUNT: "weighted_counts",
-            M.Z_SCORE: "zscores",
-        }
-        measure = self._order_spec.measure
-        measure_propname = propname_by_measure.get(measure)
-
-        if measure_propname is None:
-            raise NotImplementedError(
-                f"sort-by-value for measure '{measure}' is not yet supported"
-            )
-
-        return getattr(self._second_order_measures, measure_propname)
-
-    @lazyproperty
-    def _order(self):
-        """tuple of signed int idx for each sorted vector of measure matrix.
-
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        rows-dimension.
+        Raises `ValueError` if the cube-result does not include a cube-overlaps measure
+        or if it doesn't include valid-cube-overlaps measure.
         """
-        raise NotImplementedError(  # pragma: no cover
-            f"{type(self).__name__} must implement `._order`"
+        if cube.overlaps is None:
+            raise ValueError(
+                "cube-result does not contain cube-overlaps measure"
+            )  # pragma: no cover
+        if cube.valid_overlaps is None:
+            raise ValueError(
+                "cube-result does not contain cube-valid-overlaps measure"
+            )  # pragma: no cover
+
+        dimension_types = tuple(d.dimension_type for d in dimensions)
+        idx_expr = cls._slice_idx_expr(cube, slice_idx)
+        args = (dimensions, cube.overlaps[idx_expr], cube.valid_overlaps[idx_expr])
+        return (
+            _MrXMrOverlaps(*args)
+            if dimension_types == (DT.MR, DT.MR)
+            else _CatXMrOverlaps(*args)
         )
 
     @lazyproperty
-    def _order_spec(self):
-        """_OrderSpec object for dimension being sorted.
-
-        Provides access to ordering details like measure and sort-direction.
-        """
+    def overlaps(self):
+        """3D np.float64 ndarray of cube overlaps."""
         raise NotImplementedError(  # pragma: no cover
-            f"{type(self).__name__} must implement `._order_spec`"
+            f"`{type(self).__name__}` must implement `.overlaps`"
         )
 
+
+class _CatXMrOverlaps(_BaseCubeOverlaps):
+    """Overlaps cube-measure for a NOT_MR_X_MR slice."""
+
     @lazyproperty
-    def _prune_subtotals(self):
-        """True if subtotal vectors need to be pruned, False otherwise."""
-        raise NotImplementedError(  # pragma: no cover
-            f"{type(self).__name__} must implement `._prune_subtotals`"
-        )
+    def tile_repetitions(self):
+        """tuple of number of repetitions of selected base matrix."""
+        return (self._overlaps.shape[0], 1, 1)
 
     @lazyproperty
-    def _rows_dimension(self):
-        """The `Dimension` object representing row elements in the matrix."""
-        return self._dimensions[0]
+    def selected_bases(self):
+        """3D np.float64 ndarray of selected overlaps between MR subvariables, per cat.
 
+        For a CAT x MR matrix, the overlaps are calculated for each category, and then
+        for each subvariables pair for that category (which will produce a square
+        matrix for each category). So the output shape that we get back from the
+        database is CAT x MR_SUBVAR x MR_SEL x MR_SUBVAR (the last one being the result
+        of the `cube_overlap` measure, and representing the "pairing" with each subvar
+        of the previous MR_SUBVAR dimension.
 
-class _ColumnOrderHelper(_BaseOrderHelper):
-    """Encapsulates the complexity of the various kinds of column ordering."""
+        From this shape, we only need the "Selected" part of the MR_SEL dimension, so
+        we need to select the 0th element along the 2nd axis [:, :, 0]. But we also need
+        to add all of the categories together, since that's what's used for the base
+        value in all of the significance calculations. We then tile these bases, since
+        they're the same for each row (all the categories added together). The tiling is
+        done so that the API of this class can be uniform for all users.
+        """
+        return np.tile(np.sum(self._overlaps[:, :, 0], axis=0), self.tile_repetitions)
 
     @lazyproperty
-    def _order(self):
-        """tuple of signed int idx for each column of measure matrix.
+    def valid_bases(self):
+        """3D np.float64 ndarray of valid overlaps between MR subvariables, per cat.
+
+        For a CAT x MR matrix, the overlaps are calculated for each category, and then
+        for each subvariables pair for that category (which will produce a square
+        matrix for each category). So the output shape that we get back from the
+        database is CAT x MR_SUBVAR x MR_SEL x MR_SUBVAR (the last one being the result
+        of the `cube_overlap` measure, and representing the "pairing" with each subvar
+        of the previous MR_SUBVAR dimension.
 
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        rows-dimension.
+        From this shape, we only need the "Selected" + "Other" part of the MR_SEL
+        dimension (i.e. all except missing), so we need to add the 0th and the 1st
+        element along the 2nd axis sum([:, :, 0:2]).
         """
-        CollatorCls = (
-            ExplicitOrderCollator
-            if self._order_spec.collation_method == CM.EXPLICIT_ORDER
-            else PayloadOrderCollator
-        )
-        return CollatorCls.display_order(
-            self._columns_dimension, self._empty_column_idxs
-        )
+        valids = np.sum(self._valid_overlaps[:, :, 0:2], axis=2)
+        return np.tile(np.sum(valids, axis=0), self.tile_repetitions)
+
+
+class _MrXMrOverlaps(_BaseCubeOverlaps):
+    """Overlaps cube-measure for a MR_X_MR slice."""
 
     @lazyproperty
-    def _order_spec(self):
-        """_OrderSpec object for the columns dimension.
+    def selected_bases(self):
+        """3D np.float64 ndarray of selected overlaps bases between MR subvariables.
 
-        Provides access to ordering details like measure and sort-direction.
+        For a MR x MR slice, the overlaps are calculated for each MR subvar row, and
+        then for each subvariables pair for that row (which will produce a square
+        matrix for each category). So the output shape that we get back from the
+        database is MR_SUBVAR x MR_SEL x MR_SUBVAR x MR_SEL x MR_SUBVAR (the last one
+        being the result of the `cube_overlap` measure, and representing the "pairing"
+        with each subvar of the last MR_SUBVAR dimension.
+
+        From this shape, we only need the "Selected" part of the last MR_SEL dimension,
+        but we need both "Selected" and "Other" from the first MR_SEL dimension. We
+        therefore need to select the 0th element along the 3rd axis, but we need to sum
+        the 0th and 1st elements along the 1st axis (first MR_SEL dimension). The sum
+        of the selected and other counts of the first MR_SEL is what's always used to
+        represent bases of such crosstabs (we cannot simply ignore the other counts).
         """
-        return self._columns_dimension.order_spec
+        return np.sum(self._overlaps[:, 0:2, :, 0], axis=1)
 
     @lazyproperty
-    def _prune_subtotals(self):
-        """True if subtotal columns need to be pruned, False otherwise.
+    def valid_bases(self):
+        """3D np.float64 ndarray of valid overlaps between MR subvariables, per row.
+
+        For a MR x MR slice, the overlaps are calculated for each row, and then
+        for each subvariables pair for that row (which will produce a square matrix for
+        each row). So the output shape that we get back from the database is
+        MR_SUBVAR x MR_SEL x MR_SUBVAR x MR_SEL x MR_SUBVAR (the last one being the
+        result of the `cube_overlap` measure, and representing the "pairing" with each
+        subvar of the last MR_SUBVAR dimension.
 
-        Subtotal-columns need to be pruned when all base-rows are pruned. Subtotal
-        columns are only subject to pruning when row-pruning is specified in the
-        request.
+        From this shape, we only need the "Selected" + "Other" part of both MR_SEL
+        dimensions (i.e. all except missing), so we need to add the 0th and the 1st
+        element along the 1st and 3rd axes sum([:, 0:2, :, 0:2], axis=(1, 3)).
         """
-        return (
-            len(self._empty_row_idxs) == len(self._rows_dimension.element_ids)
-            if self._rows_dimension.prune
-            else False
-        )
+        return np.sum(self._valid_overlaps[:, 0:2, :, 0:2], axis=(1, 3))
 
 
-class _RowOrderHelper(_BaseOrderHelper):
-    """Encapsulates the complexity of the various kinds of row ordering."""
+# === STD DEV ===
 
-    @lazyproperty
-    def _order(self):
-        """tuple of signed int idx for each row of measure matrix.
 
-        Negative values represent inserted-vector locations. Returned sequence reflects
-        insertion, hiding, pruning, and ordering transforms specified in the
-        rows-dimension.
+class _BaseCubeStdDev(_BaseCubeMeasure):
+    """Base class for stddev cube-measure variants."""
+
+    def __init__(self, dimensions, stddev):
+        super(_BaseCubeStdDev, self).__init__(dimensions)
+        self._stddev = stddev
+
+    @classmethod
+    def factory(cls, cube, dimensions, slice_idx):
+        """Return _BaseCubeStdDev subclass instance appropriate to `cube`.
+
+        Raises `ValueError` if the cube-result does not include a cube-stddev measure.
         """
-        CollatorCls = (
-            ExplicitOrderCollator
-            if self._order_spec.collation_method == CM.EXPLICIT_ORDER
-            else PayloadOrderCollator
+        if cube.stddev is None:
+            raise ValueError("cube-result does not contain cube-stddev measure")
+        dimension_types = cube.dimension_types[-2:]
+        CubeSumsCls = (
+            _MrXMrCubeStdDev
+            if dimension_types == (DT.MR, DT.MR)
+            else _MrXCatCubeStdDev
+            if dimension_types[0] == DT.MR
+            else _CatXMrCubeStdDev
+            if dimension_types[1] == DT.MR
+            else _CatXCatCubeStdDev
+        )
+        return CubeSumsCls(
+            dimensions, cube.stddev[cls._slice_idx_expr(cube, slice_idx)]
         )
-        return CollatorCls.display_order(self._rows_dimension, self._empty_row_idxs)
 
     @lazyproperty
-    def _order_spec(self):
-        """_OrderSpec object for this row dimension.
+    def stddev(self):
+        """2D np.float64 ndarray of cube stddev."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.stddev`"
+        )
 
-        Provides access to ordering details like measure and sort-direction.
-        """
-        return self._rows_dimension.order_spec
+
+class _CatXCatCubeStdDev(_BaseCubeStdDev):
+    """StdDev cube-measure for a slice with no MR dimensions."""
 
     @lazyproperty
-    def _prune_subtotals(self):
-        """True if subtotal rows need to be pruned, False otherwise.
+    def stddev(self):
+        """2D np.float64 ndarray of stddev for each valid matrix cell."""
+        return self._stddev
 
-        Subtotal-rows need to be pruned when all base-columns are pruned. Subtotal rows
-        only subject to pruning when column-pruning is specified in the request.
-        """
-        return (
-            len(self._empty_column_idxs) == len(self._columns_dimension.element_ids)
-            if self._columns_dimension.prune
-            else False
-        )
 
+class _CatXMrCubeStdDev(_BaseCubeStdDev):
+    """StdDev cube-measure for a NOT_MR_X_MR slice.
+
+    Note that the rows-dimensions need not actually be CAT.
+    """
+
+    @lazyproperty
+    def stddev(self):
+        """2D np.float64 ndarray of stddev for each valid matrix cell."""
+        return self._stddev[:, :, 0]
 
-class _BaseSortRowsByValueHelper(_RowOrderHelper):
-    """A base class that orders elements by a set of values.
 
-    This class is intended only to serve as a base for the other sort-by-value classes
-    which must all provide their own implentations of `_element_values` and
-    `_subtotal_values`.
+class _MrXCatCubeStdDev(_BaseCubeStdDev):
+    """StdDev cube-measure for an MR_X_NOT_MR slice.
 
-    If `_order` encouters a ValueError, it falls back to the payload order.
+    Note that the columns-dimension need not actually be CAT.
     """
 
     @lazyproperty
-    def _element_values(self):
-        """Sequence of body values that form the basis for sort order.
+    def stddev(self):
+        """2D np.float64 ndarray of stddev for each valid matrix cell."""
+        return self._stddev[:, 0, :]
 
-        Must be implemented by child classes.
-        """
-        raise NotImplementedError(  # pragma: no cover
-            f"{type(self).__name__} must implement `._element_values`"
-        )
 
-    @lazyproperty
-    def _order(self):
-        """tuple of int element-idx specifying ordering of dimension elements."""
-        try:
-            return SortByValueCollator.display_order(
-                self._rows_dimension,
-                self._element_values,
-                self._subtotal_values,
-                self._empty_row_idxs,
-            )
-        except ValueError:
-            return PayloadOrderCollator.display_order(
-                self._rows_dimension, self._empty_row_idxs
-            )
+class _MrXMrCubeStdDev(_BaseCubeStdDev):
+    """StdDev cube-measure for an MR_X_MR slice."""
 
     @lazyproperty
-    def _subtotal_values(self):
-        """Sequence of subtotal values that form the basis for sort order.
+    def stddev(self):
+        """2D np.float64 ndarray of stddev for each valid matrix cell."""
+        # --- indexing is: all-rows, sel-only, all-cols, sel-only ---
+        return self._stddev[:, 0, :, 0]
 
-        Must be implemented by child classes.
-        """
-        raise NotImplementedError(  # pragma: no cover
-            f"{type(self).__name__} must implement `._subtotal_values`"
-        )
 
+# === SUMS ===
 
-class _SortRowsByBaseColumnHelper(_BaseSortRowsByValueHelper):
-    """Orders elements by the values of an opposing base (not a subtotal) vector.
 
-    This would be like "order rows in descending order by value of 'Strongly Agree'
-    column. An opposing-element ordering is only available on a matrix, because only
-    a matrix dimension has an opposing dimension.
-    """
+class _BaseCubeSums(_BaseCubeMeasure):
+    """Base class for sum cube-measure variants."""
 
-    @lazyproperty
-    def _column_idx(self):
-        """int index of column whose values the sort is based on."""
-        column_element_ids = self._columns_dimension.element_ids
-        sort_column_id = self._order_spec.element_id
-        # --- Need to translate the element id to the shimmed element id
-        sort_column_id = self._columns_dimension.translate_element_id(sort_column_id)
-        return column_element_ids.index(sort_column_id)
+    def __init__(self, dimensions, sums):
+        super(_BaseCubeSums, self).__init__(dimensions)
+        self._sums = sums
 
-    @lazyproperty
-    def _element_values(self):
-        """Sequence of body values that form the basis for sort order.
+    @classmethod
+    def factory(cls, cube, dimensions, slice_idx):
+        """Return _BaseCubeSums subclass instance appropriate to `cube`.
 
-        There is one value per row and values appear in payload (dimension) element
-        order. These are only the "base" values and do not include insertions.
+        Raises `ValueError` if the cube-result does not include a cube-sum measure.
         """
-        measure_base_values = self._measure.blocks[0][0]
-        return measure_base_values[:, self._column_idx]
+        if cube.sums is None:
+            raise ValueError("cube-result does not contain cube-sum measure")
+        dimension_types = cube.dimension_types[-2:]
+        CubeSumsCls = (
+            _MrXMrCubeSums
+            if dimension_types == (DT.MR, DT.MR)
+            else _MrXCatCubeSums
+            if dimension_types[0] == DT.MR
+            else _CatXMrCubeSums
+            if dimension_types[1] == DT.MR
+            else _CatXCatCubeSums
+        )
+        return CubeSumsCls(dimensions, cube.sums[cls._slice_idx_expr(cube, slice_idx)])
 
     @lazyproperty
-    def _subtotal_values(self):
-        """Sequence of row-subtotal values that contribute to the sort basis.
+    def sums(self):
+        """2D np.float64 ndarray of cube sum."""
+        raise NotImplementedError(  # pragma: no cover
+            f"`{type(self).__name__}` must implement `.sum`"
+        )
 
-        There is one value per row subtotal and values appear in payload (dimension)
-        insertion order.
-        """
-        measure_subtotal_rows = self._measure.blocks[1][0]
-        return measure_subtotal_rows[:, self._column_idx]
 
+class _CatXCatCubeSums(_BaseCubeSums):
+    """Sums cube-measure for a slice with no MR dimensions."""
+
+    @lazyproperty
+    def sums(self):
+        """2D np.float64 ndarray of sum for each valid matrix cell."""
+        return self._sums
 
-class _SortRowsByDerivedColumnHelper(_SortRowsByBaseColumnHelper):
-    """Orders elements by the values of an opposing "derived" element vector.
 
-    "Derived" columns are insertions that are calculated by zz9 and put into the
-    cube result before this cr.cube library gets them. These insertions are always
-    on a subvariable dimension, an example would be to sort "'Coke' or 'Diet Coke'"
-    MR array column. An opposing-element ordering is only available on a matrix,
-    because only a matrix dimension has an opposing dimension.
+class _CatXMrCubeSums(_BaseCubeSums):
+    """Sums cube-measure for a NOT_MR_X_MR slice.
 
-    For the most part, we treat these elements as regular "base" columns, in the cr.cube
-    library, but because the user-facing language treats these as subtotals, we allow
-    specifying sort-by-value as if these were true subtotals.
+    Note that the rows-dimensions need not actually be CAT.
     """
 
     @lazyproperty
-    def _column_idx(self):
-        """int index of column whose values the sort is based on."""
-        column_element_ids = self._columns_dimension.element_ids
-        sort_column_id = self._order_spec.insertion_id
-        # --- Need to translate the element id to the shimmed element id
-        sort_column_id = self._columns_dimension.translate_element_id(sort_column_id)
-        return column_element_ids.index(sort_column_id)
+    def sums(self):
+        """2D np.float64 ndarray of sum for each valid matrix cell."""
+        return self._sums[:, :, 0]
 
 
-class _SortRowsByInsertedColumnHelper(_BaseSortRowsByValueHelper):
-    """Orders rows by the values in an inserted column.
-
-    This would be like "order rows in descending order by value of 'Top 3' subtotal
-    column. An opposing-insertion ordering is only available on a matrix because only
-    a matrix dimension has an opposing dimension.
+class _MrXCatCubeSums(_BaseCubeSums):
+    """Sums cube-measure for an MR_X_NOT_MR slice.
+
+    Note that the columns-dimension need not actually be CAT.
     """
 
     @lazyproperty
-    def _element_values(self):
-        """Sequence of insertion "body" values that form the basis for sort order.
+    def sums(self):
+        """2D np.float64 ndarray of sum for each valid matrix cell."""
+        return self._sums[:, 0, :]
 
-        There is one value per base row and values appear in payload order. These are
-        only the "base" insertion values and do not include intersections.
-        """
-        insertion_base_values = self._measure.blocks[0][1]
-        return insertion_base_values[:, self._insertion_idx]
+
+class _MrXMrCubeSums(_BaseCubeSums):
+    """Sums cube-measure for an MR_X_MR slice."""
 
     @lazyproperty
-    def _insertion_idx(self):
-        """int index of insertion whose values the sort is based on."""
-        return self._columns_dimension.insertion_ids.index(
-            self._order_spec.insertion_id
+    def sums(self):
+        """2D np.float64 ndarray of sum for each valid matrix cell."""
+        # --- indexing is: all-rows, sel-only, all-cols, sel-only ---
+        return self._sums[:, 0, :, 0]
+
+
+# === (WEIGHTED) UNCONDITIONAL COUNTS ===
+
+
+class _BaseUnconditionalCubeCounts(_BaseCubeMeasure):
+    """Base class for unconditional-(weighted)-count cube-measure variants.
+
+    Unconditional counts are the weighted counts including the missing (invalid) rows/
+    columns. This cube measure is used to calculate the column-index. The name does
+    not include "weighted" because we do not (currently) ever need the unweighted
+    version of the unconditional counts, but they could in theory be calculated.
+    """
+
+    def __init__(
+        self,
+        dimensions,
+        counts_with_missings,
+    ):
+        super(_BaseUnconditionalCubeCounts, self).__init__(dimensions)
+        self._counts_with_missings = counts_with_missings
+
+    @classmethod
+    def factory(cls, cube, dimensions, slice_idx):
+        """Return _BaseWeightedCounts subclass instance appropriate to `cube`."""
+        dimension_types = cube.dimension_types[-2:]
+        counts_with_missings = cube.counts_with_missings
+
+        # --- TODO: This probably needs Array type subclasses like the other counts
+        # --- cube measures have, because we shouldn't be adding across subvariables
+        # --- I don't think we ever actually use this, though, and would also need to
+        # --- choose between weighted_counts and valid_weighted_counts
+        UnconditionalCubeCountsCls = (
+            _MrXMrUnconditionalCubeCounts
+            if dimension_types == (DT.MR, DT.MR)
+            else _MrXCatUnconditionalCubeCounts
+            if dimension_types[0] == DT.MR
+            else _CatXMrUnconditionalCubeCounts
+            if dimension_types[1] == DT.MR
+            else _CatXCatUnconditionalCubeCounts
+        )
+        return UnconditionalCubeCountsCls(
+            dimensions,
+            counts_with_missings[cls._slice_idx_expr(cube, slice_idx)],
         )
 
     @lazyproperty
-    def _subtotal_values(self):
-        """Sequence of row-subtotal intersection values that contribute to sort basis.
+    def _valid_row_idxs(self):
+        """ndarray-style index for only valid (non-missing) rows.
 
-        There is one value per row subtotal and values appear in payload (dimension)
-        insertion order.
+        Suitable for indexing a raw measure array to include only valid rows.
         """
-        intersections = self._measure.blocks[1][1]
-        return intersections[:, self._insertion_idx]
+        return np.ix_(self._dimensions[-2].valid_elements.element_idxs)
 
 
-class _SortRowsByLabelHelper(_BaseSortRowsByValueHelper):
-    """Orders elements by the values of their labels (from the dimension)."""
+class _CatXCatUnconditionalCubeCounts(_BaseUnconditionalCubeCounts):
+    """Unconditional-counts cube-measure for a slice with no MR dimensions.
+
+    Unconditional counts are the counts including the missing (invalid) rows/
+    columns. This cube measure is used to calculate the column-index.
+    """
 
     @lazyproperty
-    def _element_values(self):
-        """Sequence of body labels that form the basis for sort order.
+    def baseline(self):
+        """2D np.float64 ndarray of baseline value for each row in matrix.
+
+        The shape of the return value is (nrows, 1). The baseline value for a row is the
+        proportion of all values that appear in that row. A baseline for a 4 x 3 matrix
+        looks like this:
+
+            [[0.2006734 ]
+             [0.72592593]
+             [0.05521886]
+             [0.01818182]]
+
+        Note that the baseline values sum to 1.0. This is because each represents the
+        portion of all responses that fall in that row. This baseline value is the
+        denominator of the `._column_index` computation.
+
+        Baseline is a straightforward function of the *unconditional row margin*.
+        Unconditional here means that both valid and invalid responses (to the
+        columns-var question) are included. This ensures that the baseline is not
+        distorted by a large number of missing responses to the columns-question.
+        """
+        # --- uncond_row_margin is a 1D ndarray of the weighted total observation count
+        # --- involving each valid row. Counts consider both valid and invalid columns,
+        # --- but are only produced for valid rows.
+        uncond_row_margin = np.sum(self._counts_with_missings, axis=1)[
+            self._valid_row_idxs
+        ]
+        return uncond_row_margin[:, None] / np.sum(uncond_row_margin)
 
-        There is one value per row and values appear in payload (dimension) element
-        order. These are only the "base" values and do not include insertions.
-        """
-        return np.array(self._dimensions[0].element_labels)
+
+class _CatXMrUnconditionalCubeCounts(_BaseUnconditionalCubeCounts):
+    """Unconditional-counts cube-measure for a NOT_MR_X_MR slice.
+
+    Unconditional counts are the counts including the missing (invalid) rows/
+    columns. This cube measure is used to calculate the column-index.
+    """
 
     @lazyproperty
-    def _subtotal_values(self):
-        """Sequence of row-subtotal labels that contribute to the sort basis.
+    def baseline(self):
+        """2D np.float64 (or NaN) ndarray of baseline value for each matrix cell.
 
-        There is one value per row subtotal and labels appear in payload (dimension)
-        insertion order.
-        """
-        return np.array(self._dimensions[0].subtotal_labels)
+        Its shape is (nrows, ncols) which corresponds to CAT_X_MR_SUBVAR.
 
+        The baseline value is compared with the column-proportion value for each cell to
+        form the column-index value. The baseline is a function of the unconditional row
+        margin, which is the sum of counts across both valid and missing columns.
+
+        For CAT_X_MR, `uncond_row_margin` sums across the MR_CAT (selected, not,
+        missing) dimension to include missing values (an MR_SUBVAR element is never
+        "missing": true).
+        """
+        # --- counts_with_missings.shape is (nall_rows, ncols, selected/not/missing).
+        # --- axes[1] corresponds to the MR_SUBVAR dimension, in which there are never
+        # --- "missing" subvars (so nall_cols always equals ncols for that dimension
+        # --- type). uncond_row_margin selects only valid rows, retains all columns and
+        # --- reduces the selected/not/missing axis by summing those three counts. Its
+        # --- shape is (nrows, ncols).
+        uncond_row_margin = np.sum(self._counts_with_missings, axis=2)[
+            self._valid_row_idxs
+        ]
+        # --- uncond_table_margin sums across rows, producing 1D array of size ncols,
+        # --- (although all its values are always the same).
+        uncond_table_margin = np.sum(uncond_row_margin, axis=0)
+        # --- division produces a 2D matrix of shape (nrows, ncols) ---
+        return uncond_row_margin / uncond_table_margin
 
-class _SortRowsByMarginalHelper(_BaseSortRowsByValueHelper):
-    """Orders elements by the values of an opposing marginal vector.
 
-    This would be like "order rows in descending order by value of rows scale mean.
-    column. An opposing-marginal ordering is only available on a matrix, because only
-    a matrix dimension has an opposing dimension.
+class _MrXCatUnconditionalCubeCounts(_BaseUnconditionalCubeCounts):
+    """Unconditional-counts cube-measure for an MR_X_NOT_MR slice.
+
+    Unconditional counts are the counts including the missing (invalid) rows/
+    columns. This cube measure is used to calculate the column-index.
     """
 
     @lazyproperty
-    def _element_values(self):
-        """Sequence of body values that form the basis for sort order.
+    def baseline(self):
+        """2D np.float64 ndarray of baseline value for each row in matrix.
 
-        There is one value per row and values appear in payload (dimension) element
-        order. These are only the "base" values and do not include insertions.
-        """
-        return self._marginal.blocks[0]
+        `._baseline` is the denominator of the column-index and represents the
+        proportion of the overall row-count present in each row. A cell with
+        a column-proportion exactly equal to this basline will have a column-index of
+        100.
+
+        The shape of the return value is (nrows, 1). A baseline for a 4 x 3 matrix looks
+        something like this:
+
+            [[0.17935204]
+             [0.33454989]
+             [0.50762388]
+             [0.80331259]
+             [0.7996507 ]]
+
+        Baseline is a function of the *unconditional row margin*. Unconditional here
+        means that both valid and invalid responses (to the columns-var question) are
+        included. This ensures that the baseline is not distorted by a large number of
+        missing responses to the columns-question.
+        """
+        # --- unconditional row-margin is a 1D ndarray of size nrows computed by:
+        # --- 1. summing across all columns: np.sum(self._counts_with_missings, axis=2)
+        # --- 2. taking only selected counts: [:, 0]
+        # --- 3. taking only valid rows: [self._valid_row_idxs]
+        uncond_row_margin = np.sum(self._counts_with_missings, axis=2)[:, 0][
+            self._valid_row_idxs
+        ]
+        # --- The "total" (uncond_row_table_margin) is a 1D ndarray of size nrows. Each
+        # --- sum includes only valid rows (MR_SUBVAR, axis 0), selected and unselected
+        # --- but not missing counts ([0:2]) of the MR_CAT axis (axis 1), and all column
+        # --- counts, both valid and missing (axis 2). The rows axis (0) is preserved
+        # --- because each MR subvar has a distinct table margin.
+        uncond_row_table_margin = np.sum(
+            self._counts_with_missings[self._valid_row_idxs][:, 0:2], axis=(1, 2)
+        )
+        # --- inflate shape to (nrows, 1) for later calculation convenience ---
+        return (uncond_row_margin / uncond_row_table_margin)[:, None]
 
-    @lazyproperty
-    def _marginal(self):
-        """Marginal object providing values for sort."""
-        marginal = self._order_spec.marginal
-        marginal_propname = {
-            MARGINAL.BASE: "rows_unweighted_base",
-            MARGINAL.MARGIN: "rows_weighted_base",
-            MARGINAL.MARGIN_PROPORTION: "rows_table_proportion",
-            MARGINAL.SCALE_MEAN: "rows_scale_mean",
-            MARGINAL.SCALE_MEAN_STDDEV: "rows_scale_mean_stddev",
-            MARGINAL.SCALE_MEAN_STDERR: "rows_scale_mean_stderr",
-            MARGINAL.SCALE_MEDIAN: "rows_scale_median",
-        }.get(marginal)
 
-        if marginal_propname is None:
-            raise NotImplementedError(
-                f"sort-by-value for marginal '{marginal}' is not yet supported"
-            )
+class _MrXMrUnconditionalCubeCounts(_BaseUnconditionalCubeCounts):
+    """Weighted-counts cube-measure for an MR_X_MR slice.
 
-        return getattr(self._second_order_measures, marginal_propname)
+    Unconditional counts are the counts including the missing (invalid) rows/
+    columns. This cube measure is used to calculate the column-index.
+    """
 
     @lazyproperty
-    def _subtotal_values(self):
-        """Sequence of row-subtotal values that contribute to the sort basis.
+    def baseline(self):
+        """2D np.float64 ndarray of baseline value for each matrix cell.
 
-        There is one value per row subtotal and values appear in payload (dimension)
-        insertion order.
-        """
-        return self._marginal.blocks[1]
+        The shape is (nrows, ncols) and all values in a given row are the same. So
+        really there are only nrows distinct baseline values, but the returned shape
+        makes calculating column-index in a general way more convenient.
+        """
+        # --- `counts_with_missings` for MR_X_MR is 4D of size (nrows, 3, ncols, 3)
+        # --- (MR_SUBVAR, MR_CAT, MR_SUBVAR, MR_CAT). Unconditional row margin:
+        # --- * Takes all rows and all cols (axes 0 & 2), because MR_SUBVAR dimension
+        # ---   can contain only valid elements (no such thing as "missing": true
+        # ---   subvar).
+        # --- * Sums selected + unselected + missing categories in second MR_CAT
+        # ---   dimension (columns MR, axes[3]). Including missings here fulfills
+        # ---   "unconditional" characteristic of margin.
+        # --- * Takes only those totals associated with selected categories of first
+        # ---    MR_CAT dimension (rows MR). ("counts" for MR are "selected" counts).
+        # --- Produces a 2D (nrows, ncols) array.
+        uncond_row_margin = np.sum(self._counts_with_missings[:, 0:2], axis=3)[:, 0]
+        # --- Unconditional table margin is also 2D (nrows, ncols) but the values for
+        # --- all columns in a row have the same value; basically each row has
+        # --- a distinct table margin.
+        uncond_table_margin = np.sum(self._counts_with_missings[:, 0:2], axis=(1, 3))
+        # --- baseline is produced by dividing uncond_row_margin by uncond_table_margin.
+        return uncond_row_margin / uncond_table_margin
```

### Comparing `cr.cube-3.0.8/src/cr/cube/matrix/measure.py` & `cr.cube-3.0.9/src/cr/cube/matrix/measure.py`

 * *Files 0% similar despite different names*

```diff
@@ -2306,19 +2306,18 @@
         orientation, and include the base values and the subtotals for the orientation.
         """
         if self.orientation == MO.ROWS:
             # --- Use *column* comparable counts (going across rows) ---
             counts = self._second_order_measures.column_comparable_counts.blocks
             # --- Get base values & *row* subtotals
             return [counts[0][0], counts[1][0]]
-        else:
-            # --- Use *row* comparable counts (going across columns) ---
-            counts = self._second_order_measures.row_comparable_counts.blocks
-            # --- Get base values & *column* subtotals
-            return [counts[0][0], counts[0][1]]
+        # --- Use *row* comparable counts (going across columns) ---
+        counts = self._second_order_measures.row_comparable_counts.blocks
+        # --- Get base values & *column* subtotals
+        return [counts[0][0], counts[0][1]]
 
     @lazyproperty
     def _counts_are_defined(self):
         """Bool indicating whether counts are defined for this orientation
 
         Counts are undefined across subvariable dimensions.
         """
@@ -2388,33 +2387,28 @@
         `NaN` for subtotal differences for bases, but we actually want the values for
         counts. Since this is the only place we use this, and there are already a lot of
         overlapping names, we just calculate the numerators privately in this class.
         """
         counts = self._second_order_measures.weighted_counts.blocks
 
         if self.orientation == MO.ROWS:
-            # --- Try getting the column comparable counts, to check for the error
-            self._second_order_measures.column_comparable_counts.blocks
-            # --- Now get only the base values and relevant subtotals
+            # --- Now get only the base values and relevant row subtotals
             counts = [counts[0][0], counts[1][0]]
         else:
-            # --- Try getting the row comparable counts, to check for the error
-            self._second_order_measures.row_comparable_counts
-            # --- Now get only the base values and relevant subtotals
+            # --- Now get only the base values and relevant column subtotals
             counts = [counts[0][0], counts[0][1]]
 
         return [self._apply_along_orientation(np.sum, count) for count in counts]
 
     @lazyproperty
     def _proportion_denominators(self):
         """list of ndarray 1D table margins to be used as denominator"""
         if self.orientation == MO.ROWS:
             return self._second_order_measures.rows_table_weighted_base.blocks
-        else:
-            return self._second_order_measures.columns_table_weighted_base.blocks
+        return self._second_order_measures.columns_table_weighted_base.blocks
 
 
 class _MarginTableBase(_BaseMarginal):
     """The 'margin-table-bases', or the denominator for margin-table-proportion
 
     A consistently 1D form of what used to be called the table_margin/table_base. The
     name is a mouthful, but each component is important.
@@ -2506,17 +2500,16 @@
         # --- the margin-unweighted-base is not defined), we know that the 2D row/column
         # --- unweighted base is a repetition in the orientation we need. Therefore,
         # --- we can get a row/column of the 2D dimension and use it so that we don't
         # --- have to recalculate the subtotals.
         if self.orientation == MO.ROWS:
             bases = self._second_order_measures.row_unweighted_bases.blocks
             return [bases[0][0][:, 0], bases[1][0][:, 0]]
-        else:
-            bases = self._second_order_measures.column_unweighted_bases.blocks
-            return [bases[0][0][0, :], bases[0][1][0, :]]
+        bases = self._second_order_measures.column_unweighted_bases.blocks
+        return [bases[0][0][0, :], bases[0][1][0, :]]
 
     @lazyproperty
     def is_defined(self):
         """True if counts are defined."""
         return self._counts_are_defined
 
 
@@ -2544,17 +2537,16 @@
         # --- the margin-weighted-base is not defined), we know that the 2D row/column
         # --- weighted base is a repetition in the orientation we need. Therefore,
         # --- we can get a row/column of the 2D dimension and use it so that we don't
         # --- have to recalculate the subtotals.
         if self.orientation == MO.ROWS:
             bases = self._second_order_measures.row_weighted_bases.blocks
             return [bases[0][0][:, 0], bases[1][0][:, 0]]
-        else:
-            bases = self._second_order_measures.column_weighted_bases.blocks
-            return [bases[0][0][0, :], bases[0][1][0, :]]
+        bases = self._second_order_measures.column_weighted_bases.blocks
+        return [bases[0][0][0, :], bases[0][1][0, :]]
 
     @lazyproperty
     def is_defined(self):
         """Bool indicating whether the margin is defined in this orientation
 
         True if the cube measure has the base values we need (eg the corresponding
         dimension is not array).
@@ -2611,19 +2603,18 @@
     def _proportions(self):
         """List of 2 ndarray matrixes of the relevant proportion blocks"""
         if self.orientation == MO.ROWS:
             # --- Use *row* proportions ---
             props = self._second_order_measures.row_proportions.blocks
             # --- Get base values & *row* subtotals
             return [props[0][0], props[1][0]]
-        else:
-            # --- Use *column* proportions ---
-            props = self._second_order_measures.column_proportions.blocks
-            # --- Get base values & *column* subtotals
-            return [props[0][0], props[0][1]]
+        # --- Use *column* proportions ---
+        props = self._second_order_measures.column_proportions.blocks
+        # --- Get base values & *column* subtotals
+        return [props[0][0], props[0][1]]
 
     @staticmethod
     def _weighted_mean(proportions, values):
         """Calculate the weighted mean from proportions and numeric values
 
         Both proportions and values are 1D ndarrays
         """
@@ -2737,16 +2728,15 @@
         # --- Find the point at which the count that contains 50% of total counts
         cumulative_prop = cumulative_counts / cumulative_counts[-1]
         median_idx = np.argmax(cumulative_prop >= 0.5)
         # --- If it's exactly 50%, take the mean of the two nearest values
         # --- TODO: Does this behave okay for large numbers (or is precision a problem)?
         if cumulative_prop[median_idx] == 0.5:
             return np.mean(sorted_values[[median_idx, median_idx + 1]])
-        else:
-            return sorted_values[median_idx]
+        return sorted_values[median_idx]
 
 
 class _ScaleMeanStddev(_BaseScaledCountMarginal):
     """Provides the std. dev of the marginal scale means."""
 
     @lazyproperty
     def blocks(self):
```

### Comparing `cr.cube-3.0.8/src/cr/cube/matrix/subtotals.py` & `cr.cube-3.0.9/src/cr/cube/matrix/subtotals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/measures/pairwise_significance.py` & `cr.cube-3.0.9/src/cr/cube/measures/pairwise_significance.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/min_base_size_mask.py` & `cr.cube-3.0.9/src/cr/cube/min_base_size_mask.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/scalar.py` & `cr.cube-3.0.9/src/cr/cube/scalar.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/smoothing.py` & `cr.cube-3.0.9/src/cr/cube/smoothing.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/stripe/assembler.py` & `cr.cube-3.0.9/src/cr/cube/stripe/assembler.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/stripe/cubemeasure.py` & `cr.cube-3.0.9/src/cr/cube/stripe/cubemeasure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/stripe/insertion.py` & `cr.cube-3.0.9/src/cr/cube/stripe/insertion.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/stripe/measure.py` & `cr.cube-3.0.9/src/cr/cube/stripe/measure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr/cube/util.py` & `cr.cube-3.0.9/src/cr/cube/util.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/src/cr.cube.egg-info/PKG-INFO` & `cr.cube-3.0.9/src/cr.cube.egg-info/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cr.cube
-Version: 3.0.8
+Version: 3.0.9
 Summary: Crunch.io Cube library
 Home-page: https://github.com/Crunch-io/crunch-cube/
 Author: Crunch.io
 Author-email: dev@crunch.io
 License: MIT License
 Description: # crunch-cube
         
@@ -110,18 +110,22 @@
         The detailed description can be found
         [here](http://crunch-cube.readthedocs.io/en/latest/cr.cube.html#cr-cube-crunch-cube-module).
         
         ---
         [![Build Status](https://travis-ci.org/Crunch-io/crunch-cube.png?branch=master)](https://travis-ci.org/Crunch-io/crunch-cube)
         [![Coverage Status](https://codecov.io/gh/Crunch-io/crunch-cube/branch/master/graph/badge.svg?token=C6auKOj8tZ)](https://codecov.io/gh/Crunch-io/crunch-cube)
         [![Documentation Status](https://readthedocs.org/projects/crunch-cube/badge/?version=latest)](http://crunch-cube.readthedocs.io/en/latest/?badge=latest)
+        [![CodeFactor](https://www.codefactor.io/repository/github/crunch-io/crunch-cube/badge)](https://www.codefactor.io/repository/github/crunch-io/crunch-cube)
         ---
         
         ## Changes
         
+        ### 3.0.9
+        - Fix reverse authority in `id_translation` for MR dimensions
+        
         ### 3.0.8
         - Fix reverse order in insertions fills
         
         ### 3.0.7
         - Add fills for insertions (subtotals and differences)
         
         ### 3.0.6
```

### Comparing `cr.cube-3.0.8/src/cr.cube.egg-info/SOURCES.txt` & `cr.cube-3.0.9/src/cr.cube.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -6,14 +6,15 @@
 MANIFEST.in
 Makefile
 README.md
 requirements-rtd.txt
 setup.cfg
 setup.py
 tox.ini
+docs/.DS_Store
 docs/Makefile
 docs/source/Makefile
 docs/source/conf.py
 docs/source/crunch_logo.png
 docs/source/cube.rst
 docs/source/cubepart.rst
 docs/source/dimension.rst
@@ -23,41 +24,37 @@
 src/cr.cube.egg-info/PKG-INFO
 src/cr.cube.egg-info/SOURCES.txt
 src/cr.cube.egg-info/dependency_links.txt
 src/cr.cube.egg-info/namespace_packages.txt
 src/cr.cube.egg-info/requires.txt
 src/cr.cube.egg-info/top_level.txt
 src/cr.cube.egg-info/zip-safe
-src/cr/cube/.collator.py.swp
-src/cr/cube/.dimension.py.swp
-src/cr/cube/.matrix.py.swo
 src/cr/cube/__init__.py
 src/cr/cube/collator.py
 src/cr/cube/cube.py
 src/cr/cube/cubepart.py
 src/cr/cube/dimension.py
 src/cr/cube/enums.py
 src/cr/cube/min_base_size_mask.py
 src/cr/cube/scalar.py
 src/cr/cube/smoothing.py
 src/cr/cube/util.py
-src/cr/cube/matrix/.assembler.py.swp
 src/cr/cube/matrix/__init__.py
 src/cr/cube/matrix/assembler.py
 src/cr/cube/matrix/cubemeasure.py
 src/cr/cube/matrix/measure.py
 src/cr/cube/matrix/subtotals.py
 src/cr/cube/measures/__init__.py
 src/cr/cube/measures/pairwise_significance.py
-src/cr/cube/stripe/.assembler.py.swp
 src/cr/cube/stripe/__init__.py
 src/cr/cube/stripe/assembler.py
 src/cr/cube/stripe/cubemeasure.py
 src/cr/cube/stripe/insertion.py
 src/cr/cube/stripe/measure.py
+tests/.DS_Store
 tests/__init__.py
 tests/unitutil.py
 tests/util.py
 tests/expectations/admit-x-dept-unweighted-col-prop-moe.py
 tests/expectations/ca-subvar-ca-cat-x-cat-date-scale-means-w2.py
 tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-idx-w3.py
 tests/expectations/ca-subvar-x-ca-cat-cat-date-smoothed-col-pct-w3.py
@@ -169,15 +166,14 @@
 tests/expectations/num-arr-means-grouped-by-cat-p-vals-col-4.py
 tests/expectations/num-arr-means-grouped-by-cat-t-stats-col-4.py
 tests/expectations/num-array-means-grouped-by-cat-date-smoothed.py
 tests/expectations/numeric-x-cat-date-smoothed-col-idx-w3.py
 tests/expectations/numeric-x-cat-date-smoothed-col-pct-w3.py
 tests/expectations/txt-x-cat-date-smoothed-col-idx-w3.py
 tests/expectations/txt-x-cat-date-smoothed-col-pct-w3.py
-tests/fixtures/.econ-blame-x-ideology-row-and-col-hs.json.swp
 tests/fixtures/__init__.py
 tests/fixtures/admit-x-dept-unweighted.json
 tests/fixtures/admit-x-gender-weighted.json
 tests/fixtures/age-x-accrpipe.json
 tests/fixtures/ca-as-0th.json
 tests/fixtures/ca-cat-x-ca-subvar.json
 tests/fixtures/ca-cat-x-mr-x-ca-subvar-hs.json
@@ -422,20 +418,17 @@
 tests/fixtures/scale_means/cat-x-cat.json
 tests/fixtures/scale_means/cat-x-mr.json
 tests/fixtures/scale_means/mr-x-cat.json
 tests/fixtures/scale_means/univariate-ca-subvar.json
 tests/fixtures/scale_means/univariate-cat-with-all-null-numeric-value.json
 tests/fixtures/scale_means/univariate-cat-with-null-numeric-value.json
 tests/fixtures/scale_means/univariate-cat.json
-tests/fixtures/scorecards/.sandwiches-by-mike.json.swp
 tests/fixtures/transforms/generic-transforms-dicts.json
 tests/fixtures/transforms/test-dashboard-transform-no-ordering.json
 tests/fixtures/transforms/test-dashboard-transform-single-el-visible.json
-tests/integration/.test_existing_as_frozen_slice.py.swp
-tests/integration/.test_headers_and_subtotals.py.swp
 tests/integration/__init__.py
 tests/integration/test_collator.py
 tests/integration/test_cube.py
 tests/integration/test_cubepart.py
 tests/integration/test_dimension.py
 tests/integration/test_headers_and_subtotals.py
 tests/integration/test_index_table.py
@@ -443,15 +436,14 @@
 tests/integration/test_multiple_response.py
 tests/integration/test_numeric_array.py
 tests/integration/test_pairwise_significance.py
 tests/integration/test_scale_additional_measures.py
 tests/integration/test_scale_means.py
 tests/integration/test_smoothing.py
 tests/integration/test_stripe.py
-tests/unit/.test_dimension.py.swp
 tests/unit/__init__.py
 tests/unit/test_collator.py
 tests/unit/test_cube.py
 tests/unit/test_cubepart.py
 tests/unit/test_dimension.py
 tests/unit/test_enum.py
 tests/unit/test_scalar.py
```

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-subdiff-x-cat-pw-pvals.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-subdiff-x-cat-pw-pvals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-subdiff-x-cat-pw-tstats.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-subdiff-x-cat-pw-tstats.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-cat-date-smoothed-col-idx-w3.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-cat-date-smoothed-col-idx-w3.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-cat-date-smoothed-col-pct-w3.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-cat-date-smoothed-col-pct-w3.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-pvals.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-pvals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-row-margin-proportions.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-row-margin-proportions.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-row-proportions.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-row-proportions.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-hs-x-mr-zscores.py` & `cr.cube-3.0.9/tests/expectations/cat-hs-x-mr-zscores.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-idxs-alt.py` & `cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-idxs-alt.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-pvals.py` & `cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-pvals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-x-cat-hs-pw-tstats.py` & `cr.cube-3.0.9/tests/expectations/cat-x-cat-hs-pw-tstats.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-x-cat-pruning-hs-col-prop-moe.py` & `cr.cube-3.0.9/tests/expectations/cat-x-cat-pruning-hs-col-prop-moe.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat-x-cat-pruning-hs-table-prop-moe.py` & `cr.cube-3.0.9/tests/expectations/cat-x-cat-pruning-hs-table-prop-moe.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat_x_cat_hirotsu_chi_squared.txt` & `cr.cube-3.0.9/tests/expectations/cat_x_cat_hirotsu_chi_squared.txt`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat_x_cat_hirotsu_pvals.txt` & `cr.cube-3.0.9/tests/expectations/cat_x_cat_hirotsu_pvals.txt`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/cat_x_cat_with_hs_hirotsu_pvals.txt` & `cr.cube-3.0.9/tests/expectations/cat_x_cat_with_hs_hirotsu_pvals.txt`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/col-per-moe-cat-x-cat-hs-2rows-1col.py` & `cr.cube-3.0.9/tests/expectations/col-per-moe-cat-x-cat-hs-2rows-1col.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/col-std-dev-cat-x-cat-hs-2rows-1col.py` & `cr.cube-3.0.9/tests/expectations/col-std-dev-cat-x-cat-hs-2rows-1col.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/col-std-err-cat-x-cat-hs-2rows-1col.py` & `cr.cube-3.0.9/tests/expectations/col-std-err-cat-x-cat-hs-2rows-1col.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-moe.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-moe.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-stddev.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-stddev.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-col-stderr.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-col-stderr.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-column-proportions.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-column-proportions.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-columns-margin-proportions.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-columns-margin-proportions.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-pvals.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-pvals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr-x-cat-hs-zscores.py` & `cr.cube-3.0.9/tests/expectations/mr-x-cat-hs-zscores.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr_x_cat_chi_squared_rows.txt` & `cr.cube-3.0.9/tests/expectations/mr_x_cat_chi_squared_rows.txt`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/mr_x_cat_pairwise_pvals.txt` & `cr.cube-3.0.9/tests/expectations/mr_x_cat_pairwise_pvals.txt`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-hs-p-vals-col-7.py` & `cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-hs-p-vals-col-7.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/num-arr-means-grouped-by-cat-hs-t-stats-col-7.py` & `cr.cube-3.0.9/tests/expectations/num-arr-means-grouped-by-cat-hs-t-stats-col-7.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/numeric-x-cat-date-smoothed-col-idx-w3.py` & `cr.cube-3.0.9/tests/expectations/numeric-x-cat-date-smoothed-col-idx-w3.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/expectations/numeric-x-cat-date-smoothed-col-pct-w3.py` & `cr.cube-3.0.9/tests/expectations/numeric-x-cat-date-smoothed-col-pct-w3.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/.econ-blame-x-ideology-row-and-col-hs.json.swp` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-index-table.json`

 * *Files 27% similar despite different names*

```diff
@@ -1,1024 +1,1188 @@
-00000000: 6230 5649 4d20 382e 3200 0000 0010 0000  b0VIM 8.2.......
-00000010: d4d8 d95f 9b69 2b07 7262 0000 736c 6f62  ..._.i+.rb..slob
-00000020: 6f64 616e 696c 6963 0000 0000 0000 0000  odanilic........
-00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 536c 6f62 6f64 616e 732d 4d61  ....Slobodans-Ma
-00000050: 6342 6f6f 6b2d 5072 6f2d 322e 6c6f 6361  cBook-Pro-2.loca
-00000060: 6c00 0000 0000 0000 0000 0000 7e73 6c6f  l...........~slo
-00000070: 626f 6461 6e69 6c69 632f 446f 6375 6d65  bodanilic/Docume
-00000080: 6e74 732f 4372 756e 6368 2f72 6570 6f73  nts/Crunch/repos
-00000090: 2f63 7275 6e63 682d 6375 6265 2f74 6573  /crunch-cube/tes
-000000a0: 7473 2f66 6978 7475 7265 732f 6563 6f6e  ts/fixtures/econ
-000000b0: 2d62 6c61 6d65 2d78 2d69 6465 6f6c 6f67  -blame-x-ideolog
-000000c0: 792d 726f 772d 616e 642d 636f 6c2d 6873  y-row-and-col-hs
-000000d0: 2e6a 736f 6e00 0000 0000 0000 0000 0000  .json...........
-000000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003e0: 0000 0000 0000 0000 0000 0000 0000 0d00  ................
-000003f0: 3332 3130 0000 0000 2322 2120 1312 5500  3210....#"! ..U.
-00000400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001000: 7470 0300 7f00 0000 0200 0000 0000 0000  tp..............
-00001010: ac00 0000 0000 0000 0100 0000 0000 0000  ................
-00001020: 0100 0000 0000 0000 ffff ffff ffff ffff  ................
-00001030: 9e00 0000 0000 0000 ad00 0000 0000 0000  ................
-00001040: 0100 0000 0000 0000 0300 0000 0000 0000  ................
-00001050: 2d00 0000 0000 0000 4b01 0000 0000 0000  -.......K.......
-00001060: 0100 0000 0000 0000 0000 0000 0000 0000  ................
-00001070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000010f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000011f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00002000: 6164 0000 0000 0000 cc02 0000 0010 0000  ad..............
-00002010: ac00 0000 0000 0000 fe0f 0000 f10f 0000  ................
-00002020: dd0f 0000 d50f 0000 630f 0000 5a0f 0000  ........c...Z...
-00002030: 520f 0000 e00e 0000 d80e 0000 d10e 0000  R...............
-00002040: bf0e 0000 ae0e 0000 9a0e 0000 790e 0000  ............y...
-00002050: 710e 0000 6a0e 0000 570e 0000 520e 0000  q...j...W...R...
-00002060: 390e 0000 280e 0000 230e 0000 150e 0000  9...(...#.......
-00002070: 050e 0000 fc0d 0000 f20d 0000 e80d 0000  ................
-00002080: dd0d 0000 d30d 0000 ca0d 0000 c10d 0000  ................
-00002090: b80d 0000 af0d 0000 a50d 0000 9a0d 0000  ................
-000020a0: 8f0d 0000 850d 0000 7b0d 0000 720d 0000  ........{...r...
-000020b0: 690d 0000 600d 0000 570d 0000 4e0d 0000  i...`...W...N...
-000020c0: 440d 0000 390d 0000 2f0d 0000 250d 0000  D...9.../...%...
-000020d0: 1c0d 0000 130d 0000 0a0d 0000 010d 0000  ................
-000020e0: f80c 0000 ef0c 0000 e60c 0000 dd0c 0000  ................
-000020f0: d40c 0000 cb0c 0000 c20c 0000 b90c 0000  ................
-00002100: b00c 0000 a70c 0000 9e0c 0000 940c 0000  ................
-00002110: 8b0c 0000 820c 0000 780c 0000 6f0c 0000  ........x...o...
-00002120: 660c 0000 5d0c 0000 540c 0000 4b0c 0000  f...]...T...K...
-00002130: 420c 0000 390c 0000 300c 0000 270c 0000  B...9...0...'...
-00002140: 1e0c 0000 150c 0000 0c0c 0000 030c 0000  ................
-00002150: fa0b 0000 f10b 0000 e80b 0000 df0b 0000  ................
-00002160: d60b 0000 cd0b 0000 c40b 0000 bb0b 0000  ................
-00002170: b20b 0000 a90b 0000 a00b 0000 970b 0000  ................
-00002180: 8e0b 0000 850b 0000 7c0b 0000 730b 0000  ........|...s...
-00002190: 6b0b 0000 640b 0000 500b 0000 480b 0000  k...d...P...H...
-000021a0: 2e0b 0000 160b 0000 f20a 0000 fb09 0000  ................
-000021b0: d809 0000 c409 0000 a209 0000 7c09 0000  ............|...
-000021c0: 5a09 0000 3009 0000 1509 0000 f708 0000  Z...0...........
-000021d0: e508 0000 c608 0000 aa08 0000 9308 0000  ................
-000021e0: 7d08 0000 6808 0000 3e08 0000 f907 0000  }...h...>.......
-000021f0: e707 0000 d707 0000 c807 0000 ac07 0000  ................
-00002200: 8e07 0000 7c07 0000 5d07 0000 4107 0000  ....|...]...A...
-00002210: 2a07 0000 1407 0000 ff06 0000 d506 0000  *...............
-00002220: a806 0000 9606 0000 8606 0000 7806 0000  ............x...
-00002230: 6c06 0000 6106 0000 4f06 0000 3506 0000  l...a...O...5...
-00002240: 2706 0000 1006 0000 f005 0000 c705 0000  '...............
-00002250: a605 0000 9705 0000 8905 0000 7205 0000  ............r...
-00002260: 5205 0000 2105 0000 0005 0000 f104 0000  R...!...........
-00002270: e304 0000 cc04 0000 ac04 0000 8e04 0000  ................
-00002280: 6d04 0000 5e04 0000 5004 0000 3904 0000  m...^...P...9...
-00002290: 1904 0000 f803 0000 d703 0000 c803 0000  ................
-000022a0: ba03 0000 a303 0000 8303 0000 6103 0000  ............a...
-000022b0: 4003 0000 3103 0000 2303 0000 0c03 0000  @...1...#.......
-000022c0: ed02 0000 cc02 0000 0000 0000 2020 2020  ............    
-000022d0: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
-000022e0: 3a20 2253 6b69 7070 6564 222c 0020 2020  : "Skipped",.   
-000022f0: 2020 2020 2020 2020 2020 2022 6d69 7373             "miss
-00002300: 696e 6722 3a20 7472 7565 2c00 2020 2020  ing": true,.    
-00002310: 2020 2020 2020 2020 2020 2269 6422 3a20            "id": 
-00002320: 382c 0020 2020 2020 2020 2020 2020 207b  8,.            {
-00002330: 0020 2020 2020 2020 2020 2020 207d 2c00  .            },.
-00002340: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-00002350: 756d 6572 6963 5f76 616c 7565 223a 2035  umeric_value": 5
-00002360: 0020 2020 2020 2020 2020 2020 2020 2022  .              "
-00002370: 6e61 6d65 223a 2022 4e6f 7420 7375 7265  name": "Not sure
-00002380: 222c 0020 2020 2020 2020 2020 2020 2020  ",.             
-00002390: 2022 6d69 7373 696e 6722 3a20 6661 6c73   "missing": fals
-000023a0: 652c 0020 2020 2020 2020 2020 2020 2020  e,.             
-000023b0: 2022 6964 223a 2035 2c00 2020 2020 2020   "id": 5,.      
-000023c0: 2020 2020 2020 7b00 2020 2020 2020 2020        {.        
-000023d0: 2020 2020 7d2c 0020 2020 2020 2020 2020      },.         
-000023e0: 2020 2020 2022 6e75 6d65 7269 635f 7661       "numeric_va
-000023f0: 6c75 6522 3a20 3400 2020 2020 2020 2020  lue": 4.        
-00002400: 2020 2020 2020 226e 616d 6522 3a20 224e        "name": "N
-00002410: 6569 7468 6572 222c 0020 2020 2020 2020  either",.       
-00002420: 2020 2020 2020 2022 6d69 7373 696e 6722         "missing"
-00002430: 3a20 6661 6c73 652c 0020 2020 2020 2020  : false,.       
-00002440: 2020 2020 2020 2022 6964 223a 2034 2c00         "id": 4,.
-00002450: 2020 2020 2020 2020 2020 2020 7b00 2020              {.  
-00002460: 2020 2020 2020 2020 2020 7d2c 0020 2020            },.   
-00002470: 2020 2020 2020 2020 2020 2022 6e75 6d65             "nume
-00002480: 7269 635f 7661 6c75 6522 3a20 3300 2020  ric_value": 3.  
-00002490: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
-000024a0: 6522 3a20 2242 6f74 6822 2c00 2020 2020  e": "Both",.    
-000024b0: 2020 2020 2020 2020 2020 226d 6973 7369            "missi
-000024c0: 6e67 223a 2066 616c 7365 2c00 2020 2020  ng": false,.    
-000024d0: 2020 2020 2020 2020 2020 2269 6422 3a20            "id": 
-000024e0: 332c 0020 2020 2020 2020 2020 2020 207b  3,.            {
-000024f0: 0020 2020 2020 2020 2020 2020 207d 2c00  .            },.
-00002500: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-00002510: 756d 6572 6963 5f76 616c 7565 223a 2032  umeric_value": 2
-00002520: 0020 2020 2020 2020 2020 2020 2020 2022  .              "
-00002530: 6e61 6d65 223a 2022 5265 7075 626c 6963  name": "Republic
-00002540: 616e 7320 696e 2043 6f6e 6772 6573 7322  ans in Congress"
-00002550: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-00002560: 226d 6973 7369 6e67 223a 2066 616c 7365  "missing": false
-00002570: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-00002580: 2269 6422 3a20 322c 0020 2020 2020 2020  "id": 2,.       
-00002590: 2020 2020 207b 0020 2020 2020 2020 2020       {.         
-000025a0: 2020 207d 2c00 2020 2020 2020 2020 2020     },.          
-000025b0: 2020 2020 226e 756d 6572 6963 5f76 616c      "numeric_val
-000025c0: 7565 223a 2031 0020 2020 2020 2020 2020  ue": 1.         
-000025d0: 2020 2020 2022 6e61 6d65 223a 2022 5072       "name": "Pr
-000025e0: 6573 6964 656e 7420 4f62 616d 6122 2c00  esident Obama",.
-000025f0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00002600: 6973 7369 6e67 223a 2066 616c 7365 2c00  issing": false,.
-00002610: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-00002620: 6422 3a20 312c 0020 2020 2020 2020 2020  d": 1,.         
-00002630: 2020 207b 0020 2020 2020 2020 2020 2022     {.          "
-00002640: 6361 7465 676f 7269 6573 223a 205b 0020  categories": [. 
-00002650: 2020 2020 2020 2022 7479 7065 223a 207b         "type": {
-00002660: 0020 2020 2020 2020 207d 2c00 2020 2020  .        },.    
-00002670: 2020 2020 2020 7d00 2020 2020 2020 2020        }.        
-00002680: 2020 2020 7d00 2020 2020 2020 2020 2020      }.          
-00002690: 2020 2020 5d00 2020 2020 2020 2020 2020      ].          
-000026a0: 2020 2020 2020 7d00 2020 2020 2020 2020        }.        
-000026b0: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
-000026c0: 3a20 2274 6573 7420 6e65 7720 6865 6164  : "test new head
-000026d0: 696e 6722 0020 2020 2020 2020 2020 2020  ing".           
-000026e0: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-000026f0: 223a 2022 7375 6274 6f74 616c 222c 0020  ": "subtotal",. 
-00002700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002710: 205d 2c00 2020 2020 2020 2020 2020 2020   ],.            
-00002720: 2020 2020 2020 2020 3200 2020 2020 2020          2.      
-00002730: 2020 2020 2020 2020 2020 2020 2020 312c                1,
-00002740: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00002750: 2020 2022 6172 6773 223a 205b 0020 2020     "args": [.   
-00002760: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00002770: 616e 6368 6f72 223a 2031 2c00 2020 2020  anchor": 1,.    
-00002780: 2020 2020 2020 2020 2020 2020 7b00 2020              {.  
-00002790: 2020 2020 2020 2020 2020 2020 2269 6e73              "ins
-000027a0: 6572 7469 6f6e 7322 3a20 5b00 2020 2020  ertions": [.    
-000027b0: 2020 2020 2020 2020 2274 7261 6e73 666f          "transfo
-000027c0: 726d 7322 3a20 7b00 2020 2020 2020 2020  rms": {.        
-000027d0: 2020 2020 7d2c 0020 2020 2020 2020 2020      },.         
-000027e0: 2020 2020 205d 0020 2020 2020 2020 2020       ].         
-000027f0: 2020 2020 2020 207d 0020 2020 2020 2020         }.       
-00002800: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
-00002810: 223a 2022 5465 7374 204e 6577 2048 6561  ": "Test New Hea
-00002820: 6469 6e67 2028 4f62 616d 6120 616e 6420  ding (Obama and 
-00002830: 5265 7075 626c 6963 616e 7329 2200 2020  Republicans)".  
+00000000: 7b0a 2020 2020 2265 6c65 6d65 6e74 223a  {.    "element":
+00000010: 2022 7368 6f6a 693a 7669 6577 222c 0a20   "shoji:view",. 
+00000020: 2020 2022 7365 6c66 223a 2022 2f61 7069     "self": "/api
+00000030: 2f64 6174 6173 6574 732f 6439 3938 3532  /datasets/d99852
+00000040: 3363 3132 3664 3439 3765 3932 6434 6665  3c126d497e92d4fe
+00000050: 3666 3637 3962 3566 3634 2f63 7562 652f  6f679b5f64/cube/
+00000060: 3f66 696c 7465 723d 2535 4225 3544 2671  ?filter=%5B%5D&q
+00000070: 7565 7279 3d25 3742 2532 3264 696d 656e  uery=%7B%22dimen
+00000080: 7369 6f6e 7325 3232 3a25 3542 2537 4225  sions%22:%5B%7B%
+00000090: 3232 6561 6368 2532 323a 2532 3268 7474  22each%22:%22htt
+000000a0: 7073 3a25 3246 2532 4661 6c70 6861 2e63  ps:%2F%2Falpha.c
+000000b0: 7275 6e63 682e 696f 2532 4661 7069 2532  runch.io%2Fapi%2
+000000c0: 4664 6174 6173 6574 7325 3246 6439 3938  Fdatasets%2Fd998
+000000d0: 3532 3363 3132 3664 3439 3765 3932 6434  523c126d497e92d4
+000000e0: 6665 3666 3637 3962 3566 3634 2532 4676  fe6f679b5f64%2Fv
+000000f0: 6172 6961 626c 6573 2532 4630 3030 3030  ariables%2F00000
+00000100: 6125 3246 2532 3225 3744 2c25 3742 2532  a%2F%22%7D,%7B%2
+00000110: 3266 756e 6374 696f 6e25 3232 3a25 3232  2function%22:%22
+00000120: 6173 5f73 656c 6563 7465 6425 3232 2c25  as_selected%22,%
+00000130: 3232 6172 6773 2532 323a 2535 4225 3742  22args%22:%5B%7B
+00000140: 2532 3276 6172 6961 626c 6525 3232 3a25  %22variable%22:%
+00000150: 3232 6874 7470 733a 2532 4625 3246 616c  22https:%2F%2Fal
+00000160: 7068 612e 6372 756e 6368 2e69 6f25 3246  pha.crunch.io%2F
+00000170: 6170 6925 3246 6461 7461 7365 7473 2532  api%2Fdatasets%2
+00000180: 4664 3939 3835 3233 6331 3236 6434 3937  Fd998523c126d497
+00000190: 6539 3264 3466 6536 6636 3739 6235 6636  e92d4fe6f679b5f6
+000001a0: 3425 3246 7661 7269 6162 6c65 7325 3246  4%2Fvariables%2F
+000001b0: 3030 3030 3061 2532 4625 3232 2537 4425  00000a%2F%22%7D%
+000001c0: 3544 2537 442c 2537 4225 3232 6561 6368  5D%7D,%7B%22each
+000001d0: 2532 323a 2532 3268 7474 7073 3a25 3246  %22:%22https:%2F
+000001e0: 2532 4661 6c70 6861 2e63 7275 6e63 682e  %2Falpha.crunch.
+000001f0: 696f 2532 4661 7069 2532 4664 6174 6173  io%2Fapi%2Fdatas
+00000200: 6574 7325 3246 6439 3938 3532 3363 3132  ets%2Fd998523c12
+00000210: 3664 3439 3765 3932 6434 6665 3666 3637  6d497e92d4fe6f67
+00000220: 3962 3566 3634 2532 4676 6172 6961 626c  9b5f64%2Fvariabl
+00000230: 6573 2532 4630 3030 3030 6125 3246 2532  es%2F00000a%2F%2
+00000240: 3225 3744 2c25 3742 2532 3266 756e 6374  2%7D,%7B%22funct
+00000250: 696f 6e25 3232 3a25 3232 6173 5f73 656c  ion%22:%22as_sel
+00000260: 6563 7465 6425 3232 2c25 3232 6172 6773  ected%22,%22args
+00000270: 2532 323a 2535 4225 3742 2532 3276 6172  %22:%5B%7B%22var
+00000280: 6961 626c 6525 3232 3a25 3232 6874 7470  iable%22:%22http
+00000290: 733a 2532 4625 3246 616c 7068 612e 6372  s:%2F%2Falpha.cr
+000002a0: 756e 6368 2e69 6f25 3246 6170 6925 3246  unch.io%2Fapi%2F
+000002b0: 6461 7461 7365 7473 2532 4664 3939 3835  datasets%2Fd9985
+000002c0: 3233 6331 3236 6434 3937 6539 3264 3466  23c126d497e92d4f
+000002d0: 6536 6636 3739 6235 6636 3425 3246 7661  e6f679b5f64%2Fva
+000002e0: 7269 6162 6c65 7325 3246 3030 3030 3061  riables%2F00000a
+000002f0: 2532 4625 3232 2537 4425 3544 2537 4425  %2F%22%7D%5D%7D%
+00000300: 3544 2c25 3232 6d65 6173 7572 6573 2532  5D,%22measures%2
+00000310: 323a 2537 4225 3232 636f 756e 7425 3232  2:%7B%22count%22
+00000320: 3a25 3742 2532 3266 756e 6374 696f 6e25  :%7B%22function%
+00000330: 3232 3a25 3232 6375 6265 5f63 6f75 6e74  22:%22cube_count
+00000340: 2532 322c 2532 3261 7267 7325 3232 3a25  %22,%22args%22:%
+00000350: 3542 2535 4425 3744 2537 442c 2532 3277  5B%5D%7D%7D,%22w
+00000360: 6569 6768 7425 3232 3a25 3232 6874 7470  eight%22:%22http
+00000370: 733a 2532 4625 3246 616c 7068 612e 6372  s:%2F%2Falpha.cr
+00000380: 756e 6368 2e69 6f25 3246 6170 6925 3246  unch.io%2Fapi%2F
+00000390: 6461 7461 7365 7473 2532 4664 3939 3835  datasets%2Fd9985
+000003a0: 3233 6331 3236 6434 3937 6539 3264 3466  23c126d497e92d4f
+000003b0: 6536 6636 3739 6235 6636 3425 3246 7661  e6f679b5f64%2Fva
+000003c0: 7269 6162 6c65 7325 3246 3035 3231 3331  riables%2F052131
+000003d0: 3736 3532 3231 3430 3435 3865 6661 3465  76522140458efa4e
+000003e0: 3336 3962 6636 6130 3831 2532 4625 3232  369bf6a081%2F%22
+000003f0: 2537 4422 2c0a 2020 2020 2276 616c 7565  %7D",.    "value
+00000400: 223a 207b 0a20 2020 2020 2020 2022 7175  ": {.        "qu
+00000410: 6572 7922 3a20 7b0a 2020 2020 2020 2020  ery": {.        
+00000420: 2020 2020 2264 696d 656e 7369 6f6e 7322      "dimensions"
+00000430: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
+00000440: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00000450: 2020 2020 2020 2020 2020 2265 6163 6822            "each"
+00000460: 3a20 222f 6170 692f 6461 7461 7365 7473  : "/api/datasets
+00000470: 2f64 3939 3835 3233 6331 3236 6434 3937  /d998523c126d497
+00000480: 6539 3264 3466 6536 6636 3739 6235 6636  e92d4fe6f679b5f6
+00000490: 342f 7661 7269 6162 6c65 732f 3030 3030  4/variables/0000
+000004a0: 3061 2f22 0a20 2020 2020 2020 2020 2020  0a/".           
+000004b0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+000004c0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000004d0: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+000004e0: 7267 7322 3a20 5b0a 2020 2020 2020 2020  rgs": [.        
+000004f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000500: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00000510: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+00000520: 6172 6961 626c 6522 3a20 222f 6170 692f  ariable": "/api/
+00000530: 6461 7461 7365 7473 2f64 3939 3835 3233  datasets/d998523
+00000540: 6331 3236 6434 3937 6539 3264 3466 6536  c126d497e92d4fe6
+00000550: 6636 3739 6235 6636 342f 7661 7269 6162  f679b5f64/variab
+00000560: 6c65 732f 3030 3030 3061 2f22 0a20 2020  les/00000a/".   
+00000570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000580: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00000590: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+000005a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000005b0: 2020 2266 756e 6374 696f 6e22 3a20 2261    "function": "a
+000005c0: 735f 7365 6c65 6374 6564 220a 2020 2020  s_selected".    
+000005d0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+000005e0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+000005f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000600: 2020 2020 2022 6561 6368 223a 2022 2f61       "each": "/a
+00000610: 7069 2f64 6174 6173 6574 732f 6439 3938  pi/datasets/d998
+00000620: 3532 3363 3132 3664 3439 3765 3932 6434  523c126d497e92d4
+00000630: 6665 3666 3637 3962 3566 3634 2f76 6172  fe6f679b5f64/var
+00000640: 6961 626c 6573 2f30 3030 3030 612f 220a  iables/00000a/".
+00000650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000660: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00000670: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+00000680: 2020 2020 2020 2020 2022 6172 6773 223a           "args":
+00000690: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
+000006a0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+000006b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000006c0: 2020 2020 2020 2020 2022 7661 7269 6162           "variab
+000006d0: 6c65 223a 2022 2f61 7069 2f64 6174 6173  le": "/api/datas
+000006e0: 6574 732f 6439 3938 3532 3363 3132 3664  ets/d998523c126d
+000006f0: 3439 3765 3932 6434 6665 3666 3637 3962  497e92d4fe6f679b
+00000700: 3566 3634 2f76 6172 6961 626c 6573 2f30  5f64/variables/0
+00000710: 3030 3030 612f 220a 2020 2020 2020 2020  0000a/".        
+00000720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000730: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00000740: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+00000750: 2020 2020 2020 2020 2020 2020 2022 6675               "fu
+00000760: 6e63 7469 6f6e 223a 2022 6173 5f73 656c  nction": "as_sel
+00000770: 6563 7465 6422 0a20 2020 2020 2020 2020  ected".         
+00000780: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00000790: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
+000007a0: 2020 2020 226d 6561 7375 7265 7322 3a20      "measures": 
+000007b0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000007c0: 2020 2263 6f75 6e74 223a 207b 0a20 2020    "count": {.   
+000007d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000007e0: 2022 6172 6773 223a 205b 0a0a 2020 2020   "args": [..    
+000007f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000800: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00000810: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
+00000820: 223a 2022 6375 6265 5f63 6f75 6e74 220a  ": "cube_count".
+00000830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000840: 7d0a 2020 2020 2020 2020 2020 2020 7d2c  }.            },
+00000850: 0a20 2020 2020 2020 2020 2020 2022 7765  .            "we
+00000860: 6967 6874 223a 2022 2f61 7069 2f64 6174  ight": "/api/dat
+00000870: 6173 6574 732f 6439 3938 3532 3363 3132  asets/d998523c12
+00000880: 3664 3439 3765 3932 6434 6665 3666 3637  6d497e92d4fe6f67
+00000890: 3962 3566 3634 2f76 6172 6961 626c 6573  9b5f64/variables
+000008a0: 2f30 3532 3133 3137 3635 3232 3134 3034  /052131765221404
+000008b0: 3538 6566 6134 6533 3639 6266 3661 3038  58efa4e369bf6a08
+000008c0: 312f 220a 2020 2020 2020 2020 7d2c 0a20  1/".        },. 
+000008d0: 2020 2020 2020 2022 7175 6572 795f 656e         "query_en
+000008e0: 7669 726f 6e6d 656e 7422 3a20 7b0a 2020  vironment": {.  
+000008f0: 2020 2020 2020 2020 2020 2266 696c 7465            "filte
+00000900: 7222 3a20 5b0a 0a20 2020 2020 2020 2020  r": [..         
+00000910: 2020 205d 0a20 2020 2020 2020 207d 2c0a     ].        },.
+00000920: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+00000930: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+00000940: 225f 5f63 6f6d 6d65 6e74 223a 2022 5741  "__comment": "WA
+00000950: 524e 494e 473a 2066 696c 7465 7265 6420  RNING: filtered 
+00000960: 616e 6420 756e 6669 6c74 6572 6564 2070  and unfiltered p
+00000970: 6172 616d 7320 6861 7665 2062 6565 6e20  arams have been 
+00000980: 6d61 6e75 616c 6c79 2061 6464 6564 2074  manually added t
+00000990: 6f20 7468 6973 2066 6978 7475 7265 2061  o this fixture a
+000009a0: 6e64 2074 6865 7265 2069 7320 6120 6869  nd there is a hi
+000009b0: 6768 2070 6f73 7369 6269 6c69 7479 2074  gh possibility t
+000009c0: 6865 7920 6d69 6768 7420 6265 2077 726f  hey might be wro
+000009d0: 6e67 2c20 7365 6520 7469 636b 6574 2023  ng, see ticket #
+000009e0: 3136 3031 3637 3137 3222 2c0a 2020 2020  160167172",.    
+000009f0: 2020 2020 2020 2020 2263 6f75 6e74 7322          "counts"
+00000a00: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
+00000a10: 2020 2020 3430 2c0a 2020 2020 2020 2020      40,.        
+00000a20: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00000a30: 2020 2020 2020 2020 2020 2030 2c0a 2020             0,.  
+00000a40: 2020 2020 2020 2020 2020 2020 2020 3134                14
+00000a50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000a60: 2020 3230 2c0a 2020 2020 2020 2020 2020    20,.          
+00000a70: 2020 2020 2020 362c 0a20 2020 2020 2020        6,.       
+00000a80: 2020 2020 2020 2020 2031 382c 0a20 2020           18,.   
+00000a90: 2020 2020 2020 2020 2020 2020 2031 362c               16,
+00000aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000ab0: 2036 2c0a 2020 2020 2020 2020 2020 2020   6,.            
+00000ac0: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00000ad0: 2020 2020 2020 2034 302c 0a20 2020 2020         40,.     
+00000ae0: 2020 2020 2020 2020 2020 2030 2c0a 2020             0,.  
+00000af0: 2020 2020 2020 2020 2020 2020 2020 3135                15
+00000b00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000b10: 2020 3231 2c0a 2020 2020 2020 2020 2020    21,.          
+00000b20: 2020 2020 2020 342c 0a20 2020 2020 2020        4,.       
+00000b30: 2020 2020 2020 2020 2032 302c 0a20 2020           20,.   
+00000b40: 2020 2020 2020 2020 2020 2020 2031 362c               16,
+00000b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000b60: 2034 2c0a 2020 2020 2020 2020 2020 2020   4,.            
+00000b70: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00000b80: 2020 2020 2020 2030 2c0a 2020 2020 2020         0,.      
+00000b90: 2020 2020 2020 2020 2020 3230 2c0a 2020            20,.  
+00000ba0: 2020 2020 2020 2020 2020 2020 2020 352c                5,
+00000bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000bc0: 2034 2c0a 2020 2020 2020 2020 2020 2020   4,.            
+00000bd0: 2020 2020 3131 2c0a 2020 2020 2020 2020      11,.        
+00000be0: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00000bf0: 2020 2020 2020 2020 2020 2030 2c0a 2020             0,.  
+00000c00: 2020 2020 2020 2020 2020 2020 2020 3230                20
+00000c10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000c20: 2020 3134 2c0a 2020 2020 2020 2020 2020    14,.          
+00000c30: 2020 2020 2020 3135 2c0a 2020 2020 2020        15,.      
+00000c40: 2020 2020 2020 2020 2020 352c 0a20 2020            5,.   
+00000c50: 2020 2020 2020 2020 2020 2020 2033 342c               34,
+00000c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000c70: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00000c80: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00000c90: 2020 2020 2020 2031 362c 0a20 2020 2020         16,.     
+00000ca0: 2020 2020 2020 2020 2020 2031 332c 0a20             13,. 
+00000cb0: 2020 2020 2020 2020 2020 2020 2020 2035                 5
+00000cc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000cd0: 2020 3230 2c0a 2020 2020 2020 2020 2020    20,.          
+00000ce0: 2020 2020 2020 3231 2c0a 2020 2020 2020        21,.      
+00000cf0: 2020 2020 2020 2020 2020 342c 0a20 2020            4,.   
+00000d00: 2020 2020 2020 2020 2020 2020 2030 2c0a               0,.
+00000d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d20: 3435 2c0a 2020 2020 2020 2020 2020 2020  45,.            
+00000d30: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00000d40: 2020 2020 2020 2032 322c 0a20 2020 2020         22,.     
+00000d50: 2020 2020 2020 2020 2020 2031 392c 0a20             19,. 
+00000d60: 2020 2020 2020 2020 2020 2020 2020 2034                 4
+00000d70: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000d80: 2020 362c 0a20 2020 2020 2020 2020 2020    6,.           
+00000d90: 2020 2020 2034 2c0a 2020 2020 2020 2020       4,.        
+00000da0: 2020 2020 2020 2020 3131 2c0a 2020 2020          11,.    
+00000db0: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
+00000dc0: 2020 2020 2020 2020 2020 2020 2020 2030                 0
+00000dd0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000de0: 2020 3231 2c0a 2020 2020 2020 2020 2020    21,.          
+00000df0: 2020 2020 2020 302c 0a20 2020 2020 2020        0,.       
+00000e00: 2020 2020 2020 2020 2030 2c0a 2020 2020           0,.    
+00000e10: 2020 2020 2020 2020 2020 2020 3231 2c0a              21,.
+00000e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e30: 3138 2c0a 2020 2020 2020 2020 2020 2020  18,.            
+00000e40: 2020 2020 3230 2c0a 2020 2020 2020 2020      20,.        
+00000e50: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00000e60: 2020 2020 2020 2020 2020 2031 362c 0a20             16,. 
+00000e70: 2020 2020 2020 2020 2020 2020 2020 2032                 2
+00000e80: 322c 0a20 2020 2020 2020 2020 2020 2020  2,.             
+00000e90: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+00000ea0: 2020 2020 2020 3338 2c0a 2020 2020 2020        38,.      
+00000eb0: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
+00000ec0: 2020 2020 2020 2020 2020 2020 2030 2c0a               0,.
+00000ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ee0: 3136 2c0a 2020 2020 2020 2020 2020 2020  16,.            
+00000ef0: 2020 2020 3136 2c0a 2020 2020 2020 2020      16,.        
+00000f00: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00000f10: 2020 2020 2020 2020 2020 2031 332c 0a20             13,. 
+00000f20: 2020 2020 2020 2020 2020 2020 2020 2031                 1
+00000f30: 392c 0a20 2020 2020 2020 2020 2020 2020  9,.             
+00000f40: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+00000f50: 2020 2020 2020 302c 0a20 2020 2020 2020        0,.       
+00000f60: 2020 2020 2020 2020 2033 322c 0a20 2020           32,.   
+00000f70: 2020 2020 2020 2020 2020 2020 2030 2c0a               0,.
+00000f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000f90: 362c 0a20 2020 2020 2020 2020 2020 2020  6,.             
+00000fa0: 2020 2034 2c0a 2020 2020 2020 2020 2020     4,.          
+00000fb0: 2020 2020 2020 3230 2c0a 2020 2020 2020        20,.      
+00000fc0: 2020 2020 2020 2020 2020 352c 0a20 2020            5,.   
+00000fd0: 2020 2020 2020 2020 2020 2020 2034 2c0a               4,.
+00000fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ff0: 3231 2c0a 2020 2020 2020 2020 2020 2020  21,.            
+00001000: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00001010: 2020 2020 2020 2030 2c0a 2020 2020 2020         0,.      
+00001020: 2020 2020 2020 2020 2020 3330 0a20 2020            30.   
+00001030: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
+00001040: 2020 2020 2020 2020 2264 696d 656e 7369          "dimensi
+00001050: 6f6e 7322 3a20 5b0a 2020 2020 2020 2020  ons": [.        
+00001060: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00001070: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+00001080: 6572 6976 6564 223a 2074 7275 652c 0a20  erived": true,. 
+00001090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000010a0: 2020 2022 7265 6665 7265 6e63 6573 223a     "references":
+000010b0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000010c0: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
+000010d0: 7322 3a20 2270 6574 7322 2c0a 2020 2020  s": "pets",.    
+000010e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000010f0: 2020 2020 2264 6573 6372 6970 7469 6f6e      "description
+00001100: 223a 206e 756c 6c2c 0a20 2020 2020 2020  ": null,.       
+00001110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001120: 2022 6973 5f64 6963 686f 746f 6d6f 7573   "is_dichotomous
+00001130: 223a 2074 7275 652c 0a20 2020 2020 2020  ": true,.       
+00001140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001150: 2022 6e61 6d65 223a 2022 7065 7473 222c   "name": "pets",
+00001160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001170: 2020 2020 2020 2020 2022 7375 6272 6566           "subref
+00001180: 6572 656e 6365 7322 3a20 5b0a 2020 2020  erences": [.    
+00001190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011a0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000011b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011c0: 2020 2020 2020 2020 2020 2261 6c69 6173            "alias
+000011d0: 223a 2022 646f 6722 2c0a 2020 2020 2020  ": "dog",.      
+000011e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011f0: 2020 2020 2020 2020 2020 2264 6573 6372            "descr
+00001200: 6970 7469 6f6e 223a 2022 646f 6722 2c0a  iption": "dog",.
+00001210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001230: 226e 616d 6522 3a20 2264 6f67 220a 2020  "name": "dog".  
+00001240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001250: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+00001260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001270: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00001280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001290: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
+000012a0: 7322 3a20 2263 6174 222c 0a20 2020 2020  s": "cat",.     
+000012b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000012c0: 2020 2020 2020 2020 2020 2022 6465 7363             "desc
+000012d0: 7269 7074 696f 6e22 3a20 2263 6174 222c  ription": "cat",
+000012e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000012f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001300: 2022 6e61 6d65 223a 2022 6361 7422 0a20   "name": "cat". 
+00001310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001320: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+00001330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001340: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00001350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001360: 2020 2020 2020 2020 2020 2020 2261 6c69              "ali
+00001370: 6173 223a 2022 776f 6d62 6174 222c 0a20  as": "wombat",. 
+00001380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001390: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000013a0: 6465 7363 7269 7074 696f 6e22 3a20 2277  description": "w
+000013b0: 6f6d 6261 7422 2c0a 2020 2020 2020 2020  ombat",.        
+000013c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013d0: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+000013e0: 2277 6f6d 6261 7422 0a20 2020 2020 2020  "wombat".       
+000013f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001400: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00001410: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00001420: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00001430: 2020 2020 2020 2020 2020 2275 6e69 666f            "unifo
+00001440: 726d 5f62 6173 6973 223a 2066 616c 7365  rm_basis": false
+00001450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001460: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00001470: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
+00001480: 6522 3a20 7b0a 2020 2020 2020 2020 2020  e": {.          
+00001490: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+000014a0: 6c61 7373 223a 2022 656e 756d 222c 0a20  lass": "enum",. 
+000014b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014c0: 2020 2020 2020 2022 656c 656d 656e 7473         "elements
+000014d0: 223a 205b 0a20 2020 2020 2020 2020 2020  ": [.           
+000014e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014f0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00001500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001510: 2020 2022 6964 223a 2031 2c0a 2020 2020     "id": 1,.    
+00001520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001530: 2020 2020 2020 2020 2020 2020 226d 6973              "mis
+00001540: 7369 6e67 223a 2066 616c 7365 2c0a 2020  sing": false,.  
+00001550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001560: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+00001570: 616c 7565 223a 207b 0a20 2020 2020 2020  alue": {.       
+00001580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001590: 2020 2020 2020 2020 2020 2020 2022 6465               "de
+000015a0: 7269 7665 6422 3a20 6661 6c73 652c 0a20  rived": false,. 
+000015b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000015c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000015d0: 2020 2022 6964 223a 2022 3030 3030 222c     "id": "0000",
+000015e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000015f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001600: 2020 2020 2022 7265 6665 7265 6e63 6573       "references
+00001610: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
+00001620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001630: 2020 2020 2020 2020 2020 2020 2022 616c               "al
+00001640: 6961 7322 3a20 2264 6f67 222c 0a20 2020  ias": "dog",.   
+00001650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001670: 2020 2020 2022 6465 7363 7269 7074 696f       "descriptio
+00001680: 6e22 3a20 2264 6f67 222c 0a20 2020 2020  n": "dog",.     
+00001690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016b0: 2020 2022 6e61 6d65 223a 2022 646f 6722     "name": "dog"
+000016c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000016d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016e0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+000016f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001700: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00001710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001720: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00001730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001740: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00001750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001760: 2020 2020 2020 2269 6422 3a20 322c 0a20        "id": 2,. 
+00001770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001780: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00001790: 6d69 7373 696e 6722 3a20 6661 6c73 652c  missing": false,
+000017a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000017b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000017c0: 2022 7661 6c75 6522 3a20 7b0a 2020 2020   "value": {.    
+000017d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000017e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000017f0: 2264 6572 6976 6564 223a 2066 616c 7365  "derived": false
+00001800: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00001810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001820: 2020 2020 2020 2269 6422 3a20 2230 3030        "id": "000
+00001830: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+00001840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001850: 2020 2020 2020 2020 2272 6566 6572 656e          "referen
+00001860: 6365 7322 3a20 7b0a 2020 2020 2020 2020  ces": {.        
+00001870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001890: 2261 6c69 6173 223a 2022 6361 7422 2c0a  "alias": "cat",.
+000018a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000018b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000018c0: 2020 2020 2020 2020 2264 6573 6372 6970          "descrip
+000018d0: 7469 6f6e 223a 2022 6361 7422 2c0a 2020  tion": "cat",.  
+000018e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000018f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001900: 2020 2020 2020 226e 616d 6522 3a20 2263        "name": "c
+00001910: 6174 220a 2020 2020 2020 2020 2020 2020  at".            
+00001920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001930: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00001940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001950: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00001960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001970: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00001980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001990: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+000019a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019b0: 2020 2020 2020 2020 2022 6964 223a 2033           "id": 3
+000019c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000019d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019e0: 2020 226d 6973 7369 6e67 223a 2066 616c    "missing": fal
+000019f0: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+00001a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a10: 2020 2020 2276 616c 7565 223a 207b 0a20      "value": {. 
+00001a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a40: 2020 2022 6465 7269 7665 6422 3a20 6661     "derived": fa
+00001a50: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+00001a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a70: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
+00001a80: 3030 3032 222c 0a20 2020 2020 2020 2020  0002",.         
+00001a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001aa0: 2020 2020 2020 2020 2020 2022 7265 6665             "refe
+00001ab0: 7265 6e63 6573 223a 207b 0a20 2020 2020  rences": {.     
+00001ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ae0: 2020 2022 616c 6961 7322 3a20 2277 6f6d     "alias": "wom
+00001af0: 6261 7422 2c0a 2020 2020 2020 2020 2020  bat",.          
+00001b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b10: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+00001b20: 6573 6372 6970 7469 6f6e 223a 2022 776f  escription": "wo
+00001b30: 6d62 6174 222c 0a20 2020 2020 2020 2020  mbat",.         
+00001b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00001b60: 6e61 6d65 223a 2022 776f 6d62 6174 220a  name": "wombat".
+00001b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b90: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+00001ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001bb0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00001bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001bd0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+00001be0: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+00001bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001c00: 2020 2020 2020 2020 2022 7375 6274 7970           "subtyp
+00001c10: 6522 3a20 7b0a 2020 2020 2020 2020 2020  e": {.          
+00001c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001c30: 2020 2263 6c61 7373 223a 2022 7661 7269    "class": "vari
+00001c40: 6162 6c65 220a 2020 2020 2020 2020 2020  able".          
+00001c50: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00001c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001c70: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+00001c80: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+00001c90: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00001ca0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00001cb0: 6465 7269 7665 6422 3a20 7472 7565 2c0a  derived": true,.
+00001cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001cd0: 2020 2020 2272 6566 6572 656e 6365 7322      "references"
+00001ce0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+00001cf0: 2020 2020 2020 2020 2020 2020 2261 6c69              "ali
+00001d00: 6173 223a 2022 7065 7473 222c 0a20 2020  as": "pets",.   
+00001d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001d20: 2020 2020 2022 6465 7363 7269 7074 696f       "descriptio
+00001d30: 6e22 3a20 6e75 6c6c 2c0a 2020 2020 2020  n": null,.      
+00001d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001d50: 2020 2269 735f 6469 6368 6f74 6f6d 6f75    "is_dichotomou
+00001d60: 7322 3a20 7472 7565 2c0a 2020 2020 2020  s": true,.      
+00001d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001d80: 2020 226e 616d 6522 3a20 2270 6574 7322    "name": "pets"
+00001d90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00001da0: 2020 2020 2020 2020 2020 2273 7562 7265            "subre
+00001db0: 6665 7265 6e63 6573 223a 205b 0a20 2020  ferences": [.   
+00001dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001dd0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00001de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001df0: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
+00001e00: 7322 3a20 2264 6f67 222c 0a20 2020 2020  s": "dog",.     
+00001e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e20: 2020 2020 2020 2020 2020 2022 6465 7363             "desc
+00001e30: 7269 7074 696f 6e22 3a20 2264 6f67 222c  ription": "dog",
+00001e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e60: 2022 6e61 6d65 223a 2022 646f 6722 0a20   "name": "dog". 
+00001e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e80: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+00001e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ea0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00001eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ec0: 2020 2020 2020 2020 2020 2020 2261 6c69              "ali
+00001ed0: 6173 223a 2022 6361 7422 2c0a 2020 2020  as": "cat",.    
+00001ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ef0: 2020 2020 2020 2020 2020 2020 2264 6573              "des
+00001f00: 6372 6970 7469 6f6e 223a 2022 6361 7422  cription": "cat"
+00001f10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00001f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f30: 2020 226e 616d 6522 3a20 2263 6174 220a    "name": "cat".
+00001f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f50: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00001f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f70: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00001f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f90: 2020 2020 2020 2020 2020 2020 2022 616c               "al
+00001fa0: 6961 7322 3a20 2277 6f6d 6261 7422 2c0a  ias": "wombat",.
+00001fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001fd0: 2264 6573 6372 6970 7469 6f6e 223a 2022  "description": "
+00001fe0: 776f 6d62 6174 222c 0a20 2020 2020 2020  wombat",.       
+00001ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002000: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+00002010: 2022 776f 6d62 6174 220a 2020 2020 2020   "wombat".      
+00002020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002030: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00002040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002050: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00002060: 2020 2020 2020 2020 2020 2022 756e 6966             "unif
+00002070: 6f72 6d5f 6261 7369 7322 3a20 6661 6c73  orm_basis": fals
+00002080: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00002090: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+000020a0: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
+000020b0: 7065 223a 207b 0a20 2020 2020 2020 2020  pe": {.         
+000020c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000020d0: 6361 7465 676f 7269 6573 223a 205b 0a20  categories": [. 
+000020e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000020f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00002100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002110: 2020 2020 2020 2020 2020 2020 2022 6964               "id
+00002120: 223a 2031 2c0a 2020 2020 2020 2020 2020  ": 1,.          
+00002130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002140: 2020 2020 2020 226d 6973 7369 6e67 223a        "missing":
+00002150: 2066 616c 7365 2c0a 2020 2020 2020 2020   false,.        
+00002160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002170: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+00002180: 2253 656c 6563 7465 6422 2c0a 2020 2020  "Selected",.    
+00002190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000021a0: 2020 2020 2020 2020 2020 2020 226e 756d              "num
+000021b0: 6572 6963 5f76 616c 7565 223a 2031 2c0a  eric_value": 1,.
+000021c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000021d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000021e0: 2273 656c 6563 7465 6422 3a20 7472 7565  "selected": true
+000021f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002200: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00002210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002220: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00002230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002240: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00002250: 6422 3a20 302c 0a20 2020 2020 2020 2020  d": 0,.         
+00002260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002270: 2020 2020 2020 2022 6d69 7373 696e 6722         "missing"
+00002280: 3a20 6661 6c73 652c 0a20 2020 2020 2020  : false,.       
+00002290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000022a0: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+000022b0: 2022 4e6f 7420 5365 6c65 6374 6564 222c   "Not Selected",
+000022c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000022d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000022e0: 2022 6e75 6d65 7269 635f 7661 6c75 6522   "numeric_value"
+000022f0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
+00002300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002310: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00002320: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00002330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002350: 2022 6964 223a 202d 312c 0a20 2020 2020   "id": -1,.     
+00002360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002370: 2020 2020 2020 2020 2020 2022 6d69 7373             "miss
+00002380: 696e 6722 3a20 7472 7565 2c0a 2020 2020  ing": true,.    
+00002390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000023a0: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
+000023b0: 6522 3a20 224e 6f20 4461 7461 222c 0a20  e": "No Data",. 
+000023c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000023d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000023e0: 6e75 6d65 7269 635f 7661 6c75 6522 3a20  numeric_value": 
+000023f0: 6e75 6c6c 0a20 2020 2020 2020 2020 2020  null.           
+00002400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002410: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+00002420: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+00002430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002440: 2020 2020 2020 2263 6c61 7373 223a 2022        "class": "
+00002450: 6361 7465 676f 7269 6361 6c22 2c0a 2020  categorical",.  
+00002460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002470: 2020 2020 2020 226f 7264 696e 616c 223a        "ordinal":
+00002480: 2066 616c 7365 2c0a 2020 2020 2020 2020   false,.        
+00002490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024a0: 2273 7562 7661 7269 6162 6c65 7322 3a20  "subvariables": 
+000024b0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+000024c0: 2020 2020 2020 2020 2020 2020 2020 2230                "0
+000024d0: 3030 3022 2c0a 2020 2020 2020 2020 2020  000",.          
+000024e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024f0: 2020 2230 3030 3122 2c0a 2020 2020 2020    "0001",.      
+00002500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002510: 2020 2020 2020 2230 3030 3222 0a20 2020        "0002".   
+00002520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002530: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
+00002540: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00002550: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00002560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002570: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00002580: 2020 2020 2020 2264 6572 6976 6564 223a        "derived":
+00002590: 2074 7275 652c 0a20 2020 2020 2020 2020   true,.         
+000025a0: 2020 2020 2020 2020 2020 2022 7265 6665             "refe
+000025b0: 7265 6e63 6573 223a 207b 0a20 2020 2020  rences": {.     
+000025c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000025d0: 2020 2022 616c 6961 7322 3a20 2270 6574     "alias": "pet
+000025e0: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
+000025f0: 2020 2020 2020 2020 2020 2020 2264 6573              "des
+00002600: 6372 6970 7469 6f6e 223a 206e 756c 6c2c  cription": null,
+00002610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002620: 2020 2020 2020 2020 2022 6973 5f64 6963           "is_dic
+00002630: 686f 746f 6d6f 7573 223a 2074 7275 652c  hotomous": true,
+00002640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002650: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+00002660: 2022 7065 7473 222c 0a20 2020 2020 2020   "pets",.       
+00002670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002680: 2022 7375 6272 6566 6572 656e 6365 7322   "subreferences"
+00002690: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
+000026a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000026b0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000026c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000026d0: 2020 2261 6c69 6173 223a 2022 646f 6722    "alias": "dog"
+000026e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000026f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002700: 2020 2264 6573 6372 6970 7469 6f6e 223a    "description":
+00002710: 2022 646f 6722 2c0a 2020 2020 2020 2020   "dog",.        
+00002720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002730: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+00002740: 2264 6f67 220a 2020 2020 2020 2020 2020  "dog".          
+00002750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002760: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
+00002770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002780: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00002790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000027a0: 2020 2022 616c 6961 7322 3a20 2263 6174     "alias": "cat
+000027b0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+000027c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000027d0: 2020 2022 6465 7363 7269 7074 696f 6e22     "description"
+000027e0: 3a20 2263 6174 222c 0a20 2020 2020 2020  : "cat",.       
+000027f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002800: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+00002810: 2022 6361 7422 0a20 2020 2020 2020 2020   "cat".         
+00002820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002830: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
 00002840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002850: 2266 756e 6374 696f 6e22 3a20 2273 7562  "function": "sub
-00002860: 746f 7461 6c22 2c00 2020 2020 2020 2020  total",.        
-00002870: 2020 2020 2020 2020 2020 5d2c 0020 2020            ],.   
-00002880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002890: 2032 0020 2020 2020 2020 2020 2020 2020   2.             
-000028a0: 2020 2020 2020 2031 2c00 2020 2020 2020         1,.      
-000028b0: 2020 2020 2020 2020 2020 2020 2261 7267              "arg
-000028c0: 7322 3a20 5b00 2020 2020 2020 2020 2020  s": [.          
-000028d0: 2020 2020 2020 2020 2261 6e63 686f 7222          "anchor"
-000028e0: 3a20 322c 0020 2020 2020 2020 2020 2020  : 2,.           
-000028f0: 2020 2020 207b 0020 2020 2020 2020 2020       {.         
-00002900: 2020 2020 2022 696e 7365 7274 696f 6e73       "insertions
-00002910: 223a 205b 0020 2020 2020 2020 2020 2020  ": [.           
-00002920: 2022 7472 616e 7366 6f72 6d22 3a20 7b00   "transform": {.
-00002930: 2020 2020 2020 2020 2020 2020 2273 686f              "sho
-00002940: 775f 6e75 6d65 7269 635f 7661 6c75 6573  w_numeric_values
-00002950: 223a 2066 616c 7365 2c00 2020 2020 2020  ": false,.      
-00002960: 2020 2020 2020 2273 686f 775f 636f 756e        "show_coun
-00002970: 7473 223a 2066 616c 7365 2c00 2020 2020  ts": false,.    
-00002980: 2020 2020 2020 2020 2269 6e63 6c75 6465          "include
-00002990: 5f6d 6973 7369 6e67 223a 2066 616c 7365  _missing": false
-000029a0: 2c00 2020 2020 2020 2020 2020 2020 2263  ,.            "c
-000029b0: 6f6c 756d 6e5f 7769 6474 6822 3a20 6e75  olumn_width": nu
-000029c0: 6c6c 2c00 2020 2020 2020 2020 2020 2276  ll,.          "v
-000029d0: 6965 7722 3a20 7b00 2020 2020 2020 2020  iew": {.        
-000029e0: 2020 226e 616d 6522 3a20 2253 6875 7464    "name": "Shutd
-000029f0: 6f77 6e42 6c61 6d65 222c 0020 2020 2020  ownBlame",.     
-00002a00: 2020 2020 2022 6465 7363 7269 7074 696f       "descriptio
-00002a10: 6e22 3a20 2249 6620 5072 6573 6964 656e  n": "If Presiden
-00002a20: 7420 4f62 616d 6120 616e 6420 7468 6520  t Obama and the 
-00002a30: 5265 7075 626c 6963 616e 7320 696e 2043  Republicans in C
-00002a40: 6f6e 6772 6573 7320 646f 206e 6f74 2072  ongress do not r
-00002a50: 6561 6368 2061 2062 7564 6765 7420 6167  each a budget ag
-00002a60: 7265 656d 656e 7420 696e 2074 696d 6520  reement in time 
-00002a70: 746f 2061 766f 6964 2061 2073 6875 7464  to avoid a shutd
-00002a80: 6f77 6e20 6f66 2074 6865 2066 6564 6572  own of the feder
-00002a90: 616c 2067 6f76 6572 6e6d 656e 742c 2077  al government, w
-00002aa0: 686f 2064 6f20 796f 7520 7468 696e 6b20  ho do you think 
-00002ab0: 7769 6c6c 206d 6f72 6520 746f 2062 6c61  will more to bla
-00002ac0: 6d65 2d2d 5072 6573 6964 656e 7420 4f62  me--President Ob
-00002ad0: 616d 6120 6f72 2074 6865 2052 6570 7562  ama or the Repub
-00002ae0: 6c69 6361 6e20 436f 6e67 7265 7373 3f22  lican Congress?"
-00002af0: 2c00 2020 2020 2020 2020 2020 2261 6c69  ,.          "ali
-00002b00: 6173 223a 2022 5368 7574 646f 776e 426c  as": "ShutdownBl
-00002b10: 616d 6522 2c00 2020 2020 2020 2020 2272  ame",.        "r
-00002b20: 6566 6572 656e 6365 7322 3a20 7b00 2020  eferences": {.  
-00002b30: 2020 2020 2020 2264 6572 6976 6564 223a        "derived":
-00002b40: 2066 616c 7365 2c00 2020 2020 2020 7b00   false,.      {.
-00002b50: 2020 2020 2264 696d 656e 7369 6f6e 7322      "dimensions"
-00002b60: 3a20 5b00 2020 2020 5d2c 0020 2020 2020  : [.    ],.     
-00002b70: 2030 0020 2020 2020 2030 2c00 2020 2020   0.      0,.    
-00002b80: 2020 302c 0020 2020 2020 2030 2c00 2020    0,.      0,.  
-00002b90: 2020 2020 302c 0020 2020 2020 2030 2c00      0,.      0,.
-00002ba0: 2020 2020 2020 302c 0020 2020 2020 2030        0,.      0
-00002bb0: 2c00 2020 2020 2020 302c 0020 2020 2020  ,.      0,.     
-00002bc0: 2030 2c00 2020 2020 2020 302c 0020 2020   0,.      0,.   
-00002bd0: 2020 2030 2c00 2020 2020 2020 302c 0020     0,.      0,. 
-00002be0: 2020 2020 2030 2c00 2020 2020 2020 302c       0,.      0,
-00002bf0: 0020 2020 2020 2030 2c00 2020 2020 2020  .      0,.      
-00002c00: 302c 0020 2020 2020 2030 2c00 2020 2020  0,.      0,.    
-00002c10: 2020 302c 0020 2020 2020 2030 2c00 2020    0,.      0,.  
-00002c20: 2020 2020 302c 0020 2020 2020 2030 2c00      0,.      0,.
-00002c30: 2020 2020 2020 302c 0020 2020 2020 2032        0,.      2
-00002c40: 2c00 2020 2020 2020 312c 0020 2020 2020  ,.      1,.     
-00002c50: 2030 2c00 2020 2020 2020 302c 0020 2020   0,.      0,.   
-00002c60: 2020 2030 2c00 2020 2020 2020 302c 0020     0,.      0,. 
-00002c70: 2020 2020 2030 2c00 2020 2020 2020 3234       0,.      24
-00002c80: 2c00 2020 2020 2020 352c 0020 2020 2020  ,.      5,.     
-00002c90: 2037 2c00 2020 2020 2020 3233 2c00 2020   7,.      23,.  
-00002ca0: 2020 2020 362c 0020 2020 2020 2033 2c00      6,.      3,.
-00002cb0: 2020 2020 2020 302c 0020 2020 2020 2030        0,.      0
-00002cc0: 2c00 2020 2020 2020 302c 0020 2020 2020  ,.      0,.     
-00002cd0: 2032 2c00 2020 2020 2020 302c 0020 2020   2,.      0,.   
-00002ce0: 2020 2031 2c00 2020 2020 2020 312c 0020     1,.      1,. 
-00002cf0: 2020 2020 2031 2c00 2020 2020 2020 312c       1,.      1,
-00002d00: 0020 2020 2020 2030 2c00 2020 2020 2020  .      0,.      
-00002d10: 302c 0020 2020 2020 2030 2c00 2020 2020  0,.      0,.    
-00002d20: 2020 352c 0020 2020 2020 2032 362c 0020    5,.      26,. 
-00002d30: 2020 2020 2036 372c 0020 2020 2020 2031       67,.      1
-00002d40: 3039 2c00 2020 2020 2020 3239 2c00 2020  09,.      29,.  
-00002d50: 2020 2020 362c 0020 2020 2020 2030 2c00      6,.      0,.
-00002d60: 2020 2020 2020 302c 0020 2020 2020 2030        0,.      0
-00002d70: 2c00 2020 2020 2020 322c 0020 2020 2020  ,.      2,.     
-00002d80: 2031 322c 0020 2020 2020 2032 392c 0020   12,.      29,. 
-00002d90: 2020 2020 2031 3632 2c00 2020 2020 2020       162,.      
-00002da0: 3133 322c 0020 2020 2020 2035 392c 0020  132,.      59,. 
-00002db0: 2020 2020 2030 2c00 2020 2020 2020 302c       0,.      0,
-00002dc0: 0020 2020 2020 2030 2c00 2020 2020 2020  .      0,.      
-00002dd0: 372c 0020 2020 2020 2036 372c 0020 2020  7,.      67,.   
-00002de0: 2020 2031 3134 2c00 2020 2020 2020 3830     114,.      80
-00002df0: 2c00 2020 2020 2020 3134 2c00 2020 2020  ,.      14,.    
-00002e00: 2020 332c 0020 2020 2022 636f 756e 7473    3,.    "counts
-00002e10: 223a 205b 0020 2022 7265 7375 6c74 223a  ": [.  "result":
-00002e20: 207b 0020 207d 2c00 2020 2020 2266 696c   {.  },.    "fil
-00002e30: 7465 7222 3a20 5b5d 0020 2022 7175 6572  ter": [].  "quer
-00002e40: 795f 656e 7669 726f 6e6d 656e 7422 3a20  y_environment": 
-00002e50: 7b00 2020 7d2c 0020 2020 2022 7765 6967  {.  },.    "weig
-00002e60: 6874 223a 206e 756c 6c00 2020 2020 7d2c  ht": null.    },
-00002e70: 0020 2020 2020 207d 0020 2020 2020 2020  .      }.       
-00002e80: 2022 6675 6e63 7469 6f6e 223a 2022 6375   "function": "cu
-00002e90: 6265 5f63 6f75 6e74 2200 2020 2020 2020  be_count".      
-00002ea0: 2020 2261 7267 7322 3a20 5b5d 2c00 2020    "args": [],.  
-00002eb0: 2020 2020 2263 6f75 6e74 223a 207b 0020      "count": {. 
-00002ec0: 2020 2022 6d65 6173 7572 6573 223a 207b     "measures": {
-00002ed0: 0020 2020 205d 2c00 2020 2020 2020 7d00  .    ],.      }.
-00002ee0: 2020 2020 2020 2020 2276 6172 6961 626c          "variabl
-00002ef0: 6522 3a20 2268 7474 703a 2f2f 6c6f 6361  e": "http://loca
-00002f00: 6c2e 6372 756e 6368 2e69 6f3a 3830 3830  l.crunch.io:8080
-00002f10: 2f61 7069 2f64 6174 6173 6574 732f 3533  /api/datasets/53
-00002f20: 3433 3461 6165 3631 3836 3438 3133 6162  434aae61864813ab
-00002f30: 6232 6137 3336 6533 6534 3463 6362 2f76  b2a736e3e44ccb/v
-00002f40: 6172 6961 626c 6573 2f30 3030 3030 312f  ariables/000001/
-00002f50: 2200 2020 2020 2020 7b00 2020 2020 2020  ".      {.      
-00002f60: 7d2c 0020 2020 2020 2020 2022 7661 7269  },.        "vari
-00002f70: 6162 6c65 223a 2022 6874 7470 3a2f 2f6c  able": "http://l
-00002f80: 6f63 616c 2e63 7275 6e63 682e 696f 3a38  ocal.crunch.io:8
-00002f90: 3038 302f 6170 692f 6461 7461 7365 7473  080/api/datasets
-00002fa0: 2f35 3334 3334 6161 6536 3138 3634 3831  /53434aae6186481
-00002fb0: 3361 6262 3261 3733 3665 3365 3434 6363  3abb2a736e3e44cc
-00002fc0: 622f 7661 7269 6162 6c65 732f 3030 3030  b/variables/0000
-00002fd0: 3030 2f22 0020 2020 2020 207b 0020 2020  00/".      {.   
-00002fe0: 2022 6469 6d65 6e73 696f 6e73 223a 205b   "dimensions": [
-00002ff0: 0020 2022 7175 6572 7922 3a20 7b00 7b00  .  "query": {.{.
-00003000: 6164 0000 740c 0000 440d 0000 0010 0000  ad..t...D.......
-00003010: 2d00 0000 0000 0000 f30f 0000 e60f 0000  -...............
-00003020: d90f 0000 cc0f 0000 bf0f 0000 b20f 0000  ................
-00003030: a50f 0000 980f 0000 8b0f 0000 7e0f 0000  ............~...
-00003040: 710f 0000 640f 0000 570f 0000 4a0f 0000  q...d...W...J...
-00003050: 3d0f 0000 300f 0000 230f 0000 160f 0000  =...0...#.......
-00003060: 090f 0000 fc0e 0000 ef0e 0000 e20e 0000  ................
-00003070: d50e 0000 c80e 0000 bc0e 0000 b10e 0000  ................
-00003080: 9b0e 0000 800e 0000 640e 0000 500e 0000  ........d...P...
-00003090: 300e 0000 130e 0000 f20d 0000 d60d 0000  0...............
-000030a0: c70d 0000 a70d 0000 9b0d 0000 900d 0000  ................
-000030b0: 790d 0000 710d 0000 6a0d 0000 580d 0000  y...q...j...X...
-000030c0: 4a0d 0000 460d 0000 440d 0000 430d 0000  J...F...D...C...
-000030d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d40: 0000 0000 7d00 2020 7d00 2020 2020 226e  ....}.  }.    "n
-00003d50: 223a 2031 3030 3000 2020 2020 226d 6973  ": 1000.    "mis
-00003d60: 7369 6e67 223a 2033 2c00 2020 2020 7d2c  sing": 3,.    },
-00003d70: 0020 2020 2020 207d 0020 2020 2020 2020  .      }.       
-00003d80: 2022 6e5f 6d69 7373 696e 6722 3a20 3300   "n_missing": 3.
-00003d90: 2020 2020 2020 2020 7d2c 0020 2020 2020          },.     
-00003da0: 2020 2020 207d 0020 2020 2020 2020 2020       }.         
-00003db0: 2020 2022 6d69 7373 696e 675f 7275 6c65     "missing_rule
-00003dc0: 7322 3a20 7b7d 0020 2020 2020 2020 2020  s": {}.         
-00003dd0: 2020 207d 2c00 2020 2020 2020 2020 2020     },.          
-00003de0: 2020 2020 224e 6f20 4461 7461 223a 202d      "No Data": -
-00003df0: 3100 2020 2020 2020 2020 2020 2020 226d  1.            "m
-00003e00: 6973 7369 6e67 5f72 6561 736f 6e73 223a  issing_reasons":
-00003e10: 207b 0020 2020 2020 2020 2020 2020 2022   {.            "
-00003e20: 696e 7465 6765 7222 3a20 7472 7565 2c00  integer": true,.
-00003e30: 2020 2020 2020 2020 2020 2020 2263 6c61              "cla
-00003e40: 7373 223a 2022 6e75 6d65 7269 6322 2c00  ss": "numeric",.
-00003e50: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
-00003e60: 3a20 7b00 2020 2020 2020 2020 2020 2272  : {.          "r
-00003e70: 6566 6572 656e 6365 7322 3a20 7b7d 2c00  eferences": {},.
-00003e80: 2020 2020 2020 2020 2020 2264 6572 6976            "deriv
-00003e90: 6564 223a 2074 7275 652c 0020 2020 2020  ed": true,.     
-00003ea0: 2020 2022 6d65 7461 6461 7461 223a 207b     "metadata": {
-00003eb0: 0020 2020 2020 2020 205d 2c00 2020 2020  .        ],.    
-00003ec0: 2020 2020 2020 3000 2020 2020 2020 2020        0.        
-00003ed0: 2020 302c 0020 2020 2020 2020 2020 2030    0,.          0
-00003ee0: 2c00 2020 2020 2020 2020 2020 302c 0020  ,.          0,. 
-00003ef0: 2020 2020 2020 2020 2030 2c00 2020 2020           0,.    
-00003f00: 2020 2020 2020 302c 0020 2020 2020 2020        0,.       
-00003f10: 2020 2030 2c00 2020 2020 2020 2020 2020     0,.          
-00003f20: 302c 0020 2020 2020 2020 2020 2030 2c00  0,.          0,.
-00003f30: 2020 2020 2020 2020 2020 302c 0020 2020            0,.   
-00003f40: 2020 2020 2020 2030 2c00 2020 2020 2020         0,.      
-00003f50: 2020 2020 302c 0020 2020 2020 2020 2020      0,.         
-00003f60: 2030 2c00 2020 2020 2020 2020 2020 302c   0,.          0,
-00003f70: 0020 2020 2020 2020 2020 2030 2c00 2020  .          0,.  
-00003f80: 2020 2020 2020 2020 302c 0020 2020 2020          0,.     
-00003f90: 2020 2020 2030 2c00 2020 2020 2020 2020       0,.        
-00003fa0: 2020 302c 0020 2020 2020 2020 2020 2030    0,.          0
-00003fb0: 2c00 2020 2020 2020 2020 2020 302c 0020  ,.          0,. 
-00003fc0: 2020 2020 2020 2020 2030 2c00 2020 2020           0,.    
-00003fd0: 2020 2020 2020 302c 0020 2020 2020 2020        0,.       
-00003fe0: 2020 2030 2c00 2020 2020 2020 2020 2020     0,.          
-00003ff0: 322c 0020 2020 2020 2020 2020 2031 2c00  2,.          1,.
+00002850: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00002860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002870: 2020 2020 2261 6c69 6173 223a 2022 776f      "alias": "wo
+00002880: 6d62 6174 222c 0a20 2020 2020 2020 2020  mbat",.         
+00002890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000028a0: 2020 2020 2020 2022 6465 7363 7269 7074         "descript
+000028b0: 696f 6e22 3a20 2277 6f6d 6261 7422 2c0a  ion": "wombat",.
+000028c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000028d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000028e0: 226e 616d 6522 3a20 2277 6f6d 6261 7422  "name": "wombat"
+000028f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002900: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00002910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002920: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+00002930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002940: 2020 2275 6e69 666f 726d 5f62 6173 6973    "uniform_basis
+00002950: 223a 2066 616c 7365 0a20 2020 2020 2020  ": false.       
+00002960: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00002970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002980: 2020 2020 2274 7970 6522 3a20 7b0a 2020      "type": {.  
+00002990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029a0: 2020 2020 2020 2263 6c61 7373 223a 2022        "class": "
+000029b0: 656e 756d 222c 0a20 2020 2020 2020 2020  enum",.         
+000029c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000029d0: 656c 656d 656e 7473 223a 205b 0a20 2020  elements": [.   
+000029e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029f0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00002a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a10: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
+00002a20: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
+00002a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a40: 2020 2020 226d 6973 7369 6e67 223a 2066      "missing": f
+00002a50: 616c 7365 2c0a 2020 2020 2020 2020 2020  alse,.          
+00002a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a70: 2020 2020 2020 2276 616c 7565 223a 207b        "value": {
+00002a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002aa0: 2020 2020 2022 6465 7269 7665 6422 3a20       "derived": 
+00002ab0: 6661 6c73 652c 0a20 2020 2020 2020 2020  false,.         
+00002ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ad0: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
+00002ae0: 2022 3030 3030 222c 0a20 2020 2020 2020   "0000",.       
+00002af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b00: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+00002b10: 6665 7265 6e63 6573 223a 207b 0a20 2020  ferences": {.   
+00002b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b40: 2020 2020 2022 616c 6961 7322 3a20 2264       "alias": "d
+00002b50: 6f67 222c 0a20 2020 2020 2020 2020 2020  og",.           
+00002b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b70: 2020 2020 2020 2020 2020 2020 2022 6465               "de
+00002b80: 7363 7269 7074 696f 6e22 3a20 2264 6f67  scription": "dog
+00002b90: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00002ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bb0: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
+00002bc0: 223a 2022 646f 6722 0a20 2020 2020 2020  ": "dog".       
+00002bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002be0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00002bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c00: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00002c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002c20: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00002c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c40: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00002c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c60: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00002c70: 6422 3a20 322c 0a20 2020 2020 2020 2020  d": 2,.         
+00002c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c90: 2020 2020 2020 2022 6d69 7373 696e 6722         "missing"
+00002ca0: 3a20 6661 6c73 652c 0a20 2020 2020 2020  : false,.       
+00002cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cc0: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+00002cd0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+00002ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cf0: 2020 2020 2020 2020 2264 6572 6976 6564          "derived
+00002d00: 223a 2066 616c 7365 2c0a 2020 2020 2020  ": false,.      
+00002d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d20: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00002d30: 6422 3a20 2230 3030 3122 2c0a 2020 2020  d": "0001",.    
+00002d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d60: 2272 6566 6572 656e 6365 7322 3a20 7b0a  "references": {.
+00002d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d90: 2020 2020 2020 2020 2261 6c69 6173 223a          "alias":
+00002da0: 2022 6361 7422 2c0a 2020 2020 2020 2020   "cat",.        
+00002db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002dd0: 2264 6573 6372 6970 7469 6f6e 223a 2022  "description": "
+00002de0: 6361 7422 2c0a 2020 2020 2020 2020 2020  cat",.          
+00002df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e00: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+00002e10: 616d 6522 3a20 2263 6174 220a 2020 2020  ame": "cat".    
+00002e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e40: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00002e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e60: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00002e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e80: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00002e90: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00002ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ec0: 2022 6964 223a 2033 2c0a 2020 2020 2020   "id": 3,.      
+00002ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ee0: 2020 2020 2020 2020 2020 226d 6973 7369            "missi
+00002ef0: 6e67 223a 2066 616c 7365 2c0a 2020 2020  ng": false,.    
+00002f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f10: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+00002f20: 7565 223a 207b 0a20 2020 2020 2020 2020  ue": {.         
+00002f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f40: 2020 2020 2020 2020 2020 2022 6465 7269             "deri
+00002f50: 7665 6422 3a20 6661 6c73 652c 0a20 2020  ved": false,.   
+00002f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f80: 2022 6964 223a 2022 3030 3032 222c 0a20   "id": "0002",. 
+00002f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fb0: 2020 2022 7265 6665 7265 6e63 6573 223a     "references":
+00002fc0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00002fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fe0: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
+00002ff0: 7322 3a20 2277 6f6d 6261 7422 2c0a 2020  s": "wombat",.  
+00003000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003020: 2020 2020 2020 2264 6573 6372 6970 7469        "descripti
+00003030: 6f6e 223a 2022 776f 6d62 6174 222c 0a20  on": "wombat",. 
+00003040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003060: 2020 2020 2020 2022 6e61 6d65 223a 2022         "name": "
+00003070: 776f 6d62 6174 220a 2020 2020 2020 2020  wombat".        
+00003080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003090: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+000030a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030b0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+000030c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030d0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+000030e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030f0: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+00003100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003110: 2022 7375 6274 7970 6522 3a20 7b0a 2020   "subtype": {.  
+00003120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003130: 2020 2020 2020 2020 2020 2263 6c61 7373            "class
+00003140: 223a 2022 7661 7269 6162 6c65 220a 2020  ": "variable".  
+00003150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003160: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00003170: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00003180: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+00003190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000031a0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000031b0: 2020 2020 2020 2022 6465 7269 7665 6422         "derived"
+000031c0: 3a20 7472 7565 2c0a 2020 2020 2020 2020  : true,.        
+000031d0: 2020 2020 2020 2020 2020 2020 2272 6566              "ref
+000031e0: 6572 656e 6365 7322 3a20 7b0a 2020 2020  erences": {.    
+000031f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003200: 2020 2020 2261 6c69 6173 223a 2022 7065      "alias": "pe
+00003210: 7473 222c 0a20 2020 2020 2020 2020 2020  ts",.           
+00003220: 2020 2020 2020 2020 2020 2020 2022 6465               "de
+00003230: 7363 7269 7074 696f 6e22 3a20 6e75 6c6c  scription": null
+00003240: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003250: 2020 2020 2020 2020 2020 2269 735f 6469            "is_di
+00003260: 6368 6f74 6f6d 6f75 7322 3a20 7472 7565  chotomous": true
+00003270: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003280: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
+00003290: 3a20 2270 6574 7322 2c0a 2020 2020 2020  : "pets",.      
+000032a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032b0: 2020 2273 7562 7265 6665 7265 6e63 6573    "subreferences
+000032c0: 223a 205b 0a20 2020 2020 2020 2020 2020  ": [.           
+000032d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032e0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000032f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003300: 2020 2022 616c 6961 7322 3a20 2264 6f67     "alias": "dog
+00003310: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00003320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003330: 2020 2022 6465 7363 7269 7074 696f 6e22     "description"
+00003340: 3a20 2264 6f67 222c 0a20 2020 2020 2020  : "dog",.       
+00003350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003360: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+00003370: 2022 646f 6722 0a20 2020 2020 2020 2020   "dog".         
+00003380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003390: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+000033a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033b0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+000033c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033d0: 2020 2020 2261 6c69 6173 223a 2022 6361      "alias": "ca
+000033e0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+000033f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003400: 2020 2020 2264 6573 6372 6970 7469 6f6e      "description
+00003410: 223a 2022 6361 7422 2c0a 2020 2020 2020  ": "cat",.      
+00003420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003430: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
+00003440: 3a20 2263 6174 220a 2020 2020 2020 2020  : "cat".        
+00003450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003460: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00003470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003480: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+00003490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000034a0: 2020 2020 2022 616c 6961 7322 3a20 2277       "alias": "w
+000034b0: 6f6d 6261 7422 2c0a 2020 2020 2020 2020  ombat",.        
+000034c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000034d0: 2020 2020 2020 2020 2264 6573 6372 6970          "descrip
+000034e0: 7469 6f6e 223a 2022 776f 6d62 6174 222c  tion": "wombat",
+000034f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003510: 2022 6e61 6d65 223a 2022 776f 6d62 6174   "name": "wombat
+00003520: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00003530: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00003540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003550: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+00003560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003570: 2020 2022 756e 6966 6f72 6d5f 6261 7369     "uniform_basi
+00003580: 7322 3a20 6661 6c73 650a 2020 2020 2020  s": false.      
+00003590: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+000035a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000035b0: 2020 2020 2022 7479 7065 223a 207b 0a20       "type": {. 
+000035c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000035d0: 2020 2020 2020 2022 6361 7465 676f 7269         "categori
+000035e0: 6573 223a 205b 0a20 2020 2020 2020 2020  es": [.         
+000035f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003600: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+00003610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003620: 2020 2020 2022 6964 223a 2031 2c0a 2020       "id": 1,.  
+00003630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003640: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00003650: 6973 7369 6e67 223a 2066 616c 7365 2c0a  issing": false,.
+00003660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003680: 226e 616d 6522 3a20 2253 656c 6563 7465  "name": "Selecte
+00003690: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
+000036a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036b0: 2020 2020 226e 756d 6572 6963 5f76 616c      "numeric_val
+000036c0: 7565 223a 2031 2c0a 2020 2020 2020 2020  ue": 1,.        
+000036d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036e0: 2020 2020 2020 2020 2273 656c 6563 7465          "selecte
+000036f0: 6422 3a20 7472 7565 0a20 2020 2020 2020  d": true.       
+00003700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003710: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00003720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003730: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00003740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003750: 2020 2020 2020 2269 6422 3a20 302c 0a20        "id": 0,. 
+00003760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003770: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00003780: 6d69 7373 696e 6722 3a20 6661 6c73 652c  missing": false,
+00003790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000037a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037b0: 2022 6e61 6d65 223a 2022 4e6f 7420 5365   "name": "Not Se
+000037c0: 6c65 6374 6564 222c 0a20 2020 2020 2020  lected",.       
+000037d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037e0: 2020 2020 2020 2020 2022 6e75 6d65 7269           "numeri
+000037f0: 635f 7661 6c75 6522 3a20 300a 2020 2020  c_value": 0.    
+00003800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003810: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00003820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003830: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00003840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003850: 2020 2020 2020 2020 2022 6964 223a 202d           "id": -
+00003860: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
+00003870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003880: 2020 2022 6d69 7373 696e 6722 3a20 7472     "missing": tr
+00003890: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+000038a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000038b0: 2020 2020 226e 616d 6522 3a20 224e 6f20      "name": "No 
+000038c0: 4461 7461 222c 0a20 2020 2020 2020 2020  Data",.         
+000038d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000038e0: 2020 2020 2020 2022 6e75 6d65 7269 635f         "numeric_
+000038f0: 7661 6c75 6522 3a20 6e75 6c6c 0a20 2020  value": null.   
+00003900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003910: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00003920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003930: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00003940: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00003950: 6c61 7373 223a 2022 6361 7465 676f 7269  lass": "categori
+00003960: 6361 6c22 2c0a 2020 2020 2020 2020 2020  cal",.          
+00003970: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00003980: 7264 696e 616c 223a 2066 616c 7365 2c0a  rdinal": false,.
+00003990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000039a0: 2020 2020 2020 2020 2273 7562 7661 7269          "subvari
+000039b0: 6162 6c65 7322 3a20 5b0a 2020 2020 2020  ables": [.      
+000039c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000039d0: 2020 2020 2020 2230 3030 3022 2c0a 2020        "0000",.  
+000039e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000039f0: 2020 2020 2020 2020 2020 2230 3030 3122            "0001"
+00003a00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003a10: 2020 2020 2020 2020 2020 2020 2020 2230                "0
+00003a20: 3030 3222 0a20 2020 2020 2020 2020 2020  002".           
+00003a30: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
+00003a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003a50: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00003a60: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00003a70: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00003a80: 2020 2265 6c65 6d65 6e74 223a 2022 6372    "element": "cr
+00003a90: 756e 6368 3a63 7562 6522 2c0a 2020 2020  unch:cube",.    
+00003aa0: 2020 2020 2020 2020 2266 696c 7465 7265          "filtere
+00003ab0: 6422 3a20 7b0a 2020 2020 2020 2020 2020  d": {.          
+00003ac0: 2020 2020 2020 2275 6e77 6569 6768 7465        "unweighte
+00003ad0: 645f 6e22 3a20 3130 302c 0a20 2020 2020  d_n": 100,.     
+00003ae0: 2020 2020 2020 2020 2020 2022 7765 6967             "weig
+00003af0: 6874 6564 5f6e 223a 2031 3030 0a20 2020  hted_n": 100.   
+00003b00: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00003b10: 2020 2020 2020 2020 226d 6561 7375 7265          "measure
+00003b20: 7322 3a20 7b0a 2020 2020 2020 2020 2020  s": {.          
+00003b30: 2020 2020 2020 2263 6f75 6e74 223a 207b        "count": {
+00003b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003b50: 2020 2020 2022 6461 7461 223a 205b 0a20       "data": [. 
+00003b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b70: 2020 2020 2020 2034 302e 3937 3639 3333         40.976933
+00003b80: 3531 3432 3436 392c 0a20 2020 2020 2020  5142469,.       
+00003b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ba0: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00003bb0: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
+00003bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003bd0: 2020 2020 2020 2031 342e 3530 3437 3438         14.504748
+00003be0: 3938 3233 3630 392c 0a20 2020 2020 2020  9823609,.       
+00003bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c00: 2032 302e 3438 3834 3636 3735 3731 3233   20.488466757123
+00003c10: 352c 0a20 2020 2020 2020 2020 2020 2020  5,.             
+00003c20: 2020 2020 2020 2020 2020 2035 2e39 3833             5.983
+00003c30: 3731 3737 3734 3736 3235 352c 0a20 2020  71777476255,.   
+00003c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c50: 2020 2020 2031 372e 3935 3131 3533 3332       17.95115332
+00003c60: 3432 3837 362c 0a20 2020 2020 2020 2020  42876,.         
+00003c70: 2020 2020 2020 2020 2020 2020 2020 2031                 1
+00003c80: 372e 3034 3230 3632 3431 3531 3936 372c  7.0420624151967,
+00003c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003ca0: 2020 2020 2020 2020 2035 2e39 3833 3731           5.98371
+00003cb0: 3737 3734 3736 3235 352c 0a20 2020 2020  777476255,.     
+00003cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003cd0: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+00003ce0: 2020 2020 2020 2020 2020 2020 2020 3337                37
+00003cf0: 2e37 3230 3438 3834 3636 3735 3731 2c0a  .7204884667571,.
+00003d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d10: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00003d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d30: 2020 2031 342e 3134 3531 3833 3137 3530     14.1451831750
+00003d40: 3333 392c 0a20 2020 2020 2020 2020 2020  339,.           
+00003d50: 2020 2020 2020 2020 2020 2020 2032 302e               20.
+00003d60: 3934 3330 3132 3231 3136 3638 392c 0a20  9430122116689,. 
+00003d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d80: 2020 2020 2020 2032 2e36 3332 3239 3330         2.6322930
+00003d90: 3830 3035 3432 372c 0a20 2020 2020 2020  8005427,.       
+00003da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003db0: 2032 302e 3438 3834 3636 3735 3731 3233   20.488466757123
+00003dc0: 352c 0a20 2020 2020 2020 2020 2020 2020  5,.             
+00003dd0: 2020 2020 2020 2020 2020 2031 342e 3539             14.59
+00003de0: 3937 3238 3632 3935 3739 342c 0a20 2020  97286295794,.   
+00003df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e00: 2020 2020 2032 2e36 3332 3239 3330 3830       2.632293080
+00003e10: 3035 3432 372c 0a20 2020 2020 2020 2020  05427,.         
+00003e20: 2020 2020 2020 2020 2020 2020 2020 2030                 0
+00003e30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003e40: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
+00003e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e60: 2020 2020 2032 312e 3330 3235 3738 3031       21.30257801
+00003e70: 3839 3935 392c 0a20 2020 2020 2020 2020  89959,.         
+00003e80: 2020 2020 2020 2020 2020 2020 2020 2034                 4
+00003e90: 2e37 3135 3036 3130 3538 3334 3436 342c  .71506105834464,
+00003ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003eb0: 2020 2020 2020 2020 2035 2e30 3734 3632           5.07462
+00003ec0: 3638 3635 3637 3136 342c 0a20 2020 2020  686567164,.     
+00003ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ee0: 2020 2031 312e 3531 3238 3930 3039 3439     11.5128900949
+00003ef0: 3739 362c 0a20 2020 2020 2020 2020 2020  796,.           
+00003f00: 2020 2020 2020 2020 2020 2020 2030 2c0a               0,.
+00003f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f20: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00003f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f40: 2020 2032 312e 3330 3235 3738 3031 3839     21.3025780189
+00003f50: 3935 392c 0a20 2020 2020 2020 2020 2020  959,.           
+00003f60: 2020 2020 2020 2020 2020 2020 2031 342e               14.
+00003f70: 3530 3437 3438 3938 3233 3630 392c 0a20  5047489823609,. 
+00003f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f90: 2020 2020 2020 2031 342e 3134 3531 3833         14.145183
+00003fa0: 3137 3530 3333 392c 0a20 2020 2020 2020  1750339,.       
+00003fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003fc0: 2034 2e37 3135 3036 3130 3538 3334 3436   4.7150610583446
+00003fd0: 342c 0a20 2020 2020 2020 2020 2020 2020  4,.             
+00003fe0: 2020 2020 2020 2020 2020 2033 332e 3336             33.36
+00003ff0: 3439 3933 3231 3537 3339 352c 0a20 2020  49932157395,.   
+00004000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004010: 2020 2020 2030 2c0a 2020 2020 2020 2020       0,.        
+00004020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004030: 302c 0a20 2020 2020 2020 2020 2020 2020  0,.             
+00004040: 2020 2020 2020 2020 2020 2031 352e 3431             15.41
+00004050: 3338 3339 3839 3134 3531 382c 0a20 2020  38398914518,.   
+00004060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004070: 2020 2020 2031 332e 3233 3630 3932 3236       13.23609226
+00004080: 3539 3433 2c0a 2020 2020 2020 2020 2020  5943,.          
+00004090: 2020 2020 2020 2020 2020 2020 2020 342e                4.
+000040a0: 3731 3530 3631 3035 3833 3434 3634 2c0a  71506105834464,.
+000040b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000040c0: 2020 2020 2020 2020 3230 2e34 3838 3436          20.48846
+000040d0: 3637 3537 3132 3335 2c0a 2020 2020 2020  67571235,.      
+000040e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000040f0: 2020 3230 2e39 3433 3031 3232 3131 3636    20.94301221166
+00004100: 3839 2c0a 2020 2020 2020 2020 2020 2020  89,.            
+00004110: 2020 2020 2020 2020 2020 2020 352e 3037              5.07
+00004120: 3436 3236 3836 3536 3731 3634 2c0a 2020  462686567164,.  
+00004130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004140: 2020 2020 2020 302c 0a20 2020 2020 2020        0,.       
+00004150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004160: 2034 362e 3530 3631 3035 3833 3434 3634   46.506105834464
+00004170: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004180: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
+00004190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000041a0: 2020 2020 2032 332e 3032 3537 3830 3138       23.02578018
+000041b0: 3939 3539 332c 0a20 2020 2020 2020 2020  99593,.         
+000041c0: 2020 2020 2020 2020 2020 2020 2020 2031                 1
+000041d0: 382e 3430 3536 3938 3737 3838 3333 312c  8.4056987788331,
+000041e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000041f0: 2020 2020 2020 2020 2035 2e30 3734 3632           5.07462
+00004200: 3638 3635 3637 3136 342c 0a20 2020 2020  686567164,.     
+00004210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004220: 2020 2035 2e39 3833 3731 3737 3734 3736     5.98371777476
+00004230: 3235 352c 0a20 2020 2020 2020 2020 2020  255,.           
+00004240: 2020 2020 2020 2020 2020 2020 2032 2e36               2.6
+00004250: 3332 3239 3330 3830 3035 3432 372c 0a20  3229308005427,. 
+00004260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004270: 2020 2020 2020 2031 312e 3531 3238 3930         11.512890
+00004280: 3039 3439 3739 362c 0a20 2020 2020 2020  0949796,.       
+00004290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000042a0: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+000042b0: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
+000042c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000042d0: 2020 2020 2020 2032 302e 3132 3839 3030         20.128900
+000042e0: 3934 3937 3936 352c 0a20 2020 2020 2020  9497965,.       
+000042f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004300: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00004310: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
+00004320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004330: 2020 2020 2020 2032 302e 3132 3839 3030         20.128900
+00004340: 3934 3937 3936 352c 0a20 2020 2020 2020  9497965,.       
+00004350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004360: 2031 372e 3935 3131 3533 3332 3432 3837   17.951153324287
+00004370: 362c 0a20 2020 2020 2020 2020 2020 2020  6,.             
+00004380: 2020 2020 2020 2020 2020 2032 302e 3438             20.48
+00004390: 3834 3636 3735 3731 3233 352c 0a20 2020  84667571235,.   
+000043a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000043b0: 2020 2020 2030 2c0a 2020 2020 2020 2020       0,.        
+000043c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000043d0: 3135 2e34 3133 3833 3938 3931 3435 3138  15.4138398914518
+000043e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000043f0: 2020 2020 2020 2020 2020 3233 2e30 3235            23.025
+00004400: 3738 3031 3839 3935 3933 2c0a 2020 2020  7801899593,.    
+00004410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004420: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00004430: 2020 2020 2020 2020 2020 2020 2020 2033                 3
+00004440: 382e 3433 3936 3230 3038 3134 3131 312c  8.4396200814111,
+00004450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004460: 2020 2020 2020 2020 2030 2c0a 2020 2020           0,.    
+00004470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004480: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00004490: 2020 2020 2020 2020 2020 2020 2020 2031                 1
+000044a0: 372e 3034 3230 3632 3431 3531 3936 372c  7.0420624151967,
+000044b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000044c0: 2020 2020 2020 2020 2031 342e 3539 3937           14.5997
+000044d0: 3238 3632 3935 3739 342c 0a20 2020 2020  286295794,.     
+000044e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000044f0: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+00004500: 2020 2020 2020 2020 2020 2020 2020 3133                13
+00004510: 2e32 3336 3039 3232 3635 3934 332c 0a20  .236092265943,. 
+00004520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004530: 2020 2020 2020 2031 382e 3430 3536 3938         18.405698
+00004540: 3737 3838 3333 312c 0a20 2020 2020 2020  7788331,.       
+00004550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004560: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00004570: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
+00004580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004590: 2020 2020 2020 2033 312e 3634 3137 3931         31.641791
+000045a0: 3034 3437 3736 312c 0a20 2020 2020 2020  0447761,.       
+000045b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045c0: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+000045d0: 2020 2020 2020 2020 2020 2020 352e 3938              5.98
+000045e0: 3337 3137 3737 3437 3632 3535 2c0a 2020  371777476255,.  
+000045f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004600: 2020 2020 2020 322e 3633 3232 3933 3038        2.63229308
+00004610: 3030 3534 3237 2c0a 2020 2020 2020 2020  005427,.        
+00004620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004630: 3231 2e33 3032 3537 3830 3138 3939 3539  21.3025780189959
+00004640: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004650: 2020 2020 2020 2020 2020 342e 3731 3530            4.7150
+00004660: 3631 3035 3833 3434 3634 2c0a 2020 2020  6105834464,.    
+00004670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004680: 2020 2020 352e 3037 3436 3236 3836 3536      5.0746268656
+00004690: 3731 3634 2c0a 2020 2020 2020 2020 2020  7164,.          
+000046a0: 2020 2020 2020 2020 2020 2020 2020 3230                20
+000046b0: 2e31 3238 3930 3039 3439 3739 3635 2c0a  .1289009497965,.
+000046c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046d0: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+000046e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046f0: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+00004700: 2020 2020 2020 2020 2020 2020 2020 3239                29
+00004710: 2e39 3138 3538 3838 3733 3831 3238 0a20  .9185888738128. 
+00004720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004730: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00004740: 2020 2020 2020 2020 2020 226d 6574 6164            "metad
+00004750: 6174 6122 3a20 7b0a 2020 2020 2020 2020  ata": {.        
+00004760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004770: 2264 6572 6976 6564 223a 2074 7275 652c  "derived": true,
+00004780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004790: 2020 2020 2020 2020 2022 7265 6665 7265           "refere
+000047a0: 6e63 6573 223a 207b 0a0a 2020 2020 2020  nces": {..      
+000047b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000047c0: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
+000047d0: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
+000047e0: 7065 223a 207b 0a20 2020 2020 2020 2020  pe": {.         
+000047f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004800: 2020 2022 636c 6173 7322 3a20 226e 756d     "class": "num
+00004810: 6572 6963 222c 0a20 2020 2020 2020 2020  eric",.         
+00004820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004830: 2020 2022 696e 7465 6765 7222 3a20 6661     "integer": fa
+00004840: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+00004850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004860: 2022 6d69 7373 696e 675f 7265 6173 6f6e   "missing_reason
+00004870: 7322 3a20 7b0a 2020 2020 2020 2020 2020  s": {.          
+00004880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004890: 2020 2020 2020 224e 6f20 4461 7461 223a        "No Data":
+000048a0: 202d 310a 2020 2020 2020 2020 2020 2020   -1.            
+000048b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000048c0: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+000048d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000048e0: 6d69 7373 696e 675f 7275 6c65 7322 3a20  missing_rules": 
+000048f0: 7b0a 0a20 2020 2020 2020 2020 2020 2020  {..             
+00004900: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00004910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004920: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00004930: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00004940: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004950: 2020 2020 2020 226e 5f6d 6973 7369 6e67        "n_missing
+00004960: 223a 2031 310a 2020 2020 2020 2020 2020  ": 11.          
+00004970: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00004980: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00004990: 2020 2022 6d69 7373 696e 6722 3a20 3131     "missing": 11
+000049a0: 2c0a 2020 2020 2020 2020 2020 2020 226e  ,.            "n
+000049b0: 223a 2031 3030 2c0a 2020 2020 2020 2020  ": 100,.        
+000049c0: 2020 2020 2275 6e66 696c 7465 7265 6422      "unfiltered"
+000049d0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+000049e0: 2020 2020 2275 6e77 6569 6768 7465 645f      "unweighted_
+000049f0: 6e22 3a20 3130 302c 0a20 2020 2020 2020  n": 100,.       
+00004a00: 2020 2020 2020 2020 2022 7765 6967 6874           "weight
+00004a10: 6564 5f6e 223a 2031 3030 0a20 2020 2020  ed_n": 100.     
+00004a20: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00004a30: 207d 0a20 2020 207d 0a7d 0a               }.    }.}.
```

### Comparing `cr.cube-3.0.8/tests/fixtures/__init__.py` & `cr.cube-3.0.9/tests/fixtures/__init__.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/admit-x-dept-unweighted.json` & `cr.cube-3.0.9/tests/fixtures/admit-x-dept-unweighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/admit-x-gender-weighted.json` & `cr.cube-3.0.9/tests/fixtures/admit-x-gender-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/age-x-accrpipe.json` & `cr.cube-3.0.9/tests/fixtures/age-x-accrpipe.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-as-0th.json` & `cr.cube-3.0.9/tests/fixtures/ca-as-0th.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-cat-x-ca-subvar.json` & `cr.cube-3.0.9/tests/fixtures/ca-cat-x-ca-subvar.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-cat-x-mr-x-ca-subvar-hs.json` & `cr.cube-3.0.9/tests/fixtures/ca-cat-x-mr-x-ca-subvar-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-food-groups-x-shape-of-pasta-with-insertions.json` & `cr.cube-3.0.9/tests/fixtures/ca-food-groups-x-shape-of-pasta-with-insertions.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-items-x-ca-cat-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/ca-items-x-ca-cat-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-single-cat.json` & `cr.cube-3.0.9/tests/fixtures/ca-single-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subdiff.json` & `cr.cube-3.0.9/tests/fixtures/ca-subdiff.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-hs-x-mr-x-ca-cat.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-hs-x-mr-x-ca-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-hs-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-hs-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-empties.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-empties.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-subvar-x-ca-cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/ca-subvar-x-ca-cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-with-nets.json` & `cr.cube-3.0.9/tests/fixtures/ca-with-nets.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-mr-hs.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-mr-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-mr-sig-testing-subtotals.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-mr-sig-testing-subtotals.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-mr-weighted-hs.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-mr-weighted-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/ca-x-single-cat.json` & `cr.cube-3.0.9/tests/fixtures/ca-x-single-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-4-x-cat-4.json` & `cr.cube-3.0.9/tests/fixtures/cat-4-x-cat-4.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-4-x-cat-5.json` & `cr.cube-3.0.9/tests/fixtures/cat-4-x-cat-5.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-date-mean.json` & `cr.cube-3.0.9/tests/fixtures/cat-date-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-date-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/cat-date-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-date.json` & `cr.cube-3.0.9/tests/fixtures/cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-mt-x-cat-hs-mt.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-mt-x-cat-hs-mt.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-mt.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-mt.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-subdiff-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-subdiff-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-hs-empties.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-hs-empties.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-mr-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-mr-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-hs-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/cat-hs-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-mean.json` & `cr.cube-3.0.9/tests/fixtures/cat-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-means-and-counts.json` & `cr.cube-3.0.9/tests/fixtures/cat-means-and-counts.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-means-hs.json` & `cr.cube-3.0.9/tests/fixtures/cat-means-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-stddev.json` & `cr.cube-3.0.9/tests/fixtures/cat-stddev.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-subtot-order.json` & `cr.cube-3.0.9/tests/fixtures/cat-subtot-order.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-sum.json` & `cr.cube-3.0.9/tests/fixtures/cat-sum.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-all-missing-row-elements.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-all-missing-row-elements.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-date-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-date-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-filt-complete.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-filt-complete.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-filt.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-filt.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-german-weighted.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-german-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-2rows-1col.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-2rows-1col.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-missing.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-missing.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs-total-bottom.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs-total-bottom.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-mean-subtot.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-mean-subtot.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-mean-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-mean-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-weighted-ttests.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-weighted-ttests.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-with-empty-cols.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-with-empty-cols.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-x-cat-wgtd-no-query-weight.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-x-cat-wgtd-no-query-weight.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat-x-cat-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat-x-cat-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-date-hs-prune.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-date-hs-prune.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-datetime.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-datetime.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-items-x-cats-hs.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-items-x-cats-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-logical.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-logical.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-2.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-2.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-col.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-col.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-row-col.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-row-col.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-pruned-row.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-pruned-row.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-sentry.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-sentry.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-stddev.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-stddev.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-subvar-means.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-subvar-means.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-unicode-sv-alias.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-unicode-sv-alias.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-weighted-hs.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-weighted-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat-missing.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat-missing.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr-empty-cols.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr-empty-cols.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr-pruned-rows.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr-pruned-rows.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-num-hs-prune.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-num-hs-prune.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat-x-num-x-datetime.json` & `cr.cube-3.0.9/tests/fixtures/cat-x-num-x-datetime.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/cat.json` & `cr.cube-3.0.9/tests/fixtures/cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/countries-x-shapes-of-pasta.json` & `cr.cube-3.0.9/tests/fixtures/countries-x-shapes-of-pasta.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/date.json` & `cr.cube-3.0.9/tests/fixtures/date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/datetime-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/datetime-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/deck-with-mean.json` & `cr.cube-3.0.9/tests/fixtures/deck-with-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/direction-of-country-x-education-weighted.json` & `cr.cube-3.0.9/tests/fixtures/direction-of-country-x-education-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-blame-with-hs.json` & `cr.cube-3.0.9/tests/fixtures/econ-blame-with-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-col-hs.json` & `cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-col-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-row-and-col-hs.json` & `cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-row-and-col-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-blame-x-ideology-row-hs.json` & `cr.cube-3.0.9/tests/fixtures/econ-blame-x-ideology-row-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-gender-x-ideology-weighted.json` & `cr.cube-3.0.9/tests/fixtures/econ-gender-x-ideology-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-mean-age-blame-x-gender.json` & `cr.cube-3.0.9/tests/fixtures/econ-mean-age-blame-x-gender.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-mean-no-dims.json` & `cr.cube-3.0.9/tests/fixtures/econ-mean-no-dims.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-nodata-no-dims.json` & `cr.cube-3.0.9/tests/fixtures/econ-nodata-no-dims.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/econ-us-problem-x-bigger-problem.json` & `cr.cube-3.0.9/tests/fixtures/econ-us-problem-x-bigger-problem.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/edu-fav5.json` & `cr.cube-3.0.9/tests/fixtures/edu-fav5.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/food-groops-x-starttime-x-nordic-countries.json` & `cr.cube-3.0.9/tests/fixtures/food-groops-x-starttime-x-nordic-countries.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/food-group-x-shape-of-pasta-2rows-insertion.json` & `cr.cube-3.0.9/tests/fixtures/food-group-x-shape-of-pasta-2rows-insertion.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/food-group-x-shape-pasta-2rows1col-insertion.json` & `cr.cube-3.0.9/tests/fixtures/food-group-x-shape-pasta-2rows1col-insertion.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-hs-top-bottom.json` & `cr.cube-3.0.9/tests/fixtures/fruit-hs-top-bottom.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array-pets-first.json` & `cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array-pets-first.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array-subvars-first.json` & `cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array-subvars-first.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-x-pets-array.json` & `cr.cube-3.0.9/tests/fixtures/fruit-x-pets-array.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-x-pets-hs-top-bottom.json` & `cr.cube-3.0.9/tests/fixtures/fruit-x-pets-hs-top-bottom.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/fruit-x-pets.json` & `cr.cube-3.0.9/tests/fixtures/fruit-x-pets.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/full-cube.json` & `cr.cube-3.0.9/tests/fixtures/full-cube.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/gender-party-race.json` & `cr.cube-3.0.9/tests/fixtures/gender-party-race.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/gender-x-weight.json` & `cr.cube-3.0.9/tests/fixtures/gender-x-weight.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/huffpost-actions-x-household.json` & `cr.cube-3.0.9/tests/fixtures/huffpost-actions-x-household.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/letters-x-pets-hs.json` & `cr.cube-3.0.9/tests/fixtures/letters-x-pets-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/logical-univariate.json` & `cr.cube-3.0.9/tests/fixtures/logical-univariate.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mean-cat-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/mean-cat-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/means-3d.json` & `cr.cube-3.0.9/tests/fixtures/means-3d.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/means-cat-hs-x-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/means-cat-hs-x-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/means-cat-x-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/means-cat-x-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/means-cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/means-cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/means-mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/means-mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/missing-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/missing-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-1-x-mr-3.json` & `cr.cube-3.0.9/tests/fixtures/mr-1-x-mr-3.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-mean-filt-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/mr-mean-filt-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-mean-weighted.json` & `cr.cube-3.0.9/tests/fixtures/mr-mean-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-mean.json` & `cr.cube-3.0.9/tests/fixtures/mr-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-stddev.json` & `cr.cube-3.0.9/tests/fixtures/mr-stddev.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-sum.json` & `cr.cube-3.0.9/tests/fixtures/mr-sum.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-wgtd.json` & `cr.cube-3.0.9/tests/fixtures/mr-wgtd.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-ca-cat-x-ca-subvar.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-ca-cat-x-ca-subvar.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-ca-hs.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-ca-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-2.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-2.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-both-single-element.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-both-single-element.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-hs-mt.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-hs-mt.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-mean-weighted.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-mean-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-mean.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-not-so-simple-alltypes.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-not-so-simple-alltypes.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-profiles-stats-weighted.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-profiles-stats-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-col.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-col.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-row-col.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-row-col.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-pruned-row.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-pruned-row.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-with-means.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-with-means.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-x-mr-prune.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-x-mr-prune.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-2.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-2.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-index-table.json` & `cr.cube-3.0.9/tests/fixtures/pets-array-x-pets.json`

 * *Files 12% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8151954175212817%*

 * *Differences: {"'self'": "'https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/cube/?filter=%5B%5D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000a%2F%2 […]*

```diff
@@ -1,261 +1,252 @@
 {
     "element": "shoji:view",
-    "self": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/cube/?filter=%5B%5D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fd998523c126d497e92d4fe6f679b5f64%2Fvariables%2F00000a%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fd998523c126d497e92d4fe6f679b5f64%2Fvariables%2F00000a%2F%22%7D%5D%7D,%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fd998523c126d497e92d4fe6f679b5f64%2Fvariables%2F00000a%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fd998523c126d497e92d4fe6f679b5f64%2Fvariables%2F00000a%2F%22%7D%5D%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fd998523c126d497e92d4fe6f679b5f64%2Fvariables%2F05213176522140458efa4e369bf6a081%2F%22%7D",
+    "self": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/cube/?filter=%5B%5D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000a%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000a%2F%22%7D%5D%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2Fad87769e360441169923ca6e1864dcd7%2F%22%7D",
     "value": {
         "query": {
             "dimensions": [
                 {
-                    "each": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/variables/00000a/"
+                    "each": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000b/"
                 },
                 {
-                    "args": [
-                        {
-                            "variable": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/variables/00000a/"
-                        }
-                    ],
-                    "function": "as_selected"
+                    "variable": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000b/"
                 },
                 {
-                    "each": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/variables/00000a/"
+                    "each": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000a/"
                 },
                 {
                     "args": [
                         {
-                            "variable": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/variables/00000a/"
+                            "variable": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000a/"
                         }
                     ],
                     "function": "as_selected"
                 }
             ],
             "measures": {
                 "count": {
                     "args": [],
                     "function": "cube_count"
                 }
             },
-            "weight": "/api/datasets/d998523c126d497e92d4fe6f679b5f64/variables/05213176522140458efa4e369bf6a081/"
+            "weight": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/ad87769e360441169923ca6e1864dcd7/"
         },
         "query_environment": {
             "filter": []
         },
         "result": {
-            "__comment": "WARNING: filtered and unfiltered params have been manually added to this fixture and there is a high possibility they might be wrong, see ticket #160167172",
             "counts": [
-                40,
-                0,
-                0,
-                14,
                 20,
-                6,
-                18,
-                16,
-                6,
+                25,
                 0,
-                40,
                 0,
-                15,
-                21,
-                4,
-                20,
-                16,
-                4,
+                45,
                 0,
+                22,
+                23,
                 0,
+                14,
                 20,
-                5,
-                4,
-                11,
                 0,
-                0,
-                20,
-                14,
-                15,
-                5,
                 34,
                 0,
                 0,
                 16,
-                13,
-                5,
-                20,
-                21,
-                4,
-                0,
-                45,
+                18,
                 0,
-                22,
-                19,
-                4,
                 6,
                 4,
                 11,
                 0,
+                10,
+                11,
                 0,
-                21,
+                10,
+                11,
                 0,
+                40,
                 0,
-                21,
-                18,
+                15,
+                25,
+                0,
+                20,
                 20,
                 0,
-                16,
+                40,
+                0,
+                0,
+                14,
+                26,
+                0,
+                18,
                 22,
                 0,
-                38,
                 0,
+                9,
+                11,
+                5,
+                4,
+                11,
                 0,
+                9,
+                11,
                 16,
                 16,
                 0,
                 13,
                 19,
                 0,
                 0,
                 32,
                 0,
-                6,
-                4,
+                18,
                 20,
-                5,
-                4,
-                21,
                 0,
+                16,
+                22,
+                0,
+                38,
+                0,
+                0,
+                6,
+                13,
+                11,
+                5,
+                14,
+                11,
                 0,
-                30
+                19,
+                11
             ],
             "dimensions": [
                 {
                     "derived": true,
                     "references": {
-                        "alias": "pets",
-                        "description": null,
-                        "is_dichotomous": true,
-                        "name": "pets",
+                        "alias": "pets_array",
+                        "description": "Pets Array",
+                        "is_dichotomous": false,
+                        "name": "pets_array",
                         "subreferences": [
                             {
-                                "alias": "dog",
-                                "description": "dog",
-                                "name": "dog"
+                                "alias": "a_cat",
+                                "description": "a_cat",
+                                "name": "cat"
                             },
                             {
-                                "alias": "cat",
-                                "description": "cat",
-                                "name": "cat"
+                                "alias": "a_dog",
+                                "description": "a_dog",
+                                "name": "dog"
                             },
                             {
-                                "alias": "wombat",
-                                "description": "wombat",
+                                "alias": "a_wombat",
+                                "description": "a_wombat",
                                 "name": "wombat"
                             }
-                        ],
-                        "uniform_basis": false
+                        ]
                     },
                     "type": {
                         "class": "enum",
                         "elements": [
                             {
                                 "id": 1,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0000",
+                                    "id": "0003",
                                     "references": {
-                                        "alias": "dog",
-                                        "description": "dog",
-                                        "name": "dog"
+                                        "alias": "a_cat",
+                                        "description": "a_cat",
+                                        "name": "cat"
                                     }
                                 }
                             },
                             {
                                 "id": 2,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0001",
+                                    "id": "0004",
                                     "references": {
-                                        "alias": "cat",
-                                        "description": "cat",
-                                        "name": "cat"
+                                        "alias": "a_dog",
+                                        "description": "a_dog",
+                                        "name": "dog"
                                     }
                                 }
                             },
                             {
                                 "id": 3,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0002",
+                                    "id": "0005",
                                     "references": {
-                                        "alias": "wombat",
-                                        "description": "wombat",
+                                        "alias": "a_wombat",
+                                        "description": "a_wombat",
                                         "name": "wombat"
                                     }
                                 }
                             }
                         ],
                         "subtype": {
                             "class": "variable"
                         }
                     }
                 },
                 {
-                    "derived": true,
+                    "derived": false,
                     "references": {
-                        "alias": "pets",
-                        "description": null,
-                        "is_dichotomous": true,
-                        "name": "pets",
+                        "alias": "pets_array",
+                        "description": "Pets Array",
+                        "is_dichotomous": false,
+                        "name": "pets_array",
                         "subreferences": [
                             {
-                                "alias": "dog",
-                                "description": "dog",
-                                "name": "dog"
+                                "alias": "a_cat",
+                                "description": "a_cat",
+                                "name": "cat"
                             },
                             {
-                                "alias": "cat",
-                                "description": "cat",
-                                "name": "cat"
+                                "alias": "a_dog",
+                                "description": "a_dog",
+                                "name": "dog"
                             },
                             {
-                                "alias": "wombat",
-                                "description": "wombat",
+                                "alias": "a_wombat",
+                                "description": "a_wombat",
                                 "name": "wombat"
                             }
-                        ],
-                        "uniform_basis": false
+                        ]
                     },
                     "type": {
                         "categories": [
                             {
                                 "id": 1,
                                 "missing": false,
-                                "name": "Selected",
-                                "numeric_value": 1,
-                                "selected": true
+                                "name": "not selected",
+                                "numeric_value": 1
                             },
                             {
-                                "id": 0,
+                                "id": 2,
                                 "missing": false,
-                                "name": "Not Selected",
-                                "numeric_value": 0
+                                "name": "selected",
+                                "numeric_value": 2
                             },
                             {
                                 "id": -1,
                                 "missing": true,
                                 "name": "No Data",
                                 "numeric_value": null
                             }
                         ],
                         "class": "categorical",
                         "ordinal": false,
                         "subvariables": [
-                            "0000",
-                            "0001",
-                            "0002"
+                            "0003",
+                            "0004",
+                            "0005"
                         ]
                     }
                 },
                 {
                     "derived": true,
                     "references": {
                         "alias": "pets",
@@ -274,16 +265,15 @@
                                 "name": "cat"
                             },
                             {
                                 "alias": "wombat",
                                 "description": "wombat",
                                 "name": "wombat"
                             }
-                        ],
-                        "uniform_basis": false
+                        ]
                     },
                     "type": {
                         "class": "enum",
                         "elements": [
                             {
                                 "id": 1,
                                 "missing": false,
@@ -348,16 +338,15 @@
                                 "name": "cat"
                             },
                             {
                                 "alias": "wombat",
                                 "description": "wombat",
                                 "name": "wombat"
                             }
-                        ],
-                        "uniform_basis": false
+                        ]
                     },
                     "type": {
                         "categories": [
                             {
                                 "id": 1,
                                 "missing": false,
                                 "name": "Selected",
@@ -384,102 +373,98 @@
                             "0001",
                             "0002"
                         ]
                     }
                 }
             ],
             "element": "crunch:cube",
-            "filtered": {
-                "unweighted_n": 100,
-                "weighted_n": 100
-            },
             "measures": {
                 "count": {
                     "data": [
-                        40.9769335142469,
+                        19.5386702849389,
+                        24.0388964269561,
+                        0,
+                        0,
+                        43.5775667118951,
+                        0,
+                        21.0312075983718,
+                        22.5463591135233,
                         0,
+                        13.5232926277702,
+                        21.0764360018091,
                         0,
-                        14.5047489823609,
-                        20.4884667571235,
-                        5.98371777476255,
-                        17.9511533242876,
-                        17.0420624151967,
-                        5.98371777476255,
+                        34.5997286295794,
                         0,
-                        37.7204884667571,
                         0,
-                        14.1451831750339,
-                        20.9430122116689,
-                        2.63229308005427,
-                        20.4884667571235,
-                        14.5997286295794,
-                        2.63229308005427,
+                        16.5535956580733,
+                        18.0461329715061,
                         0,
+                        6.0153776571687,
+                        5.29172320217096,
+                        10.5156037991859,
                         0,
-                        21.3025780189959,
-                        4.71506105834464,
-                        5.07462686567164,
-                        11.5128900949796,
+                        11.3071008593397,
+                        10.5156037991859,
                         0,
+                        11.3071008593397,
+                        10.5156037991859,
                         0,
-                        21.3025780189959,
-                        14.5047489823609,
-                        14.1451831750339,
-                        4.71506105834464,
-                        33.3649932157395,
+                        42.1528720036183,
                         0,
+                        15.8073270013568,
+                        26.3455450022614,
                         0,
-                        15.4138398914518,
-                        13.236092265943,
-                        4.71506105834464,
-                        20.4884667571235,
-                        20.9430122116689,
-                        5.07462686567164,
+                        19.5386702849389,
+                        22.6142017186793,
                         0,
-                        46.506105834464,
+                        39.0773405698779,
                         0,
-                        23.0257801899593,
-                        18.4056987788331,
-                        5.07462686567164,
-                        5.98371777476255,
-                        2.63229308005427,
-                        11.5128900949796,
                         0,
+                        13.5232926277702,
+                        25.5540479421076,
                         0,
-                        20.1289009497965,
+                        18.0461329715061,
+                        21.0312075983718,
                         0,
                         0,
-                        20.1289009497965,
-                        17.9511533242876,
-                        20.4884667571235,
+                        8.25418362731796,
+                        10.5156037991859,
+                        5.26910900045228,
+                        2.98507462686567,
+                        10.5156037991859,
                         0,
-                        15.4138398914518,
-                        23.0257801899593,
+                        8.25418362731796,
+                        10.5156037991859,
+                        15.0158299412031,
+                        17.3224785165084,
                         0,
-                        38.4396200814111,
+                        12.7770239710538,
+                        19.5612844866576,
                         0,
                         0,
-                        17.0420624151967,
-                        14.5997286295794,
+                        32.3383084577114,
                         0,
-                        13.236092265943,
-                        18.4056987788331,
+                        18.0461329715061,
+                        19.5386702849389,
                         0,
+                        16.5535956580733,
+                        21.0312075983718,
                         0,
-                        31.6417910447761,
+                        37.584803256445,
                         0,
-                        5.98371777476255,
-                        2.63229308005427,
-                        21.3025780189959,
-                        4.71506105834464,
-                        5.07462686567164,
-                        20.1289009497965,
                         0,
+                        6.0153776571687,
+                        13.5459068294889,
+                        10.5156037991859,
+                        5.26910900045228,
+                        14.2921754862053,
+                        10.5156037991859,
                         0,
-                        29.9185888738128
+                        19.5612844866576,
+                        10.5156037991859
                     ],
                     "metadata": {
                         "derived": true,
                         "references": {},
                         "type": {
                             "class": "numeric",
                             "integer": false,
@@ -489,15 +474,11 @@
                             "missing_rules": {}
                         }
                     },
                     "n_missing": 11
                 }
             },
             "missing": 11,
-            "n": 100,
-            "unfiltered": {
-                "unweighted_n": 100,
-                "weighted_n": 100
-            }
+            "n": 100
         }
     }
 }
```

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-mean-weighted.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-mean-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-mean.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-mean.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-means.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-means.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-selected-categories.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-selected-categories.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-single-cat.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-single-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-sum.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-sum.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-with-pruning.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-with-pruning.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-other-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-other-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr-x-single-wave.json` & `cr.cube-3.0.9/tests/fixtures/mr-x-single-wave.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/cat-hs-top-btm.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/cat-hs-top-btm.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/mr-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/mr-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/scorecard.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/scorecard.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/mr_insertions/univariate-mr.json` & `cr.cube-3.0.9/tests/fixtures/mr_insertions/univariate-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/nssat-mr-x-3vl.json` & `cr.cube-3.0.9/tests/fixtures/nssat-mr-x-3vl.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/nssat-mr-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/nssat-mr-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/num-binned.json` & `cr.cube-3.0.9/tests/fixtures/num-binned.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/num-x-num-empty.json` & `cr.cube-3.0.9/tests/fixtures/num-x-num-empty.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/num.json` & `cr.cube-3.0.9/tests/fixtures/num.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric-measures-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/numeric-measures-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/numeric-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs-weighted.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-weighted.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-date.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-grouped-by-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-no-grouping-weighted.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-no-grouping-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-no-grouping.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-no-grouping.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-scale-measures.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-scale-measures.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-x-mr-weighted.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-x-mr-weighted.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-means-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-means-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-grouped-by-cat.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-grouped-by-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-multi-numeric-measures-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-grouped-by-cat.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-grouped-by-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-no-grouping.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-no-grouping.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-stddev-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-stddev-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat-hs.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-grouped-by-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-no-grouping.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-no-grouping.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/numeric_arrays/num-arr-sum-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/numeric_arrays/num-arr-sum-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/om-sgp8334215-vn-2019-sep-19-strand.json` & `cr.cube-3.0.9/tests/fixtures/om-sgp8334215-vn-2019-sep-19-strand.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/om-sgp8334215-vn-2019-sep-19.json` & `cr.cube-3.0.9/tests/fixtures/om-sgp8334215-vn-2019-sep-19.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/ca-sub-x-ca-cat-x-mr-sub-x-mr-sel.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/ca-sub-x-ca-cat-x-mr-sub-x-mr-sel.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-gender-x-all-pets-owned.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-gender-x-all-pets-owned.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-realistic-example.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-realistic-example.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/cat-x-mr-sub-x-mr-sel.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/cat-x-mr-sub-x-mr-sel.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/mr-single-subvar-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/mr-single-subvar-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/mr-x-mr-realistic-example.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/mr-x-mr-realistic-example.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/overlaps/mr-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/overlaps/mr-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-4x4.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-4x4.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-illness-x-occupation-with-hs.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-illness-x-occupation-with-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-illness-x-occupation.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-illness-x-occupation.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-hirotsu-occupation-x-illness.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-hirotsu-occupation-x-illness.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-random-3x4.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-random-3x4.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pairwise-with-zero-margin.json` & `cr.cube-3.0.9/tests/fixtures/pairwise-with-zero-margin.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-array-cat-first.json` & `cr.cube-3.0.9/tests/fixtures/pets-array-cat-first.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-array-subvar-first.json` & `cr.cube-3.0.9/tests/fixtures/pets-array-subvar-first.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-array-x-pets.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-mr.json`

 * *Files 19% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8047540377551483%*

 * *Differences: {"'self'": "'https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/cube/?filter=%7B%22filter%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Ffilters%2F06b4deb17519405ebe4581dd8dbe9eba%2F%22%7D&query=%7B%22dimensions%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F000067%2F%22%7D,%7B%22each%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F […]*

```diff
@@ -1,350 +1,301 @@
 {
     "element": "shoji:view",
-    "self": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/cube/?filter=%5B%5D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000b%2F%22%7D,%7B%22each%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000a%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2F00000a%2F%22%7D%5D%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:%22https:%2F%2Falpha.crunch.io%2Fapi%2Fdatasets%2Fc4b1dc74453d43a28508d18a4aa64221%2Fvariables%2Fad87769e360441169923ca6e1864dcd7%2F%22%7D",
+    "self": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/cube/?filter=%7B%22filter%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Ffilters%2F06b4deb17519405ebe4581dd8dbe9eba%2F%22%7D&query=%7B%22dimensions%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F000067%2F%22%7D,%7B%22each%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D%5D%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:null%7D",
     "value": {
         "query": {
             "dimensions": [
                 {
-                    "each": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000b/"
+                    "variable": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/000067/"
                 },
                 {
-                    "variable": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000b/"
-                },
-                {
-                    "each": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000a/"
+                    "each": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/0000dd/"
                 },
                 {
                     "args": [
                         {
-                            "variable": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/00000a/"
+                            "variable": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/0000dd/"
                         }
                     ],
                     "function": "as_selected"
                 }
             ],
             "measures": {
                 "count": {
                     "args": [],
                     "function": "cube_count"
                 }
             },
-            "weight": "https://alpha.crunch.io/api/datasets/c4b1dc74453d43a28508d18a4aa64221/variables/ad87769e360441169923ca6e1864dcd7/"
+            "weight": null
         },
         "query_environment": {
-            "filter": []
+            "filter": [
+                "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/filters/06b4deb17519405ebe4581dd8dbe9eba/"
+            ]
         },
         "result": {
             "counts": [
-                20,
-                25,
+                39,
+                389,
                 0,
+                34,
+                394,
                 0,
-                45,
+                357,
+                71,
                 0,
-                22,
-                23,
                 0,
-                14,
-                20,
+                428,
                 0,
-                34,
                 0,
+                6,
                 0,
-                16,
-                18,
                 0,
                 6,
-                4,
-                11,
                 0,
-                10,
-                11,
+                5,
+                1,
                 0,
-                10,
-                11,
                 0,
-                40,
+                6,
                 0,
-                15,
-                25,
+                44,
+                447,
                 0,
-                20,
-                20,
+                36,
+                455,
                 0,
-                40,
+                415,
+                76,
                 0,
                 0,
-                14,
-                26,
+                491,
                 0,
-                18,
-                22,
+                24,
+                266,
                 0,
+                29,
+                261,
                 0,
-                9,
-                11,
-                5,
-                4,
-                11,
+                241,
+                49,
                 0,
-                9,
-                11,
-                16,
-                16,
                 0,
-                13,
-                19,
+                290,
                 0,
                 0,
-                32,
                 0,
-                18,
-                20,
                 0,
-                16,
-                22,
                 0,
-                38,
                 0,
                 0,
-                6,
-                13,
-                11,
-                5,
-                14,
-                11,
                 0,
-                19,
-                11
+                0,
+                0,
+                0,
+                0,
+                0,
+                35,
+                394,
+                0,
+                24,
+                405,
+                0,
+                371,
+                58,
+                0,
+                0,
+                429,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0,
+                0
             ],
             "dimensions": [
                 {
-                    "derived": true,
+                    "derived": false,
                     "references": {
-                        "alias": "pets_array",
-                        "description": "Pets Array",
-                        "is_dichotomous": false,
-                        "name": "pets_array",
-                        "subreferences": [
-                            {
-                                "alias": "a_cat",
-                                "description": "a_cat",
-                                "name": "cat"
-                            },
-                            {
-                                "alias": "a_dog",
-                                "description": "a_dog",
-                                "name": "dog"
-                            },
-                            {
-                                "alias": "a_wombat",
-                                "description": "a_wombat",
-                                "name": "wombat"
-                            }
-                        ]
+                        "alias": "food_groups",
+                        "description": "Four of the five USDA food groups",
+                        "name": "Food groups",
+                        "notes": "A categorical variable where the missing categories are interspersed throughout the non-missing categories"
                     },
                     "type": {
-                        "class": "enum",
-                        "elements": [
+                        "categories": [
                             {
-                                "id": 1,
+                                "id": 0,
                                 "missing": false,
-                                "value": {
-                                    "derived": false,
-                                    "id": "0003",
-                                    "references": {
-                                        "alias": "a_cat",
-                                        "description": "a_cat",
-                                        "name": "cat"
-                                    }
-                                }
+                                "name": "Vegetables",
+                                "numeric_value": 0
                             },
                             {
-                                "id": 2,
-                                "missing": false,
-                                "value": {
-                                    "derived": false,
-                                    "id": "0004",
-                                    "references": {
-                                        "alias": "a_dog",
-                                        "description": "a_dog",
-                                        "name": "dog"
-                                    }
-                                }
+                                "id": 32766,
+                                "missing": true,
+                                "name": "Don't know",
+                                "numeric_value": 32766
                             },
                             {
-                                "id": 3,
+                                "id": 2,
                                 "missing": false,
-                                "value": {
-                                    "derived": false,
-                                    "id": "0005",
-                                    "references": {
-                                        "alias": "a_wombat",
-                                        "description": "a_wombat",
-                                        "name": "wombat"
-                                    }
-                                }
-                            }
-                        ],
-                        "subtype": {
-                            "class": "variable"
-                        }
-                    }
-                },
-                {
-                    "derived": false,
-                    "references": {
-                        "alias": "pets_array",
-                        "description": "Pets Array",
-                        "is_dichotomous": false,
-                        "name": "pets_array",
-                        "subreferences": [
-                            {
-                                "alias": "a_cat",
-                                "description": "a_cat",
-                                "name": "cat"
+                                "name": "Fruit",
+                                "numeric_value": 2
                             },
                             {
-                                "alias": "a_dog",
-                                "description": "a_dog",
-                                "name": "dog"
+                                "id": 5,
+                                "missing": false,
+                                "name": "Grain",
+                                "numeric_value": 5
                             },
                             {
-                                "alias": "a_wombat",
-                                "description": "a_wombat",
-                                "name": "wombat"
-                            }
-                        ]
-                    },
-                    "type": {
-                        "categories": [
-                            {
-                                "id": 1,
-                                "missing": false,
-                                "name": "not selected",
-                                "numeric_value": 1
+                                "id": -1,
+                                "missing": true,
+                                "name": "No Data",
+                                "numeric_value": null
                             },
                             {
-                                "id": 2,
+                                "id": 4,
                                 "missing": false,
-                                "name": "selected",
-                                "numeric_value": 2
+                                "name": "Meat",
+                                "numeric_value": 4
                             },
                             {
-                                "id": -1,
+                                "id": 32767,
                                 "missing": true,
-                                "name": "No Data",
-                                "numeric_value": null
+                                "name": "Not asked",
+                                "numeric_value": 32767
                             }
                         ],
                         "class": "categorical",
-                        "ordinal": false,
-                        "subvariables": [
-                            "0003",
-                            "0004",
-                            "0005"
-                        ]
+                        "ordinal": false
                     }
                 },
                 {
                     "derived": true,
                     "references": {
-                        "alias": "pets",
-                        "description": null,
-                        "is_dichotomous": true,
-                        "name": "pets",
+                        "alias": "1984_countries",
+                        "description": "Which of the following countries from 1984 would you live in? (select all that apply)",
+                        "name": "Countries from 1984",
+                        "notes": "A multiple response variable, where one item has no responses",
                         "subreferences": [
                             {
-                                "alias": "dog",
-                                "description": "dog",
-                                "name": "dog"
+                                "alias": "eurasia",
+                                "description": "union_hhold_1",
+                                "name": "Eurasia"
                             },
                             {
-                                "alias": "cat",
-                                "description": "cat",
-                                "name": "cat"
+                                "alias": "oceania",
+                                "description": "union_hhold_2",
+                                "name": "Oceania"
                             },
                             {
-                                "alias": "wombat",
-                                "description": "wombat",
-                                "name": "wombat"
+                                "alias": "eastasia",
+                                "description": "union_hhold_3",
+                                "name": "Eastasia"
+                            },
+                            {
+                                "alias": "disputed",
+                                "name": "Disputed"
                             }
                         ]
                     },
                     "type": {
                         "class": "enum",
                         "elements": [
                             {
                                 "id": 1,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0000",
+                                    "id": "00c5",
                                     "references": {
-                                        "alias": "dog",
-                                        "description": "dog",
-                                        "name": "dog"
+                                        "alias": "eurasia",
+                                        "description": "union_hhold_1",
+                                        "name": "Eurasia"
                                     }
                                 }
                             },
                             {
                                 "id": 2,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0001",
+                                    "id": "00c6",
                                     "references": {
-                                        "alias": "cat",
-                                        "description": "cat",
-                                        "name": "cat"
+                                        "alias": "oceania",
+                                        "description": "union_hhold_2",
+                                        "name": "Oceania"
                                     }
                                 }
                             },
                             {
                                 "id": 3,
                                 "missing": false,
                                 "value": {
                                     "derived": false,
-                                    "id": "0002",
+                                    "id": "00c7",
                                     "references": {
-                                        "alias": "wombat",
-                                        "description": "wombat",
-                                        "name": "wombat"
+                                        "alias": "eastasia",
+                                        "description": "union_hhold_3",
+                                        "name": "Eastasia"
+                                    }
+                                }
+                            },
+                            {
+                                "id": 4,
+                                "missing": false,
+                                "value": {
+                                    "derived": false,
+                                    "id": "de5314cea98b44eb9c243a86e06d1476",
+                                    "references": {
+                                        "alias": "disputed",
+                                        "name": "Disputed"
                                     }
                                 }
                             }
                         ],
                         "subtype": {
                             "class": "variable"
                         }
                     }
                 },
                 {
                     "derived": true,
                     "references": {
-                        "alias": "pets",
-                        "description": null,
-                        "is_dichotomous": true,
-                        "name": "pets",
+                        "alias": "1984_countries",
+                        "description": "Which of the following countries from 1984 would you live in? (select all that apply)",
+                        "name": "Countries from 1984",
+                        "notes": "A multiple response variable, where one item has no responses",
                         "subreferences": [
                             {
-                                "alias": "dog",
-                                "description": "dog",
-                                "name": "dog"
+                                "alias": "eurasia",
+                                "description": "union_hhold_1",
+                                "name": "Eurasia"
+                            },
+                            {
+                                "alias": "oceania",
+                                "description": "union_hhold_2",
+                                "name": "Oceania"
                             },
                             {
-                                "alias": "cat",
-                                "description": "cat",
-                                "name": "cat"
+                                "alias": "eastasia",
+                                "description": "union_hhold_3",
+                                "name": "Eastasia"
                             },
                             {
-                                "alias": "wombat",
-                                "description": "wombat",
-                                "name": "wombat"
+                                "alias": "disputed",
+                                "name": "Disputed"
                             }
                         ]
                     },
                     "type": {
                         "categories": [
                             {
                                 "id": 1,
@@ -352,133 +303,137 @@
                                 "name": "Selected",
                                 "numeric_value": 1,
                                 "selected": true
                             },
                             {
                                 "id": 0,
                                 "missing": false,
-                                "name": "Not Selected",
+                                "name": "Other",
                                 "numeric_value": 0
                             },
                             {
                                 "id": -1,
                                 "missing": true,
                                 "name": "No Data",
                                 "numeric_value": null
                             }
                         ],
                         "class": "categorical",
                         "ordinal": false,
                         "subvariables": [
-                            "0000",
-                            "0001",
-                            "0002"
+                            "00c5",
+                            "00c6",
+                            "00c7",
+                            "de5314cea98b44eb9c243a86e06d1476"
                         ]
                     }
                 }
             ],
             "element": "crunch:cube",
             "measures": {
                 "count": {
                     "data": [
-                        19.5386702849389,
-                        24.0388964269561,
+                        39,
+                        389,
+                        0,
+                        34,
+                        394,
+                        0,
+                        357,
+                        71,
+                        0,
+                        0,
+                        428,
+                        0,
+                        0,
+                        6,
+                        0,
+                        0,
+                        6,
+                        0,
+                        5,
+                        1,
+                        0,
+                        0,
+                        6,
+                        0,
+                        44,
+                        447,
+                        0,
+                        36,
+                        455,
+                        0,
+                        415,
+                        76,
+                        0,
+                        0,
+                        491,
+                        0,
+                        24,
+                        266,
+                        0,
+                        29,
+                        261,
+                        0,
+                        241,
+                        49,
+                        0,
+                        0,
+                        290,
                         0,
                         0,
-                        43.5775667118951,
                         0,
-                        21.0312075983718,
-                        22.5463591135233,
                         0,
-                        13.5232926277702,
-                        21.0764360018091,
                         0,
-                        34.5997286295794,
                         0,
                         0,
-                        16.5535956580733,
-                        18.0461329715061,
                         0,
-                        6.0153776571687,
-                        5.29172320217096,
-                        10.5156037991859,
                         0,
-                        11.3071008593397,
-                        10.5156037991859,
                         0,
-                        11.3071008593397,
-                        10.5156037991859,
                         0,
-                        42.1528720036183,
                         0,
-                        15.8073270013568,
-                        26.3455450022614,
                         0,
-                        19.5386702849389,
-                        22.6142017186793,
+                        35,
+                        394,
                         0,
-                        39.0773405698779,
+                        24,
+                        405,
                         0,
+                        371,
+                        58,
                         0,
-                        13.5232926277702,
-                        25.5540479421076,
                         0,
-                        18.0461329715061,
-                        21.0312075983718,
+                        429,
                         0,
                         0,
-                        8.25418362731796,
-                        10.5156037991859,
-                        5.26910900045228,
-                        2.98507462686567,
-                        10.5156037991859,
                         0,
-                        8.25418362731796,
-                        10.5156037991859,
-                        15.0158299412031,
-                        17.3224785165084,
                         0,
-                        12.7770239710538,
-                        19.5612844866576,
                         0,
                         0,
-                        32.3383084577114,
                         0,
-                        18.0461329715061,
-                        19.5386702849389,
                         0,
-                        16.5535956580733,
-                        21.0312075983718,
                         0,
-                        37.584803256445,
                         0,
                         0,
-                        6.0153776571687,
-                        13.5459068294889,
-                        10.5156037991859,
-                        5.26910900045228,
-                        14.2921754862053,
-                        10.5156037991859,
                         0,
-                        19.5612844866576,
-                        10.5156037991859
+                        0
                     ],
                     "metadata": {
                         "derived": true,
                         "references": {},
                         "type": {
                             "class": "numeric",
-                            "integer": false,
+                            "integer": true,
                             "missing_reasons": {
                                 "No Data": -1
                             },
                             "missing_rules": {}
                         }
                     },
-                    "n_missing": 11
+                    "n_missing": 6
                 }
             },
-            "missing": 11,
-            "n": 100
+            "missing": 6,
+            "n": 1644
         }
     }
 }
```

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-array.json` & `cr.cube-3.0.9/tests/fixtures/pets-array.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-x-fruit-hs.json` & `cr.cube-3.0.9/tests/fixtures/pets-x-fruit-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-x-fruit.json` & `cr.cube-3.0.9/tests/fixtures/pets-x-fruit.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-x-pets-array.json` & `cr.cube-3.0.9/tests/fixtures/pets-x-pets-array.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/pets-x-pets.json` & `cr.cube-3.0.9/tests/fixtures/pets-x-pets.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/profiles-percents.json` & `cr.cube-3.0.9/tests/fixtures/profiles-percents.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/prompted-awareness.json` & `cr.cube-3.0.9/tests/fixtures/prompted-awareness.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/same-counts-3x4.json` & `cr.cube-3.0.9/tests/fixtures/same-counts-3x4.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale-with-null-values.json` & `cr.cube-3.0.9/tests/fixtures/scale-with-null-values.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/bolshevik-hair.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/bolshevik-hair.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/ca-cat-x-items.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/ca-cat-x-items.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/ca-items-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/ca-items-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/ca-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/ca-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-nps-numval-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-nps-numval-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-single-element-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-single-element-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-ca-cat-x-items.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-ca-cat-x-items.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-cat-sm-margin.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-cat-sm-margin.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/cat-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/mr-x-cat.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8289780396455303%*

 * *Differences: {"'self'": "'https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/cube/?filter=%7B%22filter%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Ffilters%2F06b4deb17519405ebe4581dd8dbe9eba%2F%22%7D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets […]*

```diff
@@ -1,26 +1,26 @@
 {
     "element": "shoji:view",
-    "self": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/cube/?filter=%7B%22filter%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Ffilters%2F06b4deb17519405ebe4581dd8dbe9eba%2F%22%7D&query=%7B%22dimensions%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F000067%2F%22%7D,%7B%22each%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D%5D%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:null%7D",
+    "self": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/cube/?filter=%7B%22filter%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Ffilters%2F06b4deb17519405ebe4581dd8dbe9eba%2F%22%7D&query=%7B%22dimensions%22:%5B%7B%22each%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D,%7B%22function%22:%22as_selected%22,%22args%22:%5B%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F0000dd%2F%22%7D%5D%7D,%7B%22variable%22:%22https:%2F%2Fapp.crunch.io%2Fapi%2Fdatasets%2Fddc1b8a25c454689911d3d7a59c97aee%2Fvariables%2F000067%2F%22%7D%5D,%22measures%22:%7B%22count%22:%7B%22function%22:%22cube_count%22,%22args%22:%5B%5D%7D%7D,%22weight%22:null%7D",
     "value": {
         "query": {
             "dimensions": [
                 {
-                    "variable": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/000067/"
-                },
-                {
                     "each": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/0000dd/"
                 },
                 {
                     "args": [
                         {
                             "variable": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/0000dd/"
                         }
                     ],
                     "function": "as_selected"
+                },
+                {
+                    "variable": "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/variables/000067/"
                 }
             ],
             "measures": {
                 "count": {
                     "args": [],
                     "function": "cube_count"
                 }
@@ -31,157 +31,100 @@
             "filter": [
                 "https://app.crunch.io/api/datasets/ddc1b8a25c454689911d3d7a59c97aee/filters/06b4deb17519405ebe4581dd8dbe9eba/"
             ]
         },
         "result": {
             "counts": [
                 39,
-                389,
                 0,
-                34,
-                394,
+                44,
+                24,
                 0,
-                357,
-                71,
+                35,
                 0,
+                389,
+                6,
+                447,
+                266,
                 0,
-                428,
+                394,
                 0,
                 0,
-                6,
                 0,
                 0,
-                6,
                 0,
-                5,
-                1,
                 0,
                 0,
-                6,
                 0,
-                44,
-                447,
+                34,
                 0,
                 36,
-                455,
+                29,
                 0,
-                415,
-                76,
+                24,
                 0,
+                394,
+                6,
+                455,
+                261,
                 0,
-                491,
+                405,
                 0,
-                24,
-                266,
                 0,
-                29,
-                261,
                 0,
-                241,
-                49,
                 0,
                 0,
-                290,
                 0,
                 0,
                 0,
+                357,
+                5,
+                415,
+                241,
                 0,
+                371,
                 0,
+                71,
+                1,
+                76,
+                49,
                 0,
+                58,
                 0,
                 0,
                 0,
                 0,
                 0,
                 0,
                 0,
-                35,
-                394,
                 0,
-                24,
-                405,
                 0,
-                371,
-                58,
                 0,
                 0,
-                429,
                 0,
                 0,
                 0,
                 0,
+                428,
+                6,
+                491,
+                290,
                 0,
+                429,
                 0,
                 0,
                 0,
                 0,
                 0,
                 0,
                 0,
                 0
             ],
             "dimensions": [
                 {
-                    "derived": false,
-                    "references": {
-                        "alias": "food_groups",
-                        "description": "Four of the five USDA food groups",
-                        "name": "Food groups",
-                        "notes": "A categorical variable where the missing categories are interspersed throughout the non-missing categories"
-                    },
-                    "type": {
-                        "categories": [
-                            {
-                                "id": 0,
-                                "missing": false,
-                                "name": "Vegetables",
-                                "numeric_value": 0
-                            },
-                            {
-                                "id": 32766,
-                                "missing": true,
-                                "name": "Don't know",
-                                "numeric_value": 32766
-                            },
-                            {
-                                "id": 2,
-                                "missing": false,
-                                "name": "Fruit",
-                                "numeric_value": 2
-                            },
-                            {
-                                "id": 5,
-                                "missing": false,
-                                "name": "Grain",
-                                "numeric_value": 5
-                            },
-                            {
-                                "id": -1,
-                                "missing": true,
-                                "name": "No Data",
-                                "numeric_value": null
-                            },
-                            {
-                                "id": 4,
-                                "missing": false,
-                                "name": "Meat",
-                                "numeric_value": 4
-                            },
-                            {
-                                "id": 32767,
-                                "missing": true,
-                                "name": "Not asked",
-                                "numeric_value": 32767
-                            }
-                        ],
-                        "class": "categorical",
-                        "ordinal": false
-                    }
-                },
-                {
                     "derived": true,
                     "references": {
                         "alias": "1984_countries",
                         "description": "Which of the following countries from 1984 would you live in? (select all that apply)",
                         "name": "Countries from 1984",
                         "notes": "A multiple response variable, where one item has no responses",
                         "subreferences": [
@@ -322,96 +265,153 @@
                         "subvariables": [
                             "00c5",
                             "00c6",
                             "00c7",
                             "de5314cea98b44eb9c243a86e06d1476"
                         ]
                     }
+                },
+                {
+                    "derived": false,
+                    "references": {
+                        "alias": "food_groups",
+                        "description": "Four of the five USDA food groups",
+                        "name": "Food groups",
+                        "notes": "A categorical variable where the missing categories are interspersed throughout the non-missing categories"
+                    },
+                    "type": {
+                        "categories": [
+                            {
+                                "id": 0,
+                                "missing": false,
+                                "name": "Vegetables",
+                                "numeric_value": 0
+                            },
+                            {
+                                "id": 32766,
+                                "missing": true,
+                                "name": "Don't know",
+                                "numeric_value": 32766
+                            },
+                            {
+                                "id": 2,
+                                "missing": false,
+                                "name": "Fruit",
+                                "numeric_value": 2
+                            },
+                            {
+                                "id": 5,
+                                "missing": false,
+                                "name": "Grain",
+                                "numeric_value": 5
+                            },
+                            {
+                                "id": -1,
+                                "missing": true,
+                                "name": "No Data",
+                                "numeric_value": null
+                            },
+                            {
+                                "id": 4,
+                                "missing": false,
+                                "name": "Meat",
+                                "numeric_value": 4
+                            },
+                            {
+                                "id": 32767,
+                                "missing": true,
+                                "name": "Not asked",
+                                "numeric_value": 32767
+                            }
+                        ],
+                        "class": "categorical",
+                        "ordinal": false
+                    }
                 }
             ],
             "element": "crunch:cube",
             "measures": {
                 "count": {
                     "data": [
                         39,
-                        389,
                         0,
-                        34,
-                        394,
+                        44,
+                        24,
                         0,
-                        357,
-                        71,
+                        35,
                         0,
+                        389,
+                        6,
+                        447,
+                        266,
                         0,
-                        428,
+                        394,
                         0,
                         0,
-                        6,
                         0,
                         0,
-                        6,
                         0,
-                        5,
-                        1,
                         0,
                         0,
-                        6,
                         0,
-                        44,
-                        447,
+                        34,
                         0,
                         36,
-                        455,
+                        29,
                         0,
-                        415,
-                        76,
+                        24,
                         0,
+                        394,
+                        6,
+                        455,
+                        261,
                         0,
-                        491,
+                        405,
                         0,
-                        24,
-                        266,
                         0,
-                        29,
-                        261,
                         0,
-                        241,
-                        49,
                         0,
                         0,
-                        290,
                         0,
                         0,
                         0,
+                        357,
+                        5,
+                        415,
+                        241,
                         0,
+                        371,
                         0,
+                        71,
+                        1,
+                        76,
+                        49,
                         0,
+                        58,
                         0,
                         0,
                         0,
                         0,
                         0,
                         0,
                         0,
-                        35,
-                        394,
                         0,
-                        24,
-                        405,
                         0,
-                        371,
-                        58,
                         0,
                         0,
-                        429,
                         0,
                         0,
                         0,
                         0,
+                        428,
+                        6,
+                        491,
+                        290,
                         0,
+                        429,
                         0,
                         0,
                         0,
                         0,
                         0,
                         0,
                         0,
```

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/univariate-ca-subvar.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/univariate-ca-subvar.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat-with-all-null-numeric-value.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat-with-all-null-numeric-value.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat-with-null-numeric-value.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat-with-null-numeric-value.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/scale_means/univariate-cat.json` & `cr.cube-3.0.9/tests/fixtures/scale_means/univariate-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/selected-3way-2-filledmissing.json` & `cr.cube-3.0.9/tests/fixtures/selected-3way-2-filledmissing.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/selected-3way-filledmissing.json` & `cr.cube-3.0.9/tests/fixtures/selected-3way-filledmissing.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/selected-crosstab-array-first.json` & `cr.cube-3.0.9/tests/fixtures/selected-crosstab-array-first.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/selected-crosstab-array-last.json` & `cr.cube-3.0.9/tests/fixtures/selected-crosstab-array-last.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/simple-ca-hs.json` & `cr.cube-3.0.9/tests/fixtures/simple-ca-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/simple-cat-array.json` & `cr.cube-3.0.9/tests/fixtures/simple-cat-array.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/simple-mr.json` & `cr.cube-3.0.9/tests/fixtures/simple-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/single-col-margin-not-iterable.json` & `cr.cube-3.0.9/tests/fixtures/single-col-margin-not-iterable.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/starttime-x-nordic-countries-x-food-groops.json` & `cr.cube-3.0.9/tests/fixtures/starttime-x-nordic-countries-x-food-groops.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/stats-test.json` & `cr.cube-3.0.9/tests/fixtures/stats-test.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/sum-cat-x-mr.json` & `cr.cube-3.0.9/tests/fixtures/sum-cat-x-mr.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/sum-mr-x-cat.json` & `cr.cube-3.0.9/tests/fixtures/sum-mr-x-cat.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/test-dashboard-fixture.json` & `cr.cube-3.0.9/tests/fixtures/test-dashboard-fixture.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/text.json` & `cr.cube-3.0.9/tests/fixtures/text.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/transforms/generic-transforms-dicts.json` & `cr.cube-3.0.9/tests/fixtures/transforms/generic-transforms-dicts.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/transforms/test-dashboard-transform-no-ordering.json` & `cr.cube-3.0.9/tests/fixtures/transforms/test-dashboard-transform-no-ordering.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/transforms/test-dashboard-transform-single-el-visible.json` & `cr.cube-3.0.9/tests/fixtures/transforms/test-dashboard-transform-single-el-visible.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/txt-x-cat-date.json` & `cr.cube-3.0.9/tests/fixtures/txt-x-cat-date.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/univ-mr-with-hs.json` & `cr.cube-3.0.9/tests/fixtures/univ-mr-with-hs.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/univariate-categorical.json` & `cr.cube-3.0.9/tests/fixtures/univariate-categorical.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/fixtures/xyz-simple-alltypes.json` & `cr.cube-3.0.9/tests/fixtures/xyz-simple-alltypes.json`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_collator.py` & `cr.cube-3.0.9/tests/integration/test_collator.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_cube.py` & `cr.cube-3.0.9/tests/integration/test_cube.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_cubepart.py` & `cr.cube-3.0.9/tests/integration/test_cubepart.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_dimension.py` & `cr.cube-3.0.9/tests/integration/test_dimension.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_headers_and_subtotals.py` & `cr.cube-3.0.9/tests/integration/test_headers_and_subtotals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_index_table.py` & `cr.cube-3.0.9/tests/integration/test_index_table.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_matrix.py` & `cr.cube-3.0.9/tests/integration/test_matrix.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_multiple_response.py` & `cr.cube-3.0.9/tests/integration/test_multiple_response.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_numeric_array.py` & `cr.cube-3.0.9/tests/integration/test_numeric_array.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_pairwise_significance.py` & `cr.cube-3.0.9/tests/integration/test_pairwise_significance.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_scale_additional_measures.py` & `cr.cube-3.0.9/tests/integration/test_scale_additional_measures.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_scale_means.py` & `cr.cube-3.0.9/tests/integration/test_scale_means.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_smoothing.py` & `cr.cube-3.0.9/tests/integration/test_smoothing.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/integration/test_stripe.py` & `cr.cube-3.0.9/tests/integration/test_stripe.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/.test_dimension.py.swp` & `cr.cube-3.0.9/tests/unit/test_dimension.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,5888 +1,4177 @@
-00000000: 6230 5649 4d20 382e 3200 0000 0010 0000  b0VIM 8.2.......
-00000010: a38e 4d61 89b5 a308 7262 0000 736c 6f62  ..Ma....rb..slob
-00000020: 6f64 616e 696c 6963 0000 0000 0000 0000  odanilic........
-00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 536c 6f62 6f64 616e 732d 4d61  ....Slobodans-Ma
-00000050: 6342 6f6f 6b2d 5072 6f2d 322e 6c6f 6361  cBook-Pro-2.loca
-00000060: 6c00 0000 0000 0000 0000 0000 7e73 6c6f  l...........~slo
-00000070: 626f 6461 6e69 6c69 632f 446f 6375 6d65  bodanilic/Docume
-00000080: 6e74 732f 4372 756e 6368 2f72 6570 6f73  nts/Crunch/repos
-00000090: 2f63 7275 6e63 682d 6375 6265 2f74 6573  /crunch-cube/tes
-000000a0: 7473 2f75 6e69 742f 7465 7374 5f64 696d  ts/unit/test_dim
-000000b0: 656e 7369 6f6e 2e70 7900 0000 0000 0000  ension.py.......
-000000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003e0: 0000 0000 0000 0000 0075 7466 2d38 0d00  .........utf-8..
-000003f0: 3332 3130 0000 0000 2322 2120 1312 5500  3210....#"! ..U.
-00000400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001000: 7470 1300 7f00 0000 0200 0000 0000 0000  tp..............
-00001010: 7a00 0000 0000 0000 0100 0000 0000 0000  z...............
-00001020: 0100 0000 0000 0000 edff ffff ffff ffff  ................
-00001030: 6100 0000 0000 0000 7b00 0000 0000 0000  a.......{.......
-00001040: 0100 0000 0000 0000 ecff ffff ffff ffff  ................
-00001050: 6b00 0000 0000 0000 dc00 0000 0000 0000  k...............
-00001060: 0100 0000 0000 0000 ebff ffff ffff ffff  ................
-00001070: 6000 0000 0000 0000 4701 0000 0000 0000  `.......G.......
-00001080: 0100 0000 0000 0000 eaff ffff ffff ffff  ................
-00001090: 6b00 0000 0000 0000 a701 0000 0000 0000  k...............
-000010a0: 0100 0000 0000 0000 e9ff ffff ffff ffff  ................
-000010b0: 5900 0000 0000 0000 1202 0000 0000 0000  Y...............
-000010c0: 0100 0000 0000 0000 e8ff ffff ffff ffff  ................
-000010d0: 6400 0000 0000 0000 6b02 0000 0000 0000  d.......k.......
-000010e0: 0100 0000 0000 0000 e7ff ffff ffff ffff  ................
-000010f0: 6d00 0000 0000 0000 cf02 0000 0000 0000  m...............
-00001100: 0100 0000 0000 0000 e6ff ffff ffff ffff  ................
-00001110: 6000 0000 0000 0000 3c03 0000 0000 0000  `.......<.......
-00001120: 0100 0000 0000 0000 e5ff ffff ffff ffff  ................
-00001130: 6700 0000 0000 0000 9c03 0000 0000 0000  g...............
-00001140: 0100 0000 0000 0000 e4ff ffff ffff ffff  ................
-00001150: 5d00 0000 0000 0000 0304 0000 0000 0000  ]...............
-00001160: 0100 0000 0000 0000 e3ff ffff ffff ffff  ................
-00001170: 6c00 0000 0000 0000 6004 0000 0000 0000  l.......`.......
-00001180: 0100 0000 0000 0000 e2ff ffff ffff ffff  ................
-00001190: 6200 0000 0000 0000 cc04 0000 0000 0000  b...............
-000011a0: 0100 0000 0000 0000 e1ff ffff ffff ffff  ................
-000011b0: 6d00 0000 0000 0000 2e05 0000 0000 0000  m...............
-000011c0: 0100 0000 0000 0000 e0ff ffff ffff ffff  ................
-000011d0: 5e00 0000 0000 0000 9b05 0000 0000 0000  ^...............
-000011e0: 0100 0000 0000 0000 dfff ffff ffff ffff  ................
-000011f0: 6100 0000 0000 0000 f905 0000 0000 0000  a...............
-00001200: 0100 0000 0000 0000 deff ffff ffff ffff  ................
-00001210: 6900 0000 0000 0000 5a06 0000 0000 0000  i.......Z.......
-00001220: 0100 0000 0000 0000 ddff ffff ffff ffff  ................
-00001230: 5c00 0000 0000 0000 c306 0000 0000 0000  \...............
-00001240: 0100 0000 0000 0000 0600 0000 0000 0000  ................
-00001250: 1700 0000 0000 0000 1f07 0000 0000 0000  ................
-00001260: 0100 0000 0000 0000 0500 0000 0000 0000  ................
-00001270: 0700 0000 0000 0000 1b07 0000 0000 0000  ................
-00001280: 0100 0000 0000 0000 0300 0000 0000 0000  ................
-00001290: 0d00 0000 0000 0000 2107 0000 0000 0000  ........!.......
-000012a0: 0100 0000 0000 0000 0000 0000 0000 0000  ................
-000012b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000012f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000013f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000014f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000015f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000016f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000017f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000018f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000019f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00002000: 6164 0000 0d00 0000 1102 0000 0010 0000  ad..............
-00002010: 7a00 0000 0000 0000 ee0f 0000 ed0f 0000  z...............
-00002020: b90f 0000 b80f 0000 a50f 0000 970f 0000  ................
-00002030: 960f 0000 760f 0000 630f 0000 510f 0000  ....v...c...Q...
-00002040: 380f 0000 230f 0000 100f 0000 010f 0000  8...#...........
-00002050: ea0e 0000 d60e 0000 c80e 0000 b00e 0000  ................
-00002060: a00e 0000 8d0e 0000 7e0e 0000 6e0e 0000  ........~...n...
-00002070: 5a0e 0000 580e 0000 3c0e 0000 200e 0000  Z...X...<... ...
-00002080: 060e 0000 f80d 0000 eb0d 0000 e90d 0000  ................
-00002090: e80d 0000 cf0d 0000 c60d 0000 bc0d 0000  ................
-000020a0: ac0d 0000 960d 0000 830d 0000 720d 0000  ............r...
-000020b0: 5f0d 0000 5d0d 0000 5c0d 0000 5b0d 0000  _...]...\...[...
-000020c0: 3c0d 0000 000d 0000 cd0c 0000 a10c 0000  <...............
-000020d0: a00c 0000 790c 0000 4b0c 0000 220c 0000  ....y...K..."...
-000020e0: e50b 0000 e40b 0000 a20b 0000 760b 0000  ............v...
-000020f0: 450b 0000 1d0b 0000 1c0b 0000 d50a 0000  E...............
-00002100: d40a 0000 c00a 0000 960a 0000 500a 0000  ............P...
-00002110: 4f0a 0000 4e0a 0000 310a 0000 e909 0000  O...N...1.......
-00002120: e809 0000 b209 0000 a409 0000 8609 0000  ................
-00002130: 6809 0000 4d09 0000 3409 0000 2d09 0000  h...M...4...-...
-00002140: f408 0000 b308 0000 8608 0000 8508 0000  ................
-00002150: 4408 0000 4308 0000 ee07 0000 b307 0000  D...C...........
-00002160: b207 0000 7407 0000 4407 0000 ec06 0000  ....t...D.......
-00002170: b106 0000 a706 0000 7a06 0000 7906 0000  ........z...y...
-00002180: 5406 0000 5306 0000 3106 0000 3006 0000  T...S...1...0...
-00002190: d805 0000 9e05 0000 8105 0000 2a05 0000  ............*...
-000021a0: 2005 0000 d404 0000 9b04 0000 9a04 0000   ...............
-000021b0: 6a04 0000 6904 0000 1404 0000 eb03 0000  j...i...........
-000021c0: ea03 0000 a303 0000 a203 0000 8e03 0000  ................
-000021d0: 6603 0000 3103 0000 3003 0000 1c03 0000  f...1...0.......
-000021e0: ef02 0000 a302 0000 a202 0000 8e02 0000  ................
-000021f0: 6102 0000 2602 0000 2502 0000 1102 0000  a...&...%.......
-00002200: 1002 0000 0000 0000 0000 0000 0000 0000  ................
-00002210: 0020 2020 2040 7079 7465 7374 2e66 6978  .    @pytest.fix
-00002220: 7475 7265 0000 2020 2020 2020 2020 7265  ture..        re
-00002230: 7475 726e 2069 6e73 7461 6e63 655f 6d6f  turn instance_mo
-00002240: 636b 2872 6571 7565 7374 2c20 5f41 7070  ck(request, _App
-00002250: 6172 656e 7444 696d 656e 7369 6f6e 7329  arentDimensions)
-00002260: 0020 2020 2064 6566 2061 7070 6172 656e  .    def apparen
-00002270: 745f 6469 6d65 6e73 696f 6e73 5f28 7365  t_dimensions_(se
-00002280: 6c66 2c20 7265 7175 6573 7429 3a00 2020  lf, request):.  
-00002290: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
-000022a0: 6500 0020 2020 2020 2020 2072 6574 7572  e..        retur
-000022b0: 6e20 636c 6173 735f 6d6f 636b 2872 6571  n class_mock(req
-000022c0: 7565 7374 2c20 2263 722e 6375 6265 2e64  uest, "cr.cube.d
-000022d0: 696d 656e 7369 6f6e 2e5f 4170 7061 7265  imension._Appare
-000022e0: 6e74 4469 6d65 6e73 696f 6e73 2229 0020  ntDimensions"). 
-000022f0: 2020 2064 6566 205f 4170 7061 7265 6e74     def _Apparent
-00002300: 4469 6d65 6e73 696f 6e73 5f28 7365 6c66  Dimensions_(self
-00002310: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00002320: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00002330: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00002340: 696e 7374 616e 6365 5f6d 6f63 6b28 7265  instance_mock(re
-00002350: 7175 6573 742c 2041 6c6c 4469 6d65 6e73  quest, AllDimens
-00002360: 696f 6e73 2900 2020 2020 6465 6620 616c  ions).    def al
-00002370: 6c5f 6469 6d65 6e73 696f 6e73 5f28 7365  l_dimensions_(se
-00002380: 6c66 2c20 7265 7175 6573 7429 3a00 2020  lf, request):.  
-00002390: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
-000023a0: 6500 0020 2020 2023 2066 6978 7475 7265  e..    # fixture
-000023b0: 2063 6f6d 706f 6e65 6e74 7320 2d2d 2d2d   components ----
-000023c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000023d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000023e0: 2d2d 2d2d 2d2d 2d2d 2d00 0020 2020 2020  ---------..     
-000023f0: 2020 2061 7373 6572 7420 6469 6d65 6e73     assert dimens
-00002400: 696f 6e73 203d 3d20 6469 6d65 6e73 696f  ions == dimensio
-00002410: 6e73 5f00 2020 2020 2020 2020 5f44 696d  ns_.        _Dim
-00002420: 656e 7369 6f6e 4661 6374 6f72 795f 2e69  ensionFactory_.i
-00002430: 7465 725f 6469 6d65 6e73 696f 6e73 2e61  ter_dimensions.a
-00002440: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
-00002450: 655f 7769 7468 2864 696d 656e 7369 6f6e  e_with(dimension
-00002460: 5f64 6963 7473 5f29 0000 2020 2020 2020  _dicts_)..      
-00002470: 2020 6469 6d65 6e73 696f 6e73 203d 2061    dimensions = a
-00002480: 6c6c 5f64 696d 656e 7369 6f6e 732e 5f64  ll_dimensions._d
-00002490: 696d 656e 7369 6f6e 7300 0020 2020 2020  imensions..     
-000024a0: 2020 2061 6c6c 5f64 696d 656e 7369 6f6e     all_dimension
-000024b0: 7320 3d20 416c 6c44 696d 656e 7369 6f6e  s = AllDimension
-000024c0: 7328 6469 6d65 6e73 696f 6e5f 6469 6374  s(dimension_dict
-000024d0: 735f 2900 2020 2020 2020 2020 5f44 696d  s_).        _Dim
-000024e0: 656e 7369 6f6e 4661 6374 6f72 795f 2e69  ensionFactory_.i
-000024f0: 7465 725f 6469 6d65 6e73 696f 6e73 2e72  ter_dimensions.r
-00002500: 6574 7572 6e5f 7661 6c75 6520 3d20 6974  eturn_value = it
-00002510: 6572 2864 696d 656e 7369 6f6e 735f 2900  er(dimensions_).
-00002520: 2020 2020 2020 2020 2900 2020 2020 2020          ).      
-00002530: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
-00002540: 6f63 6b28 7265 7175 6573 742c 2044 696d  ock(request, Dim
-00002550: 656e 7369 6f6e 2c20 6e61 6d65 3d22 6469  ension, name="di
-00002560: 6d2d 2564 2220 2520 6964 7829 2066 6f72  m-%d" % idx) for
-00002570: 2069 6478 2069 6e20 7261 6e67 6528 3329   idx in range(3)
-00002580: 0020 2020 2020 2020 2064 696d 656e 7369  .        dimensi
-00002590: 6f6e 735f 203d 2074 7570 6c65 2800 2020  ons_ = tuple(.  
-000025a0: 2020 2020 2020 6469 6d65 6e73 696f 6e5f        dimension_
-000025b0: 6469 6374 735f 203d 205b 7b22 6422 3a20  dicts_ = [{"d": 
-000025c0: 307d 2c20 7b22 6422 3a20 317d 2c20 7b22  0}, {"d": 1}, {"
-000025d0: 6422 3a20 327d 5d00 2020 2020 6465 6620  d": 2}].    def 
-000025e0: 6974 5f73 746f 7265 735f 6974 735f 6469  it_stores_its_di
-000025f0: 6d65 6e73 696f 6e73 5f69 6e5f 615f 7475  mensions_in_a_tu
-00002600: 706c 655f 746f 5f68 656c 7028 7365 6c66  ple_to_help(self
-00002610: 2c20 7265 7175 6573 742c 205f 4469 6d65  , request, _Dime
-00002620: 6e73 696f 6e46 6163 746f 7279 5f29 3a00  nsionFactory_):.
-00002630: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00002640: 7368 6170 6520 3d3d 2028 332c 2032 2c20  shape == (3, 2, 
-00002650: 3129 0000 2020 2020 2020 2020 7368 6170  1)..        shap
-00002660: 6520 3d20 616c 6c5f 6469 6d65 6e73 696f  e = all_dimensio
-00002670: 6e73 2e73 6861 7065 0000 2020 2020 2020  ns.shape..      
-00002680: 2020 616c 6c5f 6469 6d65 6e73 696f 6e73    all_dimensions
-00002690: 203d 2041 6c6c 4469 6d65 6e73 696f 6e73   = AllDimensions
-000026a0: 284e 6f6e 6529 0020 2020 2020 2020 2029  (None).        )
-000026b0: 0020 2020 2020 2020 2020 2020 2066 6f72  .            for
-000026c0: 2069 6478 2c20 656c 656d 656e 745f 636f   idx, element_co
-000026d0: 756e 7420 696e 2065 6e75 6d65 7261 7465  unt in enumerate
-000026e0: 2828 332c 2032 2c20 3129 2900 2020 2020  ((3, 2, 1)).    
-000026f0: 2020 2020 2020 2020 696e 7374 616e 6365          instance
-00002700: 5f6d 6f63 6b28 7265 7175 6573 742c 2044  _mock(request, D
-00002710: 696d 656e 7369 6f6e 2c20 6e61 6d65 3d22  imension, name="
-00002720: 6469 6d2d 2564 2220 2520 6964 782c 2073  dim-%d" % idx, s
-00002730: 6861 7065 3d65 6c65 6d65 6e74 5f63 6f75  hape=element_cou
-00002740: 6e74 2900 2020 2020 2020 2020 5f64 696d  nt).        _dim
-00002750: 656e 7369 6f6e 735f 7072 6f70 5f2e 7265  ensions_prop_.re
-00002760: 7475 726e 5f76 616c 7565 203d 2074 7570  turn_value = tup
-00002770: 6c65 2800 2020 2020 6465 6620 6974 5f6b  le(.    def it_k
-00002780: 6e6f 7773 5f69 7473 5f73 6861 7065 2873  nows_its_shape(s
-00002790: 656c 662c 2072 6571 7565 7374 2c20 5f64  elf, request, _d
-000027a0: 696d 656e 7369 6f6e 735f 7072 6f70 5f29  imensions_prop_)
-000027b0: 3a00 0020 2020 2020 2020 2061 7373 6572  :..        asser
-000027c0: 7420 6170 7061 7265 6e74 5f64 696d 656e  t apparent_dimen
-000027d0: 7369 6f6e 7320 6973 2061 7070 6172 656e  sions is apparen
-000027e0: 745f 6469 6d65 6e73 696f 6e73 5f00 2020  t_dimensions_.  
-000027f0: 2020 2020 2020 5f41 7070 6172 656e 7444        _ApparentD
-00002800: 696d 656e 7369 6f6e 735f 2e61 7373 6572  imensions_.asser
-00002810: 745f 6361 6c6c 6564 5f6f 6e63 655f 7769  t_called_once_wi
-00002820: 7468 2861 6c6c 5f64 696d 656e 7369 6f6e  th(all_dimension
-00002830: 733d 616c 6c5f 6469 6d65 6e73 696f 6e73  s=all_dimensions
-00002840: 5f29 0000 2020 2020 2020 2020 6170 7061  _)..        appa
-00002850: 7265 6e74 5f64 696d 656e 7369 6f6e 7320  rent_dimensions 
-00002860: 3d20 616c 6c5f 6469 6d65 6e73 696f 6e73  = all_dimensions
-00002870: 2e61 7070 6172 656e 745f 6469 6d65 6e73  .apparent_dimens
-00002880: 696f 6e73 0000 2020 2020 2020 2020 616c  ions..        al
-00002890: 6c5f 6469 6d65 6e73 696f 6e73 203d 2041  l_dimensions = A
-000028a0: 6c6c 4469 6d65 6e73 696f 6e73 284e 6f6e  llDimensions(Non
-000028b0: 6529 0020 2020 2020 2020 205f 4170 7061  e).        _Appa
-000028c0: 7265 6e74 4469 6d65 6e73 696f 6e73 5f2e  rentDimensions_.
-000028d0: 7265 7475 726e 5f76 616c 7565 203d 2061  return_value = a
-000028e0: 7070 6172 656e 745f 6469 6d65 6e73 696f  pparent_dimensio
-000028f0: 6e73 5f00 2020 2020 2020 2020 5f64 696d  ns_.        _dim
-00002900: 656e 7369 6f6e 735f 7072 6f70 5f2e 7265  ensions_prop_.re
-00002910: 7475 726e 5f76 616c 7565 203d 2061 6c6c  turn_value = all
-00002920: 5f64 696d 656e 7369 6f6e 735f 0020 2020  _dimensions_.   
-00002930: 2029 3a00 2020 2020 2020 2020 616c 6c5f   ):.        all_
-00002940: 6469 6d65 6e73 696f 6e73 5f2c 0020 2020  dimensions_,.   
-00002950: 2020 2020 205f 6469 6d65 6e73 696f 6e73       _dimensions
-00002960: 5f70 726f 705f 2c00 2020 2020 2020 2020  _prop_,.        
-00002970: 6170 7061 7265 6e74 5f64 696d 656e 7369  apparent_dimensi
-00002980: 6f6e 735f 2c00 2020 2020 2020 2020 5f41  ons_,.        _A
-00002990: 7070 6172 656e 7444 696d 656e 7369 6f6e  pparentDimension
-000029a0: 735f 2c00 2020 2020 2020 2020 7365 6c66  s_,.        self
-000029b0: 2c00 2020 2020 6465 6620 6974 5f70 726f  ,.    def it_pro
-000029c0: 7669 6465 735f 6163 6365 7373 5f74 6f5f  vides_access_to_
-000029d0: 6974 735f 4170 7061 7265 6e74 4469 6d65  its_ApparentDime
-000029e0: 6e73 696f 6e73 2800 0020 2020 2022 2222  nsions(..    """
-000029f0: 556e 6974 2d74 6573 7420 7375 6974 6520  Unit-test suite 
-00002a00: 666f 7220 6063 722e 6375 6265 2e64 696d  for `cr.cube.dim
-00002a10: 656e 7369 6f6e 2e41 6c6c 4469 6d65 6e73  ension.AllDimens
-00002a20: 696f 6e73 6020 6f62 6a65 6374 2e22 2222  ions` object."""
-00002a30: 0063 6c61 7373 2044 6573 6372 6962 6541  .class DescribeA
-00002a40: 6c6c 4469 6d65 6e73 696f 6e73 3a00 0000  llDimensions:...
-00002a50: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-00002a60: 726f 7065 7274 795f 6d6f 636b 2872 6571  roperty_mock(req
-00002a70: 7565 7374 2c20 5f42 6173 6544 696d 656e  uest, _BaseDimen
-00002a80: 7369 6f6e 732c 2022 5f64 696d 656e 7369  sions, "_dimensi
-00002a90: 6f6e 7322 2900 2020 2020 6465 6620 5f64  ons").    def _d
-00002aa0: 696d 656e 7369 6f6e 735f 7072 6f70 5f28  imensions_prop_(
-00002ab0: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-00002ac0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-00002ad0: 7572 6500 0020 2020 2023 2066 6978 7475  ure..    # fixtu
-00002ae0: 7265 2063 6f6d 706f 6e65 6e74 7320 2d2d  re components --
-00002af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d00 0020 2020  -----------..   
-00002b20: 2020 2020 2020 2020 2062 6173 655f 6469           base_di
-00002b30: 6d65 6e73 696f 6e73 2e5f 6469 6d65 6e73  mensions._dimens
-00002b40: 696f 6e73 0020 2020 2020 2020 2077 6974  ions.        wit
-00002b50: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00002b60: 4e6f 7449 6d70 6c65 6d65 6e74 6564 4572  NotImplementedEr
-00002b70: 726f 7229 3a00 2020 2020 2020 2020 6261  ror):.        ba
-00002b80: 7365 5f64 696d 656e 7369 6f6e 7320 3d20  se_dimensions = 
-00002b90: 5f42 6173 6544 696d 656e 7369 6f6e 7328  _BaseDimensions(
-00002ba0: 2900 2020 2020 6465 6620 6974 5f73 746f  ).    def it_sto
-00002bb0: 7265 735f 6974 735f 6469 6d65 6e73 696f  res_its_dimensio
-00002bc0: 6e5f 6f62 6a65 6374 735f 696e 5f61 5f74  n_objects_in_a_t
-00002bd0: 7570 6c65 5f74 6f5f 6865 6c70 2873 656c  uple_to_help(sel
-00002be0: 6629 3a00 0020 2020 2020 2020 2061 7373  f):..        ass
-00002bf0: 6572 7420 6c69 7374 286e 2066 6f72 206e  ert list(n for n
-00002c00: 2069 6e20 6261 7365 5f64 696d 656e 7369   in base_dimensi
-00002c10: 6f6e 7329 203d 3d20 5b30 2c20 312c 2032  ons) == [0, 1, 2
-00002c20: 5d00 2020 2020 2020 2020 6173 7365 7274  ].        assert
-00002c30: 206c 656e 2862 6173 655f 6469 6d65 6e73   len(base_dimens
-00002c40: 696f 6e73 2920 3d3d 2033 0020 2020 2020  ions) == 3.     
-00002c50: 2020 2061 7373 6572 7420 6261 7365 5f64     assert base_d
-00002c60: 696d 656e 7369 6f6e 735b 313a 335d 203d  imensions[1:3] =
-00002c70: 3d20 2831 2c20 3229 0020 2020 2020 2020  = (1, 2).       
-00002c80: 2061 7373 6572 7420 6261 7365 5f64 696d   assert base_dim
-00002c90: 656e 7369 6f6e 735b 315d 203d 3d20 3100  ensions[1] == 1.
-00002ca0: 0020 2020 2020 2020 2062 6173 655f 6469  .        base_di
-00002cb0: 6d65 6e73 696f 6e73 203d 205f 4261 7365  mensions = _Base
-00002cc0: 4469 6d65 6e73 696f 6e73 2829 0020 2020  Dimensions().   
-00002cd0: 2020 2020 205f 6469 6d65 6e73 696f 6e73       _dimensions
-00002ce0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-00002cf0: 6c75 6520 3d20 2830 2c20 312c 2032 2900  lue = (0, 1, 2).
-00002d00: 2020 2020 6465 6620 6974 5f68 6173 5f73      def it_has_s
-00002d10: 6571 7565 6e63 655f 6265 6861 7669 6f72  equence_behavior
-00002d20: 7328 7365 6c66 2c20 5f64 696d 656e 7369  s(self, _dimensi
-00002d30: 6f6e 735f 7072 6f70 5f29 3a00 636c 6173  ons_prop_):.clas
-00002d40: 7320 4465 7363 7269 6265 5f42 6173 6544  s Describe_BaseD
-00002d50: 696d 656e 7369 6f6e 733a 0000 0029 0020  imensions:...). 
-00002d60: 2020 2070 726f 7065 7274 795f 6d6f 636b     property_mock
-00002d70: 2c00 2020 2020 6d65 7468 6f64 5f6d 6f63  ,.    method_moc
-00002d80: 6b2c 0020 2020 2069 6e73 7461 6e63 655f  k,.    instance_
-00002d90: 6d6f 636b 2c00 2020 2020 696e 6974 6961  mock,.    initia
-00002da0: 6c69 7a65 725f 6d6f 636b 2c00 2020 2020  lizer_mock,.    
-00002db0: 636c 6173 735f 6d6f 636b 2c00 2020 2020  class_mock,.    
-00002dc0: 6361 6c6c 2c00 2020 2020 414e 592c 0066  call,.    ANY,.f
-00002dd0: 726f 6d20 2e2e 756e 6974 7574 696c 2069  rom ..unitutil i
-00002de0: 6d70 6f72 7420 2800 0029 0020 2020 204d  mport (..).    M
-00002df0: 4541 5355 5245 2c00 2020 2020 4d41 5247  EASURE,.    MARG
-00002e00: 494e 414c 2c00 2020 2020 4449 4d45 4e53  INAL,.    DIMENS
-00002e10: 494f 4e5f 5459 5045 2061 7320 4454 2c00  ION_TYPE as DT,.
-00002e20: 2020 2020 434f 4c4c 4154 494f 4e5f 4d45      COLLATION_ME
-00002e30: 5448 4f44 2061 7320 434d 2c00 6672 6f6d  THOD as CM,.from
-00002e40: 2063 722e 6375 6265 2e65 6e75 6d73 2069   cr.cube.enums i
-00002e50: 6d70 6f72 7420 2800 2900 2020 2020 5f56  mport (.).    _V
-00002e60: 616c 6964 456c 656d 656e 7473 2c00 2020  alidElements,.  
-00002e70: 2020 5f53 7562 746f 7461 6c73 2c00 2020    _Subtotals,.  
-00002e80: 2020 5f53 7562 746f 7461 6c2c 0020 2020    _Subtotal,.   
-00002e90: 205f 5261 7744 696d 656e 7369 6f6e 2c00   _RawDimension,.
-00002ea0: 2020 2020 5f4f 7264 6572 5370 6563 2c00      _OrderSpec,.
-00002eb0: 2020 2020 5f45 6c65 6d65 6e74 5472 616e      _ElementTran
-00002ec0: 7366 6f72 6d73 2c00 2020 2020 5f45 6c65  sforms,.    _Ele
-00002ed0: 6d65 6e74 2c00 2020 2020 5f45 6c65 6d65  ment,.    _Eleme
-00002ee0: 6e74 4964 5368 696d 2c00 2020 2020 5f44  ntIdShim,.    _D
-00002ef0: 696d 656e 7369 6f6e 4661 6374 6f72 792c  imensionFactory,
-00002f00: 0020 2020 2044 696d 656e 7369 6f6e 2c00  .    Dimension,.
-00002f10: 2020 2020 5f42 6173 6545 6c65 6d65 6e74      _BaseElement
-00002f20: 732c 0020 2020 205f 4261 7365 4469 6d65  s,.    _BaseDime
-00002f30: 6e73 696f 6e73 2c00 2020 2020 5f41 7070  nsions,.    _App
-00002f40: 6172 656e 7444 696d 656e 7369 6f6e 732c  arentDimensions,
-00002f50: 0020 2020 205f 416c 6c45 6c65 6d65 6e74  .    _AllElement
-00002f60: 732c 0020 2020 2041 6c6c 4469 6d65 6e73  s,.    AllDimens
-00002f70: 696f 6e73 2c00 6672 6f6d 2063 722e 6375  ions,.from cr.cu
-00002f80: 6265 2e64 696d 656e 7369 6f6e 2069 6d70  be.dimension imp
-00002f90: 6f72 7420 2800 0069 6d70 6f72 7420 7079  ort (..import py
-00002fa0: 7465 7374 0069 6d70 6f72 7420 6e75 6d70  test.import nump
-00002fb0: 7920 6173 206e 7000 0022 2222 556e 6974  y as np.."""Unit
-00002fc0: 2074 6573 7420 7375 6974 6520 666f 7220   test suite for 
-00002fd0: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
-00002fe0: 6e20 6d6f 6475 6c65 2e22 2222 0000 2320  n module."""..# 
-00002ff0: 656e 636f 6469 6e67 3a20 7574 662d 3800  encoding: utf-8.
-00003000: 6164 0000 0f0e 0000 5f0e 0000 0010 0000  ad......_.......
-00003010: 0d00 0000 0000 0000 c10f 0000 c00f 0000  ................
-00003020: ac0f 0000 860f 0000 520f 0000 510f 0000  ........R...Q...
-00003030: 3d0f 0000 150f 0000 d20e 0000 d10e 0000  =...............
-00003040: bd0e 0000 950e 0000 5f0e 0000 0000 0000  ........_.......
-00003050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000030f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000031f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000032f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000033f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000034f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003e50: 0000 0000 0000 0000 0000 0000 0000 0020  ............... 
-00003e60: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
-00003e70: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
-00003e80: 6573 742c 205f 5661 6c69 6445 6c65 6d65  est, _ValidEleme
-00003e90: 6e74 7329 0020 2020 2064 6566 2076 616c  nts).    def val
-00003ea0: 6964 5f65 6c65 6d65 6e74 735f 2873 656c  id_elements_(sel
-00003eb0: 662c 2072 6571 7565 7374 293a 0020 2020  f, request):.   
-00003ec0: 2040 7079 7465 7374 2e66 6978 7475 7265   @pytest.fixture
-00003ed0: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00003ee0: 2070 726f 7065 7274 795f 6d6f 636b 2872   property_mock(r
-00003ef0: 6571 7565 7374 2c20 5f53 7562 746f 7461  equest, _Subtota
-00003f00: 6c2c 2022 7375 6274 7261 6865 6e64 5f69  l, "subtrahend_i
-00003f10: 6473 2229 0020 2020 2064 6566 2073 7562  ds").    def sub
-00003f20: 7472 6168 656e 645f 6964 735f 2873 656c  trahend_ids_(sel
-00003f30: 662c 2072 6571 7565 7374 293a 0020 2020  f, request):.   
-00003f40: 2040 7079 7465 7374 2e66 6978 7475 7265   @pytest.fixture
-00003f50: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00003f60: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
-00003f70: 6571 7565 7374 2c20 5f41 6c6c 456c 656d  equest, _AllElem
-00003f80: 656e 7473 2900 2020 2020 6465 6620 616c  ents).    def al
-00003f90: 6c5f 656c 656d 656e 7473 5f28 7365 6c66  l_elements_(self
-00003fa0: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00003fb0: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00003fc0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00003fd0: 7072 6f70 6572 7479 5f6d 6f63 6b28 7265  property_mock(re
-00003fe0: 7175 6573 742c 205f 5375 6274 6f74 616c  quest, _Subtotal
-00003ff0: 2c20 2261 6464 656e 645f 6964 7322 2900  , "addend_ids").
-00004000: 6164 0000 dc00 0000 5802 0000 0010 0000  ad......X.......
-00004010: 5800 0000 0000 0000 e60f 0000 be0f 0000  X...............
-00004020: 850f 0000 520f 0000 1f0f 0000 f40e 0000  ....R...........
-00004030: c90e 0000 800e 0000 350e 0000 2a0e 0000  ........5...*...
-00004040: 240e 0000 ee0d 0000 a40d 0000 9d0d 0000  $...............
-00004050: 6b0d 0000 280d 0000 270d 0000 f20c 0000  k...(...'.......
-00004060: f10c 0000 aa0c 0000 660c 0000 650c 0000  ........f...e...
-00004070: 1a0c 0000 e00b 0000 df0b 0000 c10b 0000  ................
-00004080: 980b 0000 400b 0000 3a0b 0000 f00a 0000  ....@...:.......
-00004090: a40a 0000 a30a 0000 850a 0000 4f0a 0000  ............O...
-000040a0: 450a 0000 2b0a 0000 f309 0000 aa09 0000  E...+...........
-000040b0: 6709 0000 2409 0000 e908 0000 ae08 0000  g...$...........
-000040c0: a308 0000 9d08 0000 6308 0000 1908 0000  ........c.......
-000040d0: 1208 0000 e007 0000 9d07 0000 9c07 0000  ................
-000040e0: 6307 0000 6207 0000 4407 0000 0b07 0000  c...b...D.......
-000040f0: 0107 0000 cd06 0000 8d06 0000 4d06 0000  ............M...
-00004100: 0d06 0000 cb05 0000 c005 0000 ba05 0000  ................
-00004110: 9405 0000 8605 0000 6d05 0000 5605 0000  ........m...V...
-00004120: 3d05 0000 2605 0000 0e05 0000 f604 0000  =...&...........
-00004130: ef04 0000 b904 0000 a304 0000 7604 0000  ............v...
-00004140: 4904 0000 1c04 0000 ef03 0000 c103 0000  I...............
-00004150: b703 0000 7903 0000 3c03 0000 fa02 0000  ....y...<.......
-00004160: f902 0000 c602 0000 c502 0000 7702 0000  ............w...
-00004170: 7602 0000 5802 0000 f701 0000 d601 0000  v...X...........
-00004180: d501 0000 b801 0000 b701 0000 9401 0000  ................
-00004190: 9901 0000 2020 2020 2020 2020 6173 7365  ....        asse
-000041a0: 7274 2066 696c 6c20 3d3d 2022 6661 6b65  rt fill == "fake
-000041b0: 5f66 696c 6c22 0000 2020 2020 2020 2020  _fill"..        
-000041c0: 6669 6c6c 203d 2073 7562 746f 7461 6c2e  fill = subtotal.
-000041d0: 6669 6c6c 0000 2020 2020 2020 2020 7375  fill..        su
-000041e0: 6274 6f74 616c 203d 205f 5375 6274 6f74  btotal = _Subtot
-000041f0: 616c 287b 2266 6920 2020 2040 7079 7465  al({"fi    @pyte
-00004200: 7374 2e6d 6120 2020 2040 7079 7465 7374  st.ma    @pytest
-00004210: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-00004220: 6528 2273 7562 746f 7461 6c5f 6469 6374  e("subtotal_dict
-00004230: 2c20 6578 7065 6374 6564 5f66 696c 6c22  , expected_fill"
-00004240: 2c20 2828 7b22 6669 6c6c 223a 2022 6661  , (({"fill": "fa
-00004250: 6b65 5f66 696c 6c22 2020 2020 4070 7974  ke_fill"    @pyt
-00004260: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
-00004270: 7269 7a65 2800 0020 2020 2020 2020 206e  rize(..        n
-00004280: 702e 7465 7374 696e 672e 6173 7365 7274  p.testing.assert
-00004290: 5f61 7272 6179 5f61 6c6d 6f73 745f 6571  _array_almost_eq
-000042a0: 7561 6c28 7375 6274 7261 6865 6e64 5f69  ual(subtrahend_i
-000042b0: 6478 732c 2065 7870 6563 7465 645f 7661  dxs, expected_va
-000042c0: 6c75 6529 0000 2020 2020 2020 2020 7375  lue)..        su
-000042d0: 6274 7261 6865 6e64 5f69 6478 7320 3d20  btrahend_idxs = 
-000042e0: 7375 6274 6f74 616c 2e73 7562 7472 6168  subtotal.subtrah
-000042f0: 656e 645f 6964 7873 0000 2020 2020 2020  end_idxs..      
-00004300: 2020 7375 6274 6f74 616c 203d 205f 5375    subtotal = _Su
-00004310: 6274 6f74 616c 2873 7562 746f 7461 6c5f  btotal(subtotal_
-00004320: 6469 6374 2c20 7661 6c69 645f 656c 656d  dict, valid_elem
-00004330: 656e 7473 2c20 4e6f 6e65 2900 2020 2020  ents, None).    
-00004340: 2020 2020 7661 6c69 645f 656c 656d 656e      valid_elemen
-00004350: 7473 203d 205f 5661 6c69 6445 6c65 6d65  ts = _ValidEleme
-00004360: 6e74 7328 616c 6c5f 656c 656d 656e 7473  nts(all_elements
-00004370: 5f2c 204e 6f6e 6529 0020 2020 2020 2020  _, None).       
-00004380: 2061 6c6c 5f65 6c65 6d65 6e74 735f 2e5f   all_elements_._
-00004390: 5f69 7465 725f 5f2e 7265 7475 726e 5f76  _iter__.return_v
-000043a0: 616c 7565 203d 2069 7465 7228 656c 656d  alue = iter(elem
-000043b0: 656e 7473 5f29 0020 2020 2020 2020 2029  ents_).        )
-000043c0: 0020 2020 2020 2020 2020 2020 205f 456c  .            _El
-000043d0: 656d 656e 7428 7b22 6964 223a 2039 397d  ement({"id": 99}
-000043e0: 2c20 4e6f 6e65 2c20 4e6f 6e65 292c 0020  , None, None),. 
-000043f0: 2020 2020 2020 2020 2020 205f 456c 656d             _Elem
-00004400: 656e 7428 7b22 6964 223a 2034 7d2c 204e  ent({"id": 4}, N
-00004410: 6f6e 652c 204e 6f6e 6529 2c00 2020 2020  one, None),.    
-00004420: 2020 2020 2020 2020 5f45 6c65 6d65 6e74          _Element
-00004430: 287b 2269 6422 3a20 337d 2c20 4e6f 6e65  ({"id": 3}, None
-00004440: 2c20 4e6f 6e65 292c 0020 2020 2020 2020  , None),.       
-00004450: 2020 2020 205f 456c 656d 656e 7428 7b22       _Element({"
-00004460: 6964 223a 2032 7d2c 204e 6f6e 652c 204e  id": 2}, None, N
-00004470: 6f6e 6529 2c00 2020 2020 2020 2020 2020  one),.          
-00004480: 2020 5f45 6c65 6d65 6e74 287b 2269 6422    _Element({"id"
-00004490: 3a20 317d 2c20 4e6f 6e65 2c20 4e6f 6e65  : 1}, None, None
-000044a0: 292c 0020 2020 2020 2020 2065 6c65 6d65  ),.        eleme
-000044b0: 6e74 735f 203d 2028 0020 2020 2020 2020  nts_ = (.       
-000044c0: 2073 7562 7472 6168 656e 645f 6964 735f   subtrahend_ids_
-000044d0: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
-000044e0: 7375 6274 7261 6865 6e64 5f69 6473 0020  subtrahend_ids. 
-000044f0: 2020 2029 3a00 2020 2020 2020 2020 6578     ):.        ex
-00004500: 7065 6374 6564 5f76 616c 7565 2c00 2020  pected_value,.  
-00004510: 2020 2020 2020 7375 6274 7261 6865 6e64        subtrahend
-00004520: 5f69 6473 2c00 2020 2020 2020 2020 7375  _ids,.        su
-00004530: 6274 6f74 616c 5f64 6963 742c 0020 2020  btotal_dict,.   
-00004540: 2020 2020 2076 616c 6964 5f65 6c65 6d65       valid_eleme
-00004550: 6e74 735f 2c00 2020 2020 2020 2020 616c  nts_,.        al
-00004560: 6c5f 656c 656d 656e 7473 5f2c 0020 2020  l_elements_,.   
-00004570: 2020 2020 2073 7562 7472 6168 656e 645f       subtrahend_
-00004580: 6964 735f 2c00 2020 2020 2020 2020 7365  ids_,.        se
-00004590: 6c66 2c00 2020 2020 6465 6620 6974 5f6b  lf,.    def it_k
-000045a0: 6e6f 7773 5f74 6865 5f73 7562 7472 6168  nows_the_subtrah
-000045b0: 656e 645f 6964 7873 2800 2020 2020 2900  end_idxs(.    ).
-000045c0: 2020 2020 2020 2020 292c 0020 2020 2020          ),.     
-000045d0: 2020 2020 2020 2028 7b22 6b77 6172 6773         ({"kwargs
-000045e0: 223a 207b 226e 6567 6174 6976 6522 3a20  ": {"negative": 
-000045f0: 5b34 2c20 3939 5d7d 7d2c 2028 342c 2039  [4, 99]}}, (4, 9
-00004600: 3929 2c20 5b33 2c20 345d 292c 0020 2020  9), [3, 4]),.   
-00004610: 2020 2020 2020 2020 2028 7b22 6b77 6172           ({"kwar
-00004620: 6773 223a 207b 226e 6567 6174 6976 6522  gs": {"negative"
-00004630: 3a20 5b33 2c20 345d 7d7d 2c20 2833 2c20  : [3, 4]}}, (3, 
-00004640: 3429 2c20 5b32 2c20 335d 292c 0020 2020  4), [2, 3]),.   
-00004650: 2020 2020 2020 2020 2028 7b22 6b77 6172           ({"kwar
-00004660: 6773 223a 207b 226e 6567 6174 6976 6522  gs": {"negative"
-00004670: 3a20 5b30 2c20 325d 7d7d 2c20 2831 2c20  : [0, 2]}}, (1, 
-00004680: 3229 2c20 5b30 2c20 315d 292c 0020 2020  2), [0, 1]),.   
-00004690: 2020 2020 2020 2020 2028 7b22 6b77 6172           ({"kwar
-000046a0: 6773 223a 207b 226e 6567 6174 6976 6522  gs": {"negative"
-000046b0: 3a20 5b31 2c20 325d 7d7d 2c20 2831 2c20  : [1, 2]}}, (1, 
-000046c0: 3229 2c20 5b30 2c20 315d 292c 0020 2020  2), [0, 1]),.   
-000046d0: 2020 2020 2020 2020 2028 7b22 6b77 6172           ({"kwar
-000046e0: 6773 223a 207b 226e 6567 6174 6976 6522  gs": {"negative"
-000046f0: 3a20 5b5d 7d7d 2c20 2829 2c20 5b5d 292c  : []}}, (), []),
-00004700: 0020 2020 2020 2020 2028 0020 2020 2020  .        (.     
-00004710: 2020 2022 7375 6274 6f74 616c 5f64 6963     "subtotal_dic
-00004720: 742c 2073 7562 7472 6168 656e 645f 6964  t, subtrahend_id
-00004730: 732c 2065 7870 6563 7465 645f 7661 6c75  s, expected_valu
-00004740: 6522 2c00 2020 2020 4070 7974 6573 742e  e",.    @pytest.
-00004750: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
-00004760: 2800 0020 2020 2020 2020 2061 7373 6572  (..        asser
-00004770: 7420 7375 6274 6f74 616c 2e73 7562 7472  t subtotal.subtr
-00004780: 6168 656e 645f 6964 7320 3d3d 2065 7870  ahend_ids == exp
-00004790: 6563 7465 645f 7661 6c75 6500 0020 2020  ected_value..   
-000047a0: 2020 2020 2073 7562 746f 7461 6c20 3d20       subtotal = 
-000047b0: 5f53 7562 746f 7461 6c28 7375 6274 6f74  _Subtotal(subtot
-000047c0: 616c 5f64 6963 742c 2076 616c 6964 5f65  al_dict, valid_e
-000047d0: 6c65 6d65 6e74 735f 2c20 4e6f 6e65 2900  lements_, None).
-000047e0: 2020 2020 2020 2020 7661 6c69 645f 656c          valid_el
-000047f0: 656d 656e 7473 5f2e 656c 656d 656e 745f  ements_.element_
-00004800: 6964 7320 3d20 656c 656d 656e 745f 6964  ids = element_id
-00004810: 7300 2020 2020 293a 0020 2020 2020 2020  s.    ):.       
-00004820: 2073 656c 662c 2073 7562 746f 7461 6c5f   self, subtotal_
-00004830: 6469 6374 2c20 656c 656d 656e 745f 6964  dict, element_id
-00004840: 732c 2065 7870 6563 7465 645f 7661 6c75  s, expected_valu
-00004850: 652c 2076 616c 6964 5f65 6c65 6d65 6e74  e, valid_element
-00004860: 735f 0020 2020 2064 6566 2069 745f 7072  s_.    def it_pr
-00004870: 6f76 6964 6573 5f61 6363 6573 735f 746f  ovides_access_to
-00004880: 5f74 6865 5f73 7562 7472 6168 656e 645f  _the_subtrahend_
-00004890: 656c 656d 656e 745f 6964 7328 0020 2020  element_ids(.   
-000048a0: 2029 0020 2020 2020 2020 2029 2c00 2020   ).        ),.  
-000048b0: 2020 2020 2020 2020 2020 287b 226b 7761            ({"kwa
-000048c0: 7267 7322 3a20 7b22 6e65 6761 7469 7665  rgs": {"negative
-000048d0: 223a 205b 312c 2032 2c20 335d 7d7d 2c20  ": [1, 2, 3]}}, 
-000048e0: 7b7d 2c20 2829 292c 0020 2020 2020 2020  {}, ()),.       
-000048f0: 2020 2020 2028 7b22 6b77 6172 6773 223a       ({"kwargs":
-00004900: 207b 226e 6567 6174 6976 6522 3a20 5b5d   {"negative": []
-00004910: 7d7d 2c20 7b31 2c20 322c 2033 7d2c 2028  }}, {1, 2, 3}, (
-00004920: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-00004930: 287b 226b 7761 7267 7322 3a20 7b22 6e65  ({"kwargs": {"ne
-00004940: 6761 7469 7665 223a 205b 332c 2032 5d7d  gative": [3, 2]}
-00004950: 7d2c 207b 312c 2032 2c20 337d 2c20 2833  }, {1, 2, 3}, (3
-00004960: 2c20 3229 292c 0020 2020 2020 2020 2020  , 2)),.         
-00004970: 2020 2028 7b22 6b77 6172 6773 223a 207b     ({"kwargs": {
-00004980: 226e 6567 6174 6976 6522 3a20 5b31 2c20  "negative": [1, 
-00004990: 322c 2033 5d7d 7d2c 207b 312c 2033 7d2c  2, 3]}}, {1, 3},
-000049a0: 2028 312c 2033 2929 2c00 2020 2020 2020   (1, 3)),.      
-000049b0: 2020 2020 2020 287b 226b 7761 7267 7322        ({"kwargs"
-000049c0: 3a20 7b22 6e65 6761 7469 7665 223a 205b  : {"negative": [
-000049d0: 312c 2032 2c20 335d 7d7d 2c20 7b31 2c20  1, 2, 3]}}, {1, 
-000049e0: 322c 2033 7d2c 2028 312c 2032 2c20 3329  2, 3}, (1, 2, 3)
-000049f0: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-00004a00: 7b22 6b77 6172 6773 223a 207b 226e 6567  {"kwargs": {"neg
-00004a10: 6174 6976 6522 3a20 5b31 5d7d 7d2c 207b  ative": [1]}}, {
-00004a20: 317d 2c20 2831 2c29 292c 0020 2020 2020  1}, (1,)),.     
-00004a30: 2020 2020 2020 2028 7b7d 2c20 7b7d 2c20         ({}, {}, 
-00004a40: 2829 292c 0020 2020 2020 2020 2028 0020  ()),.        (. 
-00004a50: 2020 2020 2020 2022 7375 6274 6f74 616c         "subtotal
-00004a60: 5f64 6963 742c 2065 6c65 6d65 6e74 5f69  _dict, element_i
-00004a70: 6473 2c20 6578 7065 6374 6564 5f76 616c  ds, expected_val
-00004a80: 7565 222c 0020 2020 2040 7079 7465 7374  ue",.    @pytest
-00004a90: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-00004aa0: 6528 0000 2020 2020 2020 2020 6173 7365  e(..        asse
-00004ab0: 7274 205f 5375 6274 6f74 616c 2873 7562  rt _Subtotal(sub
-00004ac0: 746f 7461 6c5f 6469 6374 2c20 4e6f 6e65  total_dict, None
-00004ad0: 2c20 4e6f 6e65 292e 6c61 6265 6c20 3d3d  , None).label ==
-00004ae0: 2065 7870 6563 7465 645f 7661 6c75 6500   expected_value.
-00004af0: 2020 2020 6465 6620 6974 5f6b 6e6f 7773      def it_knows
-00004b00: 5f74 6865 5f73 7562 746f 7461 6c5f 6c61  _the_subtotal_la
-00004b10: 6265 6c28 7365 6c66 2c20 7375 6274 6f74  bel(self, subtot
-00004b20: 616c 5f64 6963 742c 2065 7870 6563 7465  al_dict, expecte
-00004b30: 645f 7661 6c75 6529 3a00 2020 2020 2900  d_value):.    ).
-00004b40: 2020 2020 2020 2020 2828 7b7d 2c20 2222          (({}, ""
-00004b50: 292c 2028 7b22 6e61 6d65 223a 204e 6f6e  ), ({"name": Non
-00004b60: 657d 2c20 2222 292c 2028 7b22 6e61 6d65  e}, ""), ({"name
-00004b70: 223a 2022 227d 2c20 2222 292c 2028 7b22  ": ""}, ""), ({"
-00004b80: 6e61 6d65 223a 2022 4a6f 6522 7d2c 2022  name": "Joe"}, "
-00004b90: 4a6f 6522 2929 2c00 2020 2020 2020 2020  Joe")),.        
-00004ba0: 2273 7562 746f 7461 6c5f 6469 6374 2c20  "subtotal_dict, 
-00004bb0: 6578 7065 6374 6564 5f76 616c 7565 222c  expected_value",
-00004bc0: 0020 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-00004bd0: 6b2e 7061 7261 6d65 7472 697a 6528 0000  k.parametrize(..
-00004be0: 2020 2020 2020 2020 6173 7365 7274 205f          assert _
-00004bf0: 5375 6274 6f74 616c 287b 7d2c 204e 6f6e  Subtotal({}, Non
-00004c00: 652c 2032 3429 2e69 6e73 6572 7469 6f6e  e, 24).insertion
-00004c10: 5f69 6420 3d3d 2032 3400 2020 2020 6465  _id == 24.    de
-00004c20: 6620 616e 645f 6974 5f75 7365 735f 6974  f and_it_uses_it
-00004c30: 735f 6661 6c6c 6261 636b 5f69 6e73 6572  s_fallback_inser
-00004c40: 7469 6f6e 5f69 645f 7768 656e 5f6e 6f74  tion_id_when_not
-00004c50: 5f61 7373 6967 6e65 645f 6f6e 6528 7365  _assigned_one(se
-00004c60: 6c66 293a 0000 2020 2020 2020 2020 6173  lf):..        as
-00004c70: 7365 7274 205f 5375 6274 6f74 616c 287b  sert _Subtotal({
-00004c80: 2269 6422 3a20 3432 7d2c 204e 6f6e 652c  "id": 42}, None,
-00004c90: 204e 6f6e 6529 2e69 6e73 6572 7469 6f6e   None).insertion
-00004ca0: 5f69 6420 3d3d 2034 3200 2020 2020 6465  _id == 42.    de
-00004cb0: 6620 6974 5f6b 6e6f 7773 5f69 7473 5f69  f it_knows_its_i
-00004cc0: 6e73 6572 7469 6f6e 5f69 645f 7768 656e  nsertion_id_when
-00004cd0: 5f69 745f 6861 735f 6265 656e 5f61 7373  _it_has_been_ass
-00004ce0: 6967 6e65 645f 6f6e 6528 7365 6c66 293a  igned_one(self):
-00004cf0: 0000 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00004d00: 2073 7562 746f 7461 6c2e 6164 6465 6e64   subtotal.addend
-00004d10: 5f69 6473 203d 3d20 6578 7065 6374 6564  _ids == expected
-00004d20: 5f76 616c 7565 0000 2020 2020 2020 2020  _value..        
-00004d30: 7375 6274 6f74 616c 203d 205f 5375 6274  subtotal = _Subt
-00004d40: 6f74 616c 2873 7562 746f 7461 6c5f 6469  otal(subtotal_di
-00004d50: 6374 2c20 7661 6c69 645f 656c 656d 656e  ct, valid_elemen
-00004d60: 7473 5f2c 204e 6f6e 6529 0020 2020 2020  ts_, None).     
-00004d70: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
-00004d80: 735f 2e65 6c65 6d65 6e74 5f69 6473 203d  s_.element_ids =
-00004d90: 2065 6c65 6d65 6e74 5f69 6473 0020 2020   element_ids.   
-00004da0: 2029 3a00 2020 2020 2020 2020 7365 6c66   ):.        self
-00004db0: 2c20 7375 6274 6f74 616c 5f64 6963 742c  , subtotal_dict,
-00004dc0: 2065 6c65 6d65 6e74 5f69 6473 2c20 6578   element_ids, ex
-00004dd0: 7065 6374 6564 5f76 616c 7565 2c20 7661  pected_value, va
-00004de0: 6c69 645f 656c 656d 656e 7473 5f00 2020  lid_elements_.  
-00004df0: 2020 6465 6620 6974 5f70 726f 7669 6465    def it_provide
-00004e00: 735f 6163 6365 7373 5f74 6f5f 7468 655f  s_access_to_the_
-00004e10: 6164 6465 6e64 5f65 6c65 6d65 6e74 5f69  addend_element_i
-00004e20: 6473 2800 2020 2020 2900 2020 2020 2020  ds(.    ).      
-00004e30: 2020 292c 0020 2020 2020 2020 2020 2020    ),.           
-00004e40: 2028 7b22 6172 6773 223a 205b 315d 2c20   ({"args": [1], 
-00004e50: 226b 7761 7267 7322 3a20 7b22 706f 7369  "kwargs": {"posi
-00004e60: 7469 7665 223a 205b 325d 7d7d 2c20 7b31  tive": [2]}}, {1
-00004e70: 2c20 322c 2033 7d2c 2028 322c 2929 2c00  , 2, 3}, (2,)),.
-00004e80: 2020 2020 2020 2020 2020 2020 287b 226b              ({"k
-00004e90: 7761 7267 7322 3a20 7b22 706f 7369 7469  wargs": {"positi
-00004ea0: 7665 223a 205b 312c 2032 2c20 335d 7d7d  ve": [1, 2, 3]}}
-00004eb0: 2c20 7b31 2c20 322c 2033 7d2c 2028 312c  , {1, 2, 3}, (1,
-00004ec0: 2032 2c20 3329 292c 0020 2020 2020 2020   2, 3)),.       
-00004ed0: 2020 2020 2028 7b22 6172 6773 223a 205b       ({"args": [
-00004ee0: 312c 2032 2c20 335d 7d2c 207b 7d2c 2028  1, 2, 3]}, {}, (
-00004ef0: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-00004f00: 287b 2261 7267 7322 3a20 5b5d 7d2c 207b  ({"args": []}, {
-00004f10: 312c 2032 2c20 337d 2c20 2829 292c 0020  1, 2, 3}, ()),. 
-00004f20: 2020 2020 2020 2020 2020 2028 7b22 6172             ({"ar
-00004f30: 6773 223a 205b 332c 2032 5d7d 2c20 7b31  gs": [3, 2]}, {1
-00004f40: 2c20 322c 2033 7d2c 2028 332c 2032 2929  , 2, 3}, (3, 2))
-00004f50: 2c00 2020 2020 2020 2020 2020 2020 287b  ,.            ({
-00004f60: 2261 7267 7322 3a20 5b31 2c20 322c 2033  "args": [1, 2, 3
-00004f70: 5d7d 2c20 7b31 2c20 337d 2c20 2831 2c20  ]}, {1, 3}, (1, 
-00004f80: 3329 292c 0020 2020 2020 2020 2020 2020  3)),.           
-00004f90: 2028 7b22 6172 6773 223a 205b 312c 2032   ({"args": [1, 2
-00004fa0: 2c20 335d 7d2c 207b 312c 2032 2c20 337d  , 3]}, {1, 2, 3}
-00004fb0: 2c20 2831 2c20 322c 2033 2929 2c00 2020  , (1, 2, 3)),.  
-00004fc0: 2020 2020 2020 2020 2020 287b 2261 7267            ({"arg
-00004fd0: 7322 3a20 5b31 5d7d 2c20 7b31 7d2c 2028  s": [1]}, {1}, (
-00004fe0: 312c 2929 2c00 2020 2020 2020 2020 2020  1,)),.          
-00004ff0: 2020 287b 7d2c 207b 7d2c 2028 2929 2c00    ({}, {}, ()),.
-00005000: 6164 0000 000f 0000 3c0f 0000 0010 0000  ad......<.......
-00005010: 0800 0000 0000 0000 e30f 0000 e20f 0000  ................
-00005020: bd0f 0000 bc0f 0000 750f 0000 740f 0000  ........u...t...
-00005030: 600f 0000 3c0f 0000 0000 0000 0000 0000  `...<...........
-00005040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000050f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000051f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000052f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000053f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000054f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000055f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000056f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000057f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000058f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000059f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00005f00: 0000 0000 0000 0000 0000 0000 0000 0020  ............... 
-00005f10: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
-00005f20: 7220 2020 2040 7079 7465 7374 2e66 6978  r    @pytest.fix
-00005f30: 7475 7265 0000 2020 2020 2020 2020 2020  ture..          
-00005f40: 6465 6620 6164 6465 6e64 5f69 6473 5f28  def addend_ids_(
-00005f50: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-00005f60: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-00005f70: 7572 6500 0020 2020 2023 2066 6978 7475  ure..    # fixtu
-00005f80: 7265 2063 6f6d 706f 6e65 6e74 7320 2d2d  re components --
-00005f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d00 0020 2020  -----------..   
-00005fc0: 2020 2020 2061 7373 6572 7420 6669 6c6c       assert fill
-00005fd0: 203d 3d20 6578 7065 6374 6564 5f66 696c   == expected_fil
-00005fe0: 6c00 0020 2020 2020 2020 2066 696c 6c20  l..        fill 
-00005ff0: 3d20 7375 6274 6f74 616c 2e66 696c 6c00  = subtotal.fill.
-00006000: 6164 0000 ea0c 0000 620d 0000 0010 0000  ad......b.......
-00006010: 1700 0000 0000 0000 c80f 0000 c70f 0000  ................
-00006020: aa0f 0000 a90f 0000 840f 0000 830f 0000  ................
-00006030: 3c0f 0000 3b0f 0000 270f 0000 030f 0000  <...;...'.......
-00006040: c40e 0000 c30e 0000 af0e 0000 890e 0000  ................
-00006050: 550e 0000 540e 0000 400e 0000 180e 0000  U...T...@.......
-00006060: d50d 0000 d40d 0000 c00d 0000 980d 0000  ................
-00006070: 620d 0000 610d 0000 0000 0000 0000 0000  b...a...........
-00006080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000060f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000061f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000062f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d60: 0000 2020 2020 2020 2020 7265 7475 726e  ..        return
-00006d70: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
-00006d80: 6571 7565 7374 2c20 5f56 616c 6964 456c  equest, _ValidEl
-00006d90: 656d 656e 7473 2900 2020 2020 6465 6620  ements).    def 
-00006da0: 7661 6c69 645f 656c 656d 656e 7473 5f28  valid_elements_(
-00006db0: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-00006dc0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-00006dd0: 7572 6500 0020 2020 2020 2020 2072 6574  ure..        ret
-00006de0: 7572 6e20 7072 6f70 6572 7479 5f6d 6f63  urn property_moc
-00006df0: 6b28 7265 7175 6573 742c 205f 5375 6274  k(request, _Subt
-00006e00: 6f74 616c 2c20 2273 7562 7472 6168 656e  otal, "subtrahen
-00006e10: 645f 6964 7322 2900 2020 2020 6465 6620  d_ids").    def 
-00006e20: 7375 6274 7261 6865 6e64 5f69 6473 5f28  subtrahend_ids_(
-00006e30: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-00006e40: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-00006e50: 7572 6500 0020 2020 2020 2020 2072 6574  ure..        ret
-00006e60: 7572 6e20 696e 7374 616e 6365 5f6d 6f63  urn instance_moc
-00006e70: 6b28 7265 7175 6573 742c 205f 416c 6c45  k(request, _AllE
-00006e80: 6c65 6d65 6e74 7329 0020 2020 2064 6566  lements).    def
-00006e90: 2061 6c6c 5f65 6c65 6d65 6e74 735f 2873   all_elements_(s
-00006ea0: 656c 662c 2072 6571 7565 7374 293a 0020  elf, request):. 
-00006eb0: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
-00006ec0: 7265 0000 2020 2020 2020 2020 7265 7475  re..        retu
-00006ed0: 726e 2070 726f 7065 7274 795f 6d6f 636b  rn property_mock
-00006ee0: 2872 6571 7565 7374 2c20 5f53 7562 746f  (request, _Subto
-00006ef0: 7461 6c2c 2022 6164 6465 6e64 5f69 6473  tal, "addend_ids
-00006f00: 2229 0020 2020 2064 6566 2061 6464 656e  ").    def adden
-00006f10: 645f 6964 735f 2873 656c 662c 2072 6571  d_ids_(self, req
-00006f20: 7565 7374 293a 0020 2020 2040 7079 7465  uest):.    @pyte
-00006f30: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-00006f40: 2320 6669 7874 7572 6520 636f 6d70 6f6e  # fixture compon
-00006f50: 656e 7473 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ents -----------
-00006f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006f80: 2d2d 0000 2020 2020 2020 2020 6173 7365  --..        asse
-00006f90: 7274 2066 696c 6c20 3d3d 2065 7870 6563  rt fill == expec
-00006fa0: 7465 645f 6669 6c6c 0000 2020 2020 2020  ted_fill..      
-00006fb0: 2020 6669 6c6c 203d 2073 7562 746f 7461    fill = subtota
-00006fc0: 6c2e 6669 6c6c 0000 2020 2020 2020 2020  l.fill..        
-00006fd0: 7375 6274 6f74 616c 203d 205f 5375 6274  subtotal = _Subt
-00006fe0: 6f74 616c 2873 7562 746f 7461 6c5f 6469  otal(subtotal_di
-00006ff0: 6374 2c20 4e6f 6e65 2c20 4e6f 6e65 2900  ct, None, None).
-00007000: 6164 0000 3000 0000 f801 0000 0010 0000  ad..0...........
-00007010: 6b00 0000 0000 0000 ec0f 0000 cd0f 0000  k...............
-00007020: 910f 0000 900f 0000 7c0f 0000 520f 0000  ........|...R...
-00007030: 070f 0000 060f 0000 f20e 0000 cb0e 0000  ................
-00007040: 850e 0000 840e 0000 700e 0000 420e 0000  ........p...B...
-00007050: f60d 0000 f50d 0000 f40d 0000 d70d 0000  ................
-00007060: 9f0d 0000 6f0d 0000 320d 0000 310d 0000  ....o...2...1...
-00007070: fb0c 0000 fa0c 0000 c90c 0000 c80c 0000  ................
-00007080: aa0c 0000 800c 0000 760c 0000 350c 0000  ........v...5...
-00007090: 270c 0000 d80b 0000 b70b 0000 a80b 0000  '...............
-000070a0: 9d0b 0000 970b 0000 480b 0000 0c0b 0000  ........H.......
-000070b0: 0b0b 0000 de0a 0000 dd0a 0000 b20a 0000  ................
-000070c0: b10a 0000 790a 0000 2c0a 0000 fb09 0000  ....y...,.......
-000070d0: d609 0000 d509 0000 b709 0000 8909 0000  ................
-000070e0: 7f09 0000 3409 0000 2609 0000 da08 0000  ....4...&.......
-000070f0: c308 0000 b408 0000 a608 0000 4e08 0000  ............N...
-00007100: 3708 0000 2808 0000 1a08 0000 0808 0000  7...(...........
-00007110: ea07 0000 ba07 0000 7907 0000 6307 0000  ........y...c...
-00007120: 5007 0000 3a07 0000 2b07 0000 1d07 0000  P...:...+.......
-00007130: c706 0000 b006 0000 a106 0000 9606 0000  ................
-00007140: 9006 0000 3806 0000 fc05 0000 fb05 0000  ....8...........
-00007150: ca05 0000 c905 0000 9c05 0000 9b05 0000  ................
-00007160: 7d05 0000 4405 0000 3a05 0000 0705 0000  }...D...:.......
-00007170: d404 0000 9c04 0000 5f04 0000 2f04 0000  ........_.../...
-00007180: 2404 0000 1e04 0000 f403 0000 e603 0000  $...............
-00007190: d303 0000 c103 0000 af03 0000 9703 0000  ................
-000071a0: 7d03 0000 5e03 0000 4003 0000 3903 0000  }...^...@...9...
-000071b0: 0703 0000 bb02 0000 7002 0000 3e02 0000  ........p...>...
-000071c0: f801 0000 f701 0000 0000 0000 0000 0000  ................
-000071d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000071e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000071f0: 0000 0000 0000 0000 2020 2020 2020 2020  ........        
-00007200: 7265 736f 6c76 655f 6361 745f 6361 6c6c  resolve_cat_call
-00007210: 7320 3d20 5b63 616c 6c28 7261 775f 6469  s = [call(raw_di
-00007220: 6d65 6e73 696f 6e29 5d20 6966 2063 6174  mension)] if cat
-00007230: 5f74 7970 6520 656c 7365 205b 5d00 2020  _type else [].  
-00007240: 2020 2020 2020 7261 775f 6469 6d65 6e73        raw_dimens
-00007250: 696f 6e20 3d20 5f52 6177 4469 6d65 6e73  ion = _RawDimens
-00007260: 696f 6e28 4e6f 6e65 2c20 4e6f 6e65 2900  ion(None, None).
-00007270: 2020 2020 2020 2020 5f72 6573 6f6c 7665          _resolve
-00007280: 5f61 7272 6179 5f74 7970 655f 2e72 6574  _array_type_.ret
-00007290: 7572 6e5f 7661 6c75 6520 3d20 6172 725f  urn_value = arr_
-000072a0: 7479 7065 2069 6620 6172 725f 7479 7065  type if arr_type
-000072b0: 2065 6c73 6520 4e6f 6e65 0020 2020 2020   else None.     
-000072c0: 2020 205f 7265 736f 6c76 655f 6361 7465     _resolve_cate
-000072d0: 676f 7269 6361 6c5f 2e72 6574 7572 6e5f  gorical_.return_
-000072e0: 7661 6c75 6520 3d20 6361 745f 7479 7065  value = cat_type
-000072f0: 2069 6620 6361 745f 7479 7065 2065 6c73   if cat_type els
-00007300: 6520 4e6f 6e65 0020 2020 2020 2020 205f  e None.        _
-00007310: 6261 7365 5f74 7970 655f 7072 6f70 5f2e  base_type_prop_.
-00007320: 7265 7475 726e 5f76 616c 7565 203d 2062  return_value = b
-00007330: 6173 655f 7479 7065 0020 2020 2029 3a00  ase_type.    ):.
-00007340: 2020 2020 2020 2020 5f72 6573 6f6c 7665          _resolve
-00007350: 5f61 7272 6179 5f74 7970 655f 2c00 2020  _array_type_,.  
-00007360: 2020 2020 2020 5f72 6573 6f6c 7665 5f63        _resolve_c
-00007370: 6174 6567 6f72 6963 616c 5f2c 0020 2020  ategorical_,.   
-00007380: 2020 2020 205f 6261 7365 5f74 7970 655f       _base_type_
-00007390: 7072 6f70 5f2c 0020 2020 2020 2020 2065  prop_,.        e
-000073a0: 7870 6563 7465 645f 7661 6c75 652c 0020  xpected_value,. 
-000073b0: 2020 2020 2020 2061 7272 5f74 7970 652c         arr_type,
-000073c0: 0020 2020 2020 2020 2063 6174 5f74 7970  .        cat_typ
-000073d0: 652c 0020 2020 2020 2020 2062 6173 655f  e,.        base_
-000073e0: 7479 7065 2c00 2020 2020 2020 2020 7365  type,.        se
-000073f0: 6c66 2c00 2020 2020 6465 6620 6974 5f64  lf,.    def it_d
-00007400: 6574 6572 6d69 6e65 735f 7468 655f 6469  etermines_the_di
-00007410: 6d65 6e73 696f 6e5f 7479 7065 2800 2020  mension_type(.  
-00007420: 2020 2900 2020 2020 2020 2020 292c 0020    ).        ),. 
-00007430: 2020 2020 2020 2020 2020 2028 2265 6e75             ("enu
-00007440: 6d2e 7465 7874 222c 204e 6f6e 652c 204e  m.text", None, N
-00007450: 6f6e 652c 2044 542e 5445 5854 292c 0020  one, DT.TEXT),. 
-00007460: 2020 2020 2020 2020 2020 2028 2265 6e75             ("enu
-00007470: 6d2e 6e75 6d65 7269 6322 2c20 4e6f 6e65  m.numeric", None
-00007480: 2c20 4e6f 6e65 2c20 4454 2e42 494e 4e45  , None, DT.BINNE
-00007490: 445f 4e55 4d45 5249 4329 2c00 2020 2020  D_NUMERIC),.    
-000074a0: 2020 2020 2020 2020 2822 656e 756d 2e64          ("enum.d
-000074b0: 6174 6574 696d 6522 2c20 4e6f 6e65 2c20  atetime", None, 
-000074c0: 4e6f 6e65 2c20 4454 2e44 4154 4554 494d  None, DT.DATETIM
-000074d0: 4529 2c00 2020 2020 2020 2020 2020 2020  E),.            
-000074e0: 2822 656e 756d 2e76 6172 6961 626c 6522  ("enum.variable"
-000074f0: 2c20 4e6f 6e65 2c20 4454 2e4d 522c 2044  , None, DT.MR, D
-00007500: 542e 4d52 292c 0020 2020 2020 2020 2020  T.MR),.         
-00007510: 2020 2028 2263 6174 6567 6f72 6963 616c     ("categorical
-00007520: 222c 2044 542e 4341 542c 204e 6f6e 652c  ", DT.CAT, None,
-00007530: 2044 542e 4341 5429 2c00 2020 2020 2020   DT.CAT),.      
-00007540: 2020 2800 2020 2020 2020 2020 2262 6173    (.        "bas
-00007550: 655f 7479 7065 2c20 6361 745f 7479 7065  e_type, cat_type
-00007560: 2c20 6172 725f 7479 7065 2c20 6578 7065  , arr_type, expe
-00007570: 6374 6564 5f76 616c 7565 222c 0020 2020  cted_value",.   
-00007580: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
-00007590: 7261 6d65 7472 697a 6528 0000 2020 2020  rametrize(..    
-000075a0: 2020 2020 6173 7365 7274 2069 735f 6361      assert is_ca
-000075b0: 745f 6461 7465 203d 3d20 6578 7065 6374  t_date == expect
-000075c0: 6564 5f76 616c 7565 0000 2020 2020 2020  ed_value..      
-000075d0: 2020 6973 5f63 6174 5f64 6174 6520 3d20    is_cat_date = 
-000075e0: 7261 775f 6469 6d65 6e73 696f 6e2e 5f69  raw_dimension._i
-000075f0: 735f 6361 745f 6461 7465 0000 2020 2020  s_cat_date..    
-00007600: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
-00007610: 6e20 3d20 5f52 6177 4469 6d65 6e73 696f  n = _RawDimensio
-00007620: 6e28 6469 6d65 6e73 696f 6e5f 6469 6374  n(dimension_dict
-00007630: 2c20 4e6f 6e65 2900 2020 2020 6465 6620  , None).    def 
-00007640: 616e 645f 6974 5f6b 6e6f 7773 5f69 665f  and_it_knows_if_
-00007650: 6974 5f69 735f 615f 6361 7465 676f 7269  it_is_a_categori
-00007660: 6361 6c5f 6461 7465 2873 656c 662c 2064  cal_date(self, d
-00007670: 696d 656e 7369 6f6e 5f64 6963 742c 2065  imension_dict, e
-00007680: 7870 6563 7465 645f 7661 6c75 6529 3a00  xpected_value):.
-00007690: 2020 2020 2900 2020 2020 2020 2020 292c      ).        ),
-000076a0: 0020 2020 2020 2020 2020 2020 2029 2c00  .            ),.
-000076b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076c0: 4661 6c73 652c 0020 2020 2020 2020 2020  False,.         
-000076d0: 2020 2020 2020 207b 2274 7970 6522 3a20         {"type": 
-000076e0: 7b22 636c 6173 7322 3a20 2265 6e75 6d22  {"class": "enum"
-000076f0: 2c20 2263 6174 6567 6f72 6965 7322 3a20  , "categories": 
-00007700: 5b7b 2264 6174 6522 3a20 2232 3031 392d  [{"date": "2019-
-00007710: 3031 227d 2c20 7b7d 5d7d 7d2c 0020 2020  01"}, {}]}},.   
-00007720: 2020 2020 2020 2020 2028 0020 2020 2020           (.     
-00007730: 2020 2020 2020 2029 2c00 2020 2020 2020         ),.      
-00007740: 2020 2020 2020 2020 2020 5472 7565 2c00            True,.
-00007750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007760: 7d2c 0020 2020 2020 2020 2020 2020 2020  },.             
-00007770: 2020 2020 2020 207d 0020 2020 2020 2020         }.       
-00007780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007790: 2022 6361 7465 676f 7269 6573 223a 205b   "categories": [
-000077a0: 7b22 6461 7465 223a 2022 3230 3139 2d30  {"date": "2019-0
-000077b0: 3122 7d2c 207b 7d5d 2c00 2020 2020 2020  1"}, {}],.      
-000077c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077d0: 2020 2263 6c61 7373 223a 2022 6361 7465    "class": "cate
-000077e0: 676f 7269 6361 6c22 2c00 2020 2020 2020  gorical",.      
-000077f0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00007800: 7970 6522 3a20 7b00 2020 2020 2020 2020  ype": {.        
-00007810: 2020 2020 2020 2020 7b00 2020 2020 2020          {.      
-00007820: 2020 2020 2020 2800 2020 2020 2020 2020        (.        
-00007830: 2020 2020 292c 0020 2020 2020 2020 2020      ),.         
-00007840: 2020 2020 2020 2046 616c 7365 2c00 2020         False,.  
-00007850: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
-00007860: 7479 7065 223a 207b 2263 6c61 7373 223a  type": {"class":
-00007870: 2022 6361 7465 676f 7269 6361 6c22 2c20   "categorical", 
-00007880: 2263 6174 6567 6f72 6965 7322 3a20 5b7b  "categories": [{
-00007890: 2266 6f6f 223a 2022 6261 7222 7d2c 207b  "foo": "bar"}, {
-000078a0: 7d5d 7d7d 2c00 2020 2020 2020 2020 2020  }]}},.          
-000078b0: 2020 2800 2020 2020 2020 2020 2020 2020    (.            
-000078c0: 292c 0020 2020 2020 2020 2020 2020 2020  ),.             
-000078d0: 2020 2046 616c 7365 2c00 2020 2020 2020     False,.      
-000078e0: 2020 2020 2020 2020 2020 7b22 7479 7065            {"type
-000078f0: 223a 207b 2263 6c61 7373 223a 2022 6361  ": {"class": "ca
-00007900: 7465 676f 7269 6361 6c22 2c20 2263 6174  tegorical", "cat
-00007910: 6567 6f72 6965 7322 3a20 5b7b 7d2c 207b  egories": [{}, {
-00007920: 7d5d 7d7d 2c00 2020 2020 2020 2020 2020  }]}},.          
-00007930: 2020 2800 2020 2020 2020 2020 2020 2020    (.            
-00007940: 287b 2274 7970 6522 3a20 7b22 636c 6173  ({"type": {"clas
-00007950: 7322 3a20 2263 6174 6567 6f72 6963 616c  s": "categorical
-00007960: 222c 2022 6361 7465 676f 7269 6573 223a  ", "categories":
-00007970: 205b 5d7d 7d2c 2046 616c 7365 292c 0020   []}}, False),. 
-00007980: 2020 2020 2020 2028 0020 2020 2020 2020         (.       
-00007990: 2028 2264 696d 656e 7369 6f6e 5f64 6963   ("dimension_dic
-000079a0: 7422 2c20 2265 7870 6563 7465 645f 7661  t", "expected_va
-000079b0: 6c75 6522 292c 0020 2020 2040 7079 7465  lue"),.    @pyte
-000079c0: 7374 2e6d 6172 6b2e 7061 7261 6d65 7472  st.mark.parametr
-000079d0: 697a 6528 0000 2020 2020 2020 2020 2020  ize(..          
-000079e0: 2020 7261 775f 6469 6d65 6e73 696f 6e2e    raw_dimension.
-000079f0: 5f62 6173 655f 7479 7065 0020 2020 2020  _base_type.     
-00007a00: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-00007a10: 6169 7365 7328 4e6f 7449 6d70 6c65 6d65  aises(NotImpleme
-00007a20: 6e74 6564 4572 726f 7229 3a00 2020 2020  ntedError):.    
-00007a30: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
-00007a40: 6e20 3d20 5f52 6177 4469 6d65 6e73 696f  n = _RawDimensio
-00007a50: 6e28 7b22 7479 7065 223a 207b 2263 6c61  n({"type": {"cla
-00007a60: 7373 223a 2022 6372 756e 6368 6564 227d  ss": "crunched"}
-00007a70: 7d2c 204e 6f6e 6529 0020 2020 2064 6566  }, None).    def
-00007a80: 2062 7574 5f69 745f 7261 6973 6573 5f6f   but_it_raises_o
-00007a90: 6e5f 756e 7265 636f 676e 697a 6564 5f74  n_unrecognized_t
-00007aa0: 7970 655f 636c 6173 7328 7365 6c66 293a  ype_class(self):
-00007ab0: 0000 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00007ac0: 2062 6173 655f 7479 7065 203d 3d20 6578   base_type == ex
-00007ad0: 7065 6374 6564 5f76 616c 7565 0000 2020  pected_value..  
-00007ae0: 2020 2020 2020 6261 7365 5f74 7970 6520        base_type 
-00007af0: 3d20 7261 775f 6469 6d65 6e73 696f 6e2e  = raw_dimension.
-00007b00: 5f62 6173 655f 7479 7065 0000 2020 2020  _base_type..    
-00007b10: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
-00007b20: 6e20 3d20 5f52 6177 4469 6d65 6e73 696f  n = _RawDimensio
-00007b30: 6e28 6469 6d65 6e73 696f 6e5f 6469 6374  n(dimension_dict
-00007b40: 2c20 4e6f 6e65 2900 2020 2020 6465 6620  , None).    def 
-00007b50: 6974 5f70 6172 7365 735f 7468 655f 6261  it_parses_the_ba
-00007b60: 7365 5f74 7970 655f 746f 5f68 656c 7028  se_type_to_help(
-00007b70: 7365 6c66 2c20 6469 6d65 6e73 696f 6e5f  self, dimension_
-00007b80: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
-00007b90: 616c 7565 293a 0020 2020 2029 0020 2020  alue):.    ).   
-00007ba0: 2020 2020 2029 2c00 2020 2020 2020 2020       ),.        
-00007bb0: 2020 2020 292c 0020 2020 2020 2020 2020      ),.         
-00007bc0: 2020 2020 2020 2022 656e 756d 2e76 6172         "enum.var
-00007bd0: 6961 626c 6522 2c00 2020 2020 2020 2020  iable",.        
-00007be0: 2020 2020 2020 2020 7b22 7479 7065 223a          {"type":
-00007bf0: 207b 2263 6c61 7373 223a 2022 656e 756d   {"class": "enum
-00007c00: 222c 2022 7375 6274 7970 6522 3a20 7b22  ", "subtype": {"
-00007c10: 636c 6173 7322 3a20 2276 6172 6961 626c  class": "variabl
-00007c20: 6522 7d7d 7d2c 0020 2020 2020 2020 2020  e"}}},.         
-00007c30: 2020 2028 0020 2020 2020 2020 2020 2020     (.           
-00007c40: 2028 7b22 7479 7065 223a 207b 2263 6c61   ({"type": {"cla
-00007c50: 7373 223a 2022 6361 7465 676f 7269 6361  ss": "categorica
-00007c60: 6c22 7d7d 2c20 2263 6174 6567 6f72 6963  l"}}, "categoric
-00007c70: 616c 2229 2c00 2020 2020 2020 2020 2800  al"),.        (.
-00007c80: 2020 2020 2020 2020 2264 696d 656e 7369          "dimensi
-00007c90: 6f6e 5f64 6963 742c 2065 7870 6563 7465  on_dict, expecte
-00007ca0: 645f 7661 6c75 6522 2c00 2020 2020 4070  d_value",.    @p
-00007cb0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00007cc0: 6574 7269 7a65 2800 0020 2020 2020 2020  etrize(..       
-00007cd0: 2061 7373 6572 7420 6469 6d65 6e73 696f   assert dimensio
-00007ce0: 6e5f 6469 6374 203d 3d20 6469 6d65 6e73  n_dict == dimens
-00007cf0: 696f 6e5f 6469 6374 5f00 0020 2020 2020  ion_dict_..     
-00007d00: 2020 2064 696d 656e 7369 6f6e 5f64 6963     dimension_dic
-00007d10: 7420 3d20 7261 775f 6469 6d65 6e73 696f  t = raw_dimensio
-00007d20: 6e2e 6469 6d65 6e73 696f 6e5f 6469 6374  n.dimension_dict
-00007d30: 0000 2020 2020 2020 2020 7261 775f 6469  ..        raw_di
-00007d40: 6d65 6e73 696f 6e20 3d20 5f52 6177 4469  mension = _RawDi
-00007d50: 6d65 6e73 696f 6e28 6469 6d65 6e73 696f  mension(dimensio
-00007d60: 6e5f 6469 6374 5f2c 204e 6f6e 6529 0020  n_dict_, None). 
-00007d70: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-00007d80: 5f64 6963 745f 203d 207b 2264 696d 656e  _dict_ = {"dimen
-00007d90: 7369 6f6e 223a 2022 6469 6374 227d 0020  sion": "dict"}. 
-00007da0: 2020 2064 6566 2069 745f 7072 6f76 6964     def it_provid
-00007db0: 6573 5f61 6363 6573 735f 746f 5f74 6865  es_access_to_the
-00007dc0: 5f64 696d 656e 7369 6f6e 5f64 6963 7428  _dimension_dict(
-00007dd0: 7365 6c66 293a 0063 6c61 7373 2044 6573  self):.class Des
-00007de0: 6372 6962 655f 5261 7744 696d 656e 7369  cribe_RawDimensi
-00007df0: 6f6e 3a00 0000 2020 2020 2020 2020 7265  on:...        re
-00007e00: 7475 726e 2070 726f 7065 7274 795f 6d6f  turn property_mo
-00007e10: 636b 2872 6571 7565 7374 2c20 5f44 696d  ck(request, _Dim
-00007e20: 656e 7369 6f6e 4661 6374 6f72 792c 2022  ensionFactory, "
-00007e30: 5f72 6177 5f64 696d 656e 7369 6f6e 7322  _raw_dimensions"
-00007e40: 2900 2020 2020 6465 6620 5f72 6177 5f64  ).    def _raw_d
-00007e50: 696d 656e 7369 6f6e 735f 7072 6f70 5f28  imensions_prop_(
-00007e60: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-00007e70: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-00007e80: 7572 6500 0020 2020 2020 2020 2072 6574  ure..        ret
-00007e90: 7572 6e20 636c 6173 735f 6d6f 636b 2872  urn class_mock(r
-00007ea0: 6571 7565 7374 2c20 2263 722e 6375 6265  equest, "cr.cube
-00007eb0: 2e64 696d 656e 7369 6f6e 2e5f 5261 7744  .dimension._RawD
-00007ec0: 696d 656e 7369 6f6e 2229 0020 2020 2064  imension").    d
-00007ed0: 6566 205f 5261 7744 696d 656e 7369 6f6e  ef _RawDimension
-00007ee0: 5f28 7365 6c66 2c20 7265 7175 6573 7429  _(self, request)
-00007ef0: 3a00 2020 2020 4070 7974 6573 742e 6669  :.    @pytest.fi
-00007f00: 7874 7572 6500 0020 2020 2020 2020 2072  xture..        r
-00007f10: 6574 7572 6e20 6d65 7468 6f64 5f6d 6f63  eturn method_moc
-00007f20: 6b28 7265 7175 6573 742c 205f 4469 6d65  k(request, _Dime
-00007f30: 6e73 696f 6e46 6163 746f 7279 2c20 225f  nsionFactory, "_
-00007f40: 6974 6572 5f64 696d 656e 7369 6f6e 7322  iter_dimensions"
-00007f50: 2900 2020 2020 6465 6620 5f69 7465 725f  ).    def _iter_
-00007f60: 6469 6d65 6e73 696f 6e73 5f28 7365 6c66  dimensions_(self
-00007f70: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00007f80: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00007f90: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00007fa0: 696e 6974 6961 6c69 7a65 725f 6d6f 636b  initializer_mock
-00007fb0: 2872 6571 7565 7374 2c20 5f44 696d 656e  (request, _Dimen
-00007fc0: 7369 6f6e 4661 6374 6f72 7929 0020 2020  sionFactory).   
-00007fd0: 2064 6566 205f 696e 6974 5f28 7365 6c66   def _init_(self
-00007fe0: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00007ff0: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00008000: 6164 0000 0200 0000 9e01 0000 0010 0000  ad..............
-00008010: 6000 0000 0000 0000 ba0f 0000 b90f 0000  `...............
-00008020: 830f 0000 820f 0000 390f 0000 f10e 0000  ........9.......
-00008030: c10e 0000 c00e 0000 770e 0000 450e 0000  ........w...E...
-00008040: 090e 0000 d80d 0000 af0d 0000 ae0d 0000  ................
-00008050: 6c0d 0000 2f0d 0000 f30c 0000 f20c 0000  l.../...........
-00008060: cd0c 0000 cc0c 0000 ab0c 0000 aa0c 0000  ................
-00008070: 8c0c 0000 620c 0000 580c 0000 350c 0000  ....b...X...5...
-00008080: 020c 0000 c90b 0000 7f0b 0000 370b 0000  ............7...
-00008090: 2c0b 0000 260b 0000 e00a 0000 b30a 0000  ,...&...........
-000080a0: ac0a 0000 700a 0000 6f0a 0000 2a0a 0000  ....p...o...*...
-000080b0: 290a 0000 f209 0000 f109 0000 d309 0000  )...............
-000080c0: a909 0000 5309 0000 4d09 0000 1109 0000  ....S...M.......
-000080d0: e408 0000 dd08 0000 a108 0000 a008 0000  ................
-000080e0: 6d08 0000 6c08 0000 3e08 0000 3d08 0000  m...l...>...=...
-000080f0: e507 0000 b707 0000 8407 0000 3b07 0000  ............;...
-00008100: f406 0000 ba06 0000 8006 0000 7f06 0000  ................
-00008110: 4006 0000 3f06 0000 1706 0000 d005 0000  @...?...........
-00008120: c605 0000 8205 0000 8105 0000 3505 0000  ............5...
-00008130: 0705 0000 be04 0000 7f04 0000 5504 0000  ............U...
-00008140: 5404 0000 3604 0000 f403 0000 c703 0000  T...6...........
-00008150: c103 0000 9603 0000 8803 0000 7703 0000  ............w...
-00008160: 6403 0000 4f03 0000 4003 0000 2803 0000  d...O...@...(...
-00008170: 1003 0000 ed02 0000 e602 0000 b802 0000  ................
-00008180: 7c02 0000 5602 0000 1502 0000 d101 0000  |...V...........
-00008190: 9f01 0000 9e01 0000 0000 0000 0000 0020  ............... 
-000081a0: 2020 2020 2020 2072 6177 5f64 696d 656e         raw_dimen
-000081b0: 7369 6f6e 203d 205f 5261 7744 696d 656e  sion = _RawDimen
-000081c0: 7369 6f6e 284e 6f6e 652c 204e 6f6e 6529  sion(None, None)
-000081d0: 0020 2020 2020 2020 205f 6e65 7874 5f72  .        _next_r
-000081e0: 6177 5f64 696d 656e 7369 6f6e 5f70 726f  aw_dimension_pro
-000081f0: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
-00008200: 3d20 6e65 7874 5f72 6177 5f64 696d 656e  = next_raw_dimen
-00008210: 7369 6f6e 0020 2020 2020 2020 206e 6578  sion.        nex
-00008220: 745f 7261 775f 6469 6d65 6e73 696f 6e20  t_raw_dimension 
-00008230: 3d20 4e6f 6e65 2069 6620 6973 5f6c 6173  = None if is_las
-00008240: 7420 656c 7365 2072 6177 5f64 696d 656e  t else raw_dimen
-00008250: 7369 6f6e 5f00 2020 2020 2020 2020 7261  sion_.        ra
-00008260: 775f 6469 6d65 6e73 696f 6e5f 2e5f 616c  w_dimension_._al
-00008270: 6961 7320 3d20 616c 6961 7300 2020 2020  ias = alias.    
-00008280: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
-00008290: 6e5f 2e5f 6861 735f 7365 6c65 6374 6564  n_._has_selected
-000082a0: 5f63 6174 6567 6f72 7920 3d20 6861 735f  _category = has_
-000082b0: 7365 6c5f 6361 7400 2020 2020 2020 2020  sel_cat.        
-000082c0: 7261 775f 6469 6d65 6e73 696f 6e5f 2e5f  raw_dimension_._
-000082d0: 6261 7365 5f74 7970 6520 3d20 6261 7365  base_type = base
-000082e0: 5f74 7970 6500 2020 2020 293a 0020 2020  _type.    ):.   
-000082f0: 2020 2020 205f 6e65 7874 5f72 6177 5f64       _next_raw_d
-00008300: 696d 656e 7369 6f6e 5f70 726f 705f 2c00  imension_prop_,.
-00008310: 2020 2020 2020 2020 7261 775f 6469 6d65          raw_dime
-00008320: 6e73 696f 6e5f 2c00 2020 2020 2020 2020  nsion_,.        
-00008330: 6578 7065 6374 6564 5f76 616c 7565 2c00  expected_value,.
-00008340: 2020 2020 2020 2020 616c 6961 732c 0020          alias,. 
-00008350: 2020 2020 2020 2068 6173 5f73 656c 5f63         has_sel_c
-00008360: 6174 2c00 2020 2020 2020 2020 6261 7365  at,.        base
-00008370: 5f74 7970 652c 0020 2020 2020 2020 2069  _type,.        i
-00008380: 735f 6c61 7374 2c00 2020 2020 2020 2020  s_last,.        
-00008390: 7365 6c66 2c00 2020 2020 6465 6620 6974  self,.    def it
-000083a0: 5f72 6573 6f6c 7665 735f 616e 5f61 7272  _resolves_an_arr
-000083b0: 6179 5f74 7970 655f 746f 5f68 656c 7028  ay_type_to_help(
-000083c0: 0020 2020 2029 0020 2020 2020 2020 2028  .    ).        (
-000083d0: 2846 616c 7365 2c20 4e6f 6e65 2c20 4e6f  (False, None, No
-000083e0: 6e65 2c20 4e6f 6e65 2c20 4454 2e43 4129  ne, None, DT.CA)
-000083f0: 2c29 2c00 2020 2020 2020 2020 2269 735f  ,),.        "is_
-00008400: 6c61 7374 2c20 6261 7365 5f74 7970 652c  last, base_type,
-00008410: 2068 6173 5f73 656c 5f63 6174 2c20 616c   has_sel_cat, al
-00008420: 6961 732c 2065 7870 6563 7465 645f 7661  ias, expected_va
-00008430: 6c75 6522 2c00 2020 2020 4070 7974 6573  lue",.    @pytes
-00008440: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
-00008450: 7a65 2800 0020 2020 2020 2020 2061 7373  ze(..        ass
-00008460: 6572 7420 6e65 7874 5f72 6177 5f64 696d  ert next_raw_dim
-00008470: 656e 7369 6f6e 2069 7320 4e6f 6e65 0020  ension is None. 
-00008480: 2020 2020 2020 206e 6578 745f 7261 775f         next_raw_
-00008490: 6469 6d65 6e73 696f 6e20 3d20 7261 775f  dimension = raw_
-000084a0: 6469 6d65 6e73 696f 6e2e 5f6e 6578 745f  dimension._next_
-000084b0: 7261 775f 6469 6d65 6e73 696f 6e00 2020  raw_dimension.  
-000084c0: 2020 2020 2020 7261 775f 6469 6d65 6e73        raw_dimens
-000084d0: 696f 6e20 3d20 5f52 6177 4469 6d65 6e73  ion = _RawDimens
-000084e0: 696f 6e28 6469 6d65 6e73 696f 6e5f 6469  ion(dimension_di
-000084f0: 6374 5f2c 2064 696d 656e 7369 6f6e 5f64  ct_, dimension_d
-00008500: 6963 7473 5f29 0020 2020 2020 2020 2064  icts_).        d
-00008510: 696d 656e 7369 6f6e 5f64 6963 745f 203d  imension_dict_ =
-00008520: 2064 696d 656e 7369 6f6e 5f64 6963 7473   dimension_dicts
-00008530: 5f5b 325d 0020 2020 2064 6566 2062 7574  _[2].    def but
-00008540: 5f69 745f 7265 7475 726e 735f 4e6f 6e65  _it_returns_None
-00008550: 5f66 6f72 5f74 6865 5f6c 6173 745f 6469  _for_the_last_di
-00008560: 6d65 6e73 696f 6e28 7365 6c66 2c20 6469  mension(self, di
-00008570: 6d65 6e73 696f 6e5f 6469 6374 735f 293a  mension_dicts_):
-00008580: 0000 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00008590: 2074 7970 6528 6e65 7874 5f72 6177 5f64   type(next_raw_d
-000085a0: 696d 656e 7369 6f6e 292e 5f5f 6e61 6d65  imension).__name
-000085b0: 5f5f 203d 3d20 225f 5261 7744 696d 656e  __ == "_RawDimen
-000085c0: 7369 6f6e 2200 2020 2020 2020 2020 2900  sion".        ).
-000085d0: 2020 2020 2020 2020 2020 2020 6e65 7874              next
-000085e0: 5f72 6177 5f64 696d 656e 7369 6f6e 2c20  _raw_dimension, 
-000085f0: 6e65 7874 5f64 696d 656e 7369 6f6e 5f64  next_dimension_d
-00008600: 6963 745f 2c20 6469 6d65 6e73 696f 6e5f  ict_, dimension_
-00008610: 6469 6374 735f 0020 2020 2020 2020 205f  dicts_.        _
-00008620: 696e 6974 5f2e 6173 7365 7274 5f63 616c  init_.assert_cal
-00008630: 6c65 645f 6f6e 6365 5f77 6974 6828 0000  led_once_with(..
-00008640: 2020 2020 2020 2020 6e65 7874 5f72 6177          next_raw
-00008650: 5f64 696d 656e 7369 6f6e 203d 2072 6177  _dimension = raw
-00008660: 5f64 696d 656e 7369 6f6e 2e5f 6e65 7874  _dimension._next
-00008670: 5f72 6177 5f64 696d 656e 7369 6f6e 0000  _raw_dimension..
-00008680: 2020 2020 2020 2020 5f69 6e69 745f 203d          _init_ =
-00008690: 2069 6e69 7469 616c 697a 6572 5f6d 6f63   initializer_moc
-000086a0: 6b28 7265 7175 6573 742c 205f 5261 7744  k(request, _RawD
-000086b0: 696d 656e 7369 6f6e 2900 2020 2020 2020  imension).      
-000086c0: 2020 2320 2d2d 6f74 6865 7277 6973 6520    # --otherwise 
-000086d0: 6974 2077 6f75 6c64 2068 6176 6520 6e6f  it would have no
-000086e0: 2069 6e73 7461 6e63 6520 7661 7269 6162   instance variab
-000086f0: 6c65 7300 2020 2020 2020 2020 2320 2d2d  les.        # --
-00008700: 696e 6974 6961 6c69 7a65 7220 6d75 7374  initializer must
-00008710: 2062 6520 6d6f 636b 6564 2061 6674 6572   be mocked after
-00008720: 2063 6f6e 7472 7563 7469 6e67 2072 6177   contructing raw
-00008730: 5f64 696d 656e 7369 6f6e 0020 2020 2020  _dimension.     
-00008740: 2020 2072 6177 5f64 696d 656e 7369 6f6e     raw_dimension
-00008750: 203d 205f 5261 7744 696d 656e 7369 6f6e   = _RawDimension
-00008760: 2864 696d 656e 7369 6f6e 5f64 6963 745f  (dimension_dict_
-00008770: 2c20 6469 6d65 6e73 696f 6e5f 6469 6374  , dimension_dict
-00008780: 735f 2900 2020 2020 2020 2020 6e65 7874  s_).        next
-00008790: 5f64 696d 656e 7369 6f6e 5f64 6963 745f  _dimension_dict_
-000087a0: 203d 2064 696d 656e 7369 6f6e 5f64 6963   = dimension_dic
-000087b0: 7473 5f5b 325d 0020 2020 2020 2020 2064  ts_[2].        d
-000087c0: 696d 656e 7369 6f6e 5f64 6963 745f 203d  imension_dict_ =
-000087d0: 2064 696d 656e 7369 6f6e 5f64 6963 7473   dimension_dicts
-000087e0: 5f5b 315d 0020 2020 2064 6566 2069 745f  _[1].    def it_
-000087f0: 6669 6e64 735f 7468 655f 7375 6273 6571  finds_the_subseq
-00008800: 7565 6e74 5f72 6177 5f64 696d 656e 7369  uent_raw_dimensi
-00008810: 6f6e 5f74 6f5f 6865 6c70 2873 656c 662c  on_to_help(self,
-00008820: 2072 6571 7565 7374 2c20 6469 6d65 6e73   request, dimens
-00008830: 696f 6e5f 6469 6374 735f 293a 0000 2020  ion_dicts_):..  
-00008840: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00008850: 6172 7261 795f 6361 7420 3d3d 2065 7870  array_cat == exp
-00008860: 6563 7465 645f 7661 6c75 6500 0020 2020  ected_value..   
-00008870: 2020 2020 2069 735f 6172 7261 795f 6361       is_array_ca
-00008880: 7420 3d20 7261 775f 6469 6d65 6e73 696f  t = raw_dimensio
-00008890: 6e2e 5f69 735f 6172 7261 795f 6361 7400  n._is_array_cat.
-000088a0: 0020 2020 2020 2020 2072 6177 5f64 696d  .        raw_dim
-000088b0: 656e 7369 6f6e 203d 205f 5261 7744 696d  ension = _RawDim
-000088c0: 656e 7369 6f6e 2864 696d 656e 7369 6f6e  ension(dimension
-000088d0: 5f64 6963 742c 204e 6f6e 6529 0020 2020  _dict, None).   
-000088e0: 2029 3a00 2020 2020 2020 2020 7365 6c66   ):.        self
-000088f0: 2c20 6469 6d65 6e73 696f 6e5f 6469 6374  , dimension_dict
-00008900: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
-00008910: 0020 2020 2064 6566 2069 745f 6469 7374  .    def it_dist
-00008920: 696e 6775 6973 6865 735f 616e 5f61 7272  inguishes_an_arr
-00008930: 6179 5f63 6174 6567 6f72 6963 616c 5f74  ay_categorical_t
-00008940: 7970 655f 746f 5f68 656c 7028 0020 2020  ype_to_help(.   
-00008950: 2029 0020 2020 2020 2020 2028 287b 2272   ).        (({"r
-00008960: 6566 6572 656e 6365 7322 3a20 7b7d 7d2c  eferences": {}},
-00008970: 2046 616c 7365 292c 2028 7b22 7265 6665   False), ({"refe
-00008980: 7265 6e63 6573 223a 207b 2273 7562 7265  rences": {"subre
-00008990: 6665 7265 6e63 6573 223a 207b 7d7d 7d2c  ferences": {}}},
-000089a0: 2054 7275 6529 292c 0020 2020 2020 2020   True)),.       
-000089b0: 2022 6469 6d65 6e73 696f 6e5f 6469 6374   "dimension_dict
-000089c0: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
-000089d0: 222c 0020 2020 2040 7079 7465 7374 2e6d  ",.    @pytest.m
-000089e0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-000089f0: 0000 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00008a00: 2068 6173 5f73 656c 6563 7465 645f 6361   has_selected_ca
-00008a10: 7465 676f 7279 2069 7320 6578 7065 6374  tegory is expect
-00008a20: 6564 5f76 616c 7565 0000 2020 2020 2020  ed_value..      
-00008a30: 2020 6861 735f 7365 6c65 6374 6564 5f63    has_selected_c
-00008a40: 6174 6567 6f72 7920 3d20 7261 775f 6469  ategory = raw_di
-00008a50: 6d65 6e73 696f 6e2e 5f68 6173 5f73 656c  mension._has_sel
-00008a60: 6563 7465 645f 6361 7465 676f 7279 0000  ected_category..
-00008a70: 2020 2020 2020 2020 7261 775f 6469 6d65          raw_dime
-00008a80: 6e73 696f 6e20 3d20 5f52 6177 4469 6d65  nsion = _RawDime
-00008a90: 6e73 696f 6e28 6469 6d65 6e73 696f 6e5f  nsion(dimension_
-00008aa0: 6469 6374 2c20 4e6f 6e65 2900 2020 2020  dict, None).    
-00008ab0: 293a 0020 2020 2020 2020 2073 656c 662c  ):.        self,
-00008ac0: 2064 696d 656e 7369 6f6e 5f64 6963 742c   dimension_dict,
-00008ad0: 2065 7870 6563 7465 645f 7661 6c75 6500   expected_value.
-00008ae0: 2020 2020 6465 6620 6974 5f63 616e 5f74      def it_can_t
-00008af0: 656c 6c5f 7768 656e 5f61 5f64 696d 656e  ell_when_a_dimen
-00008b00: 7369 6f6e 5f68 6173 5f61 5f73 656c 6563  sion_has_a_selec
-00008b10: 7465 645f 6361 7465 676f 7279 5f74 6f5f  ted_category_to_
-00008b20: 6865 6c70 2800 2020 2020 2900 2020 2020  help(.    ).    
-00008b30: 2020 2020 292c 0020 2020 2020 2020 2020      ),.         
-00008b40: 2020 2028 7b22 7479 7065 223a 207b 2263     ({"type": {"c
-00008b50: 6174 6567 6f72 6965 7322 3a20 5b7b 2273  ategories": [{"s
-00008b60: 656c 6563 7465 6422 3a20 5472 7565 7d2c  elected": True},
-00008b70: 207b 7d5d 7d7d 2c20 5472 7565 292c 0020   {}]}}, True),. 
-00008b80: 2020 2020 2020 2020 2020 2028 7b22 7479             ({"ty
-00008b90: 7065 223a 207b 2263 6174 6567 6f72 6965  pe": {"categorie
-00008ba0: 7322 3a20 5b7b 2273 656c 6563 7465 6422  s": [{"selected"
-00008bb0: 3a20 4661 6c73 657d 2c20 7b7d 5d7d 7d2c  : False}, {}]}},
-00008bc0: 2046 616c 7365 292c 0020 2020 2020 2020   False),.       
-00008bd0: 2020 2020 2028 7b22 7479 7065 223a 207b       ({"type": {
-00008be0: 2263 6174 6567 6f72 6965 7322 3a20 5b7b  "categories": [{
-00008bf0: 7d2c 207b 7d5d 7d7d 2c20 4661 6c73 6529  }, {}]}}, False)
-00008c00: 2c00 2020 2020 2020 2020 2020 2020 287b  ,.            ({
-00008c10: 2274 7970 6522 3a20 7b22 6361 7465 676f  "type": {"catego
-00008c20: 7269 6573 223a 205b 5d7d 7d2c 2046 616c  ries": []}}, Fal
-00008c30: 7365 292c 0020 2020 2020 2020 2020 2020  se),.           
-00008c40: 2028 7b22 7479 7065 223a 207b 7d7d 2c20   ({"type": {}}, 
-00008c50: 4661 6c73 6529 2c00 2020 2020 2020 2020  False),.        
-00008c60: 2800 2020 2020 2020 2020 2264 696d 656e  (.        "dimen
-00008c70: 7369 6f6e 5f64 6963 742c 2065 7870 6563  sion_dict, expec
-00008c80: 7465 645f 7661 6c75 6522 2c00 2020 2020  ted_value",.    
-00008c90: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-00008ca0: 616d 6574 7269 7a65 2800 0020 2020 2020  ametrize(..     
-00008cb0: 2020 2061 7373 6572 7420 616c 6961 7320     assert alias 
-00008cc0: 3d3d 2022 7661 7273 6b69 2200 0020 2020  == "varski"..   
-00008cd0: 2020 2020 2061 6c69 6173 203d 2072 6177       alias = raw
-00008ce0: 5f64 696d 656e 7369 6f6e 2e5f 616c 6961  _dimension._alia
-00008cf0: 7300 0020 2020 2020 2020 2072 6177 5f64  s..        raw_d
-00008d00: 696d 656e 7369 6f6e 203d 205f 5261 7744  imension = _RawD
-00008d10: 696d 656e 7369 6f6e 2864 696d 656e 7369  imension(dimensi
-00008d20: 6f6e 5f64 6963 742c 204e 6f6e 6529 0020  on_dict, None). 
-00008d30: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-00008d40: 5f64 6963 7420 3d20 7b22 7265 6665 7265  _dict = {"refere
-00008d50: 6e63 6573 223a 207b 2261 6c69 6173 223a  nces": {"alias":
-00008d60: 2022 7661 7273 6b69 227d 7d00 2020 2020   "varski"}}.    
-00008d70: 6465 6620 6974 5f6b 6e6f 7773 5f74 6865  def it_knows_the
-00008d80: 5f64 696d 656e 7369 6f6e 5f76 6172 6961  _dimension_varia
-00008d90: 626c 655f 6964 656e 7469 6669 6572 5f74  ble_identifier_t
-00008da0: 6f5f 6865 6c70 2873 656c 6629 3a00 0020  o_help(self):.. 
-00008db0: 2020 2020 2020 2020 2020 2072 6177 5f64             raw_d
-00008dc0: 696d 656e 7369 6f6e 2e64 696d 656e 7369  imension.dimensi
-00008dd0: 6f6e 5f74 7970 6500 2020 2020 2020 2020  on_type.        
-00008de0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-00008df0: 6573 284e 6f74 496d 706c 656d 656e 7465  es(NotImplemente
-00008e00: 6445 7272 6f72 293a 0020 2020 2020 2020  dError):.       
-00008e10: 205f 6261 7365 5f74 7970 655f 7072 6f70   _base_type_prop
-00008e20: 5f2e 7265 7475 726e 5f76 616c 7565 203d  _.return_value =
-00008e30: 2022 6879 7065 722e 6469 6d65 6e73 696f   "hyper.dimensio
-00008e40: 6e61 6c22 0020 2020 2020 2020 2072 6177  nal".        raw
-00008e50: 5f64 696d 656e 7369 6f6e 203d 205f 5261  _dimension = _Ra
-00008e60: 7744 696d 656e 7369 6f6e 284e 6f6e 652c  wDimension(None,
-00008e70: 204e 6f6e 6529 0020 2020 2064 6566 2062   None).    def b
-00008e80: 7574 5f69 745f 7261 6973 6573 5f6f 6e5f  ut_it_raises_on_
-00008e90: 756e 7265 636f 676e 697a 6564 5f62 6173  unrecognized_bas
-00008ea0: 655f 7479 7065 2873 656c 662c 205f 6261  e_type(self, _ba
-00008eb0: 7365 5f74 7970 655f 7072 6f70 5f29 3a00  se_type_prop_):.
-00008ec0: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00008ed0: 6469 6d65 6e73 696f 6e5f 7479 7065 203d  dimension_type =
-00008ee0: 3d20 6578 7065 6374 6564 5f76 616c 7565  = expected_value
-00008ef0: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00008f00: 5f72 6573 6f6c 7665 5f61 7272 6179 5f74  _resolve_array_t
-00008f10: 7970 655f 2e63 616c 6c5f 6172 6773 5f6c  ype_.call_args_l
-00008f20: 6973 7420 3d3d 2072 6573 6f6c 7665 5f61  ist == resolve_a
-00008f30: 7272 5f63 616c 6c73 0020 2020 2020 2020  rr_calls.       
-00008f40: 2061 7373 6572 7420 5f72 6573 6f6c 7665   assert _resolve
-00008f50: 5f63 6174 6567 6f72 6963 616c 5f2e 6361  _categorical_.ca
-00008f60: 6c6c 5f61 7267 735f 6c69 7374 203d 3d20  ll_args_list == 
-00008f70: 7265 736f 6c76 655f 6361 745f 6361 6c6c  resolve_cat_call
-00008f80: 7300 0020 2020 2020 2020 2064 696d 656e  s..        dimen
-00008f90: 7369 6f6e 5f74 7970 6520 3d20 7261 775f  sion_type = raw_
-00008fa0: 6469 6d65 6e73 696f 6e2e 6469 6d65 6e73  dimension.dimens
-00008fb0: 696f 6e5f 7479 7065 0000 2020 2020 2020  ion_type..      
-00008fc0: 2020 7265 736f 6c76 655f 6172 725f 6361    resolve_arr_ca
-00008fd0: 6c6c 7320 3d20 5b63 616c 6c28 7261 775f  lls = [call(raw_
-00008fe0: 6469 6d65 6e73 696f 6e29 5d20 6966 2061  dimension)] if a
-00008ff0: 7272 5f74 7970 6520 656c 7365 205b 5d00  rr_type else [].
-00009000: 6164 0000 1300 0000 db01 0000 0010 0000  ad..............
-00009010: 6b00 0000 0000 0000 c30f 0000 c20f 0000  k...............
-00009020: 920f 0000 910f 0000 730f 0000 280f 0000  ........s...(...
-00009030: 1e0f 0000 f30e 0000 c90e 0000 9c0e 0000  ................
-00009040: 6f0e 0000 440e 0000 180e 0000 0d0e 0000  o...D...........
-00009050: 070e 0000 d70d 0000 c90d 0000 b30d 0000  ................
-00009060: 990d 0000 800d 0000 680d 0000 4b0d 0000  ........h...K...
-00009070: 2f0d 0000 090d 0000 e90c 0000 e20c 0000  /...............
-00009080: aa0c 0000 7a0c 0000 350c 0000 f70b 0000  ....z...5.......
-00009090: c50b 0000 c40b 0000 860b 0000 850b 0000  ................
-000090a0: 550b 0000 540b 0000 0d0b 0000 0c0b 0000  U...T...........
-000090b0: f80a 0000 cf0a 0000 8c0a 0000 8b0a 0000  ................
-000090c0: 770a 0000 570a 0000 230a 0000 220a 0000  w...W...#..."...
-000090d0: 0e0a 0000 d909 0000 8a09 0000 8909 0000  ................
-000090e0: 7509 0000 4909 0000 0309 0000 0209 0000  u...I...........
-000090f0: ee08 0000 c308 0000 7e08 0000 7d08 0000  ........~...}...
-00009100: 6908 0000 3a08 0000 f107 0000 f007 0000  i...:...........
-00009110: dc07 0000 aa07 0000 5e07 0000 5d07 0000  ........^...]...
-00009120: 4907 0000 2207 0000 ed06 0000 ec06 0000  I..."...........
-00009130: d806 0000 ab06 0000 6106 0000 6006 0000  ........a...`...
-00009140: 4c06 0000 1e06 0000 d305 0000 d205 0000  L...............
-00009150: d105 0000 b805 0000 7405 0000 7305 0000  ........t...s...
-00009160: 5505 0000 2b05 0000 2105 0000 f904 0000  U...+...!.......
-00009170: be04 0000 b304 0000 ad04 0000 6b04 0000  ............k...
-00009180: 2404 0000 2304 0000 0504 0000 db03 0000  $...#...........
-00009190: d103 0000 ab03 0000 7203 0000 3b03 0000  ........r...;...
-000091a0: ee02 0000 e302 0000 dd02 0000 9502 0000  ................
-000091b0: 4802 0000 4702 0000 1c02 0000 dc01 0000  H...G...........
-000091c0: db01 0000 da01 0000 0000 0000 0000 0000  ................
-000091d0: 0000 0000 0000 0000 0000 0000 2020 2020  ............    
-000091e0: 2020 2020 6173 7365 7274 2044 696d 656e      assert Dimen
-000091f0: 7369 6f6e 284e 6f6e 652c 2044 542e 4341  sion(None, DT.CA
-00009200: 5429 2e64 696d 656e 7369 6f6e 5f74 7970  T).dimension_typ
-00009210: 6520 3d3d 2044 542e 4341 5400 2020 2020  e == DT.CAT.    
-00009220: 6465 6620 6974 5f6b 6e6f 7773 5f69 7473  def it_knows_its
-00009230: 5f64 696d 656e 7369 6f6e 5f74 7970 6528  _dimension_type(
-00009240: 7365 6c66 293a 0000 2020 2020 2020 2020  self):..        
-00009250: 6173 7365 7274 2044 696d 656e 7369 6f6e  assert Dimension
-00009260: 2864 696d 656e 7369 6f6e 5f64 6963 742c  (dimension_dict,
-00009270: 204e 6f6e 6529 2e64 6573 6372 6970 7469   None).descripti
-00009280: 6f6e 203d 3d20 6578 7065 6374 6564 5f76  on == expected_v
-00009290: 616c 7565 0020 2020 2064 6566 2069 745f  alue.    def it_
-000092a0: 6b6e 6f77 735f 6974 735f 6465 7363 7269  knows_its_descri
-000092b0: 7074 696f 6e28 7365 6c66 2c20 6469 6d65  ption(self, dime
-000092c0: 6e73 696f 6e5f 6469 6374 2c20 6578 7065  nsion_dict, expe
-000092d0: 6374 6564 5f76 616c 7565 293a 0020 2020  cted_value):.   
-000092e0: 2029 0020 2020 2020 2020 2029 2c00 2020   ).        ),.  
-000092f0: 2020 2020 2020 2020 2020 287b 2272 6566            ({"ref
-00009300: 6572 656e 6365 7322 3a20 7b22 6465 7363  erences": {"desc
-00009310: 7269 7074 696f 6e22 3a20 2243 7275 6e63  ription": "Crunc
-00009320: 6869 6e65 7373 227d 7d2c 2022 4372 756e  hiness"}}, "Crun
-00009330: 6368 696e 6573 7322 292c 0020 2020 2020  chiness"),.     
-00009340: 2020 2020 2020 2028 7b22 7265 6665 7265         ({"refere
-00009350: 6e63 6573 223a 207b 2264 6573 6372 6970  nces": {"descrip
-00009360: 7469 6f6e 223a 2022 227d 7d2c 2022 2229  tion": ""}}, "")
-00009370: 2c00 2020 2020 2020 2020 2020 2020 287b  ,.            ({
-00009380: 2272 6566 6572 656e 6365 7322 3a20 7b22  "references": {"
-00009390: 6465 7363 7269 7074 696f 6e22 3a20 4e6f  description": No
-000093a0: 6e65 7d7d 2c20 2222 292c 0020 2020 2020  ne}}, ""),.     
-000093b0: 2020 2020 2020 2028 7b22 7265 6665 7265         ({"refere
-000093c0: 6e63 6573 223a 207b 7d7d 2c20 2222 292c  nces": {}}, ""),
-000093d0: 0020 2020 2020 2020 2028 0020 2020 2020  .        (.     
-000093e0: 2020 2022 6469 6d65 6e73 696f 6e5f 6469     "dimension_di
-000093f0: 6374 2c20 6578 7065 6374 6564 5f76 616c  ct, expected_val
-00009400: 7565 222c 0020 2020 2040 7079 7465 7374  ue",.    @pytest
-00009410: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-00009420: 6528 0000 2020 2020 2020 2020 6173 7365  e(..        asse
-00009430: 7274 2044 696d 656e 7369 6f6e 2864 696d  rt Dimension(dim
-00009440: 656e 7369 6f6e 5f64 6963 742c 204e 6f6e  ension_dict, Non
-00009450: 6529 2e61 6c69 6173 203d 3d20 6578 7065  e).alias == expe
-00009460: 6374 6564 5f76 616c 7565 0020 2020 2064  cted_value.    d
-00009470: 6566 2069 745f 6b6e 6f77 735f 6974 735f  ef it_knows_its_
-00009480: 616c 6961 7328 7365 6c66 2c20 6469 6d65  alias(self, dime
-00009490: 6e73 696f 6e5f 6469 6374 2c20 6578 7065  nsion_dict, expe
-000094a0: 6374 6564 5f76 616c 7565 293a 0020 2020  cted_value):.   
-000094b0: 2029 0020 2020 2020 2020 2029 2c00 2020   ).        ),.  
-000094c0: 2020 2020 2020 2020 2020 287b 2272 6566            ({"ref
-000094d0: 6572 656e 6365 7322 3a20 7b22 616c 6961  erences": {"alia
-000094e0: 7322 3a20 2245 6c69 6173 227d 7d2c 2022  s": "Elias"}}, "
-000094f0: 456c 6961 7322 292c 0020 2020 2020 2020  Elias"),.       
-00009500: 2020 2020 2028 7b22 7265 6665 7265 6e63       ({"referenc
-00009510: 6573 223a 207b 7d7d 2c20 4e6f 6e65 292c  es": {}}, None),
-00009520: 0020 2020 2020 2020 2028 0020 2020 2020  .        (.     
-00009530: 2020 2022 6469 6d65 6e73 696f 6e5f 6469     "dimension_di
-00009540: 6374 2c20 6578 7065 6374 6564 5f76 616c  ct, expected_val
-00009550: 7565 222c 0020 2020 2040 7079 7465 7374  ue",.    @pytest
-00009560: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-00009570: 6528 0000 2020 2020 2222 2255 6e69 742d  e(..    """Unit-
-00009580: 7465 7374 2073 7569 7465 2066 6f72 2060  test suite for `
-00009590: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
-000095a0: 6e2e 4469 6d65 6e73 696f 6e60 206f 626a  n.Dimension` obj
-000095b0: 6563 742e 2222 2200 636c 6173 7320 4465  ect.""".class De
-000095c0: 7363 7269 6265 4469 6d65 6e73 696f 6e3a  scribeDimension:
-000095d0: 0000 0020 2020 2020 2020 2072 6574 7572  ...        retur
-000095e0: 6e20 6d65 7468 6f64 5f6d 6f63 6b28 7265  n method_mock(re
-000095f0: 7175 6573 742c 205f 5261 7744 696d 656e  quest, _RawDimen
-00009600: 7369 6f6e 2c20 225f 7265 736f 6c76 655f  sion, "_resolve_
-00009610: 6361 7465 676f 7269 6361 6c22 2900 2020  categorical").  
-00009620: 2020 6465 6620 5f72 6573 6f6c 7665 5f63    def _resolve_c
-00009630: 6174 6567 6f72 6963 616c 5f28 7365 6c66  ategorical_(self
-00009640: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00009650: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00009660: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009670: 6d65 7468 6f64 5f6d 6f63 6b28 7265 7175  method_mock(requ
-00009680: 6573 742c 205f 5261 7744 696d 656e 7369  est, _RawDimensi
-00009690: 6f6e 2c20 225f 7265 736f 6c76 655f 6172  on, "_resolve_ar
-000096a0: 7261 795f 7479 7065 2229 0020 2020 2064  ray_type").    d
-000096b0: 6566 205f 7265 736f 6c76 655f 6172 7261  ef _resolve_arra
-000096c0: 795f 7479 7065 5f28 7365 6c66 2c20 7265  y_type_(self, re
-000096d0: 7175 6573 7429 3a00 2020 2020 4070 7974  quest):.    @pyt
-000096e0: 6573 742e 6669 7874 7572 6500 0020 2020  est.fixture..   
-000096f0: 2020 2020 2072 6574 7572 6e20 696e 7374       return inst
-00009700: 616e 6365 5f6d 6f63 6b28 7265 7175 6573  ance_mock(reques
-00009710: 742c 205f 5261 7744 696d 656e 7369 6f6e  t, _RawDimension
-00009720: 2900 2020 2020 6465 6620 7261 775f 6469  ).    def raw_di
-00009730: 6d65 6e73 696f 6e5f 2873 656c 662c 2072  mension_(self, r
-00009740: 6571 7565 7374 293a 0020 2020 2040 7079  equest):.    @py
-00009750: 7465 7374 2e66 6978 7475 7265 0000 2020  test.fixture..  
-00009760: 2020 2020 2020 7265 7475 726e 2070 726f        return pro
-00009770: 7065 7274 795f 6d6f 636b 2872 6571 7565  perty_mock(reque
-00009780: 7374 2c20 5f52 6177 4469 6d65 6e73 696f  st, _RawDimensio
-00009790: 6e2c 2022 5f6e 6578 745f 7261 775f 6469  n, "_next_raw_di
-000097a0: 6d65 6e73 696f 6e22 2900 2020 2020 6465  mension").    de
-000097b0: 6620 5f6e 6578 745f 7261 775f 6469 6d65  f _next_raw_dime
-000097c0: 6e73 696f 6e5f 7072 6f70 5f28 7365 6c66  nsion_prop_(self
-000097d0: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-000097e0: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-000097f0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009800: 7072 6f70 6572 7479 5f6d 6f63 6b28 7265  property_mock(re
-00009810: 7175 6573 742c 205f 5261 7744 696d 656e  quest, _RawDimen
-00009820: 7369 6f6e 2c20 225f 6973 5f6c 6f67 6963  sion, "_is_logic
-00009830: 616c 5f74 7970 6522 2900 2020 2020 6465  al_type").    de
-00009840: 6620 5f69 735f 6c6f 6769 6361 6c5f 7479  f _is_logical_ty
-00009850: 7065 5f70 726f 705f 2873 656c 662c 2072  pe_prop_(self, r
-00009860: 6571 7565 7374 293a 0020 2020 2040 7079  equest):.    @py
-00009870: 7465 7374 2e66 6978 7475 7265 0000 2020  test.fixture..  
-00009880: 2020 2020 2020 7265 7475 726e 2070 726f        return pro
-00009890: 7065 7274 795f 6d6f 636b 2872 6571 7565  perty_mock(reque
-000098a0: 7374 2c20 5f52 6177 4469 6d65 6e73 696f  st, _RawDimensio
-000098b0: 6e2c 2022 5f69 735f 6361 745f 6461 7465  n, "_is_cat_date
-000098c0: 2229 0020 2020 2064 6566 205f 6973 5f63  ").    def _is_c
-000098d0: 6174 5f64 6174 655f 7072 6f70 5f28 7365  at_date_prop_(se
-000098e0: 6c66 2c20 7265 7175 6573 7429 3a00 2020  lf, request):.  
-000098f0: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
-00009900: 6500 0020 2020 2020 2020 2072 6574 7572  e..        retur
-00009910: 6e20 7072 6f70 6572 7479 5f6d 6f63 6b28  n property_mock(
-00009920: 7265 7175 6573 742c 205f 5261 7744 696d  request, _RawDim
-00009930: 656e 7369 6f6e 2c20 225f 6973 5f61 7272  ension, "_is_arr
-00009940: 6179 5f63 6174 2229 0020 2020 2064 6566  ay_cat").    def
-00009950: 205f 6973 5f61 7272 6179 5f63 6174 5f70   _is_array_cat_p
-00009960: 726f 705f 2873 656c 662c 2072 6571 7565  rop_(self, reque
-00009970: 7374 293a 0020 2020 2040 7079 7465 7374  st):.    @pytest
-00009980: 2e66 6978 7475 7265 0000 2020 2020 2020  .fixture..      
-00009990: 2020 7265 7475 726e 2070 726f 7065 7274    return propert
-000099a0: 795f 6d6f 636b 2872 6571 7565 7374 2c20  y_mock(request, 
-000099b0: 5f52 6177 4469 6d65 6e73 696f 6e2c 2022  _RawDimension, "
-000099c0: 5f68 6173 5f73 656c 6563 7465 645f 6361  _has_selected_ca
-000099d0: 7465 676f 7279 2229 0020 2020 2064 6566  tegory").    def
-000099e0: 205f 6861 735f 7365 6c65 6374 6564 5f63   _has_selected_c
-000099f0: 6174 6567 6f72 795f 7072 6f70 5f28 7365  ategory_prop_(se
-00009a00: 6c66 2c20 7265 7175 6573 7429 3a00 2020  lf, request):.  
-00009a10: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
-00009a20: 6500 0020 2020 2020 2020 2072 6574 7572  e..        retur
-00009a30: 6e20 287b 2264 696d 222c 2030 7d2c 207b  n ({"dim", 0}, {
-00009a40: 2264 696d 222c 2031 7d2c 207b 2264 696d  "dim", 1}, {"dim
-00009a50: 222c 2032 7d29 0020 2020 2064 6566 2064  ", 2}).    def d
-00009a60: 696d 656e 7369 6f6e 5f64 6963 7473 5f28  imension_dicts_(
-00009a70: 7365 6c66 293a 0020 2020 2040 7079 7465  self):.    @pyte
-00009a80: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-00009a90: 2020 2020 7265 7475 726e 2070 726f 7065      return prope
-00009aa0: 7274 795f 6d6f 636b 2872 6571 7565 7374  rty_mock(request
-00009ab0: 2c20 5f52 6177 4469 6d65 6e73 696f 6e2c  , _RawDimension,
-00009ac0: 2022 5f62 6173 655f 7479 7065 2229 0020   "_base_type"). 
-00009ad0: 2020 2064 6566 205f 6261 7365 5f74 7970     def _base_typ
-00009ae0: 655f 7072 6f70 5f28 7365 6c66 2c20 7265  e_prop_(self, re
-00009af0: 7175 6573 7429 3a00 2020 2020 4070 7974  quest):.    @pyt
-00009b00: 6573 742e 6669 7874 7572 6500 0020 2020  est.fixture..   
-00009b10: 2023 2066 6978 7475 7265 2063 6f6d 706f   # fixture compo
-00009b20: 6e65 6e74 7320 2d2d 2d2d 2d2d 2d2d 2d2d  nents ----------
-00009b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b50: 2d2d 2d00 0020 2020 2020 2020 2061 7373  ---..        ass
-00009b60: 6572 7420 6469 6d65 6e73 696f 6e5f 7479  ert dimension_ty
-00009b70: 7065 203d 3d20 6578 7065 6374 6564 5f76  pe == expected_v
-00009b80: 616c 7565 0000 2020 2020 2020 2020 6469  alue..        di
-00009b90: 6d65 6e73 696f 6e5f 7479 7065 203d 2072  mension_type = r
-00009ba0: 6177 5f64 696d 656e 7369 6f6e 2e5f 7265  aw_dimension._re
-00009bb0: 736f 6c76 655f 6361 7465 676f 7269 6361  solve_categorica
-00009bc0: 6c28 2900 0020 2020 2020 2020 2072 6177  l()..        raw
-00009bd0: 5f64 696d 656e 7369 6f6e 203d 205f 5261  _dimension = _Ra
-00009be0: 7744 696d 656e 7369 6f6e 284e 6f6e 652c  wDimension(None,
-00009bf0: 204e 6f6e 6529 0020 2020 2020 2020 205f   None).        _
-00009c00: 6973 5f6c 6f67 6963 616c 5f74 7970 655f  is_logical_type_
-00009c10: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
-00009c20: 7565 203d 2069 735f 6c6f 6769 6361 6c5f  ue = is_logical_
-00009c30: 7479 7065 0020 2020 2020 2020 205f 6861  type.        _ha
-00009c40: 735f 7365 6c65 6374 6564 5f63 6174 6567  s_selected_categ
-00009c50: 6f72 795f 7072 6f70 5f2e 7265 7475 726e  ory_prop_.return
-00009c60: 5f76 616c 7565 203d 2068 6173 5f73 656c  _value = has_sel
-00009c70: 6563 7465 645f 6361 7400 2020 2020 2020  ected_cat.      
-00009c80: 2020 5f69 735f 6361 745f 6461 7465 5f70    _is_cat_date_p
-00009c90: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
-00009ca0: 6520 3d20 4661 6c73 6500 2020 2020 2020  e = False.      
-00009cb0: 2020 5f69 735f 6172 7261 795f 6361 745f    _is_array_cat_
-00009cc0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
-00009cd0: 7565 203d 2069 735f 6172 7261 795f 6361  ue = is_array_ca
-00009ce0: 7400 2020 2020 293a 0020 2020 2020 2020  t.    ):.       
-00009cf0: 205f 6973 5f6c 6f67 6963 616c 5f74 7970   _is_logical_typ
-00009d00: 655f 7072 6f70 5f2c 0020 2020 2020 2020  e_prop_,.       
-00009d10: 205f 6861 735f 7365 6c65 6374 6564 5f63   _has_selected_c
-00009d20: 6174 6567 6f72 795f 7072 6f70 5f2c 0020  ategory_prop_,. 
-00009d30: 2020 2020 2020 205f 6973 5f63 6174 5f64         _is_cat_d
-00009d40: 6174 655f 7072 6f70 5f2c 0020 2020 2020  ate_prop_,.     
-00009d50: 2020 205f 6973 5f61 7272 6179 5f63 6174     _is_array_cat
-00009d60: 5f70 726f 705f 2c00 2020 2020 2020 2020  _prop_,.        
-00009d70: 6578 7065 6374 6564 5f76 616c 7565 2c00  expected_value,.
-00009d80: 2020 2020 2020 2020 6973 5f6c 6f67 6963          is_logic
-00009d90: 616c 5f74 7970 652c 0020 2020 2020 2020  al_type,.       
-00009da0: 2068 6173 5f73 656c 6563 7465 645f 6361   has_selected_ca
-00009db0: 742c 0020 2020 2020 2020 2069 735f 6172  t,.        is_ar
-00009dc0: 7261 795f 6361 742c 0020 2020 2020 2020  ray_cat,.       
-00009dd0: 2073 656c 662c 0020 2020 2064 6566 2069   self,.    def i
-00009de0: 745f 7265 736f 6c76 6573 5f61 5f63 6174  t_resolves_a_cat
-00009df0: 6567 6f72 6963 616c 5f74 7970 655f 746f  egorical_type_to
-00009e00: 5f68 656c 7028 0020 2020 2029 0020 2020  _help(.    ).   
-00009e10: 2020 2020 2029 2c00 2020 2020 2020 2020       ),.        
-00009e20: 2020 2020 2854 7275 652c 2054 7275 652c      (True, True,
-00009e30: 2046 616c 7365 2c20 4454 2e43 415f 4341   False, DT.CA_CA
-00009e40: 5429 2c00 2020 2020 2020 2020 2020 2020  T),.            
-00009e50: 2854 7275 652c 2054 7275 652c 2054 7275  (True, True, Tru
-00009e60: 652c 2044 542e 4d52 5f43 4154 292c 0020  e, DT.MR_CAT),. 
-00009e70: 2020 2020 2020 2020 2020 2028 5472 7565             (True
-00009e80: 2c20 4661 6c73 652c 2046 616c 7365 2c20  , False, False, 
-00009e90: 4454 2e43 415f 4341 5429 2c00 2020 2020  DT.CA_CAT),.    
-00009ea0: 2020 2020 2020 2020 2846 616c 7365 2c20          (False, 
-00009eb0: 5472 7565 2c20 5472 7565 2c20 4454 2e4c  True, True, DT.L
-00009ec0: 4f47 4943 414c 292c 0020 2020 2020 2020  OGICAL),.       
-00009ed0: 2020 2020 2028 4661 6c73 652c 2054 7275       (False, Tru
-00009ee0: 652c 2046 616c 7365 2c20 4454 2e43 4154  e, False, DT.CAT
-00009ef0: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-00009f00: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
-00009f10: 6c73 652c 2044 542e 4341 5429 2c00 2020  lse, DT.CAT),.  
-00009f20: 2020 2020 2020 2800 2020 2020 2020 2020        (.        
-00009f30: 2269 735f 6172 7261 795f 6361 742c 2068  "is_array_cat, h
-00009f40: 6173 5f73 656c 6563 7465 645f 6361 742c  as_selected_cat,
-00009f50: 2069 735f 6c6f 6769 6361 6c5f 7479 7065   is_logical_type
-00009f60: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
-00009f70: 222c 0020 2020 2040 7079 7465 7374 2e6d  ",.    @pytest.m
-00009f80: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-00009f90: 0000 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00009fa0: 2064 696d 656e 7369 6f6e 5f74 7970 6520   dimension_type 
-00009fb0: 3d3d 2065 7870 6563 7465 645f 7661 6c75  == expected_valu
-00009fc0: 6500 0020 2020 2020 2020 2064 696d 656e  e..        dimen
-00009fd0: 7369 6f6e 5f74 7970 6520 3d20 7261 775f  sion_type = raw_
-00009fe0: 6469 6d65 6e73 696f 6e2e 5f72 6573 6f6c  dimension._resol
-00009ff0: 7665 5f61 7272 6179 5f74 7970 6528 2900  ve_array_type().
-0000a000: 6164 0000 2d00 0000 ad01 0000 0010 0000  ad..-...........
-0000a010: 5900 0000 0000 0000 b90f 0000 8b0f 0000  Y...............
-0000a020: 380f 0000 2e0f 0000 e70e 0000 e60e 0000  8...............
-0000a030: 9c0e 0000 6e0e 0000 150e 0000 0b0e 0000  ....n...........
-0000a040: b80d 0000 b70d 0000 6d0d 0000 3f0d 0000  ........m...?...
-0000a050: e90c 0000 df0c 0000 a10c 0000 a00c 0000  ................
-0000a060: 6d0c 0000 560c 0000 410c 0000 2a0c 0000  m...V...A...*...
-0000a070: 110c 0000 f10b 0000 a90b 0000 870b 0000  ................
-0000a080: 780b 0000 6e0b 0000 250b 0000 240b 0000  x...n...%...$...
-0000a090: 060b 0000 d60a 0000 cc0a 0000 760a 0000  ............v...
-0000a0a0: 1f0a 0000 cc09 0000 8409 0000 6a09 0000  ............j...
-0000a0b0: 4309 0000 0f09 0000 db08 0000 9c08 0000  C...............
-0000a0c0: 5d08 0000 3708 0000 1108 0000 e007 0000  ]...7...........
-0000a0d0: af07 0000 8907 0000 6507 0000 3f07 0000  ........e...?...
-0000a0e0: 3407 0000 2e07 0000 e706 0000 b506 0000  4...............
-0000a0f0: 6006 0000 3006 0000 2f06 0000 fa05 0000  `...0.../.......
-0000a100: ce05 0000 c705 0000 9405 0000 4a05 0000  ............J...
-0000a110: 1805 0000 0e05 0000 c604 0000 c504 0000  ................
-0000a120: 8804 0000 4f04 0000 2d04 0000 df03 0000  ....O...-.......
-0000a130: d503 0000 a503 0000 6503 0000 6403 0000  ........e...d...
-0000a140: 3a03 0000 3903 0000 ec02 0000 c302 0000  :...9...........
-0000a150: c202 0000 a402 0000 7a02 0000 7002 0000  ........z...p...
-0000a160: 5702 0000 3002 0000 0d02 0000 e301 0000  W...0...........
-0000a170: be01 0000 b301 0000 ad01 0000 ac01 0000  ................
-0000a180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1a0: 0000 0000 0000 0000 0000 0000 0020 2020  .............   
-0000a1b0: 2029 0020 2020 2020 2020 2029 2c00 2020   ).        ),.  
-0000a1c0: 2020 2020 2020 2020 2020 287b 2270 7275            ({"pru
-0000a1d0: 6e65 223a 2054 7275 657d 2c20 5472 7565  ne": True}, True
-0000a1e0: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-0000a1f0: 7b22 7072 756e 6522 3a20 2266 6f6f 6261  {"prune": "fooba
-0000a200: 7222 7d2c 2046 616c 7365 292c 0020 2020  r"}, False),.   
-0000a210: 2020 2020 2020 2020 2028 7b22 7072 756e           ({"prun
-0000a220: 6522 3a20 317d 2c20 4661 6c73 6529 2c00  e": 1}, False),.
-0000a230: 2020 2020 2020 2020 2020 2020 287b 2270              ({"p
-0000a240: 7275 6e65 223a 2046 616c 7365 7d2c 2046  rune": False}, F
-0000a250: 616c 7365 292c 0020 2020 2020 2020 2020  alse),.         
-0000a260: 2020 2028 7b7d 2c20 4661 6c73 6529 2c00     ({}, False),.
-0000a270: 2020 2020 2020 2020 2800 2020 2020 2020          (.      
-0000a280: 2020 2264 696d 5f74 7261 6e73 666f 726d    "dim_transform
-0000a290: 732c 2065 7870 6563 7465 645f 7661 6c75  s, expected_valu
-0000a2a0: 6522 2c00 2020 2020 4070 7974 6573 742e  e",.    @pytest.
-0000a2b0: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
-0000a2c0: 2800 0020 2020 2020 2020 2061 7373 6572  (..        asser
-0000a2d0: 7420 6f72 6465 725f 7370 6563 2069 7320  t order_spec is 
-0000a2e0: 6f72 6465 725f 7370 6563 5f00 2020 2020  order_spec_.    
-0000a2f0: 2020 2020 5f4f 7264 6572 5370 6563 5f2e      _OrderSpec_.
-0000a300: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
-0000a310: 6365 5f77 6974 6828 6469 6d65 6e73 696f  ce_with(dimensio
-0000a320: 6e2c 2064 696d 656e 7369 6f6e 5f74 7261  n, dimension_tra
-0000a330: 6e73 666f 726d 7329 0000 2020 2020 2020  nsforms)..      
-0000a340: 2020 6f72 6465 725f 7370 6563 203d 2064    order_spec = d
-0000a350: 696d 656e 7369 6f6e 2e6f 7264 6572 5f73  imension.order_s
-0000a360: 7065 6300 0020 2020 2020 2020 2064 696d  pec..        dim
-0000a370: 656e 7369 6f6e 203d 2044 696d 656e 7369  ension = Dimensi
-0000a380: 6f6e 284e 6f6e 652c 204e 6f6e 652c 2064  on(None, None, d
-0000a390: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
-0000a3a0: 726d 7329 0020 2020 2020 2020 2064 696d  rms).        dim
-0000a3b0: 656e 7369 6f6e 5f74 7261 6e73 666f 726d  ension_transform
-0000a3c0: 7320 3d20 7b22 6469 6d22 3a20 2278 6672  s = {"dim": "xfr
-0000a3d0: 6d73 227d 0020 2020 2020 2020 2029 0020  ms"}.        ). 
-0000a3e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0000a3f0: 7374 2c20 2263 722e 6375 6265 2e64 696d  st, "cr.cube.dim
-0000a400: 656e 7369 6f6e 2e5f 4f72 6465 7253 7065  ension._OrderSpe
-0000a410: 6322 2c20 7265 7475 726e 5f76 616c 7565  c", return_value
-0000a420: 3d6f 7264 6572 5f73 7065 635f 0020 2020  =order_spec_.   
-0000a430: 2020 2020 205f 4f72 6465 7253 7065 635f       _OrderSpec_
-0000a440: 203d 2063 6c61 7373 5f6d 6f63 6b28 0020   = class_mock(. 
-0000a450: 2020 2020 2020 206f 7264 6572 5f73 7065         order_spe
-0000a460: 635f 203d 2069 6e73 7461 6e63 655f 6d6f  c_ = instance_mo
-0000a470: 636b 2872 6571 7565 7374 2c20 5f4f 7264  ck(request, _Ord
-0000a480: 6572 5370 6563 2900 2020 2020 6465 6620  erSpec).    def 
-0000a490: 6974 5f70 726f 7669 6465 735f 6163 6365  it_provides_acce
-0000a4a0: 7373 5f74 6f5f 7468 655f 6f72 6465 725f  ss_to_the_order_
-0000a4b0: 7370 6563 2873 656c 662c 2072 6571 7565  spec(self, reque
-0000a4c0: 7374 293a 0000 2020 2020 2020 2020 6173  st):..        as
-0000a4d0: 7365 7274 2044 696d 656e 7369 6f6e 284e  sert Dimension(N
-0000a4e0: 6f6e 652c 204e 6f6e 6529 2e6e 756d 6572  one, None).numer
-0000a4f0: 6963 5f76 616c 7565 7320 3d3d 2028 312c  ic_values == (1,
-0000a500: 2032 2e32 2c20 6e70 2e6e 616e 2900 2020   2.2, np.nan).  
-0000a510: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-0000a520: 2020 2020 666f 7220 6e75 6d65 7269 635f      for numeric_
-0000a530: 7661 6c75 6520 696e 2028 312c 2032 2e32  value in (1, 2.2
-0000a540: 2c20 6e70 2e6e 616e 2900 2020 2020 2020  , np.nan).      
-0000a550: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
-0000a560: 6f63 6b28 7265 7175 6573 742c 205f 456c  ock(request, _El
-0000a570: 656d 656e 742c 206e 756d 6572 6963 5f76  ement, numeric_v
-0000a580: 616c 7565 3d6e 756d 6572 6963 5f76 616c  alue=numeric_val
-0000a590: 7565 2900 2020 2020 2020 2020 7661 6c69  ue).        vali
-0000a5a0: 645f 656c 656d 656e 7473 5f70 726f 705f  d_elements_prop_
-0000a5b0: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
-0000a5c0: 7475 706c 6528 0020 2020 2029 3a00 2020  tuple(.    ):.  
-0000a5d0: 2020 2020 2020 7365 6c66 2c20 7265 7175        self, requ
-0000a5e0: 6573 742c 2076 616c 6964 5f65 6c65 6d65  est, valid_eleme
-0000a5f0: 6e74 735f 7072 6f70 5f00 2020 2020 6465  nts_prop_.    de
-0000a600: 6620 6974 5f6b 6e6f 7773 5f74 6865 5f6e  f it_knows_the_n
-0000a610: 756d 6572 6963 5f76 616c 7565 735f 6f66  umeric_values_of
-0000a620: 5f69 7473 5f65 6c65 6d65 6e74 7328 0000  _its_elements(..
-0000a630: 2020 2020 2020 2020 6173 7365 7274 2064          assert d
-0000a640: 696d 656e 7369 6f6e 2e6e 616d 6520 3d3d  imension.name ==
-0000a650: 2065 7870 6563 7465 645f 7661 6c75 6500   expected_value.
-0000a660: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0000a670: 6e20 3d20 4469 6d65 6e73 696f 6e28 6469  n = Dimension(di
-0000a680: 6d65 6e73 696f 6e5f 6469 6374 2c20 4e6f  mension_dict, No
-0000a690: 6e65 2c20 6469 6d65 6e73 696f 6e5f 7472  ne, dimension_tr
-0000a6a0: 616e 7366 6f72 6d73 3d64 696d 5f78 666f  ansforms=dim_xfo
-0000a6b0: 726d 7329 0020 2020 2020 2020 2064 696d  rms).        dim
-0000a6c0: 656e 7369 6f6e 5f64 6963 7420 3d20 7b22  ension_dict = {"
-0000a6d0: 7265 6665 7265 6e63 6573 223a 2064 696d  references": dim
-0000a6e0: 5f72 6566 737d 0020 2020 2064 6566 2069  _refs}.    def i
-0000a6f0: 745f 6b6e 6f77 735f 6974 735f 6e61 6d65  t_knows_its_name
-0000a700: 2873 656c 662c 2064 696d 5f72 6566 732c  (self, dim_refs,
-0000a710: 2064 696d 5f78 666f 726d 732c 2065 7870   dim_xforms, exp
-0000a720: 6563 7465 645f 7661 6c75 6529 3a00 2020  ected_value):.  
-0000a730: 2020 2900 2020 2020 2020 2020 292c 0020    ).        ),. 
-0000a740: 2020 2020 2020 2020 2020 2028 7b7d 2c20             ({}, 
-0000a750: 7b22 6e61 6d65 223a 204e 6f6e 657d 2c20  {"name": None}, 
-0000a760: 2222 292c 0020 2020 2020 2020 2020 2020  ""),.           
-0000a770: 2028 7b7d 2c20 7b22 6e61 6d65 223a 2022   ({}, {"name": "
-0000a780: 227d 2c20 2222 292c 0020 2020 2020 2020  "}, ""),.       
-0000a790: 2020 2020 2028 7b7d 2c20 7b22 6e61 6d65       ({}, {"name
-0000a7a0: 223a 2022 4322 7d2c 2022 4322 292c 0020  ": "C"}, "C"),. 
-0000a7b0: 2020 2020 2020 2020 2020 2028 7b22 6e61             ({"na
-0000a7c0: 6d65 223a 2022 4222 7d2c 207b 226e 616d  me": "B"}, {"nam
-0000a7d0: 6522 3a20 4e6f 6e65 7d2c 2022 2229 2c00  e": None}, ""),.
-0000a7e0: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
-0000a7f0: 616d 6522 3a20 2242 227d 2c20 7b22 6e61  ame": "B"}, {"na
-0000a800: 6d65 223a 2022 4322 7d2c 2022 4322 292c  me": "C"}, "C"),
-0000a810: 0020 2020 2020 2020 2020 2020 2028 7b22  .            ({"
-0000a820: 6e61 6d65 223a 204e 6f6e 657d 2c20 7b7d  name": None}, {}
-0000a830: 2c20 2222 292c 0020 2020 2020 2020 2020  , ""),.         
-0000a840: 2020 2028 7b22 6e61 6d65 223a 2022 4222     ({"name": "B"
-0000a850: 7d2c 207b 7d2c 2022 4222 292c 0020 2020  }, {}, "B"),.   
-0000a860: 2020 2020 2020 2020 2028 7b22 616c 6961           ({"alia
-0000a870: 7322 3a20 2241 222c 2022 6e61 6d65 223a  s": "A", "name":
-0000a880: 2022 4222 7d2c 207b 226e 616d 6522 3a20   "B"}, {"name": 
-0000a890: 4e6f 6e65 7d2c 2022 2229 2c00 2020 2020  None}, ""),.    
-0000a8a0: 2020 2020 2020 2020 287b 2261 6c69 6173          ({"alias
-0000a8b0: 223a 2022 4122 2c20 226e 616d 6522 3a20  ": "A", "name": 
-0000a8c0: 2242 227d 2c20 7b22 6e61 6d65 223a 2022  "B"}, {"name": "
-0000a8d0: 4322 7d2c 2022 4322 292c 0020 2020 2020  C"}, "C"),.     
-0000a8e0: 2020 2020 2020 2028 7b22 616c 6961 7322         ({"alias"
-0000a8f0: 3a20 2241 222c 2022 6e61 6d65 223a 204e  : "A", "name": N
-0000a900: 6f6e 657d 2c20 7b7d 2c20 2222 292c 0020  one}, {}, ""),. 
-0000a910: 2020 2020 2020 2020 2020 2028 7b22 616c             ({"al
-0000a920: 6961 7322 3a20 2241 222c 2022 6e61 6d65  ias": "A", "name
-0000a930: 223a 2022 4222 7d2c 207b 7d2c 2022 4222  ": "B"}, {}, "B"
-0000a940: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-0000a950: 7b22 616c 6961 7322 3a20 2241 227d 2c20  {"alias": "A"}, 
-0000a960: 7b7d 2c20 2241 2229 2c00 2020 2020 2020  {}, "A"),.      
-0000a970: 2020 2020 2020 287b 7d2c 207b 7d2c 2022        ({}, {}, "
-0000a980: 2229 2c00 2020 2020 2020 2020 2020 2020  "),.            
-0000a990: 2320 2d2d 2d20 6e6f 726d 616c 697a 6564  # --- normalized
-0000a9a0: 2074 6f20 2222 2073 7563 6820 7468 6174   to "" such that
-0000a9b0: 2072 6574 7572 6e20 7479 7065 2069 7320   return type is 
-0000a9c0: 616c 7761 7973 2073 7472 2e00 2020 2020  always str..    
-0000a9d0: 2020 2020 2020 2020 2320 2d2d 2d20 696e          # --- in
-0000a9e0: 636c 7564 696e 6720 4e6f 6e65 2c20 6f76  cluding None, ov
-0000a9f0: 6572 7269 6465 7320 6675 7274 6865 7220  errides further 
-0000aa00: 696e 6865 7269 7461 6e63 652e 2041 2060  inheritance. A `
-0000aa10: 4e6f 6e65 6020 7661 6c75 6520 6973 0020  None` value is. 
-0000aa20: 2020 2020 2020 2020 2020 2023 202d 2d2d             # ---
-0000aa30: 2028 6b65 7920 646f 6573 206e 6f74 2061   (key does not a
-0000aa40: 7070 6561 7220 696e 2064 6963 7429 2c20  ppear in dict), 
-0000aa50: 6e61 6d65 2069 7320 696e 6865 7269 7465  name is inherite
-0000aa60: 642e 2041 6e79 2070 7265 7365 6e74 2076  d. Any present v
-0000aa70: 616c 7565 2c00 2020 2020 2020 2020 2020  alue,.          
-0000aa80: 2020 2320 2d2d 2d20 696e 6865 7269 7461    # --- inherita
-0000aa90: 6e63 6520 6973 2061 6c69 6173 203c 2d20  nce is alias <- 
-0000aaa0: 6e61 6d65 203c 2d20 6e61 6d65 2d74 7261  name <- name-tra
-0000aab0: 6e73 666f 726d 2e20 4966 2076 616c 7565  nsform. If value
-0000aac0: 2069 7320 6f6d 6974 7465 6400 2020 2020   is omitted.    
-0000aad0: 2020 2020 2800 2020 2020 2020 2020 2264      (.        "d
-0000aae0: 696d 5f72 6566 732c 2064 696d 5f78 666f  im_refs, dim_xfo
-0000aaf0: 726d 732c 2065 7870 6563 7465 645f 7661  rms, expected_va
-0000ab00: 6c75 6522 2c00 2020 2020 4070 7974 6573  lue",.    @pytes
-0000ab10: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
-0000ab20: 7a65 2800 0020 2020 2020 2020 2061 7373  ze(..        ass
-0000ab30: 6572 7420 4469 6d65 6e73 696f 6e28 4e6f  ert Dimension(No
-0000ab40: 6e65 2c20 4e6f 6e65 292e 696e 7365 7274  ne, None).insert
-0000ab50: 696f 6e5f 6964 7320 3d3d 2028 312c 2032  ion_ids == (1, 2
-0000ab60: 2c20 332c 2034 2c20 352c 2036 2900 2020  , 3, 4, 5, 6).  
-0000ab70: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-0000ab80: 2020 2020 292c 0020 2020 2020 2020 2020      ),.         
-0000ab90: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0000aba0: 7261 6e67 6528 3629 0020 2020 2020 2020  range(6).       
-0000abb0: 2020 2020 2020 2020 2069 6e73 7461 6e63           instanc
-0000abc0: 655f 6d6f 636b 2872 6571 7565 7374 2c20  e_mock(request, 
-0000abd0: 5f53 7562 746f 7461 6c2c 2069 6e73 6572  _Subtotal, inser
-0000abe0: 7469 6f6e 5f69 643d 2869 202b 2031 2929  tion_id=(i + 1))
-0000abf0: 0020 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000ac00: 7572 6e5f 7661 6c75 653d 7475 706c 6528  urn_value=tuple(
-0000ac10: 0020 2020 2020 2020 2020 2020 2022 7375  .            "su
-0000ac20: 6274 6f74 616c 7322 2c00 2020 2020 2020  btotals",.      
-0000ac30: 2020 2020 2020 4469 6d65 6e73 696f 6e2c        Dimension,
-0000ac40: 0020 2020 2020 2020 2020 2020 2072 6571  .            req
-0000ac50: 7565 7374 2c00 2020 2020 2020 2020 7072  uest,.        pr
-0000ac60: 6f70 6572 7479 5f6d 6f63 6b28 0020 2020  operty_mock(.   
-0000ac70: 2064 6566 2069 745f 6b6e 6f77 735f 6974   def it_knows_it
-0000ac80: 735f 696e 7365 7274 696f 6e5f 6964 7328  s_insertion_ids(
-0000ac90: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-0000aca0: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000acb0: 4469 6d65 6e73 696f 6e28 4e6f 6e65 2c20  Dimension(None, 
-0000acc0: 4e6f 6e65 292e 6869 6464 656e 5f69 6478  None).hidden_idx
-0000acd0: 7320 3d3d 2028 312c 2033 2c20 3529 0020  s == (1, 3, 5). 
-0000ace0: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-0000acf0: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
-0000ad00: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
-0000ad10: 6d65 6e74 2c20 6973 5f68 6964 6465 6e3d  ment, is_hidden=
-0000ad20: 626f 6f6c 2869 2025 2032 2929 2066 6f72  bool(i % 2)) for
-0000ad30: 2069 2069 6e20 7261 6e67 6528 3729 0020   i in range(7). 
-0000ad40: 2020 2020 2020 2076 616c 6964 5f65 6c65         valid_ele
-0000ad50: 6d65 6e74 735f 7072 6f70 5f2e 7265 7475  ments_prop_.retu
-0000ad60: 726e 5f76 616c 7565 203d 2028 0020 2020  rn_value = (.   
-0000ad70: 2064 6566 2069 745f 636f 6d70 7574 6573   def it_computes
-0000ad80: 5f69 7473 5f68 6964 6465 6e5f 6964 7873  _its_hidden_idxs
-0000ad90: 2873 656c 662c 2072 6571 7565 7374 2c20  (self, request, 
-0000ada0: 7661 6c69 645f 656c 656d 656e 7473 5f70  valid_elements_p
-0000adb0: 726f 705f 293a 0000 2020 2020 2020 2020  rop_):..        
-0000adc0: 6173 7365 7274 2044 696d 656e 7369 6f6e  assert Dimension
-0000add0: 284e 6f6e 652c 204e 6f6e 6529 2e65 6c65  (None, None).ele
-0000ade0: 6d65 6e74 5f6c 6162 656c 7320 3d3d 2028  ment_labels == (
-0000adf0: 226c 626c 2031 222c 2022 6c62 6c20 3222  "lbl 1", "lbl 2"
-0000ae00: 2c20 226c 626c 2033 2229 0020 2020 2020  , "lbl 3").     
-0000ae10: 2020 2029 0020 2020 2020 2020 2020 2020     ).           
-0000ae20: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
-0000ae30: 6571 7565 7374 2c20 5f45 6c65 6d65 6e74  equest, _Element
-0000ae40: 2c20 6c61 6265 6c3d 226c 626c 2025 7322  , label="lbl %s"
-0000ae50: 2025 2028 6920 2b20 3129 2920 666f 7220   % (i + 1)) for 
-0000ae60: 6920 696e 2072 616e 6765 2833 2900 2020  i in range(3).  
-0000ae70: 2020 2020 2020 7661 6c69 645f 656c 656d        valid_elem
-0000ae80: 656e 7473 5f70 726f 705f 2e72 6574 7572  ents_prop_.retur
-0000ae90: 6e5f 7661 6c75 6520 3d20 2800 2020 2020  n_value = (.    
-0000aea0: 6465 6620 6974 5f6b 6e6f 7773 5f69 7473  def it_knows_its
-0000aeb0: 5f65 6c65 6d65 6e74 5f6c 6162 656c 7328  _element_labels(
-0000aec0: 7365 6c66 2c20 7265 7175 6573 742c 2076  self, request, v
-0000aed0: 616c 6964 5f65 6c65 6d65 6e74 735f 7072  alid_elements_pr
-0000aee0: 6f70 5f29 3a00 0020 2020 2020 2020 2061  op_):..        a
-0000aef0: 7373 6572 7420 4469 6d65 6e73 696f 6e28  ssert Dimension(
-0000af00: 4e6f 6e65 2c20 4e6f 6e65 292e 656c 656d  None, None).elem
-0000af10: 656e 745f 6964 7320 3d3d 2028 312c 2032  ent_ids == (1, 2
-0000af20: 2c20 332c 2034 2c20 352c 2036 2900 2020  , 3, 4, 5, 6).  
-0000af30: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-0000af40: 2020 2020 696e 7374 616e 6365 5f6d 6f63      instance_moc
-0000af50: 6b28 7265 7175 6573 742c 205f 456c 656d  k(request, _Elem
-0000af60: 656e 742c 2065 6c65 6d65 6e74 5f69 643d  ent, element_id=
-0000af70: 2869 202b 2031 2929 2066 6f72 2069 2069  (i + 1)) for i i
-0000af80: 6e20 7261 6e67 6528 3629 0020 2020 2020  n range(6).     
-0000af90: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
-0000afa0: 735f 7072 6f70 5f2e 7265 7475 726e 5f76  s_prop_.return_v
-0000afb0: 616c 7565 203d 2028 0020 2020 2064 6566  alue = (.    def
-0000afc0: 2069 745f 6b6e 6f77 735f 6974 735f 656c   it_knows_its_el
-0000afd0: 656d 656e 745f 6964 7328 7365 6c66 2c20  ement_ids(self, 
-0000afe0: 7265 7175 6573 742c 2076 616c 6964 5f65  request, valid_e
-0000aff0: 6c65 6d65 6e74 735f 7072 6f70 5f29 3a00  lements_prop_):.
-0000b000: 6164 0000 1b00 0000 c701 0000 0010 0000  ad..............
-0000b010: 6400 0000 0000 0000 ac0f 0000 5f0f 0000  d..........._...
-0000b020: 5e0f 0000 400f 0000 110f 0000 070f 0000  ^...@...........
-0000b030: d60e 0000 b40e 0000 9e0e 0000 900e 0000  ................
-0000b040: 450e 0000 120e 0000 030e 0000 f80d 0000  E...............
-0000b050: f20d 0000 9d0d 0000 600d 0000 0b0d 0000  ........`.......
-0000b060: 0a0d 0000 ec0c 0000 c10c 0000 b70c 0000  ................
-0000b070: a10c 0000 7b0c 0000 4b0c 0000 0c0c 0000  ....{...K.......
-0000b080: bd0b 0000 af0b 0000 9d0b 0000 790b 0000  ............y...
-0000b090: 570b 0000 2c0b 0000 fc0a 0000 bf0a 0000  W...,...........
-0000b0a0: 820a 0000 600a 0000 420a 0000 280a 0000  ....`...B...(...
-0000b0b0: 120a 0000 ff09 0000 bb09 0000 ac09 0000  ................
-0000b0c0: a109 0000 9b09 0000 6609 0000 5809 0000  ........f...X...
-0000b0d0: 4009 0000 2709 0000 1209 0000 fe08 0000  @...'...........
-0000b0e0: e008 0000 c708 0000 c008 0000 7408 0000  ............t...
-0000b0f0: 3808 0000 0a08 0000 d607 0000 d507 0000  8...............
-0000b100: ad07 0000 ac07 0000 5e07 0000 3707 0000  ........^...7...
-0000b110: 3607 0000 f006 0000 c706 0000 7f06 0000  6...............
-0000b120: 6106 0000 5706 0000 0306 0000 0206 0000  a...W...........
-0000b130: bc05 0000 7d05 0000 6f05 0000 5e05 0000  ....}...o...^...
-0000b140: 4605 0000 3105 0000 1d05 0000 ff04 0000  F...1...........
-0000b150: e604 0000 df04 0000 8604 0000 5804 0000  ............X...
-0000b160: 1c04 0000 c403 0000 9003 0000 8f03 0000  ................
-0000b170: 6703 0000 6603 0000 2503 0000 fe02 0000  g...f...%.......
-0000b180: fd02 0000 bd02 0000 af02 0000 9102 0000  ................
-0000b190: 7802 0000 6302 0000 4f02 0000 4802 0000  x...c...O...H...
-0000b1a0: 0302 0000 c701 0000 c601 0000 0000 0000  ................
-0000b1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1c0: 0000 0000 0000 0020 2020 2020 2020 2076  .......        v
-0000b1d0: 616c 6964 5f65 6c65 6d65 6e74 735f 7072  alid_elements_pr
-0000b1e0: 6f70 5f2e 7265 7475 726e 5f76 616c 7565  op_.return_value
-0000b1f0: 203d 2076 616c 6964 5f65 6c65 6d65 6e74   = valid_element
-0000b200: 735f 0020 2020 2020 2020 2064 696d 656e  s_.        dimen
-0000b210: 7369 6f6e 5f74 7261 6e73 666f 726d 7320  sion_transforms 
-0000b220: 3d20 7b22 696e 7365 7274 696f 6e73 223a  = {"insertions":
-0000b230: 205b 2273 7562 746f 7461 6c22 2c20 2264   ["subtotal", "d
-0000b240: 6963 7473 225d 7d00 2020 2020 293a 0020  icts"]}.    ):. 
-0000b250: 2020 2020 2020 2073 7562 746f 7461 6c73         subtotals
-0000b260: 5f2c 0020 2020 2020 2020 205f 5375 6274  _,.        _Subt
-0000b270: 6f74 616c 735f 2c00 2020 2020 2020 2020  otals_,.        
-0000b280: 7661 6c69 645f 656c 656d 656e 7473 5f2c  valid_elements_,
-0000b290: 0020 2020 2020 2020 2076 616c 6964 5f65  .        valid_e
-0000b2a0: 6c65 6d65 6e74 735f 7072 6f70 5f2c 0020  lements_prop_,. 
-0000b2b0: 2020 2020 2020 2073 656c 662c 0020 2020         self,.   
-0000b2c0: 2064 6566 2061 6e64 5f69 745f 6f76 6572   def and_it_over
-0000b2d0: 7269 6465 735f 7769 7468 5f73 7562 746f  rides_with_subto
-0000b2e0: 7461 6c5f 7472 616e 7366 6f72 6d73 5f77  tal_transforms_w
-0000b2f0: 6865 6e5f 7072 6573 656e 7428 0000 2020  hen_present(..  
-0000b300: 2020 2020 2020 6173 7365 7274 2073 7562        assert sub
-0000b310: 746f 7461 6c73 2069 7320 7375 6274 6f74  totals is subtot
-0000b320: 616c 735f 0020 2020 2020 2020 205f 5375  als_.        _Su
-0000b330: 6274 6f74 616c 735f 2e61 7373 6572 745f  btotals_.assert_
-0000b340: 6361 6c6c 6564 5f6f 6e63 655f 7769 7468  called_once_with
-0000b350: 285b 5d2c 2076 616c 6964 5f65 6c65 6d65  ([], valid_eleme
-0000b360: 6e74 735f 2900 0020 2020 2020 2020 2073  nts_)..        s
-0000b370: 7562 746f 7461 6c73 203d 2064 696d 656e  ubtotals = dimen
-0000b380: 7369 6f6e 2e73 7562 746f 7461 6c73 0000  sion.subtotals..
-0000b390: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0000b3a0: 6e20 3d20 4469 6d65 6e73 696f 6e28 6469  n = Dimension(di
-0000b3b0: 6d65 6e73 696f 6e5f 6469 6374 2c20 4e6f  mension_dict, No
-0000b3c0: 6e65 2900 2020 2020 2020 2020 6469 6d65  ne).        dime
-0000b3d0: 6e73 696f 6e5f 6469 6374 203d 207b 2272  nsion_dict = {"r
-0000b3e0: 6566 6572 656e 6365 7322 3a20 7b22 7669  eferences": {"vi
-0000b3f0: 6577 223a 207b 2274 7261 6e73 666f 726d  ew": {"transform
-0000b400: 223a 207b 2269 6e73 6572 7469 6f6e 7322  ": {"insertions"
-0000b410: 3a20 5b36 3636 5d7d 7d7d 7d00 2020 2020  : [666]}}}}.    
-0000b420: 2020 2020 7661 6c69 645f 656c 656d 656e      valid_elemen
-0000b430: 7473 5f70 726f 705f 2e72 6574 7572 6e5f  ts_prop_.return_
-0000b440: 7661 6c75 6520 3d20 7661 6c69 645f 656c  value = valid_el
-0000b450: 656d 656e 7473 5f00 2020 2020 2020 2020  ements_.        
-0000b460: 5f53 7562 746f 7461 6c73 5f2e 7265 7475  _Subtotals_.retu
-0000b470: 726e 5f76 616c 7565 203d 2073 7562 746f  rn_value = subto
-0000b480: 7461 6c73 5f00 2020 2020 2020 2020 7072  tals_.        pr
-0000b490: 6f70 6572 7479 5f6d 6f63 6b28 7265 7175  operty_mock(requ
-0000b4a0: 6573 742c 2044 696d 656e 7369 6f6e 2c20  est, Dimension, 
-0000b4b0: 2264 696d 656e 7369 6f6e 5f74 7970 6522  "dimension_type"
-0000b4c0: 2c20 7265 7475 726e 5f76 616c 7565 3d64  , return_value=d
-0000b4d0: 696d 656e 7369 6f6e 5f74 7970 6529 0020  imension_type). 
-0000b4e0: 2020 2029 3a00 2020 2020 2020 2020 7661     ):.        va
-0000b4f0: 6c69 645f 656c 656d 656e 7473 5f2c 0020  lid_elements_,. 
-0000b500: 2020 2020 2020 2076 616c 6964 5f65 6c65         valid_ele
-0000b510: 6d65 6e74 735f 7072 6f70 5f2c 0020 2020  ments_prop_,.   
-0000b520: 2020 2020 2073 7562 746f 7461 6c73 5f2c       subtotals_,
-0000b530: 0020 2020 2020 2020 205f 5375 6274 6f74  .        _Subtot
-0000b540: 616c 735f 2c00 2020 2020 2020 2020 6469  als_,.        di
-0000b550: 6d65 6e73 696f 6e5f 7479 7065 2c00 2020  mension_type,.  
-0000b560: 2020 2020 2020 7265 7175 6573 742c 0020        request,. 
-0000b570: 2020 2020 2020 2073 656c 662c 0020 2020         self,.   
-0000b580: 2064 6566 2062 7574 5f69 745f 7375 7070   def but_it_supp
-0000b590: 7265 7373 6573 5f61 6e79 5f73 7562 746f  resses_any_subto
-0000b5a0: 7461 6c73 5f6f 6e5f 616e 5f61 7272 6179  tals_on_an_array
-0000b5b0: 5f64 696d 656e 7369 6f6e 2800 2020 2020  _dimension(.    
-0000b5c0: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-0000b5d0: 616d 6574 7269 7a65 2822 6469 6d65 6e73  ametrize("dimens
-0000b5e0: 696f 6e5f 7479 7065 222c 2028 4454 2e4d  ion_type", (DT.M
-0000b5f0: 522c 2044 542e 4341 5f53 5542 5641 5229  R, DT.CA_SUBVAR)
-0000b600: 2900 0020 2020 2020 2020 2061 7373 6572  )..        asser
-0000b610: 7420 4469 6d65 6e73 696f 6e28 4e6f 6e65  t Dimension(None
-0000b620: 2c20 4e6f 6e65 292e 7375 6274 6f74 616c  , None).subtotal
-0000b630: 5f6c 6162 656c 7320 3d3d 2028 226c 626c  _labels == ("lbl
-0000b640: 2031 222c 2022 6c62 6c20 3222 2c20 226c   1", "lbl 2", "l
-0000b650: 626c 2033 2229 0020 2020 2020 2020 2029  bl 3").        )
-0000b660: 0020 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000b670: 2069 2069 6e20 7261 6e67 6528 3329 0020   i in range(3). 
-0000b680: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
-0000b690: 6e63 655f 6d6f 636b 2872 6571 7565 7374  nce_mock(request
-0000b6a0: 2c20 5f53 7562 746f 7461 6c2c 206c 6162  , _Subtotal, lab
-0000b6b0: 656c 3d22 6c62 6c20 2573 2220 2520 2869  el="lbl %s" % (i
-0000b6c0: 202b 2031 2929 0020 2020 2020 2020 2073   + 1)).        s
-0000b6d0: 7562 746f 7461 6c73 5f70 726f 705f 2e72  ubtotals_prop_.r
-0000b6e0: 6574 7572 6e5f 7661 6c75 6520 3d20 2800  eturn_value = (.
-0000b6f0: 2020 2020 6465 6620 6974 5f6b 6e6f 7773      def it_knows
-0000b700: 5f69 7473 5f73 7562 746f 7461 6c5f 6c61  _its_subtotal_la
-0000b710: 6265 6c73 2873 656c 662c 2072 6571 7565  bels(self, reque
-0000b720: 7374 2c20 7375 6274 6f74 616c 735f 7072  st, subtotals_pr
-0000b730: 6f70 5f29 3a00 0020 2020 2020 2020 2061  op_):..        a
-0000b740: 7373 6572 7420 7375 6274 6f74 616c 7320  ssert subtotals 
-0000b750: 6973 2073 7562 746f 7461 6c73 5f00 2020  is subtotals_.  
-0000b760: 2020 2020 2020 5f53 7562 746f 7461 6c73        _Subtotals
-0000b770: 5f2e 6173 7365 7274 5f63 616c 6c65 645f  _.assert_called_
-0000b780: 6f6e 6365 5f77 6974 6828 696e 7365 7274  once_with(insert
-0000b790: 696f 6e5f 6469 6374 732c 2076 616c 6964  ion_dicts, valid
-0000b7a0: 5f65 6c65 6d65 6e74 735f 2900 0020 2020  _elements_)..   
-0000b7b0: 2020 2020 2073 7562 746f 7461 6c73 203d       subtotals =
-0000b7c0: 2064 696d 656e 7369 6f6e 2e73 7562 746f   dimension.subto
-0000b7d0: 7461 6c73 0000 2020 2020 2020 2020 6469  tals..        di
-0000b7e0: 6d65 6e73 696f 6e20 3d20 4469 6d65 6e73  mension = Dimens
-0000b7f0: 696f 6e28 6469 6d65 6e73 696f 6e5f 6469  ion(dimension_di
-0000b800: 6374 2c20 4e6f 6e65 2900 2020 2020 2020  ct, None).      
-0000b810: 2020 5f53 7562 746f 7461 6c73 5f2e 7265    _Subtotals_.re
-0000b820: 7475 726e 5f76 616c 7565 203d 2073 7562  turn_value = sub
-0000b830: 746f 7461 6c73 5f00 2020 2020 2020 2020  totals_.        
-0000b840: 7661 6c69 645f 656c 656d 656e 7473 5f70  valid_elements_p
-0000b850: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
-0000b860: 6520 3d20 7661 6c69 645f 656c 656d 656e  e = valid_elemen
-0000b870: 7473 5f00 2020 2020 2020 2020 6469 6d65  ts_.        dime
-0000b880: 6e73 696f 6e5f 6469 6374 5b22 7479 7065  nsion_dict["type
-0000b890: 225d 203d 207b 2263 6c61 7373 223a 2022  "] = {"class": "
-0000b8a0: 6361 7465 676f 7269 6361 6c22 2c20 2263  categorical", "c
-0000b8b0: 6174 6567 6f72 6965 7322 3a20 5b5d 7d00  ategories": []}.
-0000b8c0: 2020 2020 293a 0020 2020 2020 2020 2076      ):.        v
-0000b8d0: 616c 6964 5f65 6c65 6d65 6e74 735f 2c00  alid_elements_,.
-0000b8e0: 2020 2020 2020 2020 7661 6c69 645f 656c          valid_el
-0000b8f0: 656d 656e 7473 5f70 726f 705f 2c00 2020  ements_prop_,.  
-0000b900: 2020 2020 2020 7375 6274 6f74 616c 735f        subtotals_
-0000b910: 2c00 2020 2020 2020 2020 5f53 7562 746f  ,.        _Subto
-0000b920: 7461 6c73 5f2c 0020 2020 2020 2020 2069  tals_,.        i
-0000b930: 6e73 6572 7469 6f6e 5f64 6963 7473 2c00  nsertion_dicts,.
-0000b940: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0000b950: 6e5f 6469 6374 2c00 2020 2020 2020 2020  n_dict,.        
-0000b960: 7365 6c66 2c00 2020 2020 6465 6620 6974  self,.    def it
-0000b970: 5f70 726f 7669 6465 735f 6163 6365 7373  _provides_access
-0000b980: 5f74 6f5f 6974 735f 7375 6274 6f74 616c  _to_its_subtotal
-0000b990: 735f 746f 5f68 656c 7028 0020 2020 2029  s_to_help(.    )
-0000b9a0: 0020 2020 2020 2020 2029 2c00 2020 2020  .        ),.    
-0000b9b0: 2020 2020 2020 2020 292c 0020 2020 2020          ),.     
-0000b9c0: 2020 2020 2020 2020 2020 205b 7b22 696e             [{"in
-0000b9d0: 7365 7274 696f 6e22 3a20 2264 6963 742d  sertion": "dict-
-0000b9e0: 3122 7d2c 207b 2269 6e73 6572 7469 6f6e  1"}, {"insertion
-0000b9f0: 223a 2022 6469 6374 2d32 227d 5d2c 0020  ": "dict-2"}],. 
-0000ba00: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0000ba10: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000ba20: 2020 2020 2020 7d00 2020 2020 2020 2020        }.        
-0000ba30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba40: 7d00 2020 2020 2020 2020 2020 2020 2020  }.              
-0000ba50: 2020 2020 2020 2020 2020 2020 2020 7d00                }.
-0000ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba80: 5d00 2020 2020 2020 2020 2020 2020 2020  ].              
-0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baa0: 2020 2020 2020 7b22 696e 7365 7274 696f        {"insertio
-0000bab0: 6e22 3a20 2264 6963 742d 3222 7d2c 0020  n": "dict-2"},. 
-0000bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 207b 2269 6e73 6572 7469 6f6e 223a     {"insertion":
-0000baf0: 2022 6469 6374 2d31 227d 2c00 2020 2020   "dict-1"},.    
-0000bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb10: 2020 2020 2020 2020 2020 2020 2269 6e73              "ins
-0000bb20: 6572 7469 6f6e 7322 3a20 5b00 2020 2020  ertions": [.    
-0000bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb40: 2020 2020 2020 2020 2274 7261 6e73 666f          "transfo
-0000bb50: 726d 223a 207b 0020 2020 2020 2020 2020  rm": {.         
-0000bb60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000bb70: 7669 6577 223a 207b 0020 2020 2020 2020  view": {.       
-0000bb80: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-0000bb90: 6665 7265 6e63 6573 223a 207b 0020 2020  ferences": {.   
-0000bba0: 2020 2020 2020 2020 2020 2020 207b 0020               {. 
-0000bbb0: 2020 2020 2020 2020 2020 2028 0020 2020             (.   
-0000bbc0: 2020 2020 2020 2020 2028 7b22 7265 6665           ({"refe
-0000bbd0: 7265 6e63 6573 223a 207b 2276 6965 7722  rences": {"view"
-0000bbe0: 3a20 7b22 7472 616e 7366 6f72 6d22 3a20  : {"transform": 
-0000bbf0: 7b22 696e 7365 7274 696f 6e73 223a 205b  {"insertions": [
-0000bc00: 5d7d 7d7d 7d2c 205b 5d29 2c00 2020 2020  ]}}}}, []),.    
-0000bc10: 2020 2020 2020 2020 287b 2272 6566 6572          ({"refer
-0000bc20: 656e 6365 7322 3a20 7b22 7669 6577 223a  ences": {"view":
-0000bc30: 207b 2274 7261 6e73 666f 726d 223a 207b   {"transform": {
-0000bc40: 7d7d 7d7d 2c20 5b5d 292c 0020 2020 2020  }}}}, []),.     
-0000bc50: 2020 2020 2020 2028 7b22 7265 6665 7265         ({"refere
-0000bc60: 6e63 6573 223a 207b 2276 6965 7722 3a20  nces": {"view": 
-0000bc70: 7b7d 7d7d 2c20 5b5d 292c 0020 2020 2020  {}}}, []),.     
-0000bc80: 2020 2020 2020 2028 7b22 7265 6665 7265         ({"refere
-0000bc90: 6e63 6573 223a 207b 7d7d 2c20 5b5d 292c  nces": {}}, []),
-0000bca0: 0020 2020 2020 2020 2020 2020 2028 7b7d  .            ({}
-0000bcb0: 2c20 5b5d 292c 0020 2020 2020 2020 2028  , []),.        (
-0000bcc0: 0020 2020 2020 2020 2022 6469 6d65 6e73  .        "dimens
-0000bcd0: 696f 6e5f 6469 6374 2c20 696e 7365 7274  ion_dict, insert
-0000bce0: 696f 6e5f 6469 6374 7322 2c00 2020 2020  ion_dicts",.    
-0000bcf0: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-0000bd00: 616d 6574 7269 7a65 2800 0020 2020 2020  ametrize(..     
-0000bd10: 2020 2061 7373 6572 7420 4469 6d65 6e73     assert Dimens
-0000bd20: 696f 6e28 6469 6d65 6e73 696f 6e5f 6469  ion(dimension_di
-0000bd30: 6374 2c20 4e6f 6e65 292e 7365 6c65 6374  ct, None).select
-0000bd40: 6564 5f63 6174 6567 6f72 6965 7320 3d3d  ed_categories ==
-0000bd50: 2065 7870 6563 7465 645f 7661 6c75 6500   expected_value.
-0000bd60: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0000bd70: 6e5f 6469 6374 203d 207b 2272 6566 6572  n_dict = {"refer
-0000bd80: 656e 6365 7322 3a20 7365 6c65 6374 6564  ences": selected
-0000bd90: 5f63 6174 6567 6f72 6965 737d 0020 2020  _categories}.   
-0000bda0: 2064 6566 2069 745f 6b6e 6f77 735f 6974   def it_knows_it
-0000bdb0: 735f 7365 6c65 6374 6564 5f63 6174 6567  s_selected_categ
-0000bdc0: 6f72 6965 7328 7365 6c66 2c20 7365 6c65  ories(self, sele
-0000bdd0: 6374 6564 5f63 6174 6567 6f72 6965 732c  cted_categories,
-0000bde0: 2065 7870 6563 7465 645f 7661 6c75 6529   expected_value)
-0000bdf0: 3a00 2020 2020 2900 2020 2020 2020 2020  :.    ).        
-0000be00: 292c 0020 2020 2020 2020 2020 2020 2029  ),.            )
-0000be10: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000be20: 2020 287b 226e 616d 6522 3a20 2256 6572    ({"name": "Ver
-0000be30: 7920 4661 762e 222c 2022 6964 223a 2031  y Fav.", "id": 1
-0000be40: 7d2c 292c 0020 2020 2020 2020 2020 2020  },),.           
-0000be50: 2020 2020 207b 2273 656c 6563 7465 645f       {"selected_
-0000be60: 6361 7465 676f 7269 6573 223a 205b 7b22  categories": [{"
-0000be70: 6e61 6d65 223a 2022 5665 7279 2046 6176  name": "Very Fav
-0000be80: 2e22 2c20 2269 6422 3a20 317d 5d7d 2c00  .", "id": 1}]},.
-0000be90: 2020 2020 2020 2020 2020 2020 2800 2020              (.  
-0000bea0: 2020 2020 2020 2020 2020 287b 7d2c 2028            ({}, (
-0000beb0: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-0000bec0: 287b 2266 6f6f 223a 2022 6261 7222 7d2c  ({"foo": "bar"},
-0000bed0: 2028 2929 2c00 2020 2020 2020 2020 2020   ()),.          
-0000bee0: 2020 287b 2273 656c 6563 7465 645f 6361    ({"selected_ca
-0000bef0: 7465 676f 7269 6573 223a 204e 6f6e 657d  tegories": None}
-0000bf00: 2c20 2829 292c 0020 2020 2020 2020 2028  , ()),.        (
-0000bf10: 0020 2020 2020 2020 2022 7365 6c65 6374  .        "select
-0000bf20: 6564 5f63 6174 6567 6f72 6965 732c 2065  ed_categories, e
-0000bf30: 7870 6563 7465 645f 7661 6c75 6522 2c00  xpected_value",.
-0000bf40: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-0000bf50: 2e70 6172 616d 6574 7269 7a65 2800 0020  .parametrize(.. 
-0000bf60: 2020 2020 2020 2061 7373 6572 7420 4469         assert Di
-0000bf70: 6d65 6e73 696f 6e28 4e6f 6e65 2c20 4e6f  mension(None, No
-0000bf80: 6e65 2c20 6469 6d5f 7472 616e 7366 6f72  ne, dim_transfor
-0000bf90: 6d73 292e 7072 756e 6520 6973 2065 7870  ms).prune is exp
-0000bfa0: 6563 7465 645f 7661 6c75 6500 2020 2020  ected_value.    
-0000bfb0: 6465 6620 6974 5f6b 6e6f 7773 5f77 6865  def it_knows_whe
-0000bfc0: 7468 6572 5f69 745f 7368 6f75 6c64 5f62  ther_it_should_b
-0000bfd0: 655f 7072 756e 6564 2873 656c 662c 2064  e_pruned(self, d
-0000bfe0: 696d 5f74 7261 6e73 666f 726d 732c 2065  im_transforms, e
-0000bff0: 7870 6563 7465 645f 7661 6c75 6529 3a00  xpected_value):.
-0000c000: 6164 0000 1700 0000 e701 0000 0010 0000  ad..............
-0000c010: 6d00 0000 0000 0000 d20f 0000 920f 0000  m...............
-0000c020: 910f 0000 690f 0000 680f 0000 140f 0000  ....i...h.......
-0000c030: ed0e 0000 ec0e 0000 a50e 0000 a40e 0000  ................
-0000c040: 900e 0000 6c0e 0000 290e 0000 280e 0000  ....l...)...(...
-0000c050: 140e 0000 f10d 0000 bf0d 0000 be0d 0000  ................
-0000c060: aa0d 0000 820d 0000 440d 0000 430d 0000  ........D...C...
-0000c070: 2f0d 0000 070d 0000 d10c 0000 d00c 0000  /...............
-0000c080: bc0c 0000 8f0c 0000 4c0c 0000 4b0c 0000  ........L...K...
-0000c090: 4a0c 0000 2d0c 0000 e50b 0000 e40b 0000  J...-...........
-0000c0a0: a10b 0000 700b 0000 4d0b 0000 4c0b 0000  ....p...M...L...
-0000c0b0: 2c0b 0000 050b 0000 e30a 0000 ad0a 0000  ,...............
-0000c0c0: ac0a 0000 6a0a 0000 3c0a 0000 ee09 0000  ....j...<.......
-0000c0d0: e409 0000 c109 0000 c009 0000 9509 0000  ................
-0000c0e0: 9409 0000 6c09 0000 6b09 0000 2509 0000  ....l...k...%...
-0000c0f0: f708 0000 a608 0000 9c08 0000 7908 0000  ............y...
-0000c100: 7808 0000 4b08 0000 4a08 0000 2108 0000  x...K...J...!...
-0000c110: 2008 0000 d407 0000 b907 0000 7507 0000   ...........u...
-0000c120: 4c07 0000 4207 0000 1307 0000 cf06 0000  L...B...........
-0000c130: c506 0000 a206 0000 a106 0000 7906 0000  ............y...
-0000c140: 7806 0000 5106 0000 5006 0000 f905 0000  x...Q...P.......
-0000c150: de05 0000 9a05 0000 7205 0000 6805 0000  ........r...h...
-0000c160: 3705 0000 1405 0000 1305 0000 e104 0000  7...............
-0000c170: e004 0000 8b04 0000 8a04 0000 5104 0000  ............Q...
-0000c180: 2904 0000 f403 0000 c303 0000 9f03 0000  )...............
-0000c190: 9e03 0000 5703 0000 5603 0000 4203 0000  ....W...V...B...
-0000c1a0: 1403 0000 cc02 0000 cb02 0000 b702 0000  ................
-0000c1b0: 8f02 0000 4d02 0000 4c02 0000 4b02 0000  ....M...L...K...
-0000c1c0: 2f02 0000 e801 0000 e701 0000 e601 0000  /...............
-0000c1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1e0: 0000 0000 0000 0000 2020 2020 2222 2255  ........    """U
-0000c1f0: 6e69 742d 7465 7374 2073 7569 7465 2066  nit-test suite f
-0000c200: 6f72 2060 6372 2e63 7562 652e 6469 6d65  or `cr.cube.dime
-0000c210: 6e73 696f 6e2e 5f41 6c6c 456c 656d 656e  nsion._AllElemen
-0000c220: 7473 6020 6f62 6a65 6374 2e22 2222 0063  ts` object.""".c
-0000c230: 6c61 7373 2044 6573 6372 6962 655f 416c  lass Describe_Al
-0000c240: 6c45 6c65 6d65 6e74 733a 0000 0020 2020  lElements:...   
-0000c250: 2020 2020 2072 6574 7572 6e20 7072 6f70       return prop
-0000c260: 6572 7479 5f6d 6f63 6b28 7265 7175 6573  erty_mock(reques
-0000c270: 742c 205f 4261 7365 456c 656d 656e 7473  t, _BaseElements
-0000c280: 2c20 225f 656c 656d 656e 7473 2229 0020  , "_elements"). 
-0000c290: 2020 2064 6566 205f 656c 656d 656e 7473     def _elements
-0000c2a0: 5f70 726f 705f 2873 656c 662c 2072 6571  _prop_(self, req
-0000c2b0: 7565 7374 293a 0020 2020 2040 7079 7465  uest):.    @pyte
-0000c2c0: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-0000c2d0: 2020 2020 7265 7475 726e 2070 726f 7065      return prope
-0000c2e0: 7274 795f 6d6f 636b 2872 6571 7565 7374  rty_mock(request
-0000c2f0: 2c20 5f42 6173 6545 6c65 6d65 6e74 732c  , _BaseElements,
-0000c300: 2022 5f65 6c65 6d65 6e74 735f 6279 5f69   "_elements_by_i
-0000c310: 6422 2900 2020 2020 6465 6620 5f65 6c65  d").    def _ele
-0000c320: 6d65 6e74 735f 6279 5f69 645f 7072 6f70  ments_by_id_prop
-0000c330: 5f28 7365 6c66 2c20 7265 7175 6573 7429  _(self, request)
-0000c340: 3a00 2020 2020 4070 7974 6573 742e 6669  :.    @pytest.fi
-0000c350: 7874 7572 6500 0020 2020 2023 2066 6978  xture..    # fix
-0000c360: 7475 7265 2063 6f6d 706f 6e65 6e74 7320  ture components 
-0000c370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d00 0020  -------------.. 
-0000c3a0: 2020 2020 2020 2020 2020 2062 6173 655f             base_
-0000c3b0: 656c 656d 656e 7473 2e5f 656c 656d 656e  elements._elemen
-0000c3c0: 7473 0020 2020 2020 2020 2077 6974 6820  ts.        with 
-0000c3d0: 7079 7465 7374 2e72 6169 7365 7328 4e6f  pytest.raises(No
-0000c3e0: 7449 6d70 6c65 6d65 6e74 6564 4572 726f  tImplementedErro
-0000c3f0: 7229 3a00 2020 2020 2020 2020 2320 2d2d  r):.        # --
-0000c400: 2d6d 7573 7420 6265 2069 6d70 6c65 6d65  -must be impleme
-0000c410: 6e74 6564 2062 7920 6561 6368 2073 7562  nted by each sub
-0000c420: 636c 6173 732d 2d2d 0020 2020 2020 2020  class---.       
-0000c430: 2062 6173 655f 656c 656d 656e 7473 203d   base_elements =
-0000c440: 205f 4261 7365 456c 656d 656e 7473 2829   _BaseElements()
-0000c450: 0020 2020 2064 6566 2069 745f 7374 6f72  .    def it_stor
-0000c460: 6573 5f69 7473 5f65 6c65 6d65 6e74 735f  es_its_elements_
-0000c470: 696e 5f61 5f74 7570 6c65 5f74 6f5f 6865  in_a_tuple_to_he
-0000c480: 6c70 2873 656c 6629 3a00 0020 2020 2020  lp(self):..     
-0000c490: 2020 2061 7373 6572 7420 656c 656d 656e     assert elemen
-0000c4a0: 7473 5f62 795f 6964 203d 3d20 7b34 3a20  ts_by_id == {4: 
-0000c4b0: 656c 656d 656e 7473 5f5b 305d 2c20 363a  elements_[0], 6:
-0000c4c0: 2065 6c65 6d65 6e74 735f 5b31 5d2c 2037   elements_[1], 7
-0000c4d0: 3a20 656c 656d 656e 7473 5f5b 325d 7d00  : elements_[2]}.
-0000c4e0: 0020 2020 2020 2020 2065 6c65 6d65 6e74  .        element
-0000c4f0: 735f 6279 5f69 6420 3d20 656c 656d 656e  s_by_id = elemen
-0000c500: 7473 2e5f 656c 656d 656e 7473 5f62 795f  ts._elements_by_
-0000c510: 6964 0000 2020 2020 2020 2020 656c 656d  id..        elem
-0000c520: 656e 7473 203d 205f 4261 7365 456c 656d  ents = _BaseElem
-0000c530: 656e 7473 2829 0020 2020 2020 2020 205f  ents().        _
-0000c540: 656c 656d 656e 7473 5f70 726f 705f 2e72  elements_prop_.r
-0000c550: 6574 7572 6e5f 7661 6c75 6520 3d20 656c  eturn_value = el
-0000c560: 656d 656e 7473 5f00 2020 2020 2020 2020  ements_.        
-0000c570: 2900 2020 2020 2020 2020 2020 2020 666f  ).            fo
-0000c580: 7220 656c 656d 656e 745f 6964 2069 6e20  r element_id in 
-0000c590: 2834 2c20 362c 2037 2900 2020 2020 2020  (4, 6, 7).      
-0000c5a0: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
-0000c5b0: 6f63 6b28 7265 7175 6573 742c 205f 456c  ock(request, _El
-0000c5c0: 656d 656e 742c 2065 6c65 6d65 6e74 5f69  ement, element_i
-0000c5d0: 643d 656c 656d 656e 745f 6964 2900 2020  d=element_id).  
-0000c5e0: 2020 2020 2020 656c 656d 656e 7473 5f20        elements_ 
-0000c5f0: 3d20 7475 706c 6528 0020 2020 2064 6566  = tuple(.    def
-0000c600: 2069 745f 6d61 696e 7461 696e 735f 615f   it_maintains_a_
-0000c610: 6469 6374 5f6f 665f 656c 656d 656e 7473  dict_of_elements
-0000c620: 5f62 795f 6964 5f74 6f5f 6865 6c70 2873  _by_id_to_help(s
-0000c630: 656c 662c 2072 6571 7565 7374 2c20 5f65  elf, request, _e
-0000c640: 6c65 6d65 6e74 735f 7072 6f70 5f29 3a00  lements_prop_):.
-0000c650: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000c660: 656c 656d 656e 7420 6973 2065 6c65 6d65  element is eleme
-0000c670: 6e74 735f 5b31 5d00 0020 2020 2020 2020  nts_[1]..       
-0000c680: 2065 6c65 6d65 6e74 203d 2065 6c65 6d65   element = eleme
-0000c690: 6e74 732e 6765 745f 6279 5f69 6428 3729  nts.get_by_id(7)
-0000c6a0: 0000 2020 2020 2020 2020 656c 656d 656e  ..        elemen
-0000c6b0: 7473 203d 205f 4261 7365 456c 656d 656e  ts = _BaseElemen
-0000c6c0: 7473 2829 0020 2020 2020 2020 207d 0020  ts().        }. 
-0000c6d0: 2020 2020 2020 2020 2020 2065 6c65 6d65             eleme
-0000c6e0: 6e74 5f2e 656c 656d 656e 745f 6964 3a20  nt_.element_id: 
-0000c6f0: 656c 656d 656e 745f 2066 6f72 2065 6c65  element_ for ele
-0000c700: 6d65 6e74 5f20 696e 2065 6c65 6d65 6e74  ment_ in element
-0000c710: 735f 0020 2020 2020 2020 205f 656c 656d  s_.        _elem
-0000c720: 656e 7473 5f62 795f 6964 5f70 726f 705f  ents_by_id_prop_
-0000c730: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
-0000c740: 7b00 2020 2020 2020 2020 2900 2020 2020  {.        ).    
-0000c750: 2020 2020 2020 2020 666f 7220 656c 656d          for elem
-0000c760: 656e 745f 6964 2069 6e20 2833 2c20 372c  ent_id in (3, 7,
-0000c770: 2031 3129 0020 2020 2020 2020 2020 2020   11).           
-0000c780: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
-0000c790: 6571 7565 7374 2c20 5f45 6c65 6d65 6e74  equest, _Element
-0000c7a0: 2c20 656c 656d 656e 745f 6964 3d65 6c65  , element_id=ele
-0000c7b0: 6d65 6e74 5f69 6429 0020 2020 2020 2020  ment_id).       
-0000c7c0: 2065 6c65 6d65 6e74 735f 203d 2074 7570   elements_ = tup
-0000c7d0: 6c65 2800 2020 2020 6465 6620 6974 5f63  le(.    def it_c
-0000c7e0: 616e 5f66 696e 645f 616e 5f65 6c65 6d65  an_find_an_eleme
-0000c7f0: 6e74 5f62 795f 6964 2873 656c 662c 2072  nt_by_id(self, r
-0000c800: 6571 7565 7374 2c20 5f65 6c65 6d65 6e74  equest, _element
-0000c810: 735f 6279 5f69 645f 7072 6f70 5f29 3a00  s_by_id_prop_):.
-0000c820: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000c830: 656c 656d 656e 745f 6964 7873 203d 3d20  element_idxs == 
-0000c840: 2831 2c20 332c 2034 2900 0020 2020 2020  (1, 3, 4)..     
-0000c850: 2020 2065 6c65 6d65 6e74 5f69 6478 7320     element_idxs 
-0000c860: 3d20 656c 656d 656e 7473 2e65 6c65 6d65  = elements.eleme
-0000c870: 6e74 5f69 6478 7300 0020 2020 2020 2020  nt_idxs..       
-0000c880: 2065 6c65 6d65 6e74 7320 3d20 5f42 6173   elements = _Bas
-0000c890: 6545 6c65 6d65 6e74 7328 2900 2020 2020  eElements().    
-0000c8a0: 2020 2020 2900 2020 2020 2020 2020 2020      ).          
-0000c8b0: 2020 696e 7374 616e 6365 5f6d 6f63 6b28    instance_mock(
-0000c8c0: 7265 7175 6573 742c 205f 456c 656d 656e  request, _Elemen
-0000c8d0: 742c 2069 6e64 6578 3d69 6e64 6578 2920  t, index=index) 
-0000c8e0: 666f 7220 696e 6465 7820 696e 2028 312c  for index in (1,
-0000c8f0: 2033 2c20 3429 0020 2020 2020 2020 205f   3, 4).        _
-0000c900: 656c 656d 656e 7473 5f70 726f 705f 2e72  elements_prop_.r
-0000c910: 6574 7572 6e5f 7661 6c75 6520 3d20 7475  eturn_value = tu
-0000c920: 706c 6528 0020 2020 2064 6566 2069 745f  ple(.    def it_
-0000c930: 6b6e 6f77 735f 7468 655f 656c 656d 656e  knows_the_elemen
-0000c940: 745f 696e 6469 6365 7328 7365 6c66 2c20  t_indices(self, 
-0000c950: 7265 7175 6573 742c 205f 656c 656d 656e  request, _elemen
-0000c960: 7473 5f70 726f 705f 293a 0000 2020 2020  ts_prop_):..    
-0000c970: 2020 2020 6173 7365 7274 2065 6c65 6d65      assert eleme
-0000c980: 6e74 5f69 6473 203d 3d20 2831 2c20 322c  nt_ids == (1, 2,
-0000c990: 2035 2900 0020 2020 2020 2020 2065 6c65   5)..        ele
-0000c9a0: 6d65 6e74 5f69 6473 203d 2065 6c65 6d65  ment_ids = eleme
-0000c9b0: 6e74 732e 656c 656d 656e 745f 6964 7300  nts.element_ids.
-0000c9c0: 0020 2020 2020 2020 2065 6c65 6d65 6e74  .        element
-0000c9d0: 7320 3d20 5f42 6173 6545 6c65 6d65 6e74  s = _BaseElement
-0000c9e0: 7328 2900 2020 2020 2020 2020 2900 2020  s().        ).  
-0000c9f0: 2020 2020 2020 2020 2020 696e 7374 616e            instan
-0000ca00: 6365 5f6d 6f63 6b28 7265 7175 6573 742c  ce_mock(request,
-0000ca10: 205f 456c 656d 656e 742c 2065 6c65 6d65   _Element, eleme
-0000ca20: 6e74 5f69 643d 6e29 2066 6f72 206e 2069  nt_id=n) for n i
-0000ca30: 6e20 2831 2c20 322c 2035 2900 2020 2020  n (1, 2, 5).    
-0000ca40: 2020 2020 5f65 6c65 6d65 6e74 735f 7072      _elements_pr
-0000ca50: 6f70 5f2e 7265 7475 726e 5f76 616c 7565  op_.return_value
-0000ca60: 203d 2074 7570 6c65 2800 2020 2020 6465   = tuple(.    de
-0000ca70: 6620 6974 5f6b 6e6f 7773 5f74 6865 5f65  f it_knows_the_e
-0000ca80: 6c65 6d65 6e74 5f69 6473 2873 656c 662c  lement_ids(self,
-0000ca90: 2072 6571 7565 7374 2c20 5f65 6c65 6d65   request, _eleme
-0000caa0: 6e74 735f 7072 6f70 5f29 3a00 0020 2020  nts_prop_):..   
-0000cab0: 2020 2020 2061 7373 6572 7420 6c69 7374       assert list
-0000cac0: 286e 2066 6f72 206e 2069 6e20 656c 656d  (n for n in elem
-0000cad0: 656e 7473 2920 3d3d 205b 312c 2032 2c20  ents) == [1, 2, 
-0000cae0: 335d 0020 2020 2020 2020 2061 7373 6572  3].        asser
-0000caf0: 7420 6c65 6e28 656c 656d 656e 7473 2920  t len(elements) 
-0000cb00: 3d3d 2033 0020 2020 2020 2020 2061 7373  == 3.        ass
-0000cb10: 6572 7420 656c 656d 656e 7473 5b31 3a33  ert elements[1:3
-0000cb20: 5d20 3d3d 2028 322c 2033 2900 2020 2020  ] == (2, 3).    
-0000cb30: 2020 2020 6173 7365 7274 2065 6c65 6d65      assert eleme
-0000cb40: 6e74 735b 315d 203d 3d20 3200 0020 2020  nts[1] == 2..   
-0000cb50: 2020 2020 2065 6c65 6d65 6e74 7320 3d20       elements = 
-0000cb60: 5f42 6173 6545 6c65 6d65 6e74 7328 2900  _BaseElements().
-0000cb70: 2020 2020 2020 2020 5f65 6c65 6d65 6e74          _element
-0000cb80: 735f 7072 6f70 5f2e 7265 7475 726e 5f76  s_prop_.return_v
-0000cb90: 616c 7565 203d 2028 312c 2032 2c20 3329  alue = (1, 2, 3)
-0000cba0: 0020 2020 2064 6566 2069 745f 6861 735f  .    def it_has_
-0000cbb0: 7365 7175 656e 6365 5f62 6568 6176 696f  sequence_behavio
-0000cbc0: 7273 2873 656c 662c 2072 6571 7565 7374  rs(self, request
-0000cbd0: 2c20 5f65 6c65 6d65 6e74 735f 7072 6f70  , _elements_prop
-0000cbe0: 5f29 3a00 0020 2020 2022 2222 556e 6974  _):..    """Unit
-0000cbf0: 2d74 6573 7420 7375 6974 6520 666f 7220  -test suite for 
-0000cc00: 6063 722e 6375 6265 2e64 696d 656e 7369  `cr.cube.dimensi
-0000cc10: 6f6e 2e5f 4261 7365 456c 656d 656e 7473  on._BaseElements
-0000cc20: 6020 6f62 6a65 6374 2e22 2222 0063 6c61  ` object.""".cla
-0000cc30: 7373 2044 6573 6372 6962 655f 4261 7365  ss Describe_Base
-0000cc40: 456c 656d 656e 7473 3a00 0000 2020 2020  Elements:...    
-0000cc50: 2020 2020 7265 7475 726e 2070 726f 7065      return prope
-0000cc60: 7274 795f 6d6f 636b 2872 6571 7565 7374  rty_mock(request
-0000cc70: 2c20 4469 6d65 6e73 696f 6e2c 2022 7661  , Dimension, "va
-0000cc80: 6c69 645f 656c 656d 656e 7473 2229 0020  lid_elements"). 
-0000cc90: 2020 2064 6566 2076 616c 6964 5f65 6c65     def valid_ele
-0000cca0: 6d65 6e74 735f 7072 6f70 5f28 7365 6c66  ments_prop_(self
-0000ccb0: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-0000ccc0: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-0000ccd0: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000cce0: 696e 7374 616e 6365 5f6d 6f63 6b28 7265  instance_mock(re
-0000ccf0: 7175 6573 742c 205f 5661 6c69 6445 6c65  quest, _ValidEle
-0000cd00: 6d65 6e74 7329 0020 2020 2064 6566 2076  ments).    def v
-0000cd10: 616c 6964 5f65 6c65 6d65 6e74 735f 2873  alid_elements_(s
-0000cd20: 656c 662c 2072 6571 7565 7374 293a 0020  elf, request):. 
-0000cd30: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
-0000cd40: 7265 0000 2020 2020 2020 2020 7265 7475  re..        retu
-0000cd50: 726e 2070 726f 7065 7274 795f 6d6f 636b  rn property_mock
-0000cd60: 2872 6571 7565 7374 2c20 4469 6d65 6e73  (request, Dimens
-0000cd70: 696f 6e2c 2022 7375 6274 6f74 616c 7322  ion, "subtotals"
-0000cd80: 2900 2020 2020 6465 6620 7375 6274 6f74  ).    def subtot
-0000cd90: 616c 735f 7072 6f70 5f28 7365 6c66 2c20  als_prop_(self, 
-0000cda0: 7265 7175 6573 7429 3a00 2020 2020 4070  request):.    @p
-0000cdb0: 7974 6573 742e 6669 7874 7572 6500 0020  ytest.fixture.. 
-0000cdc0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
-0000cdd0: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
-0000cde0: 6573 742c 205f 5375 6274 6f74 616c 7329  est, _Subtotals)
-0000cdf0: 0020 2020 2064 6566 2073 7562 746f 7461  .    def subtota
-0000ce00: 6c73 5f28 7365 6c66 2c20 7265 7175 6573  ls_(self, reques
-0000ce10: 7429 3a00 2020 2020 4070 7974 6573 742e  t):.    @pytest.
-0000ce20: 6669 7874 7572 6500 0020 2020 2020 2020  fixture..       
-0000ce30: 2072 6574 7572 6e20 636c 6173 735f 6d6f   return class_mo
-0000ce40: 636b 2872 6571 7565 7374 2c20 2263 722e  ck(request, "cr.
-0000ce50: 6375 6265 2e64 696d 656e 7369 6f6e 2e5f  cube.dimension._
-0000ce60: 5375 6274 6f74 616c 7322 2900 2020 2020  Subtotals").    
-0000ce70: 6465 6620 5f53 7562 746f 7461 6c73 5f28  def _Subtotals_(
-0000ce80: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-0000ce90: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-0000cea0: 7572 6500 0020 2020 2023 2066 6978 7475  ure..    # fixtu
-0000ceb0: 7265 2063 6f6d 706f 6e65 6e74 7320 2d2d  re components --
-0000cec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ced0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d00 0020 2020  -----------..   
-0000cef0: 2020 2020 2061 7373 6572 7420 7375 6274       assert subt
-0000cf00: 6f74 616c 7320 6973 2073 7562 746f 7461  otals is subtota
-0000cf10: 6c73 5f00 2020 2020 2020 2020 5f53 7562  ls_.        _Sub
-0000cf20: 746f 7461 6c73 5f2e 6173 7365 7274 5f63  totals_.assert_c
-0000cf30: 616c 6c65 645f 6f6e 6365 5f77 6974 6828  alled_once_with(
-0000cf40: 5b22 7375 6274 6f74 616c 222c 2022 6469  ["subtotal", "di
-0000cf50: 6374 7322 5d2c 2076 616c 6964 5f65 6c65  cts"], valid_ele
-0000cf60: 6d65 6e74 735f 2900 0020 2020 2020 2020  ments_)..       
-0000cf70: 2073 7562 746f 7461 6c73 203d 2064 696d   subtotals = dim
-0000cf80: 656e 7369 6f6e 2e73 7562 746f 7461 6c73  ension.subtotals
-0000cf90: 0000 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
-0000cfa0: 696f 6e20 3d20 4469 6d65 6e73 696f 6e28  ion = Dimension(
-0000cfb0: 4e6f 6e65 2c20 4e6f 6e65 2c20 6469 6d65  None, None, dime
-0000cfc0: 6e73 696f 6e5f 7472 616e 7366 6f72 6d73  nsion_transforms
-0000cfd0: 2900 2020 2020 2020 2020 5f53 7562 746f  ).        _Subto
-0000cfe0: 7461 6c73 5f2e 7265 7475 726e 5f76 616c  tals_.return_val
-0000cff0: 7565 203d 2073 7562 746f 7461 6c73 5f00  ue = subtotals_.
-0000d000: 6164 0000 1200 0000 ae01 0000 0010 0000  ad..............
-0000d010: 6000 0000 0000 0000 c80f 0000 7f0f 0000  `...............
-0000d020: 780f 0000 5d0f 0000 090f 0000 ff0e 0000  x...]...........
-0000d030: bf0e 0000 8e0e 0000 570e 0000 0c0e 0000  ........W.......
-0000d040: 0b0e 0000 d60d 0000 d50d 0000 7f0d 0000  ................
-0000d050: 4e0d 0000 4d0d 0000 0a0d 0000 fc0c 0000  N...M...........
-0000d060: eb0c 0000 ce0c 0000 bb0c 0000 9b0c 0000  ................
-0000d070: 940c 0000 6f0c 0000 190c 0000 f90b 0000  ....o...........
-0000d080: ef0b 0000 ab0b 0000 770b 0000 690b 0000  ........w...i...
-0000d090: 2f0b 0000 f50a 0000 bb0a 0000 ad0a 0000  /...............
-0000d0a0: a30a 0000 880a 0000 420a 0000 220a 0000  ........B..."...
-0000d0b0: 180a 0000 e809 0000 b209 0000 b109 0000  ................
-0000d0c0: 8709 0000 8609 0000 4f09 0000 2f09 0000  ........O.../...
-0000d0d0: 0f09 0000 ef08 0000 e508 0000 b808 0000  ................
-0000d0e0: 7408 0000 3008 0000 ec07 0000 e207 0000  t...0...........
-0000d0f0: 9c07 0000 9b07 0000 4a07 0000 2407 0000  ........J...$...
-0000d100: d106 0000 c706 0000 9906 0000 6d06 0000  ............m...
-0000d110: 4106 0000 1506 0000 0b06 0000 c005 0000  A...............
-0000d120: bf05 0000 7905 0000 7805 0000 5405 0000  ....y...x...T...
-0000d130: 0b05 0000 d604 0000 8d04 0000 8304 0000  ................
-0000d140: 8204 0000 6404 0000 2504 0000 1b04 0000  ....d...%.......
-0000d150: 0d04 0000 cc03 0000 ba03 0000 8303 0000  ................
-0000d160: 4b03 0000 3803 0000 2103 0000 fc02 0000  K...8...!.......
-0000d170: ed02 0000 df02 0000 cd02 0000 8a02 0000  ................
-0000d180: 5502 0000 4202 0000 3002 0000 f901 0000  U...B...0.......
-0000d190: c101 0000 ae01 0000 ad01 0000 0000 0000  ................
-0000d1a0: 0000 0000 0000 0000 0000 0000 0000 2020  ..............  
-0000d1b0: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
-0000d1c0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000d1d0: 2020 2020 207b 2269 6422 3a20 322c 2022       {"id": 2, "
-0000d1e0: 7661 6c75 6522 3a20 7b22 6964 223a 2022  value": {"id": "
-0000d1f0: 3030 3034 227d 7d2c 0020 2020 2020 2020  0004"}},.       
-0000d200: 2020 2020 2020 2020 2020 2020 207b 2269               {"i
-0000d210: 6422 3a20 312c 2022 7661 6c75 6522 3a20  d": 1, "value": 
-0000d220: 7b22 6964 223a 2022 4126 4222 7d7d 2c00  {"id": "A&B"}},.
-0000d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d240: 5b00 2020 2020 2020 2020 2020 2020 2020  [.              
-0000d250: 2020 7d2c 0020 2020 2020 2020 2020 2020    },.           
-0000d260: 2020 2020 2020 2020 2022 656c 656d 656e           "elemen
-0000d270: 7473 223a 207b 323a 207b 2268 6964 6522  ts": {2: {"hide"
-0000d280: 3a20 5472 7565 7d7d 2c00 2020 2020 2020  : True}},.      
-0000d290: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0000d2a0: 6e73 6572 7469 6f6e 7322 3a20 5b7b 226e  nsertions": [{"n
-0000d2b0: 616d 6522 3a20 2241 2642 222c 2022 6869  ame": "A&B", "hi
-0000d2c0: 6465 223a 2054 7275 657d 5d2c 0020 2020  de": True}],.   
-0000d2d0: 2020 2020 2020 2020 2020 2020 207b 0020               {. 
-0000d2e0: 2020 2020 2020 2020 2020 2028 0020 2020             (.   
-0000d2f0: 2020 2020 2020 2020 2029 2c00 2020 2020           ),.    
-0000d300: 2020 2020 2020 2020 2020 2020 7b31 3a20              {1: 
-0000d310: 7b22 6869 6465 223a 2054 7275 657d 7d2c  {"hide": True}},
-0000d320: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000d330: 2044 542e 4d52 2c00 2020 2020 2020 2020   DT.MR,.        
-0000d340: 2020 2020 2020 2020 5d2c 0020 2020 2020          ],.     
-0000d350: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0000d360: 2269 6422 3a20 322c 2022 7661 6c75 6522  "id": 2, "value"
-0000d370: 3a20 7b22 6964 223a 2022 3030 3034 227d  : {"id": "0004"}
-0000d380: 7d2c 0020 2020 2020 2020 2020 2020 2020  },.             
-0000d390: 2020 2020 2020 207b 2269 6422 3a20 312c         {"id": 1,
-0000d3a0: 2022 7661 6c75 6522 3a20 7b22 6964 223a   "value": {"id":
-0000d3b0: 2022 4126 4222 7d7d 2c00 2020 2020 2020   "A&B"}},.      
-0000d3c0: 2020 2020 2020 2020 2020 5b00 2020 2020            [.    
-0000d3d0: 2020 2020 2020 2020 2020 2020 7b22 696e              {"in
-0000d3e0: 7365 7274 696f 6e73 223a 205b 7b22 6e61  sertions": [{"na
-0000d3f0: 6d65 223a 2022 4126 4222 2c20 2268 6964  me": "A&B", "hid
-0000d400: 6522 3a20 5472 7565 7d5d 7d2c 0020 2020  e": True}]},.   
-0000d410: 2020 2020 2020 2020 2028 0020 2020 2020           (.     
-0000d420: 2020 2028 0020 2020 2020 2020 2022 6469     (.        "di
-0000d430: 6d5f 7866 6f72 6d73 2c20 656c 656d 656e  m_xforms, elemen
-0000d440: 745f 6469 6374 732c 2064 696d 5f74 7970  t_dicts, dim_typ
-0000d450: 652c 2065 7870 6563 7465 645f 7661 6c75  e, expected_valu
-0000d460: 6522 2c00 2020 2020 4070 7974 6573 742e  e",.    @pytest.
-0000d470: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
-0000d480: 2800 0020 2020 2020 2020 2029 0020 2020  (..        ).   
-0000d490: 2020 2020 2020 2020 2028 322c 207b 2269           (2, {"i
-0000d4a0: 6422 3a20 362c 2022 656c 656d 656e 7422  d": 6, "element"
-0000d4b0: 3a20 2264 6963 745f 3622 7d2c 207b 2265  : "dict_6"}, {"e
-0000d4c0: 6c65 6d65 6e74 223a 2022 7866 726d 735f  lement": "xfrms_
-0000d4d0: 3622 7d29 2c00 2020 2020 2020 2020 2020  6"}),.          
-0000d4e0: 2020 2831 2c20 7b22 6964 223a 2032 2c20    (1, {"id": 2, 
-0000d4f0: 2265 6c65 6d65 6e74 223a 2022 6469 6374  "element": "dict
-0000d500: 5f32 227d 2c20 7b7d 292c 0020 2020 2020  _2"}, {}),.     
-0000d510: 2020 2020 2020 2028 302c 207b 2269 6422         (0, {"id"
-0000d520: 3a20 342c 2022 656c 656d 656e 7422 3a20  : 4, "element": 
-0000d530: 2264 6963 745f 3422 7d2c 207b 2265 6c65  "dict_4"}, {"ele
-0000d540: 6d65 6e74 223a 2022 7866 726d 735f 3422  ment": "xfrms_4"
-0000d550: 7d29 2c00 2020 2020 2020 2020 6173 7365  }),.        asse
-0000d560: 7274 2065 6c65 6d65 6e74 5f6d 616b 696e  rt element_makin
-0000d570: 6773 203d 3d20 2800 0020 2020 2020 2020  gs == (..       
-0000d580: 2065 6c65 6d65 6e74 5f6d 616b 696e 6773   element_makings
-0000d590: 203d 2074 7570 6c65 2861 6c6c 5f65 6c65   = tuple(all_ele
-0000d5a0: 6d65 6e74 732e 5f69 7465 725f 656c 656d  ments._iter_elem
-0000d5b0: 656e 745f 6d61 6b69 6e67 7328 2929 0000  ent_makings())..
-0000d5c0: 2020 2020 2020 2020 616c 6c5f 656c 656d          all_elem
-0000d5d0: 656e 7473 203d 205f 416c 6c45 6c65 6d65  ents = _AllEleme
-0000d5e0: 6e74 7328 4e6f 6e65 2c20 6469 6d65 6e73  nts(None, dimens
-0000d5f0: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000d600: 6963 742c 204e 6f6e 6529 0020 2020 2020  ict, None).     
-0000d610: 2020 2029 0020 2020 2020 2020 2020 2020     ).           
-0000d620: 207b 2269 6422 3a20 362c 2022 656c 656d   {"id": 6, "elem
-0000d630: 656e 7422 3a20 2264 6963 745f 3622 7d2c  ent": "dict_6"},
-0000d640: 0020 2020 2020 2020 2020 2020 207b 2269  .            {"i
-0000d650: 6422 3a20 322c 2022 656c 656d 656e 7422  d": 2, "element"
-0000d660: 3a20 2264 6963 745f 3222 7d2c 0020 2020  : "dict_2"},.   
-0000d670: 2020 2020 2020 2020 207b 2269 6422 3a20           {"id": 
-0000d680: 342c 2022 656c 656d 656e 7422 3a20 2264  4, "element": "d
-0000d690: 6963 745f 3422 7d2c 0020 2020 2020 2020  ict_4"},.       
-0000d6a0: 205f 656c 656d 656e 745f 6469 6374 735f   _element_dicts_
-0000d6b0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
-0000d6c0: 7565 203d 2028 0020 2020 2020 2020 207d  ue = (.        }
-0000d6d0: 0020 2020 2020 2020 2020 2020 2022 656c  .            "el
-0000d6e0: 656d 656e 7473 223a 207b 2236 223a 207b  ements": {"6": {
-0000d6f0: 2265 6c65 6d65 6e74 223a 2022 7866 726d  "element": "xfrm
-0000d700: 735f 3622 7d2c 2022 3422 3a20 7b22 656c  s_6"}, "4": {"el
-0000d710: 656d 656e 7422 3a20 2278 6672 6d73 5f34  ement": "xfrms_4
-0000d720: 227d 7d00 2020 2020 2020 2020 6469 6d65  "}}.        dime
-0000d730: 6e73 696f 6e5f 7472 616e 7366 6f72 6d73  nsion_transforms
-0000d740: 5f64 6963 7420 3d20 7b00 2020 2020 6465  _dict = {.    de
-0000d750: 6620 6974 5f67 656e 6572 6174 6573 5f65  f it_generates_e
-0000d760: 6c65 6d65 6e74 5f66 6163 746f 7279 5f69  lement_factory_i
-0000d770: 6e70 7574 735f 746f 5f68 656c 7028 7365  nputs_to_help(se
-0000d780: 6c66 2c20 5f65 6c65 6d65 6e74 5f64 6963  lf, _element_dic
-0000d790: 7473 5f70 726f 705f 293a 0000 2020 2020  ts_prop_):..    
-0000d7a0: 2020 2020 6173 7365 7274 2065 6c65 6d65      assert eleme
-0000d7b0: 6e74 7320 3d3d 2028 656c 656d 656e 7473  nts == (elements
-0000d7c0: 5f5b 305d 2c20 656c 656d 656e 7473 5f5b  _[0], elements_[
-0000d7d0: 315d 2c20 656c 656d 656e 7473 5f5b 325d  1], elements_[2]
-0000d7e0: 2900 2020 2020 2020 2020 5d00 2020 2020  ).        ].    
-0000d7f0: 2020 2020 2020 2020 6361 6c6c 287b 2265          call({"e
-0000d800: 6c65 6d65 6e74 223a 2022 6469 6374 2d43  lement": "dict-C
-0000d810: 227d 2c20 322c 2065 6c65 6d65 6e74 5f74  "}, 2, element_t
-0000d820: 7261 6e73 666f 726d 735f 5b32 5d29 2c00  ransforms_[2]),.
-0000d830: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
-0000d840: 287b 2265 6c65 6d65 6e74 223a 2022 6469  ({"element": "di
-0000d850: 6374 2d42 227d 2c20 312c 2065 6c65 6d65  ct-B"}, 1, eleme
-0000d860: 6e74 5f74 7261 6e73 666f 726d 735f 5b31  nt_transforms_[1
-0000d870: 5d29 2c00 2020 2020 2020 2020 2020 2020  ]),.            
-0000d880: 6361 6c6c 287b 2265 6c65 6d65 6e74 223a  call({"element":
-0000d890: 2022 6469 6374 2d41 227d 2c20 302c 2065   "dict-A"}, 0, e
-0000d8a0: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
-0000d8b0: 735f 5b30 5d29 2c00 2020 2020 2020 2020  s_[0]),.        
-0000d8c0: 6173 7365 7274 205f 456c 656d 656e 745f  assert _Element_
-0000d8d0: 2e63 616c 6c5f 6172 6773 5f6c 6973 7420  .call_args_list 
-0000d8e0: 3d3d 205b 0020 2020 2020 2020 205d 0020  == [.        ]. 
-0000d8f0: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
-0000d900: 7b22 7866 726d 7322 3a20 327d 292c 0020  {"xfrms": 2}),. 
-0000d910: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
-0000d920: 7b22 7866 726d 7322 3a20 317d 292c 0020  {"xfrms": 1}),. 
-0000d930: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
-0000d940: 7b22 7866 726d 7322 3a20 307d 292c 0020  {"xfrms": 0}),. 
-0000d950: 2020 2020 2020 2061 7373 6572 7420 5f45         assert _E
-0000d960: 6c65 6d65 6e74 5472 616e 7366 6f72 6d73  lementTransforms
-0000d970: 5f2e 6361 6c6c 5f61 7267 735f 6c69 7374  _.call_args_list
-0000d980: 203d 3d20 5b00 0020 2020 2020 2020 2065   == [..        e
-0000d990: 6c65 6d65 6e74 7320 3d20 616c 6c5f 656c  lements = all_el
-0000d9a0: 656d 656e 7473 2e5f 656c 656d 656e 7473  ements._elements
-0000d9b0: 0000 2020 2020 2020 2020 616c 6c5f 656c  ..        all_el
-0000d9c0: 656d 656e 7473 203d 205f 416c 6c45 6c65  ements = _AllEle
-0000d9d0: 6d65 6e74 7328 4e6f 6e65 2c20 4e6f 6e65  ments(None, None
-0000d9e0: 2c20 4e6f 6e65 2900 2020 2020 2020 2020  , None).        
-0000d9f0: 5f45 6c65 6d65 6e74 5f2e 7369 6465 5f65  _Element_.side_e
-0000da00: 6666 6563 7420 3d20 6974 6572 2865 6c65  ffect = iter(ele
-0000da10: 6d65 6e74 735f 2900 2020 2020 2020 2020  ments_).        
-0000da20: 2900 2020 2020 2020 2020 2020 2020 666f  ).            fo
-0000da30: 7220 6964 7820 696e 2072 616e 6765 2833  r idx in range(3
-0000da40: 2900 2020 2020 2020 2020 2020 2020 696e  ).            in
-0000da50: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
-0000da60: 6573 742c 205f 456c 656d 656e 742c 206e  est, _Element, n
-0000da70: 616d 653d 2265 6c65 6d65 6e74 2d25 7322  ame="element-%s"
-0000da80: 2025 2069 6478 2900 2020 2020 2020 2020   % idx).        
-0000da90: 656c 656d 656e 7473 5f20 3d20 7475 706c  elements_ = tupl
-0000daa0: 6528 0020 2020 2020 2020 2029 0020 2020  e(.        ).   
-0000dab0: 2020 2020 2020 2020 2029 0020 2020 2020           ).     
-0000dac0: 2020 2020 2020 2020 2020 2028 322c 207b             (2, {
-0000dad0: 2265 6c65 6d65 6e74 223a 2022 6469 6374  "element": "dict
-0000dae0: 2d43 227d 2c20 7b22 7866 726d 7322 3a20  -C"}, {"xfrms": 
-0000daf0: 327d 292c 0020 2020 2020 2020 2020 2020  2}),.           
-0000db00: 2020 2020 2028 312c 207b 2265 6c65 6d65       (1, {"eleme
-0000db10: 6e74 223a 2022 6469 6374 2d42 227d 2c20  nt": "dict-B"}, 
-0000db20: 7b22 7866 726d 7322 3a20 317d 292c 0020  {"xfrms": 1}),. 
-0000db30: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-0000db40: 302c 207b 2265 6c65 6d65 6e74 223a 2022  0, {"element": "
-0000db50: 6469 6374 2d41 227d 2c20 7b22 7866 726d  dict-A"}, {"xfrm
-0000db60: 7322 3a20 307d 292c 0020 2020 2020 2020  s": 0}),.       
-0000db70: 2020 2020 2028 0020 2020 2020 2020 205f       (.        _
-0000db80: 6974 6572 5f65 6c65 6d65 6e74 5f6d 616b  iter_element_mak
-0000db90: 696e 6773 5f2e 7265 7475 726e 5f76 616c  ings_.return_val
-0000dba0: 7565 203d 2069 7465 7228 0020 2020 2020  ue = iter(.     
-0000dbb0: 2020 205f 456c 656d 656e 7454 7261 6e73     _ElementTrans
-0000dbc0: 666f 726d 735f 2e73 6964 655f 6566 6665  forms_.side_effe
-0000dbd0: 6374 203d 2069 7465 7228 656c 656d 656e  ct = iter(elemen
-0000dbe0: 745f 7472 616e 7366 6f72 6d73 5f29 0020  t_transforms_). 
-0000dbf0: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-0000dc00: 2020 2020 2066 6f72 2069 6478 2069 6e20       for idx in 
-0000dc10: 7261 6e67 6528 3329 0020 2020 2020 2020  range(3).       
-0000dc20: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
-0000dc30: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
-0000dc40: 6d65 6e74 5472 616e 7366 6f72 6d73 2c20  mentTransforms, 
-0000dc50: 6e61 6d65 3d22 656c 656d 656e 742d 7866  name="element-xf
-0000dc60: 726d 732d 2573 2220 2520 6964 7829 0020  rms-%s" % idx). 
-0000dc70: 2020 2020 2020 2065 6c65 6d65 6e74 5f74         element_t
-0000dc80: 7261 6e73 666f 726d 735f 203d 2074 7570  ransforms_ = tup
-0000dc90: 6c65 2800 2020 2020 293a 0020 2020 2020  le(.    ):.     
-0000dca0: 2020 205f 6974 6572 5f65 6c65 6d65 6e74     _iter_element
-0000dcb0: 5f6d 616b 696e 6773 5f2c 0020 2020 2020  _makings_,.     
-0000dcc0: 2020 205f 456c 656d 656e 745f 2c00 2020     _Element_,.  
-0000dcd0: 2020 2020 2020 5f45 6c65 6d65 6e74 5472        _ElementTr
-0000dce0: 616e 7366 6f72 6d73 5f2c 0020 2020 2020  ansforms_,.     
-0000dcf0: 2020 2072 6571 7565 7374 2c00 2020 2020     request,.    
-0000dd00: 2020 2020 7365 6c66 2c00 2020 2020 6465      self,.    de
-0000dd10: 6620 6974 5f63 7265 6174 6573 5f69 7473  f it_creates_its
-0000dd20: 5f45 6c65 6d65 6e74 5f6f 626a 6563 7473  _Element_objects
-0000dd30: 5f69 6e5f 615f 6c6f 6361 6c5f 6661 6374  _in_a_local_fact
-0000dd40: 6f72 795f 746f 5f68 656c 7028 0000 2020  ory_to_help(..  
-0000dd50: 2020 2020 2020 6173 7365 7274 2076 616c        assert val
-0000dd60: 6964 5f65 6c65 6d65 6e74 7320 6973 2076  id_elements is v
-0000dd70: 616c 6964 5f65 6c65 6d65 6e74 735f 0020  alid_elements_. 
-0000dd80: 2020 2020 2020 205f 5661 6c69 6445 6c65         _ValidEle
-0000dd90: 6d65 6e74 735f 2e61 7373 6572 745f 6361  ments_.assert_ca
-0000dda0: 6c6c 6564 5f6f 6e63 655f 7769 7468 2865  lled_once_with(e
-0000ddb0: 6c65 6d65 6e74 735f 2c20 6469 6d65 6e73  lements_, dimens
-0000ddc0: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000ddd0: 6963 7429 0000 2020 2020 2020 2020 7661  ict)..        va
-0000dde0: 6c69 645f 656c 656d 656e 7473 203d 2061  lid_elements = a
-0000ddf0: 6c6c 5f65 6c65 6d65 6e74 732e 7661 6c69  ll_elements.vali
-0000de00: 645f 656c 656d 656e 7473 0000 2020 2020  d_elements..    
-0000de10: 2020 2020 616c 6c5f 656c 656d 656e 7473      all_elements
-0000de20: 203d 205f 416c 6c45 6c65 6d65 6e74 7328   = _AllElements(
-0000de30: 4e6f 6e65 2c20 6469 6d65 6e73 696f 6e5f  None, dimension_
-0000de40: 7472 616e 7366 6f72 6d73 5f64 6963 742c  transforms_dict,
-0000de50: 204e 6f6e 6529 0020 2020 2020 2020 205f   None).        _
-0000de60: 5661 6c69 6445 6c65 6d65 6e74 735f 2e72  ValidElements_.r
-0000de70: 6574 7572 6e5f 7661 6c75 6520 3d20 7661  eturn_value = va
-0000de80: 6c69 645f 656c 656d 656e 7473 5f00 2020  lid_elements_.  
-0000de90: 2020 2020 2020 5f65 6c65 6d65 6e74 735f        _elements_
-0000dea0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
-0000deb0: 7565 203d 2065 6c65 6d65 6e74 735f 0020  ue = elements_. 
-0000dec0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-0000ded0: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
-0000dee0: 203d 207b 2264 696d 656e 7369 6f6e 223a   = {"dimension":
-0000def0: 2022 7472 616e 7366 6f72 6d73 227d 0020   "transforms"}. 
-0000df00: 2020 2020 2020 2029 0020 2020 2020 2020         ).       
-0000df10: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
-0000df20: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
-0000df30: 6d65 6e74 2c20 6e61 6d65 3d22 656c 2573  ment, name="el%s
-0000df40: 2220 2520 6964 7829 2066 6f72 2069 6478  " % idx) for idx
-0000df50: 2069 6e20 7261 6e67 6528 3329 0020 2020   in range(3).   
-0000df60: 2020 2020 2065 6c65 6d65 6e74 735f 203d       elements_ =
-0000df70: 2074 7570 6c65 2800 2020 2020 293a 0020   tuple(.    ):. 
-0000df80: 2020 2020 2020 2073 656c 662c 2072 6571         self, req
-0000df90: 7565 7374 2c20 5f65 6c65 6d65 6e74 735f  uest, _elements_
-0000dfa0: 7072 6f70 5f2c 205f 5661 6c69 6445 6c65  prop_, _ValidEle
-0000dfb0: 6d65 6e74 735f 2c20 7661 6c69 645f 656c  ments_, valid_el
-0000dfc0: 656d 656e 7473 5f00 2020 2020 6465 6620  ements_.    def 
-0000dfd0: 6974 5f70 726f 7669 6465 735f 6163 6365  it_provides_acce
-0000dfe0: 7373 5f74 6f5f 7468 655f 5661 6c69 6445  ss_to_the_ValidE
-0000dff0: 6c65 6d65 6e74 735f 6f62 6a65 6374 2800  lements_object(.
-0000e000: 6164 0000 0000 0000 b801 0000 0010 0000  ad..............
-0000e010: 6700 0000 0000 0000 e90f 0000 b10f 0000  g...............
-0000e020: a20f 0000 940f 0000 820f 0000 3f0f 0000  ............?...
-0000e030: 0a0f 0000 f70e 0000 e50e 0000 ae0e 0000  ................
-0000e040: 760e 0000 630e 0000 4b0e 0000 fe0d 0000  v...c...K.......
-0000e050: ef0d 0000 e40d 0000 de0d 0000 910d 0000  ................
-0000e060: 390d 0000 320d 0000 f80c 0000 b80c 0000  9...2...........
-0000e070: b70c 0000 770c 0000 760c 0000 410c 0000  ....w...v...A...
-0000e080: 400c 0000 f90b 0000 f80b 0000 e40b 0000  @...............
-0000e090: c20b 0000 810b 0000 800b 0000 6c0b 0000  ............l...
-0000e0a0: 3f0b 0000 f90a 0000 f80a 0000 e40a 0000  ?...............
-0000e0b0: bc0a 0000 7b0a 0000 7a0a 0000 660a 0000  ....{...z...f...
-0000e0c0: 3a0a 0000 ef09 0000 ee09 0000 da09 0000  :...............
-0000e0d0: ab09 0000 6009 0000 5f09 0000 4b09 0000  ....`..._...K...
-0000e0e0: 2309 0000 dc08 0000 db08 0000 c708 0000  #...............
-0000e0f0: 9f08 0000 6908 0000 6808 0000 6708 0000  ....i...h...g...
-0000e100: 4908 0000 0008 0000 ff07 0000 b007 0000  I...............
-0000e110: 9507 0000 3e07 0000 fe06 0000 f406 0000  ....>...........
-0000e120: b706 0000 7906 0000 3c06 0000 3b06 0000  ....y...<...;...
-0000e130: 0f06 0000 0e06 0000 d605 0000 d505 0000  ................
-0000e140: d405 0000 b605 0000 6d05 0000 6c05 0000  ........m...l...
-0000e150: 1305 0000 ca04 0000 af04 0000 9904 0000  ................
-0000e160: 5004 0000 2c04 0000 1d04 0000 f603 0000  P...,...........
-0000e170: ec03 0000 a903 0000 a803 0000 7703 0000  ............w...
-0000e180: 6103 0000 0a03 0000 e602 0000 d702 0000  a...............
-0000e190: b002 0000 a602 0000 a502 0000 6a02 0000  ............j...
-0000e1a0: 3502 0000 f801 0000 f701 0000 b901 0000  5...............
-0000e1b0: b801 0000 0000 0000 0020 2020 2020 2020  .........       
-0000e1c0: 2061 7373 6572 7420 7368 696d 5f2e 7368   assert shim_.sh
-0000e1d0: 696d 6d65 645f 6469 6d65 6e73 696f 6e5f  immed_dimension_
-0000e1e0: 6469 6374 203d 3d20 6469 6d65 6e73 696f  dict == dimensio
-0000e1f0: 6e5f 6469 6374 0000 2020 2020 2020 2020  n_dict..        
-0000e200: 7368 696d 5f20 3d20 5f45 6c65 6d65 6e74  shim_ = _Element
-0000e210: 4964 5368 696d 2844 542e 4341 542c 2064  IdShim(DT.CAT, d
-0000e220: 696d 656e 7369 6f6e 5f64 6963 742c 204e  imension_dict, N
-0000e230: 6f6e 6529 0020 2020 2020 2020 2064 696d  one).        dim
-0000e240: 656e 7369 6f6e 5f64 6963 7420 3d20 7b22  ension_dict = {"
-0000e250: 6469 6d65 6e73 696f 6e22 3a20 2264 6963  dimension": "dic
-0000e260: 7469 6f6e 6172 7922 7d00 2020 2020 6465  tionary"}.    de
-0000e270: 6620 6275 745f 6e6f 6e5f 7375 6276 6172  f but_non_subvar
-0000e280: 6961 626c 655f 6469 6d65 6e73 696f 6e5f  iable_dimension_
-0000e290: 6973 5f6c 6566 745f 616c 6f6e 6528 7365  is_left_alone(se
-0000e2a0: 6c66 293a 0000 2020 2020 2020 2020 7d00  lf):..        }.
-0000e2b0: 2020 2020 2020 2020 2020 2020 2261 6e6f              "ano
-0000e2c0: 7468 6572 223a 2022 6f75 7473 6964 6520  ther": "outside 
-0000e2d0: 7479 7065 222c 0020 2020 2020 2020 2020  type",.         
-0000e2e0: 2020 207d 2c00 2020 2020 2020 2020 2020     },.          
-0000e2f0: 2020 2020 2020 226f 7468 6572 223a 2022        "other": "
-0000e300: 696e 2074 7970 6522 2c00 2020 2020 2020  in type",.      
-0000e310: 2020 2020 2020 2020 2020 2265 6c65 6d65            "eleme
-0000e320: 6e74 7322 3a20 5b7b 2269 6422 3a20 2261  nts": [{"id": "a
-0000e330: 6c69 6173 3122 2c20 2265 6c65 6d65 6e74  lias1", "element
-0000e340: 5f69 6e66 6f22 3a20 3130 307d 2c20 7b22  _info": 100}, {"
-0000e350: 6964 223a 2022 616c 6961 7332 227d 5d2c  id": "alias2"}],
-0000e360: 0020 2020 2020 2020 2020 2020 2022 7479  .            "ty
-0000e370: 7065 223a 207b 0020 2020 2020 2020 2061  pe": {.        a
-0000e380: 7373 6572 7420 7368 696d 5f2e 7368 696d  ssert shim_.shim
-0000e390: 6d65 645f 6469 6d65 6e73 696f 6e5f 6469  med_dimension_di
-0000e3a0: 6374 203d 3d20 7b00 0020 2020 2020 2020  ct == {..       
-0000e3b0: 2073 6869 6d5f 203d 205f 456c 656d 656e   shim_ = _Elemen
-0000e3c0: 7449 6453 6869 6d28 4454 2e4d 525f 5355  tIdShim(DT.MR_SU
-0000e3d0: 4256 4152 2c20 6469 6d65 6e73 696f 6e5f  BVAR, dimension_
-0000e3e0: 6469 6374 2c20 4e6f 6e65 2900 2020 2020  dict, None).    
-0000e3f0: 2020 2020 7d00 2020 2020 2020 2020 2020      }.          
-0000e400: 2020 2261 6e6f 7468 6572 223a 2022 6f75    "another": "ou
-0000e410: 7473 6964 6520 7479 7065 222c 0020 2020  tside type",.   
-0000e420: 2020 2020 2020 2020 207d 2c00 2020 2020           },.    
-0000e430: 2020 2020 2020 2020 2020 2020 226f 7468              "oth
-0000e440: 6572 223a 2022 696e 2074 7970 6522 2c00  er": "in type",.
-0000e450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e460: 2265 6c65 6d65 6e74 7322 3a20 5b7b 2269  "elements": [{"i
-0000e470: 6422 3a20 312c 2022 656c 656d 656e 745f  d": 1, "element_
-0000e480: 696e 666f 223a 2031 3030 7d2c 207b 2269  info": 100}, {"i
-0000e490: 6422 3a20 327d 5d2c 0020 2020 2020 2020  d": 2}],.       
-0000e4a0: 2020 2020 2022 7479 7065 223a 207b 0020       "type": {. 
-0000e4b0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-0000e4c0: 5f64 6963 7420 3d20 7b00 2020 2020 2020  _dict = {.      
-0000e4d0: 2020 5f73 7562 7661 725f 616c 6961 7365    _subvar_aliase
-0000e4e0: 735f 7072 6f70 5f2e 7265 7475 726e 5f76  s_prop_.return_v
-0000e4f0: 616c 7565 203d 2074 7570 6c65 2828 2261  alue = tuple(("a
-0000e500: 6c69 6173 3122 2c20 2261 6c69 6173 3222  lias1", "alias2"
-0000e510: 2929 0020 2020 2064 6566 2069 745f 7072  )).    def it_pr
-0000e520: 6f76 6964 6573 5f74 6865 5f73 6869 6d6d  ovides_the_shimm
-0000e530: 6564 5f64 696d 656e 7369 6f6e 5f64 6963  ed_dimension_dic
-0000e540: 745f 666f 725f 7375 6276 6172 7328 7365  t_for_subvars(se
-0000e550: 6c66 2c20 5f73 7562 7661 725f 616c 6961  lf, _subvar_alia
-0000e560: 7365 735f 7072 6f70 5f29 3a00 0020 2020  ses_prop_):..   
-0000e570: 2022 2222 556e 6974 2d74 6573 7420 7375   """Unit-test su
-0000e580: 6974 6520 666f 7220 6063 722e 6375 6265  ite for `cr.cube
-0000e590: 2e64 696d 656e 7369 6f6e 2e5f 456c 656d  .dimension._Elem
-0000e5a0: 656e 7449 6453 6869 6d60 206f 626a 6563  entIdShim` objec
-0000e5b0: 742e 2222 2200 636c 6173 7320 4465 7363  t.""".class Desc
-0000e5c0: 7269 6265 5f45 6c65 6d65 6e74 4964 5368  ribe_ElementIdSh
-0000e5d0: 696d 3a00 0000 2020 2020 2020 2020 6173  im:...        as
-0000e5e0: 7365 7274 2065 6c65 6d65 6e74 7320 3d3d  sert elements ==
-0000e5f0: 2028 656c 656d 656e 7473 5f5b 305d 2c20   (elements_[0], 
-0000e600: 656c 656d 656e 7473 5f5b 325d 2900 0020  elements_[2]).. 
-0000e610: 2020 2020 2020 2065 6c65 6d65 6e74 7320         elements 
-0000e620: 3d20 7661 6c69 645f 656c 656d 656e 7473  = valid_elements
-0000e630: 2e5f 656c 656d 656e 7473 0000 2020 2020  ._elements..    
-0000e640: 2020 2020 7661 6c69 645f 656c 656d 656e      valid_elemen
-0000e650: 7473 203d 205f 5661 6c69 6445 6c65 6d65  ts = _ValidEleme
-0000e660: 6e74 7328 616c 6c5f 656c 656d 656e 7473  nts(all_elements
-0000e670: 5f2c 204e 6f6e 6529 0020 2020 2020 2020  _, None).       
-0000e680: 2061 6c6c 5f65 6c65 6d65 6e74 735f 2e5f   all_elements_._
-0000e690: 5f69 7465 725f 5f2e 7265 7475 726e 5f76  _iter__.return_v
-0000e6a0: 616c 7565 203d 2069 7465 7228 656c 656d  alue = iter(elem
-0000e6b0: 656e 7473 5f29 0020 2020 2020 2020 2061  ents_).        a
-0000e6c0: 6c6c 5f65 6c65 6d65 6e74 735f 203d 2069  ll_elements_ = i
-0000e6d0: 6e73 7461 6e63 655f 6d6f 636b 2872 6571  nstance_mock(req
-0000e6e0: 7565 7374 2c20 5f41 6c6c 456c 656d 656e  uest, _AllElemen
-0000e6f0: 7473 2900 2020 2020 2020 2020 2900 2020  ts).        ).  
-0000e700: 2020 2020 2020 2020 2020 666f 7220 6964            for id
-0000e710: 782c 206d 6973 7369 6e67 2069 6e20 656e  x, missing in en
-0000e720: 756d 6572 6174 6528 5b46 616c 7365 2c20  umerate([False, 
-0000e730: 5472 7565 2c20 4661 6c73 655d 2900 2020  True, False]).  
-0000e740: 2020 2020 2020 2020 2020 696e 7374 616e            instan
-0000e750: 6365 5f6d 6f63 6b28 7265 7175 6573 742c  ce_mock(request,
-0000e760: 205f 456c 656d 656e 742c 206e 616d 653d   _Element, name=
-0000e770: 2265 6c65 6d65 6e74 2d25 7322 2025 2069  "element-%s" % i
-0000e780: 6478 2c20 6d69 7373 696e 673d 6d69 7373  dx, missing=miss
-0000e790: 696e 6729 0020 2020 2020 2020 2065 6c65  ing).        ele
-0000e7a0: 6d65 6e74 735f 203d 2074 7570 6c65 2800  ments_ = tuple(.
-0000e7b0: 2020 2020 6465 6620 6974 5f67 6574 735f      def it_gets_
-0000e7c0: 6974 735f 456c 656d 656e 745f 6f62 6a65  its_Element_obje
-0000e7d0: 6374 735f 6672 6f6d 5f61 6e5f 416c 6c45  cts_from_an_AllE
-0000e7e0: 6c65 6d65 6e74 735f 6f62 6a65 6374 2873  lements_object(s
-0000e7f0: 656c 662c 2072 6571 7565 7374 293a 0000  elf, request):..
-0000e800: 2020 2020 2222 2255 6e69 742d 7465 7374      """Unit-test
-0000e810: 2073 7569 7465 2066 6f72 2060 6372 2e63   suite for `cr.c
-0000e820: 7562 652e 6469 6d65 6e73 696f 6e2e 5f56  ube.dimension._V
-0000e830: 616c 6964 456c 656d 656e 7473 6020 6f62  alidElements` ob
-0000e840: 6a65 6374 2e22 2222 0063 6c61 7373 2044  ject.""".class D
-0000e850: 6573 6372 6962 655f 5661 6c69 6445 6c65  escribe_ValidEle
-0000e860: 6d65 6e74 733a 0000 0020 2020 2020 2020  ments:...       
-0000e870: 2072 6574 7572 6e20 696e 7374 616e 6365   return instance
-0000e880: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
-0000e890: 5661 6c69 6445 6c65 6d65 6e74 7329 0020  ValidElements). 
-0000e8a0: 2020 2064 6566 2076 616c 6964 5f65 6c65     def valid_ele
-0000e8b0: 6d65 6e74 735f 2873 656c 662c 2072 6571  ments_(self, req
-0000e8c0: 7565 7374 293a 0020 2020 2040 7079 7465  uest):.    @pyte
-0000e8d0: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-0000e8e0: 2020 2020 7265 7475 726e 2063 6c61 7373      return class
-0000e8f0: 5f6d 6f63 6b28 7265 7175 6573 742c 2022  _mock(request, "
-0000e900: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
-0000e910: 6e2e 5f56 616c 6964 456c 656d 656e 7473  n._ValidElements
-0000e920: 2229 0020 2020 2064 6566 205f 5661 6c69  ").    def _Vali
-0000e930: 6445 6c65 6d65 6e74 735f 2873 656c 662c  dElements_(self,
-0000e940: 2072 6571 7565 7374 293a 0020 2020 2040   request):.    @
-0000e950: 7079 7465 7374 2e66 6978 7475 7265 0000  pytest.fixture..
-0000e960: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-0000e970: 6574 686f 645f 6d6f 636b 2872 6571 7565  ethod_mock(reque
-0000e980: 7374 2c20 5f41 6c6c 456c 656d 656e 7473  st, _AllElements
-0000e990: 2c20 225f 6974 6572 5f65 6c65 6d65 6e74  , "_iter_element
-0000e9a0: 5f6d 616b 696e 6773 2229 0020 2020 2064  _makings").    d
-0000e9b0: 6566 205f 6974 6572 5f65 6c65 6d65 6e74  ef _iter_element
-0000e9c0: 5f6d 616b 696e 6773 5f28 7365 6c66 2c20  _makings_(self, 
-0000e9d0: 7265 7175 6573 7429 3a00 2020 2020 4070  request):.    @p
-0000e9e0: 7974 6573 742e 6669 7874 7572 6500 0020  ytest.fixture.. 
-0000e9f0: 2020 2020 2020 2072 6574 7572 6e20 636c         return cl
-0000ea00: 6173 735f 6d6f 636b 2872 6571 7565 7374  ass_mock(request
-0000ea10: 2c20 2263 722e 6375 6265 2e64 696d 656e  , "cr.cube.dimen
-0000ea20: 7369 6f6e 2e5f 456c 656d 656e 7454 7261  sion._ElementTra
-0000ea30: 6e73 666f 726d 7322 2900 2020 2020 6465  nsforms").    de
-0000ea40: 6620 5f45 6c65 6d65 6e74 5472 616e 7366  f _ElementTransf
-0000ea50: 6f72 6d73 5f28 7365 6c66 2c20 7265 7175  orms_(self, requ
-0000ea60: 6573 7429 3a00 2020 2020 4070 7974 6573  est):.    @pytes
-0000ea70: 742e 6669 7874 7572 6500 0020 2020 2020  t.fixture..     
-0000ea80: 2020 2072 6574 7572 6e20 7072 6f70 6572     return proper
-0000ea90: 7479 5f6d 6f63 6b28 7265 7175 6573 742c  ty_mock(request,
-0000eaa0: 205f 416c 6c45 6c65 6d65 6e74 732c 2022   _AllElements, "
-0000eab0: 5f65 6c65 6d65 6e74 7322 2900 2020 2020  _elements").    
-0000eac0: 6465 6620 5f65 6c65 6d65 6e74 735f 7072  def _elements_pr
-0000ead0: 6f70 5f28 7365 6c66 2c20 7265 7175 6573  op_(self, reques
-0000eae0: 7429 3a00 2020 2020 4070 7974 6573 742e  t):.    @pytest.
-0000eaf0: 6669 7874 7572 6500 0020 2020 2020 2020  fixture..       
-0000eb00: 2072 6574 7572 6e20 7072 6f70 6572 7479   return property
-0000eb10: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
-0000eb20: 416c 6c45 6c65 6d65 6e74 732c 2022 5f65  AllElements, "_e
-0000eb30: 6c65 6d65 6e74 5f64 6963 7473 2229 0020  lement_dicts"). 
-0000eb40: 2020 2064 6566 205f 656c 656d 656e 745f     def _element_
-0000eb50: 6469 6374 735f 7072 6f70 5f28 7365 6c66  dicts_prop_(self
-0000eb60: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-0000eb70: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-0000eb80: 0020 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000eb90: 636c 6173 735f 6d6f 636b 2872 6571 7565  class_mock(reque
-0000eba0: 7374 2c20 2263 722e 6375 6265 2e64 696d  st, "cr.cube.dim
-0000ebb0: 656e 7369 6f6e 2e5f 456c 656d 656e 7422  ension._Element"
-0000ebc0: 2900 2020 2020 6465 6620 5f45 6c65 6d65  ).    def _Eleme
-0000ebd0: 6e74 5f28 7365 6c66 2c20 7265 7175 6573  nt_(self, reques
-0000ebe0: 7429 3a00 2020 2020 4070 7974 6573 742e  t):.    @pytest.
-0000ebf0: 6669 7874 7572 6500 0020 2020 2023 2066  fixture..    # f
-0000ec00: 6978 7475 7265 2063 6f6d 706f 6e65 6e74  ixture component
-0000ec10: 7320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s --------------
-0000ec20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ec30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d00  ---------------.
-0000ec40: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000ec50: 656c 656d 656e 7473 5f74 7261 6e73 666f  elements_transfo
-0000ec60: 726d 7320 3d3d 2065 7870 6563 7465 645f  rms == expected_
-0000ec70: 7661 6c75 6500 0020 2020 2020 2020 2065  value..        e
-0000ec80: 6c65 6d65 6e74 735f 7472 616e 7366 6f72  lements_transfor
-0000ec90: 6d73 203d 2061 6c6c 5f65 6c65 6d65 6e74  ms = all_element
-0000eca0: 732e 5f65 6c65 6d65 6e74 735f 7472 616e  s._elements_tran
-0000ecb0: 7366 6f72 6d73 0000 2020 2020 2020 2020  sforms..        
-0000ecc0: 616c 6c5f 656c 656d 656e 7473 203d 205f  all_elements = _
-0000ecd0: 416c 6c45 6c65 6d65 6e74 7328 4e6f 6e65  AllElements(None
-0000ece0: 2c20 6469 6d5f 7866 6f72 6d73 2c20 6469  , dim_xforms, di
-0000ecf0: 6d5f 7479 7065 2900 2020 2020 2020 2020  m_type).        
-0000ed00: 5f65 6c65 6d65 6e74 5f64 6963 7473 5f70  _element_dicts_p
-0000ed10: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
-0000ed20: 6520 3d20 656c 656d 656e 745f 6469 6374  e = element_dict
-0000ed30: 7300 2020 2020 293a 0020 2020 2020 2020  s.    ):.       
-0000ed40: 2073 656c 662c 2064 696d 5f78 666f 726d   self, dim_xform
-0000ed50: 732c 2065 6c65 6d65 6e74 5f64 6963 7473  s, element_dicts
-0000ed60: 2c20 6469 6d5f 7479 7065 2c20 6578 7065  , dim_type, expe
-0000ed70: 6374 6564 5f76 616c 7565 2c20 5f65 6c65  cted_value, _ele
-0000ed80: 6d65 6e74 5f64 6963 7473 5f70 726f 705f  ment_dicts_prop_
-0000ed90: 0020 2020 2064 6566 2069 745f 6b6e 6f77  .    def it_know
-0000eda0: 735f 6974 735f 6d72 5f69 6e73 6572 7469  s_its_mr_inserti
-0000edb0: 6f6e 735f 656c 656d 656e 7473 5f74 7261  ons_elements_tra
-0000edc0: 6e73 666f 726d 735f 6672 6f6d 5f74 7261  nsforms_from_tra
-0000edd0: 6e73 666f 726d 735f 6469 6374 2800 2020  nsforms_dict(.  
-0000ede0: 2020 2900 2020 2020 2020 2020 292c 0020    ).        ),. 
-0000edf0: 2020 2020 2020 2020 2020 2029 2c00 2020             ),.  
-0000ee00: 2020 2020 2020 2020 2020 2020 2020 7b32                {2
-0000ee10: 3a20 7b22 6869 6465 223a 2054 7275 657d  : {"hide": True}
-0000ee20: 7d2c 2020 2320 2d2d 2d20 4341 5420 696e  },  # --- CAT in
-0000ee30: 7365 7274 696f 6e73 2064 6f6e 2774 2067  sertions don't g
-0000ee40: 6574 2075 7064 6174 6564 0020 2020 2020  et updated.     
-0000ee50: 2020 2020 2020 2020 2020 2044 542e 4341             DT.CA
-0000ee60: 542c 0020 2020 2020 2020 2020 2020 2020  T,.             
-0000ee70: 2020 205d 2c00 2020 2020 2020 2020 2020     ],.          
-0000ee80: 2020 2020 2020 2020 2020 7b22 6964 223a            {"id":
-0000ee90: 2032 2c20 2276 616c 7565 223a 207b 2269   2, "value": {"i
-0000eea0: 6422 3a20 2230 3030 3422 7d7d 2c00 2020  d": "0004"}},.  
-0000eeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eec0: 2020 7b22 6964 223a 2031 2c20 2276 616c    {"id": 1, "val
-0000eed0: 7565 223a 207b 2269 6422 3a20 2241 2642  ue": {"id": "A&B
-0000eee0: 227d 7d2c 0020 2020 2020 2020 2020 2020  "}},.           
-0000eef0: 2020 2020 205b 0020 2020 2020 2020 2020       [.         
-0000ef00: 2020 2020 2020 207d 2c00 2020 2020 2020         },.      
-0000ef10: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-0000ef20: 6c65 6d65 6e74 7322 3a20 7b32 3a20 7b22  lements": {2: {"
-0000ef30: 6869 6465 223a 2054 7275 657d 7d2c 0020  hide": True}},. 
-0000ef40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ef50: 2020 2022 696e 7365 7274 696f 6e73 223a     "insertions":
-0000ef60: 205b 7b22 6e61 6d65 223a 2022 4126 4222   [{"name": "A&B"
-0000ef70: 2c20 2268 6964 6522 3a20 5472 7565 7d5d  , "hide": True}]
-0000ef80: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000ef90: 2020 7b00 2020 2020 2020 2020 2020 2020    {.            
-0000efa0: 2800 2020 2020 2020 2020 2020 2020 292c  (.            ),
-0000efb0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-0000efc0: 207b 313a 207b 2268 6964 6522 3a20 5472   {1: {"hide": Tr
-0000efd0: 7565 7d2c 2032 3a20 7b22 6869 6465 223a  ue}, 2: {"hide":
-0000efe0: 2054 7275 657d 7d2c 0020 2020 2020 2020   True}},.       
-0000eff0: 2020 2020 2020 2020 2044 542e 4d52 2c00           DT.MR,.
-0000f000: 6164 0000 0000 0000 9001 0000 0010 0000  ad..............
-0000f010: 5d00 0000 0000 0000 ba0f 0000 700f 0000  ]...........p...
-0000f020: 690f 0000 430f 0000 1b0f 0000 db0e 0000  i...C...........
-0000f030: b90e 0000 af0e 0000 570e 0000 0f0e 0000  ........W.......
-0000f040: c10d 0000 c00d 0000 840d 0000 480d 0000  ............H...
-0000f050: f80c 0000 d60c 0000 cc0c 0000 770c 0000  ............w...
-0000f060: 2e0c 0000 2d0c 0000 fe0b 0000 b40b 0000  ....-...........
-0000f070: ad0b 0000 870b 0000 5b0b 0000 390b 0000  ........[...9...
-0000f080: 2f0b 0000 e10a 0000 e00a 0000 8c0a 0000  /...............
-0000f090: 520a 0000 190a 0000 180a 0000 e909 0000  R...............
-0000f0a0: 9f09 0000 9809 0000 7209 0000 3609 0000  ........r...6...
-0000f0b0: e608 0000 c408 0000 ba08 0000 7208 0000  ............r...
-0000f0c0: 7108 0000 1d08 0000 e307 0000 aa07 0000  q...............
-0000f0d0: a907 0000 8b07 0000 7307 0000 6907 0000  ........s...i...
-0000f0e0: 4d07 0000 2d07 0000 1307 0000 f806 0000  M...-...........
-0000f0f0: dd06 0000 c506 0000 aa06 0000 9f06 0000  ................
-0000f100: 9906 0000 6506 0000 5706 0000 3806 0000  ....e...W...8...
-0000f110: 1906 0000 fe05 0000 f205 0000 e005 0000  ................
-0000f120: d905 0000 8905 0000 4105 0000 fd04 0000  ........A.......
-0000f130: fc04 0000 c304 0000 c204 0000 8804 0000  ................
-0000f140: 8704 0000 5604 0000 0c04 0000 0b04 0000  ....V...........
-0000f150: d403 0000 8a03 0000 4f03 0000 4e03 0000  ........O...N...
-0000f160: 1503 0000 1403 0000 e002 0000 9202 0000  ................
-0000f170: 8b02 0000 6c02 0000 4002 0000 1302 0000  ....l...@.......
-0000f180: 0902 0000 d001 0000 9001 0000 0000 0000  ................
-0000f190: 2020 2020 2020 2020 5f73 7562 7661 725f          _subvar_
-0000f1a0: 616c 6961 7365 735f 7072 6f70 5f2e 7265  aliases_prop_.re
-0000f1b0: 7475 726e 5f76 616c 7565 203d 2074 7570  turn_value = tup
-0000f1c0: 6c65 2828 2261 6c69 6173 3222 2c29 2900  le(("alias2",)).
-0000f1d0: 2020 2020 2020 2020 5f72 6177 5f65 6c65          _raw_ele
-0000f1e0: 6d65 6e74 5f69 645f 7072 6f70 5f2e 7265  ment_id_prop_.re
-0000f1f0: 7475 726e 5f76 616c 7565 203d 2074 7570  turn_value = tup
-0000f200: 6c65 2828 312c 2929 0020 2020 2020 2020  le((1,)).       
-0000f210: 207d 0020 2020 2020 2020 2020 2020 2022   }.            "
-0000f220: 6162 6322 3a20 7b22 616e 6f74 6865 7222  abc": {"another"
-0000f230: 3a20 2274 7261 6e73 666f 726d 227d 2c00  : "transform"},.
-0000f240: 2020 2020 2020 2020 2020 2020 2278 7878              "xxx
-0000f250: 223a 207b 2274 7261 6e73 666f 726d 223a  ": {"transform":
-0000f260: 2022 6f62 6a65 6374 227d 2c00 2020 2020   "object"},.    
-0000f270: 2020 2020 656c 656d 656e 745f 7472 616e      element_tran
-0000f280: 7366 6f72 6d73 203d 207b 0020 2020 2029  sforms = {.    )
-0000f290: 3a00 2020 2020 2020 2020 7365 6c66 2c20  :.        self, 
-0000f2a0: 5f72 6177 5f65 6c65 6d65 6e74 5f69 645f  _raw_element_id_
-0000f2b0: 7072 6f70 5f2c 205f 7375 6276 6172 5f61  prop_, _subvar_a
-0000f2c0: 6c69 6173 6573 5f70 726f 705f 2c20 5f73  liases_prop_, _s
-0000f2d0: 7562 7661 725f 6964 735f 7072 6f70 5f00  ubvar_ids_prop_.
-0000f2e0: 2020 2020 6465 6620 6974 5f72 6570 6c61      def it_repla
-0000f2f0: 6365 735f 7468 655f 656c 656d 656e 745f  ces_the_element_
-0000f300: 7472 616e 7366 6f72 6d73 5f74 6f5f 6865  transforms_to_he
-0000f310: 6c70 2800 0020 2020 2020 2020 2061 7373  lp(..        ass
-0000f320: 6572 7420 7368 696d 5f2e 5f72 6177 5f65  ert shim_._raw_e
-0000f330: 6c65 6d65 6e74 5f69 6473 203d 3d20 7475  lement_ids == tu
-0000f340: 706c 6528 2831 2c20 2262 2229 2900 0020  ple((1, "b")).. 
-0000f350: 2020 2020 2020 2073 6869 6d5f 203d 205f         shim_ = _
-0000f360: 456c 656d 656e 7449 6453 6869 6d28 4e6f  ElementIdShim(No
-0000f370: 6e65 2c20 6469 6d65 6e73 696f 6e5f 6469  ne, dimension_di
-0000f380: 6374 2c20 4e6f 6e65 2900 2020 2020 2020  ct, None).      
-0000f390: 2020 6469 6d65 6e73 696f 6e5f 6469 6374    dimension_dict
-0000f3a0: 203d 207b 2274 7970 6522 3a20 7b22 656c   = {"type": {"el
-0000f3b0: 656d 656e 7473 223a 205b 7b22 6964 223a  ements": [{"id":
-0000f3c0: 2031 7d2c 207b 2269 6422 3a20 2262 227d   1}, {"id": "b"}
-0000f3d0: 5d7d 7d00 2020 2020 6465 6620 6974 5f70  ]}}.    def it_p
-0000f3e0: 726f 7669 6465 735f 7468 655f 7261 775f  rovides_the_raw_
-0000f3f0: 656c 656d 656e 745f 6964 735f 746f 5f68  element_ids_to_h
-0000f400: 656c 7028 7365 6c66 293a 0000 2020 2020  elp(self):..    
-0000f410: 2020 2020 5f45 6c65 6d65 6e74 4964 5368      _ElementIdSh
-0000f420: 696d 2844 542e 4341 542c 204e 6f6e 652c  im(DT.CAT, None,
-0000f430: 204e 6f6e 6529 2e74 7261 6e73 6c61 7465   None).translate
-0000f440: 5f65 6c65 6d65 6e74 5f69 6428 3235 2920  _element_id(25) 
-0000f450: 3d3d 2032 3500 2020 2020 6465 6620 6275  == 25.    def bu
-0000f460: 745f 6974 5f6c 6561 7665 735f 6e6f 6e5f  t_it_leaves_non_
-0000f470: 6172 7261 795f 6964 735f 616c 6f6e 6528  array_ids_alone(
-0000f480: 7365 6c66 293a 0000 2020 2020 2020 2020  self):..        
-0000f490: 6173 7365 7274 2073 6869 6d5f 2e74 7261  assert shim_.tra
-0000f4a0: 6e73 6c61 7465 5f65 6c65 6d65 6e74 5f69  nslate_element_i
-0000f4b0: 6428 6964 2920 3d3d 2065 7870 6563 7465  d(id) == expecte
-0000f4c0: 6400 0020 2020 2020 2020 2073 6869 6d5f  d..        shim_
-0000f4d0: 203d 205f 456c 656d 656e 7449 6453 6869   = _ElementIdShi
-0000f4e0: 6d28 4454 2e4d 525f 5355 4256 4152 2c20  m(DT.MR_SUBVAR, 
-0000f4f0: 4e6f 6e65 2c20 4e6f 6e65 2900 0020 2020  None, None)..   
-0000f500: 2020 2020 205f 7261 775f 656c 656d 656e       _raw_elemen
-0000f510: 745f 6964 5f70 726f 705f 2e72 6574 7572  t_id_prop_.retur
-0000f520: 6e5f 7661 6c75 6520 3d20 7475 706c 6528  n_value = tuple(
-0000f530: 2822 3122 2c20 332c 2022 616c 6c22 2929  ("1", 3, "all"))
-0000f540: 0020 2020 2020 2020 205f 7375 6276 6172  .        _subvar
-0000f550: 5f69 6473 5f70 726f 705f 2e72 6574 7572  _ids_prop_.retur
-0000f560: 6e5f 7661 6c75 6520 3d20 7475 706c 6528  n_value = tuple(
-0000f570: 2822 3030 3031 222c 2022 616c 6c22 2c20  ("0001", "all", 
-0000f580: 2230 3030 3322 2929 0020 2020 2020 2020  "0003")).       
-0000f590: 205f 7375 6276 6172 5f61 6c69 6173 6573   _subvar_aliases
-0000f5a0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-0000f5b0: 6c75 6520 3d20 7475 706c 6528 2822 616c  lue = tuple(("al
-0000f5c0: 6c22 2c20 2261 6c69 6173 3122 2c20 2261  l", "alias1", "a
-0000f5d0: 6c69 6173 3222 2929 0020 2020 2029 3a00  lias2")).    ):.
-0000f5e0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
-0000f5f0: 2c00 2020 2020 2020 2020 6964 2c00 2020  ,.        id,.  
-0000f600: 2020 2020 2020 5f73 7562 7661 725f 6964        _subvar_id
-0000f610: 735f 7072 6f70 5f2c 0020 2020 2020 2020  s_prop_,.       
-0000f620: 205f 7375 6276 6172 5f61 6c69 6173 6573   _subvar_aliases
-0000f630: 5f70 726f 705f 2c00 2020 2020 2020 2020  _prop_,.        
-0000f640: 5f72 6177 5f65 6c65 6d65 6e74 5f69 645f  _raw_element_id_
-0000f650: 7072 6f70 5f2c 0020 2020 2020 2020 2073  prop_,.        s
-0000f660: 656c 662c 0020 2020 2064 6566 2069 745f  elf,.    def it_
-0000f670: 7472 616e 736c 6174 6573 5f65 6c65 6d65  translates_eleme
-0000f680: 6e74 5f69 6473 5f66 6f72 5f73 7562 7661  nt_ids_for_subva
-0000f690: 7269 6162 6c65 7328 0020 2020 2029 0020  riables(.    ). 
-0000f6a0: 2020 2020 2020 2029 2c00 2020 2020 2020         ),.      
-0000f6b0: 2020 2020 2020 2822 7879 7a22 2c20 4e6f        ("xyz", No
-0000f6c0: 6e65 292c 0020 2020 2020 2020 2020 2020  ne),.           
-0000f6d0: 2028 3231 2c20 4e6f 6e65 292c 0020 2020   (21, None),.   
-0000f6e0: 2020 2020 2020 2020 2028 322c 2022 616c           (2, "al
-0000f6f0: 6961 7332 2229 2c00 2020 2020 2020 2020  ias2"),.        
-0000f700: 2020 2020 2833 2c20 2261 6c69 6173 3122      (3, "alias1"
-0000f710: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-0000f720: 2231 222c 2022 616c 6c22 292c 0020 2020  "1", "all"),.   
-0000f730: 2020 2020 2020 2020 2028 2230 3030 3322           ("0003"
-0000f740: 2c20 2261 6c69 6173 3222 292c 0020 2020  , "alias2"),.   
-0000f750: 2020 2020 2020 2020 2028 2261 6c6c 222c           ("all",
-0000f760: 2022 616c 6c22 292c 0020 2020 2020 2020   "all"),.       
-0000f770: 2028 0020 2020 2020 2020 2022 6964 2c20   (.        "id, 
-0000f780: 6578 7065 6374 6564 222c 0020 2020 2040  expected",.    @
-0000f790: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
-0000f7a0: 6d65 7472 697a 6528 0000 2020 2020 2020  metrize(..      
-0000f7b0: 2020 5f72 6570 6c61 6365 645f 6f72 6465    _replaced_orde
-0000f7c0: 725f 656c 656d 656e 745f 6964 735f 2e61  r_element_ids_.a
-0000f7d0: 7373 6572 745f 6e6f 745f 6361 6c6c 6564  ssert_not_called
-0000f7e0: 2829 0020 2020 2020 2020 205f 7265 706c  ().        _repl
-0000f7f0: 6163 6564 5f65 6c65 6d65 6e74 5f74 7261  aced_element_tra
-0000f800: 6e73 666f 726d 735f 2e61 7373 6572 745f  nsforms_.assert_
-0000f810: 6e6f 745f 6361 6c6c 6564 2829 0020 2020  not_called().   
-0000f820: 2020 2020 2061 7373 6572 7420 7368 696d       assert shim
-0000f830: 5f2e 7368 696d 6d65 645f 6469 6d65 6e73  _.shimmed_dimens
-0000f840: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000f850: 6963 7420 3d3d 2064 696d 656e 7369 6f6e  ict == dimension
-0000f860: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
-0000f870: 0000 2020 2020 2020 2020 7368 696d 5f20  ..        shim_ 
-0000f880: 3d20 5f45 6c65 6d65 6e74 4964 5368 696d  = _ElementIdShim
-0000f890: 2844 542e 4341 542c 204e 6f6e 652c 2064  (DT.CAT, None, d
-0000f8a0: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
-0000f8b0: 726d 735f 6469 6374 2900 2020 2020 2020  rms_dict).      
-0000f8c0: 2020 7d00 2020 2020 2020 2020 2020 2020    }.            
-0000f8d0: 2261 6e6f 7468 6572 223a 2022 6967 6e6f  "another": "igno
-0000f8e0: 7265 6422 2c00 2020 2020 2020 2020 2020  red",.          
-0000f8f0: 2020 226f 7264 6572 223a 207b 2265 6c65    "order": {"ele
-0000f900: 6d65 6e74 5f69 6473 223a 207b 2272 6570  ment_ids": {"rep
-0000f910: 6c61 6365 6422 3a20 2269 6473 227d 2c20  laced": "ids"}, 
-0000f920: 2269 676e 6f72 6564 223a 2022 7374 7269  "ignored": "stri
-0000f930: 6e67 227d 2c00 2020 2020 2020 2020 2020  ng"},.          
-0000f940: 2020 2265 6c65 6d65 6e74 7322 3a20 7b22    "elements": {"
-0000f950: 7265 706c 6163 6564 223a 2022 656c 656d  replaced": "elem
-0000f960: 656e 745f 7472 616e 7366 6f72 6d73 227d  ent_transforms"}
-0000f970: 2c00 2020 2020 2020 2020 6469 6d65 6e73  ,.        dimens
-0000f980: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
-0000f990: 6963 7420 3d20 7b00 2020 2020 293a 0020  ict = {.    ):. 
-0000f9a0: 2020 2020 2020 2073 656c 662c 205f 7265         self, _re
-0000f9b0: 706c 6163 6564 5f65 6c65 6d65 6e74 5f74  placed_element_t
-0000f9c0: 7261 6e73 666f 726d 735f 2c20 5f72 6570  ransforms_, _rep
-0000f9d0: 6c61 6365 645f 6f72 6465 725f 656c 656d  laced_order_elem
-0000f9e0: 656e 745f 6964 735f 0020 2020 2064 6566  ent_ids_.    def
-0000f9f0: 2061 6e64 5f69 745f 736b 6970 735f 7265   and_it_skips_re
-0000fa00: 706c 6163 696e 675f 6966 5f6e 6f74 5f73  placing_if_not_s
-0000fa10: 7562 7661 7273 2800 0020 2020 2020 2020  ubvars(..       
-0000fa20: 205f 7265 706c 6163 6564 5f6f 7264 6572   _replaced_order
-0000fa30: 5f65 6c65 6d65 6e74 5f69 6473 5f2e 6173  _element_ids_.as
-0000fa40: 7365 7274 5f6e 6f74 5f63 616c 6c65 6428  sert_not_called(
-0000fa50: 2900 2020 2020 2020 2020 5f72 6570 6c61  ).        _repla
-0000fa60: 6365 645f 656c 656d 656e 745f 7472 616e  ced_element_tran
-0000fa70: 7366 6f72 6d73 5f2e 6173 7365 7274 5f6e  sforms_.assert_n
-0000fa80: 6f74 5f63 616c 6c65 6428 2900 2020 2020  ot_called().    
-0000fa90: 2020 2020 6173 7365 7274 2073 6869 6d5f      assert shim_
-0000faa0: 2e73 6869 6d6d 6564 5f64 696d 656e 7369  .shimmed_dimensi
-0000fab0: 6f6e 5f74 7261 6e73 666f 726d 735f 6469  on_transforms_di
-0000fac0: 6374 203d 3d20 6469 6d65 6e73 696f 6e5f  ct == dimension_
-0000fad0: 7472 616e 7366 6f72 6d73 5f64 6963 7400  transforms_dict.
-0000fae0: 0020 2020 2020 2020 2073 6869 6d5f 203d  .        shim_ =
-0000faf0: 205f 456c 656d 656e 7449 6453 6869 6d28   _ElementIdShim(
-0000fb00: 4454 2e4d 525f 5355 4256 4152 2c20 4e6f  DT.MR_SUBVAR, No
-0000fb10: 6e65 2c20 6469 6d65 6e73 696f 6e5f 7472  ne, dimension_tr
-0000fb20: 616e 7366 6f72 6d73 5f64 6963 7429 0020  ansforms_dict). 
-0000fb30: 2020 2020 2020 207d 0020 2020 2020 2020         }.       
-0000fb40: 2020 2020 2022 616e 6f74 6865 7222 3a20       "another": 
-0000fb50: 2269 676e 6f72 6564 222c 0020 2020 2020  "ignored",.     
-0000fb60: 2020 2020 2020 2022 6f72 6465 7222 3a20         "order": 
-0000fb70: 7b22 6967 6e6f 7265 6422 3a20 2273 7472  {"ignored": "str
-0000fb80: 696e 6722 7d2c 0020 2020 2020 2020 2064  ing"},.        d
-0000fb90: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
-0000fba0: 726d 735f 6469 6374 203d 207b 0020 2020  rms_dict = {.   
-0000fbb0: 2029 3a00 2020 2020 2020 2020 7365 6c66   ):.        self
-0000fbc0: 2c20 5f72 6570 6c61 6365 645f 656c 656d  , _replaced_elem
-0000fbd0: 656e 745f 7472 616e 7366 6f72 6d73 5f2c  ent_transforms_,
-0000fbe0: 205f 7265 706c 6163 6564 5f6f 7264 6572   _replaced_order
-0000fbf0: 5f65 6c65 6d65 6e74 5f69 6473 5f00 2020  _element_ids_.  
-0000fc00: 2020 6465 6620 6275 745f 6974 5f73 6b69    def but_it_ski
-0000fc10: 7073 5f72 6570 6c61 6369 6e67 5f69 665f  ps_replacing_if_
-0000fc20: 6e6f 745f 7072 6573 656e 7428 0000 2020  not_present(..  
-0000fc30: 2020 2020 2020 5f72 6570 6c61 6365 645f        _replaced_
-0000fc40: 6f72 6465 725f 656c 656d 656e 745f 6964  order_element_id
-0000fc50: 735f 2e61 7373 6572 745f 6361 6c6c 6564  s_.assert_called
-0000fc60: 5f6f 6e63 655f 7769 7468 2873 6869 6d5f  _once_with(shim_
-0000fc70: 2c20 2261 2229 0020 2020 2020 2020 205f  , "a").        _
-0000fc80: 7265 706c 6163 6564 5f65 6c65 6d65 6e74  replaced_element
-0000fc90: 5f74 7261 6e73 666f 726d 735f 2e61 7373  _transforms_.ass
-0000fca0: 6572 745f 6361 6c6c 6564 5f6f 6e63 655f  ert_called_once_
-0000fcb0: 7769 7468 2873 6869 6d5f 2c20 2261 6c6c  with(shim_, "all
-0000fcc0: 5f65 6c65 6d65 6e74 7322 2900 2020 2020  _elements").    
-0000fcd0: 2020 2020 7d00 2020 2020 2020 2020 2020      }.          
-0000fce0: 2020 2261 6e6f 7468 6572 223a 2022 6967    "another": "ig
-0000fcf0: 6e6f 7265 6422 2c00 2020 2020 2020 2020  nored",.        
-0000fd00: 2020 2020 226f 7264 6572 223a 207b 2265      "order": {"e
-0000fd10: 6c65 6d65 6e74 5f69 6473 223a 207b 2272  lement_ids": {"r
-0000fd20: 6570 6c61 6365 6422 3a20 2269 6473 227d  eplaced": "ids"}
-0000fd30: 2c20 2269 676e 6f72 6564 223a 2022 7374  , "ignored": "st
-0000fd40: 7269 6e67 227d 2c00 2020 2020 2020 2020  ring"},.        
-0000fd50: 2020 2020 2265 6c65 6d65 6e74 7322 3a20      "elements": 
-0000fd60: 7b22 7265 706c 6163 6564 223a 2022 656c  {"replaced": "el
-0000fd70: 656d 656e 745f 7472 616e 7366 6f72 6d73  ement_transforms
-0000fd80: 227d 2c00 2020 2020 2020 2020 6173 7365  "},.        asse
-0000fd90: 7274 2073 6869 6d5f 2e73 6869 6d6d 6564  rt shim_.shimmed
-0000fda0: 5f64 696d 656e 7369 6f6e 5f74 7261 6e73  _dimension_trans
-0000fdb0: 666f 726d 735f 6469 6374 203d 3d20 7b00  forms_dict == {.
-0000fdc0: 0020 2020 2020 2020 2073 6869 6d5f 203d  .        shim_ =
-0000fdd0: 205f 456c 656d 656e 7449 6453 6869 6d28   _ElementIdShim(
-0000fde0: 4454 2e4d 525f 5355 4256 4152 2c20 4e6f  DT.MR_SUBVAR, No
-0000fdf0: 6e65 2c20 6469 6d65 6e73 696f 6e5f 7472  ne, dimension_tr
-0000fe00: 616e 7366 6f72 6d73 5f64 6963 7429 0020  ansforms_dict). 
-0000fe10: 2020 2020 2020 205f 7265 706c 6163 6564         _replaced
-0000fe20: 5f6f 7264 6572 5f65 6c65 6d65 6e74 5f69  _order_element_i
-0000fe30: 6473 5f2e 7265 7475 726e 5f76 616c 7565  ds_.return_value
-0000fe40: 203d 207b 2272 6570 6c61 6365 6422 3a20   = {"replaced": 
-0000fe50: 2269 6473 227d 0020 2020 2020 2020 205f  "ids"}.        _
-0000fe60: 7265 706c 6163 6564 5f65 6c65 6d65 6e74  replaced_element
-0000fe70: 5f74 7261 6e73 666f 726d 735f 2e72 6574  _transforms_.ret
-0000fe80: 7572 6e5f 7661 6c75 6520 3d20 7b22 7265  urn_value = {"re
-0000fe90: 706c 6163 6564 223a 2022 656c 656d 656e  placed": "elemen
-0000fea0: 745f 7472 616e 7366 6f72 6d73 227d 0020  t_transforms"}. 
-0000feb0: 2020 2020 2020 207d 0020 2020 2020 2020         }.       
-0000fec0: 2020 2020 2022 616e 6f74 6865 7222 3a20       "another": 
-0000fed0: 2269 676e 6f72 6564 222c 0020 2020 2020  "ignored",.     
-0000fee0: 2020 2020 2020 2022 6f72 6465 7222 3a20         "order": 
-0000fef0: 7b22 656c 656d 656e 745f 6964 7322 3a20  {"element_ids": 
-0000ff00: 2261 222c 2022 6967 6e6f 7265 6422 3a20  "a", "ignored": 
-0000ff10: 2273 7472 696e 6722 7d2c 0020 2020 2020  "string"},.     
-0000ff20: 2020 2020 2020 2022 656c 656d 656e 7473         "elements
-0000ff30: 223a 2022 616c 6c5f 656c 656d 656e 7473  ": "all_elements
-0000ff40: 222c 0020 2020 2020 2020 2064 696d 656e  ",.        dimen
-0000ff50: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
-0000ff60: 6469 6374 203d 207b 0020 2020 2029 3a00  dict = {.    ):.
-0000ff70: 2020 2020 2020 2020 7365 6c66 2c20 5f72          self, _r
-0000ff80: 6570 6c61 6365 645f 656c 656d 656e 745f  eplaced_element_
-0000ff90: 7472 616e 7366 6f72 6d73 5f2c 205f 7265  transforms_, _re
-0000ffa0: 706c 6163 6564 5f6f 7264 6572 5f65 6c65  placed_order_ele
-0000ffb0: 6d65 6e74 5f69 6473 5f00 2020 2020 6465  ment_ids_.    de
-0000ffc0: 6620 6974 5f70 726f 7669 6465 735f 7468  f it_provides_th
-0000ffd0: 655f 7368 696d 6d65 645f 6469 6d65 6e73  e_shimmed_dimens
-0000ffe0: 696f 6e5f 7472 616e 7366 6f72 6d5f 6469  ion_transform_di
-0000fff0: 6374 5f66 6f72 5f73 7562 7661 7273 2800  ct_for_subvars(.
-00010000: 6164 0000 2e00 0000 fa01 0000 0010 0000  ad..............
-00010010: 6c00 0000 0000 0000 c70f 0000 c60f 0000  l...............
-00010020: 8d0f 0000 8c0f 0000 410f 0000 120f 0000  ........A.......
-00010030: 080f 0000 070f 0000 bd0e 0000 9e0e 0000  ................
-00010040: 6f0e 0000 3f0e 0000 230e 0000 190e 0000  o...?...#.......
-00010050: e80d 0000 e70d 0000 d60d 0000 7d0d 0000  ............}...
-00010060: 730d 0000 720d 0000 2a0d 0000 f30c 0000  s...r...*.......
-00010070: ec0c 0000 990c 0000 540c 0000 350c 0000  ........T...5...
-00010080: 0a0c 0000 de0b 0000 be0b 0000 b40b 0000  ................
-00010090: 830b 0000 820b 0000 370b 0000 080b 0000  ........7.......
-000100a0: fe0a 0000 fd0a 0000 cb0a 0000 b00a 0000  ................
-000100b0: 5f0a 0000 550a 0000 1a0a 0000 190a 0000  _...U...........
-000100c0: e509 0000 e409 0000 ae09 0000 9309 0000  ................
-000100d0: 7d09 0000 5f09 0000 1709 0000 cf08 0000  }..._...........
-000100e0: b008 0000 9e08 0000 9008 0000 8608 0000  ................
-000100f0: 4b08 0000 4a08 0000 0d08 0000 0c08 0000  K...J...........
-00010100: c507 0000 c407 0000 b007 0000 8207 0000  ................
-00010110: 3807 0000 3707 0000 2307 0000 ed06 0000  8...7...#.......
-00010120: 9906 0000 9806 0000 8406 0000 4f06 0000  ............O...
-00010130: fc05 0000 fb05 0000 e705 0000 b905 0000  ................
-00010140: 7005 0000 6f05 0000 5b05 0000 3105 0000  p...o...[...1...
-00010150: ec04 0000 eb04 0000 ea04 0000 d204 0000  ................
-00010160: 8f04 0000 8e04 0000 6b04 0000 1604 0000  ........k.......
-00010170: e103 0000 e003 0000 c003 0000 bf03 0000  ................
-00010180: a003 0000 9f03 0000 6e03 0000 3903 0000  ........n...9...
-00010190: 0403 0000 0303 0000 e302 0000 e202 0000  ................
-000101a0: c402 0000 c302 0000 9c02 0000 7a02 0000  ............z...
-000101b0: 4502 0000 4402 0000 1c02 0000 1b02 0000  E...D...........
-000101c0: fb01 0000 fa01 0000 f901 0000 0000 0000  ................
-000101d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000101f0: 0000 0000 0000 0000 0000 0020 2020 2020  ...........     
-00010200: 2020 2061 7373 6572 7420 656c 656d 656e     assert elemen
-00010210: 745f 6964 203d 3d20 3432 0000 2020 2020  t_id == 42..    
-00010220: 2020 2020 656c 656d 656e 745f 6964 203d      element_id =
-00010230: 2065 6c65 6d65 6e74 2e65 6c65 6d65 6e74   element.element
-00010240: 5f69 6400 0020 2020 2020 2020 2065 6c65  _id..        ele
-00010250: 6d65 6e74 203d 205f 456c 656d 656e 7428  ment = _Element(
-00010260: 656c 656d 656e 745f 6469 6374 2c20 4e6f  element_dict, No
-00010270: 6e65 2c20 4e6f 6e65 2900 2020 2020 2020  ne, None).      
-00010280: 2020 656c 656d 656e 745f 6469 6374 203d    element_dict =
-00010290: 207b 2269 6422 3a20 3432 7d00 2020 2020   {"id": 42}.    
-000102a0: 6465 6620 6974 5f6b 6e6f 7773 5f69 7473  def it_knows_its
-000102b0: 5f65 6c65 6d65 6e74 5f69 6428 7365 6c66  _element_id(self
-000102c0: 293a 0000 2020 2020 2020 2020 6173 7365  ):..        asse
-000102d0: 7274 2061 6e63 686f 7220 6973 204e 6f6e  rt anchor is Non
-000102e0: 6500 0020 2020 2020 2020 2061 6e63 686f  e..        ancho
-000102f0: 7220 3d20 656c 656d 656e 742e 616e 6368  r = element.anch
-00010300: 6f72 0000 2020 2020 2020 2020 656c 656d  or..        elem
-00010310: 656e 7420 3d20 5f45 6c65 6d65 6e74 2865  ent = _Element(e
-00010320: 6c65 6d65 6e74 5f64 6963 742c 204e 6f6e  lement_dict, Non
-00010330: 652c 204e 6f6e 6529 0020 2020 2020 2020  e, None).       
-00010340: 2065 6c65 6d65 6e74 5f64 6963 7420 3d20   element_dict = 
-00010350: 7b22 7661 6c75 6522 3a20 7b22 6465 7269  {"value": {"deri
-00010360: 7665 6422 3a20 4661 6c73 657d 7d00 2020  ved": False}}.  
-00010370: 2020 6465 6620 6275 745f 616e 6368 6f72    def but_anchor
-00010380: 5f69 735f 6e6f 6e65 5f69 665f 6e6f 745f  _is_none_if_not_
-00010390: 6465 7269 7665 6428 7365 6c66 293a 0000  derived(self):..
-000103a0: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
-000103b0: 6e63 686f 7220 3d3d 2022 746f 7022 0000  nchor == "top"..
-000103c0: 2020 2020 2020 2020 616e 6368 6f72 203d          anchor =
-000103d0: 2065 6c65 6d65 6e74 2e61 6e63 686f 7200   element.anchor.
-000103e0: 0020 2020 2020 2020 2065 6c65 6d65 6e74  .        element
-000103f0: 203d 205f 456c 656d 656e 7428 656c 656d   = _Element(elem
-00010400: 656e 745f 6469 6374 2c20 4e6f 6e65 2c20  ent_dict, None, 
-00010410: 4e6f 6e65 2900 2020 2020 2020 2020 656c  None).        el
-00010420: 656d 656e 745f 6469 6374 203d 207b 2276  ement_dict = {"v
-00010430: 616c 7565 223a 207b 2272 6566 6572 656e  alue": {"referen
-00010440: 6365 7322 3a20 7b22 616e 6368 6f72 223a  ces": {"anchor":
-00010450: 2022 746f 7022 7d2c 2022 6465 7269 7665   "top"}, "derive
-00010460: 6422 3a20 5472 7565 7d7d 0020 2020 2064  d": True}}.    d
-00010470: 6566 2069 745f 6b6e 6f77 735f 6974 735f  ef it_knows_its_
-00010480: 616e 6368 6f72 2873 656c 6629 3a00 0020  anchor(self):.. 
-00010490: 2020 2022 2222 556e 6974 2d74 6573 7420     """Unit-test 
-000104a0: 7375 6974 6520 666f 7220 6063 722e 6375  suite for `cr.cu
-000104b0: 6265 2e64 696d 656e 7369 6f6e 2e5f 456c  be.dimension._El
-000104c0: 656d 656e 7460 206f 626a 6563 742e 2222  ement` object.""
-000104d0: 2200 636c 6173 7320 4465 7363 7269 6265  ".class Describe
-000104e0: 5f45 6c65 6d65 6e74 3a00 0000 2020 2020  _Element:...    
-000104f0: 2020 2020 7265 7475 726e 2070 726f 7065      return prope
-00010500: 7274 795f 6d6f 636b 2872 6571 7565 7374  rty_mock(request
-00010510: 2c20 5f45 6c65 6d65 6e74 4964 5368 696d  , _ElementIdShim
-00010520: 2c20 225f 7375 6276 6172 5f69 6473 2229  , "_subvar_ids")
-00010530: 0020 2020 2064 6566 205f 7375 6276 6172  .    def _subvar
-00010540: 5f69 6473 5f70 726f 705f 2873 656c 662c  _ids_prop_(self,
-00010550: 2072 6571 7565 7374 293a 0020 2020 2040   request):.    @
-00010560: 7079 7465 7374 2e66 6978 7475 7265 0000  pytest.fixture..
-00010570: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-00010580: 726f 7065 7274 795f 6d6f 636b 2872 6571  roperty_mock(req
-00010590: 7565 7374 2c20 5f45 6c65 6d65 6e74 4964  uest, _ElementId
-000105a0: 5368 696d 2c20 225f 7375 6276 6172 5f61  Shim, "_subvar_a
-000105b0: 6c69 6173 6573 2229 0020 2020 2064 6566  liases").    def
-000105c0: 205f 7375 6276 6172 5f61 6c69 6173 6573   _subvar_aliases
-000105d0: 5f70 726f 705f 2873 656c 662c 2072 6571  _prop_(self, req
-000105e0: 7565 7374 293a 0020 2020 2040 7079 7465  uest):.    @pyte
-000105f0: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-00010600: 2020 2020 7265 7475 726e 206d 6574 686f      return metho
-00010610: 645f 6d6f 636b 2872 6571 7565 7374 2c20  d_mock(request, 
-00010620: 5f45 6c65 6d65 6e74 4964 5368 696d 2c20  _ElementIdShim, 
-00010630: 225f 7265 706c 6163 6564 5f6f 7264 6572  "_replaced_order
-00010640: 5f65 6c65 6d65 6e74 5f69 6473 2229 0020  _element_ids"). 
-00010650: 2020 2064 6566 205f 7265 706c 6163 6564     def _replaced
-00010660: 5f6f 7264 6572 5f65 6c65 6d65 6e74 5f69  _order_element_i
-00010670: 6473 5f28 7365 6c66 2c20 7265 7175 6573  ds_(self, reques
-00010680: 7429 3a00 2020 2020 4070 7974 6573 742e  t):.    @pytest.
-00010690: 6669 7874 7572 6500 0020 2020 2020 2020  fixture..       
-000106a0: 2072 6574 7572 6e20 6d65 7468 6f64 5f6d   return method_m
-000106b0: 6f63 6b28 7265 7175 6573 742c 205f 456c  ock(request, _El
-000106c0: 656d 656e 7449 6453 6869 6d2c 2022 5f72  ementIdShim, "_r
-000106d0: 6570 6c61 6365 645f 656c 656d 656e 745f  eplaced_element_
-000106e0: 7472 616e 7366 6f72 6d73 2229 0020 2020  transforms").   
-000106f0: 2064 6566 205f 7265 706c 6163 6564 5f65   def _replaced_e
-00010700: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
-00010710: 735f 2873 656c 662c 2072 6571 7565 7374  s_(self, request
-00010720: 293a 0020 2020 2040 7079 7465 7374 2e66  ):.    @pytest.f
-00010730: 6978 7475 7265 0000 2020 2020 2020 2020  ixture..        
-00010740: 7265 7475 726e 2070 726f 7065 7274 795f  return property_
-00010750: 6d6f 636b 2872 6571 7565 7374 2c20 5f45  mock(request, _E
-00010760: 6c65 6d65 6e74 4964 5368 696d 2c20 225f  lementIdShim, "_
-00010770: 7261 775f 656c 656d 656e 745f 6964 7322  raw_element_ids"
-00010780: 2900 2020 2020 6465 6620 5f72 6177 5f65  ).    def _raw_e
-00010790: 6c65 6d65 6e74 5f69 645f 7072 6f70 5f28  lement_id_prop_(
-000107a0: 7365 6c66 2c20 7265 7175 6573 7429 3a00  self, request):.
-000107b0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
-000107c0: 7572 6500 0020 2020 2023 2066 6978 7475  ure..    # fixtu
-000107d0: 7265 2063 6f6d 706f 6e65 6e74 7320 2d2d  re components --
-000107e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d00 0020 2020  -----------..   
-00010810: 2020 2020 2061 7373 6572 7420 7368 696d       assert shim
-00010820: 5f2e 5f73 7562 7661 725f 616c 6961 7365  _._subvar_aliase
-00010830: 7320 3d3d 2074 7570 6c65 2828 2278 222c  s == tuple(("x",
-00010840: 2022 7922 2c20 3329 2900 0020 2020 2020   "y", 3))..     
-00010850: 2020 2073 6869 6d5f 203d 205f 456c 656d     shim_ = _Elem
-00010860: 656e 7449 6453 6869 6d28 4e6f 6e65 2c20  entIdShim(None, 
-00010870: 6469 6d65 6e73 696f 6e5f 6469 6374 2c20  dimension_dict, 
-00010880: 4e6f 6e65 2900 2020 2020 2020 2020 7d00  None).        }.
-00010890: 2020 2020 2020 2020 2020 2020 7d00 2020              }.  
-000108a0: 2020 2020 2020 2020 2020 2020 2020 5d00                ].
-000108b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000108c0: 2020 2020 7b22 6964 223a 2033 7d2c 0020      {"id": 3},. 
-000108d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000108e0: 2020 207b 2269 6422 3a20 322c 2022 7661     {"id": 2, "va
-000108f0: 6c75 6522 3a20 7b22 7265 6665 7265 6e63  lue": {"referenc
-00010900: 6573 223a 207b 2261 6c69 6173 223a 2022  es": {"alias": "
-00010910: 7922 7d7d 7d2c 0020 2020 2020 2020 2020  y"}}},.         
-00010920: 2020 2020 2020 2020 2020 207b 2269 6422             {"id"
-00010930: 3a20 312c 2022 7661 6c75 6522 3a20 7b22  : 1, "value": {"
-00010940: 7265 6665 7265 6e63 6573 223a 207b 2261  references": {"a
-00010950: 6c69 6173 223a 2022 7822 7d7d 7d2c 0020  lias": "x"}}},. 
-00010960: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010970: 656c 656d 656e 7473 223a 205b 0020 2020  elements": [.   
-00010980: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-00010990: 207b 0020 2020 2020 2020 2064 696d 656e   {.        dimen
-000109a0: 7369 6f6e 5f64 6963 7420 3d20 7b00 2020  sion_dict = {.  
-000109b0: 2020 6465 6620 6974 5f70 726f 7669 6465    def it_provide
-000109c0: 735f 7468 655f 7375 6276 6172 5f61 6c69  s_the_subvar_ali
-000109d0: 6173 6573 5f74 6f5f 6865 6c70 2873 656c  ases_to_help(sel
-000109e0: 6629 3a00 0020 2020 2020 2020 2061 7373  f):..        ass
-000109f0: 6572 7420 7368 696d 5f2e 5f73 7562 7661  ert shim_._subva
-00010a00: 725f 6964 7320 3d3d 2074 7570 6c65 2828  r_ids == tuple((
-00010a10: 2261 222c 2032 2929 0000 2020 2020 2020  "a", 2))..      
-00010a20: 2020 7368 696d 5f20 3d20 5f45 6c65 6d65    shim_ = _Eleme
-00010a30: 6e74 4964 5368 696d 284e 6f6e 652c 2064  ntIdShim(None, d
-00010a40: 696d 656e 7369 6f6e 5f64 6963 742c 204e  imension_dict, N
-00010a50: 6f6e 6529 0020 2020 2020 2020 207d 0020  one).        }. 
-00010a60: 2020 2020 2020 2020 2020 2022 7479 7065             "type
-00010a70: 223a 207b 2265 6c65 6d65 6e74 7322 3a20  ": {"elements": 
-00010a80: 5b7b 2276 616c 7565 223a 207b 2269 6422  [{"value": {"id"
-00010a90: 3a20 2261 227d 7d2c 207b 2276 616c 7565  : "a"}}, {"value
-00010aa0: 223a 207b 2269 6422 3a20 327d 7d5d 7d00  ": {"id": 2}}]}.
-00010ab0: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-00010ac0: 6e5f 6469 6374 203d 207b 0020 2020 2064  n_dict = {.    d
-00010ad0: 6566 2069 745f 7072 6f76 6964 6573 5f74  ef it_provides_t
-00010ae0: 6865 5f73 7562 7661 725f 6964 735f 746f  he_subvar_ids_to
-00010af0: 5f68 656c 7028 7365 6c66 293a 0000 2020  _help(self):..  
-00010b00: 2020 2020 2020 7d00 2020 2020 2020 2020        }.        
-00010b10: 2020 2020 2261 6c69 6173 3222 3a20 7b22      "alias2": {"
-00010b20: 616e 6f74 6865 7222 3a20 2274 7261 6e73  another": "trans
-00010b30: 666f 726d 227d 0020 2020 2020 2020 2061  form"}.        a
-00010b40: 7373 6572 7420 7368 696d 5f2e 5f72 6570  ssert shim_._rep
-00010b50: 6c61 6365 645f 656c 656d 656e 745f 7472  laced_element_tr
-00010b60: 616e 7366 6f72 6d73 2865 6c65 6d65 6e74  ansforms(element
-00010b70: 5f74 7261 6e73 666f 726d 7329 203d 3d20  _transforms) == 
-00010b80: 7b00 0020 2020 2020 2020 2073 6869 6d5f  {..        shim_
-00010b90: 203d 205f 456c 656d 656e 7449 6453 6869   = _ElementIdShi
-00010ba0: 6d28 4e6f 6e65 2c20 4e6f 6e65 2c20 4e6f  m(None, None, No
-00010bb0: 6e65 2900 2020 2020 2020 2020 7d00 2020  ne).        }.  
-00010bc0: 2020 2020 2020 2020 2020 226b 6579 223a            "key":
-00010bd0: 2022 7375 6276 6172 5f69 6422 2c00 2020   "subvar_id",.  
-00010be0: 2020 2020 2020 2020 2020 2273 3222 3a20            "s2": 
-00010bf0: 7b22 616e 6f74 6865 7222 3a20 2274 7261  {"another": "tra
-00010c00: 6e73 666f 726d 227d 2c00 2020 2020 2020  nsform"},.      
-00010c10: 2020 2020 2020 2273 3122 3a20 7b22 7472        "s1": {"tr
-00010c20: 616e 7366 6f72 6d22 3a20 226f 626a 6563  ansform": "objec
-00010c30: 7422 7d2c 0020 2020 2020 2020 2065 6c65  t"},.        ele
-00010c40: 6d65 6e74 5f74 7261 6e73 666f 726d 7320  ment_transforms 
-00010c50: 3d20 7b00 2020 2020 2020 2020 5f73 7562  = {.        _sub
-00010c60: 7661 725f 6964 735f 7072 6f70 5f2e 7265  var_ids_prop_.re
-00010c70: 7475 726e 5f76 616c 7565 203d 2074 7570  turn_value = tup
-00010c80: 6c65 2828 2278 797a 222c 2022 7332 222c  le(("xyz", "s2",
-00010c90: 2022 6162 6322 2929 0020 2020 2020 2020   "abc")).       
-00010ca0: 205f 7375 6276 6172 5f61 6c69 6173 6573   _subvar_aliases
-00010cb0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-00010cc0: 6c75 6520 3d20 7475 706c 6528 2822 616c  lue = tuple(("al
-00010cd0: 6961 7331 222c 2022 616c 6961 7332 222c  ias1", "alias2",
-00010ce0: 2022 616c 6961 7333 2229 2900 2020 2020   "alias3")).    
-00010cf0: 293a 0020 2020 2020 2020 2073 656c 662c  ):.        self,
-00010d00: 205f 7375 6276 6172 5f61 6c69 6173 6573   _subvar_aliases
-00010d10: 5f70 726f 705f 2c20 5f73 7562 7661 725f  _prop_, _subvar_
-00010d20: 6964 735f 7072 6f70 5f00 2020 2020 6465  ids_prop_.    de
-00010d30: 6620 6974 5f72 6570 6c61 6365 735f 7468  f it_replaces_th
-00010d40: 655f 656c 656d 656e 745f 7472 616e 7366  e_element_transf
-00010d50: 6f72 6d73 5f74 6f5f 6865 6c70 5f77 6974  orms_to_help_wit
-00010d60: 685f 7375 6276 6172 5f69 645f 6b65 7973  h_subvar_id_keys
-00010d70: 2800 0020 2020 2020 2020 2029 0020 2020  (..        ).   
-00010d80: 2020 2020 2020 2020 2073 6869 6d5f 2e5f           shim_._
-00010d90: 7265 706c 6163 6564 5f65 6c65 6d65 6e74  replaced_element
-00010da0: 5f74 7261 6e73 666f 726d 7328 656c 656d  _transforms(elem
-00010db0: 656e 745f 7472 616e 7366 6f72 6d73 2920  ent_transforms) 
-00010dc0: 3d3d 2065 6c65 6d65 6e74 5f74 7261 6e73  == element_trans
-00010dd0: 666f 726d 7300 2020 2020 2020 2020 6173  forms.        as
-00010de0: 7365 7274 2028 0000 2020 2020 2020 2020  sert (..        
-00010df0: 7368 696d 5f20 3d20 5f45 6c65 6d65 6e74  shim_ = _Element
-00010e00: 4964 5368 696d 284e 6f6e 652c 204e 6f6e  IdShim(None, Non
-00010e10: 652c 204e 6f6e 6529 0020 2020 2020 2020  e, None).       
-00010e20: 207d 0020 2020 2020 2020 2020 2020 2022   }.            "
-00010e30: 6b65 7922 3a20 2261 6c69 6173 222c 0020  key": "alias",. 
-00010e40: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
-00010e50: 7332 223a 207b 2261 6e6f 7468 6572 223a  s2": {"another":
-00010e60: 2022 7472 616e 7366 6f72 6d22 7d2c 0020   "transform"},. 
-00010e70: 2020 2020 2020 2020 2020 2022 616c 6961             "alia
-00010e80: 7331 223a 207b 2274 7261 6e73 666f 726d  s1": {"transform
-00010e90: 223a 2022 6f62 6a65 6374 227d 2c00 2020  ": "object"},.  
-00010ea0: 2020 2020 2020 656c 656d 656e 745f 7472        element_tr
-00010eb0: 616e 7366 6f72 6d73 203d 207b 0020 2020  ansforms = {.   
-00010ec0: 2064 6566 2069 745f 7265 706c 6163 6573   def it_replaces
-00010ed0: 5f74 6865 5f65 6c65 6d65 6e74 5f74 7261  _the_element_tra
-00010ee0: 6e73 666f 726d 735f 746f 5f68 656c 705f  nsforms_to_help_
-00010ef0: 7769 7468 5f61 6c69 6173 5f6b 6579 7328  with_alias_keys(
-00010f00: 7365 6c66 293a 0000 2020 2020 2020 2020  self):..        
-00010f10: 7d00 2020 2020 2020 2020 2020 2020 2261  }.            "a
-00010f20: 6c69 6173 3222 3a20 7b22 616e 6f74 6865  lias2": {"anothe
-00010f30: 7222 3a20 2274 7261 6e73 666f 726d 227d  r": "transform"}
-00010f40: 0020 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00010f50: 7368 696d 5f2e 5f72 6570 6c61 6365 645f  shim_._replaced_
-00010f60: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
-00010f70: 6d73 2865 6c65 6d65 6e74 5f74 7261 6e73  ms(element_trans
-00010f80: 666f 726d 7329 203d 3d20 7b00 0020 2020  forms) == {..   
-00010f90: 2020 2020 2073 6869 6d5f 203d 205f 456c       shim_ = _El
-00010fa0: 656d 656e 7449 6453 6869 6d28 4454 2e4d  ementIdShim(DT.M
-00010fb0: 525f 5355 4256 4152 2c20 4e6f 6e65 2c20  R_SUBVAR, None, 
-00010fc0: 4e6f 6e65 2900 0020 2020 2020 2020 205f  None)..        _
-00010fd0: 7375 6276 6172 5f69 6473 5f70 726f 705f  subvar_ids_prop_
-00010fe0: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
-00010ff0: 7475 706c 6528 2822 6162 6322 2c29 2900  tuple(("abc",)).
-00011000: 6164 0000 0100 0000 a501 0000 0010 0000  ad..............
-00011010: 6200 0000 0000 0000 bc0f 0000 890f 0000  b...............
-00011020: 4d0f 0000 4c0f 0000 260f 0000 250f 0000  M...L...&...%...
-00011030: f40e 0000 f30e 0000 ad0e 0000 820e 0000  ................
-00011040: 640e 0000 490e 0000 480e 0000 2a0e 0000  d...I...H...*...
-00011050: ec0d 0000 e20d 0000 c60d 0000 a40d 0000  ................
-00011060: 7e0d 0000 560d 0000 2a0d 0000 ee0c 0000  ~...V...*.......
-00011070: bc0c 0000 860c 0000 5d0c 0000 320c 0000  ........]...2...
-00011080: 030c 0000 d00b 0000 990b 0000 520b 0000  ............R...
-00011090: 060b 0000 c40a 0000 b90a 0000 b30a 0000  ................
-000110a0: 970a 0000 470a 0000 400a 0000 0e0a 0000  ....G...@.......
-000110b0: ca09 0000 c909 0000 9a09 0000 9909 0000  ................
-000110c0: 7b09 0000 2909 0000 2309 0000 cc08 0000  {...)...#.......
-000110d0: 7808 0000 3c08 0000 3b08 0000 1508 0000  x...<...;.......
-000110e0: 1408 0000 e907 0000 e807 0000 ca07 0000  ................
-000110f0: 9e07 0000 9407 0000 7b07 0000 5307 0000  ........{...S...
-00011100: 2a07 0000 0307 0000 c906 0000 a406 0000  *...............
-00011110: 8006 0000 7506 0000 6f06 0000 1c06 0000  ....u...o.......
-00011120: e705 0000 e605 0000 c405 0000 c305 0000  ................
-00011130: 7505 0000 4c05 0000 4b05 0000 2d05 0000  u...L...K...-...
-00011140: 0105 0000 f704 0000 dd04 0000 ae04 0000  ................
-00011150: 8704 0000 6004 0000 3304 0000 ea03 0000  ....`...3.......
-00011160: a903 0000 7a03 0000 5103 0000 1c03 0000  ....z...Q.......
-00011170: 1103 0000 0b03 0000 c302 0000 8e02 0000  ................
-00011180: 8d02 0000 5f02 0000 5e02 0000 1f02 0000  ...._...^.......
-00011190: ee01 0000 ed01 0000 a601 0000 a501 0000  ................
-000111a0: 0000 0000 0000 2020 2020 2320 6669 7874  ......    # fixt
-000111b0: 7572 6520 636f 6d70 6f6e 656e 7473 202d  ure components -
-000111c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000111d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000111e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0000 2020  ------------..  
-000111f0: 2020 2020 2020 6173 7365 7274 206e 756d        assert num
-00011200: 6572 6963 5f76 616c 7565 2069 6e20 5b65  eric_value in [e
-00011210: 7870 6563 7465 645f 7661 6c75 655d 0020  xpected_value]. 
-00011220: 2020 2020 2020 2023 202d 2d2d 6e70 2e6e         # ---np.n
-00011230: 616e 2021 3d20 6e70 2e6e 616e 2c20 6275  an != np.nan, bu
-00011240: 7420 6e70 2e6e 616e 2069 6e20 5b6e 702e  t np.nan in [np.
-00011250: 6e61 6e5d 2077 6f72 6b73 2d2d 2d00 0020  nan] works---.. 
-00011260: 2020 2020 2020 206e 756d 6572 6963 5f76         numeric_v
-00011270: 616c 7565 203d 2065 6c65 6d65 6e74 2e6e  alue = element.n
-00011280: 756d 6572 6963 5f76 616c 7565 0000 2020  umeric_value..  
-00011290: 2020 2020 2020 656c 656d 656e 7420 3d20        element = 
-000112a0: 5f45 6c65 6d65 6e74 2865 6c65 6d65 6e74  _Element(element
-000112b0: 5f64 6963 742c 204e 6f6e 652c 204e 6f6e  _dict, None, Non
-000112c0: 6529 0020 2020 2064 6566 2069 745f 6b6e  e).    def it_kn
-000112d0: 6f77 735f 6974 735f 6e75 6d65 7269 635f  ows_its_numeric_
-000112e0: 7661 6c75 6528 7365 6c66 2c20 656c 656d  value(self, elem
-000112f0: 656e 745f 6469 6374 2c20 6578 7065 6374  ent_dict, expect
-00011300: 6564 5f76 616c 7565 293a 0020 2020 2029  ed_value):.    )
-00011310: 0020 2020 2020 2020 2029 2c00 2020 2020  .        ),.    
-00011320: 2020 2020 2020 2020 287b 226e 756d 6572          ({"numer
-00011330: 6963 5f76 616c 7565 223a 207b 223f 223a  ic_value": {"?":
-00011340: 2038 7d7d 2c20 7b22 3f22 3a20 387d 292c   8}}, {"?": 8}),
-00011350: 0020 2020 2020 2020 2020 2020 2028 7b22  .            ({"
-00011360: 6e75 6d65 7269 635f 7661 6c75 6522 3a20  numeric_value": 
-00011370: 7b7d 7d2c 207b 7d29 2c00 2020 2020 2020  {}}, {}),.      
-00011380: 2020 2020 2020 287b 226e 756d 6572 6963        ({"numeric
-00011390: 5f76 616c 7565 223a 2022 3636 3622 7d2c  _value": "666"},
-000113a0: 2022 3636 3622 292c 0020 2020 2020 2020   "666"),.       
-000113b0: 2020 2020 2023 202d 2d2d 6e6f 2061 7474       # ---no att
-000113c0: 656d 7074 2069 7320 6d61 6465 2074 6f20  empt is made to 
-000113d0: 636f 6e76 6572 7420 7661 6c75 6573 2074  convert values t
-000113e0: 6f20 6e75 6d65 7269 6300 2020 2020 2020  o numeric.      
-000113f0: 2020 2020 2020 2320 2d2d 2d6e 6f74 2065        # ---not e
-00011400: 7870 6563 7465 6420 7661 6c75 6573 2c20  xpected values, 
-00011410: 6a75 7374 2074 6f20 646f 6375 6d65 6e74  just to document
-00011420: 2074 6865 2062 6568 6176 696f 7220 7468   the behavior th
-00011430: 6174 0020 2020 2020 2020 2020 2020 2028  at.            (
-00011440: 7b22 6e75 6d65 7269 635f 7661 6c75 6522  {"numeric_value"
-00011450: 3a20 2d33 2e32 7d2c 202d 332e 3229 2c00  : -3.2}, -3.2),.
-00011460: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
-00011470: 756d 6572 6963 5f76 616c 7565 223a 2037  umeric_value": 7
-00011480: 7d2c 2037 292c 0020 2020 2020 2020 2020  }, 7),.         
-00011490: 2020 2028 7b22 6e75 6d65 7269 635f 7661     ({"numeric_va
-000114a0: 6c75 6522 3a20 307d 2c20 3029 2c00 2020  lue": 0}, 0),.  
-000114b0: 2020 2020 2020 2020 2020 287b 226e 756d            ({"num
-000114c0: 6572 6963 5f76 616c 7565 223a 204e 6f6e  eric_value": Non
-000114d0: 657d 2c20 6e70 2e6e 616e 292c 0020 2020  e}, np.nan),.   
-000114e0: 2020 2020 2020 2020 2028 7b7d 2c20 6e70           ({}, np
-000114f0: 2e6e 616e 292c 0020 2020 2020 2020 2028  .nan),.        (
-00011500: 0020 2020 2020 2020 2028 2265 6c65 6d65  .        ("eleme
-00011510: 6e74 5f64 6963 7422 2c20 2265 7870 6563  nt_dict", "expec
-00011520: 7465 645f 7661 6c75 6522 292c 0020 2020  ted_value"),.   
-00011530: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
-00011540: 7261 6d65 7472 697a 6528 0000 2020 2020  rametrize(..    
-00011550: 2020 2020 6173 7365 7274 206d 6973 7369      assert missi
-00011560: 6e67 2069 7320 6578 7065 6374 6564 5f76  ng is expected_v
-00011570: 616c 7565 0020 2020 2020 2020 2023 202d  alue.        # -
-00011580: 2d2d 6f6e 6c79 2054 7275 6520 6f72 2046  --only True or F
-00011590: 616c 7365 2c20 6e6f 2054 7275 7468 7920  alse, no Truthy 
-000115a0: 6f72 2046 616c 7379 2028 736f 2075 7365  or Falsy (so use
-000115b0: 2060 6973 6020 6e6f 7420 603d 3d60 292d   `is` not `==`)-
-000115c0: 2d2d 0000 2020 2020 2020 2020 6d69 7373  --..        miss
-000115d0: 696e 6720 3d20 656c 656d 656e 742e 6d69  ing = element.mi
-000115e0: 7373 696e 6700 0020 2020 2020 2020 2065  ssing..        e
-000115f0: 6c65 6d65 6e74 203d 205f 456c 656d 656e  lement = _Elemen
-00011600: 7428 656c 656d 656e 745f 6469 6374 2c20  t(element_dict, 
-00011610: 4e6f 6e65 2c20 4e6f 6e65 2900 2020 2020  None, None).    
-00011620: 6465 6620 6974 5f6b 6e6f 7773 5f77 6865  def it_knows_whe
-00011630: 7468 6572 5f69 7473 5f6d 6973 7369 6e67  ther_its_missing
-00011640: 5f6f 725f 7661 6c69 6428 7365 6c66 2c20  _or_valid(self, 
-00011650: 656c 656d 656e 745f 6469 6374 2c20 6578  element_dict, ex
-00011660: 7065 6374 6564 5f76 616c 7565 293a 0020  pected_value):. 
-00011670: 2020 2029 0020 2020 2020 2020 2029 2c00     ).        ),.
-00011680: 2020 2020 2020 2020 2020 2020 287b 226d              ({"m
-00011690: 6973 7369 6e67 223a 2031 7d2c 2054 7275  issing": 1}, Tru
-000116a0: 6529 2c00 2020 2020 2020 2020 2020 2020  e),.            
-000116b0: 287b 226d 6973 7369 6e67 223a 2030 7d2c  ({"missing": 0},
-000116c0: 2046 616c 7365 292c 0020 2020 2020 2020   False),.       
-000116d0: 2020 2020 2023 202d 2d2d 6e6f 7420 6578       # ---not ex
-000116e0: 7065 6374 6564 2076 616c 7565 732c 2062  pected values, b
-000116f0: 7574 206a 7573 7420 696e 2063 6173 652d  ut just in case-
-00011700: 2d2d 0020 2020 2020 2020 2020 2020 2028  --.            (
-00011710: 7b22 6d69 7373 696e 6722 3a20 5472 7565  {"missing": True
-00011720: 7d2c 2054 7275 6529 2c00 2020 2020 2020  }, True),.      
-00011730: 2020 2020 2020 287b 226d 6973 7369 6e67        ({"missing
-00011740: 223a 2046 616c 7365 7d2c 2046 616c 7365  ": False}, False
-00011750: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-00011760: 7b22 6d69 7373 696e 6722 3a20 4e6f 6e65  {"missing": None
-00011770: 7d2c 2046 616c 7365 292c 0020 2020 2020  }, False),.     
-00011780: 2020 2020 2020 2028 7b7d 2c20 4661 6c73         ({}, Fals
-00011790: 6529 2c00 2020 2020 2020 2020 2800 2020  e),.        (.  
-000117a0: 2020 2020 2020 2822 656c 656d 656e 745f        ("element_
-000117b0: 6469 6374 222c 2022 6578 7065 6374 6564  dict", "expected
-000117c0: 5f76 616c 7565 2229 2c00 2020 2020 4070  _value"),.    @p
-000117d0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-000117e0: 6574 7269 7a65 2800 0020 2020 2020 2020  etrize(..       
-000117f0: 2061 7373 6572 7420 6973 5f68 6964 6465   assert is_hidde
-00011800: 6e20 6973 2065 7870 6563 7465 645f 7661  n is expected_va
-00011810: 6c75 6500 0020 2020 2020 2020 2069 735f  lue..        is_
-00011820: 6869 6464 656e 203d 2065 6c65 6d65 6e74  hidden = element
-00011830: 2e69 735f 6869 6464 656e 0000 2020 2020  .is_hidden..    
-00011840: 2020 2020 656c 656d 656e 7420 3d20 5f45      element = _E
-00011850: 6c65 6d65 6e74 284e 6f6e 652c 204e 6f6e  lement(None, Non
-00011860: 652c 2065 6c65 6d65 6e74 5f74 7261 6e73  e, element_trans
-00011870: 666f 726d 735f 2900 2020 2020 2020 2020  forms_).        
-00011880: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
-00011890: 6d73 5f20 3d20 696e 7374 616e 6365 5f6d  ms_ = instance_m
-000118a0: 6f63 6b28 7265 7175 6573 742c 205f 456c  ock(request, _El
-000118b0: 656d 656e 7454 7261 6e73 666f 726d 732c  ementTransforms,
-000118c0: 2068 6964 653d 6869 6465 2900 2020 2020   hide=hide).    
-000118d0: 6465 6620 6974 5f6b 6e6f 7773 5f77 6865  def it_knows_whe
-000118e0: 7468 6572 5f69 745f 6973 5f65 7870 6c69  ther_it_is_expli
-000118f0: 6369 746c 795f 6869 6464 656e 2873 656c  citly_hidden(sel
-00011900: 662c 2072 6571 7565 7374 2c20 6869 6465  f, request, hide
-00011910: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
-00011920: 293a 0020 2020 2029 0020 2020 2020 2020  ):.    ).       
-00011930: 2028 2268 6964 6522 2c20 2265 7870 6563   ("hide", "expec
-00011940: 7465 645f 7661 6c75 6522 292c 2028 2854  ted_value"), ((T
-00011950: 7275 652c 2054 7275 6529 2c20 2846 616c  rue, True), (Fal
-00011960: 7365 2c20 4661 6c73 6529 2c20 284e 6f6e  se, False), (Non
-00011970: 652c 2046 616c 7365 2929 0020 2020 2040  e, False)).    @
-00011980: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
-00011990: 6d65 7472 697a 6528 0000 2020 2020 2020  metrize(..      
-000119a0: 2020 6173 7365 7274 2065 6c65 6d65 6e74    assert element
-000119b0: 2e6c 6162 656c 203d 3d20 6578 7065 6374  .label == expect
-000119c0: 6564 5f76 616c 7565 0000 2020 2020 2020  ed_value..      
-000119d0: 2020 656c 656d 656e 7420 3d20 5f45 6c65    element = _Ele
-000119e0: 6d65 6e74 2865 6c65 6d65 6e74 5f64 6963  ment(element_dic
-000119f0: 742c 204e 6f6e 652c 2065 6c65 6d65 6e74  t, None, element
-00011a00: 5f74 7261 6e73 666f 726d 735f 2900 2020  _transforms_).  
-00011a10: 2020 2020 2020 656c 656d 656e 745f 7472        element_tr
-00011a20: 616e 7366 6f72 6d73 5f2e 6e61 6d65 203d  ansforms_.name =
-00011a30: 2074 7261 6e73 666f 726d 5f6e 616d 6500   transform_name.
-00011a40: 2020 2020 293a 0020 2020 2020 2020 2073      ):.        s
-00011a50: 656c 662c 2065 6c65 6d65 6e74 5f64 6963  elf, element_dic
-00011a60: 742c 2074 7261 6e73 666f 726d 5f6e 616d  t, transform_nam
-00011a70: 652c 2065 7870 6563 7465 645f 7661 6c75  e, expected_valu
-00011a80: 652c 2065 6c65 6d65 6e74 5f74 7261 6e73  e, element_trans
-00011a90: 666f 726d 735f 0020 2020 2064 6566 2069  forms_.    def i
-00011aa0: 745f 6b6e 6f77 735f 6974 735f 6c61 6265  t_knows_its_labe
-00011ab0: 6c28 0020 2020 2029 0020 2020 2020 2020  l(.    ).       
-00011ac0: 2029 2c00 2020 2020 2020 2020 2020 2020   ),.            
-00011ad0: 287b 2276 616c 7565 223a 207b 2272 6566  ({"value": {"ref
-00011ae0: 6572 656e 6365 7322 3a20 7b22 6e61 6d65  erences": {"name
-00011af0: 223a 2022 546f 6d22 7d7d 7d2c 2022 222c  ": "Tom"}}}, "",
-00011b00: 2022 2229 2c00 2020 2020 2020 2020 2020   ""),.          
-00011b10: 2020 287b 2276 616c 7565 223a 207b 2272    ({"value": {"r
-00011b20: 6566 6572 656e 6365 7322 3a20 7b22 6e61  eferences": {"na
-00011b30: 6d65 223a 2022 546f 6d22 7d7d 7d2c 2022  me": "Tom"}}}, "
-00011b40: 4861 7272 7922 2c20 2248 6172 7279 2229  Harry", "Harry")
-00011b50: 2c00 2020 2020 2020 2020 2020 2020 287b  ,.            ({
-00011b60: 2276 616c 7565 223a 207b 2272 6566 6572  "value": {"refer
-00011b70: 656e 6365 7322 3a20 7b22 6e61 6d65 223a  ences": {"name":
-00011b80: 2022 546f 6d22 7d7d 7d2c 204e 6f6e 652c   "Tom"}}}, None,
-00011b90: 2022 546f 6d22 292c 0020 2020 2020 2020   "Tom"),.       
-00011ba0: 2020 2020 2028 7b22 7661 6c75 6522 3a20       ({"value": 
-00011bb0: 7b22 7265 6665 7265 6e63 6573 223a 207b  {"references": {
-00011bc0: 7d7d 7d2c 204e 6f6e 652c 2022 2229 2c00  }}}, None, ""),.
-00011bd0: 2020 2020 2020 2020 2020 2020 287b 2276              ({"v
-00011be0: 616c 7565 223a 2022 46c3 a468 6967 227d  alue": "F..hig"}
-00011bf0: 2c20 4e6f 6e65 2c20 2246 c3a4 6869 6722  , None, "F..hig"
-00011c00: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-00011c10: 7b22 7661 6c75 6522 3a20 2242 696c 6c22  {"value": "Bill"
-00011c20: 7d2c 204e 6f6e 652c 2022 4269 6c6c 2229  }, None, "Bill")
-00011c30: 2c00 2020 2020 2020 2020 2020 2020 287b  ,.            ({
-00011c40: 2276 616c 7565 223a 2034 2e32 7d2c 204e  "value": 4.2}, N
-00011c50: 6f6e 652c 2022 342e 3222 292c 0020 2020  one, "4.2"),.   
-00011c60: 2020 2020 2020 2020 2028 7b22 7661 6c75           ({"valu
-00011c70: 6522 3a20 3432 7d2c 204e 6f6e 652c 2022  e": 42}, None, "
-00011c80: 3432 2229 2c00 2020 2020 2020 2020 2020  42"),.          
-00011c90: 2020 287b 2276 616c 7565 223a 205b 312e    ({"value": [1.
-00011ca0: 322c 2033 2e34 5d7d 2c20 4e6f 6e65 2c20  2, 3.4]}, None, 
-00011cb0: 2231 2e32 2d33 2e34 2229 2c00 2020 2020  "1.2-3.4"),.    
-00011cc0: 2020 2020 2020 2020 287b 2276 616c 7565          ({"value
-00011cd0: 223a 205b 2241 222c 2022 4622 5d7d 2c20  ": ["A", "F"]}, 
-00011ce0: 4e6f 6e65 2c20 2241 2d46 2229 2c00 2020  None, "A-F"),.  
-00011cf0: 2020 2020 2020 2020 2020 287b 226e 616d            ({"nam
-00011d00: 6522 3a20 2248 696e 7a75 66c3 a467 656e  e": "Hinzuf..gen
-00011d10: 227d 2c20 4e6f 6e65 2c20 2248 696e 7a75  "}, None, "Hinzu
-00011d20: 66c3 a467 656e 2229 2c00 2020 2020 2020  f..gen"),.      
-00011d30: 2020 2020 2020 287b 226e 616d 6522 3a20        ({"name": 
-00011d40: 2242 6f62 227d 2c20 4e6f 6e65 2c20 2242  "Bob"}, None, "B
-00011d50: 6f62 2229 2c00 2020 2020 2020 2020 2020  ob"),.          
-00011d60: 2020 287b 226e 616d 6522 3a20 4e6f 6e65    ({"name": None
-00011d70: 7d2c 204e 6f6e 652c 2022 2229 2c00 2020  }, None, ""),.  
-00011d80: 2020 2020 2020 2020 2020 287b 226e 616d            ({"nam
-00011d90: 6522 3a20 2222 7d2c 204e 6f6e 652c 2022  e": ""}, None, "
-00011da0: 2229 2c00 2020 2020 2020 2020 2020 2020  "),.            
-00011db0: 287b 7d2c 2022 4761 7266 222c 2022 4761  ({}, "Garf", "Ga
-00011dc0: 7266 2229 2c00 2020 2020 2020 2020 2020  rf"),.          
-00011dd0: 2020 287b 7d2c 204e 6f6e 652c 2022 2229    ({}, None, "")
-00011de0: 2c00 2020 2020 2020 2020 2800 2020 2020  ,.        (.    
-00011df0: 2020 2020 2822 656c 656d 656e 745f 6469      ("element_di
-00011e00: 6374 222c 2022 7472 616e 7366 6f72 6d5f  ct", "transform_
-00011e10: 6e61 6d65 222c 2022 6578 7065 6374 6564  name", "expected
-00011e20: 5f76 616c 7565 2229 2c00 2020 2020 4070  _value"),.    @p
-00011e30: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00011e40: 6574 7269 7a65 2800 0020 2020 2020 2020  etrize(..       
-00011e50: 2061 7373 6572 7420 696e 6465 7820 3d3d   assert index ==
-00011e60: 2031 3700 2020 2020 2020 2020 696e 6465   17.        inde
-00011e70: 7820 3d20 656c 656d 656e 742e 696e 6465  x = element.inde
-00011e80: 7800 2020 2020 2020 2020 656c 656d 656e  x.        elemen
-00011e90: 7420 3d20 5f45 6c65 6d65 6e74 284e 6f6e  t = _Element(Non
-00011ea0: 652c 2031 372c 204e 6f6e 6529 0020 2020  e, 17, None).   
-00011eb0: 2064 6566 2069 745f 6b6e 6f77 735f 6974   def it_knows_it
-00011ec0: 735f 706f 7369 7469 6f6e 5f61 6d6f 6e67  s_position_among
-00011ed0: 5f61 6c6c 5f74 6865 5f64 696d 656e 7369  _all_the_dimensi
-00011ee0: 6f6e 5f65 6c65 6d65 6e74 7328 7365 6c66  on_elements(self
-00011ef0: 293a 0000 2020 2020 2020 2020 6173 7365  ):..        asse
-00011f00: 7274 2072 6762 5f63 6f6c 6f72 5f66 696c  rt rgb_color_fil
-00011f10: 6c20 3d3d 205b 3235 352c 2032 3535 2c20  l == [255, 255, 
-00011f20: 3234 385d 0000 2020 2020 2020 2020 7267  248]..        rg
-00011f30: 625f 636f 6c6f 725f 6669 6c6c 203d 2065  b_color_fill = e
-00011f40: 6c65 6d65 6e74 2e66 696c 6c00 0020 2020  lement.fill..   
-00011f50: 2020 2020 2065 6c65 6d65 6e74 203d 205f       element = _
-00011f60: 456c 656d 656e 7428 4e6f 6e65 2c20 4e6f  Element(None, No
-00011f70: 6e65 2c20 656c 656d 656e 745f 7472 616e  ne, element_tran
-00011f80: 7366 6f72 6d73 5f29 0020 2020 2020 2020  sforms_).       
-00011f90: 2065 6c65 6d65 6e74 5f74 7261 6e73 666f   element_transfo
-00011fa0: 726d 735f 2e66 696c 6c20 3d20 5b32 3535  rms_.fill = [255
-00011fb0: 2c20 3235 352c 2032 3438 5d00 2020 2020  , 255, 248].    
-00011fc0: 6465 6620 6974 5f6b 6e6f 7773 5f69 7473  def it_knows_its
-00011fd0: 5f66 696c 6c5f 5247 425f 636f 6c6f 725f  _fill_RGB_color_
-00011fe0: 7374 7228 7365 6c66 2c20 656c 656d 656e  str(self, elemen
-00011ff0: 745f 7472 616e 7366 6f72 6d73 5f29 3a00  t_transforms_):.
-00012000: 6164 0000 0d00 0000 dd01 0000 0010 0000  ad..............
-00012010: 6d00 0000 0000 0000 ec0f 0000 c00f 0000  m...............
-00012020: 860f 0000 850f 0000 840f 0000 630f 0000  ............c...
-00012030: 160f 0000 150f 0000 f70e 0000 c40e 0000  ................
-00012040: ba0e 0000 7a0e 0000 440e 0000 fc0d 0000  ....z...D.......
-00012050: f10d 0000 eb0d 0000 950d 0000 4c0d 0000  ............L...
-00012060: 4b0d 0000 180d 0000 170d 0000 e50c 0000  K...............
-00012070: e40c 0000 c60c 0000 930c 0000 890c 0000  ................
-00012080: 650c 0000 3f0c 0000 1b0c 0000 fa0b 0000  e...?...........
-00012090: ef0b 0000 e90b 0000 ba0b 0000 840b 0000  ................
-000120a0: 7d0b 0000 340b 0000 330b 0000 070b 0000  }...4...3.......
-000120b0: 060b 0000 db0a 0000 da0a 0000 bc0a 0000  ................
-000120c0: 890a 0000 7f0a 0000 450a 0000 250a 0000  ........E...%...
-000120d0: 030a 0000 df09 0000 d409 0000 ce09 0000  ................
-000120e0: 8409 0000 3b09 0000 3a09 0000 1309 0000  ....;...:.......
-000120f0: 1209 0000 ec08 0000 eb08 0000 ea08 0000  ................
-00012100: d008 0000 8b08 0000 8a08 0000 6c08 0000  ............l...
-00012110: 4608 0000 3c08 0000 2608 0000 0508 0000  F...<...&.......
-00012120: d707 0000 aa07 0000 7507 0000 3107 0000  ........u...1...
-00012130: 2607 0000 2007 0000 f906 0000 bd06 0000  &... ...........
-00012140: b606 0000 8206 0000 3906 0000 3806 0000  ........9...8...
-00012150: 1a06 0000 f405 0000 ea05 0000 c605 0000  ................
-00012160: 8f05 0000 5405 0000 4905 0000 4305 0000  ....T...I...C...
-00012170: 1c05 0000 e004 0000 d904 0000 a504 0000  ................
-00012180: 5c04 0000 5b04 0000 3d04 0000 1704 0000  \...[...=.......
-00012190: 0d04 0000 f503 0000 c403 0000 9703 0000  ................
-000121a0: 6603 0000 5b03 0000 5503 0000 1a03 0000  f...[...U.......
-000121b0: de02 0000 d702 0000 a302 0000 6002 0000  ............`...
-000121c0: 5f02 0000 1902 0000 dd01 0000 dc01 0000  _...............
-000121d0: 0000 0000 0000 0000 0000 0000 0020 2020  .............   
-000121e0: 2020 2020 205f 6f72 6465 725f 6469 6374       _order_dict
-000121f0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-00012200: 6c75 6520 3d20 7b22 656c 656d 656e 745f  lue = {"element_
-00012210: 6964 223a 2034 327d 0020 2020 2064 6566  id": 42}.    def
-00012220: 2069 745f 6b6e 6f77 735f 7468 655f 736f   it_knows_the_so
-00012230: 7274 5f76 6563 746f 725f 656c 656d 656e  rt_vector_elemen
-00012240: 745f 6964 2873 656c 662c 205f 6f72 6465  t_id(self, _orde
-00012250: 725f 6469 6374 5f70 726f 705f 293a 0000  r_dict_prop_):..
-00012260: 2020 2020 2020 2020 6173 7365 7274 205f          assert _
-00012270: 4f72 6465 7253 7065 6328 4e6f 6e65 2c20  OrderSpec(None, 
-00012280: 4e6f 6e65 292e 6465 7363 656e 6469 6e67  None).descending
-00012290: 203d 3d20 6578 7065 6374 6564 5f76 616c   == expected_val
-000122a0: 7565 0020 2020 2020 2020 205f 6f72 6465  ue.        _orde
-000122b0: 725f 6469 6374 5f70 726f 705f 2e72 6574  r_dict_prop_.ret
-000122c0: 7572 6e5f 7661 6c75 6520 3d20 6f72 6465  urn_value = orde
-000122d0: 725f 6469 6374 0020 2020 2029 3a00 2020  r_dict.    ):.  
-000122e0: 2020 2020 2020 7365 6c66 2c20 5f6f 7264        self, _ord
-000122f0: 6572 5f64 6963 745f 7072 6f70 5f2c 206f  er_dict_prop_, o
-00012300: 7264 6572 5f64 6963 742c 2065 7870 6563  rder_dict, expec
-00012310: 7465 645f 7661 6c75 6500 2020 2020 6465  ted_value.    de
-00012320: 6620 6974 5f6b 6e6f 7773 5f77 6865 7468  f it_knows_wheth
-00012330: 6572 5f74 6865 5f73 6f72 745f 6469 7265  er_the_sort_dire
-00012340: 6374 696f 6e5f 6973 5f64 6573 6365 6e64  ction_is_descend
-00012350: 696e 6728 0020 2020 2029 0020 2020 2020  ing(.    ).     
-00012360: 2020 2029 2c00 2020 2020 2020 2020 2020     ),.          
-00012370: 2020 287b 2264 6972 6563 7469 6f6e 223a    ({"direction":
-00012380: 2022 6173 6365 6e64 696e 6722 7d2c 2046   "ascending"}, F
-00012390: 616c 7365 292c 0020 2020 2020 2020 2020  alse),.         
-000123a0: 2020 2028 7b22 6469 7265 6374 696f 6e22     ({"direction"
-000123b0: 3a20 2266 6f6f 6261 7222 7d2c 2054 7275  : "foobar"}, Tru
-000123c0: 6529 2c00 2020 2020 2020 2020 2020 2020  e),.            
-000123d0: 287b 2264 6972 6563 7469 6f6e 223a 2022  ({"direction": "
-000123e0: 6465 7363 656e 6469 6e67 227d 2c20 5472  descending"}, Tr
-000123f0: 7565 292c 0020 2020 2020 2020 2020 2020  ue),.           
-00012400: 2028 7b7d 2c20 5472 7565 292c 0020 2020   ({}, True),.   
-00012410: 2020 2020 2028 0020 2020 2020 2020 2022       (.        "
-00012420: 6f72 6465 725f 6469 6374 2c20 6578 7065  order_dict, expe
-00012430: 6374 6564 5f76 616c 7565 222c 0020 2020  cted_value",.   
-00012440: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
-00012450: 7261 6d65 7472 697a 6528 0000 2020 2020  rametrize(..    
-00012460: 2020 2020 6173 7365 7274 205f 4f72 6465      assert _Orde
-00012470: 7253 7065 6328 4e6f 6e65 2c20 4e6f 6e65  rSpec(None, None
-00012480: 292e 636f 6c6c 6174 696f 6e5f 6d65 7468  ).collation_meth
-00012490: 6f64 203d 3d20 6578 7065 6374 6564 5f76  od == expected_v
-000124a0: 616c 7565 0020 2020 2020 2020 205f 6f72  alue.        _or
-000124b0: 6465 725f 6469 6374 5f70 726f 705f 2e72  der_dict_prop_.r
-000124c0: 6574 7572 6e5f 7661 6c75 6520 3d20 6f72  eturn_value = or
-000124d0: 6465 725f 6469 6374 0020 2020 2029 3a00  der_dict.    ):.
-000124e0: 2020 2020 2020 2020 7365 6c66 2c20 5f6f          self, _o
-000124f0: 7264 6572 5f64 6963 745f 7072 6f70 5f2c  rder_dict_prop_,
-00012500: 206f 7264 6572 5f64 6963 742c 2065 7870   order_dict, exp
-00012510: 6563 7465 645f 7661 6c75 6500 2020 2020  ected_value.    
-00012520: 6465 6620 6974 5f6b 6e6f 7773 5f69 7473  def it_knows_its
-00012530: 5f63 6f6c 6c61 7469 6f6e 5f6d 6574 686f  _collation_metho
-00012540: 6428 0020 2020 2029 0020 2020 2020 2020  d(.    ).       
-00012550: 2029 2c00 2020 2020 2020 2020 2020 2020   ),.            
-00012560: 287b 2274 7970 6522 3a20 2270 6179 6c6f  ({"type": "paylo
-00012570: 6164 5f6f 7264 6572 227d 2c20 434d 2e50  ad_order"}, CM.P
-00012580: 4159 4c4f 4144 5f4f 5244 4552 292c 0020  AYLOAD_ORDER),. 
-00012590: 2020 2020 2020 2020 2020 2028 7b22 7479             ({"ty
-000125a0: 7065 223a 2022 6578 706c 6963 6974 227d  pe": "explicit"}
-000125b0: 2c20 434d 2e45 5850 4c49 4349 545f 4f52  , CM.EXPLICIT_OR
-000125c0: 4445 5229 2c00 2020 2020 2020 2020 2020  DER),.          
-000125d0: 2020 287b 7d2c 2043 4d2e 5041 594c 4f41    ({}, CM.PAYLOA
-000125e0: 445f 4f52 4445 5229 2c00 2020 2020 2020  D_ORDER),.      
-000125f0: 2020 2800 2020 2020 2020 2020 226f 7264    (.        "ord
-00012600: 6572 5f64 6963 742c 2065 7870 6563 7465  er_dict, expecte
-00012610: 645f 7661 6c75 6522 2c00 2020 2020 4070  d_value",.    @p
-00012620: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00012630: 6574 7269 7a65 2800 0020 2020 2020 2020  etrize(..       
-00012640: 2061 7373 6572 7420 5f4f 7264 6572 5370   assert _OrderSp
-00012650: 6563 284e 6f6e 652c 204e 6f6e 6529 2e62  ec(None, None).b
-00012660: 6f74 746f 6d5f 6669 7865 645f 6964 7320  ottom_fixed_ids 
-00012670: 3d3d 2065 7870 6563 7465 645f 7661 6c75  == expected_valu
-00012680: 6500 2020 2020 2020 2020 5f6f 7264 6572  e.        _order
-00012690: 5f64 6963 745f 7072 6f70 5f2e 7265 7475  _dict_prop_.retu
-000126a0: 726e 5f76 616c 7565 203d 206f 7264 6572  rn_value = order
-000126b0: 5f64 6963 7400 2020 2020 293a 0020 2020  _dict.    ):.   
-000126c0: 2020 2020 2073 656c 662c 205f 6f72 6465       self, _orde
-000126d0: 725f 6469 6374 5f70 726f 705f 2c20 6f72  r_dict_prop_, or
-000126e0: 6465 725f 6469 6374 2c20 6578 7065 6374  der_dict, expect
-000126f0: 6564 5f76 616c 7565 0020 2020 2064 6566  ed_value.    def
-00012700: 2069 745f 6b6e 6f77 735f 6974 735f 626f   it_knows_its_bo
-00012710: 7474 6f6d 5f66 6978 6564 5f69 6473 2800  ttom_fixed_ids(.
-00012720: 2020 2020 2900 2020 2020 2020 2020 292c      ).        ),
-00012730: 0020 2020 2020 2020 2020 2020 2028 7b22  .            ({"
-00012740: 6669 7865 6422 3a20 7b22 746f 7022 3a20  fixed": {"top": 
-00012750: 5b31 2c20 325d 2c20 2262 6f74 746f 6d22  [1, 2], "bottom"
-00012760: 3a20 5b33 2c20 345d 7d7d 2c20 2833 2c20  : [3, 4]}}, (3, 
-00012770: 3429 292c 0020 2020 2020 2020 2020 2020  4)),.           
-00012780: 2028 7b22 6669 7865 6422 3a20 7b22 626f   ({"fixed": {"bo
-00012790: 7474 6f6d 223a 205b 332c 2034 5d7d 7d2c  ttom": [3, 4]}},
-000127a0: 2028 332c 2034 2929 2c00 2020 2020 2020   (3, 4)),.      
-000127b0: 2020 2020 2020 287b 2266 6978 6564 223a        ({"fixed":
-000127c0: 207b 2262 6f74 746f 6d22 3a20 5b5d 7d7d   {"bottom": []}}
-000127d0: 2c20 2829 292c 0020 2020 2020 2020 2020  , ()),.         
-000127e0: 2020 2028 7b22 6669 7865 6422 3a20 7b22     ({"fixed": {"
-000127f0: 746f 7022 3a20 5b31 2c20 325d 7d7d 2c20  top": [1, 2]}}, 
-00012800: 2829 292c 0020 2020 2020 2020 2020 2020  ()),.           
-00012810: 2028 7b22 6669 7865 6422 3a20 7b7d 7d2c   ({"fixed": {}},
-00012820: 2028 2929 2c00 2020 2020 2020 2020 2020   ()),.          
-00012830: 2020 287b 7d2c 2028 2929 2c00 2020 2020    ({}, ()),.    
-00012840: 2020 2020 2800 2020 2020 2020 2020 226f      (.        "o
-00012850: 7264 6572 5f64 6963 742c 2065 7870 6563  rder_dict, expec
-00012860: 7465 645f 7661 6c75 6522 2c00 2020 2020  ted_value",.    
-00012870: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-00012880: 616d 6574 7269 7a65 2800 0020 2020 2022  ametrize(..    "
-00012890: 2222 556e 6974 2d74 6573 7420 7375 6974  ""Unit-test suit
-000128a0: 6520 666f 7220 6063 722e 6375 6265 2e64  e for `cr.cube.d
-000128b0: 696d 656e 7369 6f6e 2e5f 4f72 6465 7253  imension._OrderS
-000128c0: 7065 6360 206f 626a 6563 742e 2222 2200  pec` object.""".
-000128d0: 636c 6173 7320 4465 7363 7269 6265 5f4f  class Describe_O
-000128e0: 7264 6572 5370 6563 3a00 0000 2020 2020  rderSpec:...    
-000128f0: 2020 2020 6173 7365 7274 206e 616d 6520      assert name 
-00012900: 3d3d 2065 7870 6563 7465 645f 7661 6c75  == expected_valu
-00012910: 6500 0020 2020 2020 2020 206e 616d 6520  e..        name 
-00012920: 3d20 656c 656d 656e 745f 7472 616e 7366  = element_transf
-00012930: 6f72 6d73 2e6e 616d 6500 0020 2020 2020  orms.name..     
-00012940: 2020 2065 6c65 6d65 6e74 5f74 7261 6e73     element_trans
-00012950: 666f 726d 7320 3d20 5f45 6c65 6d65 6e74  forms = _Element
-00012960: 5472 616e 7366 6f72 6d73 2865 6c65 6d65  Transforms(eleme
-00012970: 6e74 5f74 7261 6e73 666f 726d 735f 6469  nt_transforms_di
-00012980: 6374 2900 2020 2020 6465 6620 6974 5f6b  ct).    def it_k
-00012990: 6e6f 7773 5f69 7473 5f6e 616d 6528 7365  nows_its_name(se
-000129a0: 6c66 2c20 656c 656d 656e 745f 7472 616e  lf, element_tran
-000129b0: 7366 6f72 6d73 5f64 6963 742c 2065 7870  sforms_dict, exp
-000129c0: 6563 7465 645f 7661 6c75 6529 3a00 2020  ected_value):.  
-000129d0: 2020 2900 2020 2020 2020 2020 292c 0020    ).        ),. 
-000129e0: 2020 2020 2020 2020 2020 2028 7b22 666f             ({"fo
-000129f0: 6f22 3a20 2266 6f6f 227d 2c20 4e6f 6e65  o": "foo"}, None
-00012a00: 292c 0020 2020 2020 2020 2020 2020 2028  ),.            (
-00012a10: 7b22 6e61 6d65 223a 204e 6f6e 657d 2c20  {"name": None}, 
-00012a20: 2222 292c 0020 2020 2020 2020 2020 2020  ""),.           
-00012a30: 2028 7b22 6e61 6d65 223a 2022 227d 2c20   ({"name": ""}, 
-00012a40: 2222 292c 0020 2020 2020 2020 2020 2020  ""),.           
-00012a50: 2028 7b22 6e61 6d65 223a 2022 4d79 4469   ({"name": "MyDi
-00012a60: 7370 6c61 794e 616d 6522 7d2c 2022 4d79  splayName"}, "My
-00012a70: 4469 7370 6c61 794e 616d 6522 292c 0020  DisplayName"),. 
-00012a80: 2020 2020 2020 2028 0020 2020 2020 2020         (.       
-00012a90: 2022 656c 656d 656e 745f 7472 616e 7366   "element_transf
-00012aa0: 6f72 6d73 5f64 6963 742c 2065 7870 6563  orms_dict, expec
-00012ab0: 7465 645f 7661 6c75 6522 2c00 2020 2020  ted_value",.    
-00012ac0: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-00012ad0: 616d 6574 7269 7a65 2800 0020 2020 2020  ametrize(..     
-00012ae0: 2020 2061 7373 6572 7420 6973 5f68 6964     assert is_hid
-00012af0: 6465 6e20 6973 2065 7870 6563 7465 645f  den is expected_
-00012b00: 7661 6c75 6500 0020 2020 2020 2020 2069  value..        i
-00012b10: 735f 6869 6464 656e 203d 2065 6c65 6d65  s_hidden = eleme
-00012b20: 6e74 5f74 7261 6e73 666f 726d 732e 6869  nt_transforms.hi
-00012b30: 6465 0000 2020 2020 2020 2020 656c 656d  de..        elem
-00012b40: 656e 745f 7472 616e 7366 6f72 6d73 203d  ent_transforms =
-00012b50: 205f 456c 656d 656e 7454 7261 6e73 666f   _ElementTransfo
-00012b60: 726d 7328 656c 656d 656e 745f 7472 616e  rms(element_tran
-00012b70: 7366 6f72 6d73 5f64 6963 7429 0020 2020  sforms_dict).   
-00012b80: 2029 3a00 2020 2020 2020 2020 7365 6c66   ):.        self
-00012b90: 2c20 656c 656d 656e 745f 7472 616e 7366  , element_transf
-00012ba0: 6f72 6d73 5f64 6963 742c 2065 7870 6563  orms_dict, expec
-00012bb0: 7465 645f 7661 6c75 6500 2020 2020 6465  ted_value.    de
-00012bc0: 6620 6974 5f6b 6e6f 7773 5f77 6865 6e5f  f it_knows_when_
-00012bd0: 6974 5f69 735f 6578 706c 6963 6974 6c79  it_is_explicitly
-00012be0: 5f68 6964 6465 6e28 0020 2020 2029 0020  _hidden(.    ). 
-00012bf0: 2020 2020 2020 2029 2c00 2020 2020 2020         ),.      
-00012c00: 2020 2020 2020 287b 2268 6964 6522 3a20        ({"hide": 
-00012c10: 307d 2c20 4e6f 6e65 292c 0020 2020 2020  0}, None),.     
-00012c20: 2020 2020 2020 2028 7b22 6869 6465 223a         ({"hide":
-00012c30: 204e 6f6e 657d 2c20 4e6f 6e65 292c 0020   None}, None),. 
-00012c40: 2020 2020 2020 2020 2020 2028 7b22 6869             ({"hi
-00012c50: 6465 223a 2046 616c 7365 7d2c 2046 616c  de": False}, Fal
-00012c60: 7365 292c 0020 2020 2020 2020 2020 2020  se),.           
-00012c70: 2028 7b22 6869 6465 223a 2054 7275 657d   ({"hide": True}
-00012c80: 2c20 5472 7565 292c 0020 2020 2020 2020  , True),.       
-00012c90: 2028 0020 2020 2020 2020 2022 656c 656d   (.        "elem
-00012ca0: 656e 745f 7472 616e 7366 6f72 6d73 5f64  ent_transforms_d
-00012cb0: 6963 742c 2065 7870 6563 7465 645f 7661  ict, expected_va
-00012cc0: 6c75 6522 2c00 2020 2020 4070 7974 6573  lue",.    @pytes
-00012cd0: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
-00012ce0: 7a65 2800 0020 2020 2020 2020 2061 7373  ze(..        ass
-00012cf0: 6572 7420 6669 6c6c 5f63 6f6c 6f72 5f76  ert fill_color_v
-00012d00: 616c 7565 203d 3d20 6578 7065 6374 6564  alue == expected
-00012d10: 5f76 616c 7565 0000 2020 2020 2020 2020  _value..        
-00012d20: 6669 6c6c 5f63 6f6c 6f72 5f76 616c 7565  fill_color_value
-00012d30: 203d 2065 6c65 6d65 6e74 5f74 7261 6e73   = element_trans
-00012d40: 666f 726d 732e 6669 6c6c 0000 2020 2020  forms.fill..    
-00012d50: 2020 2020 656c 656d 656e 745f 7472 616e      element_tran
-00012d60: 7366 6f72 6d73 203d 205f 456c 656d 656e  sforms = _Elemen
-00012d70: 7454 7261 6e73 666f 726d 7328 656c 656d  tTransforms(elem
-00012d80: 656e 745f 7472 616e 7366 6f72 6d73 5f64  ent_transforms_d
-00012d90: 6963 7429 0020 2020 2064 6566 2069 745f  ict).    def it_
-00012da0: 6b6e 6f77 735f 6974 735f 6669 6c6c 5f63  knows_its_fill_c
-00012db0: 6f6c 6f72 5f76 616c 7565 2873 656c 662c  olor_value(self,
-00012dc0: 2065 6c65 6d65 6e74 5f74 7261 6e73 666f   element_transfo
-00012dd0: 726d 735f 6469 6374 2c20 6578 7065 6374  rms_dict, expect
-00012de0: 6564 5f76 616c 7565 293a 0020 2020 2029  ed_value):.    )
-00012df0: 0020 2020 2020 2020 2029 2c00 2020 2020  .        ),.    
-00012e00: 2020 2020 2020 2020 287b 226e 616d 6522          ({"name"
-00012e10: 3a20 225a 696c 6c6f 7722 2c20 2266 696c  : "Zillow", "fil
-00012e20: 6c22 3a20 5b32 3535 2c20 3235 352c 2030  l": [255, 255, 0
-00012e30: 5d7d 2c20 5b32 3535 2c20 3235 352c 2030  ]}, [255, 255, 0
-00012e40: 5d29 2c00 2020 2020 2020 2020 2020 2020  ]),.            
-00012e50: 287b 226e 616d 6522 3a20 225a 696c 6c6f  ({"name": "Zillo
-00012e60: 7722 2c20 2266 696c 6c22 3a20 4e6f 6e65  w", "fill": None
-00012e70: 7d2c 204e 6f6e 6529 2c00 2020 2020 2020  }, None),.      
-00012e80: 2020 2020 2020 287b 226e 616d 6522 3a20        ({"name": 
-00012e90: 225a 696c 6c6f 7722 2c20 2266 696c 6c22  "Zillow", "fill"
-00012ea0: 3a20 2223 3331 3633 3935 227d 2c20 2223  : "#316395"}, "#
-00012eb0: 3331 3633 3935 2229 2c00 2020 2020 2020  316395"),.      
-00012ec0: 2020 2800 2020 2020 2020 2020 2265 6c65    (.        "ele
-00012ed0: 6d65 6e74 5f74 7261 6e73 666f 726d 735f  ment_transforms_
-00012ee0: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
-00012ef0: 616c 7565 222c 0020 2020 2040 7079 7465  alue",.    @pyte
-00012f00: 7374 2e6d 6172 6b2e 7061 7261 6d65 7472  st.mark.parametr
-00012f10: 697a 6528 0000 2020 2020 2222 2255 6e69  ize(..    """Uni
-00012f20: 742d 7465 7374 2073 7569 7465 2066 6f72  t-test suite for
-00012f30: 2060 6372 2e63 7562 652e 6469 6d65 6e73   `cr.cube.dimens
-00012f40: 696f 6e2e 5f45 6c65 6d65 6e74 5472 616e  ion._ElementTran
-00012f50: 7366 6f72 6d73 6020 6f62 6a65 6374 2e22  sforms` object."
-00012f60: 2222 0063 6c61 7373 2044 6573 6372 6962  "".class Describ
-00012f70: 6545 6c65 6d65 6e74 5472 616e 7366 6f72  eElementTransfor
-00012f80: 6d73 3a00 0000 2020 2020 2020 2020 7265  ms:...        re
-00012f90: 7475 726e 2069 6e73 7461 6e63 655f 6d6f  turn instance_mo
-00012fa0: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
-00012fb0: 6d65 6e74 5472 616e 7366 6f72 6d73 2900  mentTransforms).
-00012fc0: 2020 2020 6465 6620 656c 656d 656e 745f      def element_
-00012fd0: 7472 616e 7366 6f72 6d73 5f28 7365 6c66  transforms_(self
-00012fe0: 2c20 7265 7175 6573 7429 3a00 2020 2020  , request):.    
-00012ff0: 4070 7974 6573 742e 6669 7874 7572 6500  @pytest.fixture.
-00013000: 6164 0000 3000 0000 c401 0000 0010 0000  ad..0...........
-00013010: 5e00 0000 0000 0000 c90f 0000 c80f 0000  ^...............
-00013020: 7c0f 0000 500f 0000 250f 0000 f70e 0000  |...P...%.......
-00013030: c90e 0000 c80e 0000 aa0e 0000 840e 0000  ................
-00013040: 7a0e 0000 640e 0000 3b0e 0000 140e 0000  z...d...;.......
-00013050: e50d 0000 da0d 0000 d40d 0000 950d 0000  ................
-00013060: 590d 0000 520d 0000 1e0d 0000 da0c 0000  Y...R...........
-00013070: d90c 0000 910c 0000 530c 0000 1a0c 0000  ........S.......
-00013080: 190c 0000 cb0b 0000 9f0b 0000 740b 0000  ............t...
-00013090: 440b 0000 140b 0000 130b 0000 bf0a 0000  D...............
-000130a0: 7b0a 0000 350a 0000 340a 0000 e109 0000  {...5...4.......
-000130b0: 9d09 0000 5509 0000 5409 0000 0209 0000  ....U...T.......
-000130c0: d608 0000 ab08 0000 8008 0000 5508 0000  ............U...
-000130d0: 5408 0000 1208 0000 f207 0000 eb07 0000  T...............
-000130e0: ac07 0000 7f07 0000 5407 0000 fb06 0000  ........T.......
-000130f0: de06 0000 9e06 0000 9d06 0000 7f06 0000  ................
-00013100: 5906 0000 4f06 0000 3906 0000 1806 0000  Y...O...9.......
-00013110: e705 0000 bd05 0000 8b05 0000 4705 0000  ............G...
-00013120: 3c05 0000 3605 0000 dd04 0000 a904 0000  <...6...........
-00013130: 6304 0000 6204 0000 4404 0000 1a04 0000  c...b...D.......
-00013140: 1004 0000 fa03 0000 d703 0000 b603 0000  ................
-00013150: 7103 0000 6603 0000 6003 0000 2a03 0000  q...f...`...*...
-00013160: fd02 0000 f602 0000 a802 0000 a702 0000  ................
-00013170: 6002 0000 5f02 0000 4b02 0000 2102 0000  `..._...K...!...
-00013180: e001 0000 df01 0000 de01 0000 c401 0000  ................
-00013190: c301 0000 0000 0000 0000 0000 0000 0000  ................
-000131a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000131b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000131c0: 0000 0000 636c 6173 7320 4465 7363 7269  ....class Descri
-000131d0: 6265 5f53 7562 746f 7461 6c73 3a00 0000  be_Subtotals:...
-000131e0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-000131f0: 726f 7065 7274 795f 6d6f 636b 2872 6571  roperty_mock(req
-00013200: 7565 7374 2c20 5f4f 7264 6572 5370 6563  uest, _OrderSpec
-00013210: 2c20 225f 6f72 6465 725f 6469 6374 2229  , "_order_dict")
-00013220: 0020 2020 2064 6566 205f 6f72 6465 725f  .    def _order_
-00013230: 6469 6374 5f70 726f 705f 2873 656c 662c  dict_prop_(self,
-00013240: 2072 6571 7565 7374 293a 0020 2020 2040   request):.    @
-00013250: 7079 7465 7374 2e66 6978 7475 7265 0000  pytest.fixture..
-00013260: 2020 2020 2320 6669 7874 7572 6520 636f      # fixture co
-00013270: 6d70 6f6e 656e 7473 202d 2d2d 2d2d 2d2d  mponents -------
-00013280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000132a0: 2d2d 2d2d 2d2d 0000 2020 2020 2020 2020  ------..        
-000132b0: 6173 7365 7274 205f 4f72 6465 7253 7065  assert _OrderSpe
-000132c0: 6328 4e6f 6e65 2c20 6469 6d5f 7472 616e  c(None, dim_tran
-000132d0: 7366 6f72 6d73 292e 5f6f 7264 6572 5f64  sforms)._order_d
-000132e0: 6963 7420 3d3d 2065 7870 6563 7465 645f  ict == expected_
-000132f0: 7661 6c75 6500 2020 2020 293a 0020 2020  value.    ):.   
-00013300: 2020 2020 2073 656c 662c 2064 696d 5f74       self, dim_t
-00013310: 7261 6e73 666f 726d 732c 2065 7870 6563  ransforms, expec
-00013320: 7465 645f 7661 6c75 6500 2020 2020 6465  ted_value.    de
-00013330: 6620 6974 5f70 726f 7669 6465 735f 6163  f it_provides_ac
-00013340: 6365 7373 5f74 6f5f 7468 655f 6f72 6465  cess_to_the_orde
-00013350: 725f 6469 6374 5f74 6f5f 6865 6c70 2800  r_dict_to_help(.
-00013360: 2020 2020 2900 2020 2020 2020 2020 292c      ).        ),
-00013370: 0020 2020 2020 2020 2020 2020 2028 7b22  .            ({"
-00013380: 6f72 6465 7222 3a20 7b22 7479 7065 223a  order": {"type":
-00013390: 2022 6578 706c 6963 6974 227d 7d2c 207b   "explicit"}}, {
-000133a0: 2274 7970 6522 3a20 2265 7870 6c69 6369  "type": "explici
-000133b0: 7422 7d29 2c00 2020 2020 2020 2020 2020  t"}),.          
-000133c0: 2020 287b 226f 7264 6572 223a 207b 7d7d    ({"order": {}}
-000133d0: 2c20 7b7d 292c 0020 2020 2020 2020 2020  , {}),.         
-000133e0: 2020 2028 7b22 6f72 6465 7222 3a20 4e6f     ({"order": No
-000133f0: 6e65 7d2c 207b 7d29 2c00 2020 2020 2020  ne}, {}),.      
-00013400: 2020 2020 2020 287b 7d2c 207b 7d29 2c00        ({}, {}),.
-00013410: 2020 2020 2020 2020 2800 2020 2020 2020          (.      
-00013420: 2020 2264 696d 5f74 7261 6e73 666f 726d    "dim_transform
-00013430: 732c 2065 7870 6563 7465 645f 7661 6c75  s, expected_valu
-00013440: 6522 2c00 2020 2020 4070 7974 6573 742e  e",.    @pytest.
-00013450: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
-00013460: 2800 0020 2020 2020 2020 2061 7373 6572  (..        asser
-00013470: 7420 5f4f 7264 6572 5370 6563 284e 6f6e  t _OrderSpec(Non
-00013480: 652c 204e 6f6e 6529 2e74 6f70 5f66 6978  e, None).top_fix
-00013490: 6564 5f69 6473 203d 3d20 6578 7065 6374  ed_ids == expect
-000134a0: 6564 5f76 616c 7565 0020 2020 2020 2020  ed_value.       
-000134b0: 205f 6f72 6465 725f 6469 6374 5f70 726f   _order_dict_pro
-000134c0: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
-000134d0: 3d20 6f72 6465 725f 6469 6374 0020 2020  = order_dict.   
-000134e0: 2064 6566 2069 745f 6b6e 6f77 735f 6974   def it_knows_it
-000134f0: 735f 746f 705f 6669 7865 645f 6964 7328  s_top_fixed_ids(
-00013500: 7365 6c66 2c20 5f6f 7264 6572 5f64 6963  self, _order_dic
-00013510: 745f 7072 6f70 5f2c 206f 7264 6572 5f64  t_prop_, order_d
-00013520: 6963 742c 2065 7870 6563 7465 645f 7661  ict, expected_va
-00013530: 6c75 6529 3a00 2020 2020 2900 2020 2020  lue):.    ).    
-00013540: 2020 2020 292c 0020 2020 2020 2020 2020      ),.         
-00013550: 2020 2028 7b22 6669 7865 6422 3a20 7b22     ({"fixed": {"
-00013560: 626f 7474 6f6d 223a 205b 312c 2032 5d2c  bottom": [1, 2],
-00013570: 2022 746f 7022 3a20 5b33 2c20 345d 7d7d   "top": [3, 4]}}
-00013580: 2c20 2833 2c20 3429 292c 0020 2020 2020  , (3, 4)),.     
-00013590: 2020 2020 2020 2028 7b22 6669 7865 6422         ({"fixed"
-000135a0: 3a20 7b22 746f 7022 3a20 5b33 2c20 345d  : {"top": [3, 4]
-000135b0: 7d7d 2c20 2833 2c20 3429 292c 0020 2020  }}, (3, 4)),.   
-000135c0: 2020 2020 2020 2020 2028 7b22 6669 7865           ({"fixe
-000135d0: 6422 3a20 7b22 746f 7022 3a20 5b5d 7d7d  d": {"top": []}}
-000135e0: 2c20 2829 292c 0020 2020 2020 2020 2020  , ()),.         
-000135f0: 2020 2028 7b22 6669 7865 6422 3a20 7b22     ({"fixed": {"
-00013600: 626f 7474 6f6d 223a 205b 312c 2032 5d7d  bottom": [1, 2]}
-00013610: 7d2c 2028 2929 2c00 2020 2020 2020 2020  }, ()),.        
-00013620: 2020 2020 287b 2266 6978 6564 223a 207b      ({"fixed": {
-00013630: 7d7d 2c20 2829 292c 0020 2020 2020 2020  }}, ()),.       
-00013640: 2020 2020 2028 7b7d 2c20 2829 292c 0020       ({}, ()),. 
-00013650: 2020 2020 2020 2028 0020 2020 2020 2020         (.       
-00013660: 2022 6f72 6465 725f 6469 6374 2c20 6578   "order_dict, ex
-00013670: 7065 6374 6564 5f76 616c 7565 222c 0020  pected_value",. 
-00013680: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-00013690: 7061 7261 6d65 7472 697a 6528 0000 2020  parametrize(..  
-000136a0: 2020 2020 2020 6173 7365 7274 2073 7472        assert str
-000136b0: 2865 2e76 616c 7565 292e 656e 6473 7769  (e.value).endswi
-000136c0: 7468 2822 2069 7320 6e6f 7420 6120 7661  th(" is not a va
-000136d0: 6c69 6420 4d45 4153 5552 4522 2900 2020  lid MEASURE").  
-000136e0: 2020 2020 2020 2320 2d2d 2d20 696e 2045        # --- in E
-000136f0: 6e75 6d20 6d6f 6475 6c65 0020 2020 2020  num module.     
-00013700: 2020 2023 202d 2d2d 2060 2e65 6e64 7377     # --- `.endsw
-00013710: 6974 6828 2960 2074 6f20 6163 636f 6d6d  ith()` to accomm
-00013720: 6f64 6174 6520 6120 5079 7468 6f6e 2032  odate a Python 2
-00013730: 2e37 2076 732e 2033 2e30 2065 7272 6f72  .7 vs. 3.0 error
-00013740: 206d 6573 7361 6765 2064 6966 6665 7265   message differe
-00013750: 6e63 6500 2020 2020 2020 2020 2020 2020  nce.            
-00013760: 5f4f 7264 6572 5370 6563 284e 6f6e 652c  _OrderSpec(None,
-00013770: 204e 6f6e 6529 2e6d 6561 7375 7265 0020   None).measure. 
-00013780: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00013790: 7374 2e72 6169 7365 7328 5661 6c75 6545  st.raises(ValueE
-000137a0: 7272 6f72 2920 6173 2065 3a00 2020 2020  rror) as e:.    
-000137b0: 2020 2020 5f6f 7264 6572 5f64 6963 745f      _order_dict_
-000137c0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
-000137d0: 7565 203d 207b 226d 6561 7375 7265 223a  ue = {"measure":
-000137e0: 2022 666f 6f62 6172 227d 0020 2020 2029   "foobar"}.    )
-000137f0: 3a00 2020 2020 2020 2020 7365 6c66 2c20  :.        self, 
-00013800: 5f6f 7264 6572 5f64 6963 745f 7072 6f70  _order_dict_prop
-00013810: 5f00 2020 2020 6465 6620 616e 645f 6974  _.    def and_it
-00013820: 5f72 6169 7365 735f 7768 656e 5f74 6865  _raises_when_the
-00013830: 5f6d 6561 7375 7265 5f6b 6579 776f 7264  _measure_keyword
-00013840: 5f69 735f 6e6f 745f 7265 636f 676e 697a  _is_not_recogniz
-00013850: 6564 2800 0020 2020 2020 2020 2061 7373  ed(..        ass
-00013860: 6572 7420 7374 7228 652e 7661 6c75 6529  ert str(e.value)
-00013870: 203d 3d20 2227 6d65 6173 7572 6527 2200   == "'measure'".
-00013880: 2020 2020 2020 2020 2020 2020 5f4f 7264              _Ord
-00013890: 6572 5370 6563 284e 6f6e 652c 204e 6f6e  erSpec(None, Non
-000138a0: 6529 2e6d 6561 7375 7265 0020 2020 2020  e).measure.     
-000138b0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-000138c0: 6169 7365 7328 4b65 7945 7272 6f72 2920  aises(KeyError) 
-000138d0: 6173 2065 3a00 2020 2020 2020 2020 5f6f  as e:.        _o
-000138e0: 7264 6572 5f64 6963 745f 7072 6f70 5f2e  rder_dict_prop_.
-000138f0: 7265 7475 726e 5f76 616c 7565 203d 207b  return_value = {
-00013900: 7d00 2020 2020 6465 6620 6275 745f 6974  }.    def but_it
-00013910: 5f72 6169 7365 735f 7768 656e 5f6d 6561  _raises_when_mea
-00013920: 7375 7265 5f66 6965 6c64 5f69 735f 6e6f  sure_field_is_no
-00013930: 745f 7072 6573 656e 7428 7365 6c66 2c20  t_present(self, 
-00013940: 5f6f 7264 6572 5f64 6963 745f 7072 6f70  _order_dict_prop
-00013950: 5f29 3a00 0020 2020 2020 2020 2061 7373  _):..        ass
-00013960: 6572 7420 5f4f 7264 6572 5370 6563 284e  ert _OrderSpec(N
-00013970: 6f6e 652c 204e 6f6e 6529 2e6d 6561 7375  one, None).measu
-00013980: 7265 203d 3d20 4d45 4153 5552 452e 434f  re == MEASURE.CO
-00013990: 4c55 4d4e 5f50 4552 4345 4e54 0020 2020  LUMN_PERCENT.   
-000139a0: 2020 2020 205f 6f72 6465 725f 6469 6374       _order_dict
-000139b0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-000139c0: 6c75 6520 3d20 7b22 6d65 6173 7572 6522  lue = {"measure"
-000139d0: 3a20 2263 6f6c 5f70 6572 6365 6e74 227d  : "col_percent"}
-000139e0: 0020 2020 2064 6566 2069 745f 6b6e 6f77  .    def it_know
-000139f0: 735f 7468 655f 6d65 6173 7572 655f 7370  s_the_measure_sp
-00013a00: 6563 6966 6965 645f 6173 5f74 6865 5f73  ecified_as_the_s
-00013a10: 6f72 745f 6261 7369 7328 7365 6c66 2c20  ort_basis(self, 
-00013a20: 5f6f 7264 6572 5f64 6963 745f 7072 6f70  _order_dict_prop
-00013a30: 5f29 3a00 0020 2020 2020 2020 2061 7373  _):..        ass
-00013a40: 6572 7420 5f4f 7264 6572 5370 6563 284e  ert _OrderSpec(N
-00013a50: 6f6e 652c 204e 6f6e 6529 2e6d 6172 6769  one, None).margi
-00013a60: 6e61 6c20 3d3d 204d 4152 4749 4e41 4c2e  nal == MARGINAL.
-00013a70: 5343 414c 455f 4d45 414e 0020 2020 2020  SCALE_MEAN.     
-00013a80: 2020 205f 6f72 6465 725f 6469 6374 5f70     _order_dict_p
-00013a90: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
-00013aa0: 6520 3d20 7b22 6d61 7267 696e 616c 223a  e = {"marginal":
-00013ab0: 2022 7363 616c 655f 6d65 616e 227d 0020   "scale_mean"}. 
-00013ac0: 2020 2064 6566 2069 745f 6b6e 6f77 735f     def it_knows_
-00013ad0: 7468 655f 6d61 7267 696e 616c 5f73 7065  the_marginal_spe
-00013ae0: 6369 6669 6564 5f61 735f 7468 655f 736f  cified_as_the_so
-00013af0: 7274 5f62 6173 6973 2873 656c 662c 205f  rt_basis(self, _
-00013b00: 6f72 6465 725f 6469 6374 5f70 726f 705f  order_dict_prop_
-00013b10: 293a 0000 2020 2020 2020 2020 6173 7365  ):..        asse
-00013b20: 7274 2073 7472 2865 2e76 616c 7565 2920  rt str(e.value) 
-00013b30: 3d3d 2022 2769 6e73 6572 7469 6f6e 5f69  == "'insertion_i
-00013b40: 6427 2200 2020 2020 2020 2020 2020 2020  d'".            
-00013b50: 5f4f 7264 6572 5370 6563 284e 6f6e 652c  _OrderSpec(None,
-00013b60: 204e 6f6e 6529 2e69 6e73 6572 7469 6f6e   None).insertion
-00013b70: 5f69 6400 2020 2020 2020 2020 7769 7468  _id.        with
-00013b80: 2070 7974 6573 742e 7261 6973 6573 284b   pytest.raises(K
-00013b90: 6579 4572 726f 7229 2061 7320 653a 0020  eyError) as e:. 
-00013ba0: 2020 2020 2020 205f 6f72 6465 725f 6469         _order_di
-00013bb0: 6374 5f70 726f 705f 2e72 6574 7572 6e5f  ct_prop_.return_
-00013bc0: 7661 6c75 6520 3d20 7b7d 0020 2020 2064  value = {}.    d
-00013bd0: 6566 2062 7574 5f69 745f 7261 6973 6573  ef but_it_raises
-00013be0: 5f77 6865 6e5f 696e 7365 7274 696f 6e5f  _when_insertion_
-00013bf0: 6964 5f6e 6f74 5f70 7265 7365 6e74 2873  id_not_present(s
-00013c00: 656c 662c 205f 6f72 6465 725f 6469 6374  elf, _order_dict
-00013c10: 5f70 726f 705f 293a 0000 2020 2020 2020  _prop_):..      
-00013c20: 2020 6173 7365 7274 205f 4f72 6465 7253    assert _OrderS
-00013c30: 7065 6328 4e6f 6e65 2c20 4e6f 6e65 292e  pec(None, None).
-00013c40: 696e 7365 7274 696f 6e5f 6964 203d 3d20  insertion_id == 
-00013c50: 3432 0020 2020 2020 2020 205f 6f72 6465  42.        _orde
-00013c60: 725f 6469 6374 5f70 726f 705f 2e72 6574  r_dict_prop_.ret
-00013c70: 7572 6e5f 7661 6c75 6520 3d20 7b22 696e  urn_value = {"in
-00013c80: 7365 7274 696f 6e5f 6964 223a 2034 327d  sertion_id": 42}
-00013c90: 0020 2020 2064 6566 2069 745f 6b6e 6f77  .    def it_know
-00013ca0: 735f 7468 655f 736f 7274 5f76 6563 746f  s_the_sort_vecto
-00013cb0: 725f 696e 7365 7274 696f 6e5f 6964 2873  r_insertion_id(s
-00013cc0: 656c 662c 205f 6f72 6465 725f 6469 6374  elf, _order_dict
-00013cd0: 5f70 726f 705f 293a 0000 2020 2020 2020  _prop_):..      
-00013ce0: 2020 6173 7365 7274 205f 4f72 6465 7253    assert _OrderS
-00013cf0: 7065 6328 4e6f 6e65 2c20 4e6f 6e65 292e  pec(None, None).
-00013d00: 656c 656d 656e 745f 6964 7320 3d3d 2065  element_ids == e
-00013d10: 7870 6563 7465 645f 7661 6c75 6500 2020  xpected_value.  
-00013d20: 2020 2020 2020 5f6f 7264 6572 5f64 6963        _order_dic
-00013d30: 745f 7072 6f70 5f2e 7265 7475 726e 5f76  t_prop_.return_v
-00013d40: 616c 7565 203d 206f 7264 6572 5f64 6963  alue = order_dic
-00013d50: 7400 2020 2020 293a 0020 2020 2020 2020  t.    ):.       
-00013d60: 2073 656c 662c 205f 6f72 6465 725f 6469   self, _order_di
-00013d70: 6374 5f70 726f 705f 2c20 6f72 6465 725f  ct_prop_, order_
-00013d80: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
-00013d90: 616c 7565 0020 2020 2064 6566 2069 745f  alue.    def it_
-00013da0: 6b6e 6f77 735f 7468 655f 6f72 6465 7265  knows_the_ordere
-00013db0: 645f 656c 656d 656e 745f 6964 735f 666f  d_element_ids_fo
-00013dc0: 725f 616e 5f65 7870 6c69 6369 745f 736f  r_an_explicit_so
-00013dd0: 7274 2800 2020 2020 2900 2020 2020 2020  rt(.    ).      
-00013de0: 2020 292c 0020 2020 2020 2020 2020 2020    ),.           
-00013df0: 2028 7b22 656c 656d 656e 745f 6964 7322   ({"element_ids"
-00013e00: 3a20 5b34 2c20 325d 7d2c 2028 342c 2032  : [4, 2]}, (4, 2
-00013e10: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-00013e20: 287b 2265 6c65 6d65 6e74 5f69 6473 223a  ({"element_ids":
-00013e30: 205b 5d7d 2c20 2829 292c 0020 2020 2020   []}, ()),.     
-00013e40: 2020 2020 2020 2028 7b22 656c 656d 656e         ({"elemen
-00013e50: 745f 6964 7322 3a20 4e6f 6e65 7d2c 2028  t_ids": None}, (
-00013e60: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-00013e70: 287b 7d2c 2028 2929 2c00 2020 2020 2020  ({}, ()),.      
-00013e80: 2020 2800 2020 2020 2020 2020 226f 7264    (.        "ord
-00013e90: 6572 5f64 6963 742c 2065 7870 6563 7465  er_dict, expecte
-00013ea0: 645f 7661 6c75 6522 2c00 2020 2020 4070  d_value",.    @p
-00013eb0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00013ec0: 6574 7269 7a65 2800 0020 2020 2020 2020  etrize(..       
-00013ed0: 2061 7373 6572 7420 7374 7228 652e 7661   assert str(e.va
-00013ee0: 6c75 6529 203d 3d20 2227 656c 656d 656e  lue) == "'elemen
-00013ef0: 745f 6964 2722 0020 2020 2020 2020 2020  t_id'".         
-00013f00: 2020 205f 4f72 6465 7253 7065 6328 4e6f     _OrderSpec(No
-00013f10: 6e65 2c20 4e6f 6e65 292e 656c 656d 656e  ne, None).elemen
-00013f20: 745f 6964 0020 2020 2020 2020 2077 6974  t_id.        wit
-00013f30: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00013f40: 4b65 7945 7272 6f72 2920 6173 2065 3a00  KeyError) as e:.
-00013f50: 2020 2020 2020 2020 5f6f 7264 6572 5f64          _order_d
-00013f60: 6963 745f 7072 6f70 5f2e 7265 7475 726e  ict_prop_.return
-00013f70: 5f76 616c 7565 203d 207b 7d00 2020 2020  _value = {}.    
-00013f80: 6465 6620 6275 745f 6974 5f72 6169 7365  def but_it_raise
-00013f90: 735f 7768 656e 5f65 6c65 6d65 6e74 5f69  s_when_element_i
-00013fa0: 645f 6e6f 745f 7072 6573 656e 7428 7365  d_not_present(se
-00013fb0: 6c66 2c20 5f6f 7264 6572 5f64 6963 745f  lf, _order_dict_
-00013fc0: 7072 6f70 5f29 3a00 0020 2020 2020 2020  prop_):..       
-00013fd0: 2061 7373 6572 7420 5f4f 7264 6572 5370   assert _OrderSp
-00013fe0: 6563 284e 6f6e 652c 204e 6f6e 6529 2e65  ec(None, None).e
-00013ff0: 6c65 6d65 6e74 5f69 6420 3d3d 2034 3200  lement_id == 42.
-00014000: 6164 0000 3a00 0000 da01 0000 0010 0000  ad..:...........
-00014010: 6100 0000 0000 0000 bb0f 0000 ba0f 0000  a...............
-00014020: 760f 0000 440f 0000 190f 0000 180f 0000  v...D...........
-00014030: f70e 0000 cf0e 0000 ac0e 0000 750e 0000  ............u...
-00014040: 740e 0000 1e0e 0000 e80d 0000 b20d 0000  t...............
-00014050: b10d 0000 840d 0000 830d 0000 5b0d 0000  ............[...
-00014060: 5a0d 0000 3c0d 0000 040d 0000 fa0c 0000  Z...<...........
-00014070: e00c 0000 b40c 0000 800c 0000 400c 0000  ............@...
-00014080: 000c 0000 ae0b 0000 5f0b 0000 510b 0000  ........_...Q...
-00014090: fb0a 0000 e30a 0000 cf0a 0000 c00a 0000  ................
-000140a0: b20a 0000 a00a 0000 480a 0000 f009 0000  ........H.......
-000140b0: 9809 0000 8509 0000 6309 0000 5109 0000  ........c...Q...
-000140c0: f908 0000 a108 0000 8e08 0000 7f08 0000  ................
-000140d0: 7408 0000 6e08 0000 1808 0000 c907 0000  t...n...........
-000140e0: c207 0000 8c07 0000 5607 0000 5507 0000  ........V...U...
-000140f0: 0e07 0000 0d07 0000 dd06 0000 dc06 0000  ................
-00014100: 9406 0000 5906 0000 3d06 0000 2f06 0000  ....Y...=.../...
-00014110: 0706 0000 ea05 0000 cd05 0000 a305 0000  ................
-00014120: 9405 0000 8605 0000 5e05 0000 4105 0000  ........^...A...
-00014130: 2405 0000 f704 0000 bf04 0000 b004 0000  $...............
-00014140: a204 0000 7a04 0000 5d04 0000 3004 0000  ....z...]...0...
-00014150: 0704 0000 f803 0000 ea03 0000 c203 0000  ................
-00014160: a503 0000 7803 0000 4c03 0000 3d03 0000  ....x...L...=...
-00014170: 2f03 0000 0703 0000 ea02 0000 ac02 0000  /...............
-00014180: 7202 0000 6302 0000 5902 0000 2302 0000  r...c...Y...#...
-00014190: 2202 0000 db01 0000 da01 0000 d901 0000  "...............
-000141a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000141b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000141c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000141d0: 0000 0000 0000 0000 0000 0020 2020 2020  ...........     
-000141e0: 2020 2073 7562 746f 7461 6c5f 6469 6374     subtotal_dict
-000141f0: 7320 3d20 7475 706c 6528 7375 6274 6f74  s = tuple(subtot
-00014200: 616c 732e 5f69 7465 725f 7661 6c69 645f  als._iter_valid_
-00014210: 7375 6274 6f74 616c 5f64 6963 7473 2829  subtotal_dicts()
-00014220: 2900 0020 2020 2020 2020 2073 7562 746f  )..        subto
-00014230: 7461 6c73 203d 205f 5375 6274 6f74 616c  tals = _Subtotal
-00014240: 7328 696e 7365 7274 696f 6e5f 6469 6374  s(insertion_dict
-00014250: 732c 204e 6f6e 6529 0020 2020 2020 2020  s, None).       
-00014260: 205d 0020 2020 2020 2020 2020 2020 207d   ].            }
-00014270: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-00014280: 2020 226e 616d 6522 3a20 226e 6577 2073    "name": "new s
-00014290: 7479 6c65 206b 7761 7267 7320 7769 7468  tyle kwargs with
-000142a0: 206e 6567 6174 6976 6522 2c00 2020 2020   negative",.    
-000142b0: 2020 2020 2020 2020 2020 2020 226b 7761              "kwa
-000142c0: 7267 7322 3a20 7b22 706f 7369 7469 7665  rgs": {"positive
-000142d0: 223a 205b 315d 2c20 226e 6567 6174 6976  ": [1], "negativ
-000142e0: 6522 3a20 5b32 5d7d 2c00 2020 2020 2020  e": [2]},.      
-000142f0: 2020 2020 2020 2020 2020 2261 6e63 686f            "ancho
-00014300: 7222 3a20 392c 0020 2020 2020 2020 2020  r": 9,.         
-00014310: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-00014320: 223a 2022 7375 6274 6f74 616c 222c 0020  ": "subtotal",. 
-00014330: 2020 2020 2020 2020 2020 207b 0020 2020             {.   
-00014340: 2020 2020 2020 2020 207d 2c00 2020 2020           },.    
-00014350: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
-00014360: 6522 3a20 226e 6577 2073 7479 6c65 206b  e": "new style k
-00014370: 7761 7267 7322 2c00 2020 2020 2020 2020  wargs",.        
-00014380: 2020 2020 2020 2020 226b 7761 7267 7322          "kwargs"
-00014390: 3a20 7b22 706f 7369 7469 7665 223a 205b  : {"positive": [
-000143a0: 315d 7d2c 0020 2020 2020 2020 2020 2020  1]},.           
-000143b0: 2020 2020 2022 616e 6368 6f72 223a 2039       "anchor": 9
-000143c0: 2c00 2020 2020 2020 2020 2020 2020 2020  ,.              
-000143d0: 2020 2266 756e 6374 696f 6e22 3a20 2273    "function": "s
-000143e0: 7562 746f 7461 6c22 2c00 2020 2020 2020  ubtotal",.      
-000143f0: 2020 2020 2020 7b00 2020 2020 2020 2020        {.        
-00014400: 2020 2020 7d2c 0020 2020 2020 2020 2020      },.         
-00014410: 2020 2020 2020 2022 6e61 6d65 223a 2022         "name": "
-00014420: 6e65 6761 7469 7665 206f 6e6c 7922 2c00  negative only",.
-00014430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014440: 226b 7761 7267 7322 3a20 7b22 6e65 6761  "kwargs": {"nega
-00014450: 7469 7665 223a 205b 325d 7d2c 0020 2020  tive": [2]},.   
-00014460: 2020 2020 2020 2020 2020 2020 2022 616e               "an
-00014470: 6368 6f72 223a 2039 2c00 2020 2020 2020  chor": 9,.      
-00014480: 2020 2020 2020 2020 2020 2266 756e 6374            "funct
-00014490: 696f 6e22 3a20 2273 7562 746f 7461 6c22  ion": "subtotal"
-000144a0: 2c00 2020 2020 2020 2020 2020 2020 7b00  ,.            {.
-000144b0: 2020 2020 2020 2020 2020 2020 7d2c 0020              },. 
-000144c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000144d0: 6e61 6d65 223a 2022 6f6c 6420 7374 796c  name": "old styl
-000144e0: 6520 6172 6773 2077 6974 6820 6e65 6761  e args with nega
-000144f0: 7469 7665 222c 0020 2020 2020 2020 2020  tive",.         
-00014500: 2020 2020 2020 2022 6b77 6172 6773 223a         "kwargs":
-00014510: 207b 226e 6567 6174 6976 6522 3a20 5b32   {"negative": [2
-00014520: 5d7d 2c00 2020 2020 2020 2020 2020 2020  ]},.            
-00014530: 2020 2020 2261 7267 7322 3a20 5b31 5d2c      "args": [1],
-00014540: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00014550: 2022 616e 6368 6f72 223a 2039 2c00 2020   "anchor": 9,.  
-00014560: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-00014570: 756e 6374 696f 6e22 3a20 2273 7562 746f  unction": "subto
-00014580: 7461 6c22 2c00 2020 2020 2020 2020 2020  tal",.          
-00014590: 2020 7b00 2020 2020 2020 2020 2020 2020    {.            
-000145a0: 7d2c 0020 2020 2020 2020 2020 2020 2020  },.             
-000145b0: 2020 2022 6e61 6d65 223a 2022 6f6c 6420     "name": "old 
-000145c0: 7374 796c 6520 6172 6773 222c 0020 2020  style args",.   
-000145d0: 2020 2020 2020 2020 2020 2020 2022 6172               "ar
-000145e0: 6773 223a 205b 315d 2c00 2020 2020 2020  gs": [1],.      
-000145f0: 2020 2020 2020 2020 2020 2261 6e63 686f            "ancho
-00014600: 7222 3a20 392c 0020 2020 2020 2020 2020  r": 9,.         
-00014610: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-00014620: 223a 2022 7375 6274 6f74 616c 222c 0020  ": "subtotal",. 
-00014630: 2020 2020 2020 2020 2020 207b 0020 2020             {.   
-00014640: 2020 2020 2069 6e73 6572 7469 6f6e 5f64       insertion_d
-00014650: 6963 7473 203d 205b 0020 2020 2020 2020  icts = [.       
-00014660: 205f 656c 656d 656e 745f 6964 735f 7072   _element_ids_pr
-00014670: 6f70 5f2e 7265 7475 726e 5f76 616c 7565  op_.return_value
-00014680: 203d 207b 312c 2032 2c20 352c 2038 2c20   = {1, 2, 5, 8, 
-00014690: 2d31 7d00 2020 2020 6465 6620 6275 745f  -1}.    def but_
-000146a0: 6974 5f61 6363 6570 7473 5f76 616c 6964  it_accepts_valid
-000146b0: 5f69 6e73 6572 7469 6f6e 5f64 6963 7473  _insertion_dicts
-000146c0: 2873 656c 662c 205f 656c 656d 656e 745f  (self, _element_
-000146d0: 6964 735f 7072 6f70 5f29 3a00 0020 2020  ids_prop_):..   
-000146e0: 2020 2020 2061 7373 6572 7420 7375 6274       assert subt
-000146f0: 6f74 616c 5f64 6963 7473 203d 3d20 6578  otal_dicts == ex
-00014700: 7065 6374 6564 5f76 616c 7565 0000 2020  pected_value..  
-00014710: 2020 2020 2020 7375 6274 6f74 616c 5f64        subtotal_d
-00014720: 6963 7473 203d 2074 7570 6c65 2873 7562  icts = tuple(sub
-00014730: 746f 7461 6c73 2e5f 6974 6572 5f76 616c  totals._iter_val
-00014740: 6964 5f73 7562 746f 7461 6c5f 6469 6374  id_subtotal_dict
-00014750: 7328 2929 0000 2020 2020 2020 2020 7375  s())..        su
-00014760: 6274 6f74 616c 7320 3d20 5f53 7562 746f  btotals = _Subto
-00014770: 7461 6c73 2869 6e73 6572 7469 6f6e 5f64  tals(insertion_d
-00014780: 6963 7473 2c20 4e6f 6e65 2900 2020 2020  icts, None).    
-00014790: 2020 2020 5f65 6c65 6d65 6e74 5f69 6473      _element_ids
-000147a0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
-000147b0: 6c75 6520 3d20 656c 656d 656e 745f 6964  lue = element_id
-000147c0: 7300 2020 2020 293a 0020 2020 2020 2020  s.    ):.       
-000147d0: 2073 656c 662c 205f 656c 656d 656e 745f   self, _element_
-000147e0: 6964 735f 7072 6f70 5f2c 2069 6e73 6572  ids_prop_, inser
-000147f0: 7469 6f6e 5f64 6963 7473 2c20 656c 656d  tion_dicts, elem
-00014800: 656e 745f 6964 732c 2065 7870 6563 7465  ent_ids, expecte
-00014810: 645f 7661 6c75 6500 2020 2020 6465 6620  d_value.    def 
-00014820: 6974 5f72 656d 6f76 6573 5f69 6e76 616c  it_removes_inval
-00014830: 6964 5f77 6865 6e5f 6974 6572 6174 696e  id_when_iteratin
-00014840: 675f 7468 655f 7661 6c69 645f 7375 6274  g_the_valid_subt
-00014850: 6f74 616c 5f69 6e73 6572 7469 6f6e 5f64  otal_insertion_d
-00014860: 6963 7473 5f74 6f5f 6865 6c70 2800 2020  icts_to_help(.  
-00014870: 2020 2900 2020 2020 2020 2020 292c 0020    ).        ),. 
-00014880: 2020 2020 2020 2020 2020 2029 2c00 2020             ),.  
-00014890: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-000148a0: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-000148b0: 2020 2020 207b 2266 756e 6374 696f 6e22       {"function"
-000148c0: 3a20 2273 7562 746f 7461 6c22 2c20 2261  : "subtotal", "a
-000148d0: 6e63 686f 7222 3a20 392c 2022 6172 6773  nchor": 9, "args
-000148e0: 223a 205b 352c 2036 5d2c 2022 6e61 6d65  ": [5, 6], "name
-000148f0: 223a 2022 4422 7d2c 0020 2020 2020 2020  ": "D"},.       
-00014900: 2020 2020 2020 2020 2020 2020 207b 2266               {"f
-00014910: 756e 6374 696f 6e22 3a20 2273 7562 746f  unction": "subto
-00014920: 7461 6c22 2c20 2261 6e63 686f 7222 3a20  tal", "anchor": 
-00014930: 392c 2022 6172 6773 223a 205b 312c 2032  9, "args": [1, 2
-00014940: 5d2c 2022 6e61 6d65 223a 2022 4322 7d2c  ], "name": "C"},
-00014950: 0020 2020 2020 2020 2020 2020 2020 2020  .               
-00014960: 2028 0020 2020 2020 2020 2020 2020 2020   (.             
-00014970: 2020 207b 312c 2032 2c20 352c 2038 2c20     {1, 2, 5, 8, 
-00014980: 2d31 7d2c 0020 2020 2020 2020 2020 2020  -1},.           
-00014990: 2020 2020 205d 2c00 2020 2020 2020 2020       ],.        
-000149a0: 2020 2020 2020 2020 2020 2020 7b22 6675              {"fu
-000149b0: 6e63 7469 6f6e 223a 2022 7375 6274 6f74  nction": "subtot
-000149c0: 616c 222c 2022 616e 6368 6f72 223a 2039  al", "anchor": 9
-000149d0: 2c20 2261 7267 7322 3a20 5b35 2c20 365d  , "args": [5, 6]
-000149e0: 2c20 226e 616d 6522 3a20 2244 227d 2c00  , "name": "D"},.
-000149f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a00: 2020 2020 7b22 6675 6e63 7469 6f6e 223a      {"function":
-00014a10: 2022 7375 6274 6f74 616c 222c 2022 616e   "subtotal", "an
-00014a20: 6368 6f72 223a 2039 2c20 2261 7267 7322  chor": 9, "args"
-00014a30: 3a20 5b33 2c20 345d 2c20 226e 616d 6522  : [3, 4], "name"
-00014a40: 3a20 225a 227d 2c00 2020 2020 2020 2020  : "Z"},.        
-00014a50: 2020 2020 2020 2020 2020 2020 7b22 6675              {"fu
-00014a60: 6e63 7469 6f6e 223a 2022 7375 6274 6f74  nction": "subtot
-00014a70: 616c 222c 2022 616e 6368 6f72 223a 2039  al", "anchor": 9
-00014a80: 2c20 2261 7267 7322 3a20 5b31 2c20 325d  , "args": [1, 2]
-00014a90: 2c20 226e 616d 6522 3a20 2243 227d 2c00  , "name": "C"},.
-00014aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ab0: 5b00 2020 2020 2020 2020 2020 2020 2800  [.            (.
-00014ac0: 2020 2020 2020 2020 2020 2020 292c 0020              ),. 
-00014ad0: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-00014ae0: 292c 0020 2020 2020 2020 2020 2020 2020  ),.             
-00014af0: 2020 207b 332c 2034 7d2c 0020 2020 2020     {3, 4},.     
-00014b00: 2020 2020 2020 2020 2020 205b 7b22 6675             [{"fu
-00014b10: 6e63 7469 6f6e 223a 2022 7375 6274 6f74  nction": "subtot
-00014b20: 616c 222c 2022 616e 6368 6f72 223a 2039  al", "anchor": 9
-00014b30: 2c20 2261 7267 7322 3a20 5b31 2c20 325d  , "args": [1, 2]
-00014b40: 2c20 226e 616d 6522 3a20 2241 227d 5d2c  , "name": "A"}],
-00014b50: 0020 2020 2020 2020 2020 2020 2028 0020  .            (. 
-00014b60: 2020 2020 2020 2020 2020 2028 5b7b 2266             ([{"f
-00014b70: 756e 6374 696f 6e22 3a20 2273 7562 746f  unction": "subto
-00014b80: 7461 6c22 2c20 2261 6e63 686f 7222 3a20  tal", "anchor": 
-00014b90: 392c 2022 6172 6773 223a 205b 312c 2032  9, "args": [1, 2
-00014ba0: 5d7d 5d2c 2028 292c 2028 2929 2c00 2020  ]}], (), ()),.  
-00014bb0: 2020 2020 2020 2020 2020 285b 7b22 6675            ([{"fu
-00014bc0: 6e63 7469 6f6e 223a 2022 7375 6274 6f74  nction": "subtot
-00014bd0: 616c 222c 2022 616e 6368 6f72 223a 2039  al", "anchor": 9
-00014be0: 2c20 226e 616d 6522 3a20 226e 6f20 6172  , "name": "no ar
-00014bf0: 6773 227d 5d2c 2028 292c 2028 2929 2c00  gs"}], (), ()),.
-00014c00: 2020 2020 2020 2020 2020 2020 285b 7b22              ([{"
-00014c10: 6675 6e63 7469 6f6e 223a 2022 7375 6274  function": "subt
-00014c20: 6f74 616c 222c 2022 6172 6768 6873 223a  otal", "arghhs":
-00014c30: 205b 5d7d 5d2c 2028 292c 2028 2929 2c00   []}], (), ()),.
-00014c40: 2020 2020 2020 2020 2020 2020 285b 7b22              ([{"
-00014c50: 6675 6e63 7469 6f6e 223a 2022 7375 6274  function": "subt
-00014c60: 6f74 616c 222c 2022 6869 6465 223a 2054  otal", "hide": T
-00014c70: 7275 657d 5d2c 2028 292c 2028 2929 2c00  rue}], (), ()),.
-00014c80: 2020 2020 2020 2020 2020 2020 285b 7b22              ([{"
-00014c90: 6675 6e63 7469 6f6e 223a 2022 6879 7065  function": "hype
-00014ca0: 7264 7269 7665 227d 5d2c 2028 292c 2028  rdrive"}], (), (
-00014cb0: 2929 2c00 2020 2020 2020 2020 2020 2020  )),.            
-00014cc0: 285b 226e 6f74 2d61 2d64 6963 7422 2c20  (["not-a-dict", 
-00014cd0: 4e6f 6e65 5d2c 2028 292c 2028 2929 2c00  None], (), ()),.
-00014ce0: 2020 2020 2020 2020 2020 2020 285b 5d2c              ([],
-00014cf0: 2028 292c 2028 2929 2c00 2020 2020 2020   (), ()),.      
-00014d00: 2020 2800 2020 2020 2020 2020 2269 6e73    (.        "ins
-00014d10: 6572 7469 6f6e 5f64 6963 7473 2c20 656c  ertion_dicts, el
-00014d20: 656d 656e 745f 6964 732c 2065 7870 6563  ement_ids, expec
-00014d30: 7465 645f 7661 6c75 6522 2c00 2020 2020  ted_value",.    
-00014d40: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-00014d50: 616d 6574 7269 7a65 2800 0020 2020 2020  ametrize(..     
-00014d60: 2020 2061 7373 6572 7420 656c 656d 656e     assert elemen
-00014d70: 745f 6964 7320 3d3d 207b 302c 2031 2c20  t_ids == {0, 1, 
-00014d80: 327d 0000 2020 2020 2020 2020 656c 656d  2}..        elem
-00014d90: 656e 745f 6964 7320 3d20 7375 6274 6f74  ent_ids = subtot
-00014da0: 616c 732e 5f65 6c65 6d65 6e74 5f69 6473  als._element_ids
-00014db0: 0000 2020 2020 2020 2020 7375 6274 6f74  ..        subtot
-00014dc0: 616c 7320 3d20 5f53 7562 746f 7461 6c73  als = _Subtotals
-00014dd0: 284e 6f6e 652c 2076 616c 6964 5f65 6c65  (None, valid_ele
-00014de0: 6d65 6e74 735f 2900 2020 2020 2020 2020  ments_).        
-00014df0: 7661 6c69 645f 656c 656d 656e 7473 5f2e  valid_elements_.
-00014e00: 656c 656d 656e 745f 6964 7320 3d20 7475  element_ids = tu
-00014e10: 706c 6528 7261 6e67 6528 3329 2900 2020  ple(range(3)).  
-00014e20: 2020 6465 6620 6974 5f70 726f 7669 6465    def it_provide
-00014e30: 735f 7468 655f 656c 656d 656e 745f 6964  s_the_element_id
-00014e40: 735f 6173 5f61 5f73 6574 5f74 6f5f 6865  s_as_a_set_to_he
-00014e50: 6c70 2873 656c 662c 2072 6571 7565 7374  lp(self, request
-00014e60: 2c20 7661 6c69 645f 656c 656d 656e 7473  , valid_elements
-00014e70: 5f29 3a00 0020 2020 2020 2020 2061 7373  _):..        ass
-00014e80: 6572 7420 6c69 7374 286e 2066 6f72 206e  ert list(n for n
-00014e90: 2069 6e20 7375 6274 6f74 616c 7329 203d   in subtotals) =
-00014ea0: 3d20 5b31 2c20 322c 2033 5d00 2020 2020  = [1, 2, 3].    
-00014eb0: 2020 2020 6173 7365 7274 206c 656e 2873      assert len(s
-00014ec0: 7562 746f 7461 6c73 2920 3d3d 2033 0020  ubtotals) == 3. 
-00014ed0: 2020 2020 2020 2061 7373 6572 7420 7375         assert su
-00014ee0: 6274 6f74 616c 735b 313a 335d 203d 3d20  btotals[1:3] == 
-00014ef0: 2832 2c20 3329 0020 2020 2020 2020 2061  (2, 3).        a
-00014f00: 7373 6572 7420 7375 6274 6f74 616c 735b  ssert subtotals[
-00014f10: 315d 203d 3d20 3200 0020 2020 2020 2020  1] == 2..       
-00014f20: 2073 7562 746f 7461 6c73 203d 205f 5375   subtotals = _Su
-00014f30: 6274 6f74 616c 7328 4e6f 6e65 2c20 4e6f  btotals(None, No
-00014f40: 6e65 2900 2020 2020 2020 2020 5f73 7562  ne).        _sub
-00014f50: 746f 7461 6c73 5f70 726f 705f 2e72 6574  totals_prop_.ret
-00014f60: 7572 6e5f 7661 6c75 6520 3d20 2831 2c20  urn_value = (1, 
-00014f70: 322c 2033 2900 2020 2020 6465 6620 6974  2, 3).    def it
-00014f80: 5f68 6173 5f73 6571 7565 6e63 655f 6265  _has_sequence_be
-00014f90: 6861 7669 6f72 7328 7365 6c66 2c20 7265  haviors(self, re
-00014fa0: 7175 6573 742c 205f 7375 6274 6f74 616c  quest, _subtotal
-00014fb0: 735f 7072 6f70 5f29 3a00 0020 2020 2022  s_prop_):..    "
-00014fc0: 2222 556e 6974 2d74 6573 7420 7375 6974  ""Unit-test suit
-00014fd0: 6520 666f 7220 6063 722e 6375 6265 2e64  e for `cr.cube.d
-00014fe0: 696d 656e 7369 6f6e 2e5f 5375 6274 6f74  imension._Subtot
-00014ff0: 616c 7360 206f 626a 6563 742e 2222 2200  als` object.""".
-00015000: 6164 0000 1500 0000 d501 0000 0010 0000  ad..............
-00015010: 6900 0000 0000 0000 c80f 0000 c70f 0000  i...............
-00015020: 930f 0000 430f 0000 3c0f 0000 f00e 0000  ....C...<.......
-00015030: d00e 0000 880e 0000 680e 0000 5e0e 0000  ........h...^...
-00015040: 150e 0000 df0d 0000 a90d 0000 a80d 0000  ................
-00015050: 7b0d 0000 7a0d 0000 4c0d 0000 120d 0000  {...z...L.......
-00015060: d80c 0000 9e0c 0000 940c 0000 650c 0000  ............e...
-00015070: 640c 0000 1d0c 0000 1c0c 0000 080c 0000  d...............
-00015080: dd0b 0000 9b0b 0000 9a0b 0000 860b 0000  ................
-00015090: 520b 0000 040b 0000 030b 0000 ef0a 0000  R...............
-000150a0: cc0a 0000 8a0a 0000 890a 0000 750a 0000  ............u...
-000150b0: 4c0a 0000 0c0a 0000 0b0a 0000 f709 0000  L...............
-000150c0: cf09 0000 9909 0000 9809 0000 9709 0000  ................
-000150d0: 7e09 0000 3a09 0000 3909 0000 1b09 0000  ~...:...9.......
-000150e0: e608 0000 dc08 0000 b808 0000 8808 0000  ................
-000150f0: 5808 0000 2808 0000 f607 0000 eb07 0000  X...(...........
-00015100: e507 0000 c307 0000 b507 0000 a007 0000  ................
-00015110: 8907 0000 7007 0000 5907 0000 4507 0000  ....p...Y...E...
-00015120: 2d07 0000 2607 0000 f806 0000 e206 0000  -...&...........
-00015130: b506 0000 8806 0000 5b06 0000 2e06 0000  ........[.......
-00015140: 0006 0000 f605 0000 b805 0000 7b05 0000  ............{...
-00015150: 3905 0000 3805 0000 0d05 0000 0c05 0000  9...8...........
-00015160: c204 0000 c104 0000 a304 0000 6d04 0000  ............m...
-00015170: 6304 0000 3804 0000 0604 0000 d303 0000  c...8...........
-00015180: 9903 0000 6403 0000 5903 0000 5303 0000  ....d...Y...S...
-00015190: 2c03 0000 e202 0000 db02 0000 a902 0000  ,...............
-000151a0: 6602 0000 6502 0000 3402 0000 3302 0000  f...e...4...3...
-000151b0: 1502 0000 df01 0000 d501 0000 d401 0000  ................
-000151c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000151d0: 0000 0000 0020 2020 2020 2020 2028 0020  .....        (. 
-000151e0: 2020 2020 2020 2022 7375 6274 6f74 616c         "subtotal
-000151f0: 5f64 6963 742c 2065 6c65 6d65 6e74 5f69  _dict, element_i
-00015200: 6473 2c20 6578 7065 6374 6564 5f76 616c  ds, expected_val
-00015210: 7565 222c 0020 2020 2040 7079 7465 7374  ue",.    @pytest
-00015220: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-00015230: 6528 0000 2020 2020 2020 2020 6173 7365  e(..        asse
-00015240: 7274 2073 7562 746f 7461 6c2e 616e 6368  rt subtotal.anch
-00015250: 6f72 203d 3d20 6578 7065 6374 6564 5f76  or == expected_v
-00015260: 616c 7565 0000 2020 2020 2020 2020 7375  alue..        su
-00015270: 6274 6f74 616c 203d 205f 5375 6274 6f74  btotal = _Subtot
-00015280: 616c 2873 7562 746f 7461 6c5f 6469 6374  al(subtotal_dict
-00015290: 2c20 7661 6c69 645f 656c 656d 656e 7473  , valid_elements
-000152a0: 5f2c 204e 6f6e 6529 0020 2020 2020 2020  _, None).       
-000152b0: 2076 616c 6964 5f65 6c65 6d65 6e74 735f   valid_elements_
-000152c0: 2e65 6c65 6d65 6e74 5f69 6473 203d 2065  .element_ids = e
-000152d0: 6c65 6d65 6e74 5f69 6473 0020 2020 2029  lement_ids.    )
-000152e0: 3a00 2020 2020 2020 2020 7365 6c66 2c20  :.        self, 
-000152f0: 7375 6274 6f74 616c 5f64 6963 742c 2065  subtotal_dict, e
-00015300: 6c65 6d65 6e74 5f69 6473 2c20 6578 7065  lement_ids, expe
-00015310: 6374 6564 5f76 616c 7565 2c20 7661 6c69  cted_value, vali
-00015320: 645f 656c 656d 656e 7473 5f00 2020 2020  d_elements_.    
-00015330: 6465 6620 6974 5f6b 6e6f 7773 5f74 6865  def it_knows_the
-00015340: 5f69 6e73 6572 7469 6f6e 5f61 6e63 686f  _insertion_ancho
-00015350: 7228 0020 2020 2029 0020 2020 2020 2020  r(.    ).       
-00015360: 2029 2c00 2020 2020 2020 2020 2020 2020   ),.            
-00015370: 287b 2261 6e63 686f 7222 3a20 4e6f 6e65  ({"anchor": None
-00015380: 7d2c 207b 312c 2032 2c20 337d 2c20 2262  }, {1, 2, 3}, "b
-00015390: 6f74 746f 6d22 292c 0020 2020 2020 2020  ottom"),.       
-000153a0: 2020 2020 2023 2046 6f72 2061 6e20 756e       # For an un
-000153b0: 6465 6669 6e65 6420 616e 6368 6f72 2064  defined anchor d
-000153c0: 6566 6175 6c74 2074 6f20 2262 6f74 746f  efault to "botto
-000153d0: 6d22 0020 2020 2020 2020 2020 2020 2028  m".            (
-000153e0: 7b22 616e 6368 6f72 223a 2022 546f 7022  {"anchor": "Top"
-000153f0: 7d2c 207b 312c 2032 2c20 337d 2c20 2274  }, {1, 2, 3}, "t
-00015400: 6f70 2229 2c00 2020 2020 2020 2020 2020  op"),.          
-00015410: 2020 287b 2261 6e63 686f 7222 3a20 347d    ({"anchor": 4}
-00015420: 2c20 7b31 2c20 322c 2033 7d2c 2022 626f  , {1, 2, 3}, "bo
-00015430: 7474 6f6d 2229 2c00 2020 2020 2020 2020  ttom"),.        
-00015440: 2020 2020 287b 2261 6e63 686f 7222 3a20      ({"anchor": 
-00015450: 317d 2c20 7b31 2c20 322c 2033 7d2c 2031  1}, {1, 2, 3}, 1
-00015460: 292c 0020 2020 2020 2020 2028 0020 2020  ),.        (.   
-00015470: 2020 2020 2022 7375 6274 6f74 616c 5f64       "subtotal_d
-00015480: 6963 742c 2065 6c65 6d65 6e74 5f69 6473  ict, element_ids
-00015490: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
-000154a0: 222c 0020 2020 2040 7079 7465 7374 2e6d  ",.    @pytest.m
-000154b0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-000154c0: 0000 2020 2020 2020 2020 6e70 2e74 6573  ..        np.tes
-000154d0: 7469 6e67 2e61 7373 6572 745f 6172 7261  ting.assert_arra
-000154e0: 795f 616c 6d6f 7374 5f65 7175 616c 2861  y_almost_equal(a
-000154f0: 6464 656e 645f 6964 7873 2c20 6578 7065  ddend_idxs, expe
-00015500: 6374 6564 5f76 616c 7565 2900 0020 2020  cted_value)..   
-00015510: 2020 2020 2061 6464 656e 645f 6964 7873       addend_idxs
-00015520: 203d 2073 7562 746f 7461 6c2e 6164 6465   = subtotal.adde
-00015530: 6e64 5f69 6478 7300 0020 2020 2020 2020  nd_idxs..       
-00015540: 2073 7562 746f 7461 6c20 3d20 5f53 7562   subtotal = _Sub
-00015550: 746f 7461 6c28 7375 6274 6f74 616c 5f64  total(subtotal_d
-00015560: 6963 742c 2076 616c 6964 5f65 6c65 6d65  ict, valid_eleme
-00015570: 6e74 732c 204e 6f6e 6529 0020 2020 2020  nts, None).     
-00015580: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
-00015590: 7320 3d20 5f56 616c 6964 456c 656d 656e  s = _ValidElemen
-000155a0: 7473 2861 6c6c 5f65 6c65 6d65 6e74 735f  ts(all_elements_
-000155b0: 2c20 4e6f 6e65 2900 2020 2020 2020 2020  , None).        
-000155c0: 616c 6c5f 656c 656d 656e 7473 5f2e 5f5f  all_elements_.__
-000155d0: 6974 6572 5f5f 2e72 6574 7572 6e5f 7661  iter__.return_va
-000155e0: 6c75 6520 3d20 6974 6572 2865 6c65 6d65  lue = iter(eleme
-000155f0: 6e74 735f 2900 2020 2020 2020 2020 2900  nts_).        ).
-00015600: 2020 2020 2020 2020 2020 2020 5f45 6c65              _Ele
-00015610: 6d65 6e74 287b 2269 6422 3a20 3939 7d2c  ment({"id": 99},
-00015620: 204e 6f6e 652c 204e 6f6e 6529 2c00 2020   None, None),.  
-00015630: 2020 2020 2020 2020 2020 5f45 6c65 6d65            _Eleme
-00015640: 6e74 287b 2269 6422 3a20 347d 2c20 4e6f  nt({"id": 4}, No
-00015650: 6e65 2c20 4e6f 6e65 292c 0020 2020 2020  ne, None),.     
-00015660: 2020 2020 2020 205f 456c 656d 656e 7428         _Element(
-00015670: 7b22 6964 223a 2033 7d2c 204e 6f6e 652c  {"id": 3}, None,
-00015680: 204e 6f6e 6529 2c00 2020 2020 2020 2020   None),.        
-00015690: 2020 2020 5f45 6c65 6d65 6e74 287b 2269      _Element({"i
-000156a0: 6422 3a20 327d 2c20 4e6f 6e65 2c20 4e6f  d": 2}, None, No
-000156b0: 6e65 292c 0020 2020 2020 2020 2020 2020  ne),.           
-000156c0: 205f 456c 656d 656e 7428 7b22 6964 223a   _Element({"id":
-000156d0: 2031 7d2c 204e 6f6e 652c 204e 6f6e 6529   1}, None, None)
-000156e0: 2c00 2020 2020 2020 2020 656c 656d 656e  ,.        elemen
-000156f0: 7473 5f20 3d20 2800 2020 2020 2020 2020  ts_ = (.        
-00015700: 6164 6465 6e64 5f69 6473 5f2e 7265 7475  addend_ids_.retu
-00015710: 726e 5f76 616c 7565 203d 2061 6464 656e  rn_value = adden
-00015720: 645f 6964 7300 2020 2020 293a 0020 2020  d_ids.    ):.   
-00015730: 2020 2020 2065 7870 6563 7465 645f 7661       expected_va
-00015740: 6c75 652c 0020 2020 2020 2020 2061 6464  lue,.        add
-00015750: 656e 645f 6964 732c 0020 2020 2020 2020  end_ids,.       
-00015760: 2073 7562 746f 7461 6c5f 6469 6374 2c00   subtotal_dict,.
-00015770: 2020 2020 2020 2020 7661 6c69 645f 656c          valid_el
-00015780: 656d 656e 7473 5f2c 0020 2020 2020 2020  ements_,.       
-00015790: 2061 6c6c 5f65 6c65 6d65 6e74 735f 2c00   all_elements_,.
-000157a0: 2020 2020 2020 2020 6164 6465 6e64 5f69          addend_i
-000157b0: 6473 5f2c 0020 2020 2020 2020 2073 656c  ds_,.        sel
-000157c0: 662c 0020 2020 2064 6566 2069 745f 6b6e  f,.    def it_kn
-000157d0: 6f77 735f 7468 655f 6164 6465 6e64 5f69  ows_the_addend_i
-000157e0: 6478 7328 0020 2020 2029 0020 2020 2020  dxs(.    ).     
-000157f0: 2020 2029 2c00 2020 2020 2020 2020 2020     ),.          
-00015800: 2020 287b 2261 7267 7322 3a20 5b34 2c20    ({"args": [4, 
-00015810: 3939 5d7d 2c20 2834 2c20 3939 292c 205b  99]}, (4, 99), [
-00015820: 332c 2034 5d29 2c00 2020 2020 2020 2020  3, 4]),.        
-00015830: 2020 2020 287b 2261 7267 7322 3a20 5b33      ({"args": [3
-00015840: 2c20 345d 7d2c 2028 332c 2034 292c 205b  , 4]}, (3, 4), [
-00015850: 322c 2033 5d29 2c00 2020 2020 2020 2020  2, 3]),.        
-00015860: 2020 2020 287b 2261 7267 7322 3a20 5b30      ({"args": [0
-00015870: 2c20 325d 7d2c 2028 312c 2032 292c 205b  , 2]}, (1, 2), [
-00015880: 302c 2031 5d29 2c00 2020 2020 2020 2020  0, 1]),.        
-00015890: 2020 2020 287b 2261 7267 7322 3a20 5b31      ({"args": [1
-000158a0: 2c20 325d 7d2c 2028 312c 2032 292c 205b  , 2]}, (1, 2), [
-000158b0: 302c 2031 5d29 2c00 2020 2020 2020 2020  0, 1]),.        
-000158c0: 2020 2020 287b 2261 7267 7322 3a20 5b5d      ({"args": []
-000158d0: 7d2c 2028 292c 205b 5d29 2c00 2020 2020  }, (), []),.    
-000158e0: 2020 2020 2800 2020 2020 2020 2020 2273      (.        "s
-000158f0: 7562 746f 7461 6c5f 6469 6374 2c20 6164  ubtotal_dict, ad
-00015900: 6465 6e64 5f69 6473 2c20 6578 7065 6374  dend_ids, expect
-00015910: 6564 5f76 616c 7565 222c 0020 2020 2040  ed_value",.    @
-00015920: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
-00015930: 6d65 7472 697a 6528 0000 2020 2020 2222  metrize(..    ""
-00015940: 2255 6e69 742d 7465 7374 2073 7569 7465  "Unit-test suite
-00015950: 2066 6f72 2060 6372 2e63 7562 652e 6469   for `cr.cube.di
-00015960: 6d65 6e73 696f 6e2e 5f53 7562 746f 7461  mension._Subtota
-00015970: 6c60 206f 626a 6563 742e 2222 2200 636c  l` object.""".cl
-00015980: 6173 7320 4465 7363 7269 6265 5f53 7562  ass Describe_Sub
-00015990: 746f 7461 6c3a 0000 0020 2020 2020 2020  total:...       
-000159a0: 2072 6574 7572 6e20 696e 7374 616e 6365   return instance
-000159b0: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
-000159c0: 5661 6c69 6445 6c65 6d65 6e74 7329 0020  ValidElements). 
-000159d0: 2020 2064 6566 2076 616c 6964 5f65 6c65     def valid_ele
-000159e0: 6d65 6e74 735f 2873 656c 662c 2072 6571  ments_(self, req
-000159f0: 7565 7374 293a 0020 2020 2040 7079 7465  uest):.    @pyte
-00015a00: 7374 2e66 6978 7475 7265 0000 2020 2020  st.fixture..    
-00015a10: 2020 2020 7265 7475 726e 2070 726f 7065      return prope
-00015a20: 7274 795f 6d6f 636b 2872 6571 7565 7374  rty_mock(request
-00015a30: 2c20 5f53 7562 746f 7461 6c73 2c20 225f  , _Subtotals, "_
-00015a40: 7375 6274 6f74 616c 7322 2900 2020 2020  subtotals").    
-00015a50: 6465 6620 5f73 7562 746f 7461 6c73 5f70  def _subtotals_p
-00015a60: 726f 705f 2873 656c 662c 2072 6571 7565  rop_(self, reque
-00015a70: 7374 293a 0020 2020 2040 7079 7465 7374  st):.    @pytest
-00015a80: 2e66 6978 7475 7265 0000 2020 2020 2020  .fixture..      
-00015a90: 2020 7265 7475 726e 2063 6c61 7373 5f6d    return class_m
-00015aa0: 6f63 6b28 7265 7175 6573 742c 2022 6372  ock(request, "cr
-00015ab0: 2e63 7562 652e 6469 6d65 6e73 696f 6e2e  .cube.dimension.
-00015ac0: 5f53 7562 746f 7461 6c22 2900 2020 2020  _Subtotal").    
-00015ad0: 6465 6620 5f53 7562 746f 7461 6c5f 2873  def _Subtotal_(s
-00015ae0: 656c 662c 2072 6571 7565 7374 293a 0020  elf, request):. 
-00015af0: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
-00015b00: 7265 0000 2020 2020 2020 2020 7265 7475  re..        retu
-00015b10: 726e 206d 6574 686f 645f 6d6f 636b 2872  rn method_mock(r
-00015b20: 6571 7565 7374 2c20 5f53 7562 746f 7461  equest, _Subtota
-00015b30: 6c73 2c20 225f 6974 6572 5f76 616c 6964  ls, "_iter_valid
-00015b40: 5f73 7562 746f 7461 6c5f 6469 6374 7322  _subtotal_dicts"
-00015b50: 2900 2020 2020 6465 6620 5f69 7465 725f  ).    def _iter_
-00015b60: 7661 6c69 645f 7375 6274 6f74 616c 5f64  valid_subtotal_d
-00015b70: 6963 7473 5f28 7365 6c66 2c20 7265 7175  icts_(self, requ
-00015b80: 6573 7429 3a00 2020 2020 4070 7974 6573  est):.    @pytes
-00015b90: 742e 6669 7874 7572 6500 0020 2020 2020  t.fixture..     
-00015ba0: 2020 2072 6574 7572 6e20 7072 6f70 6572     return proper
-00015bb0: 7479 5f6d 6f63 6b28 7265 7175 6573 742c  ty_mock(request,
-00015bc0: 205f 5375 6274 6f74 616c 732c 2022 5f65   _Subtotals, "_e
-00015bd0: 6c65 6d65 6e74 5f69 6473 2229 0020 2020  lement_ids").   
-00015be0: 2064 6566 205f 656c 656d 656e 745f 6964   def _element_id
-00015bf0: 735f 7072 6f70 5f28 7365 6c66 2c20 7265  s_prop_(self, re
-00015c00: 7175 6573 7429 3a00 2020 2020 4070 7974  quest):.    @pyt
-00015c10: 6573 742e 6669 7874 7572 6500 0020 2020  est.fixture..   
-00015c20: 2023 2066 6978 7475 7265 2063 6f6d 706f   # fixture compo
-00015c30: 6e65 6e74 7320 2d2d 2d2d 2d2d 2d2d 2d2d  nents ----------
-00015c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015c60: 2d2d 2d00 0020 2020 2020 2020 2061 7373  ---..        ass
-00015c70: 6572 7420 7375 6274 6f74 616c 5f6f 626a  ert subtotal_obj
-00015c80: 7320 3d3d 2073 7562 746f 7461 6c5f 6f62  s == subtotal_ob
-00015c90: 6a73 5f00 2020 2020 2020 2020 5d00 2020  js_.        ].  
-00015ca0: 2020 2020 2020 2020 2020 6361 6c6c 2873            call(s
-00015cb0: 7562 746f 7461 6c5f 6469 6374 735f 5b32  ubtotal_dicts_[2
-00015cc0: 5d2c 2076 616c 6964 5f65 6c65 6d65 6e74  ], valid_element
-00015cd0: 735f 2c20 3329 2c00 2020 2020 2020 2020  s_, 3),.        
-00015ce0: 2020 2020 6361 6c6c 2873 7562 746f 7461      call(subtota
-00015cf0: 6c5f 6469 6374 735f 5b31 5d2c 2076 616c  l_dicts_[1], val
-00015d00: 6964 5f65 6c65 6d65 6e74 735f 2c20 3229  id_elements_, 2)
-00015d10: 2c00 2020 2020 2020 2020 2020 2020 6361  ,.            ca
-00015d20: 6c6c 2873 7562 746f 7461 6c5f 6469 6374  ll(subtotal_dict
-00015d30: 735f 5b30 5d2c 2076 616c 6964 5f65 6c65  s_[0], valid_ele
-00015d40: 6d65 6e74 735f 2c20 3129 2c00 2020 2020  ments_, 1),.    
-00015d50: 2020 2020 6173 7365 7274 205f 5375 6274      assert _Subt
-00015d60: 6f74 616c 5f2e 6361 6c6c 5f61 7267 735f  otal_.call_args_
-00015d70: 6c69 7374 203d 3d20 5b00 0020 2020 2020  list == [..     
-00015d80: 2020 2073 7562 746f 7461 6c5f 6f62 6a73     subtotal_objs
-00015d90: 203d 2073 7562 746f 7461 6c73 2e5f 7375   = subtotals._su
-00015da0: 6274 6f74 616c 7300 0020 2020 2020 2020  btotals..       
-00015db0: 2073 7562 746f 7461 6c73 203d 205f 5375   subtotals = _Su
-00015dc0: 6274 6f74 616c 7328 4e6f 6e65 2c20 7661  btotals(None, va
-00015dd0: 6c69 645f 656c 656d 656e 7473 5f29 0020  lid_elements_). 
-00015de0: 2020 2020 2020 205f 5375 6274 6f74 616c         _Subtotal
-00015df0: 5f2e 7369 6465 5f65 6666 6563 7420 3d20  _.side_effect = 
-00015e00: 6974 6572 2873 7562 746f 7461 6c5f 6f62  iter(subtotal_ob
-00015e10: 6a73 5f29 0020 2020 2020 2020 205f 6974  js_).        _it
-00015e20: 6572 5f76 616c 6964 5f73 7562 746f 7461  er_valid_subtota
-00015e30: 6c5f 6469 6374 735f 2e72 6574 7572 6e5f  l_dicts_.return_
-00015e40: 7661 6c75 6520 3d20 6974 6572 2873 7562  value = iter(sub
-00015e50: 746f 7461 6c5f 6469 6374 735f 2900 2020  total_dicts_).  
-00015e60: 2020 2020 2020 2900 2020 2020 2020 2020        ).        
-00015e70: 2020 2020 666f 7220 6964 7820 696e 2072      for idx in r
-00015e80: 616e 6765 2833 2900 2020 2020 2020 2020  ange(3).        
-00015e90: 2020 2020 696e 7374 616e 6365 5f6d 6f63      instance_moc
-00015ea0: 6b28 7265 7175 6573 742c 205f 5375 6274  k(request, _Subt
-00015eb0: 6f74 616c 2c20 6e61 6d65 3d22 7375 6274  otal, name="subt
-00015ec0: 6f74 616c 2d25 6422 2025 2069 6478 2900  otal-%d" % idx).
-00015ed0: 2020 2020 2020 2020 7375 6274 6f74 616c          subtotal
-00015ee0: 5f6f 626a 735f 203d 2074 7570 6c65 2800  _objs_ = tuple(.
-00015ef0: 2020 2020 2020 2020 7375 6274 6f74 616c          subtotal
-00015f00: 5f64 6963 7473 5f20 3d20 7475 706c 6528  _dicts_ = tuple(
-00015f10: 7b22 7375 6274 6f74 616c 2d64 6963 7422  {"subtotal-dict"
-00015f20: 3a20 6964 787d 2066 6f72 2069 6478 2069  : idx} for idx i
-00015f30: 6e20 7261 6e67 6528 3329 2900 2020 2020  n range(3)).    
-00015f40: 293a 0020 2020 2020 2020 2073 656c 662c  ):.        self,
-00015f50: 2072 6571 7565 7374 2c20 5f69 7465 725f   request, _iter_
-00015f60: 7661 6c69 645f 7375 6274 6f74 616c 5f64  valid_subtotal_d
-00015f70: 6963 7473 5f2c 2076 616c 6964 5f65 6c65  icts_, valid_ele
-00015f80: 6d65 6e74 735f 2c20 5f53 7562 746f 7461  ments_, _Subtota
-00015f90: 6c5f 0020 2020 2064 6566 2069 745f 636f  l_.    def it_co
-00015fa0: 6e73 7472 7563 7473 5f69 7473 5f73 7562  nstructs_its_sub
-00015fb0: 746f 7461 6c5f 6f62 6a65 6374 735f 746f  total_objects_to
-00015fc0: 5f68 656c 7028 0000 2020 2020 2020 2020  _help(..        
-00015fd0: 6173 7365 7274 2073 7562 746f 7461 6c5f  assert subtotal_
-00015fe0: 6469 6374 7320 3d3d 2074 7570 6c65 2869  dicts == tuple(i
-00015ff0: 6e73 6572 7469 6f6e 5f64 6963 7473 2900  nsertion_dicts).
-00016000: 6164 0000 ea0e 0000 1e0f 0000 0010 0000  ad..............
-00016010: 0600 0000 0000 0000 d80f 0000 9c0f 0000  ................
-00016020: 960f 0000 570f 0000 1f0f 0000 1e0f 0000  ....W...........
-00016030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000160f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000161f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000162f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000163f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000164f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000165f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000166f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000167f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000168f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000169f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016e90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00016ef0: 0000 0000 0000 0000 0000 2020 2020 2020  ..........      
-00016f00: 2020 6173 7365 7274 2066 696c 6c20 3d3d    assert fill ==
-00016f10: 2065 7870 6563 7465 645f 6669 6c6c 0020   expected_fill. 
-00016f20: 2020 2020 2020 2073 7562 746f 7461 6c20         subtotal 
-00016f30: 3d20 5f53 7562 746f 7461 6c28 7375 6274  = _Subtotal(subt
-00016f40: 6f74 616c 5f64 6963 742c 204e 6f6e 652c  otal_dict, None,
-00016f50: 204e 6f6e 6529 0020 2020 2064 6566 2069   None).    def i
-00016f60: 745f 6b6e 6f77 735f 6974 735f 6669 6c6c  t_knows_its_fill
-00016f70: 2873 656c 662c 2073 7562 746f 7461 6c5f  (self, subtotal_
-00016f80: 6469 6374 2c20 6578 7065 6374 6564 5f66  dict, expected_f
-00016f90: 696c 6c29 3a00 2020 2020 2900 2020 2020  ill):.    ).    
-00016fa0: 2020 2020 2828 7b22 6669 6c6c 223a 2022      (({"fill": "
-00016fb0: 6661 6b65 5f66 696c 6c22 7d2c 2022 6661  fake_fill"}, "fa
-00016fc0: 6b65 5f66 696c 6c22 292c 2028 7b7d 2c20  ke_fill"), ({}, 
-00016fd0: 4e6f 6e65 2929 2c00 2020 2020 2020 2020  None)),.        
-00016fe0: 2273 7562 746f 7461 6c5f 6469 6374 2c20  "subtotal_dict, 
-00016ff0: 6578 7065 6374 6564 5f66 696c 6c22 2c00  expected_fill",.
+00000000: 2320 656e 636f 6469 6e67 3a20 7574 662d  # encoding: utf-
+00000010: 380a 0a22 2222 556e 6974 2074 6573 7420  8.."""Unit test 
+00000020: 7375 6974 6520 666f 7220 6372 2e63 7562  suite for cr.cub
+00000030: 652e 6469 6d65 6e73 696f 6e20 6d6f 6475  e.dimension modu
+00000040: 6c65 2e22 2222 0a0a 696d 706f 7274 206e  le."""..import n
+00000050: 756d 7079 2061 7320 6e70 0a69 6d70 6f72  umpy as np.impor
+00000060: 7420 7079 7465 7374 0a0a 6672 6f6d 2063  t pytest..from c
+00000070: 722e 6375 6265 2e64 696d 656e 7369 6f6e  r.cube.dimension
+00000080: 2069 6d70 6f72 7420 280a 2020 2020 416c   import (.    Al
+00000090: 6c44 696d 656e 7369 6f6e 732c 0a20 2020  lDimensions,.   
+000000a0: 205f 416c 6c45 6c65 6d65 6e74 732c 0a20   _AllElements,. 
+000000b0: 2020 205f 4170 7061 7265 6e74 4469 6d65     _ApparentDime
+000000c0: 6e73 696f 6e73 2c0a 2020 2020 5f42 6173  nsions,.    _Bas
+000000d0: 6544 696d 656e 7369 6f6e 732c 0a20 2020  eDimensions,.   
+000000e0: 205f 4261 7365 456c 656d 656e 7473 2c0a   _BaseElements,.
+000000f0: 2020 2020 4469 6d65 6e73 696f 6e2c 0a20      Dimension,. 
+00000100: 2020 205f 4469 6d65 6e73 696f 6e46 6163     _DimensionFac
+00000110: 746f 7279 2c0a 2020 2020 5f45 6c65 6d65  tory,.    _Eleme
+00000120: 6e74 4964 5368 696d 2c0a 2020 2020 5f45  ntIdShim,.    _E
+00000130: 6c65 6d65 6e74 2c0a 2020 2020 5f45 6c65  lement,.    _Ele
+00000140: 6d65 6e74 5472 616e 7366 6f72 6d73 2c0a  mentTransforms,.
+00000150: 2020 2020 5f4f 7264 6572 5370 6563 2c0a      _OrderSpec,.
+00000160: 2020 2020 5f52 6177 4469 6d65 6e73 696f      _RawDimensio
+00000170: 6e2c 0a20 2020 205f 5375 6274 6f74 616c  n,.    _Subtotal
+00000180: 2c0a 2020 2020 5f53 7562 746f 7461 6c73  ,.    _Subtotals
+00000190: 2c0a 2020 2020 5f56 616c 6964 456c 656d  ,.    _ValidElem
+000001a0: 656e 7473 2c0a 290a 6672 6f6d 2063 722e  ents,.).from cr.
+000001b0: 6375 6265 2e65 6e75 6d73 2069 6d70 6f72  cube.enums impor
+000001c0: 7420 280a 2020 2020 434f 4c4c 4154 494f  t (.    COLLATIO
+000001d0: 4e5f 4d45 5448 4f44 2061 7320 434d 2c0a  N_METHOD as CM,.
+000001e0: 2020 2020 4449 4d45 4e53 494f 4e5f 5459      DIMENSION_TY
+000001f0: 5045 2061 7320 4454 2c0a 2020 2020 4d41  PE as DT,.    MA
+00000200: 5247 494e 414c 2c0a 2020 2020 4d45 4153  RGINAL,.    MEAS
+00000210: 5552 452c 0a29 0a0a 6672 6f6d 202e 2e75  URE,.)..from ..u
+00000220: 6e69 7475 7469 6c20 696d 706f 7274 2028  nitutil import (
+00000230: 0a20 2020 2041 4e59 2c0a 2020 2020 6361  .    ANY,.    ca
+00000240: 6c6c 2c0a 2020 2020 636c 6173 735f 6d6f  ll,.    class_mo
+00000250: 636b 2c0a 2020 2020 696e 6974 6961 6c69  ck,.    initiali
+00000260: 7a65 725f 6d6f 636b 2c0a 2020 2020 696e  zer_mock,.    in
+00000270: 7374 616e 6365 5f6d 6f63 6b2c 0a20 2020  stance_mock,.   
+00000280: 206d 6574 686f 645f 6d6f 636b 2c0a 2020   method_mock,.  
+00000290: 2020 7072 6f70 6572 7479 5f6d 6f63 6b2c    property_mock,
+000002a0: 0a29 0a0a 0a63 6c61 7373 2044 6573 6372  .)...class Descr
+000002b0: 6962 655f 4261 7365 4469 6d65 6e73 696f  ibe_BaseDimensio
+000002c0: 6e73 3a0a 2020 2020 6465 6620 6974 5f68  ns:.    def it_h
+000002d0: 6173 5f73 6571 7565 6e63 655f 6265 6861  as_sequence_beha
+000002e0: 7669 6f72 7328 7365 6c66 2c20 5f64 696d  viors(self, _dim
+000002f0: 656e 7369 6f6e 735f 7072 6f70 5f29 3a0a  ensions_prop_):.
+00000300: 2020 2020 2020 2020 5f64 696d 656e 7369          _dimensi
+00000310: 6f6e 735f 7072 6f70 5f2e 7265 7475 726e  ons_prop_.return
+00000320: 5f76 616c 7565 203d 2028 302c 2031 2c20  _value = (0, 1, 
+00000330: 3229 0a20 2020 2020 2020 2062 6173 655f  2).        base_
+00000340: 6469 6d65 6e73 696f 6e73 203d 205f 4261  dimensions = _Ba
+00000350: 7365 4469 6d65 6e73 696f 6e73 2829 0a0a  seDimensions()..
+00000360: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+00000370: 6173 655f 6469 6d65 6e73 696f 6e73 5b31  ase_dimensions[1
+00000380: 5d20 3d3d 2031 0a20 2020 2020 2020 2061  ] == 1.        a
+00000390: 7373 6572 7420 6261 7365 5f64 696d 656e  ssert base_dimen
+000003a0: 7369 6f6e 735b 313a 335d 203d 3d20 2831  sions[1:3] == (1
+000003b0: 2c20 3229 0a20 2020 2020 2020 2061 7373  , 2).        ass
+000003c0: 6572 7420 6c65 6e28 6261 7365 5f64 696d  ert len(base_dim
+000003d0: 656e 7369 6f6e 7329 203d 3d20 330a 2020  ensions) == 3.  
+000003e0: 2020 2020 2020 6173 7365 7274 206c 6973        assert lis
+000003f0: 7428 6e20 666f 7220 6e20 696e 2062 6173  t(n for n in bas
+00000400: 655f 6469 6d65 6e73 696f 6e73 2920 3d3d  e_dimensions) ==
+00000410: 205b 302c 2031 2c20 325d 0a0a 2020 2020   [0, 1, 2]..    
+00000420: 6465 6620 6974 5f73 746f 7265 735f 6974  def it_stores_it
+00000430: 735f 6469 6d65 6e73 696f 6e5f 6f62 6a65  s_dimension_obje
+00000440: 6374 735f 696e 5f61 5f74 7570 6c65 5f74  cts_in_a_tuple_t
+00000450: 6f5f 6865 6c70 2873 656c 6629 3a0a 2020  o_help(self):.  
+00000460: 2020 2020 2020 6261 7365 5f64 696d 656e        base_dimen
+00000470: 7369 6f6e 7320 3d20 5f42 6173 6544 696d  sions = _BaseDim
+00000480: 656e 7369 6f6e 7328 290a 2020 2020 2020  ensions().      
+00000490: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+000004a0: 6973 6573 284e 6f74 496d 706c 656d 656e  ises(NotImplemen
+000004b0: 7465 6445 7272 6f72 293a 0a20 2020 2020  tedError):.     
+000004c0: 2020 2020 2020 2062 6173 655f 6469 6d65         base_dime
+000004d0: 6e73 696f 6e73 2e5f 6469 6d65 6e73 696f  nsions._dimensio
+000004e0: 6e73 0a0a 2020 2020 2320 6669 7874 7572  ns..    # fixtur
+000004f0: 6520 636f 6d70 6f6e 656e 7473 202d 2d2d  e components ---
+00000500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000520: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2020 2020  ----------..    
+00000530: 4070 7974 6573 742e 6669 7874 7572 650a  @pytest.fixture.
+00000540: 2020 2020 6465 6620 5f64 696d 656e 7369      def _dimensi
+00000550: 6f6e 735f 7072 6f70 5f28 7365 6c66 2c20  ons_prop_(self, 
+00000560: 7265 7175 6573 7429 3a0a 2020 2020 2020  request):.      
+00000570: 2020 7265 7475 726e 2070 726f 7065 7274    return propert
+00000580: 795f 6d6f 636b 2872 6571 7565 7374 2c20  y_mock(request, 
+00000590: 5f42 6173 6544 696d 656e 7369 6f6e 732c  _BaseDimensions,
+000005a0: 2022 5f64 696d 656e 7369 6f6e 7322 290a   "_dimensions").
+000005b0: 0a0a 636c 6173 7320 4465 7363 7269 6265  ..class Describe
+000005c0: 416c 6c44 696d 656e 7369 6f6e 733a 0a20  AllDimensions:. 
+000005d0: 2020 2022 2222 556e 6974 2d74 6573 7420     """Unit-test 
+000005e0: 7375 6974 6520 666f 7220 6063 722e 6375  suite for `cr.cu
+000005f0: 6265 2e64 696d 656e 7369 6f6e 2e41 6c6c  be.dimension.All
+00000600: 4469 6d65 6e73 696f 6e73 6020 6f62 6a65  Dimensions` obje
+00000610: 6374 2e22 2222 0a0a 2020 2020 6465 6620  ct."""..    def 
+00000620: 6974 5f70 726f 7669 6465 735f 6163 6365  it_provides_acce
+00000630: 7373 5f74 6f5f 6974 735f 4170 7061 7265  ss_to_its_Appare
+00000640: 6e74 4469 6d65 6e73 696f 6e73 280a 2020  ntDimensions(.  
+00000650: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00000660: 2020 2020 5f41 7070 6172 656e 7444 696d      _ApparentDim
+00000670: 656e 7369 6f6e 735f 2c0a 2020 2020 2020  ensions_,.      
+00000680: 2020 6170 7061 7265 6e74 5f64 696d 656e    apparent_dimen
+00000690: 7369 6f6e 735f 2c0a 2020 2020 2020 2020  sions_,.        
+000006a0: 5f64 696d 656e 7369 6f6e 735f 7072 6f70  _dimensions_prop
+000006b0: 5f2c 0a20 2020 2020 2020 2061 6c6c 5f64  _,.        all_d
+000006c0: 696d 656e 7369 6f6e 735f 2c0a 2020 2020  imensions_,.    
+000006d0: 293a 0a20 2020 2020 2020 205f 6469 6d65  ):.        _dime
+000006e0: 6e73 696f 6e73 5f70 726f 705f 2e72 6574  nsions_prop_.ret
+000006f0: 7572 6e5f 7661 6c75 6520 3d20 616c 6c5f  urn_value = all_
+00000700: 6469 6d65 6e73 696f 6e73 5f0a 2020 2020  dimensions_.    
+00000710: 2020 2020 5f41 7070 6172 656e 7444 696d      _ApparentDim
+00000720: 656e 7369 6f6e 735f 2e72 6574 7572 6e5f  ensions_.return_
+00000730: 7661 6c75 6520 3d20 6170 7061 7265 6e74  value = apparent
+00000740: 5f64 696d 656e 7369 6f6e 735f 0a20 2020  _dimensions_.   
+00000750: 2020 2020 2061 6c6c 5f64 696d 656e 7369       all_dimensi
+00000760: 6f6e 7320 3d20 416c 6c44 696d 656e 7369  ons = AllDimensi
+00000770: 6f6e 7328 4e6f 6e65 290a 0a20 2020 2020  ons(None)..     
+00000780: 2020 2061 7070 6172 656e 745f 6469 6d65     apparent_dime
+00000790: 6e73 696f 6e73 203d 2061 6c6c 5f64 696d  nsions = all_dim
+000007a0: 656e 7369 6f6e 732e 6170 7061 7265 6e74  ensions.apparent
+000007b0: 5f64 696d 656e 7369 6f6e 730a 0a20 2020  _dimensions..   
+000007c0: 2020 2020 205f 4170 7061 7265 6e74 4469       _ApparentDi
+000007d0: 6d65 6e73 696f 6e73 5f2e 6173 7365 7274  mensions_.assert
+000007e0: 5f63 616c 6c65 645f 6f6e 6365 5f77 6974  _called_once_wit
+000007f0: 6828 616c 6c5f 6469 6d65 6e73 696f 6e73  h(all_dimensions
+00000800: 3d61 6c6c 5f64 696d 656e 7369 6f6e 735f  =all_dimensions_
+00000810: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00000820: 2061 7070 6172 656e 745f 6469 6d65 6e73   apparent_dimens
+00000830: 696f 6e73 2069 7320 6170 7061 7265 6e74  ions is apparent
+00000840: 5f64 696d 656e 7369 6f6e 735f 0a0a 2020  _dimensions_..  
+00000850: 2020 6465 6620 6974 5f6b 6e6f 7773 5f69    def it_knows_i
+00000860: 7473 5f73 6861 7065 2873 656c 662c 2072  ts_shape(self, r
+00000870: 6571 7565 7374 2c20 5f64 696d 656e 7369  equest, _dimensi
+00000880: 6f6e 735f 7072 6f70 5f29 3a0a 2020 2020  ons_prop_):.    
+00000890: 2020 2020 5f64 696d 656e 7369 6f6e 735f      _dimensions_
+000008a0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+000008b0: 7565 203d 2074 7570 6c65 280a 2020 2020  ue = tuple(.    
+000008c0: 2020 2020 2020 2020 696e 7374 616e 6365          instance
+000008d0: 5f6d 6f63 6b28 7265 7175 6573 742c 2044  _mock(request, D
+000008e0: 696d 656e 7369 6f6e 2c20 6e61 6d65 3d22  imension, name="
+000008f0: 6469 6d2d 2564 2220 2520 6964 782c 2073  dim-%d" % idx, s
+00000900: 6861 7065 3d65 6c65 6d65 6e74 5f63 6f75  hape=element_cou
+00000910: 6e74 290a 2020 2020 2020 2020 2020 2020  nt).            
+00000920: 666f 7220 6964 782c 2065 6c65 6d65 6e74  for idx, element
+00000930: 5f63 6f75 6e74 2069 6e20 656e 756d 6572  _count in enumer
+00000940: 6174 6528 2833 2c20 322c 2031 2929 0a20  ate((3, 2, 1)). 
+00000950: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00000960: 2061 6c6c 5f64 696d 656e 7369 6f6e 7320   all_dimensions 
+00000970: 3d20 416c 6c44 696d 656e 7369 6f6e 7328  = AllDimensions(
+00000980: 4e6f 6e65 290a 0a20 2020 2020 2020 2073  None)..        s
+00000990: 6861 7065 203d 2061 6c6c 5f64 696d 656e  hape = all_dimen
+000009a0: 7369 6f6e 732e 7368 6170 650a 0a20 2020  sions.shape..   
+000009b0: 2020 2020 2061 7373 6572 7420 7368 6170       assert shap
+000009c0: 6520 3d3d 2028 332c 2032 2c20 3129 0a0a  e == (3, 2, 1)..
+000009d0: 2020 2020 6465 6620 6974 5f73 746f 7265      def it_store
+000009e0: 735f 6974 735f 6469 6d65 6e73 696f 6e73  s_its_dimensions
+000009f0: 5f69 6e5f 615f 7475 706c 655f 746f 5f68  _in_a_tuple_to_h
+00000a00: 656c 7028 7365 6c66 2c20 7265 7175 6573  elp(self, reques
+00000a10: 742c 205f 4469 6d65 6e73 696f 6e46 6163  t, _DimensionFac
+00000a20: 746f 7279 5f29 3a0a 2020 2020 2020 2020  tory_):.        
+00000a30: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+00000a40: 203d 205b 7b22 6422 3a20 307d 2c20 7b22   = [{"d": 0}, {"
+00000a50: 6422 3a20 317d 2c20 7b22 6422 3a20 327d  d": 1}, {"d": 2}
+00000a60: 5d0a 2020 2020 2020 2020 6469 6d65 6e73  ].        dimens
+00000a70: 696f 6e73 5f20 3d20 7475 706c 6528 0a20  ions_ = tuple(. 
+00000a80: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
+00000a90: 6e63 655f 6d6f 636b 2872 6571 7565 7374  nce_mock(request
+00000aa0: 2c20 4469 6d65 6e73 696f 6e2c 206e 616d  , Dimension, nam
+00000ab0: 653d 2264 696d 2d25 6422 2025 2069 6478  e="dim-%d" % idx
+00000ac0: 2920 666f 7220 6964 7820 696e 2072 616e  ) for idx in ran
+00000ad0: 6765 2833 290a 2020 2020 2020 2020 290a  ge(3).        ).
+00000ae0: 2020 2020 2020 2020 5f44 696d 656e 7369          _Dimensi
+00000af0: 6f6e 4661 6374 6f72 795f 2e69 7465 725f  onFactory_.iter_
+00000b00: 6469 6d65 6e73 696f 6e73 2e72 6574 7572  dimensions.retur
+00000b10: 6e5f 7661 6c75 6520 3d20 6974 6572 2864  n_value = iter(d
+00000b20: 696d 656e 7369 6f6e 735f 290a 2020 2020  imensions_).    
+00000b30: 2020 2020 616c 6c5f 6469 6d65 6e73 696f      all_dimensio
+00000b40: 6e73 203d 2041 6c6c 4469 6d65 6e73 696f  ns = AllDimensio
+00000b50: 6e73 2864 696d 656e 7369 6f6e 5f64 6963  ns(dimension_dic
+00000b60: 7473 5f29 0a0a 2020 2020 2020 2020 6469  ts_)..        di
+00000b70: 6d65 6e73 696f 6e73 203d 2061 6c6c 5f64  mensions = all_d
+00000b80: 696d 656e 7369 6f6e 732e 5f64 696d 656e  imensions._dimen
+00000b90: 7369 6f6e 730a 0a20 2020 2020 2020 205f  sions..        _
+00000ba0: 4469 6d65 6e73 696f 6e46 6163 746f 7279  DimensionFactory
+00000bb0: 5f2e 6974 6572 5f64 696d 656e 7369 6f6e  _.iter_dimension
+00000bc0: 732e 6173 7365 7274 5f63 616c 6c65 645f  s.assert_called_
+00000bd0: 6f6e 6365 5f77 6974 6828 6469 6d65 6e73  once_with(dimens
+00000be0: 696f 6e5f 6469 6374 735f 290a 2020 2020  ion_dicts_).    
+00000bf0: 2020 2020 6173 7365 7274 2064 696d 656e      assert dimen
+00000c00: 7369 6f6e 7320 3d3d 2064 696d 656e 7369  sions == dimensi
+00000c10: 6f6e 735f 0a0a 2020 2020 2320 6669 7874  ons_..    # fixt
+00000c20: 7572 6520 636f 6d70 6f6e 656e 7473 202d  ure components -
+00000c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2020  ------------..  
+00000c60: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
+00000c70: 650a 2020 2020 6465 6620 616c 6c5f 6469  e.    def all_di
+00000c80: 6d65 6e73 696f 6e73 5f28 7365 6c66 2c20  mensions_(self, 
+00000c90: 7265 7175 6573 7429 3a0a 2020 2020 2020  request):.      
+00000ca0: 2020 7265 7475 726e 2069 6e73 7461 6e63    return instanc
+00000cb0: 655f 6d6f 636b 2872 6571 7565 7374 2c20  e_mock(request, 
+00000cc0: 416c 6c44 696d 656e 7369 6f6e 7329 0a0a  AllDimensions)..
+00000cd0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+00000ce0: 7572 650a 2020 2020 6465 6620 5f41 7070  ure.    def _App
+00000cf0: 6172 656e 7444 696d 656e 7369 6f6e 735f  arentDimensions_
+00000d00: 2873 656c 662c 2072 6571 7565 7374 293a  (self, request):
+00000d10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00000d20: 636c 6173 735f 6d6f 636b 2872 6571 7565  class_mock(reque
+00000d30: 7374 2c20 2263 722e 6375 6265 2e64 696d  st, "cr.cube.dim
+00000d40: 656e 7369 6f6e 2e5f 4170 7061 7265 6e74  ension._Apparent
+00000d50: 4469 6d65 6e73 696f 6e73 2229 0a0a 2020  Dimensions")..  
+00000d60: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
+00000d70: 650a 2020 2020 6465 6620 6170 7061 7265  e.    def appare
+00000d80: 6e74 5f64 696d 656e 7369 6f6e 735f 2873  nt_dimensions_(s
+00000d90: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00000da0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+00000db0: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
+00000dc0: 6573 742c 205f 4170 7061 7265 6e74 4469  est, _ApparentDi
+00000dd0: 6d65 6e73 696f 6e73 290a 0a20 2020 2040  mensions)..    @
+00000de0: 7079 7465 7374 2e66 6978 7475 7265 0a20  pytest.fixture. 
+00000df0: 2020 2064 6566 205f 4469 6d65 6e73 696f     def _Dimensio
+00000e00: 6e46 6163 746f 7279 5f28 7365 6c66 2c20  nFactory_(self, 
+00000e10: 7265 7175 6573 7429 3a0a 2020 2020 2020  request):.      
+00000e20: 2020 7265 7475 726e 2063 6c61 7373 5f6d    return class_m
+00000e30: 6f63 6b28 7265 7175 6573 742c 2022 6372  ock(request, "cr
+00000e40: 2e63 7562 652e 6469 6d65 6e73 696f 6e2e  .cube.dimension.
+00000e50: 5f44 696d 656e 7369 6f6e 4661 6374 6f72  _DimensionFactor
+00000e60: 7922 290a 0a20 2020 2040 7079 7465 7374  y")..    @pytest
+00000e70: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+00000e80: 205f 6469 6d65 6e73 696f 6e73 5f70 726f   _dimensions_pro
+00000e90: 705f 2873 656c 662c 2072 6571 7565 7374  p_(self, request
+00000ea0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00000eb0: 6e20 7072 6f70 6572 7479 5f6d 6f63 6b28  n property_mock(
+00000ec0: 7265 7175 6573 742c 2041 6c6c 4469 6d65  request, AllDime
+00000ed0: 6e73 696f 6e73 2c20 225f 6469 6d65 6e73  nsions, "_dimens
+00000ee0: 696f 6e73 2229 0a0a 0a63 6c61 7373 2044  ions")...class D
+00000ef0: 6573 6372 6962 655f 4170 7061 7265 6e74  escribe_Apparent
+00000f00: 4469 6d65 6e73 696f 6e73 3a0a 2020 2020  Dimensions:.    
+00000f10: 6465 6620 6974 5f73 746f 7265 735f 6974  def it_stores_it
+00000f20: 735f 6469 6d65 6e73 696f 6e73 5f69 6e5f  s_dimensions_in_
+00000f30: 615f 7475 706c 655f 746f 5f68 656c 7028  a_tuple_to_help(
+00000f40: 7365 6c66 2c20 7265 7175 6573 7429 3a0a  self, request):.
+00000f50: 2020 2020 2020 2020 616c 6c5f 6469 6d65          all_dime
+00000f60: 6e73 696f 6e73 5f20 3d20 7475 706c 6528  nsions_ = tuple(
+00000f70: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
+00000f80: 7461 6e63 655f 6d6f 636b 2872 6571 7565  tance_mock(reque
+00000f90: 7374 2c20 4469 6d65 6e73 696f 6e2c 206e  st, Dimension, n
+00000fa0: 616d 653d 2264 696d 2d25 6422 2025 2069  ame="dim-%d" % i
+00000fb0: 6478 2c20 6469 6d65 6e73 696f 6e5f 7479  dx, dimension_ty
+00000fc0: 7065 3d64 7429 0a20 2020 2020 2020 2020  pe=dt).         
+00000fd0: 2020 2066 6f72 2069 6478 2c20 6474 2069     for idx, dt i
+00000fe0: 6e20 656e 756d 6572 6174 6528 2844 542e  n enumerate((DT.
+00000ff0: 4341 542c 2044 542e 4d52 2c20 4454 2e4d  CAT, DT.MR, DT.M
+00001000: 525f 4341 5429 290a 2020 2020 2020 2020  R_CAT)).        
+00001010: 290a 2020 2020 2020 2020 6170 7061 7265  ).        appare
+00001020: 6e74 5f64 696d 656e 7369 6f6e 7320 3d20  nt_dimensions = 
+00001030: 5f41 7070 6172 656e 7444 696d 656e 7369  _ApparentDimensi
+00001040: 6f6e 7328 616c 6c5f 6469 6d65 6e73 696f  ons(all_dimensio
+00001050: 6e73 5f29 0a0a 2020 2020 2020 2020 6469  ns_)..        di
+00001060: 6d65 6e73 696f 6e73 203d 2061 7070 6172  mensions = appar
+00001070: 656e 745f 6469 6d65 6e73 696f 6e73 2e5f  ent_dimensions._
+00001080: 6469 6d65 6e73 696f 6e73 0a0a 2020 2020  dimensions..    
+00001090: 2020 2020 6173 7365 7274 2064 696d 656e      assert dimen
+000010a0: 7369 6f6e 7320 3d3d 2061 6c6c 5f64 696d  sions == all_dim
+000010b0: 656e 7369 6f6e 735f 5b3a 325d 0a0a 0a63  ensions_[:2]...c
+000010c0: 6c61 7373 2044 6573 6372 6962 655f 4469  lass Describe_Di
+000010d0: 6d65 6e73 696f 6e46 6163 746f 7279 3a0a  mensionFactory:.
+000010e0: 2020 2020 6465 6620 6974 5f70 726f 7669      def it_provi
+000010f0: 6465 735f 616e 5f69 6e74 6572 6661 6365  des_an_interface
+00001100: 5f63 6c61 7373 6d65 7468 6f64 280a 2020  _classmethod(.  
+00001110: 2020 2020 2020 7365 6c66 2c20 7265 7175        self, requ
+00001120: 6573 742c 2064 696d 656e 7369 6f6e 5f64  est, dimension_d
+00001130: 6963 7473 5f2c 205f 696e 6974 5f2c 205f  icts_, _init_, _
+00001140: 6974 6572 5f64 696d 656e 7369 6f6e 735f  iter_dimensions_
+00001150: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00001160: 6469 6d65 6e73 696f 6e73 5f20 3d20 7475  dimensions_ = tu
+00001170: 706c 6528 0a20 2020 2020 2020 2020 2020  ple(.           
+00001180: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
+00001190: 6571 7565 7374 2c20 4469 6d65 6e73 696f  equest, Dimensio
+000011a0: 6e2c 206e 616d 653d 2264 696d 2d25 6422  n, name="dim-%d"
+000011b0: 2025 2069 6478 2920 666f 7220 6964 7820   % idx) for idx 
+000011c0: 696e 2072 616e 6765 2833 290a 2020 2020  in range(3).    
+000011d0: 2020 2020 290a 2020 2020 2020 2020 5f69      ).        _i
+000011e0: 7465 725f 6469 6d65 6e73 696f 6e73 5f2e  ter_dimensions_.
+000011f0: 7265 7475 726e 5f76 616c 7565 203d 2069  return_value = i
+00001200: 7465 7228 6469 6d65 6e73 696f 6e73 5f29  ter(dimensions_)
+00001210: 0a0a 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
+00001220: 696f 6e5f 6974 6572 203d 205f 4469 6d65  ion_iter = _Dime
+00001230: 6e73 696f 6e46 6163 746f 7279 2e69 7465  nsionFactory.ite
+00001240: 725f 6469 6d65 6e73 696f 6e73 2864 696d  r_dimensions(dim
+00001250: 656e 7369 6f6e 5f64 6963 7473 5f29 0a0a  ension_dicts_)..
+00001260: 2020 2020 2020 2020 2320 2d2d 2d41 4e59          # ---ANY
+00001270: 2069 7320 666f 7220 6469 6d65 6e73 696f   is for dimensio
+00001280: 6e5f 6661 6374 6f72 7920 6f62 6a65 6374  n_factory object
+00001290: 2028 7365 6c66 292c 2077 6869 6368 2077   (self), which w
+000012a0: 6520 6361 6e27 7420 7365 652d 2d2d 0a20  e can't see---. 
+000012b0: 2020 2020 2020 205f 696e 6974 5f2e 6173         _init_.as
+000012c0: 7365 7274 5f63 616c 6c65 645f 6f6e 6365  sert_called_once
+000012d0: 5f77 6974 6828 414e 592c 2064 696d 656e  _with(ANY, dimen
+000012e0: 7369 6f6e 5f64 6963 7473 5f29 0a20 2020  sion_dicts_).   
+000012f0: 2020 2020 205f 6974 6572 5f64 696d 656e       _iter_dimen
+00001300: 7369 6f6e 735f 2e61 7373 6572 745f 6361  sions_.assert_ca
+00001310: 6c6c 6564 5f6f 6e63 655f 7769 7468 2841  lled_once_with(A
+00001320: 4e59 290a 2020 2020 2020 2020 6173 7365  NY).        asse
+00001330: 7274 2074 7570 6c65 2864 696d 656e 7369  rt tuple(dimensi
+00001340: 6f6e 5f69 7465 7229 203d 3d20 6469 6d65  on_iter) == dime
+00001350: 6e73 696f 6e73 5f0a 0a20 2020 2064 6566  nsions_..    def
+00001360: 2069 745f 6765 6e65 7261 7465 735f 7468   it_generates_th
+00001370: 655f 6469 6d65 6e73 696f 6e73 5f66 6f72  e_dimensions_for
+00001380: 5f61 5f63 7562 6528 0a20 2020 2020 2020  _a_cube(.       
+00001390: 2073 656c 662c 2072 6571 7565 7374 2c20   self, request, 
+000013a0: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+000013b0: 2c20 5f72 6177 5f64 696d 656e 7369 6f6e  , _raw_dimension
+000013c0: 735f 7072 6f70 5f2c 2044 696d 656e 7369  s_prop_, Dimensi
+000013d0: 6f6e 5f0a 2020 2020 293a 0a20 2020 2020  on_.    ):.     
+000013e0: 2020 2064 696d 656e 7369 6f6e 5f74 7970     dimension_typ
+000013f0: 6573 5f20 3d20 2844 542e 4341 542c 2044  es_ = (DT.CAT, D
+00001400: 542e 4341 5f53 5542 5641 522c 2044 542e  T.CA_SUBVAR, DT.
+00001410: 4341 5f43 4154 290a 2020 2020 2020 2020  CA_CAT).        
+00001420: 5f72 6177 5f64 696d 656e 7369 6f6e 735f  _raw_dimensions_
+00001430: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+00001440: 7565 203d 2074 7570 6c65 280a 2020 2020  ue = tuple(.    
+00001450: 2020 2020 2020 2020 696e 7374 616e 6365          instance
+00001460: 5f6d 6f63 6b28 0a20 2020 2020 2020 2020  _mock(.         
+00001470: 2020 2020 2020 2072 6571 7565 7374 2c0a         request,.
+00001480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001490: 5f52 6177 4469 6d65 6e73 696f 6e2c 0a20  _RawDimension,. 
+000014a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000014b0: 616d 653d 2272 6177 2d64 696d 2d25 6422  ame="raw-dim-%d"
+000014c0: 2025 2069 6478 2c0a 2020 2020 2020 2020   % idx,.        
+000014d0: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
+000014e0: 6e5f 6469 6374 3d64 696d 656e 7369 6f6e  n_dict=dimension
+000014f0: 5f64 6963 7473 5f5b 6964 785d 2c0a 2020  _dicts_[idx],.  
+00001500: 2020 2020 2020 2020 2020 2020 2020 6469                di
+00001510: 6d65 6e73 696f 6e5f 7479 7065 3d64 696d  mension_type=dim
+00001520: 656e 7369 6f6e 5f74 7970 6573 5f5b 6964  ension_types_[id
+00001530: 785d 2c0a 2020 2020 2020 2020 2020 2020  x],.            
+00001540: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+00001550: 7220 6964 7820 696e 2072 616e 6765 2833  r idx in range(3
+00001560: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00001570: 2020 2020 6469 6d65 6e73 696f 6e73 5f20      dimensions_ 
+00001580: 3d20 7475 706c 6528 0a20 2020 2020 2020  = tuple(.       
+00001590: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
+000015a0: 636b 2872 6571 7565 7374 2c20 4469 6d65  ck(request, Dime
+000015b0: 6e73 696f 6e2c 206e 616d 653d 2264 696d  nsion, name="dim
+000015c0: 2d25 6422 2025 2069 6478 2920 666f 7220  -%d" % idx) for 
+000015d0: 6964 7820 696e 2072 616e 6765 2833 290a  idx in range(3).
+000015e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000015f0: 2020 4469 6d65 6e73 696f 6e5f 2e73 6964    Dimension_.sid
+00001600: 655f 6566 6665 6374 203d 2069 7465 7228  e_effect = iter(
+00001610: 6469 6d65 6e73 696f 6e73 5f29 0a20 2020  dimensions_).   
+00001620: 2020 2020 2064 696d 656e 7369 6f6e 5f66       dimension_f
+00001630: 6163 746f 7279 203d 205f 4469 6d65 6e73  actory = _Dimens
+00001640: 696f 6e46 6163 746f 7279 284e 6f6e 6529  ionFactory(None)
+00001650: 0a0a 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
+00001660: 696f 6e5f 6974 6572 203d 2064 696d 656e  ion_iter = dimen
+00001670: 7369 6f6e 5f66 6163 746f 7279 2e5f 6974  sion_factory._it
+00001680: 6572 5f64 696d 656e 7369 6f6e 7328 290a  er_dimensions().
+00001690: 0a20 2020 2020 2020 2023 202d 2d2d 6578  .        # ---ex
+000016a0: 6572 6369 7369 6e67 2074 6865 2069 7465  ercising the ite
+000016b0: 7261 746f 7220 6e65 6564 7320 746f 2063  rator needs to c
+000016c0: 6f6d 6520 6669 7273 742d 2d2d 0a20 2020  ome first---.   
+000016d0: 2020 2020 2061 7373 6572 7420 7475 706c       assert tupl
+000016e0: 6528 6469 6d65 6e73 696f 6e5f 6974 6572  e(dimension_iter
+000016f0: 2920 3d3d 2064 696d 656e 7369 6f6e 735f  ) == dimensions_
+00001700: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00001710: 4469 6d65 6e73 696f 6e5f 2e63 616c 6c5f  Dimension_.call_
+00001720: 6172 6773 5f6c 6973 7420 3d3d 205b 0a20  args_list == [. 
+00001730: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
+00001740: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+00001750: 5b30 5d2c 2064 696d 656e 7369 6f6e 5f74  [0], dimension_t
+00001760: 7970 6573 5f5b 305d 292c 0a20 2020 2020  ypes_[0]),.     
+00001770: 2020 2020 2020 2063 616c 6c28 6469 6d65         call(dime
+00001780: 6e73 696f 6e5f 6469 6374 735f 5b31 5d2c  nsion_dicts_[1],
+00001790: 2064 696d 656e 7369 6f6e 5f74 7970 6573   dimension_types
+000017a0: 5f5b 315d 292c 0a20 2020 2020 2020 2020  _[1]),.         
+000017b0: 2020 2063 616c 6c28 6469 6d65 6e73 696f     call(dimensio
+000017c0: 6e5f 6469 6374 735f 5b32 5d2c 2064 696d  n_dicts_[2], dim
+000017d0: 656e 7369 6f6e 5f74 7970 6573 5f5b 325d  ension_types_[2]
+000017e0: 292c 0a20 2020 2020 2020 205d 0a0a 2020  ),.        ]..  
+000017f0: 2020 6465 6620 6974 5f63 6f6e 7374 7275    def it_constru
+00001800: 6374 735f 5261 7744 696d 656e 7369 6f6e  cts_RawDimension
+00001810: 5f6f 626a 6563 7473 5f74 6f5f 6865 6c70  _objects_to_help
+00001820: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00001830: 7265 7175 6573 742c 2064 696d 656e 7369  request, dimensi
+00001840: 6f6e 5f64 6963 7473 5f2c 205f 5261 7744  on_dicts_, _RawD
+00001850: 696d 656e 7369 6f6e 5f0a 2020 2020 293a  imension_.    ):
+00001860: 0a20 2020 2020 2020 2072 6177 5f64 696d  .        raw_dim
+00001870: 656e 7369 6f6e 735f 203d 2074 7570 6c65  ensions_ = tuple
+00001880: 280a 2020 2020 2020 2020 2020 2020 696e  (.            in
+00001890: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
+000018a0: 6573 742c 205f 5261 7744 696d 656e 7369  est, _RawDimensi
+000018b0: 6f6e 2c20 6e61 6d65 3d22 7261 772d 6469  on, name="raw-di
+000018c0: 6d2d 2564 2220 2520 6964 7829 0a20 2020  m-%d" % idx).   
+000018d0: 2020 2020 2020 2020 2066 6f72 2069 6478           for idx
+000018e0: 2069 6e20 7261 6e67 6528 3329 0a20 2020   in range(3).   
+000018f0: 2020 2020 2029 0a20 2020 2020 2020 205f       ).        _
+00001900: 5261 7744 696d 656e 7369 6f6e 5f2e 7369  RawDimension_.si
+00001910: 6465 5f65 6666 6563 7420 3d20 6974 6572  de_effect = iter
+00001920: 2872 6177 5f64 696d 656e 7369 6f6e 735f  (raw_dimensions_
+00001930: 290a 2020 2020 2020 2020 6469 6d65 6e73  ).        dimens
+00001940: 696f 6e5f 6661 6374 6f72 7920 3d20 5f44  ion_factory = _D
+00001950: 696d 656e 7369 6f6e 4661 6374 6f72 7928  imensionFactory(
+00001960: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+00001970: 290a 0a20 2020 2020 2020 2072 6177 5f64  )..        raw_d
+00001980: 696d 656e 7369 6f6e 7320 3d20 6469 6d65  imensions = dime
+00001990: 6e73 696f 6e5f 6661 6374 6f72 792e 5f72  nsion_factory._r
+000019a0: 6177 5f64 696d 656e 7369 6f6e 730a 0a20  aw_dimensions.. 
+000019b0: 2020 2020 2020 2061 7373 6572 7420 5f52         assert _R
+000019c0: 6177 4469 6d65 6e73 696f 6e5f 2e63 616c  awDimension_.cal
+000019d0: 6c5f 6172 6773 5f6c 6973 7420 3d3d 205b  l_args_list == [
+000019e0: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
+000019f0: 6c28 6469 6d65 6e73 696f 6e5f 6469 6374  l(dimension_dict
+00001a00: 735f 5b30 5d2c 2064 696d 656e 7369 6f6e  s_[0], dimension
+00001a10: 5f64 6963 7473 5f29 2c0a 2020 2020 2020  _dicts_),.      
+00001a20: 2020 2020 2020 6361 6c6c 2864 696d 656e        call(dimen
+00001a30: 7369 6f6e 5f64 6963 7473 5f5b 315d 2c20  sion_dicts_[1], 
+00001a40: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+00001a50: 292c 0a20 2020 2020 2020 2020 2020 2063  ),.            c
+00001a60: 616c 6c28 6469 6d65 6e73 696f 6e5f 6469  all(dimension_di
+00001a70: 6374 735f 5b32 5d2c 2064 696d 656e 7369  cts_[2], dimensi
+00001a80: 6f6e 5f64 6963 7473 5f29 2c0a 2020 2020  on_dicts_),.    
+00001a90: 2020 2020 5d0a 2020 2020 2020 2020 6173      ].        as
+00001aa0: 7365 7274 2072 6177 5f64 696d 656e 7369  sert raw_dimensi
+00001ab0: 6f6e 7320 3d3d 2072 6177 5f64 696d 656e  ons == raw_dimen
+00001ac0: 7369 6f6e 735f 0a0a 2020 2020 2320 6669  sions_..    # fi
+00001ad0: 7874 7572 6520 636f 6d70 6f6e 656e 7473  xture components
+00001ae0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00001af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  --------------..
+00001b10: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+00001b20: 7572 650a 2020 2020 6465 6620 4469 6d65  ure.    def Dime
+00001b30: 6e73 696f 6e5f 2873 656c 662c 2072 6571  nsion_(self, req
+00001b40: 7565 7374 293a 0a20 2020 2020 2020 2072  uest):.        r
+00001b50: 6574 7572 6e20 636c 6173 735f 6d6f 636b  eturn class_mock
+00001b60: 2872 6571 7565 7374 2c20 2263 722e 6375  (request, "cr.cu
+00001b70: 6265 2e64 696d 656e 7369 6f6e 2e44 696d  be.dimension.Dim
+00001b80: 656e 7369 6f6e 2229 0a0a 2020 2020 4070  ension")..    @p
+00001b90: 7974 6573 742e 6669 7874 7572 650a 2020  ytest.fixture.  
+00001ba0: 2020 6465 6620 6469 6d65 6e73 696f 6e5f    def dimension_
+00001bb0: 6469 6374 735f 2873 656c 662c 2072 6571  dicts_(self, req
+00001bc0: 7565 7374 293a 0a20 2020 2020 2020 2022  uest):.        "
+00001bd0: 2222 5475 706c 6520 6f66 2074 6872 6565  ""Tuple of three
+00001be0: 2073 6861 6c6c 6f77 2064 696d 656e 7369   shallow dimensi
+00001bf0: 6f6e 2d64 6963 7420 706c 6163 6568 6f6c  on-dict placehol
+00001c00: 6465 7273 2e22 2222 0a20 2020 2020 2020  ders.""".       
+00001c10: 2072 6574 7572 6e20 287b 2264 223a 2030   return ({"d": 0
+00001c20: 7d2c 207b 2264 223a 2031 7d2c 207b 2264  }, {"d": 1}, {"d
+00001c30: 223a 2032 7d29 0a0a 2020 2020 4070 7974  ": 2})..    @pyt
+00001c40: 6573 742e 6669 7874 7572 650a 2020 2020  est.fixture.    
+00001c50: 6465 6620 5f69 6e69 745f 2873 656c 662c  def _init_(self,
+00001c60: 2072 6571 7565 7374 293a 0a20 2020 2020   request):.     
+00001c70: 2020 2072 6574 7572 6e20 696e 6974 6961     return initia
+00001c80: 6c69 7a65 725f 6d6f 636b 2872 6571 7565  lizer_mock(reque
+00001c90: 7374 2c20 5f44 696d 656e 7369 6f6e 4661  st, _DimensionFa
+00001ca0: 6374 6f72 7929 0a0a 2020 2020 4070 7974  ctory)..    @pyt
+00001cb0: 6573 742e 6669 7874 7572 650a 2020 2020  est.fixture.    
+00001cc0: 6465 6620 5f69 7465 725f 6469 6d65 6e73  def _iter_dimens
+00001cd0: 696f 6e73 5f28 7365 6c66 2c20 7265 7175  ions_(self, requ
+00001ce0: 6573 7429 3a0a 2020 2020 2020 2020 7265  est):.        re
+00001cf0: 7475 726e 206d 6574 686f 645f 6d6f 636b  turn method_mock
+00001d00: 2872 6571 7565 7374 2c20 5f44 696d 656e  (request, _Dimen
+00001d10: 7369 6f6e 4661 6374 6f72 792c 2022 5f69  sionFactory, "_i
+00001d20: 7465 725f 6469 6d65 6e73 696f 6e73 2229  ter_dimensions")
+00001d30: 0a0a 2020 2020 4070 7974 6573 742e 6669  ..    @pytest.fi
+00001d40: 7874 7572 650a 2020 2020 6465 6620 5f52  xture.    def _R
+00001d50: 6177 4469 6d65 6e73 696f 6e5f 2873 656c  awDimension_(sel
+00001d60: 662c 2072 6571 7565 7374 293a 0a20 2020  f, request):.   
+00001d70: 2020 2020 2072 6574 7572 6e20 636c 6173       return clas
+00001d80: 735f 6d6f 636b 2872 6571 7565 7374 2c20  s_mock(request, 
+00001d90: 2263 722e 6375 6265 2e64 696d 656e 7369  "cr.cube.dimensi
+00001da0: 6f6e 2e5f 5261 7744 696d 656e 7369 6f6e  on._RawDimension
+00001db0: 2229 0a0a 2020 2020 4070 7974 6573 742e  ")..    @pytest.
+00001dc0: 6669 7874 7572 650a 2020 2020 6465 6620  fixture.    def 
+00001dd0: 5f72 6177 5f64 696d 656e 7369 6f6e 735f  _raw_dimensions_
+00001de0: 7072 6f70 5f28 7365 6c66 2c20 7265 7175  prop_(self, requ
+00001df0: 6573 7429 3a0a 2020 2020 2020 2020 7265  est):.        re
+00001e00: 7475 726e 2070 726f 7065 7274 795f 6d6f  turn property_mo
+00001e10: 636b 2872 6571 7565 7374 2c20 5f44 696d  ck(request, _Dim
+00001e20: 656e 7369 6f6e 4661 6374 6f72 792c 2022  ensionFactory, "
+00001e30: 5f72 6177 5f64 696d 656e 7369 6f6e 7322  _raw_dimensions"
+00001e40: 290a 0a0a 636c 6173 7320 4465 7363 7269  )...class Descri
+00001e50: 6265 5f52 6177 4469 6d65 6e73 696f 6e3a  be_RawDimension:
+00001e60: 0a20 2020 2064 6566 2069 745f 7072 6f76  .    def it_prov
+00001e70: 6964 6573 5f61 6363 6573 735f 746f 5f74  ides_access_to_t
+00001e80: 6865 5f64 696d 656e 7369 6f6e 5f64 6963  he_dimension_dic
+00001e90: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
+00001ea0: 2064 696d 656e 7369 6f6e 5f64 6963 745f   dimension_dict_
+00001eb0: 203d 207b 2264 696d 656e 7369 6f6e 223a   = {"dimension":
+00001ec0: 2022 6469 6374 227d 0a20 2020 2020 2020   "dict"}.       
+00001ed0: 2072 6177 5f64 696d 656e 7369 6f6e 203d   raw_dimension =
+00001ee0: 205f 5261 7744 696d 656e 7369 6f6e 2864   _RawDimension(d
+00001ef0: 696d 656e 7369 6f6e 5f64 6963 745f 2c20  imension_dict_, 
+00001f00: 4e6f 6e65 290a 0a20 2020 2020 2020 2064  None)..        d
+00001f10: 696d 656e 7369 6f6e 5f64 6963 7420 3d20  imension_dict = 
+00001f20: 7261 775f 6469 6d65 6e73 696f 6e2e 6469  raw_dimension.di
+00001f30: 6d65 6e73 696f 6e5f 6469 6374 0a0a 2020  mension_dict..  
+00001f40: 2020 2020 2020 6173 7365 7274 2064 696d        assert dim
+00001f50: 656e 7369 6f6e 5f64 6963 7420 3d3d 2064  ension_dict == d
+00001f60: 696d 656e 7369 6f6e 5f64 6963 745f 0a0a  imension_dict_..
+00001f70: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00001f80: 2e70 6172 616d 6574 7269 7a65 280a 2020  .parametrize(.  
+00001f90: 2020 2020 2020 2264 696d 656e 7369 6f6e        "dimension
+00001fa0: 5f64 6963 742c 2065 7870 6563 7465 645f  _dict, expected_
+00001fb0: 7661 6c75 6522 2c0a 2020 2020 2020 2020  value",.        
+00001fc0: 280a 2020 2020 2020 2020 2020 2020 287b  (.            ({
+00001fd0: 2274 7970 6522 3a20 7b22 636c 6173 7322  "type": {"class"
+00001fe0: 3a20 2263 6174 6567 6f72 6963 616c 227d  : "categorical"}
+00001ff0: 7d2c 2022 6361 7465 676f 7269 6361 6c22  }, "categorical"
+00002000: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00002010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002020: 207b 2274 7970 6522 3a20 7b22 636c 6173   {"type": {"clas
+00002030: 7322 3a20 2265 6e75 6d22 2c20 2273 7562  s": "enum", "sub
+00002040: 7479 7065 223a 207b 2263 6c61 7373 223a  type": {"class":
+00002050: 2022 7661 7269 6162 6c65 227d 7d7d 2c0a   "variable"}}},.
+00002060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002070: 2265 6e75 6d2e 7661 7269 6162 6c65 222c  "enum.variable",
+00002080: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+00002090: 2020 2020 2020 2020 292c 0a20 2020 2029          ),.    )
+000020a0: 0a20 2020 2064 6566 2069 745f 7061 7273  .    def it_pars
+000020b0: 6573 5f74 6865 5f62 6173 655f 7479 7065  es_the_base_type
+000020c0: 5f74 6f5f 6865 6c70 2873 656c 662c 2064  _to_help(self, d
+000020d0: 696d 656e 7369 6f6e 5f64 6963 742c 2065  imension_dict, e
+000020e0: 7870 6563 7465 645f 7661 6c75 6529 3a0a  xpected_value):.
+000020f0: 2020 2020 2020 2020 7261 775f 6469 6d65          raw_dime
+00002100: 6e73 696f 6e20 3d20 5f52 6177 4469 6d65  nsion = _RawDime
+00002110: 6e73 696f 6e28 6469 6d65 6e73 696f 6e5f  nsion(dimension_
+00002120: 6469 6374 2c20 4e6f 6e65 290a 0a20 2020  dict, None)..   
+00002130: 2020 2020 2062 6173 655f 7479 7065 203d       base_type =
+00002140: 2072 6177 5f64 696d 656e 7369 6f6e 2e5f   raw_dimension._
+00002150: 6261 7365 5f74 7970 650a 0a20 2020 2020  base_type..     
+00002160: 2020 2061 7373 6572 7420 6261 7365 5f74     assert base_t
+00002170: 7970 6520 3d3d 2065 7870 6563 7465 645f  ype == expected_
+00002180: 7661 6c75 650a 0a20 2020 2064 6566 2062  value..    def b
+00002190: 7574 5f69 745f 7261 6973 6573 5f6f 6e5f  ut_it_raises_on_
+000021a0: 756e 7265 636f 676e 697a 6564 5f74 7970  unrecognized_typ
+000021b0: 655f 636c 6173 7328 7365 6c66 293a 0a20  e_class(self):. 
+000021c0: 2020 2020 2020 2072 6177 5f64 696d 656e         raw_dimen
+000021d0: 7369 6f6e 203d 205f 5261 7744 696d 656e  sion = _RawDimen
+000021e0: 7369 6f6e 287b 2274 7970 6522 3a20 7b22  sion({"type": {"
+000021f0: 636c 6173 7322 3a20 2263 7275 6e63 6865  class": "crunche
+00002200: 6422 7d7d 2c20 4e6f 6e65 290a 2020 2020  d"}}, None).    
+00002210: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
+00002220: 7261 6973 6573 284e 6f74 496d 706c 656d  raises(NotImplem
+00002230: 656e 7465 6445 7272 6f72 293a 0a20 2020  entedError):.   
+00002240: 2020 2020 2020 2020 2072 6177 5f64 696d           raw_dim
+00002250: 656e 7369 6f6e 2e5f 6261 7365 5f74 7970  ension._base_typ
+00002260: 650a 0a20 2020 2040 7079 7465 7374 2e6d  e..    @pytest.m
+00002270: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
+00002280: 0a20 2020 2020 2020 2028 2264 696d 656e  .        ("dimen
+00002290: 7369 6f6e 5f64 6963 7422 2c20 2265 7870  sion_dict", "exp
+000022a0: 6563 7465 645f 7661 6c75 6522 292c 0a20  ected_value"),. 
+000022b0: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+000022c0: 2020 2020 2028 7b22 7479 7065 223a 207b       ({"type": {
+000022d0: 2263 6c61 7373 223a 2022 6361 7465 676f  "class": "catego
+000022e0: 7269 6361 6c22 2c20 2263 6174 6567 6f72  rical", "categor
+000022f0: 6965 7322 3a20 5b5d 7d7d 2c20 4661 6c73  ies": []}}, Fals
+00002300: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+00002310: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00002320: 2020 7b22 7479 7065 223a 207b 2263 6c61    {"type": {"cla
+00002330: 7373 223a 2022 6361 7465 676f 7269 6361  ss": "categorica
+00002340: 6c22 2c20 2263 6174 6567 6f72 6965 7322  l", "categories"
+00002350: 3a20 5b7b 7d2c 207b 7d5d 7d7d 2c0a 2020  : [{}, {}]}},.  
+00002360: 2020 2020 2020 2020 2020 2020 2020 4661                Fa
+00002370: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+00002380: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00002390: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000023a0: 2020 7b22 7479 7065 223a 207b 2263 6c61    {"type": {"cla
+000023b0: 7373 223a 2022 6361 7465 676f 7269 6361  ss": "categorica
+000023c0: 6c22 2c20 2263 6174 6567 6f72 6965 7322  l", "categories"
+000023d0: 3a20 5b7b 2266 6f6f 223a 2022 6261 7222  : [{"foo": "bar"
+000023e0: 7d2c 207b 7d5d 7d7d 2c0a 2020 2020 2020  }, {}]}},.      
+000023f0: 2020 2020 2020 2020 2020 4661 6c73 652c            False,
+00002400: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+00002410: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
+00002420: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00002430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002440: 2020 2020 2274 7970 6522 3a20 7b0a 2020      "type": {.  
+00002450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002460: 2020 2020 2020 2263 6c61 7373 223a 2022        "class": "
+00002470: 6361 7465 676f 7269 6361 6c22 2c0a 2020  categorical",.  
+00002480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002490: 2020 2020 2020 2263 6174 6567 6f72 6965        "categorie
+000024a0: 7322 3a20 5b7b 2264 6174 6522 3a20 2232  s": [{"date": "2
+000024b0: 3031 392d 3031 227d 2c20 7b7d 5d2c 0a20  019-01"}, {}],. 
+000024c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024d0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+000024e0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+000024f0: 2020 2020 2020 2020 5472 7565 2c0a 2020          True,.  
+00002500: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+00002510: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
+00002520: 2020 2020 2020 2020 2020 207b 2274 7970             {"typ
+00002530: 6522 3a20 7b22 636c 6173 7322 3a20 2265  e": {"class": "e
+00002540: 6e75 6d22 2c20 2263 6174 6567 6f72 6965  num", "categorie
+00002550: 7322 3a20 5b7b 2264 6174 6522 3a20 2232  s": [{"date": "2
+00002560: 3031 392d 3031 227d 2c20 7b7d 5d7d 7d2c  019-01"}, {}]}},
+00002570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002580: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00002590: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
+000025a0: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
+000025b0: 616e 645f 6974 5f6b 6e6f 7773 5f69 665f  and_it_knows_if_
+000025c0: 6974 5f69 735f 615f 6361 7465 676f 7269  it_is_a_categori
+000025d0: 6361 6c5f 6461 7465 2873 656c 662c 2064  cal_date(self, d
+000025e0: 696d 656e 7369 6f6e 5f64 6963 742c 2065  imension_dict, e
+000025f0: 7870 6563 7465 645f 7661 6c75 6529 3a0a  xpected_value):.
+00002600: 2020 2020 2020 2020 7261 775f 6469 6d65          raw_dime
+00002610: 6e73 696f 6e20 3d20 5f52 6177 4469 6d65  nsion = _RawDime
+00002620: 6e73 696f 6e28 6469 6d65 6e73 696f 6e5f  nsion(dimension_
+00002630: 6469 6374 2c20 4e6f 6e65 290a 0a20 2020  dict, None)..   
+00002640: 2020 2020 2069 735f 6361 745f 6461 7465       is_cat_date
+00002650: 203d 2072 6177 5f64 696d 656e 7369 6f6e   = raw_dimension
+00002660: 2e5f 6973 5f63 6174 5f64 6174 650a 0a20  ._is_cat_date.. 
+00002670: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00002680: 5f63 6174 5f64 6174 6520 3d3d 2065 7870  _cat_date == exp
+00002690: 6563 7465 645f 7661 6c75 650a 0a20 2020  ected_value..   
+000026a0: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
+000026b0: 7261 6d65 7472 697a 6528 0a20 2020 2020  rametrize(.     
+000026c0: 2020 2022 6261 7365 5f74 7970 652c 2063     "base_type, c
+000026d0: 6174 5f74 7970 652c 2061 7272 5f74 7970  at_type, arr_typ
+000026e0: 652c 2065 7870 6563 7465 645f 7661 6c75  e, expected_valu
+000026f0: 6522 2c0a 2020 2020 2020 2020 280a 2020  e",.        (.  
+00002700: 2020 2020 2020 2020 2020 2822 6361 7465            ("cate
+00002710: 676f 7269 6361 6c22 2c20 4454 2e43 4154  gorical", DT.CAT
+00002720: 2c20 4e6f 6e65 2c20 4454 2e43 4154 292c  , None, DT.CAT),
+00002730: 0a20 2020 2020 2020 2020 2020 2028 2265  .            ("e
+00002740: 6e75 6d2e 7661 7269 6162 6c65 222c 204e  num.variable", N
+00002750: 6f6e 652c 2044 542e 4d52 2c20 4454 2e4d  one, DT.MR, DT.M
+00002760: 5229 2c0a 2020 2020 2020 2020 2020 2020  R),.            
+00002770: 2822 656e 756d 2e64 6174 6574 696d 6522  ("enum.datetime"
+00002780: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 4454  , None, None, DT
+00002790: 2e44 4154 4554 494d 4529 2c0a 2020 2020  .DATETIME),.    
+000027a0: 2020 2020 2020 2020 2822 656e 756d 2e6e          ("enum.n
+000027b0: 756d 6572 6963 222c 204e 6f6e 652c 204e  umeric", None, N
+000027c0: 6f6e 652c 2044 542e 4249 4e4e 4544 5f4e  one, DT.BINNED_N
+000027d0: 554d 4552 4943 292c 0a20 2020 2020 2020  UMERIC),.       
+000027e0: 2020 2020 2028 2265 6e75 6d2e 7465 7874       ("enum.text
+000027f0: 222c 204e 6f6e 652c 204e 6f6e 652c 2044  ", None, None, D
+00002800: 542e 5445 5854 292c 0a20 2020 2020 2020  T.TEXT),.       
+00002810: 2029 2c0a 2020 2020 290a 2020 2020 6465   ),.    ).    de
+00002820: 6620 6974 5f64 6574 6572 6d69 6e65 735f  f it_determines_
+00002830: 7468 655f 6469 6d65 6e73 696f 6e5f 7479  the_dimension_ty
+00002840: 7065 280a 2020 2020 2020 2020 7365 6c66  pe(.        self
+00002850: 2c0a 2020 2020 2020 2020 6261 7365 5f74  ,.        base_t
+00002860: 7970 652c 0a20 2020 2020 2020 2063 6174  ype,.        cat
+00002870: 5f74 7970 652c 0a20 2020 2020 2020 2061  _type,.        a
+00002880: 7272 5f74 7970 652c 0a20 2020 2020 2020  rr_type,.       
+00002890: 2065 7870 6563 7465 645f 7661 6c75 652c   expected_value,
+000028a0: 0a20 2020 2020 2020 205f 6261 7365 5f74  .        _base_t
+000028b0: 7970 655f 7072 6f70 5f2c 0a20 2020 2020  ype_prop_,.     
+000028c0: 2020 205f 7265 736f 6c76 655f 6361 7465     _resolve_cate
+000028d0: 676f 7269 6361 6c5f 2c0a 2020 2020 2020  gorical_,.      
+000028e0: 2020 5f72 6573 6f6c 7665 5f61 7272 6179    _resolve_array
+000028f0: 5f74 7970 655f 2c0a 2020 2020 293a 0a20  _type_,.    ):. 
+00002900: 2020 2020 2020 205f 6261 7365 5f74 7970         _base_typ
+00002910: 655f 7072 6f70 5f2e 7265 7475 726e 5f76  e_prop_.return_v
+00002920: 616c 7565 203d 2062 6173 655f 7479 7065  alue = base_type
+00002930: 0a20 2020 2020 2020 205f 7265 736f 6c76  .        _resolv
+00002940: 655f 6361 7465 676f 7269 6361 6c5f 2e72  e_categorical_.r
+00002950: 6574 7572 6e5f 7661 6c75 6520 3d20 6361  eturn_value = ca
+00002960: 745f 7479 7065 2069 6620 6361 745f 7479  t_type if cat_ty
+00002970: 7065 2065 6c73 6520 4e6f 6e65 0a20 2020  pe else None.   
+00002980: 2020 2020 205f 7265 736f 6c76 655f 6172       _resolve_ar
+00002990: 7261 795f 7479 7065 5f2e 7265 7475 726e  ray_type_.return
+000029a0: 5f76 616c 7565 203d 2061 7272 5f74 7970  _value = arr_typ
+000029b0: 6520 6966 2061 7272 5f74 7970 6520 656c  e if arr_type el
+000029c0: 7365 204e 6f6e 650a 2020 2020 2020 2020  se None.        
+000029d0: 7261 775f 6469 6d65 6e73 696f 6e20 3d20  raw_dimension = 
+000029e0: 5f52 6177 4469 6d65 6e73 696f 6e28 4e6f  _RawDimension(No
+000029f0: 6e65 2c20 4e6f 6e65 290a 2020 2020 2020  ne, None).      
+00002a00: 2020 7265 736f 6c76 655f 6361 745f 6361    resolve_cat_ca
+00002a10: 6c6c 7320 3d20 5b63 616c 6c28 7261 775f  lls = [call(raw_
+00002a20: 6469 6d65 6e73 696f 6e29 5d20 6966 2063  dimension)] if c
+00002a30: 6174 5f74 7970 6520 656c 7365 205b 5d0a  at_type else [].
+00002a40: 2020 2020 2020 2020 7265 736f 6c76 655f          resolve_
+00002a50: 6172 725f 6361 6c6c 7320 3d20 5b63 616c  arr_calls = [cal
+00002a60: 6c28 7261 775f 6469 6d65 6e73 696f 6e29  l(raw_dimension)
+00002a70: 5d20 6966 2061 7272 5f74 7970 6520 656c  ] if arr_type el
+00002a80: 7365 205b 5d0a 0a20 2020 2020 2020 2064  se []..        d
+00002a90: 696d 656e 7369 6f6e 5f74 7970 6520 3d20  imension_type = 
+00002aa0: 7261 775f 6469 6d65 6e73 696f 6e2e 6469  raw_dimension.di
+00002ab0: 6d65 6e73 696f 6e5f 7479 7065 0a0a 2020  mension_type..  
+00002ac0: 2020 2020 2020 6173 7365 7274 205f 7265        assert _re
+00002ad0: 736f 6c76 655f 6361 7465 676f 7269 6361  solve_categorica
+00002ae0: 6c5f 2e63 616c 6c5f 6172 6773 5f6c 6973  l_.call_args_lis
+00002af0: 7420 3d3d 2072 6573 6f6c 7665 5f63 6174  t == resolve_cat
+00002b00: 5f63 616c 6c73 0a20 2020 2020 2020 2061  _calls.        a
+00002b10: 7373 6572 7420 5f72 6573 6f6c 7665 5f61  ssert _resolve_a
+00002b20: 7272 6179 5f74 7970 655f 2e63 616c 6c5f  rray_type_.call_
+00002b30: 6172 6773 5f6c 6973 7420 3d3d 2072 6573  args_list == res
+00002b40: 6f6c 7665 5f61 7272 5f63 616c 6c73 0a20  olve_arr_calls. 
+00002b50: 2020 2020 2020 2061 7373 6572 7420 6469         assert di
+00002b60: 6d65 6e73 696f 6e5f 7479 7065 203d 3d20  mension_type == 
+00002b70: 6578 7065 6374 6564 5f76 616c 7565 0a0a  expected_value..
+00002b80: 2020 2020 6465 6620 6275 745f 6974 5f72      def but_it_r
+00002b90: 6169 7365 735f 6f6e 5f75 6e72 6563 6f67  aises_on_unrecog
+00002ba0: 6e69 7a65 645f 6261 7365 5f74 7970 6528  nized_base_type(
+00002bb0: 7365 6c66 2c20 5f62 6173 655f 7479 7065  self, _base_type
+00002bc0: 5f70 726f 705f 293a 0a20 2020 2020 2020  _prop_):.       
+00002bd0: 2072 6177 5f64 696d 656e 7369 6f6e 203d   raw_dimension =
+00002be0: 205f 5261 7744 696d 656e 7369 6f6e 284e   _RawDimension(N
+00002bf0: 6f6e 652c 204e 6f6e 6529 0a20 2020 2020  one, None).     
+00002c00: 2020 205f 6261 7365 5f74 7970 655f 7072     _base_type_pr
+00002c10: 6f70 5f2e 7265 7475 726e 5f76 616c 7565  op_.return_value
+00002c20: 203d 2022 6879 7065 722e 6469 6d65 6e73   = "hyper.dimens
+00002c30: 696f 6e61 6c22 0a20 2020 2020 2020 2077  ional".        w
+00002c40: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+00002c50: 7328 4e6f 7449 6d70 6c65 6d65 6e74 6564  s(NotImplemented
+00002c60: 4572 726f 7229 3a0a 2020 2020 2020 2020  Error):.        
+00002c70: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
+00002c80: 6e2e 6469 6d65 6e73 696f 6e5f 7479 7065  n.dimension_type
+00002c90: 0a0a 2020 2020 6465 6620 6974 5f6b 6e6f  ..    def it_kno
+00002ca0: 7773 5f74 6865 5f64 696d 656e 7369 6f6e  ws_the_dimension
+00002cb0: 5f76 6172 6961 626c 655f 6964 656e 7469  _variable_identi
+00002cc0: 6669 6572 5f74 6f5f 6865 6c70 2873 656c  fier_to_help(sel
+00002cd0: 6629 3a0a 2020 2020 2020 2020 6469 6d65  f):.        dime
+00002ce0: 6e73 696f 6e5f 6469 6374 203d 207b 2272  nsion_dict = {"r
+00002cf0: 6566 6572 656e 6365 7322 3a20 7b22 616c  eferences": {"al
+00002d00: 6961 7322 3a20 2276 6172 736b 6922 7d7d  ias": "varski"}}
+00002d10: 0a20 2020 2020 2020 2072 6177 5f64 696d  .        raw_dim
+00002d20: 656e 7369 6f6e 203d 205f 5261 7744 696d  ension = _RawDim
+00002d30: 656e 7369 6f6e 2864 696d 656e 7369 6f6e  ension(dimension
+00002d40: 5f64 6963 742c 204e 6f6e 6529 0a0a 2020  _dict, None)..  
+00002d50: 2020 2020 2020 616c 6961 7320 3d20 7261        alias = ra
+00002d60: 775f 6469 6d65 6e73 696f 6e2e 5f61 6c69  w_dimension._ali
+00002d70: 6173 0a0a 2020 2020 2020 2020 6173 7365  as..        asse
+00002d80: 7274 2061 6c69 6173 203d 3d20 2276 6172  rt alias == "var
+00002d90: 736b 6922 0a0a 2020 2020 4070 7974 6573  ski"..    @pytes
+00002da0: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
+00002db0: 7a65 280a 2020 2020 2020 2020 2264 696d  ze(.        "dim
+00002dc0: 656e 7369 6f6e 5f64 6963 742c 2065 7870  ension_dict, exp
+00002dd0: 6563 7465 645f 7661 6c75 6522 2c0a 2020  ected_value",.  
+00002de0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+00002df0: 2020 2020 287b 2274 7970 6522 3a20 7b7d      ({"type": {}
+00002e00: 7d2c 2046 616c 7365 292c 0a20 2020 2020  }, False),.     
+00002e10: 2020 2020 2020 2028 7b22 7479 7065 223a         ({"type":
+00002e20: 207b 2263 6174 6567 6f72 6965 7322 3a20   {"categories": 
+00002e30: 5b5d 7d7d 2c20 4661 6c73 6529 2c0a 2020  []}}, False),.  
+00002e40: 2020 2020 2020 2020 2020 287b 2274 7970            ({"typ
+00002e50: 6522 3a20 7b22 6361 7465 676f 7269 6573  e": {"categories
+00002e60: 223a 205b 7b7d 2c20 7b7d 5d7d 7d2c 2046  ": [{}, {}]}}, F
+00002e70: 616c 7365 292c 0a20 2020 2020 2020 2020  alse),.         
+00002e80: 2020 2028 7b22 7479 7065 223a 207b 2263     ({"type": {"c
+00002e90: 6174 6567 6f72 6965 7322 3a20 5b7b 2273  ategories": [{"s
+00002ea0: 656c 6563 7465 6422 3a20 4661 6c73 657d  elected": False}
+00002eb0: 2c20 7b7d 5d7d 7d2c 2046 616c 7365 292c  , {}]}}, False),
+00002ec0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+00002ed0: 7479 7065 223a 207b 2263 6174 6567 6f72  type": {"categor
+00002ee0: 6965 7322 3a20 5b7b 2273 656c 6563 7465  ies": [{"selecte
+00002ef0: 6422 3a20 5472 7565 7d2c 207b 7d5d 7d7d  d": True}, {}]}}
+00002f00: 2c20 5472 7565 292c 0a20 2020 2020 2020  , True),.       
+00002f10: 2029 2c0a 2020 2020 290a 2020 2020 6465   ),.    ).    de
+00002f20: 6620 6974 5f63 616e 5f74 656c 6c5f 7768  f it_can_tell_wh
+00002f30: 656e 5f61 5f64 696d 656e 7369 6f6e 5f68  en_a_dimension_h
+00002f40: 6173 5f61 5f73 656c 6563 7465 645f 6361  as_a_selected_ca
+00002f50: 7465 676f 7279 5f74 6f5f 6865 6c70 280a  tegory_to_help(.
+00002f60: 2020 2020 2020 2020 7365 6c66 2c20 6469          self, di
+00002f70: 6d65 6e73 696f 6e5f 6469 6374 2c20 6578  mension_dict, ex
+00002f80: 7065 6374 6564 5f76 616c 7565 0a20 2020  pected_value.   
+00002f90: 2029 3a0a 2020 2020 2020 2020 7261 775f   ):.        raw_
+00002fa0: 6469 6d65 6e73 696f 6e20 3d20 5f52 6177  dimension = _Raw
+00002fb0: 4469 6d65 6e73 696f 6e28 6469 6d65 6e73  Dimension(dimens
+00002fc0: 696f 6e5f 6469 6374 2c20 4e6f 6e65 290a  ion_dict, None).
+00002fd0: 0a20 2020 2020 2020 2068 6173 5f73 656c  .        has_sel
+00002fe0: 6563 7465 645f 6361 7465 676f 7279 203d  ected_category =
+00002ff0: 2072 6177 5f64 696d 656e 7369 6f6e 2e5f   raw_dimension._
+00003000: 6861 735f 7365 6c65 6374 6564 5f63 6174  has_selected_cat
+00003010: 6567 6f72 790a 0a20 2020 2020 2020 2061  egory..        a
+00003020: 7373 6572 7420 6861 735f 7365 6c65 6374  ssert has_select
+00003030: 6564 5f63 6174 6567 6f72 7920 6973 2065  ed_category is e
+00003040: 7870 6563 7465 645f 7661 6c75 650a 0a20  xpected_value.. 
+00003050: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00003060: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+00003070: 2020 2020 2022 6469 6d65 6e73 696f 6e5f       "dimension_
+00003080: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+00003090: 616c 7565 222c 0a20 2020 2020 2020 2028  alue",.        (
+000030a0: 287b 2272 6566 6572 656e 6365 7322 3a20  ({"references": 
+000030b0: 7b7d 7d2c 2046 616c 7365 292c 2028 7b22  {}}, False), ({"
+000030c0: 7265 6665 7265 6e63 6573 223a 207b 2273  references": {"s
+000030d0: 7562 7265 6665 7265 6e63 6573 223a 207b  ubreferences": {
+000030e0: 7d7d 7d2c 2054 7275 6529 292c 0a20 2020  }}}, True)),.   
+000030f0: 2029 0a20 2020 2064 6566 2069 745f 6469   ).    def it_di
+00003100: 7374 696e 6775 6973 6865 735f 616e 5f61  stinguishes_an_a
+00003110: 7272 6179 5f63 6174 6567 6f72 6963 616c  rray_categorical
+00003120: 5f74 7970 655f 746f 5f68 656c 7028 0a20  _type_to_help(. 
+00003130: 2020 2020 2020 2073 656c 662c 2064 696d         self, dim
+00003140: 656e 7369 6f6e 5f64 6963 742c 2065 7870  ension_dict, exp
+00003150: 6563 7465 645f 7661 6c75 650a 2020 2020  ected_value.    
+00003160: 293a 0a20 2020 2020 2020 2072 6177 5f64  ):.        raw_d
+00003170: 696d 656e 7369 6f6e 203d 205f 5261 7744  imension = _RawD
+00003180: 696d 656e 7369 6f6e 2864 696d 656e 7369  imension(dimensi
+00003190: 6f6e 5f64 6963 742c 204e 6f6e 6529 0a0a  on_dict, None)..
+000031a0: 2020 2020 2020 2020 6973 5f61 7272 6179          is_array
+000031b0: 5f63 6174 203d 2072 6177 5f64 696d 656e  _cat = raw_dimen
+000031c0: 7369 6f6e 2e5f 6973 5f61 7272 6179 5f63  sion._is_array_c
+000031d0: 6174 0a0a 2020 2020 2020 2020 6173 7365  at..        asse
+000031e0: 7274 2069 735f 6172 7261 795f 6361 7420  rt is_array_cat 
+000031f0: 3d3d 2065 7870 6563 7465 645f 7661 6c75  == expected_valu
+00003200: 650a 0a20 2020 2064 6566 2069 745f 6669  e..    def it_fi
+00003210: 6e64 735f 7468 655f 7375 6273 6571 7565  nds_the_subseque
+00003220: 6e74 5f72 6177 5f64 696d 656e 7369 6f6e  nt_raw_dimension
+00003230: 5f74 6f5f 6865 6c70 2873 656c 662c 2072  _to_help(self, r
+00003240: 6571 7565 7374 2c20 6469 6d65 6e73 696f  equest, dimensio
+00003250: 6e5f 6469 6374 735f 293a 0a20 2020 2020  n_dicts_):.     
+00003260: 2020 2064 696d 656e 7369 6f6e 5f64 6963     dimension_dic
+00003270: 745f 203d 2064 696d 656e 7369 6f6e 5f64  t_ = dimension_d
+00003280: 6963 7473 5f5b 315d 0a20 2020 2020 2020  icts_[1].       
+00003290: 206e 6578 745f 6469 6d65 6e73 696f 6e5f   next_dimension_
+000032a0: 6469 6374 5f20 3d20 6469 6d65 6e73 696f  dict_ = dimensio
+000032b0: 6e5f 6469 6374 735f 5b32 5d0a 2020 2020  n_dicts_[2].    
+000032c0: 2020 2020 7261 775f 6469 6d65 6e73 696f      raw_dimensio
+000032d0: 6e20 3d20 5f52 6177 4469 6d65 6e73 696f  n = _RawDimensio
+000032e0: 6e28 6469 6d65 6e73 696f 6e5f 6469 6374  n(dimension_dict
+000032f0: 5f2c 2064 696d 656e 7369 6f6e 5f64 6963  _, dimension_dic
+00003300: 7473 5f29 0a20 2020 2020 2020 2023 202d  ts_).        # -
+00003310: 2d69 6e69 7469 616c 697a 6572 206d 7573  -initializer mus
+00003320: 7420 6265 206d 6f63 6b65 6420 6166 7465  t be mocked afte
+00003330: 7220 636f 6e74 7275 6374 696e 6720 7261  r contructing ra
+00003340: 775f 6469 6d65 6e73 696f 6e0a 2020 2020  w_dimension.    
+00003350: 2020 2020 2320 2d2d 6f74 6865 7277 6973      # --otherwis
+00003360: 6520 6974 2077 6f75 6c64 2068 6176 6520  e it would have 
+00003370: 6e6f 2069 6e73 7461 6e63 6520 7661 7269  no instance vari
+00003380: 6162 6c65 730a 2020 2020 2020 2020 5f69  ables.        _i
+00003390: 6e69 745f 203d 2069 6e69 7469 616c 697a  nit_ = initializ
+000033a0: 6572 5f6d 6f63 6b28 7265 7175 6573 742c  er_mock(request,
+000033b0: 205f 5261 7744 696d 656e 7369 6f6e 290a   _RawDimension).
+000033c0: 0a20 2020 2020 2020 206e 6578 745f 7261  .        next_ra
+000033d0: 775f 6469 6d65 6e73 696f 6e20 3d20 7261  w_dimension = ra
+000033e0: 775f 6469 6d65 6e73 696f 6e2e 5f6e 6578  w_dimension._nex
+000033f0: 745f 7261 775f 6469 6d65 6e73 696f 6e0a  t_raw_dimension.
+00003400: 0a20 2020 2020 2020 205f 696e 6974 5f2e  .        _init_.
+00003410: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+00003420: 6365 5f77 6974 6828 0a20 2020 2020 2020  ce_with(.       
+00003430: 2020 2020 206e 6578 745f 7261 775f 6469       next_raw_di
+00003440: 6d65 6e73 696f 6e2c 206e 6578 745f 6469  mension, next_di
+00003450: 6d65 6e73 696f 6e5f 6469 6374 5f2c 2064  mension_dict_, d
+00003460: 696d 656e 7369 6f6e 5f64 6963 7473 5f0a  imension_dicts_.
+00003470: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00003480: 2020 6173 7365 7274 2074 7970 6528 6e65    assert type(ne
+00003490: 7874 5f72 6177 5f64 696d 656e 7369 6f6e  xt_raw_dimension
+000034a0: 292e 5f5f 6e61 6d65 5f5f 203d 3d20 225f  ).__name__ == "_
+000034b0: 5261 7744 696d 656e 7369 6f6e 220a 0a20  RawDimension".. 
+000034c0: 2020 2064 6566 2062 7574 5f69 745f 7265     def but_it_re
+000034d0: 7475 726e 735f 4e6f 6e65 5f66 6f72 5f74  turns_None_for_t
+000034e0: 6865 5f6c 6173 745f 6469 6d65 6e73 696f  he_last_dimensio
+000034f0: 6e28 7365 6c66 2c20 6469 6d65 6e73 696f  n(self, dimensio
+00003500: 6e5f 6469 6374 735f 293a 0a20 2020 2020  n_dicts_):.     
+00003510: 2020 2064 696d 656e 7369 6f6e 5f64 6963     dimension_dic
+00003520: 745f 203d 2064 696d 656e 7369 6f6e 5f64  t_ = dimension_d
+00003530: 6963 7473 5f5b 325d 0a20 2020 2020 2020  icts_[2].       
+00003540: 2072 6177 5f64 696d 656e 7369 6f6e 203d   raw_dimension =
+00003550: 205f 5261 7744 696d 656e 7369 6f6e 2864   _RawDimension(d
+00003560: 696d 656e 7369 6f6e 5f64 6963 745f 2c20  imension_dict_, 
+00003570: 6469 6d65 6e73 696f 6e5f 6469 6374 735f  dimension_dicts_
+00003580: 290a 2020 2020 2020 2020 6e65 7874 5f72  ).        next_r
+00003590: 6177 5f64 696d 656e 7369 6f6e 203d 2072  aw_dimension = r
+000035a0: 6177 5f64 696d 656e 7369 6f6e 2e5f 6e65  aw_dimension._ne
+000035b0: 7874 5f72 6177 5f64 696d 656e 7369 6f6e  xt_raw_dimension
+000035c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000035d0: 6e65 7874 5f72 6177 5f64 696d 656e 7369  next_raw_dimensi
+000035e0: 6f6e 2069 7320 4e6f 6e65 0a0a 2020 2020  on is None..    
+000035f0: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
+00003600: 616d 6574 7269 7a65 280a 2020 2020 2020  ametrize(.      
+00003610: 2020 2269 735f 6c61 7374 2c20 6261 7365    "is_last, base
+00003620: 5f74 7970 652c 2068 6173 5f73 656c 5f63  _type, has_sel_c
+00003630: 6174 2c20 616c 6961 732c 2065 7870 6563  at, alias, expec
+00003640: 7465 645f 7661 6c75 6522 2c0a 2020 2020  ted_value",.    
+00003650: 2020 2020 2828 4661 6c73 652c 204e 6f6e      ((False, Non
+00003660: 652c 204e 6f6e 652c 204e 6f6e 652c 2044  e, None, None, D
+00003670: 542e 4341 292c 292c 0a20 2020 2029 0a20  T.CA),),.    ). 
+00003680: 2020 2064 6566 2069 745f 7265 736f 6c76     def it_resolv
+00003690: 6573 5f61 6e5f 6172 7261 795f 7479 7065  es_an_array_type
+000036a0: 5f74 6f5f 6865 6c70 280a 2020 2020 2020  _to_help(.      
+000036b0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+000036c0: 6973 5f6c 6173 742c 0a20 2020 2020 2020  is_last,.       
+000036d0: 2062 6173 655f 7479 7065 2c0a 2020 2020   base_type,.    
+000036e0: 2020 2020 6861 735f 7365 6c5f 6361 742c      has_sel_cat,
+000036f0: 0a20 2020 2020 2020 2061 6c69 6173 2c0a  .        alias,.
+00003700: 2020 2020 2020 2020 6578 7065 6374 6564          expected
+00003710: 5f76 616c 7565 2c0a 2020 2020 2020 2020  _value,.        
+00003720: 7261 775f 6469 6d65 6e73 696f 6e5f 2c0a  raw_dimension_,.
+00003730: 2020 2020 2020 2020 5f6e 6578 745f 7261          _next_ra
+00003740: 775f 6469 6d65 6e73 696f 6e5f 7072 6f70  w_dimension_prop
+00003750: 5f2c 0a20 2020 2029 3a0a 2020 2020 2020  _,.    ):.      
+00003760: 2020 7261 775f 6469 6d65 6e73 696f 6e5f    raw_dimension_
+00003770: 2e5f 6261 7365 5f74 7970 6520 3d20 6261  ._base_type = ba
+00003780: 7365 5f74 7970 650a 2020 2020 2020 2020  se_type.        
+00003790: 7261 775f 6469 6d65 6e73 696f 6e5f 2e5f  raw_dimension_._
+000037a0: 6861 735f 7365 6c65 6374 6564 5f63 6174  has_selected_cat
+000037b0: 6567 6f72 7920 3d20 6861 735f 7365 6c5f  egory = has_sel_
+000037c0: 6361 740a 2020 2020 2020 2020 7261 775f  cat.        raw_
+000037d0: 6469 6d65 6e73 696f 6e5f 2e5f 616c 6961  dimension_._alia
+000037e0: 7320 3d20 616c 6961 730a 2020 2020 2020  s = alias.      
+000037f0: 2020 6e65 7874 5f72 6177 5f64 696d 656e    next_raw_dimen
+00003800: 7369 6f6e 203d 204e 6f6e 6520 6966 2069  sion = None if i
+00003810: 735f 6c61 7374 2065 6c73 6520 7261 775f  s_last else raw_
+00003820: 6469 6d65 6e73 696f 6e5f 0a20 2020 2020  dimension_.     
+00003830: 2020 205f 6e65 7874 5f72 6177 5f64 696d     _next_raw_dim
+00003840: 656e 7369 6f6e 5f70 726f 705f 2e72 6574  ension_prop_.ret
+00003850: 7572 6e5f 7661 6c75 6520 3d20 6e65 7874  urn_value = next
+00003860: 5f72 6177 5f64 696d 656e 7369 6f6e 0a20  _raw_dimension. 
+00003870: 2020 2020 2020 2072 6177 5f64 696d 656e         raw_dimen
+00003880: 7369 6f6e 203d 205f 5261 7744 696d 656e  sion = _RawDimen
+00003890: 7369 6f6e 284e 6f6e 652c 204e 6f6e 6529  sion(None, None)
+000038a0: 0a0a 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
+000038b0: 696f 6e5f 7479 7065 203d 2072 6177 5f64  ion_type = raw_d
+000038c0: 696d 656e 7369 6f6e 2e5f 7265 736f 6c76  imension._resolv
+000038d0: 655f 6172 7261 795f 7479 7065 2829 0a0a  e_array_type()..
+000038e0: 2020 2020 2020 2020 6173 7365 7274 2064          assert d
+000038f0: 696d 656e 7369 6f6e 5f74 7970 6520 3d3d  imension_type ==
+00003900: 2065 7870 6563 7465 645f 7661 6c75 650a   expected_value.
+00003910: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+00003920: 6b2e 7061 7261 6d65 7472 697a 6528 0a20  k.parametrize(. 
+00003930: 2020 2020 2020 2022 6973 5f61 7272 6179         "is_array
+00003940: 5f63 6174 2c20 6861 735f 7365 6c65 6374  _cat, has_select
+00003950: 6564 5f63 6174 2c20 6973 5f6c 6f67 6963  ed_cat, is_logic
+00003960: 616c 5f74 7970 652c 2065 7870 6563 7465  al_type, expecte
+00003970: 645f 7661 6c75 6522 2c0a 2020 2020 2020  d_value",.      
+00003980: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+00003990: 2846 616c 7365 2c20 4661 6c73 652c 2046  (False, False, F
+000039a0: 616c 7365 2c20 4454 2e43 4154 292c 0a20  alse, DT.CAT),. 
+000039b0: 2020 2020 2020 2020 2020 2028 4661 6c73             (Fals
+000039c0: 652c 2054 7275 652c 2046 616c 7365 2c20  e, True, False, 
+000039d0: 4454 2e43 4154 292c 0a20 2020 2020 2020  DT.CAT),.       
+000039e0: 2020 2020 2028 4661 6c73 652c 2054 7275       (False, Tru
+000039f0: 652c 2054 7275 652c 2044 542e 4c4f 4749  e, True, DT.LOGI
+00003a00: 4341 4c29 2c0a 2020 2020 2020 2020 2020  CAL),.          
+00003a10: 2020 2854 7275 652c 2046 616c 7365 2c20    (True, False, 
+00003a20: 4661 6c73 652c 2044 542e 4341 5f43 4154  False, DT.CA_CAT
+00003a30: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00003a40: 5472 7565 2c20 5472 7565 2c20 5472 7565  True, True, True
+00003a50: 2c20 4454 2e4d 525f 4341 5429 2c0a 2020  , DT.MR_CAT),.  
+00003a60: 2020 2020 2020 2020 2020 2854 7275 652c            (True,
+00003a70: 2054 7275 652c 2046 616c 7365 2c20 4454   True, False, DT
+00003a80: 2e43 415f 4341 5429 2c0a 2020 2020 2020  .CA_CAT),.      
+00003a90: 2020 292c 0a20 2020 2029 0a20 2020 2064    ),.    ).    d
+00003aa0: 6566 2069 745f 7265 736f 6c76 6573 5f61  ef it_resolves_a
+00003ab0: 5f63 6174 6567 6f72 6963 616c 5f74 7970  _categorical_typ
+00003ac0: 655f 746f 5f68 656c 7028 0a20 2020 2020  e_to_help(.     
+00003ad0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00003ae0: 2069 735f 6172 7261 795f 6361 742c 0a20   is_array_cat,. 
+00003af0: 2020 2020 2020 2068 6173 5f73 656c 6563         has_selec
+00003b00: 7465 645f 6361 742c 0a20 2020 2020 2020  ted_cat,.       
+00003b10: 2069 735f 6c6f 6769 6361 6c5f 7479 7065   is_logical_type
+00003b20: 2c0a 2020 2020 2020 2020 6578 7065 6374  ,.        expect
+00003b30: 6564 5f76 616c 7565 2c0a 2020 2020 2020  ed_value,.      
+00003b40: 2020 5f69 735f 6172 7261 795f 6361 745f    _is_array_cat_
+00003b50: 7072 6f70 5f2c 0a20 2020 2020 2020 205f  prop_,.        _
+00003b60: 6973 5f63 6174 5f64 6174 655f 7072 6f70  is_cat_date_prop
+00003b70: 5f2c 0a20 2020 2020 2020 205f 6861 735f  _,.        _has_
+00003b80: 7365 6c65 6374 6564 5f63 6174 6567 6f72  selected_categor
+00003b90: 795f 7072 6f70 5f2c 0a20 2020 2020 2020  y_prop_,.       
+00003ba0: 205f 6973 5f6c 6f67 6963 616c 5f74 7970   _is_logical_typ
+00003bb0: 655f 7072 6f70 5f2c 0a20 2020 2029 3a0a  e_prop_,.    ):.
+00003bc0: 2020 2020 2020 2020 5f69 735f 6172 7261          _is_arra
+00003bd0: 795f 6361 745f 7072 6f70 5f2e 7265 7475  y_cat_prop_.retu
+00003be0: 726e 5f76 616c 7565 203d 2069 735f 6172  rn_value = is_ar
+00003bf0: 7261 795f 6361 740a 2020 2020 2020 2020  ray_cat.        
+00003c00: 5f69 735f 6361 745f 6461 7465 5f70 726f  _is_cat_date_pro
+00003c10: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
+00003c20: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
+00003c30: 5f68 6173 5f73 656c 6563 7465 645f 6361  _has_selected_ca
+00003c40: 7465 676f 7279 5f70 726f 705f 2e72 6574  tegory_prop_.ret
+00003c50: 7572 6e5f 7661 6c75 6520 3d20 6861 735f  urn_value = has_
+00003c60: 7365 6c65 6374 6564 5f63 6174 0a20 2020  selected_cat.   
+00003c70: 2020 2020 205f 6973 5f6c 6f67 6963 616c       _is_logical
+00003c80: 5f74 7970 655f 7072 6f70 5f2e 7265 7475  _type_prop_.retu
+00003c90: 726e 5f76 616c 7565 203d 2069 735f 6c6f  rn_value = is_lo
+00003ca0: 6769 6361 6c5f 7479 7065 0a20 2020 2020  gical_type.     
+00003cb0: 2020 2072 6177 5f64 696d 656e 7369 6f6e     raw_dimension
+00003cc0: 203d 205f 5261 7744 696d 656e 7369 6f6e   = _RawDimension
+00003cd0: 284e 6f6e 652c 204e 6f6e 6529 0a0a 2020  (None, None)..  
+00003ce0: 2020 2020 2020 6469 6d65 6e73 696f 6e5f        dimension_
+00003cf0: 7479 7065 203d 2072 6177 5f64 696d 656e  type = raw_dimen
+00003d00: 7369 6f6e 2e5f 7265 736f 6c76 655f 6361  sion._resolve_ca
+00003d10: 7465 676f 7269 6361 6c28 290a 0a20 2020  tegorical()..   
+00003d20: 2020 2020 2061 7373 6572 7420 6469 6d65       assert dime
+00003d30: 6e73 696f 6e5f 7479 7065 203d 3d20 6578  nsion_type == ex
+00003d40: 7065 6374 6564 5f76 616c 7565 0a0a 2020  pected_value..  
+00003d50: 2020 2320 6669 7874 7572 6520 636f 6d70    # fixture comp
+00003d60: 6f6e 656e 7473 202d 2d2d 2d2d 2d2d 2d2d  onents ---------
+00003d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003d90: 2d2d 2d2d 0a0a 2020 2020 4070 7974 6573  ----..    @pytes
+00003da0: 742e 6669 7874 7572 650a 2020 2020 6465  t.fixture.    de
+00003db0: 6620 5f62 6173 655f 7479 7065 5f70 726f  f _base_type_pro
+00003dc0: 705f 2873 656c 662c 2072 6571 7565 7374  p_(self, request
+00003dd0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00003de0: 6e20 7072 6f70 6572 7479 5f6d 6f63 6b28  n property_mock(
+00003df0: 7265 7175 6573 742c 205f 5261 7744 696d  request, _RawDim
+00003e00: 656e 7369 6f6e 2c20 225f 6261 7365 5f74  ension, "_base_t
+00003e10: 7970 6522 290a 0a20 2020 2040 7079 7465  ype")..    @pyte
+00003e20: 7374 2e66 6978 7475 7265 0a20 2020 2064  st.fixture.    d
+00003e30: 6566 2064 696d 656e 7369 6f6e 5f64 6963  ef dimension_dic
+00003e40: 7473 5f28 7365 6c66 293a 0a20 2020 2020  ts_(self):.     
+00003e50: 2020 2072 6574 7572 6e20 287b 2264 696d     return ({"dim
+00003e60: 222c 2030 7d2c 207b 2264 696d 222c 2031  ", 0}, {"dim", 1
+00003e70: 7d2c 207b 2264 696d 222c 2032 7d29 0a0a  }, {"dim", 2})..
+00003e80: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+00003e90: 7572 650a 2020 2020 6465 6620 5f68 6173  ure.    def _has
+00003ea0: 5f73 656c 6563 7465 645f 6361 7465 676f  _selected_catego
+00003eb0: 7279 5f70 726f 705f 2873 656c 662c 2072  ry_prop_(self, r
+00003ec0: 6571 7565 7374 293a 0a20 2020 2020 2020  equest):.       
+00003ed0: 2072 6574 7572 6e20 7072 6f70 6572 7479   return property
+00003ee0: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
+00003ef0: 5261 7744 696d 656e 7369 6f6e 2c20 225f  RawDimension, "_
+00003f00: 6861 735f 7365 6c65 6374 6564 5f63 6174  has_selected_cat
+00003f10: 6567 6f72 7922 290a 0a20 2020 2040 7079  egory")..    @py
+00003f20: 7465 7374 2e66 6978 7475 7265 0a20 2020  test.fixture.   
+00003f30: 2064 6566 205f 6973 5f61 7272 6179 5f63   def _is_array_c
+00003f40: 6174 5f70 726f 705f 2873 656c 662c 2072  at_prop_(self, r
+00003f50: 6571 7565 7374 293a 0a20 2020 2020 2020  equest):.       
+00003f60: 2072 6574 7572 6e20 7072 6f70 6572 7479   return property
+00003f70: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
+00003f80: 5261 7744 696d 656e 7369 6f6e 2c20 225f  RawDimension, "_
+00003f90: 6973 5f61 7272 6179 5f63 6174 2229 0a0a  is_array_cat")..
+00003fa0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+00003fb0: 7572 650a 2020 2020 6465 6620 5f69 735f  ure.    def _is_
+00003fc0: 6361 745f 6461 7465 5f70 726f 705f 2873  cat_date_prop_(s
+00003fd0: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00003fe0: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
+00003ff0: 6f70 6572 7479 5f6d 6f63 6b28 7265 7175  operty_mock(requ
+00004000: 6573 742c 205f 5261 7744 696d 656e 7369  est, _RawDimensi
+00004010: 6f6e 2c20 225f 6973 5f63 6174 5f64 6174  on, "_is_cat_dat
+00004020: 6522 290a 0a20 2020 2040 7079 7465 7374  e")..    @pytest
+00004030: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+00004040: 205f 6973 5f6c 6f67 6963 616c 5f74 7970   _is_logical_typ
+00004050: 655f 7072 6f70 5f28 7365 6c66 2c20 7265  e_prop_(self, re
+00004060: 7175 6573 7429 3a0a 2020 2020 2020 2020  quest):.        
+00004070: 7265 7475 726e 2070 726f 7065 7274 795f  return property_
+00004080: 6d6f 636b 2872 6571 7565 7374 2c20 5f52  mock(request, _R
+00004090: 6177 4469 6d65 6e73 696f 6e2c 2022 5f69  awDimension, "_i
+000040a0: 735f 6c6f 6769 6361 6c5f 7479 7065 2229  s_logical_type")
+000040b0: 0a0a 2020 2020 4070 7974 6573 742e 6669  ..    @pytest.fi
+000040c0: 7874 7572 650a 2020 2020 6465 6620 5f6e  xture.    def _n
+000040d0: 6578 745f 7261 775f 6469 6d65 6e73 696f  ext_raw_dimensio
+000040e0: 6e5f 7072 6f70 5f28 7365 6c66 2c20 7265  n_prop_(self, re
+000040f0: 7175 6573 7429 3a0a 2020 2020 2020 2020  quest):.        
+00004100: 7265 7475 726e 2070 726f 7065 7274 795f  return property_
+00004110: 6d6f 636b 2872 6571 7565 7374 2c20 5f52  mock(request, _R
+00004120: 6177 4469 6d65 6e73 696f 6e2c 2022 5f6e  awDimension, "_n
+00004130: 6578 745f 7261 775f 6469 6d65 6e73 696f  ext_raw_dimensio
+00004140: 6e22 290a 0a20 2020 2040 7079 7465 7374  n")..    @pytest
+00004150: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+00004160: 2072 6177 5f64 696d 656e 7369 6f6e 5f28   raw_dimension_(
+00004170: 7365 6c66 2c20 7265 7175 6573 7429 3a0a  self, request):.
+00004180: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00004190: 6e73 7461 6e63 655f 6d6f 636b 2872 6571  nstance_mock(req
+000041a0: 7565 7374 2c20 5f52 6177 4469 6d65 6e73  uest, _RawDimens
+000041b0: 696f 6e29 0a0a 2020 2020 4070 7974 6573  ion)..    @pytes
+000041c0: 742e 6669 7874 7572 650a 2020 2020 6465  t.fixture.    de
+000041d0: 6620 5f72 6573 6f6c 7665 5f61 7272 6179  f _resolve_array
+000041e0: 5f74 7970 655f 2873 656c 662c 2072 6571  _type_(self, req
+000041f0: 7565 7374 293a 0a20 2020 2020 2020 2072  uest):.        r
+00004200: 6574 7572 6e20 6d65 7468 6f64 5f6d 6f63  eturn method_moc
+00004210: 6b28 7265 7175 6573 742c 205f 5261 7744  k(request, _RawD
+00004220: 696d 656e 7369 6f6e 2c20 225f 7265 736f  imension, "_reso
+00004230: 6c76 655f 6172 7261 795f 7479 7065 2229  lve_array_type")
+00004240: 0a0a 2020 2020 4070 7974 6573 742e 6669  ..    @pytest.fi
+00004250: 7874 7572 650a 2020 2020 6465 6620 5f72  xture.    def _r
+00004260: 6573 6f6c 7665 5f63 6174 6567 6f72 6963  esolve_categoric
+00004270: 616c 5f28 7365 6c66 2c20 7265 7175 6573  al_(self, reques
+00004280: 7429 3a0a 2020 2020 2020 2020 7265 7475  t):.        retu
+00004290: 726e 206d 6574 686f 645f 6d6f 636b 2872  rn method_mock(r
+000042a0: 6571 7565 7374 2c20 5f52 6177 4469 6d65  equest, _RawDime
+000042b0: 6e73 696f 6e2c 2022 5f72 6573 6f6c 7665  nsion, "_resolve
+000042c0: 5f63 6174 6567 6f72 6963 616c 2229 0a0a  _categorical")..
+000042d0: 0a63 6c61 7373 2044 6573 6372 6962 6544  .class DescribeD
+000042e0: 696d 656e 7369 6f6e 3a0a 2020 2020 2222  imension:.    ""
+000042f0: 2255 6e69 742d 7465 7374 2073 7569 7465  "Unit-test suite
+00004300: 2066 6f72 2060 6372 2e63 7562 652e 6469   for `cr.cube.di
+00004310: 6d65 6e73 696f 6e2e 4469 6d65 6e73 696f  mension.Dimensio
+00004320: 6e60 206f 626a 6563 742e 2222 220a 0a20  n` object.""".. 
+00004330: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00004340: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+00004350: 2020 2020 2022 6469 6d65 6e73 696f 6e5f       "dimension_
+00004360: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+00004370: 616c 7565 222c 0a20 2020 2020 2020 2028  alue",.        (
+00004380: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+00004390: 7265 6665 7265 6e63 6573 223a 207b 7d7d  references": {}}
+000043a0: 2c20 4e6f 6e65 292c 0a20 2020 2020 2020  , None),.       
+000043b0: 2020 2020 2028 7b22 7265 6665 7265 6e63       ({"referenc
+000043c0: 6573 223a 207b 2261 6c69 6173 223a 2022  es": {"alias": "
+000043d0: 456c 6961 7322 7d7d 2c20 2245 6c69 6173  Elias"}}, "Elias
+000043e0: 2229 2c0a 2020 2020 2020 2020 292c 0a20  "),.        ),. 
+000043f0: 2020 2029 0a20 2020 2064 6566 2069 745f     ).    def it_
+00004400: 6b6e 6f77 735f 6974 735f 616c 6961 7328  knows_its_alias(
+00004410: 7365 6c66 2c20 6469 6d65 6e73 696f 6e5f  self, dimension_
+00004420: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+00004430: 616c 7565 293a 0a20 2020 2020 2020 2061  alue):.        a
+00004440: 7373 6572 7420 4469 6d65 6e73 696f 6e28  ssert Dimension(
+00004450: 6469 6d65 6e73 696f 6e5f 6469 6374 2c20  dimension_dict, 
+00004460: 4e6f 6e65 292e 616c 6961 7320 3d3d 2065  None).alias == e
+00004470: 7870 6563 7465 645f 7661 6c75 650a 0a20  xpected_value.. 
+00004480: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00004490: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+000044a0: 2020 2020 2022 6469 6d65 6e73 696f 6e5f       "dimension_
+000044b0: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+000044c0: 616c 7565 222c 0a20 2020 2020 2020 2028  alue",.        (
+000044d0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+000044e0: 7265 6665 7265 6e63 6573 223a 207b 7d7d  references": {}}
+000044f0: 2c20 2222 292c 0a20 2020 2020 2020 2020  , ""),.         
+00004500: 2020 2028 7b22 7265 6665 7265 6e63 6573     ({"references
+00004510: 223a 207b 2264 6573 6372 6970 7469 6f6e  ": {"description
+00004520: 223a 204e 6f6e 657d 7d2c 2022 2229 2c0a  ": None}}, ""),.
+00004530: 2020 2020 2020 2020 2020 2020 287b 2272              ({"r
+00004540: 6566 6572 656e 6365 7322 3a20 7b22 6465  eferences": {"de
+00004550: 7363 7269 7074 696f 6e22 3a20 2222 7d7d  scription": ""}}
+00004560: 2c20 2222 292c 0a20 2020 2020 2020 2020  , ""),.         
+00004570: 2020 2028 7b22 7265 6665 7265 6e63 6573     ({"references
+00004580: 223a 207b 2264 6573 6372 6970 7469 6f6e  ": {"description
+00004590: 223a 2022 4372 756e 6368 696e 6573 7322  ": "Crunchiness"
+000045a0: 7d7d 2c20 2243 7275 6e63 6869 6e65 7373  }}, "Crunchiness
+000045b0: 2229 2c0a 2020 2020 2020 2020 292c 0a20  "),.        ),. 
+000045c0: 2020 2029 0a20 2020 2064 6566 2069 745f     ).    def it_
+000045d0: 6b6e 6f77 735f 6974 735f 6465 7363 7269  knows_its_descri
+000045e0: 7074 696f 6e28 7365 6c66 2c20 6469 6d65  ption(self, dime
+000045f0: 6e73 696f 6e5f 6469 6374 2c20 6578 7065  nsion_dict, expe
+00004600: 6374 6564 5f76 616c 7565 293a 0a20 2020  cted_value):.   
+00004610: 2020 2020 2061 7373 6572 7420 4469 6d65       assert Dime
+00004620: 6e73 696f 6e28 6469 6d65 6e73 696f 6e5f  nsion(dimension_
+00004630: 6469 6374 2c20 4e6f 6e65 292e 6465 7363  dict, None).desc
+00004640: 7269 7074 696f 6e20 3d3d 2065 7870 6563  ription == expec
+00004650: 7465 645f 7661 6c75 650a 0a20 2020 2064  ted_value..    d
+00004660: 6566 2069 745f 6b6e 6f77 735f 6974 735f  ef it_knows_its_
+00004670: 6469 6d65 6e73 696f 6e5f 7479 7065 2873  dimension_type(s
+00004680: 656c 6629 3a0a 2020 2020 2020 2020 6173  elf):.        as
+00004690: 7365 7274 2044 696d 656e 7369 6f6e 284e  sert Dimension(N
+000046a0: 6f6e 652c 2044 542e 4341 5429 2e64 696d  one, DT.CAT).dim
+000046b0: 656e 7369 6f6e 5f74 7970 6520 3d3d 2044  ension_type == D
+000046c0: 542e 4341 540a 0a20 2020 2064 6566 2069  T.CAT..    def i
+000046d0: 745f 6b6e 6f77 735f 6974 735f 656c 656d  t_knows_its_elem
+000046e0: 656e 745f 6964 7328 7365 6c66 2c20 7265  ent_ids(self, re
+000046f0: 7175 6573 742c 2076 616c 6964 5f65 6c65  quest, valid_ele
+00004700: 6d65 6e74 735f 7072 6f70 5f29 3a0a 2020  ments_prop_):.  
+00004710: 2020 2020 2020 7661 6c69 645f 656c 656d        valid_elem
+00004720: 656e 7473 5f70 726f 705f 2e72 6574 7572  ents_prop_.retur
+00004730: 6e5f 7661 6c75 6520 3d20 280a 2020 2020  n_value = (.    
+00004740: 2020 2020 2020 2020 696e 7374 616e 6365          instance
+00004750: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
+00004760: 456c 656d 656e 742c 2065 6c65 6d65 6e74  Element, element
+00004770: 5f69 643d 2869 202b 2031 2929 2066 6f72  _id=(i + 1)) for
+00004780: 2069 2069 6e20 7261 6e67 6528 3629 0a20   i in range(6). 
+00004790: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000047a0: 2061 7373 6572 7420 4469 6d65 6e73 696f   assert Dimensio
+000047b0: 6e28 4e6f 6e65 2c20 4e6f 6e65 292e 656c  n(None, None).el
+000047c0: 656d 656e 745f 6964 7320 3d3d 2028 312c  ement_ids == (1,
+000047d0: 2032 2c20 332c 2034 2c20 352c 2036 290a   2, 3, 4, 5, 6).
+000047e0: 0a20 2020 2064 6566 2069 745f 6b6e 6f77  .    def it_know
+000047f0: 735f 6974 735f 656c 656d 656e 745f 6c61  s_its_element_la
+00004800: 6265 6c73 2873 656c 662c 2072 6571 7565  bels(self, reque
+00004810: 7374 2c20 7661 6c69 645f 656c 656d 656e  st, valid_elemen
+00004820: 7473 5f70 726f 705f 293a 0a20 2020 2020  ts_prop_):.     
+00004830: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
+00004840: 735f 7072 6f70 5f2e 7265 7475 726e 5f76  s_prop_.return_v
+00004850: 616c 7565 203d 2028 0a20 2020 2020 2020  alue = (.       
+00004860: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
+00004870: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
+00004880: 6d65 6e74 2c20 6c61 6265 6c3d 226c 626c  ment, label="lbl
+00004890: 2025 7322 2025 2028 6920 2b20 3129 2920   %s" % (i + 1)) 
+000048a0: 666f 7220 6920 696e 2072 616e 6765 2833  for i in range(3
+000048b0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+000048c0: 2020 2020 6173 7365 7274 2044 696d 656e      assert Dimen
+000048d0: 7369 6f6e 284e 6f6e 652c 204e 6f6e 6529  sion(None, None)
+000048e0: 2e65 6c65 6d65 6e74 5f6c 6162 656c 7320  .element_labels 
+000048f0: 3d3d 2028 226c 626c 2031 222c 2022 6c62  == ("lbl 1", "lb
+00004900: 6c20 3222 2c20 226c 626c 2033 2229 0a0a  l 2", "lbl 3")..
+00004910: 2020 2020 6465 6620 6974 5f63 6f6d 7075      def it_compu
+00004920: 7465 735f 6974 735f 6869 6464 656e 5f69  tes_its_hidden_i
+00004930: 6478 7328 7365 6c66 2c20 7265 7175 6573  dxs(self, reques
+00004940: 742c 2076 616c 6964 5f65 6c65 6d65 6e74  t, valid_element
+00004950: 735f 7072 6f70 5f29 3a0a 2020 2020 2020  s_prop_):.      
+00004960: 2020 7661 6c69 645f 656c 656d 656e 7473    valid_elements
+00004970: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
+00004980: 6c75 6520 3d20 280a 2020 2020 2020 2020  lue = (.        
+00004990: 2020 2020 696e 7374 616e 6365 5f6d 6f63      instance_moc
+000049a0: 6b28 7265 7175 6573 742c 205f 456c 656d  k(request, _Elem
+000049b0: 656e 742c 2069 735f 6869 6464 656e 3d62  ent, is_hidden=b
+000049c0: 6f6f 6c28 6920 2520 3229 2920 666f 7220  ool(i % 2)) for 
+000049d0: 6920 696e 2072 616e 6765 2837 290a 2020  i in range(7).  
+000049e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000049f0: 6173 7365 7274 2044 696d 656e 7369 6f6e  assert Dimension
+00004a00: 284e 6f6e 652c 204e 6f6e 6529 2e68 6964  (None, None).hid
+00004a10: 6465 6e5f 6964 7873 203d 3d20 2831 2c20  den_idxs == (1, 
+00004a20: 332c 2035 290a 0a20 2020 2064 6566 2069  3, 5)..    def i
+00004a30: 745f 6b6e 6f77 735f 6974 735f 696e 7365  t_knows_its_inse
+00004a40: 7274 696f 6e5f 6964 7328 7365 6c66 2c20  rtion_ids(self, 
+00004a50: 7265 7175 6573 7429 3a0a 2020 2020 2020  request):.      
+00004a60: 2020 7072 6f70 6572 7479 5f6d 6f63 6b28    property_mock(
+00004a70: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00004a80: 7565 7374 2c0a 2020 2020 2020 2020 2020  uest,.          
+00004a90: 2020 4469 6d65 6e73 696f 6e2c 0a20 2020    Dimension,.   
+00004aa0: 2020 2020 2020 2020 2022 7375 6274 6f74           "subtot
+00004ab0: 616c 7322 2c0a 2020 2020 2020 2020 2020  als",.          
+00004ac0: 2020 7265 7475 726e 5f76 616c 7565 3d74    return_value=t
+00004ad0: 7570 6c65 280a 2020 2020 2020 2020 2020  uple(.          
+00004ae0: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
+00004af0: 6f63 6b28 7265 7175 6573 742c 205f 5375  ock(request, _Su
+00004b00: 6274 6f74 616c 2c20 696e 7365 7274 696f  btotal, insertio
+00004b10: 6e5f 6964 3d28 6920 2b20 3129 290a 2020  n_id=(i + 1)).  
+00004b20: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00004b30: 7220 6920 696e 2072 616e 6765 2836 290a  r i in range(6).
+00004b40: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+00004b50: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00004b60: 2061 7373 6572 7420 4469 6d65 6e73 696f   assert Dimensio
+00004b70: 6e28 4e6f 6e65 2c20 4e6f 6e65 292e 696e  n(None, None).in
+00004b80: 7365 7274 696f 6e5f 6964 7320 3d3d 2028  sertion_ids == (
+00004b90: 312c 2032 2c20 332c 2034 2c20 352c 2036  1, 2, 3, 4, 5, 6
+00004ba0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
+00004bb0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
+00004bc0: 0a20 2020 2020 2020 2022 6469 6d5f 7265  .        "dim_re
+00004bd0: 6673 2c20 6469 6d5f 7866 6f72 6d73 2c20  fs, dim_xforms, 
+00004be0: 6578 7065 6374 6564 5f76 616c 7565 222c  expected_value",
+00004bf0: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
+00004c00: 2020 2020 2020 2023 202d 2d2d 2069 6e68         # --- inh
+00004c10: 6572 6974 616e 6365 2069 7320 616c 6961  eritance is alia
+00004c20: 7320 3c2d 206e 616d 6520 3c2d 206e 616d  s <- name <- nam
+00004c30: 652d 7472 616e 7366 6f72 6d2e 2049 6620  e-transform. If 
+00004c40: 7661 6c75 6520 6973 206f 6d69 7474 6564  value is omitted
+00004c50: 0a20 2020 2020 2020 2020 2020 2023 202d  .            # -
+00004c60: 2d2d 2028 6b65 7920 646f 6573 206e 6f74  -- (key does not
+00004c70: 2061 7070 6561 7220 696e 2064 6963 7429   appear in dict)
+00004c80: 2c20 6e61 6d65 2069 7320 696e 6865 7269  , name is inheri
+00004c90: 7465 642e 2041 6e79 2070 7265 7365 6e74  ted. Any present
+00004ca0: 2076 616c 7565 2c0a 2020 2020 2020 2020   value,.        
+00004cb0: 2020 2020 2320 2d2d 2d20 696e 636c 7564      # --- includ
+00004cc0: 696e 6720 4e6f 6e65 2c20 6f76 6572 7269  ing None, overri
+00004cd0: 6465 7320 6675 7274 6865 7220 696e 6865  des further inhe
+00004ce0: 7269 7461 6e63 652e 2041 2060 4e6f 6e65  ritance. A `None
+00004cf0: 6020 7661 6c75 6520 6973 0a20 2020 2020  ` value is.     
+00004d00: 2020 2020 2020 2023 202d 2d2d 206e 6f72         # --- nor
+00004d10: 6d61 6c69 7a65 6420 746f 2022 2220 7375  malized to "" su
+00004d20: 6368 2074 6861 7420 7265 7475 726e 2074  ch that return t
+00004d30: 7970 6520 6973 2061 6c77 6179 7320 7374  ype is always st
+00004d40: 722e 0a20 2020 2020 2020 2020 2020 2028  r..            (
+00004d50: 7b7d 2c20 7b7d 2c20 2222 292c 0a20 2020  {}, {}, ""),.   
+00004d60: 2020 2020 2020 2020 2028 7b22 616c 6961           ({"alia
+00004d70: 7322 3a20 2241 227d 2c20 7b7d 2c20 2241  s": "A"}, {}, "A
+00004d80: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+00004d90: 287b 2261 6c69 6173 223a 2022 4122 2c20  ({"alias": "A", 
+00004da0: 226e 616d 6522 3a20 2242 227d 2c20 7b7d  "name": "B"}, {}
+00004db0: 2c20 2242 2229 2c0a 2020 2020 2020 2020  , "B"),.        
+00004dc0: 2020 2020 287b 2261 6c69 6173 223a 2022      ({"alias": "
+00004dd0: 4122 2c20 226e 616d 6522 3a20 4e6f 6e65  A", "name": None
+00004de0: 7d2c 207b 7d2c 2022 2229 2c0a 2020 2020  }, {}, ""),.    
+00004df0: 2020 2020 2020 2020 287b 2261 6c69 6173          ({"alias
+00004e00: 223a 2022 4122 2c20 226e 616d 6522 3a20  ": "A", "name": 
+00004e10: 2242 227d 2c20 7b22 6e61 6d65 223a 2022  "B"}, {"name": "
+00004e20: 4322 7d2c 2022 4322 292c 0a20 2020 2020  C"}, "C"),.     
+00004e30: 2020 2020 2020 2028 7b22 616c 6961 7322         ({"alias"
+00004e40: 3a20 2241 222c 2022 6e61 6d65 223a 2022  : "A", "name": "
+00004e50: 4222 7d2c 207b 226e 616d 6522 3a20 4e6f  B"}, {"name": No
+00004e60: 6e65 7d2c 2022 2229 2c0a 2020 2020 2020  ne}, ""),.      
+00004e70: 2020 2020 2020 287b 226e 616d 6522 3a20        ({"name": 
+00004e80: 2242 227d 2c20 7b7d 2c20 2242 2229 2c0a  "B"}, {}, "B"),.
+00004e90: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
+00004ea0: 616d 6522 3a20 4e6f 6e65 7d2c 207b 7d2c  ame": None}, {},
+00004eb0: 2022 2229 2c0a 2020 2020 2020 2020 2020   ""),.          
+00004ec0: 2020 287b 226e 616d 6522 3a20 2242 227d    ({"name": "B"}
+00004ed0: 2c20 7b22 6e61 6d65 223a 2022 4322 7d2c  , {"name": "C"},
+00004ee0: 2022 4322 292c 0a20 2020 2020 2020 2020   "C"),.         
+00004ef0: 2020 2028 7b22 6e61 6d65 223a 2022 4222     ({"name": "B"
+00004f00: 7d2c 207b 226e 616d 6522 3a20 4e6f 6e65  }, {"name": None
+00004f10: 7d2c 2022 2229 2c0a 2020 2020 2020 2020  }, ""),.        
+00004f20: 2020 2020 287b 7d2c 207b 226e 616d 6522      ({}, {"name"
+00004f30: 3a20 2243 227d 2c20 2243 2229 2c0a 2020  : "C"}, "C"),.  
+00004f40: 2020 2020 2020 2020 2020 287b 7d2c 207b            ({}, {
+00004f50: 226e 616d 6522 3a20 2222 7d2c 2022 2229  "name": ""}, "")
+00004f60: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+00004f70: 7d2c 207b 226e 616d 6522 3a20 4e6f 6e65  }, {"name": None
+00004f80: 7d2c 2022 2229 2c0a 2020 2020 2020 2020  }, ""),.        
+00004f90: 292c 0a20 2020 2029 0a20 2020 2064 6566  ),.    ).    def
+00004fa0: 2069 745f 6b6e 6f77 735f 6974 735f 6e61   it_knows_its_na
+00004fb0: 6d65 2873 656c 662c 2064 696d 5f72 6566  me(self, dim_ref
+00004fc0: 732c 2064 696d 5f78 666f 726d 732c 2065  s, dim_xforms, e
+00004fd0: 7870 6563 7465 645f 7661 6c75 6529 3a0a  xpected_value):.
+00004fe0: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
+00004ff0: 6e5f 6469 6374 203d 207b 2272 6566 6572  n_dict = {"refer
+00005000: 656e 6365 7322 3a20 6469 6d5f 7265 6673  ences": dim_refs
+00005010: 7d0a 2020 2020 2020 2020 6469 6d65 6e73  }.        dimens
+00005020: 696f 6e20 3d20 4469 6d65 6e73 696f 6e28  ion = Dimension(
+00005030: 6469 6d65 6e73 696f 6e5f 6469 6374 2c20  dimension_dict, 
+00005040: 4e6f 6e65 2c20 6469 6d65 6e73 696f 6e5f  None, dimension_
+00005050: 7472 616e 7366 6f72 6d73 3d64 696d 5f78  transforms=dim_x
+00005060: 666f 726d 7329 0a20 2020 2020 2020 2061  forms).        a
+00005070: 7373 6572 7420 6469 6d65 6e73 696f 6e2e  ssert dimension.
+00005080: 6e61 6d65 203d 3d20 6578 7065 6374 6564  name == expected
+00005090: 5f76 616c 7565 0a0a 2020 2020 6465 6620  _value..    def 
+000050a0: 6974 5f6b 6e6f 7773 5f74 6865 5f6e 756d  it_knows_the_num
+000050b0: 6572 6963 5f76 616c 7565 735f 6f66 5f69  eric_values_of_i
+000050c0: 7473 5f65 6c65 6d65 6e74 7328 0a20 2020  ts_elements(.   
+000050d0: 2020 2020 2073 656c 662c 2072 6571 7565       self, reque
+000050e0: 7374 2c20 7661 6c69 645f 656c 656d 656e  st, valid_elemen
+000050f0: 7473 5f70 726f 705f 0a20 2020 2029 3a0a  ts_prop_.    ):.
+00005100: 2020 2020 2020 2020 7661 6c69 645f 656c          valid_el
+00005110: 656d 656e 7473 5f70 726f 705f 2e72 6574  ements_prop_.ret
+00005120: 7572 6e5f 7661 6c75 6520 3d20 7475 706c  urn_value = tupl
+00005130: 6528 0a20 2020 2020 2020 2020 2020 2069  e(.            i
+00005140: 6e73 7461 6e63 655f 6d6f 636b 2872 6571  nstance_mock(req
+00005150: 7565 7374 2c20 5f45 6c65 6d65 6e74 2c20  uest, _Element, 
+00005160: 6e75 6d65 7269 635f 7661 6c75 653d 6e75  numeric_value=nu
+00005170: 6d65 7269 635f 7661 6c75 6529 0a20 2020  meric_value).   
+00005180: 2020 2020 2020 2020 2066 6f72 206e 756d           for num
+00005190: 6572 6963 5f76 616c 7565 2069 6e20 2831  eric_value in (1
+000051a0: 2c20 322e 322c 206e 702e 6e61 6e29 0a20  , 2.2, np.nan). 
+000051b0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000051c0: 2061 7373 6572 7420 4469 6d65 6e73 696f   assert Dimensio
+000051d0: 6e28 4e6f 6e65 2c20 4e6f 6e65 292e 6e75  n(None, None).nu
+000051e0: 6d65 7269 635f 7661 6c75 6573 203d 3d20  meric_values == 
+000051f0: 2831 2c20 322e 322c 206e 702e 6e61 6e29  (1, 2.2, np.nan)
+00005200: 0a0a 2020 2020 6465 6620 6974 5f70 726f  ..    def it_pro
+00005210: 7669 6465 735f 6163 6365 7373 5f74 6f5f  vides_access_to_
+00005220: 7468 655f 6f72 6465 725f 7370 6563 2873  the_order_spec(s
+00005230: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00005240: 2020 2020 2020 206f 7264 6572 5f73 7065         order_spe
+00005250: 635f 203d 2069 6e73 7461 6e63 655f 6d6f  c_ = instance_mo
+00005260: 636b 2872 6571 7565 7374 2c20 5f4f 7264  ck(request, _Ord
+00005270: 6572 5370 6563 290a 2020 2020 2020 2020  erSpec).        
+00005280: 5f4f 7264 6572 5370 6563 5f20 3d20 636c  _OrderSpec_ = cl
+00005290: 6173 735f 6d6f 636b 280a 2020 2020 2020  ass_mock(.      
+000052a0: 2020 2020 2020 7265 7175 6573 742c 2022        request, "
+000052b0: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
+000052c0: 6e2e 5f4f 7264 6572 5370 6563 222c 2072  n._OrderSpec", r
+000052d0: 6574 7572 6e5f 7661 6c75 653d 6f72 6465  eturn_value=orde
+000052e0: 725f 7370 6563 5f0a 2020 2020 2020 2020  r_spec_.        
+000052f0: 290a 2020 2020 2020 2020 6469 6d65 6e73  ).        dimens
+00005300: 696f 6e5f 7472 616e 7366 6f72 6d73 203d  ion_transforms =
+00005310: 207b 2264 696d 223a 2022 7866 726d 7322   {"dim": "xfrms"
+00005320: 7d0a 2020 2020 2020 2020 6469 6d65 6e73  }.        dimens
+00005330: 696f 6e20 3d20 4469 6d65 6e73 696f 6e28  ion = Dimension(
+00005340: 4e6f 6e65 2c20 4e6f 6e65 2c20 6469 6d65  None, None, dime
+00005350: 6e73 696f 6e5f 7472 616e 7366 6f72 6d73  nsion_transforms
+00005360: 290a 0a20 2020 2020 2020 206f 7264 6572  )..        order
+00005370: 5f73 7065 6320 3d20 6469 6d65 6e73 696f  _spec = dimensio
+00005380: 6e2e 6f72 6465 725f 7370 6563 0a0a 2020  n.order_spec..  
+00005390: 2020 2020 2020 5f4f 7264 6572 5370 6563        _OrderSpec
+000053a0: 5f2e 6173 7365 7274 5f63 616c 6c65 645f  _.assert_called_
+000053b0: 6f6e 6365 5f77 6974 6828 6469 6d65 6e73  once_with(dimens
+000053c0: 696f 6e2c 2064 696d 656e 7369 6f6e 5f74  ion, dimension_t
+000053d0: 7261 6e73 666f 726d 7329 0a20 2020 2020  ransforms).     
+000053e0: 2020 2061 7373 6572 7420 6f72 6465 725f     assert order_
+000053f0: 7370 6563 2069 7320 6f72 6465 725f 7370  spec is order_sp
+00005400: 6563 5f0a 0a20 2020 2040 7079 7465 7374  ec_..    @pytest
+00005410: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
+00005420: 6528 0a20 2020 2020 2020 2022 6469 6d5f  e(.        "dim_
+00005430: 7472 616e 7366 6f72 6d73 2c20 6578 7065  transforms, expe
+00005440: 6374 6564 5f76 616c 7565 222c 0a20 2020  cted_value",.   
+00005450: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00005460: 2020 2028 7b7d 2c20 4661 6c73 6529 2c0a     ({}, False),.
+00005470: 2020 2020 2020 2020 2020 2020 287b 2270              ({"p
+00005480: 7275 6e65 223a 2046 616c 7365 7d2c 2046  rune": False}, F
+00005490: 616c 7365 292c 0a20 2020 2020 2020 2020  alse),.         
+000054a0: 2020 2028 7b22 7072 756e 6522 3a20 317d     ({"prune": 1}
+000054b0: 2c20 4661 6c73 6529 2c0a 2020 2020 2020  , False),.      
+000054c0: 2020 2020 2020 287b 2270 7275 6e65 223a        ({"prune":
+000054d0: 2022 666f 6f62 6172 227d 2c20 4661 6c73   "foobar"}, Fals
+000054e0: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+000054f0: 287b 2270 7275 6e65 223a 2054 7275 657d  ({"prune": True}
+00005500: 2c20 5472 7565 292c 0a20 2020 2020 2020  , True),.       
+00005510: 2029 2c0a 2020 2020 290a 2020 2020 6465   ),.    ).    de
+00005520: 6620 6974 5f6b 6e6f 7773 5f77 6865 7468  f it_knows_wheth
+00005530: 6572 5f69 745f 7368 6f75 6c64 5f62 655f  er_it_should_be_
+00005540: 7072 756e 6564 2873 656c 662c 2064 696d  pruned(self, dim
+00005550: 5f74 7261 6e73 666f 726d 732c 2065 7870  _transforms, exp
+00005560: 6563 7465 645f 7661 6c75 6529 3a0a 2020  ected_value):.  
+00005570: 2020 2020 2020 6173 7365 7274 2044 696d        assert Dim
+00005580: 656e 7369 6f6e 284e 6f6e 652c 204e 6f6e  ension(None, Non
+00005590: 652c 2064 696d 5f74 7261 6e73 666f 726d  e, dim_transform
+000055a0: 7329 2e70 7275 6e65 2069 7320 6578 7065  s).prune is expe
+000055b0: 6374 6564 5f76 616c 7565 0a0a 2020 2020  cted_value..    
+000055c0: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
+000055d0: 616d 6574 7269 7a65 280a 2020 2020 2020  ametrize(.      
+000055e0: 2020 2273 656c 6563 7465 645f 6361 7465    "selected_cate
+000055f0: 676f 7269 6573 2c20 6578 7065 6374 6564  gories, expected
+00005600: 5f76 616c 7565 222c 0a20 2020 2020 2020  _value",.       
+00005610: 2028 0a20 2020 2020 2020 2020 2020 2028   (.            (
+00005620: 7b22 7365 6c65 6374 6564 5f63 6174 6567  {"selected_categ
+00005630: 6f72 6965 7322 3a20 4e6f 6e65 7d2c 2028  ories": None}, (
+00005640: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+00005650: 287b 2266 6f6f 223a 2022 6261 7222 7d2c  ({"foo": "bar"},
+00005660: 2028 2929 2c0a 2020 2020 2020 2020 2020   ()),.          
+00005670: 2020 287b 7d2c 2028 2929 2c0a 2020 2020    ({}, ()),.    
+00005680: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00005690: 2020 2020 2020 2020 2020 7b22 7365 6c65            {"sele
+000056a0: 6374 6564 5f63 6174 6567 6f72 6965 7322  cted_categories"
+000056b0: 3a20 5b7b 226e 616d 6522 3a20 2256 6572  : [{"name": "Ver
+000056c0: 7920 4661 762e 222c 2022 6964 223a 2031  y Fav.", "id": 1
+000056d0: 7d5d 7d2c 0a20 2020 2020 2020 2020 2020  }]},.           
+000056e0: 2020 2020 2028 7b22 6e61 6d65 223a 2022       ({"name": "
+000056f0: 5665 7279 2046 6176 2e22 2c20 2269 6422  Very Fav.", "id"
+00005700: 3a20 317d 2c29 2c0a 2020 2020 2020 2020  : 1},),.        
+00005710: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
+00005720: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
+00005730: 6974 5f6b 6e6f 7773 5f69 7473 5f73 656c  it_knows_its_sel
+00005740: 6563 7465 645f 6361 7465 676f 7269 6573  ected_categories
+00005750: 2873 656c 662c 2073 656c 6563 7465 645f  (self, selected_
+00005760: 6361 7465 676f 7269 6573 2c20 6578 7065  categories, expe
+00005770: 6374 6564 5f76 616c 7565 293a 0a20 2020  cted_value):.   
+00005780: 2020 2020 2064 696d 656e 7369 6f6e 5f64       dimension_d
+00005790: 6963 7420 3d20 7b22 7265 6665 7265 6e63  ict = {"referenc
+000057a0: 6573 223a 2073 656c 6563 7465 645f 6361  es": selected_ca
+000057b0: 7465 676f 7269 6573 7d0a 2020 2020 2020  tegories}.      
+000057c0: 2020 6173 7365 7274 2044 696d 656e 7369    assert Dimensi
+000057d0: 6f6e 2864 696d 656e 7369 6f6e 5f64 6963  on(dimension_dic
+000057e0: 742c 204e 6f6e 6529 2e73 656c 6563 7465  t, None).selecte
+000057f0: 645f 6361 7465 676f 7269 6573 203d 3d20  d_categories == 
+00005800: 6578 7065 6374 6564 5f76 616c 7565 0a0a  expected_value..
+00005810: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00005820: 2e70 6172 616d 6574 7269 7a65 280a 2020  .parametrize(.  
+00005830: 2020 2020 2020 2264 696d 656e 7369 6f6e        "dimension
+00005840: 5f64 6963 742c 2069 6e73 6572 7469 6f6e  _dict, insertion
+00005850: 5f64 6963 7473 222c 0a20 2020 2020 2020  _dicts",.       
+00005860: 2028 0a20 2020 2020 2020 2020 2020 2028   (.            (
+00005870: 7b7d 2c20 5b5d 292c 0a20 2020 2020 2020  {}, []),.       
+00005880: 2020 2020 2028 7b22 7265 6665 7265 6e63       ({"referenc
+00005890: 6573 223a 207b 7d7d 2c20 5b5d 292c 0a20  es": {}}, []),. 
+000058a0: 2020 2020 2020 2020 2020 2028 7b22 7265             ({"re
+000058b0: 6665 7265 6e63 6573 223a 207b 2276 6965  ferences": {"vie
+000058c0: 7722 3a20 7b7d 7d7d 2c20 5b5d 292c 0a20  w": {}}}, []),. 
+000058d0: 2020 2020 2020 2020 2020 2028 7b22 7265             ({"re
+000058e0: 6665 7265 6e63 6573 223a 207b 2276 6965  ferences": {"vie
+000058f0: 7722 3a20 7b22 7472 616e 7366 6f72 6d22  w": {"transform"
+00005900: 3a20 7b7d 7d7d 7d2c 205b 5d29 2c0a 2020  : {}}}}, []),.  
+00005910: 2020 2020 2020 2020 2020 287b 2272 6566            ({"ref
+00005920: 6572 656e 6365 7322 3a20 7b22 7669 6577  erences": {"view
+00005930: 223a 207b 2274 7261 6e73 666f 726d 223a  ": {"transform":
+00005940: 207b 2269 6e73 6572 7469 6f6e 7322 3a20   {"insertions": 
+00005950: 5b5d 7d7d 7d7d 2c20 5b5d 292c 0a20 2020  []}}}}, []),.   
+00005960: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
+00005970: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00005980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005990: 2022 7265 6665 7265 6e63 6573 223a 207b   "references": {
+000059a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000059b0: 2020 2020 2020 2020 2022 7669 6577 223a           "view":
+000059c0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000059d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000059e0: 7472 616e 7366 6f72 6d22 3a20 7b0a 2020  transform": {.  
+000059f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a00: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00005a10: 6e73 6572 7469 6f6e 7322 3a20 5b0a 2020  nsertions": [.  
+00005a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a40: 2020 7b22 696e 7365 7274 696f 6e22 3a20    {"insertion": 
+00005a50: 2264 6963 742d 3122 7d2c 0a20 2020 2020  "dict-1"},.     
+00005a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a70: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00005a80: 2269 6e73 6572 7469 6f6e 223a 2022 6469  "insertion": "di
+00005a90: 6374 2d32 227d 2c0a 2020 2020 2020 2020  ct-2"},.        
+00005aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ab0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00005ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ad0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00005ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005af0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00005b00: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00005b10: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00005b20: 2020 2020 2020 2020 2020 205b 7b22 696e             [{"in
+00005b30: 7365 7274 696f 6e22 3a20 2264 6963 742d  sertion": "dict-
+00005b40: 3122 7d2c 207b 2269 6e73 6572 7469 6f6e  1"}, {"insertion
+00005b50: 223a 2022 6469 6374 2d32 227d 5d2c 0a20  ": "dict-2"}],. 
+00005b60: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+00005b70: 2020 2020 2020 292c 0a20 2020 2029 0a20        ),.    ). 
+00005b80: 2020 2064 6566 2069 745f 7072 6f76 6964     def it_provid
+00005b90: 6573 5f61 6363 6573 735f 746f 5f69 7473  es_access_to_its
+00005ba0: 5f73 7562 746f 7461 6c73 5f74 6f5f 6865  _subtotals_to_he
+00005bb0: 6c70 280a 2020 2020 2020 2020 7365 6c66  lp(.        self
+00005bc0: 2c0a 2020 2020 2020 2020 6469 6d65 6e73  ,.        dimens
+00005bd0: 696f 6e5f 6469 6374 2c0a 2020 2020 2020  ion_dict,.      
+00005be0: 2020 696e 7365 7274 696f 6e5f 6469 6374    insertion_dict
+00005bf0: 732c 0a20 2020 2020 2020 205f 5375 6274  s,.        _Subt
+00005c00: 6f74 616c 735f 2c0a 2020 2020 2020 2020  otals_,.        
+00005c10: 7375 6274 6f74 616c 735f 2c0a 2020 2020  subtotals_,.    
+00005c20: 2020 2020 7661 6c69 645f 656c 656d 656e      valid_elemen
+00005c30: 7473 5f70 726f 705f 2c0a 2020 2020 2020  ts_prop_,.      
+00005c40: 2020 7661 6c69 645f 656c 656d 656e 7473    valid_elements
+00005c50: 5f2c 0a20 2020 2029 3a0a 2020 2020 2020  _,.    ):.      
+00005c60: 2020 6469 6d65 6e73 696f 6e5f 6469 6374    dimension_dict
+00005c70: 5b22 7479 7065 225d 203d 207b 2263 6c61  ["type"] = {"cla
+00005c80: 7373 223a 2022 6361 7465 676f 7269 6361  ss": "categorica
+00005c90: 6c22 2c20 2263 6174 6567 6f72 6965 7322  l", "categories"
+00005ca0: 3a20 5b5d 7d0a 2020 2020 2020 2020 7661  : []}.        va
+00005cb0: 6c69 645f 656c 656d 656e 7473 5f70 726f  lid_elements_pro
+00005cc0: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
+00005cd0: 3d20 7661 6c69 645f 656c 656d 656e 7473  = valid_elements
+00005ce0: 5f0a 2020 2020 2020 2020 5f53 7562 746f  _.        _Subto
+00005cf0: 7461 6c73 5f2e 7265 7475 726e 5f76 616c  tals_.return_val
+00005d00: 7565 203d 2073 7562 746f 7461 6c73 5f0a  ue = subtotals_.
+00005d10: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
+00005d20: 6e20 3d20 4469 6d65 6e73 696f 6e28 6469  n = Dimension(di
+00005d30: 6d65 6e73 696f 6e5f 6469 6374 2c20 4e6f  mension_dict, No
+00005d40: 6e65 290a 0a20 2020 2020 2020 2073 7562  ne)..        sub
+00005d50: 746f 7461 6c73 203d 2064 696d 656e 7369  totals = dimensi
+00005d60: 6f6e 2e73 7562 746f 7461 6c73 0a0a 2020  on.subtotals..  
+00005d70: 2020 2020 2020 5f53 7562 746f 7461 6c73        _Subtotals
+00005d80: 5f2e 6173 7365 7274 5f63 616c 6c65 645f  _.assert_called_
+00005d90: 6f6e 6365 5f77 6974 6828 696e 7365 7274  once_with(insert
+00005da0: 696f 6e5f 6469 6374 732c 2076 616c 6964  ion_dicts, valid
+00005db0: 5f65 6c65 6d65 6e74 735f 290a 2020 2020  _elements_).    
+00005dc0: 2020 2020 6173 7365 7274 2073 7562 746f      assert subto
+00005dd0: 7461 6c73 2069 7320 7375 6274 6f74 616c  tals is subtotal
+00005de0: 735f 0a0a 2020 2020 6465 6620 6974 5f6b  s_..    def it_k
+00005df0: 6e6f 7773 5f69 7473 5f73 7562 746f 7461  nows_its_subtota
+00005e00: 6c5f 6c61 6265 6c73 2873 656c 662c 2072  l_labels(self, r
+00005e10: 6571 7565 7374 2c20 7375 6274 6f74 616c  equest, subtotal
+00005e20: 735f 7072 6f70 5f29 3a0a 2020 2020 2020  s_prop_):.      
+00005e30: 2020 7375 6274 6f74 616c 735f 7072 6f70    subtotals_prop
+00005e40: 5f2e 7265 7475 726e 5f76 616c 7565 203d  _.return_value =
+00005e50: 2028 0a20 2020 2020 2020 2020 2020 2069   (.            i
+00005e60: 6e73 7461 6e63 655f 6d6f 636b 2872 6571  nstance_mock(req
+00005e70: 7565 7374 2c20 5f53 7562 746f 7461 6c2c  uest, _Subtotal,
+00005e80: 206c 6162 656c 3d22 6c62 6c20 2573 2220   label="lbl %s" 
+00005e90: 2520 2869 202b 2031 2929 0a20 2020 2020  % (i + 1)).     
+00005ea0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00005eb0: 7261 6e67 6528 3329 0a20 2020 2020 2020  range(3).       
+00005ec0: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
+00005ed0: 7420 4469 6d65 6e73 696f 6e28 4e6f 6e65  t Dimension(None
+00005ee0: 2c20 4e6f 6e65 292e 7375 6274 6f74 616c  , None).subtotal
+00005ef0: 5f6c 6162 656c 7320 3d3d 2028 226c 626c  _labels == ("lbl
+00005f00: 2031 222c 2022 6c62 6c20 3222 2c20 226c   1", "lbl 2", "l
+00005f10: 626c 2033 2229 0a0a 2020 2020 4070 7974  bl 3")..    @pyt
+00005f20: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
+00005f30: 7269 7a65 2822 6469 6d65 6e73 696f 6e5f  rize("dimension_
+00005f40: 7479 7065 222c 2028 4454 2e4d 522c 2044  type", (DT.MR, D
+00005f50: 542e 4341 5f53 5542 5641 5229 290a 2020  T.CA_SUBVAR)).  
+00005f60: 2020 6465 6620 6275 745f 6974 5f73 7570    def but_it_sup
+00005f70: 7072 6573 7365 735f 616e 795f 7375 6274  presses_any_subt
+00005f80: 6f74 616c 735f 6f6e 5f61 6e5f 6172 7261  otals_on_an_arra
+00005f90: 795f 6469 6d65 6e73 696f 6e28 0a20 2020  y_dimension(.   
+00005fa0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00005fb0: 2020 2072 6571 7565 7374 2c0a 2020 2020     request,.    
+00005fc0: 2020 2020 6469 6d65 6e73 696f 6e5f 7479      dimension_ty
+00005fd0: 7065 2c0a 2020 2020 2020 2020 5f53 7562  pe,.        _Sub
+00005fe0: 746f 7461 6c73 5f2c 0a20 2020 2020 2020  totals_,.       
+00005ff0: 2073 7562 746f 7461 6c73 5f2c 0a20 2020   subtotals_,.   
+00006000: 2020 2020 2076 616c 6964 5f65 6c65 6d65       valid_eleme
+00006010: 6e74 735f 7072 6f70 5f2c 0a20 2020 2020  nts_prop_,.     
+00006020: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
+00006030: 735f 2c0a 2020 2020 293a 0a20 2020 2020  s_,.    ):.     
+00006040: 2020 2070 726f 7065 7274 795f 6d6f 636b     property_mock
+00006050: 2872 6571 7565 7374 2c20 4469 6d65 6e73  (request, Dimens
+00006060: 696f 6e2c 2022 6469 6d65 6e73 696f 6e5f  ion, "dimension_
+00006070: 7479 7065 222c 2072 6574 7572 6e5f 7661  type", return_va
+00006080: 6c75 653d 6469 6d65 6e73 696f 6e5f 7479  lue=dimension_ty
+00006090: 7065 290a 2020 2020 2020 2020 5f53 7562  pe).        _Sub
+000060a0: 746f 7461 6c73 5f2e 7265 7475 726e 5f76  totals_.return_v
+000060b0: 616c 7565 203d 2073 7562 746f 7461 6c73  alue = subtotals
+000060c0: 5f0a 2020 2020 2020 2020 7661 6c69 645f  _.        valid_
+000060d0: 656c 656d 656e 7473 5f70 726f 705f 2e72  elements_prop_.r
+000060e0: 6574 7572 6e5f 7661 6c75 6520 3d20 7661  eturn_value = va
+000060f0: 6c69 645f 656c 656d 656e 7473 5f0a 2020  lid_elements_.  
+00006100: 2020 2020 2020 6469 6d65 6e73 696f 6e5f        dimension_
+00006110: 6469 6374 203d 207b 2272 6566 6572 656e  dict = {"referen
+00006120: 6365 7322 3a20 7b22 7669 6577 223a 207b  ces": {"view": {
+00006130: 2274 7261 6e73 666f 726d 223a 207b 2269  "transform": {"i
+00006140: 6e73 6572 7469 6f6e 7322 3a20 5b36 3636  nsertions": [666
+00006150: 5d7d 7d7d 7d0a 2020 2020 2020 2020 6469  ]}}}}.        di
+00006160: 6d65 6e73 696f 6e20 3d20 4469 6d65 6e73  mension = Dimens
+00006170: 696f 6e28 6469 6d65 6e73 696f 6e5f 6469  ion(dimension_di
+00006180: 6374 2c20 4e6f 6e65 290a 0a20 2020 2020  ct, None)..     
+00006190: 2020 2073 7562 746f 7461 6c73 203d 2064     subtotals = d
+000061a0: 696d 656e 7369 6f6e 2e73 7562 746f 7461  imension.subtota
+000061b0: 6c73 0a0a 2020 2020 2020 2020 5f53 7562  ls..        _Sub
+000061c0: 746f 7461 6c73 5f2e 6173 7365 7274 5f63  totals_.assert_c
+000061d0: 616c 6c65 645f 6f6e 6365 5f77 6974 6828  alled_once_with(
+000061e0: 5b5d 2c20 7661 6c69 645f 656c 656d 656e  [], valid_elemen
+000061f0: 7473 5f29 0a20 2020 2020 2020 2061 7373  ts_).        ass
+00006200: 6572 7420 7375 6274 6f74 616c 7320 6973  ert subtotals is
+00006210: 2073 7562 746f 7461 6c73 5f0a 0a20 2020   subtotals_..   
+00006220: 2064 6566 2061 6e64 5f69 745f 6f76 6572   def and_it_over
+00006230: 7269 6465 735f 7769 7468 5f73 7562 746f  rides_with_subto
+00006240: 7461 6c5f 7472 616e 7366 6f72 6d73 5f77  tal_transforms_w
+00006250: 6865 6e5f 7072 6573 656e 7428 0a20 2020  hen_present(.   
+00006260: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00006270: 2020 2076 616c 6964 5f65 6c65 6d65 6e74     valid_element
+00006280: 735f 7072 6f70 5f2c 0a20 2020 2020 2020  s_prop_,.       
+00006290: 2076 616c 6964 5f65 6c65 6d65 6e74 735f   valid_elements_
+000062a0: 2c0a 2020 2020 2020 2020 5f53 7562 746f  ,.        _Subto
+000062b0: 7461 6c73 5f2c 0a20 2020 2020 2020 2073  tals_,.        s
+000062c0: 7562 746f 7461 6c73 5f2c 0a20 2020 2029  ubtotals_,.    )
+000062d0: 3a0a 2020 2020 2020 2020 6469 6d65 6e73  :.        dimens
+000062e0: 696f 6e5f 7472 616e 7366 6f72 6d73 203d  ion_transforms =
+000062f0: 207b 2269 6e73 6572 7469 6f6e 7322 3a20   {"insertions": 
+00006300: 5b22 7375 6274 6f74 616c 222c 2022 6469  ["subtotal", "di
+00006310: 6374 7322 5d7d 0a20 2020 2020 2020 2076  cts"]}.        v
+00006320: 616c 6964 5f65 6c65 6d65 6e74 735f 7072  alid_elements_pr
+00006330: 6f70 5f2e 7265 7475 726e 5f76 616c 7565  op_.return_value
+00006340: 203d 2076 616c 6964 5f65 6c65 6d65 6e74   = valid_element
+00006350: 735f 0a20 2020 2020 2020 205f 5375 6274  s_.        _Subt
+00006360: 6f74 616c 735f 2e72 6574 7572 6e5f 7661  otals_.return_va
+00006370: 6c75 6520 3d20 7375 6274 6f74 616c 735f  lue = subtotals_
+00006380: 0a20 2020 2020 2020 2064 696d 656e 7369  .        dimensi
+00006390: 6f6e 203d 2044 696d 656e 7369 6f6e 284e  on = Dimension(N
+000063a0: 6f6e 652c 204e 6f6e 652c 2064 696d 656e  one, None, dimen
+000063b0: 7369 6f6e 5f74 7261 6e73 666f 726d 7329  sion_transforms)
+000063c0: 0a0a 2020 2020 2020 2020 7375 6274 6f74  ..        subtot
+000063d0: 616c 7320 3d20 6469 6d65 6e73 696f 6e2e  als = dimension.
+000063e0: 7375 6274 6f74 616c 730a 0a20 2020 2020  subtotals..     
+000063f0: 2020 205f 5375 6274 6f74 616c 735f 2e61     _Subtotals_.a
+00006400: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
+00006410: 655f 7769 7468 285b 2273 7562 746f 7461  e_with(["subtota
+00006420: 6c22 2c20 2264 6963 7473 225d 2c20 7661  l", "dicts"], va
+00006430: 6c69 645f 656c 656d 656e 7473 5f29 0a20  lid_elements_). 
+00006440: 2020 2020 2020 2061 7373 6572 7420 7375         assert su
+00006450: 6274 6f74 616c 7320 6973 2073 7562 746f  btotals is subto
+00006460: 7461 6c73 5f0a 0a20 2020 2023 2066 6978  tals_..    # fix
+00006470: 7475 7265 2063 6f6d 706f 6e65 6e74 7320  ture components 
+00006480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000064a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a20  -------------.. 
+000064b0: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
+000064c0: 7265 0a20 2020 2064 6566 205f 5375 6274  re.    def _Subt
+000064d0: 6f74 616c 735f 2873 656c 662c 2072 6571  otals_(self, req
+000064e0: 7565 7374 293a 0a20 2020 2020 2020 2072  uest):.        r
+000064f0: 6574 7572 6e20 636c 6173 735f 6d6f 636b  eturn class_mock
+00006500: 2872 6571 7565 7374 2c20 2263 722e 6375  (request, "cr.cu
+00006510: 6265 2e64 696d 656e 7369 6f6e 2e5f 5375  be.dimension._Su
+00006520: 6274 6f74 616c 7322 290a 0a20 2020 2040  btotals")..    @
+00006530: 7079 7465 7374 2e66 6978 7475 7265 0a20  pytest.fixture. 
+00006540: 2020 2064 6566 2073 7562 746f 7461 6c73     def subtotals
+00006550: 5f28 7365 6c66 2c20 7265 7175 6573 7429  _(self, request)
+00006560: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00006570: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
+00006580: 6571 7565 7374 2c20 5f53 7562 746f 7461  equest, _Subtota
+00006590: 6c73 290a 0a20 2020 2040 7079 7465 7374  ls)..    @pytest
+000065a0: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+000065b0: 2073 7562 746f 7461 6c73 5f70 726f 705f   subtotals_prop_
+000065c0: 2873 656c 662c 2072 6571 7565 7374 293a  (self, request):
+000065d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000065e0: 7072 6f70 6572 7479 5f6d 6f63 6b28 7265  property_mock(re
+000065f0: 7175 6573 742c 2044 696d 656e 7369 6f6e  quest, Dimension
+00006600: 2c20 2273 7562 746f 7461 6c73 2229 0a0a  , "subtotals")..
+00006610: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+00006620: 7572 650a 2020 2020 6465 6620 7661 6c69  ure.    def vali
+00006630: 645f 656c 656d 656e 7473 5f28 7365 6c66  d_elements_(self
+00006640: 2c20 7265 7175 6573 7429 3a0a 2020 2020  , request):.    
+00006650: 2020 2020 7265 7475 726e 2069 6e73 7461      return insta
+00006660: 6e63 655f 6d6f 636b 2872 6571 7565 7374  nce_mock(request
+00006670: 2c20 5f56 616c 6964 456c 656d 656e 7473  , _ValidElements
+00006680: 290a 0a20 2020 2040 7079 7465 7374 2e66  )..    @pytest.f
+00006690: 6978 7475 7265 0a20 2020 2064 6566 2076  ixture.    def v
+000066a0: 616c 6964 5f65 6c65 6d65 6e74 735f 7072  alid_elements_pr
+000066b0: 6f70 5f28 7365 6c66 2c20 7265 7175 6573  op_(self, reques
+000066c0: 7429 3a0a 2020 2020 2020 2020 7265 7475  t):.        retu
+000066d0: 726e 2070 726f 7065 7274 795f 6d6f 636b  rn property_mock
+000066e0: 2872 6571 7565 7374 2c20 4469 6d65 6e73  (request, Dimens
+000066f0: 696f 6e2c 2022 7661 6c69 645f 656c 656d  ion, "valid_elem
+00006700: 656e 7473 2229 0a0a 0a63 6c61 7373 2044  ents")...class D
+00006710: 6573 6372 6962 655f 4261 7365 456c 656d  escribe_BaseElem
+00006720: 656e 7473 3a0a 2020 2020 2222 2255 6e69  ents:.    """Uni
+00006730: 742d 7465 7374 2073 7569 7465 2066 6f72  t-test suite for
+00006740: 2060 6372 2e63 7562 652e 6469 6d65 6e73   `cr.cube.dimens
+00006750: 696f 6e2e 5f42 6173 6545 6c65 6d65 6e74  ion._BaseElement
+00006760: 7360 206f 626a 6563 742e 2222 220a 0a20  s` object.""".. 
+00006770: 2020 2064 6566 2069 745f 6861 735f 7365     def it_has_se
+00006780: 7175 656e 6365 5f62 6568 6176 696f 7273  quence_behaviors
+00006790: 2873 656c 662c 2072 6571 7565 7374 2c20  (self, request, 
+000067a0: 5f65 6c65 6d65 6e74 735f 7072 6f70 5f29  _elements_prop_)
+000067b0: 3a0a 2020 2020 2020 2020 5f65 6c65 6d65  :.        _eleme
+000067c0: 6e74 735f 7072 6f70 5f2e 7265 7475 726e  nts_prop_.return
+000067d0: 5f76 616c 7565 203d 2028 312c 2032 2c20  _value = (1, 2, 
+000067e0: 3329 0a20 2020 2020 2020 2065 6c65 6d65  3).        eleme
+000067f0: 6e74 7320 3d20 5f42 6173 6545 6c65 6d65  nts = _BaseEleme
+00006800: 6e74 7328 290a 0a20 2020 2020 2020 2061  nts()..        a
+00006810: 7373 6572 7420 656c 656d 656e 7473 5b31  ssert elements[1
+00006820: 5d20 3d3d 2032 0a20 2020 2020 2020 2061  ] == 2.        a
+00006830: 7373 6572 7420 656c 656d 656e 7473 5b31  ssert elements[1
+00006840: 3a33 5d20 3d3d 2028 322c 2033 290a 2020  :3] == (2, 3).  
+00006850: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
+00006860: 2865 6c65 6d65 6e74 7329 203d 3d20 330a  (elements) == 3.
+00006870: 2020 2020 2020 2020 6173 7365 7274 206c          assert l
+00006880: 6973 7428 6e20 666f 7220 6e20 696e 2065  ist(n for n in e
+00006890: 6c65 6d65 6e74 7329 203d 3d20 5b31 2c20  lements) == [1, 
+000068a0: 322c 2033 5d0a 0a20 2020 2064 6566 2069  2, 3]..    def i
+000068b0: 745f 6b6e 6f77 735f 7468 655f 656c 656d  t_knows_the_elem
+000068c0: 656e 745f 6964 7328 7365 6c66 2c20 7265  ent_ids(self, re
+000068d0: 7175 6573 742c 205f 656c 656d 656e 7473  quest, _elements
+000068e0: 5f70 726f 705f 293a 0a20 2020 2020 2020  _prop_):.       
+000068f0: 205f 656c 656d 656e 7473 5f70 726f 705f   _elements_prop_
+00006900: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
+00006910: 7475 706c 6528 0a20 2020 2020 2020 2020  tuple(.         
+00006920: 2020 2069 6e73 7461 6e63 655f 6d6f 636b     instance_mock
+00006930: 2872 6571 7565 7374 2c20 5f45 6c65 6d65  (request, _Eleme
+00006940: 6e74 2c20 656c 656d 656e 745f 6964 3d6e  nt, element_id=n
+00006950: 2920 666f 7220 6e20 696e 2028 312c 2032  ) for n in (1, 2
+00006960: 2c20 3529 0a20 2020 2020 2020 2029 0a20  , 5).        ). 
+00006970: 2020 2020 2020 2065 6c65 6d65 6e74 7320         elements 
+00006980: 3d20 5f42 6173 6545 6c65 6d65 6e74 7328  = _BaseElements(
+00006990: 290a 0a20 2020 2020 2020 2065 6c65 6d65  )..        eleme
+000069a0: 6e74 5f69 6473 203d 2065 6c65 6d65 6e74  nt_ids = element
+000069b0: 732e 656c 656d 656e 745f 6964 730a 0a20  s.element_ids.. 
+000069c0: 2020 2020 2020 2061 7373 6572 7420 656c         assert el
+000069d0: 656d 656e 745f 6964 7320 3d3d 2028 312c  ement_ids == (1,
+000069e0: 2032 2c20 3529 0a0a 2020 2020 6465 6620   2, 5)..    def 
+000069f0: 6974 5f6b 6e6f 7773 5f74 6865 5f65 6c65  it_knows_the_ele
+00006a00: 6d65 6e74 5f69 6e64 6963 6573 2873 656c  ment_indices(sel
+00006a10: 662c 2072 6571 7565 7374 2c20 5f65 6c65  f, request, _ele
+00006a20: 6d65 6e74 735f 7072 6f70 5f29 3a0a 2020  ments_prop_):.  
+00006a30: 2020 2020 2020 5f65 6c65 6d65 6e74 735f        _elements_
+00006a40: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+00006a50: 7565 203d 2074 7570 6c65 280a 2020 2020  ue = tuple(.    
+00006a60: 2020 2020 2020 2020 696e 7374 616e 6365          instance
+00006a70: 5f6d 6f63 6b28 7265 7175 6573 742c 205f  _mock(request, _
+00006a80: 456c 656d 656e 742c 2069 6e64 6578 3d69  Element, index=i
+00006a90: 6e64 6578 2920 666f 7220 696e 6465 7820  ndex) for index 
+00006aa0: 696e 2028 312c 2033 2c20 3429 0a20 2020  in (1, 3, 4).   
+00006ab0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+00006ac0: 6c65 6d65 6e74 7320 3d20 5f42 6173 6545  lements = _BaseE
+00006ad0: 6c65 6d65 6e74 7328 290a 0a20 2020 2020  lements()..     
+00006ae0: 2020 2065 6c65 6d65 6e74 5f69 6478 7320     element_idxs 
+00006af0: 3d20 656c 656d 656e 7473 2e65 6c65 6d65  = elements.eleme
+00006b00: 6e74 5f69 6478 730a 0a20 2020 2020 2020  nt_idxs..       
+00006b10: 2061 7373 6572 7420 656c 656d 656e 745f   assert element_
+00006b20: 6964 7873 203d 3d20 2831 2c20 332c 2034  idxs == (1, 3, 4
+00006b30: 290a 0a20 2020 2064 6566 2069 745f 6361  )..    def it_ca
+00006b40: 6e5f 6669 6e64 5f61 6e5f 656c 656d 656e  n_find_an_elemen
+00006b50: 745f 6279 5f69 6428 7365 6c66 2c20 7265  t_by_id(self, re
+00006b60: 7175 6573 742c 205f 656c 656d 656e 7473  quest, _elements
+00006b70: 5f62 795f 6964 5f70 726f 705f 293a 0a20  _by_id_prop_):. 
+00006b80: 2020 2020 2020 2065 6c65 6d65 6e74 735f         elements_
+00006b90: 203d 2074 7570 6c65 280a 2020 2020 2020   = tuple(.      
+00006ba0: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
+00006bb0: 6f63 6b28 7265 7175 6573 742c 205f 456c  ock(request, _El
+00006bc0: 656d 656e 742c 2065 6c65 6d65 6e74 5f69  ement, element_i
+00006bd0: 643d 656c 656d 656e 745f 6964 290a 2020  d=element_id).  
+00006be0: 2020 2020 2020 2020 2020 666f 7220 656c            for el
+00006bf0: 656d 656e 745f 6964 2069 6e20 2833 2c20  ement_id in (3, 
+00006c00: 372c 2031 3129 0a20 2020 2020 2020 2029  7, 11).        )
+00006c10: 0a20 2020 2020 2020 205f 656c 656d 656e  .        _elemen
+00006c20: 7473 5f62 795f 6964 5f70 726f 705f 2e72  ts_by_id_prop_.r
+00006c30: 6574 7572 6e5f 7661 6c75 6520 3d20 7b0a  eturn_value = {.
+00006c40: 2020 2020 2020 2020 2020 2020 656c 656d              elem
+00006c50: 656e 745f 2e65 6c65 6d65 6e74 5f69 643a  ent_.element_id:
+00006c60: 2065 6c65 6d65 6e74 5f20 666f 7220 656c   element_ for el
+00006c70: 656d 656e 745f 2069 6e20 656c 656d 656e  ement_ in elemen
+00006c80: 7473 5f0a 2020 2020 2020 2020 7d0a 2020  ts_.        }.  
+00006c90: 2020 2020 2020 656c 656d 656e 7473 203d        elements =
+00006ca0: 205f 4261 7365 456c 656d 656e 7473 2829   _BaseElements()
+00006cb0: 0a0a 2020 2020 2020 2020 656c 656d 656e  ..        elemen
+00006cc0: 7420 3d20 656c 656d 656e 7473 2e67 6574  t = elements.get
+00006cd0: 5f62 795f 6964 2837 290a 0a20 2020 2020  _by_id(7)..     
+00006ce0: 2020 2061 7373 6572 7420 656c 656d 656e     assert elemen
+00006cf0: 7420 6973 2065 6c65 6d65 6e74 735f 5b31  t is elements_[1
+00006d00: 5d0a 0a20 2020 2064 6566 2069 745f 6d61  ]..    def it_ma
+00006d10: 696e 7461 696e 735f 615f 6469 6374 5f6f  intains_a_dict_o
+00006d20: 665f 656c 656d 656e 7473 5f62 795f 6964  f_elements_by_id
+00006d30: 5f74 6f5f 6865 6c70 2873 656c 662c 2072  _to_help(self, r
+00006d40: 6571 7565 7374 2c20 5f65 6c65 6d65 6e74  equest, _element
+00006d50: 735f 7072 6f70 5f29 3a0a 2020 2020 2020  s_prop_):.      
+00006d60: 2020 656c 656d 656e 7473 5f20 3d20 7475    elements_ = tu
+00006d70: 706c 6528 0a20 2020 2020 2020 2020 2020  ple(.           
+00006d80: 2069 6e73 7461 6e63 655f 6d6f 636b 2872   instance_mock(r
+00006d90: 6571 7565 7374 2c20 5f45 6c65 6d65 6e74  equest, _Element
+00006da0: 2c20 656c 656d 656e 745f 6964 3d65 6c65  , element_id=ele
+00006db0: 6d65 6e74 5f69 6429 0a20 2020 2020 2020  ment_id).       
+00006dc0: 2020 2020 2066 6f72 2065 6c65 6d65 6e74       for element
+00006dd0: 5f69 6420 696e 2028 342c 2036 2c20 3729  _id in (4, 6, 7)
+00006de0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00006df0: 2020 205f 656c 656d 656e 7473 5f70 726f     _elements_pro
+00006e00: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
+00006e10: 3d20 656c 656d 656e 7473 5f0a 2020 2020  = elements_.    
+00006e20: 2020 2020 656c 656d 656e 7473 203d 205f      elements = _
+00006e30: 4261 7365 456c 656d 656e 7473 2829 0a0a  BaseElements()..
+00006e40: 2020 2020 2020 2020 656c 656d 656e 7473          elements
+00006e50: 5f62 795f 6964 203d 2065 6c65 6d65 6e74  _by_id = element
+00006e60: 732e 5f65 6c65 6d65 6e74 735f 6279 5f69  s._elements_by_i
+00006e70: 640a 0a20 2020 2020 2020 2061 7373 6572  d..        asser
+00006e80: 7420 656c 656d 656e 7473 5f62 795f 6964  t elements_by_id
+00006e90: 203d 3d20 7b34 3a20 656c 656d 656e 7473   == {4: elements
+00006ea0: 5f5b 305d 2c20 363a 2065 6c65 6d65 6e74  _[0], 6: element
+00006eb0: 735f 5b31 5d2c 2037 3a20 656c 656d 656e  s_[1], 7: elemen
+00006ec0: 7473 5f5b 325d 7d0a 0a20 2020 2064 6566  ts_[2]}..    def
+00006ed0: 2069 745f 7374 6f72 6573 5f69 7473 5f65   it_stores_its_e
+00006ee0: 6c65 6d65 6e74 735f 696e 5f61 5f74 7570  lements_in_a_tup
+00006ef0: 6c65 5f74 6f5f 6865 6c70 2873 656c 6629  le_to_help(self)
+00006f00: 3a0a 2020 2020 2020 2020 6261 7365 5f65  :.        base_e
+00006f10: 6c65 6d65 6e74 7320 3d20 5f42 6173 6545  lements = _BaseE
+00006f20: 6c65 6d65 6e74 7328 290a 2020 2020 2020  lements().      
+00006f30: 2020 2320 2d2d 2d6d 7573 7420 6265 2069    # ---must be i
+00006f40: 6d70 6c65 6d65 6e74 6564 2062 7920 6561  mplemented by ea
+00006f50: 6368 2073 7562 636c 6173 732d 2d2d 0a20  ch subclass---. 
+00006f60: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
+00006f70: 7374 2e72 6169 7365 7328 4e6f 7449 6d70  st.raises(NotImp
+00006f80: 6c65 6d65 6e74 6564 4572 726f 7229 3a0a  lementedError):.
+00006f90: 2020 2020 2020 2020 2020 2020 6261 7365              base
+00006fa0: 5f65 6c65 6d65 6e74 732e 5f65 6c65 6d65  _elements._eleme
+00006fb0: 6e74 730a 0a20 2020 2023 2066 6978 7475  nts..    # fixtu
+00006fc0: 7265 2063 6f6d 706f 6e65 6e74 7320 2d2d  re components --
+00006fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a20 2020  -----------..   
+00007000: 2040 7079 7465 7374 2e66 6978 7475 7265   @pytest.fixture
+00007010: 0a20 2020 2064 6566 205f 656c 656d 656e  .    def _elemen
+00007020: 7473 5f62 795f 6964 5f70 726f 705f 2873  ts_by_id_prop_(s
+00007030: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00007040: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
+00007050: 6f70 6572 7479 5f6d 6f63 6b28 7265 7175  operty_mock(requ
+00007060: 6573 742c 205f 4261 7365 456c 656d 656e  est, _BaseElemen
+00007070: 7473 2c20 225f 656c 656d 656e 7473 5f62  ts, "_elements_b
+00007080: 795f 6964 2229 0a0a 2020 2020 4070 7974  y_id")..    @pyt
+00007090: 6573 742e 6669 7874 7572 650a 2020 2020  est.fixture.    
+000070a0: 6465 6620 5f65 6c65 6d65 6e74 735f 7072  def _elements_pr
+000070b0: 6f70 5f28 7365 6c66 2c20 7265 7175 6573  op_(self, reques
+000070c0: 7429 3a0a 2020 2020 2020 2020 7265 7475  t):.        retu
+000070d0: 726e 2070 726f 7065 7274 795f 6d6f 636b  rn property_mock
+000070e0: 2872 6571 7565 7374 2c20 5f42 6173 6545  (request, _BaseE
+000070f0: 6c65 6d65 6e74 732c 2022 5f65 6c65 6d65  lements, "_eleme
+00007100: 6e74 7322 290a 0a0a 636c 6173 7320 4465  nts")...class De
+00007110: 7363 7269 6265 5f41 6c6c 456c 656d 656e  scribe_AllElemen
+00007120: 7473 3a0a 2020 2020 2222 2255 6e69 742d  ts:.    """Unit-
+00007130: 7465 7374 2073 7569 7465 2066 6f72 2060  test suite for `
+00007140: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
+00007150: 6e2e 5f41 6c6c 456c 656d 656e 7473 6020  n._AllElements` 
+00007160: 6f62 6a65 6374 2e22 2222 0a0a 2020 2020  object."""..    
+00007170: 6465 6620 6974 5f70 726f 7669 6465 735f  def it_provides_
+00007180: 6163 6365 7373 5f74 6f5f 7468 655f 5661  access_to_the_Va
+00007190: 6c69 6445 6c65 6d65 6e74 735f 6f62 6a65  lidElements_obje
+000071a0: 6374 280a 2020 2020 2020 2020 7365 6c66  ct(.        self
+000071b0: 2c20 7265 7175 6573 742c 205f 656c 656d  , request, _elem
+000071c0: 656e 7473 5f70 726f 705f 2c20 5f56 616c  ents_prop_, _Val
+000071d0: 6964 456c 656d 656e 7473 5f2c 2076 616c  idElements_, val
+000071e0: 6964 5f65 6c65 6d65 6e74 735f 0a20 2020  id_elements_.   
+000071f0: 2029 3a0a 2020 2020 2020 2020 656c 656d   ):.        elem
+00007200: 656e 7473 5f20 3d20 7475 706c 6528 0a20  ents_ = tuple(. 
+00007210: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
+00007220: 6e63 655f 6d6f 636b 2872 6571 7565 7374  nce_mock(request
+00007230: 2c20 5f45 6c65 6d65 6e74 2c20 6e61 6d65  , _Element, name
+00007240: 3d22 656c 2573 2220 2520 6964 7829 2066  ="el%s" % idx) f
+00007250: 6f72 2069 6478 2069 6e20 7261 6e67 6528  or idx in range(
+00007260: 3329 0a20 2020 2020 2020 2029 0a20 2020  3).        ).   
+00007270: 2020 2020 2064 696d 656e 7369 6f6e 5f74       dimension_t
+00007280: 7261 6e73 666f 726d 735f 6469 6374 203d  ransforms_dict =
+00007290: 207b 2264 696d 656e 7369 6f6e 223a 2022   {"dimension": "
+000072a0: 7472 616e 7366 6f72 6d73 227d 0a20 2020  transforms"}.   
+000072b0: 2020 2020 205f 656c 656d 656e 7473 5f70       _elements_p
+000072c0: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
+000072d0: 6520 3d20 656c 656d 656e 7473 5f0a 2020  e = elements_.  
+000072e0: 2020 2020 2020 5f56 616c 6964 456c 656d        _ValidElem
+000072f0: 656e 7473 5f2e 7265 7475 726e 5f76 616c  ents_.return_val
+00007300: 7565 203d 2076 616c 6964 5f65 6c65 6d65  ue = valid_eleme
+00007310: 6e74 735f 0a20 2020 2020 2020 2061 6c6c  nts_.        all
+00007320: 5f65 6c65 6d65 6e74 7320 3d20 5f41 6c6c  _elements = _All
+00007330: 456c 656d 656e 7473 284e 6f6e 652c 2064  Elements(None, d
+00007340: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
+00007350: 726d 735f 6469 6374 2c20 4e6f 6e65 290a  rms_dict, None).
+00007360: 0a20 2020 2020 2020 2076 616c 6964 5f65  .        valid_e
+00007370: 6c65 6d65 6e74 7320 3d20 616c 6c5f 656c  lements = all_el
+00007380: 656d 656e 7473 2e76 616c 6964 5f65 6c65  ements.valid_ele
+00007390: 6d65 6e74 730a 0a20 2020 2020 2020 205f  ments..        _
+000073a0: 5661 6c69 6445 6c65 6d65 6e74 735f 2e61  ValidElements_.a
+000073b0: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
+000073c0: 655f 7769 7468 2865 6c65 6d65 6e74 735f  e_with(elements_
+000073d0: 2c20 6469 6d65 6e73 696f 6e5f 7472 616e  , dimension_tran
+000073e0: 7366 6f72 6d73 5f64 6963 7429 0a20 2020  sforms_dict).   
+000073f0: 2020 2020 2061 7373 6572 7420 7661 6c69       assert vali
+00007400: 645f 656c 656d 656e 7473 2069 7320 7661  d_elements is va
+00007410: 6c69 645f 656c 656d 656e 7473 5f0a 0a20  lid_elements_.. 
+00007420: 2020 2064 6566 2069 745f 6372 6561 7465     def it_create
+00007430: 735f 6974 735f 456c 656d 656e 745f 6f62  s_its_Element_ob
+00007440: 6a65 6374 735f 696e 5f61 5f6c 6f63 616c  jects_in_a_local
+00007450: 5f66 6163 746f 7279 5f74 6f5f 6865 6c70  _factory_to_help
+00007460: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00007470: 2020 2020 2020 2020 7265 7175 6573 742c          request,
+00007480: 0a20 2020 2020 2020 205f 456c 656d 656e  .        _Elemen
+00007490: 7454 7261 6e73 666f 726d 735f 2c0a 2020  tTransforms_,.  
+000074a0: 2020 2020 2020 5f45 6c65 6d65 6e74 5f2c        _Element_,
+000074b0: 0a20 2020 2020 2020 205f 6974 6572 5f65  .        _iter_e
+000074c0: 6c65 6d65 6e74 5f6d 616b 696e 6773 5f2c  lement_makings_,
+000074d0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+000074e0: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+000074f0: 6d73 5f20 3d20 7475 706c 6528 0a20 2020  ms_ = tuple(.   
+00007500: 2020 2020 2020 2020 2069 6e73 7461 6e63           instanc
+00007510: 655f 6d6f 636b 2872 6571 7565 7374 2c20  e_mock(request, 
+00007520: 5f45 6c65 6d65 6e74 5472 616e 7366 6f72  _ElementTransfor
+00007530: 6d73 2c20 6e61 6d65 3d22 656c 656d 656e  ms, name="elemen
+00007540: 742d 7866 726d 732d 2573 2220 2520 6964  t-xfrms-%s" % id
+00007550: 7829 0a20 2020 2020 2020 2020 2020 2066  x).            f
+00007560: 6f72 2069 6478 2069 6e20 7261 6e67 6528  or idx in range(
+00007570: 3329 0a20 2020 2020 2020 2029 0a20 2020  3).        ).   
+00007580: 2020 2020 205f 456c 656d 656e 7454 7261       _ElementTra
+00007590: 6e73 666f 726d 735f 2e73 6964 655f 6566  nsforms_.side_ef
+000075a0: 6665 6374 203d 2069 7465 7228 656c 656d  fect = iter(elem
+000075b0: 656e 745f 7472 616e 7366 6f72 6d73 5f29  ent_transforms_)
+000075c0: 0a20 2020 2020 2020 205f 6974 6572 5f65  .        _iter_e
+000075d0: 6c65 6d65 6e74 5f6d 616b 696e 6773 5f2e  lement_makings_.
+000075e0: 7265 7475 726e 5f76 616c 7565 203d 2069  return_value = i
+000075f0: 7465 7228 0a20 2020 2020 2020 2020 2020  ter(.           
+00007600: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00007610: 2020 2028 302c 207b 2265 6c65 6d65 6e74     (0, {"element
+00007620: 223a 2022 6469 6374 2d41 227d 2c20 7b22  ": "dict-A"}, {"
+00007630: 7866 726d 7322 3a20 307d 292c 0a20 2020  xfrms": 0}),.   
+00007640: 2020 2020 2020 2020 2020 2020 2028 312c               (1,
+00007650: 207b 2265 6c65 6d65 6e74 223a 2022 6469   {"element": "di
+00007660: 6374 2d42 227d 2c20 7b22 7866 726d 7322  ct-B"}, {"xfrms"
+00007670: 3a20 317d 292c 0a20 2020 2020 2020 2020  : 1}),.         
+00007680: 2020 2020 2020 2028 322c 207b 2265 6c65         (2, {"ele
+00007690: 6d65 6e74 223a 2022 6469 6374 2d43 227d  ment": "dict-C"}
+000076a0: 2c20 7b22 7866 726d 7322 3a20 327d 292c  , {"xfrms": 2}),
+000076b0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000076c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000076d0: 2065 6c65 6d65 6e74 735f 203d 2074 7570   elements_ = tup
+000076e0: 6c65 280a 2020 2020 2020 2020 2020 2020  le(.            
+000076f0: 696e 7374 616e 6365 5f6d 6f63 6b28 7265  instance_mock(re
+00007700: 7175 6573 742c 205f 456c 656d 656e 742c  quest, _Element,
+00007710: 206e 616d 653d 2265 6c65 6d65 6e74 2d25   name="element-%
+00007720: 7322 2025 2069 6478 290a 2020 2020 2020  s" % idx).      
+00007730: 2020 2020 2020 666f 7220 6964 7820 696e        for idx in
+00007740: 2072 616e 6765 2833 290a 2020 2020 2020   range(3).      
+00007750: 2020 290a 2020 2020 2020 2020 5f45 6c65    ).        _Ele
+00007760: 6d65 6e74 5f2e 7369 6465 5f65 6666 6563  ment_.side_effec
+00007770: 7420 3d20 6974 6572 2865 6c65 6d65 6e74  t = iter(element
+00007780: 735f 290a 2020 2020 2020 2020 616c 6c5f  s_).        all_
+00007790: 656c 656d 656e 7473 203d 205f 416c 6c45  elements = _AllE
+000077a0: 6c65 6d65 6e74 7328 4e6f 6e65 2c20 4e6f  lements(None, No
+000077b0: 6e65 2c20 4e6f 6e65 290a 0a20 2020 2020  ne, None)..     
+000077c0: 2020 2065 6c65 6d65 6e74 7320 3d20 616c     elements = al
+000077d0: 6c5f 656c 656d 656e 7473 2e5f 656c 656d  l_elements._elem
+000077e0: 656e 7473 0a0a 2020 2020 2020 2020 6173  ents..        as
+000077f0: 7365 7274 205f 456c 656d 656e 7454 7261  sert _ElementTra
+00007800: 6e73 666f 726d 735f 2e63 616c 6c5f 6172  nsforms_.call_ar
+00007810: 6773 5f6c 6973 7420 3d3d 205b 0a20 2020  gs_list == [.   
+00007820: 2020 2020 2020 2020 2063 616c 6c28 7b22           call({"
+00007830: 7866 726d 7322 3a20 307d 292c 0a20 2020  xfrms": 0}),.   
+00007840: 2020 2020 2020 2020 2063 616c 6c28 7b22           call({"
+00007850: 7866 726d 7322 3a20 317d 292c 0a20 2020  xfrms": 1}),.   
+00007860: 2020 2020 2020 2020 2063 616c 6c28 7b22           call({"
+00007870: 7866 726d 7322 3a20 327d 292c 0a20 2020  xfrms": 2}),.   
+00007880: 2020 2020 205d 0a20 2020 2020 2020 2061       ].        a
+00007890: 7373 6572 7420 5f45 6c65 6d65 6e74 5f2e  ssert _Element_.
+000078a0: 6361 6c6c 5f61 7267 735f 6c69 7374 203d  call_args_list =
+000078b0: 3d20 5b0a 2020 2020 2020 2020 2020 2020  = [.            
+000078c0: 6361 6c6c 287b 2265 6c65 6d65 6e74 223a  call({"element":
+000078d0: 2022 6469 6374 2d41 227d 2c20 302c 2065   "dict-A"}, 0, e
+000078e0: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
+000078f0: 735f 5b30 5d29 2c0a 2020 2020 2020 2020  s_[0]),.        
+00007900: 2020 2020 6361 6c6c 287b 2265 6c65 6d65      call({"eleme
+00007910: 6e74 223a 2022 6469 6374 2d42 227d 2c20  nt": "dict-B"}, 
+00007920: 312c 2065 6c65 6d65 6e74 5f74 7261 6e73  1, element_trans
+00007930: 666f 726d 735f 5b31 5d29 2c0a 2020 2020  forms_[1]),.    
+00007940: 2020 2020 2020 2020 6361 6c6c 287b 2265          call({"e
+00007950: 6c65 6d65 6e74 223a 2022 6469 6374 2d43  lement": "dict-C
+00007960: 227d 2c20 322c 2065 6c65 6d65 6e74 5f74  "}, 2, element_t
+00007970: 7261 6e73 666f 726d 735f 5b32 5d29 2c0a  ransforms_[2]),.
+00007980: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00007990: 2020 6173 7365 7274 2065 6c65 6d65 6e74    assert element
+000079a0: 7320 3d3d 2028 656c 656d 656e 7473 5f5b  s == (elements_[
+000079b0: 305d 2c20 656c 656d 656e 7473 5f5b 315d  0], elements_[1]
+000079c0: 2c20 656c 656d 656e 7473 5f5b 325d 290a  , elements_[2]).
+000079d0: 0a20 2020 2064 6566 2069 745f 6765 6e65  .    def it_gene
+000079e0: 7261 7465 735f 656c 656d 656e 745f 6661  rates_element_fa
+000079f0: 6374 6f72 795f 696e 7075 7473 5f74 6f5f  ctory_inputs_to_
+00007a00: 6865 6c70 2873 656c 662c 205f 656c 656d  help(self, _elem
+00007a10: 656e 745f 6469 6374 735f 7072 6f70 5f29  ent_dicts_prop_)
+00007a20: 3a0a 2020 2020 2020 2020 6469 6d65 6e73  :.        dimens
+00007a30: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
+00007a40: 6963 7420 3d20 7b0a 2020 2020 2020 2020  ict = {.        
+00007a50: 2020 2020 2265 6c65 6d65 6e74 7322 3a20      "elements": 
+00007a60: 7b22 3622 3a20 7b22 656c 656d 656e 7422  {"6": {"element"
+00007a70: 3a20 2278 6672 6d73 5f36 227d 2c20 2234  : "xfrms_6"}, "4
+00007a80: 223a 207b 2265 6c65 6d65 6e74 223a 2022  ": {"element": "
+00007a90: 7866 726d 735f 3422 7d7d 0a20 2020 2020  xfrms_4"}}.     
+00007aa0: 2020 207d 0a20 2020 2020 2020 205f 656c     }.        _el
+00007ab0: 656d 656e 745f 6469 6374 735f 7072 6f70  ement_dicts_prop
+00007ac0: 5f2e 7265 7475 726e 5f76 616c 7565 203d  _.return_value =
+00007ad0: 2028 0a20 2020 2020 2020 2020 2020 207b   (.            {
+00007ae0: 2269 6422 3a20 342c 2022 656c 656d 656e  "id": 4, "elemen
+00007af0: 7422 3a20 2264 6963 745f 3422 7d2c 0a20  t": "dict_4"},. 
+00007b00: 2020 2020 2020 2020 2020 207b 2269 6422             {"id"
+00007b10: 3a20 322c 2022 656c 656d 656e 7422 3a20  : 2, "element": 
+00007b20: 2264 6963 745f 3222 7d2c 0a20 2020 2020  "dict_2"},.     
+00007b30: 2020 2020 2020 207b 2269 6422 3a20 362c         {"id": 6,
+00007b40: 2022 656c 656d 656e 7422 3a20 2264 6963   "element": "dic
+00007b50: 745f 3622 7d2c 0a20 2020 2020 2020 2029  t_6"},.        )
+00007b60: 0a20 2020 2020 2020 2061 6c6c 5f65 6c65  .        all_ele
+00007b70: 6d65 6e74 7320 3d20 5f41 6c6c 456c 656d  ments = _AllElem
+00007b80: 656e 7473 284e 6f6e 652c 2064 696d 656e  ents(None, dimen
+00007b90: 7369 6f6e 5f74 7261 6e73 666f 726d 735f  sion_transforms_
+00007ba0: 6469 6374 2c20 4e6f 6e65 290a 0a20 2020  dict, None)..   
+00007bb0: 2020 2020 2065 6c65 6d65 6e74 5f6d 616b       element_mak
+00007bc0: 696e 6773 203d 2074 7570 6c65 2861 6c6c  ings = tuple(all
+00007bd0: 5f65 6c65 6d65 6e74 732e 5f69 7465 725f  _elements._iter_
+00007be0: 656c 656d 656e 745f 6d61 6b69 6e67 7328  element_makings(
+00007bf0: 2929 0a0a 2020 2020 2020 2020 6173 7365  ))..        asse
+00007c00: 7274 2065 6c65 6d65 6e74 5f6d 616b 696e  rt element_makin
+00007c10: 6773 203d 3d20 280a 2020 2020 2020 2020  gs == (.        
+00007c20: 2020 2020 2830 2c20 7b22 6964 223a 2034      (0, {"id": 4
+00007c30: 2c20 2265 6c65 6d65 6e74 223a 2022 6469  , "element": "di
+00007c40: 6374 5f34 227d 2c20 7b22 656c 656d 656e  ct_4"}, {"elemen
+00007c50: 7422 3a20 2278 6672 6d73 5f34 227d 292c  t": "xfrms_4"}),
+00007c60: 0a20 2020 2020 2020 2020 2020 2028 312c  .            (1,
+00007c70: 207b 2269 6422 3a20 322c 2022 656c 656d   {"id": 2, "elem
+00007c80: 656e 7422 3a20 2264 6963 745f 3222 7d2c  ent": "dict_2"},
+00007c90: 207b 7d29 2c0a 2020 2020 2020 2020 2020   {}),.          
+00007ca0: 2020 2832 2c20 7b22 6964 223a 2036 2c20    (2, {"id": 6, 
+00007cb0: 2265 6c65 6d65 6e74 223a 2022 6469 6374  "element": "dict
+00007cc0: 5f36 227d 2c20 7b22 656c 656d 656e 7422  _6"}, {"element"
+00007cd0: 3a20 2278 6672 6d73 5f36 227d 292c 0a20  : "xfrms_6"}),. 
+00007ce0: 2020 2020 2020 2029 0a0a 2020 2020 4070         )..    @p
+00007cf0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
+00007d00: 6574 7269 7a65 280a 2020 2020 2020 2020  etrize(.        
+00007d10: 2264 696d 5f78 666f 726d 732c 2065 6c65  "dim_xforms, ele
+00007d20: 6d65 6e74 5f64 6963 7473 2c20 6469 6d5f  ment_dicts, dim_
+00007d30: 7479 7065 2c20 6578 7065 6374 6564 5f76  type, expected_v
+00007d40: 616c 7565 222c 0a20 2020 2020 2020 2028  alue",.        (
+00007d50: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
+00007d60: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00007d70: 2269 6e73 6572 7469 6f6e 7322 3a20 5b7b  "insertions": [{
+00007d80: 226e 616d 6522 3a20 2241 2642 222c 2022  "name": "A&B", "
+00007d90: 6869 6465 223a 2054 7275 657d 5d7d 2c0a  hide": True}]},.
+00007da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007db0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+00007dc0: 2020 2020 2020 7b22 6964 223a 2031 2c20        {"id": 1, 
+00007dd0: 2276 616c 7565 223a 207b 2269 6422 3a20  "value": {"id": 
+00007de0: 2241 2642 227d 7d2c 0a20 2020 2020 2020  "A&B"}},.       
+00007df0: 2020 2020 2020 2020 2020 2020 207b 2269               {"i
+00007e00: 6422 3a20 322c 2022 7661 6c75 6522 3a20  d": 2, "value": 
+00007e10: 7b22 6964 223a 2022 3030 3034 227d 7d2c  {"id": "0004"}},
+00007e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e30: 205d 2c0a 2020 2020 2020 2020 2020 2020   ],.            
+00007e40: 2020 2020 4454 2e4d 522c 0a20 2020 2020      DT.MR,.     
+00007e50: 2020 2020 2020 2020 2020 207b 313a 207b             {1: {
+00007e60: 2268 6964 6522 3a20 5472 7565 7d7d 2c0a  "hide": True}},.
+00007e70: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+00007e80: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
+00007e90: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007eb0: 2020 2022 696e 7365 7274 696f 6e73 223a     "insertions":
+00007ec0: 205b 7b22 6e61 6d65 223a 2022 4126 4222   [{"name": "A&B"
+00007ed0: 2c20 2268 6964 6522 3a20 5472 7565 7d5d  , "hide": True}]
+00007ee0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007ef0: 2020 2020 2020 2265 6c65 6d65 6e74 7322        "elements"
+00007f00: 3a20 7b32 3a20 7b22 6869 6465 223a 2054  : {2: {"hide": T
+00007f10: 7275 657d 7d2c 0a20 2020 2020 2020 2020  rue}},.         
+00007f20: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00007f30: 2020 2020 2020 2020 2020 5b0a 2020 2020            [.    
+00007f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f50: 7b22 6964 223a 2031 2c20 2276 616c 7565  {"id": 1, "value
+00007f60: 223a 207b 2269 6422 3a20 2241 2642 227d  ": {"id": "A&B"}
+00007f70: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00007f80: 2020 2020 2020 207b 2269 6422 3a20 322c         {"id": 2,
+00007f90: 2022 7661 6c75 6522 3a20 7b22 6964 223a   "value": {"id":
+00007fa0: 2022 3030 3034 227d 7d2c 0a20 2020 2020   "0004"}},.     
+00007fb0: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+00007fc0: 2020 2020 2020 2020 2020 2020 2020 4454                DT
+00007fd0: 2e4d 522c 0a20 2020 2020 2020 2020 2020  .MR,.           
+00007fe0: 2020 2020 207b 313a 207b 2268 6964 6522       {1: {"hide"
+00007ff0: 3a20 5472 7565 7d2c 2032 3a20 7b22 6869  : True}, 2: {"hi
+00008000: 6465 223a 2054 7275 657d 7d2c 0a20 2020  de": True}},.   
+00008010: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00008020: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00008030: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00008040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008050: 2269 6e73 6572 7469 6f6e 7322 3a20 5b7b  "insertions": [{
+00008060: 226e 616d 6522 3a20 2241 2642 222c 2022  "name": "A&B", "
+00008070: 6869 6465 223a 2054 7275 657d 5d2c 0a20  hide": True}],. 
+00008080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008090: 2020 2022 656c 656d 656e 7473 223a 207b     "elements": {
+000080a0: 323a 207b 2268 6964 6522 3a20 5472 7565  2: {"hide": True
+000080b0: 7d7d 2c0a 2020 2020 2020 2020 2020 2020  }},.            
+000080c0: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+000080d0: 2020 2020 2020 205b 0a20 2020 2020 2020         [.       
+000080e0: 2020 2020 2020 2020 2020 2020 207b 2269               {"i
+000080f0: 6422 3a20 312c 2022 7661 6c75 6522 3a20  d": 1, "value": 
+00008100: 7b22 6964 223a 2022 4126 4222 7d7d 2c0a  {"id": "A&B"}},.
+00008110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008120: 2020 2020 7b22 6964 223a 2032 2c20 2276      {"id": 2, "v
+00008130: 616c 7565 223a 207b 2269 6422 3a20 2230  alue": {"id": "0
+00008140: 3030 3422 7d7d 2c0a 2020 2020 2020 2020  004"}},.        
+00008150: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+00008160: 2020 2020 2020 2020 2020 2044 542e 4341             DT.CA
+00008170: 542c 0a20 2020 2020 2020 2020 2020 2020  T,.             
+00008180: 2020 207b 323a 207b 2268 6964 6522 3a20     {2: {"hide": 
+00008190: 5472 7565 7d7d 2c20 2023 202d 2d2d 2043  True}},  # --- C
+000081a0: 4154 2069 6e73 6572 7469 6f6e 7320 646f  AT insertions do
+000081b0: 6e27 7420 6765 7420 7570 6461 7465 640a  n't get updated.
+000081c0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+000081d0: 2020 2020 2020 2029 2c0a 2020 2020 290a         ),.    ).
+000081e0: 2020 2020 6465 6620 6974 5f6b 6e6f 7773      def it_knows
+000081f0: 5f69 7473 5f6d 725f 696e 7365 7274 696f  _its_mr_insertio
+00008200: 6e73 5f65 6c65 6d65 6e74 735f 7472 616e  ns_elements_tran
+00008210: 7366 6f72 6d73 5f66 726f 6d5f 7472 616e  sforms_from_tran
+00008220: 7366 6f72 6d73 5f64 6963 7428 0a20 2020  sforms_dict(.   
+00008230: 2020 2020 2073 656c 662c 2064 696d 5f78       self, dim_x
+00008240: 666f 726d 732c 2065 6c65 6d65 6e74 5f64  forms, element_d
+00008250: 6963 7473 2c20 6469 6d5f 7479 7065 2c20  icts, dim_type, 
+00008260: 6578 7065 6374 6564 5f76 616c 7565 2c20  expected_value, 
+00008270: 5f65 6c65 6d65 6e74 5f64 6963 7473 5f70  _element_dicts_p
+00008280: 726f 705f 0a20 2020 2029 3a0a 2020 2020  rop_.    ):.    
+00008290: 2020 2020 5f65 6c65 6d65 6e74 5f64 6963      _element_dic
+000082a0: 7473 5f70 726f 705f 2e72 6574 7572 6e5f  ts_prop_.return_
+000082b0: 7661 6c75 6520 3d20 656c 656d 656e 745f  value = element_
+000082c0: 6469 6374 730a 2020 2020 2020 2020 616c  dicts.        al
+000082d0: 6c5f 656c 656d 656e 7473 203d 205f 416c  l_elements = _Al
+000082e0: 6c45 6c65 6d65 6e74 7328 4e6f 6e65 2c20  lElements(None, 
+000082f0: 6469 6d5f 7866 6f72 6d73 2c20 6469 6d5f  dim_xforms, dim_
+00008300: 7479 7065 290a 0a20 2020 2020 2020 2065  type)..        e
+00008310: 6c65 6d65 6e74 735f 7472 616e 7366 6f72  lements_transfor
+00008320: 6d73 203d 2061 6c6c 5f65 6c65 6d65 6e74  ms = all_element
+00008330: 732e 5f65 6c65 6d65 6e74 735f 7472 616e  s._elements_tran
+00008340: 7366 6f72 6d73 0a0a 2020 2020 2020 2020  sforms..        
+00008350: 6173 7365 7274 2065 6c65 6d65 6e74 735f  assert elements_
+00008360: 7472 616e 7366 6f72 6d73 203d 3d20 6578  transforms == ex
+00008370: 7065 6374 6564 5f76 616c 7565 0a0a 2020  pected_value..  
+00008380: 2020 2320 6669 7874 7572 6520 636f 6d70    # fixture comp
+00008390: 6f6e 656e 7473 202d 2d2d 2d2d 2d2d 2d2d  onents ---------
+000083a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000083b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000083c0: 2d2d 2d2d 0a0a 2020 2020 4070 7974 6573  ----..    @pytes
+000083d0: 742e 6669 7874 7572 650a 2020 2020 6465  t.fixture.    de
+000083e0: 6620 5f45 6c65 6d65 6e74 5f28 7365 6c66  f _Element_(self
+000083f0: 2c20 7265 7175 6573 7429 3a0a 2020 2020  , request):.    
+00008400: 2020 2020 7265 7475 726e 2063 6c61 7373      return class
+00008410: 5f6d 6f63 6b28 7265 7175 6573 742c 2022  _mock(request, "
+00008420: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
+00008430: 6e2e 5f45 6c65 6d65 6e74 2229 0a0a 2020  n._Element")..  
+00008440: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
+00008450: 650a 2020 2020 6465 6620 5f65 6c65 6d65  e.    def _eleme
+00008460: 6e74 5f64 6963 7473 5f70 726f 705f 2873  nt_dicts_prop_(s
+00008470: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00008480: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
+00008490: 6f70 6572 7479 5f6d 6f63 6b28 7265 7175  operty_mock(requ
+000084a0: 6573 742c 205f 416c 6c45 6c65 6d65 6e74  est, _AllElement
+000084b0: 732c 2022 5f65 6c65 6d65 6e74 5f64 6963  s, "_element_dic
+000084c0: 7473 2229 0a0a 2020 2020 4070 7974 6573  ts")..    @pytes
+000084d0: 742e 6669 7874 7572 650a 2020 2020 6465  t.fixture.    de
+000084e0: 6620 5f65 6c65 6d65 6e74 735f 7072 6f70  f _elements_prop
+000084f0: 5f28 7365 6c66 2c20 7265 7175 6573 7429  _(self, request)
+00008500: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00008510: 2070 726f 7065 7274 795f 6d6f 636b 2872   property_mock(r
+00008520: 6571 7565 7374 2c20 5f41 6c6c 456c 656d  equest, _AllElem
+00008530: 656e 7473 2c20 225f 656c 656d 656e 7473  ents, "_elements
+00008540: 2229 0a0a 2020 2020 4070 7974 6573 742e  ")..    @pytest.
+00008550: 6669 7874 7572 650a 2020 2020 6465 6620  fixture.    def 
+00008560: 5f45 6c65 6d65 6e74 5472 616e 7366 6f72  _ElementTransfor
+00008570: 6d73 5f28 7365 6c66 2c20 7265 7175 6573  ms_(self, reques
+00008580: 7429 3a0a 2020 2020 2020 2020 7265 7475  t):.        retu
+00008590: 726e 2063 6c61 7373 5f6d 6f63 6b28 7265  rn class_mock(re
+000085a0: 7175 6573 742c 2022 6372 2e63 7562 652e  quest, "cr.cube.
+000085b0: 6469 6d65 6e73 696f 6e2e 5f45 6c65 6d65  dimension._Eleme
+000085c0: 6e74 5472 616e 7366 6f72 6d73 2229 0a0a  ntTransforms")..
+000085d0: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+000085e0: 7572 650a 2020 2020 6465 6620 5f69 7465  ure.    def _ite
+000085f0: 725f 656c 656d 656e 745f 6d61 6b69 6e67  r_element_making
+00008600: 735f 2873 656c 662c 2072 6571 7565 7374  s_(self, request
+00008610: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00008620: 6e20 6d65 7468 6f64 5f6d 6f63 6b28 7265  n method_mock(re
+00008630: 7175 6573 742c 205f 416c 6c45 6c65 6d65  quest, _AllEleme
+00008640: 6e74 732c 2022 5f69 7465 725f 656c 656d  nts, "_iter_elem
+00008650: 656e 745f 6d61 6b69 6e67 7322 290a 0a20  ent_makings").. 
+00008660: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
+00008670: 7265 0a20 2020 2064 6566 205f 5661 6c69  re.    def _Vali
+00008680: 6445 6c65 6d65 6e74 735f 2873 656c 662c  dElements_(self,
+00008690: 2072 6571 7565 7374 293a 0a20 2020 2020   request):.     
+000086a0: 2020 2072 6574 7572 6e20 636c 6173 735f     return class_
+000086b0: 6d6f 636b 2872 6571 7565 7374 2c20 2263  mock(request, "c
+000086c0: 722e 6375 6265 2e64 696d 656e 7369 6f6e  r.cube.dimension
+000086d0: 2e5f 5661 6c69 6445 6c65 6d65 6e74 7322  ._ValidElements"
+000086e0: 290a 0a20 2020 2040 7079 7465 7374 2e66  )..    @pytest.f
+000086f0: 6978 7475 7265 0a20 2020 2064 6566 2076  ixture.    def v
+00008700: 616c 6964 5f65 6c65 6d65 6e74 735f 2873  alid_elements_(s
+00008710: 656c 662c 2072 6571 7565 7374 293a 0a20  elf, request):. 
+00008720: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+00008730: 7374 616e 6365 5f6d 6f63 6b28 7265 7175  stance_mock(requ
+00008740: 6573 742c 205f 5661 6c69 6445 6c65 6d65  est, _ValidEleme
+00008750: 6e74 7329 0a0a 0a63 6c61 7373 2044 6573  nts)...class Des
+00008760: 6372 6962 655f 5661 6c69 6445 6c65 6d65  cribe_ValidEleme
+00008770: 6e74 733a 0a20 2020 2022 2222 556e 6974  nts:.    """Unit
+00008780: 2d74 6573 7420 7375 6974 6520 666f 7220  -test suite for 
+00008790: 6063 722e 6375 6265 2e64 696d 656e 7369  `cr.cube.dimensi
+000087a0: 6f6e 2e5f 5661 6c69 6445 6c65 6d65 6e74  on._ValidElement
+000087b0: 7360 206f 626a 6563 742e 2222 220a 0a20  s` object.""".. 
+000087c0: 2020 2064 6566 2069 745f 6765 7473 5f69     def it_gets_i
+000087d0: 7473 5f45 6c65 6d65 6e74 5f6f 626a 6563  ts_Element_objec
+000087e0: 7473 5f66 726f 6d5f 616e 5f41 6c6c 456c  ts_from_an_AllEl
+000087f0: 656d 656e 7473 5f6f 626a 6563 7428 7365  ements_object(se
+00008800: 6c66 2c20 7265 7175 6573 7429 3a0a 2020  lf, request):.  
+00008810: 2020 2020 2020 656c 656d 656e 7473 5f20        elements_ 
+00008820: 3d20 7475 706c 6528 0a20 2020 2020 2020  = tuple(.       
+00008830: 2020 2020 2069 6e73 7461 6e63 655f 6d6f       instance_mo
+00008840: 636b 2872 6571 7565 7374 2c20 5f45 6c65  ck(request, _Ele
+00008850: 6d65 6e74 2c20 6e61 6d65 3d22 656c 656d  ment, name="elem
+00008860: 656e 742d 2573 2220 2520 6964 782c 206d  ent-%s" % idx, m
+00008870: 6973 7369 6e67 3d6d 6973 7369 6e67 290a  issing=missing).
+00008880: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00008890: 6964 782c 206d 6973 7369 6e67 2069 6e20  idx, missing in 
+000088a0: 656e 756d 6572 6174 6528 5b46 616c 7365  enumerate([False
+000088b0: 2c20 5472 7565 2c20 4661 6c73 655d 290a  , True, False]).
+000088c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000088d0: 2020 616c 6c5f 656c 656d 656e 7473 5f20    all_elements_ 
+000088e0: 3d20 696e 7374 616e 6365 5f6d 6f63 6b28  = instance_mock(
+000088f0: 7265 7175 6573 742c 205f 416c 6c45 6c65  request, _AllEle
+00008900: 6d65 6e74 7329 0a20 2020 2020 2020 2061  ments).        a
+00008910: 6c6c 5f65 6c65 6d65 6e74 735f 2e5f 5f69  ll_elements_.__i
+00008920: 7465 725f 5f2e 7265 7475 726e 5f76 616c  ter__.return_val
+00008930: 7565 203d 2069 7465 7228 656c 656d 656e  ue = iter(elemen
+00008940: 7473 5f29 0a20 2020 2020 2020 2076 616c  ts_).        val
+00008950: 6964 5f65 6c65 6d65 6e74 7320 3d20 5f56  id_elements = _V
+00008960: 616c 6964 456c 656d 656e 7473 2861 6c6c  alidElements(all
+00008970: 5f65 6c65 6d65 6e74 735f 2c20 4e6f 6e65  _elements_, None
+00008980: 290a 0a20 2020 2020 2020 2065 6c65 6d65  )..        eleme
+00008990: 6e74 7320 3d20 7661 6c69 645f 656c 656d  nts = valid_elem
+000089a0: 656e 7473 2e5f 656c 656d 656e 7473 0a0a  ents._elements..
+000089b0: 2020 2020 2020 2020 6173 7365 7274 2065          assert e
+000089c0: 6c65 6d65 6e74 7320 3d3d 2028 656c 656d  lements == (elem
+000089d0: 656e 7473 5f5b 305d 2c20 656c 656d 656e  ents_[0], elemen
+000089e0: 7473 5f5b 325d 290a 0a0a 636c 6173 7320  ts_[2])...class 
+000089f0: 4465 7363 7269 6265 5f45 6c65 6d65 6e74  Describe_Element
+00008a00: 4964 5368 696d 3a0a 2020 2020 2222 2255  IdShim:.    """U
+00008a10: 6e69 742d 7465 7374 2073 7569 7465 2066  nit-test suite f
+00008a20: 6f72 2060 6372 2e63 7562 652e 6469 6d65  or `cr.cube.dime
+00008a30: 6e73 696f 6e2e 5f45 6c65 6d65 6e74 4964  nsion._ElementId
+00008a40: 5368 696d 6020 6f62 6a65 6374 2e22 2222  Shim` object."""
+00008a50: 0a0a 2020 2020 6465 6620 6974 5f70 726f  ..    def it_pro
+00008a60: 7669 6465 735f 7468 655f 7368 696d 6d65  vides_the_shimme
+00008a70: 645f 6469 6d65 6e73 696f 6e5f 6469 6374  d_dimension_dict
+00008a80: 5f66 6f72 5f73 7562 7661 7273 2873 656c  _for_subvars(sel
+00008a90: 662c 205f 7375 6276 6172 5f61 6c69 6173  f, _subvar_alias
+00008aa0: 6573 5f70 726f 705f 293a 0a20 2020 2020  es_prop_):.     
+00008ab0: 2020 205f 7375 6276 6172 5f61 6c69 6173     _subvar_alias
+00008ac0: 6573 5f70 726f 705f 2e72 6574 7572 6e5f  es_prop_.return_
+00008ad0: 7661 6c75 6520 3d20 7475 706c 6528 2822  value = tuple(("
+00008ae0: 616c 6961 7331 222c 2022 616c 6961 7332  alias1", "alias2
+00008af0: 2229 290a 2020 2020 2020 2020 6469 6d65  ")).        dime
+00008b00: 6e73 696f 6e5f 6469 6374 203d 207b 0a20  nsion_dict = {. 
+00008b10: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+00008b20: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
+00008b30: 2020 2020 2022 656c 656d 656e 7473 223a       "elements":
+00008b40: 205b 7b22 6964 223a 2031 2c20 2265 6c65   [{"id": 1, "ele
+00008b50: 6d65 6e74 5f69 6e66 6f22 3a20 3130 307d  ment_info": 100}
+00008b60: 2c20 7b22 6964 223a 2032 7d5d 2c0a 2020  , {"id": 2}],.  
+00008b70: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00008b80: 7468 6572 223a 2022 696e 2074 7970 6522  ther": "in type"
+00008b90: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00008ba0: 0a20 2020 2020 2020 2020 2020 2022 616e  .            "an
+00008bb0: 6f74 6865 7222 3a20 226f 7574 7369 6465  other": "outside
+00008bc0: 2074 7970 6522 2c0a 2020 2020 2020 2020   type",.        
+00008bd0: 7d0a 2020 2020 2020 2020 7368 696d 5f20  }.        shim_ 
+00008be0: 3d20 5f45 6c65 6d65 6e74 4964 5368 696d  = _ElementIdShim
+00008bf0: 2844 542e 4d52 5f53 5542 5641 522c 2064  (DT.MR_SUBVAR, d
+00008c00: 696d 656e 7369 6f6e 5f64 6963 742c 204e  imension_dict, N
+00008c10: 6f6e 6529 0a0a 2020 2020 2020 2020 6173  one)..        as
+00008c20: 7365 7274 2073 6869 6d5f 2e73 6869 6d6d  sert shim_.shimm
+00008c30: 6564 5f64 696d 656e 7369 6f6e 5f64 6963  ed_dimension_dic
+00008c40: 7420 3d3d 207b 0a20 2020 2020 2020 2020  t == {.         
+00008c50: 2020 2022 7479 7065 223a 207b 0a20 2020     "type": {.   
+00008c60: 2020 2020 2020 2020 2020 2020 2022 656c               "el
+00008c70: 656d 656e 7473 223a 205b 7b22 6964 223a  ements": [{"id":
+00008c80: 2022 616c 6961 7331 222c 2022 656c 656d   "alias1", "elem
+00008c90: 656e 745f 696e 666f 223a 2031 3030 7d2c  ent_info": 100},
+00008ca0: 207b 2269 6422 3a20 2261 6c69 6173 3222   {"id": "alias2"
+00008cb0: 7d5d 2c0a 2020 2020 2020 2020 2020 2020  }],.            
+00008cc0: 2020 2020 226f 7468 6572 223a 2022 696e      "other": "in
+00008cd0: 2074 7970 6522 2c0a 2020 2020 2020 2020   type",.        
+00008ce0: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00008cf0: 2020 2022 616e 6f74 6865 7222 3a20 226f     "another": "o
+00008d00: 7574 7369 6465 2074 7970 6522 2c0a 2020  utside type",.  
+00008d10: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
+00008d20: 2062 7574 5f6e 6f6e 5f73 7562 7661 7269   but_non_subvari
+00008d30: 6162 6c65 5f64 696d 656e 7369 6f6e 5f69  able_dimension_i
+00008d40: 735f 6c65 6674 5f61 6c6f 6e65 2873 656c  s_left_alone(sel
+00008d50: 6629 3a0a 2020 2020 2020 2020 6469 6d65  f):.        dime
+00008d60: 6e73 696f 6e5f 6469 6374 203d 207b 2264  nsion_dict = {"d
+00008d70: 696d 656e 7369 6f6e 223a 2022 6469 6374  imension": "dict
+00008d80: 696f 6e61 7279 227d 0a20 2020 2020 2020  ionary"}.       
+00008d90: 2073 6869 6d5f 203d 205f 456c 656d 656e   shim_ = _Elemen
+00008da0: 7449 6453 6869 6d28 4454 2e43 4154 2c20  tIdShim(DT.CAT, 
+00008db0: 6469 6d65 6e73 696f 6e5f 6469 6374 2c20  dimension_dict, 
+00008dc0: 4e6f 6e65 290a 0a20 2020 2020 2020 2061  None)..        a
+00008dd0: 7373 6572 7420 7368 696d 5f2e 7368 696d  ssert shim_.shim
+00008de0: 6d65 645f 6469 6d65 6e73 696f 6e5f 6469  med_dimension_di
+00008df0: 6374 203d 3d20 6469 6d65 6e73 696f 6e5f  ct == dimension_
+00008e00: 6469 6374 0a0a 2020 2020 6465 6620 6974  dict..    def it
+00008e10: 5f70 726f 7669 6465 735f 7468 655f 7368  _provides_the_sh
+00008e20: 696d 6d65 645f 6469 6d65 6e73 696f 6e5f  immed_dimension_
+00008e30: 7472 616e 7366 6f72 6d5f 6469 6374 5f66  transform_dict_f
+00008e40: 6f72 5f73 7562 7661 7273 280a 2020 2020  or_subvars(.    
+00008e50: 2020 2020 7365 6c66 2c20 5f72 6570 6c61      self, _repla
+00008e60: 6365 645f 656c 656d 656e 745f 7472 616e  ced_element_tran
+00008e70: 7366 6f72 6d73 5f2c 205f 7265 706c 6163  sforms_, _replac
+00008e80: 6564 5f6f 7264 6572 5f65 6c65 6d65 6e74  ed_order_element
+00008e90: 5f69 6473 5f0a 2020 2020 293a 0a20 2020  _ids_.    ):.   
+00008ea0: 2020 2020 2064 696d 656e 7369 6f6e 5f74       dimension_t
+00008eb0: 7261 6e73 666f 726d 735f 6469 6374 203d  ransforms_dict =
+00008ec0: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00008ed0: 656c 656d 656e 7473 223a 2022 616c 6c5f  elements": "all_
+00008ee0: 656c 656d 656e 7473 222c 0a20 2020 2020  elements",.     
+00008ef0: 2020 2020 2020 2022 6f72 6465 7222 3a20         "order": 
+00008f00: 7b22 656c 656d 656e 745f 6964 7322 3a20  {"element_ids": 
+00008f10: 2261 222c 2022 6967 6e6f 7265 6422 3a20  "a", "ignored": 
+00008f20: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
+00008f30: 2020 2020 2020 2022 616e 6f74 6865 7222         "another"
+00008f40: 3a20 2269 676e 6f72 6564 222c 0a20 2020  : "ignored",.   
+00008f50: 2020 2020 207d 0a20 2020 2020 2020 205f       }.        _
+00008f60: 7265 706c 6163 6564 5f65 6c65 6d65 6e74  replaced_element
+00008f70: 5f74 7261 6e73 666f 726d 735f 2e72 6574  _transforms_.ret
+00008f80: 7572 6e5f 7661 6c75 6520 3d20 7b22 7265  urn_value = {"re
+00008f90: 706c 6163 6564 223a 2022 656c 656d 656e  placed": "elemen
+00008fa0: 745f 7472 616e 7366 6f72 6d73 227d 0a20  t_transforms"}. 
+00008fb0: 2020 2020 2020 205f 7265 706c 6163 6564         _replaced
+00008fc0: 5f6f 7264 6572 5f65 6c65 6d65 6e74 5f69  _order_element_i
+00008fd0: 6473 5f2e 7265 7475 726e 5f76 616c 7565  ds_.return_value
+00008fe0: 203d 207b 2272 6570 6c61 6365 6422 3a20   = {"replaced": 
+00008ff0: 2269 6473 227d 0a20 2020 2020 2020 2073  "ids"}.        s
+00009000: 6869 6d5f 203d 205f 456c 656d 656e 7449  him_ = _ElementI
+00009010: 6453 6869 6d28 4454 2e4d 525f 5355 4256  dShim(DT.MR_SUBV
+00009020: 4152 2c20 4e6f 6e65 2c20 6469 6d65 6e73  AR, None, dimens
+00009030: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
+00009040: 6963 7429 0a0a 2020 2020 2020 2020 6173  ict)..        as
+00009050: 7365 7274 2073 6869 6d5f 2e73 6869 6d6d  sert shim_.shimm
+00009060: 6564 5f64 696d 656e 7369 6f6e 5f74 7261  ed_dimension_tra
+00009070: 6e73 666f 726d 735f 6469 6374 203d 3d20  nsforms_dict == 
+00009080: 7b0a 2020 2020 2020 2020 2020 2020 2265  {.            "e
+00009090: 6c65 6d65 6e74 7322 3a20 7b22 7265 706c  lements": {"repl
+000090a0: 6163 6564 223a 2022 656c 656d 656e 745f  aced": "element_
+000090b0: 7472 616e 7366 6f72 6d73 227d 2c0a 2020  transforms"},.  
+000090c0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000090d0: 223a 207b 2265 6c65 6d65 6e74 5f69 6473  ": {"element_ids
+000090e0: 223a 207b 2272 6570 6c61 6365 6422 3a20  ": {"replaced": 
+000090f0: 2269 6473 227d 2c20 2269 676e 6f72 6564  "ids"}, "ignored
+00009100: 223a 2022 7374 7269 6e67 227d 2c0a 2020  ": "string"},.  
+00009110: 2020 2020 2020 2020 2020 2261 6e6f 7468            "anoth
+00009120: 6572 223a 2022 6967 6e6f 7265 6422 2c0a  er": "ignored",.
+00009130: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00009140: 2020 5f72 6570 6c61 6365 645f 656c 656d    _replaced_elem
+00009150: 656e 745f 7472 616e 7366 6f72 6d73 5f2e  ent_transforms_.
+00009160: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+00009170: 6365 5f77 6974 6828 7368 696d 5f2c 2022  ce_with(shim_, "
+00009180: 616c 6c5f 656c 656d 656e 7473 2229 0a20  all_elements"). 
+00009190: 2020 2020 2020 205f 7265 706c 6163 6564         _replaced
+000091a0: 5f6f 7264 6572 5f65 6c65 6d65 6e74 5f69  _order_element_i
+000091b0: 6473 5f2e 6173 7365 7274 5f63 616c 6c65  ds_.assert_calle
+000091c0: 645f 6f6e 6365 5f77 6974 6828 7368 696d  d_once_with(shim
+000091d0: 5f2c 2022 6122 290a 0a20 2020 2064 6566  _, "a")..    def
+000091e0: 2062 7574 5f69 745f 736b 6970 735f 7265   but_it_skips_re
+000091f0: 706c 6163 696e 675f 6966 5f6e 6f74 5f70  placing_if_not_p
+00009200: 7265 7365 6e74 280a 2020 2020 2020 2020  resent(.        
+00009210: 7365 6c66 2c20 5f72 6570 6c61 6365 645f  self, _replaced_
+00009220: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+00009230: 6d73 5f2c 205f 7265 706c 6163 6564 5f6f  ms_, _replaced_o
+00009240: 7264 6572 5f65 6c65 6d65 6e74 5f69 6473  rder_element_ids
+00009250: 5f0a 2020 2020 293a 0a20 2020 2020 2020  _.    ):.       
+00009260: 2064 696d 656e 7369 6f6e 5f74 7261 6e73   dimension_trans
+00009270: 666f 726d 735f 6469 6374 203d 207b 0a20  forms_dict = {. 
+00009280: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00009290: 7222 3a20 7b22 6967 6e6f 7265 6422 3a20  r": {"ignored": 
+000092a0: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
+000092b0: 2020 2020 2020 2022 616e 6f74 6865 7222         "another"
+000092c0: 3a20 2269 676e 6f72 6564 222c 0a20 2020  : "ignored",.   
+000092d0: 2020 2020 207d 0a20 2020 2020 2020 2073       }.        s
+000092e0: 6869 6d5f 203d 205f 456c 656d 656e 7449  him_ = _ElementI
+000092f0: 6453 6869 6d28 4454 2e4d 525f 5355 4256  dShim(DT.MR_SUBV
+00009300: 4152 2c20 4e6f 6e65 2c20 6469 6d65 6e73  AR, None, dimens
+00009310: 696f 6e5f 7472 616e 7366 6f72 6d73 5f64  ion_transforms_d
+00009320: 6963 7429 0a0a 2020 2020 2020 2020 6173  ict)..        as
+00009330: 7365 7274 2073 6869 6d5f 2e73 6869 6d6d  sert shim_.shimm
+00009340: 6564 5f64 696d 656e 7369 6f6e 5f74 7261  ed_dimension_tra
+00009350: 6e73 666f 726d 735f 6469 6374 203d 3d20  nsforms_dict == 
+00009360: 6469 6d65 6e73 696f 6e5f 7472 616e 7366  dimension_transf
+00009370: 6f72 6d73 5f64 6963 740a 2020 2020 2020  orms_dict.      
+00009380: 2020 5f72 6570 6c61 6365 645f 656c 656d    _replaced_elem
+00009390: 656e 745f 7472 616e 7366 6f72 6d73 5f2e  ent_transforms_.
+000093a0: 6173 7365 7274 5f6e 6f74 5f63 616c 6c65  assert_not_calle
+000093b0: 6428 290a 2020 2020 2020 2020 5f72 6570  d().        _rep
+000093c0: 6c61 6365 645f 6f72 6465 725f 656c 656d  laced_order_elem
+000093d0: 656e 745f 6964 735f 2e61 7373 6572 745f  ent_ids_.assert_
+000093e0: 6e6f 745f 6361 6c6c 6564 2829 0a0a 2020  not_called()..  
+000093f0: 2020 6465 6620 616e 645f 6974 5f73 6b69    def and_it_ski
+00009400: 7073 5f72 6570 6c61 6369 6e67 5f69 665f  ps_replacing_if_
+00009410: 6e6f 745f 7375 6276 6172 7328 0a20 2020  not_subvars(.   
+00009420: 2020 2020 2073 656c 662c 205f 7265 706c       self, _repl
+00009430: 6163 6564 5f65 6c65 6d65 6e74 5f74 7261  aced_element_tra
+00009440: 6e73 666f 726d 735f 2c20 5f72 6570 6c61  nsforms_, _repla
+00009450: 6365 645f 6f72 6465 725f 656c 656d 656e  ced_order_elemen
+00009460: 745f 6964 735f 0a20 2020 2029 3a0a 2020  t_ids_.    ):.  
+00009470: 2020 2020 2020 6469 6d65 6e73 696f 6e5f        dimension_
+00009480: 7472 616e 7366 6f72 6d73 5f64 6963 7420  transforms_dict 
+00009490: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+000094a0: 2265 6c65 6d65 6e74 7322 3a20 7b22 7265  "elements": {"re
+000094b0: 706c 6163 6564 223a 2022 656c 656d 656e  placed": "elemen
+000094c0: 745f 7472 616e 7366 6f72 6d73 227d 2c0a  t_transforms"},.
+000094d0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000094e0: 6572 223a 207b 2265 6c65 6d65 6e74 5f69  er": {"element_i
+000094f0: 6473 223a 207b 2272 6570 6c61 6365 6422  ds": {"replaced"
+00009500: 3a20 2269 6473 227d 2c20 2269 676e 6f72  : "ids"}, "ignor
+00009510: 6564 223a 2022 7374 7269 6e67 227d 2c0a  ed": "string"},.
+00009520: 2020 2020 2020 2020 2020 2020 2261 6e6f              "ano
+00009530: 7468 6572 223a 2022 6967 6e6f 7265 6422  ther": "ignored"
+00009540: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00009550: 2020 2020 7368 696d 5f20 3d20 5f45 6c65      shim_ = _Ele
+00009560: 6d65 6e74 4964 5368 696d 2844 542e 4341  mentIdShim(DT.CA
+00009570: 542c 204e 6f6e 652c 2064 696d 656e 7369  T, None, dimensi
+00009580: 6f6e 5f74 7261 6e73 666f 726d 735f 6469  on_transforms_di
+00009590: 6374 290a 0a20 2020 2020 2020 2061 7373  ct)..        ass
+000095a0: 6572 7420 7368 696d 5f2e 7368 696d 6d65  ert shim_.shimme
+000095b0: 645f 6469 6d65 6e73 696f 6e5f 7472 616e  d_dimension_tran
+000095c0: 7366 6f72 6d73 5f64 6963 7420 3d3d 2064  sforms_dict == d
+000095d0: 696d 656e 7369 6f6e 5f74 7261 6e73 666f  imension_transfo
+000095e0: 726d 735f 6469 6374 0a20 2020 2020 2020  rms_dict.       
+000095f0: 205f 7265 706c 6163 6564 5f65 6c65 6d65   _replaced_eleme
+00009600: 6e74 5f74 7261 6e73 666f 726d 735f 2e61  nt_transforms_.a
+00009610: 7373 6572 745f 6e6f 745f 6361 6c6c 6564  ssert_not_called
+00009620: 2829 0a20 2020 2020 2020 205f 7265 706c  ().        _repl
+00009630: 6163 6564 5f6f 7264 6572 5f65 6c65 6d65  aced_order_eleme
+00009640: 6e74 5f69 6473 5f2e 6173 7365 7274 5f6e  nt_ids_.assert_n
+00009650: 6f74 5f63 616c 6c65 6428 290a 0a20 2020  ot_called()..   
+00009660: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
+00009670: 7261 6d65 7472 697a 6528 0a20 2020 2020  rametrize(.     
+00009680: 2020 2022 6964 2c20 7375 6276 6172 5f61     "id, subvar_a
+00009690: 6c69 6173 6573 2c20 7375 6276 6172 5f69  liases, subvar_i
+000096a0: 6473 2c20 7261 775f 656c 656d 656e 745f  ds, raw_element_
+000096b0: 6964 732c 2065 7870 6563 7465 6422 2c0a  ids, expected",.
+000096c0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+000096d0: 2020 2020 2020 2822 616c 6c22 2c20 2822        ("all", ("
+000096e0: 616c 6c22 2c20 2261 6c31 222c 2022 616c  all", "al1", "al
+000096f0: 3222 292c 2028 2230 3122 2c20 2261 6c6c  2"), ("01", "all
+00009700: 222c 2022 3033 2229 2c20 2822 3122 2c20  ", "03"), ("1", 
+00009710: 332c 2022 616c 6c22 292c 2022 616c 6c22  3, "all"), "all"
+00009720: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00009730: 2230 3322 2c20 2822 616c 6c22 2c20 2261  "03", ("all", "a
+00009740: 6c31 222c 2022 616c 3222 292c 2028 2230  l1", "al2"), ("0
+00009750: 3122 2c20 2261 6c6c 222c 2022 3033 2229  1", "all", "03")
+00009760: 2c20 2822 3122 2c20 332c 2022 616c 6c22  , ("1", 3, "all"
+00009770: 292c 2022 616c 3222 292c 0a20 2020 2020  ), "al2"),.     
+00009780: 2020 2020 2020 2028 2231 222c 2028 2261         ("1", ("a
+00009790: 6c6c 222c 2022 616c 3122 2c20 2261 6c32  ll", "al1", "al2
+000097a0: 2229 2c20 2822 3031 222c 2022 616c 6c22  "), ("01", "all"
+000097b0: 2c20 2230 3322 292c 2028 2231 222c 2033  , "03"), ("1", 3
+000097c0: 2c20 2261 6c6c 2229 2c20 2261 6c6c 2229  , "all"), "all")
+000097d0: 2c0a 2020 2020 2020 2020 2020 2020 2833  ,.            (3
+000097e0: 2c20 2822 616c 6c22 2c20 2261 6c31 222c  , ("all", "al1",
+000097f0: 2022 616c 3222 292c 2028 2230 3122 2c20   "al2"), ("01", 
+00009800: 2261 6c6c 222c 2022 3033 2229 2c20 2822  "all", "03"), ("
+00009810: 3122 2c20 332c 2022 616c 6c22 292c 2022  1", 3, "all"), "
+00009820: 616c 3122 292c 0a20 2020 2020 2020 2020  al1"),.         
+00009830: 2020 2028 322c 2028 2261 6c6c 222c 2022     (2, ("all", "
+00009840: 616c 222c 2022 616c 3222 292c 2028 2230  al", "al2"), ("0
+00009850: 3122 2c20 2261 6c6c 222c 2022 3033 2229  1", "all", "03")
+00009860: 2c20 2822 3122 2c20 332c 2022 616c 6c22  , ("1", 3, "all"
+00009870: 292c 2022 616c 3222 292c 0a20 2020 2020  ), "al2"),.     
+00009880: 2020 2020 2020 2028 3231 2c20 2822 616c         (21, ("al
+00009890: 6c22 2c20 2261 6c31 222c 2022 616c 3222  l", "al1", "al2"
+000098a0: 292c 2028 2230 3122 2c20 2261 6c6c 222c  ), ("01", "all",
+000098b0: 2022 3033 2229 2c20 2822 3122 2c20 332c   "03"), ("1", 3,
+000098c0: 2022 616c 6c22 292c 204e 6f6e 6529 2c0a   "all"), None),.
+000098d0: 2020 2020 2020 2020 2020 2020 2822 7879              ("xy
+000098e0: 7a22 2c20 2822 616c 6c22 2c20 2261 6c31  z", ("all", "al1
+000098f0: 222c 2022 616c 3222 292c 2028 2230 3122  ", "al2"), ("01"
+00009900: 2c20 2261 6c6c 222c 2022 3033 2229 2c20  , "all", "03"), 
+00009910: 2822 3122 2c20 332c 2022 616c 6c22 292c  ("1", 3, "all"),
+00009920: 204e 6f6e 6529 2c0a 2020 2020 2020 2020   None),.        
+00009930: 2020 2020 2822 3122 2c20 2822 616c 6c22      ("1", ("all"
+00009940: 2c20 2261 6c31 222c 2022 616c 3222 292c  , "al1", "al2"),
+00009950: 2028 2230 3031 222c 2022 3122 2c20 2230   ("001", "1", "0
+00009960: 3033 2229 2c20 2822 3122 2c20 332c 2022  03"), ("1", 3, "
+00009970: 616c 6c22 292c 2022 616c 6c22 292c 0a20  all"), "all"),. 
+00009980: 2020 2020 2020 2020 2020 2028 2231 222c             ("1",
+00009990: 2028 2261 6c6c 222c 2022 616c 3122 2c20   ("all", "al1", 
+000099a0: 2261 6c32 2229 2c20 2822 3030 3122 2c20  "al2"), ("001", 
+000099b0: 2231 222c 2022 3030 3322 292c 2028 312c  "1", "003"), (1,
+000099c0: 2033 2c20 2261 6c6c 2229 2c20 2261 6c31   3, "all"), "al1
+000099d0: 2229 2c0a 2020 2020 2020 2020 292c 0a20  "),.        ),. 
+000099e0: 2020 2029 0a20 2020 2064 6566 2069 745f     ).    def it_
+000099f0: 7472 616e 736c 6174 6573 5f65 6c65 6d65  translates_eleme
+00009a00: 6e74 5f69 6473 5f66 6f72 5f73 7562 7661  nt_ids_for_subva
+00009a10: 7269 6162 6c65 7328 0a20 2020 2020 2020  riables(.       
+00009a20: 2073 656c 662c 0a20 2020 2020 2020 205f   self,.        _
+00009a30: 7261 775f 656c 656d 656e 745f 6964 5f70  raw_element_id_p
+00009a40: 726f 705f 2c0a 2020 2020 2020 2020 5f73  rop_,.        _s
+00009a50: 7562 7661 725f 616c 6961 7365 735f 7072  ubvar_aliases_pr
+00009a60: 6f70 5f2c 0a20 2020 2020 2020 205f 7375  op_,.        _su
+00009a70: 6276 6172 5f69 6473 5f70 726f 705f 2c0a  bvar_ids_prop_,.
+00009a80: 2020 2020 2020 2020 6964 2c0a 2020 2020          id,.    
+00009a90: 2020 2020 7375 6276 6172 5f61 6c69 6173      subvar_alias
+00009aa0: 6573 2c0a 2020 2020 2020 2020 7375 6276  es,.        subv
+00009ab0: 6172 5f69 6473 2c0a 2020 2020 2020 2020  ar_ids,.        
+00009ac0: 7261 775f 656c 656d 656e 745f 6964 732c  raw_element_ids,
+00009ad0: 0a20 2020 2020 2020 2065 7870 6563 7465  .        expecte
+00009ae0: 642c 0a20 2020 2029 3a0a 2020 2020 2020  d,.    ):.      
+00009af0: 2020 5f73 7562 7661 725f 616c 6961 7365    _subvar_aliase
+00009b00: 735f 7072 6f70 5f2e 7265 7475 726e 5f76  s_prop_.return_v
+00009b10: 616c 7565 203d 2073 7562 7661 725f 616c  alue = subvar_al
+00009b20: 6961 7365 730a 2020 2020 2020 2020 5f73  iases.        _s
+00009b30: 7562 7661 725f 6964 735f 7072 6f70 5f2e  ubvar_ids_prop_.
+00009b40: 7265 7475 726e 5f76 616c 7565 203d 2073  return_value = s
+00009b50: 7562 7661 725f 6964 730a 2020 2020 2020  ubvar_ids.      
+00009b60: 2020 5f72 6177 5f65 6c65 6d65 6e74 5f69    _raw_element_i
+00009b70: 645f 7072 6f70 5f2e 7265 7475 726e 5f76  d_prop_.return_v
+00009b80: 616c 7565 203d 2072 6177 5f65 6c65 6d65  alue = raw_eleme
+00009b90: 6e74 5f69 6473 0a0a 2020 2020 2020 2020  nt_ids..        
+00009ba0: 7368 696d 5f20 3d20 5f45 6c65 6d65 6e74  shim_ = _Element
+00009bb0: 4964 5368 696d 2844 542e 4d52 5f53 5542  IdShim(DT.MR_SUB
+00009bc0: 5641 522c 204e 6f6e 652c 204e 6f6e 6529  VAR, None, None)
+00009bd0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+00009be0: 2073 6869 6d5f 2e74 7261 6e73 6c61 7465   shim_.translate
+00009bf0: 5f65 6c65 6d65 6e74 5f69 6428 6964 2920  _element_id(id) 
+00009c00: 3d3d 2065 7870 6563 7465 640a 0a20 2020  == expected..   
+00009c10: 2064 6566 2062 7574 5f69 745f 6c65 6176   def but_it_leav
+00009c20: 6573 5f6e 6f6e 5f61 7272 6179 5f69 6473  es_non_array_ids
+00009c30: 5f61 6c6f 6e65 2873 656c 6629 3a0a 2020  _alone(self):.  
+00009c40: 2020 2020 2020 5f45 6c65 6d65 6e74 4964        _ElementId
+00009c50: 5368 696d 2844 542e 4341 542c 204e 6f6e  Shim(DT.CAT, Non
+00009c60: 652c 204e 6f6e 6529 2e74 7261 6e73 6c61  e, None).transla
+00009c70: 7465 5f65 6c65 6d65 6e74 5f69 6428 3235  te_element_id(25
+00009c80: 2920 3d3d 2032 350a 0a20 2020 2064 6566  ) == 25..    def
+00009c90: 2069 745f 7072 6f76 6964 6573 5f74 6865   it_provides_the
+00009ca0: 5f72 6177 5f65 6c65 6d65 6e74 5f69 6473  _raw_element_ids
+00009cb0: 5f74 6f5f 6865 6c70 2873 656c 6629 3a0a  _to_help(self):.
+00009cc0: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
+00009cd0: 6e5f 6469 6374 203d 207b 2274 7970 6522  n_dict = {"type"
+00009ce0: 3a20 7b22 656c 656d 656e 7473 223a 205b  : {"elements": [
+00009cf0: 7b22 6964 223a 2031 7d2c 207b 2269 6422  {"id": 1}, {"id"
+00009d00: 3a20 2262 227d 5d7d 7d0a 2020 2020 2020  : "b"}]}}.      
+00009d10: 2020 7368 696d 5f20 3d20 5f45 6c65 6d65    shim_ = _Eleme
+00009d20: 6e74 4964 5368 696d 284e 6f6e 652c 2064  ntIdShim(None, d
+00009d30: 696d 656e 7369 6f6e 5f64 6963 742c 204e  imension_dict, N
+00009d40: 6f6e 6529 0a0a 2020 2020 2020 2020 6173  one)..        as
+00009d50: 7365 7274 2073 6869 6d5f 2e5f 7261 775f  sert shim_._raw_
+00009d60: 656c 656d 656e 745f 6964 7320 3d3d 2074  element_ids == t
+00009d70: 7570 6c65 2828 312c 2022 6222 2929 0a0a  uple((1, "b"))..
+00009d80: 2020 2020 6465 6620 6974 5f72 6570 6c61      def it_repla
+00009d90: 6365 735f 7468 655f 656c 656d 656e 745f  ces_the_element_
+00009da0: 7472 616e 7366 6f72 6d73 5f74 6f5f 6865  transforms_to_he
+00009db0: 6c70 280a 2020 2020 2020 2020 7365 6c66  lp(.        self
+00009dc0: 2c20 5f72 6177 5f65 6c65 6d65 6e74 5f69  , _raw_element_i
+00009dd0: 645f 7072 6f70 5f2c 205f 7375 6276 6172  d_prop_, _subvar
+00009de0: 5f61 6c69 6173 6573 5f70 726f 705f 2c20  _aliases_prop_, 
+00009df0: 5f73 7562 7661 725f 6964 735f 7072 6f70  _subvar_ids_prop
+00009e00: 5f0a 2020 2020 293a 0a20 2020 2020 2020  _.    ):.       
+00009e10: 2065 6c65 6d65 6e74 5f74 7261 6e73 666f   element_transfo
+00009e20: 726d 7320 3d20 7b0a 2020 2020 2020 2020  rms = {.        
+00009e30: 2020 2020 2278 7878 223a 207b 2274 7261      "xxx": {"tra
+00009e40: 6e73 666f 726d 223a 2022 6f62 6a65 6374  nsform": "object
+00009e50: 227d 2c0a 2020 2020 2020 2020 2020 2020  "},.            
+00009e60: 2261 6263 223a 207b 2261 6e6f 7468 6572  "abc": {"another
+00009e70: 223a 2022 7472 616e 7366 6f72 6d22 7d2c  ": "transform"},
+00009e80: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00009e90: 2020 205f 7261 775f 656c 656d 656e 745f     _raw_element_
+00009ea0: 6964 5f70 726f 705f 2e72 6574 7572 6e5f  id_prop_.return_
+00009eb0: 7661 6c75 6520 3d20 7475 706c 6528 2831  value = tuple((1
+00009ec0: 2c29 290a 2020 2020 2020 2020 5f73 7562  ,)).        _sub
+00009ed0: 7661 725f 616c 6961 7365 735f 7072 6f70  var_aliases_prop
+00009ee0: 5f2e 7265 7475 726e 5f76 616c 7565 203d  _.return_value =
+00009ef0: 2074 7570 6c65 2828 2261 6c69 6173 3222   tuple(("alias2"
+00009f00: 2c29 290a 2020 2020 2020 2020 5f73 7562  ,)).        _sub
+00009f10: 7661 725f 6964 735f 7072 6f70 5f2e 7265  var_ids_prop_.re
+00009f20: 7475 726e 5f76 616c 7565 203d 2074 7570  turn_value = tup
+00009f30: 6c65 2828 2261 6263 222c 2929 0a0a 2020  le(("abc",))..  
+00009f40: 2020 2020 2020 7368 696d 5f20 3d20 5f45        shim_ = _E
+00009f50: 6c65 6d65 6e74 4964 5368 696d 2844 542e  lementIdShim(DT.
+00009f60: 4d52 5f53 5542 5641 522c 204e 6f6e 652c  MR_SUBVAR, None,
+00009f70: 204e 6f6e 6529 0a0a 2020 2020 2020 2020   None)..        
+00009f80: 6173 7365 7274 2073 6869 6d5f 2e5f 7265  assert shim_._re
+00009f90: 706c 6163 6564 5f65 6c65 6d65 6e74 5f74  placed_element_t
+00009fa0: 7261 6e73 666f 726d 7328 656c 656d 656e  ransforms(elemen
+00009fb0: 745f 7472 616e 7366 6f72 6d73 2920 3d3d  t_transforms) ==
+00009fc0: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00009fd0: 616c 6961 7332 223a 207b 2261 6e6f 7468  alias2": {"anoth
+00009fe0: 6572 223a 2022 7472 616e 7366 6f72 6d22  er": "transform"
+00009ff0: 7d0a 2020 2020 2020 2020 7d0a 0a20 2020  }.        }..   
+0000a000: 2064 6566 2069 745f 7265 706c 6163 6573   def it_replaces
+0000a010: 5f74 6865 5f65 6c65 6d65 6e74 5f74 7261  _the_element_tra
+0000a020: 6e73 666f 726d 735f 746f 5f68 656c 705f  nsforms_to_help_
+0000a030: 7769 7468 5f61 6c69 6173 5f6b 6579 7328  with_alias_keys(
+0000a040: 7365 6c66 293a 0a20 2020 2020 2020 2065  self):.        e
+0000a050: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
+0000a060: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0000a070: 2020 2261 6c69 6173 3122 3a20 7b22 7472    "alias1": {"tr
+0000a080: 616e 7366 6f72 6d22 3a20 226f 626a 6563  ansform": "objec
+0000a090: 7422 7d2c 0a20 2020 2020 2020 2020 2020  t"},.           
+0000a0a0: 2022 616c 6961 7332 223a 207b 2261 6e6f   "alias2": {"ano
+0000a0b0: 7468 6572 223a 2022 7472 616e 7366 6f72  ther": "transfor
+0000a0c0: 6d22 7d2c 0a20 2020 2020 2020 2020 2020  m"},.           
+0000a0d0: 2022 6b65 7922 3a20 2261 6c69 6173 222c   "key": "alias",
+0000a0e0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+0000a0f0: 2020 2073 6869 6d5f 203d 205f 456c 656d     shim_ = _Elem
+0000a100: 656e 7449 6453 6869 6d28 4e6f 6e65 2c20  entIdShim(None, 
+0000a110: 4e6f 6e65 2c20 4e6f 6e65 290a 0a20 2020  None, None)..   
+0000a120: 2020 2020 2061 7373 6572 7420 280a 2020       assert (.  
+0000a130: 2020 2020 2020 2020 2020 7368 696d 5f2e            shim_.
+0000a140: 5f72 6570 6c61 6365 645f 656c 656d 656e  _replaced_elemen
+0000a150: 745f 7472 616e 7366 6f72 6d73 2865 6c65  t_transforms(ele
+0000a160: 6d65 6e74 5f74 7261 6e73 666f 726d 7329  ment_transforms)
+0000a170: 203d 3d20 656c 656d 656e 745f 7472 616e   == element_tran
+0000a180: 7366 6f72 6d73 0a20 2020 2020 2020 2029  sforms.        )
+0000a190: 0a0a 2020 2020 6465 6620 6974 5f72 6570  ..    def it_rep
+0000a1a0: 6c61 6365 735f 7468 655f 656c 656d 656e  laces_the_elemen
+0000a1b0: 745f 7472 616e 7366 6f72 6d73 5f74 6f5f  t_transforms_to_
+0000a1c0: 6865 6c70 5f77 6974 685f 7375 6276 6172  help_with_subvar
+0000a1d0: 5f69 645f 6b65 7973 280a 2020 2020 2020  _id_keys(.      
+0000a1e0: 2020 7365 6c66 2c20 5f73 7562 7661 725f    self, _subvar_
+0000a1f0: 616c 6961 7365 735f 7072 6f70 5f2c 205f  aliases_prop_, _
+0000a200: 7375 6276 6172 5f69 6473 5f70 726f 705f  subvar_ids_prop_
+0000a210: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000a220: 5f73 7562 7661 725f 616c 6961 7365 735f  _subvar_aliases_
+0000a230: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+0000a240: 7565 203d 2074 7570 6c65 2828 2261 6c69  ue = tuple(("ali
+0000a250: 6173 3122 2c20 2261 6c69 6173 3222 2c20  as1", "alias2", 
+0000a260: 2261 6c69 6173 3322 2929 0a20 2020 2020  "alias3")).     
+0000a270: 2020 205f 7375 6276 6172 5f69 6473 5f70     _subvar_ids_p
+0000a280: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
+0000a290: 6520 3d20 7475 706c 6528 2822 7879 7a22  e = tuple(("xyz"
+0000a2a0: 2c20 2273 3222 2c20 2261 6263 2229 290a  , "s2", "abc")).
+0000a2b0: 2020 2020 2020 2020 656c 656d 656e 745f          element_
+0000a2c0: 7472 616e 7366 6f72 6d73 203d 207b 0a20  transforms = {. 
+0000a2d0: 2020 2020 2020 2020 2020 2022 7331 223a             "s1":
+0000a2e0: 207b 2274 7261 6e73 666f 726d 223a 2022   {"transform": "
+0000a2f0: 6f62 6a65 6374 227d 2c0a 2020 2020 2020  object"},.      
+0000a300: 2020 2020 2020 2273 3222 3a20 7b22 616e        "s2": {"an
+0000a310: 6f74 6865 7222 3a20 2274 7261 6e73 666f  other": "transfo
+0000a320: 726d 227d 2c0a 2020 2020 2020 2020 2020  rm"},.          
+0000a330: 2020 226b 6579 223a 2022 7375 6276 6172    "key": "subvar
+0000a340: 5f69 6422 2c0a 2020 2020 2020 2020 7d0a  _id",.        }.
+0000a350: 2020 2020 2020 2020 7368 696d 5f20 3d20          shim_ = 
+0000a360: 5f45 6c65 6d65 6e74 4964 5368 696d 284e  _ElementIdShim(N
+0000a370: 6f6e 652c 204e 6f6e 652c 204e 6f6e 6529  one, None, None)
+0000a380: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+0000a390: 2073 6869 6d5f 2e5f 7265 706c 6163 6564   shim_._replaced
+0000a3a0: 5f65 6c65 6d65 6e74 5f74 7261 6e73 666f  _element_transfo
+0000a3b0: 726d 7328 656c 656d 656e 745f 7472 616e  rms(element_tran
+0000a3c0: 7366 6f72 6d73 2920 3d3d 207b 0a20 2020  sforms) == {.   
+0000a3d0: 2020 2020 2020 2020 2022 616c 6961 7332           "alias2
+0000a3e0: 223a 207b 2261 6e6f 7468 6572 223a 2022  ": {"another": "
+0000a3f0: 7472 616e 7366 6f72 6d22 7d0a 2020 2020  transform"}.    
+0000a400: 2020 2020 7d0a 0a20 2020 2064 6566 2069      }..    def i
+0000a410: 745f 7072 6f76 6964 6573 5f74 6865 5f73  t_provides_the_s
+0000a420: 7562 7661 725f 6964 735f 746f 5f68 656c  ubvar_ids_to_hel
+0000a430: 7028 7365 6c66 293a 0a20 2020 2020 2020  p(self):.       
+0000a440: 2064 696d 656e 7369 6f6e 5f64 6963 7420   dimension_dict 
+0000a450: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0000a460: 2274 7970 6522 3a20 7b22 656c 656d 656e  "type": {"elemen
+0000a470: 7473 223a 205b 7b22 7661 6c75 6522 3a20  ts": [{"value": 
+0000a480: 7b22 6964 223a 2022 6122 7d7d 2c20 7b22  {"id": "a"}}, {"
+0000a490: 7661 6c75 6522 3a20 7b22 6964 223a 2032  value": {"id": 2
+0000a4a0: 7d7d 5d7d 0a20 2020 2020 2020 207d 0a20  }}]}.        }. 
+0000a4b0: 2020 2020 2020 2073 6869 6d5f 203d 205f         shim_ = _
+0000a4c0: 456c 656d 656e 7449 6453 6869 6d28 4e6f  ElementIdShim(No
+0000a4d0: 6e65 2c20 6469 6d65 6e73 696f 6e5f 6469  ne, dimension_di
+0000a4e0: 6374 2c20 4e6f 6e65 290a 0a20 2020 2020  ct, None)..     
+0000a4f0: 2020 2061 7373 6572 7420 7368 696d 5f2e     assert shim_.
+0000a500: 5f73 7562 7661 725f 6964 7320 3d3d 2074  _subvar_ids == t
+0000a510: 7570 6c65 2828 2261 222c 2032 2929 0a0a  uple(("a", 2))..
+0000a520: 2020 2020 6465 6620 6974 5f70 726f 7669      def it_provi
+0000a530: 6465 735f 7468 655f 7375 6276 6172 5f61  des_the_subvar_a
+0000a540: 6c69 6173 6573 5f74 6f5f 6865 6c70 2873  liases_to_help(s
+0000a550: 656c 6629 3a0a 2020 2020 2020 2020 6469  elf):.        di
+0000a560: 6d65 6e73 696f 6e5f 6469 6374 203d 207b  mension_dict = {
+0000a570: 0a20 2020 2020 2020 2020 2020 2022 7479  .            "ty
+0000a580: 7065 223a 207b 0a20 2020 2020 2020 2020  pe": {.         
+0000a590: 2020 2020 2020 2022 656c 656d 656e 7473         "elements
+0000a5a0: 223a 205b 0a20 2020 2020 2020 2020 2020  ": [.           
+0000a5b0: 2020 2020 2020 2020 207b 2269 6422 3a20           {"id": 
+0000a5c0: 312c 2022 7661 6c75 6522 3a20 7b22 7265  1, "value": {"re
+0000a5d0: 6665 7265 6e63 6573 223a 207b 2261 6c69  ferences": {"ali
+0000a5e0: 6173 223a 2022 7822 7d7d 7d2c 0a20 2020  as": "x"}}},.   
+0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a600: 207b 2269 6422 3a20 322c 2022 7661 6c75   {"id": 2, "valu
+0000a610: 6522 3a20 7b22 7265 6665 7265 6e63 6573  e": {"references
+0000a620: 223a 207b 2261 6c69 6173 223a 2022 7922  ": {"alias": "y"
+0000a630: 7d7d 7d2c 0a20 2020 2020 2020 2020 2020  }}},.           
+0000a640: 2020 2020 2020 2020 207b 2269 6422 3a20           {"id": 
+0000a650: 337d 2c0a 2020 2020 2020 2020 2020 2020  3},.            
+0000a660: 2020 2020 5d0a 2020 2020 2020 2020 2020      ].          
+0000a670: 2020 7d0a 2020 2020 2020 2020 7d0a 2020    }.        }.  
+0000a680: 2020 2020 2020 7368 696d 5f20 3d20 5f45        shim_ = _E
+0000a690: 6c65 6d65 6e74 4964 5368 696d 284e 6f6e  lementIdShim(Non
+0000a6a0: 652c 2064 696d 656e 7369 6f6e 5f64 6963  e, dimension_dic
+0000a6b0: 742c 204e 6f6e 6529 0a0a 2020 2020 2020  t, None)..      
+0000a6c0: 2020 6173 7365 7274 2073 6869 6d5f 2e5f    assert shim_._
+0000a6d0: 7375 6276 6172 5f61 6c69 6173 6573 203d  subvar_aliases =
+0000a6e0: 3d20 7475 706c 6528 2822 7822 2c20 2279  = tuple(("x", "y
+0000a6f0: 222c 2033 2929 0a0a 2020 2020 2320 6669  ", 3))..    # fi
+0000a700: 7874 7572 6520 636f 6d70 6f6e 656e 7473  xture components
+0000a710: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0000a720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  --------------..
+0000a740: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+0000a750: 7572 650a 2020 2020 6465 6620 5f72 6177  ure.    def _raw
+0000a760: 5f65 6c65 6d65 6e74 5f69 645f 7072 6f70  _element_id_prop
+0000a770: 5f28 7365 6c66 2c20 7265 7175 6573 7429  _(self, request)
+0000a780: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0000a790: 2070 726f 7065 7274 795f 6d6f 636b 2872   property_mock(r
+0000a7a0: 6571 7565 7374 2c20 5f45 6c65 6d65 6e74  equest, _Element
+0000a7b0: 4964 5368 696d 2c20 225f 7261 775f 656c  IdShim, "_raw_el
+0000a7c0: 656d 656e 745f 6964 7322 290a 0a20 2020  ement_ids")..   
+0000a7d0: 2040 7079 7465 7374 2e66 6978 7475 7265   @pytest.fixture
+0000a7e0: 0a20 2020 2064 6566 205f 7265 706c 6163  .    def _replac
+0000a7f0: 6564 5f65 6c65 6d65 6e74 5f74 7261 6e73  ed_element_trans
+0000a800: 666f 726d 735f 2873 656c 662c 2072 6571  forms_(self, req
+0000a810: 7565 7374 293a 0a20 2020 2020 2020 2072  uest):.        r
+0000a820: 6574 7572 6e20 6d65 7468 6f64 5f6d 6f63  eturn method_moc
+0000a830: 6b28 7265 7175 6573 742c 205f 456c 656d  k(request, _Elem
+0000a840: 656e 7449 6453 6869 6d2c 2022 5f72 6570  entIdShim, "_rep
+0000a850: 6c61 6365 645f 656c 656d 656e 745f 7472  laced_element_tr
+0000a860: 616e 7366 6f72 6d73 2229 0a0a 2020 2020  ansforms")..    
+0000a870: 4070 7974 6573 742e 6669 7874 7572 650a  @pytest.fixture.
+0000a880: 2020 2020 6465 6620 5f72 6570 6c61 6365      def _replace
+0000a890: 645f 6f72 6465 725f 656c 656d 656e 745f  d_order_element_
+0000a8a0: 6964 735f 2873 656c 662c 2072 6571 7565  ids_(self, reque
+0000a8b0: 7374 293a 0a20 2020 2020 2020 2072 6574  st):.        ret
+0000a8c0: 7572 6e20 6d65 7468 6f64 5f6d 6f63 6b28  urn method_mock(
+0000a8d0: 7265 7175 6573 742c 205f 456c 656d 656e  request, _Elemen
+0000a8e0: 7449 6453 6869 6d2c 2022 5f72 6570 6c61  tIdShim, "_repla
+0000a8f0: 6365 645f 6f72 6465 725f 656c 656d 656e  ced_order_elemen
+0000a900: 745f 6964 7322 290a 0a20 2020 2040 7079  t_ids")..    @py
+0000a910: 7465 7374 2e66 6978 7475 7265 0a20 2020  test.fixture.   
+0000a920: 2064 6566 205f 7375 6276 6172 5f61 6c69   def _subvar_ali
+0000a930: 6173 6573 5f70 726f 705f 2873 656c 662c  ases_prop_(self,
+0000a940: 2072 6571 7565 7374 293a 0a20 2020 2020   request):.     
+0000a950: 2020 2072 6574 7572 6e20 7072 6f70 6572     return proper
+0000a960: 7479 5f6d 6f63 6b28 7265 7175 6573 742c  ty_mock(request,
+0000a970: 205f 456c 656d 656e 7449 6453 6869 6d2c   _ElementIdShim,
+0000a980: 2022 5f73 7562 7661 725f 616c 6961 7365   "_subvar_aliase
+0000a990: 7322 290a 0a20 2020 2040 7079 7465 7374  s")..    @pytest
+0000a9a0: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+0000a9b0: 205f 7375 6276 6172 5f69 6473 5f70 726f   _subvar_ids_pro
+0000a9c0: 705f 2873 656c 662c 2072 6571 7565 7374  p_(self, request
+0000a9d0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+0000a9e0: 6e20 7072 6f70 6572 7479 5f6d 6f63 6b28  n property_mock(
+0000a9f0: 7265 7175 6573 742c 205f 456c 656d 656e  request, _Elemen
+0000aa00: 7449 6453 6869 6d2c 2022 5f73 7562 7661  tIdShim, "_subva
+0000aa10: 725f 6964 7322 290a 0a0a 636c 6173 7320  r_ids")...class 
+0000aa20: 4465 7363 7269 6265 5f45 6c65 6d65 6e74  Describe_Element
+0000aa30: 3a0a 2020 2020 2222 2255 6e69 742d 7465  :.    """Unit-te
+0000aa40: 7374 2073 7569 7465 2066 6f72 2060 6372  st suite for `cr
+0000aa50: 2e63 7562 652e 6469 6d65 6e73 696f 6e2e  .cube.dimension.
+0000aa60: 5f45 6c65 6d65 6e74 6020 6f62 6a65 6374  _Element` object
+0000aa70: 2e22 2222 0a0a 2020 2020 6465 6620 6974  ."""..    def it
+0000aa80: 5f6b 6e6f 7773 5f69 7473 5f61 6e63 686f  _knows_its_ancho
+0000aa90: 7228 7365 6c66 293a 0a20 2020 2020 2020  r(self):.       
+0000aaa0: 2065 6c65 6d65 6e74 5f64 6963 7420 3d20   element_dict = 
+0000aab0: 7b22 7661 6c75 6522 3a20 7b22 7265 6665  {"value": {"refe
+0000aac0: 7265 6e63 6573 223a 207b 2261 6e63 686f  rences": {"ancho
+0000aad0: 7222 3a20 2274 6f70 227d 2c20 2264 6572  r": "top"}, "der
+0000aae0: 6976 6564 223a 2054 7275 657d 7d0a 2020  ived": True}}.  
+0000aaf0: 2020 2020 2020 656c 656d 656e 7420 3d20        element = 
+0000ab00: 5f45 6c65 6d65 6e74 2865 6c65 6d65 6e74  _Element(element
+0000ab10: 5f64 6963 742c 204e 6f6e 652c 204e 6f6e  _dict, None, Non
+0000ab20: 6529 0a0a 2020 2020 2020 2020 616e 6368  e)..        anch
+0000ab30: 6f72 203d 2065 6c65 6d65 6e74 2e61 6e63  or = element.anc
+0000ab40: 686f 720a 0a20 2020 2020 2020 2061 7373  hor..        ass
+0000ab50: 6572 7420 616e 6368 6f72 203d 3d20 2274  ert anchor == "t
+0000ab60: 6f70 220a 0a20 2020 2064 6566 2062 7574  op"..    def but
+0000ab70: 5f61 6e63 686f 725f 6973 5f6e 6f6e 655f  _anchor_is_none_
+0000ab80: 6966 5f6e 6f74 5f64 6572 6976 6564 2873  if_not_derived(s
+0000ab90: 656c 6629 3a0a 2020 2020 2020 2020 656c  elf):.        el
+0000aba0: 656d 656e 745f 6469 6374 203d 207b 2276  ement_dict = {"v
+0000abb0: 616c 7565 223a 207b 2264 6572 6976 6564  alue": {"derived
+0000abc0: 223a 2046 616c 7365 7d7d 0a20 2020 2020  ": False}}.     
+0000abd0: 2020 2065 6c65 6d65 6e74 203d 205f 456c     element = _El
+0000abe0: 656d 656e 7428 656c 656d 656e 745f 6469  ement(element_di
+0000abf0: 6374 2c20 4e6f 6e65 2c20 4e6f 6e65 290a  ct, None, None).
+0000ac00: 0a20 2020 2020 2020 2061 6e63 686f 7220  .        anchor 
+0000ac10: 3d20 656c 656d 656e 742e 616e 6368 6f72  = element.anchor
+0000ac20: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+0000ac30: 2061 6e63 686f 7220 6973 204e 6f6e 650a   anchor is None.
+0000ac40: 0a20 2020 2064 6566 2069 745f 6b6e 6f77  .    def it_know
+0000ac50: 735f 6974 735f 656c 656d 656e 745f 6964  s_its_element_id
+0000ac60: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000ac70: 656c 656d 656e 745f 6469 6374 203d 207b  element_dict = {
+0000ac80: 2269 6422 3a20 3432 7d0a 2020 2020 2020  "id": 42}.      
+0000ac90: 2020 656c 656d 656e 7420 3d20 5f45 6c65    element = _Ele
+0000aca0: 6d65 6e74 2865 6c65 6d65 6e74 5f64 6963  ment(element_dic
+0000acb0: 742c 204e 6f6e 652c 204e 6f6e 6529 0a0a  t, None, None)..
+0000acc0: 2020 2020 2020 2020 656c 656d 656e 745f          element_
+0000acd0: 6964 203d 2065 6c65 6d65 6e74 2e65 6c65  id = element.ele
+0000ace0: 6d65 6e74 5f69 640a 0a20 2020 2020 2020  ment_id..       
+0000acf0: 2061 7373 6572 7420 656c 656d 656e 745f   assert element_
+0000ad00: 6964 203d 3d20 3432 0a0a 2020 2020 6465  id == 42..    de
+0000ad10: 6620 6974 5f6b 6e6f 7773 5f69 7473 5f66  f it_knows_its_f
+0000ad20: 696c 6c5f 5247 425f 636f 6c6f 725f 7374  ill_RGB_color_st
+0000ad30: 7228 7365 6c66 2c20 656c 656d 656e 745f  r(self, element_
+0000ad40: 7472 616e 7366 6f72 6d73 5f29 3a0a 2020  transforms_):.  
+0000ad50: 2020 2020 2020 656c 656d 656e 745f 7472        element_tr
+0000ad60: 616e 7366 6f72 6d73 5f2e 6669 6c6c 203d  ansforms_.fill =
+0000ad70: 205b 3235 352c 2032 3535 2c20 3234 385d   [255, 255, 248]
+0000ad80: 0a20 2020 2020 2020 2065 6c65 6d65 6e74  .        element
+0000ad90: 203d 205f 456c 656d 656e 7428 4e6f 6e65   = _Element(None
+0000ada0: 2c20 4e6f 6e65 2c20 656c 656d 656e 745f  , None, element_
+0000adb0: 7472 616e 7366 6f72 6d73 5f29 0a0a 2020  transforms_)..  
+0000adc0: 2020 2020 2020 7267 625f 636f 6c6f 725f        rgb_color_
+0000add0: 6669 6c6c 203d 2065 6c65 6d65 6e74 2e66  fill = element.f
+0000ade0: 696c 6c0a 0a20 2020 2020 2020 2061 7373  ill..        ass
+0000adf0: 6572 7420 7267 625f 636f 6c6f 725f 6669  ert rgb_color_fi
+0000ae00: 6c6c 203d 3d20 5b32 3535 2c20 3235 352c  ll == [255, 255,
+0000ae10: 2032 3438 5d0a 0a20 2020 2064 6566 2069   248]..    def i
+0000ae20: 745f 6b6e 6f77 735f 6974 735f 706f 7369  t_knows_its_posi
+0000ae30: 7469 6f6e 5f61 6d6f 6e67 5f61 6c6c 5f74  tion_among_all_t
+0000ae40: 6865 5f64 696d 656e 7369 6f6e 5f65 6c65  he_dimension_ele
+0000ae50: 6d65 6e74 7328 7365 6c66 293a 0a20 2020  ments(self):.   
+0000ae60: 2020 2020 2065 6c65 6d65 6e74 203d 205f       element = _
+0000ae70: 456c 656d 656e 7428 4e6f 6e65 2c20 3137  Element(None, 17
+0000ae80: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+0000ae90: 696e 6465 7820 3d20 656c 656d 656e 742e  index = element.
+0000aea0: 696e 6465 780a 2020 2020 2020 2020 6173  index.        as
+0000aeb0: 7365 7274 2069 6e64 6578 203d 3d20 3137  sert index == 17
+0000aec0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+0000aed0: 726b 2e70 6172 616d 6574 7269 7a65 280a  rk.parametrize(.
+0000aee0: 2020 2020 2020 2020 2822 656c 656d 656e          ("elemen
+0000aef0: 745f 6469 6374 222c 2022 7472 616e 7366  t_dict", "transf
+0000af00: 6f72 6d5f 6e61 6d65 222c 2022 6578 7065  orm_name", "expe
+0000af10: 6374 6564 5f76 616c 7565 2229 2c0a 2020  cted_value"),.  
+0000af20: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0000af30: 2020 2020 287b 7d2c 204e 6f6e 652c 2022      ({}, None, "
+0000af40: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0000af50: 287b 7d2c 2022 4761 7266 222c 2022 4761  ({}, "Garf", "Ga
+0000af60: 7266 2229 2c0a 2020 2020 2020 2020 2020  rf"),.          
+0000af70: 2020 287b 226e 616d 6522 3a20 2222 7d2c    ({"name": ""},
+0000af80: 204e 6f6e 652c 2022 2229 2c0a 2020 2020   None, ""),.    
+0000af90: 2020 2020 2020 2020 287b 226e 616d 6522          ({"name"
+0000afa0: 3a20 4e6f 6e65 7d2c 204e 6f6e 652c 2022  : None}, None, "
+0000afb0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0000afc0: 287b 226e 616d 6522 3a20 2242 6f62 227d  ({"name": "Bob"}
+0000afd0: 2c20 4e6f 6e65 2c20 2242 6f62 2229 2c0a  , None, "Bob"),.
+0000afe0: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
+0000aff0: 616d 6522 3a20 2248 696e 7a75 66c3 a467  ame": "Hinzuf..g
+0000b000: 656e 227d 2c20 4e6f 6e65 2c20 2248 696e  en"}, None, "Hin
+0000b010: 7a75 66c3 a467 656e 2229 2c0a 2020 2020  zuf..gen"),.    
+0000b020: 2020 2020 2020 2020 287b 2276 616c 7565          ({"value
+0000b030: 223a 205b 2241 222c 2022 4622 5d7d 2c20  ": ["A", "F"]}, 
+0000b040: 4e6f 6e65 2c20 2241 2d46 2229 2c0a 2020  None, "A-F"),.  
+0000b050: 2020 2020 2020 2020 2020 287b 2276 616c            ({"val
+0000b060: 7565 223a 205b 312e 322c 2033 2e34 5d7d  ue": [1.2, 3.4]}
+0000b070: 2c20 4e6f 6e65 2c20 2231 2e32 2d33 2e34  , None, "1.2-3.4
+0000b080: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0000b090: 287b 2276 616c 7565 223a 2034 327d 2c20  ({"value": 42}, 
+0000b0a0: 4e6f 6e65 2c20 2234 3222 292c 0a20 2020  None, "42"),.   
+0000b0b0: 2020 2020 2020 2020 2028 7b22 7661 6c75           ({"valu
+0000b0c0: 6522 3a20 342e 327d 2c20 4e6f 6e65 2c20  e": 4.2}, None, 
+0000b0d0: 2234 2e32 2229 2c0a 2020 2020 2020 2020  "4.2"),.        
+0000b0e0: 2020 2020 287b 2276 616c 7565 223a 2022      ({"value": "
+0000b0f0: 4269 6c6c 227d 2c20 4e6f 6e65 2c20 2242  Bill"}, None, "B
+0000b100: 696c 6c22 292c 0a20 2020 2020 2020 2020  ill"),.         
+0000b110: 2020 2028 7b22 7661 6c75 6522 3a20 2246     ({"value": "F
+0000b120: c3a4 6869 6722 7d2c 204e 6f6e 652c 2022  ..hig"}, None, "
+0000b130: 46c3 a468 6967 2229 2c0a 2020 2020 2020  F..hig"),.      
+0000b140: 2020 2020 2020 287b 2276 616c 7565 223a        ({"value":
+0000b150: 207b 2272 6566 6572 656e 6365 7322 3a20   {"references": 
+0000b160: 7b7d 7d7d 2c20 4e6f 6e65 2c20 2222 292c  {}}}, None, ""),
+0000b170: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000b180: 7661 6c75 6522 3a20 7b22 7265 6665 7265  value": {"refere
+0000b190: 6e63 6573 223a 207b 226e 616d 6522 3a20  nces": {"name": 
+0000b1a0: 2254 6f6d 227d 7d7d 2c20 4e6f 6e65 2c20  "Tom"}}}, None, 
+0000b1b0: 2254 6f6d 2229 2c0a 2020 2020 2020 2020  "Tom"),.        
+0000b1c0: 2020 2020 287b 2276 616c 7565 223a 207b      ({"value": {
+0000b1d0: 2272 6566 6572 656e 6365 7322 3a20 7b22  "references": {"
+0000b1e0: 6e61 6d65 223a 2022 546f 6d22 7d7d 7d2c  name": "Tom"}}},
+0000b1f0: 2022 4861 7272 7922 2c20 2248 6172 7279   "Harry", "Harry
+0000b200: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0000b210: 287b 2276 616c 7565 223a 207b 2272 6566  ({"value": {"ref
+0000b220: 6572 656e 6365 7322 3a20 7b22 6e61 6d65  erences": {"name
+0000b230: 223a 2022 546f 6d22 7d7d 7d2c 2022 222c  ": "Tom"}}}, "",
+0000b240: 2022 2229 2c0a 2020 2020 2020 2020 292c   ""),.        ),
+0000b250: 0a20 2020 2029 0a20 2020 2064 6566 2069  .    ).    def i
+0000b260: 745f 6b6e 6f77 735f 6974 735f 6c61 6265  t_knows_its_labe
+0000b270: 6c28 0a20 2020 2020 2020 2073 656c 662c  l(.        self,
+0000b280: 2065 6c65 6d65 6e74 5f64 6963 742c 2074   element_dict, t
+0000b290: 7261 6e73 666f 726d 5f6e 616d 652c 2065  ransform_name, e
+0000b2a0: 7870 6563 7465 645f 7661 6c75 652c 2065  xpected_value, e
+0000b2b0: 6c65 6d65 6e74 5f74 7261 6e73 666f 726d  lement_transform
+0000b2c0: 735f 0a20 2020 2029 3a0a 2020 2020 2020  s_.    ):.      
+0000b2d0: 2020 656c 656d 656e 745f 7472 616e 7366    element_transf
+0000b2e0: 6f72 6d73 5f2e 6e61 6d65 203d 2074 7261  orms_.name = tra
+0000b2f0: 6e73 666f 726d 5f6e 616d 650a 2020 2020  nsform_name.    
+0000b300: 2020 2020 656c 656d 656e 7420 3d20 5f45      element = _E
+0000b310: 6c65 6d65 6e74 2865 6c65 6d65 6e74 5f64  lement(element_d
+0000b320: 6963 742c 204e 6f6e 652c 2065 6c65 6d65  ict, None, eleme
+0000b330: 6e74 5f74 7261 6e73 666f 726d 735f 290a  nt_transforms_).
+0000b340: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000b350: 656c 656d 656e 742e 6c61 6265 6c20 3d3d  element.label ==
+0000b360: 2065 7870 6563 7465 645f 7661 6c75 650a   expected_value.
+0000b370: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000b380: 6b2e 7061 7261 6d65 7472 697a 6528 0a20  k.parametrize(. 
+0000b390: 2020 2020 2020 2028 2268 6964 6522 2c20         ("hide", 
+0000b3a0: 2265 7870 6563 7465 645f 7661 6c75 6522  "expected_value"
+0000b3b0: 292c 2028 2854 7275 652c 2054 7275 6529  ), ((True, True)
+0000b3c0: 2c20 2846 616c 7365 2c20 4661 6c73 6529  , (False, False)
+0000b3d0: 2c20 284e 6f6e 652c 2046 616c 7365 2929  , (None, False))
+0000b3e0: 0a20 2020 2029 0a20 2020 2064 6566 2069  .    ).    def i
+0000b3f0: 745f 6b6e 6f77 735f 7768 6574 6865 725f  t_knows_whether_
+0000b400: 6974 5f69 735f 6578 706c 6963 6974 6c79  it_is_explicitly
+0000b410: 5f68 6964 6465 6e28 7365 6c66 2c20 7265  _hidden(self, re
+0000b420: 7175 6573 742c 2068 6964 652c 2065 7870  quest, hide, exp
+0000b430: 6563 7465 645f 7661 6c75 6529 3a0a 2020  ected_value):.  
+0000b440: 2020 2020 2020 656c 656d 656e 745f 7472        element_tr
+0000b450: 616e 7366 6f72 6d73 5f20 3d20 696e 7374  ansforms_ = inst
+0000b460: 616e 6365 5f6d 6f63 6b28 7265 7175 6573  ance_mock(reques
+0000b470: 742c 205f 456c 656d 656e 7454 7261 6e73  t, _ElementTrans
+0000b480: 666f 726d 732c 2068 6964 653d 6869 6465  forms, hide=hide
+0000b490: 290a 2020 2020 2020 2020 656c 656d 656e  ).        elemen
+0000b4a0: 7420 3d20 5f45 6c65 6d65 6e74 284e 6f6e  t = _Element(Non
+0000b4b0: 652c 204e 6f6e 652c 2065 6c65 6d65 6e74  e, None, element
+0000b4c0: 5f74 7261 6e73 666f 726d 735f 290a 0a20  _transforms_).. 
+0000b4d0: 2020 2020 2020 2069 735f 6869 6464 656e         is_hidden
+0000b4e0: 203d 2065 6c65 6d65 6e74 2e69 735f 6869   = element.is_hi
+0000b4f0: 6464 656e 0a0a 2020 2020 2020 2020 6173  dden..        as
+0000b500: 7365 7274 2069 735f 6869 6464 656e 2069  sert is_hidden i
+0000b510: 7320 6578 7065 6374 6564 5f76 616c 7565  s expected_value
+0000b520: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+0000b530: 726b 2e70 6172 616d 6574 7269 7a65 280a  rk.parametrize(.
+0000b540: 2020 2020 2020 2020 2822 656c 656d 656e          ("elemen
+0000b550: 745f 6469 6374 222c 2022 6578 7065 6374  t_dict", "expect
+0000b560: 6564 5f76 616c 7565 2229 2c0a 2020 2020  ed_value"),.    
+0000b570: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+0000b580: 2020 287b 7d2c 2046 616c 7365 292c 0a20    ({}, False),. 
+0000b590: 2020 2020 2020 2020 2020 2028 7b22 6d69             ({"mi
+0000b5a0: 7373 696e 6722 3a20 4e6f 6e65 7d2c 2046  ssing": None}, F
+0000b5b0: 616c 7365 292c 0a20 2020 2020 2020 2020  alse),.         
+0000b5c0: 2020 2028 7b22 6d69 7373 696e 6722 3a20     ({"missing": 
+0000b5d0: 4661 6c73 657d 2c20 4661 6c73 6529 2c0a  False}, False),.
+0000b5e0: 2020 2020 2020 2020 2020 2020 287b 226d              ({"m
+0000b5f0: 6973 7369 6e67 223a 2054 7275 657d 2c20  issing": True}, 
+0000b600: 5472 7565 292c 0a20 2020 2020 2020 2020  True),.         
+0000b610: 2020 2023 202d 2d2d 6e6f 7420 6578 7065     # ---not expe
+0000b620: 6374 6564 2076 616c 7565 732c 2062 7574  cted values, but
+0000b630: 206a 7573 7420 696e 2063 6173 652d 2d2d   just in case---
+0000b640: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000b650: 6d69 7373 696e 6722 3a20 307d 2c20 4661  missing": 0}, Fa
+0000b660: 6c73 6529 2c0a 2020 2020 2020 2020 2020  lse),.          
+0000b670: 2020 287b 226d 6973 7369 6e67 223a 2031    ({"missing": 1
+0000b680: 7d2c 2054 7275 6529 2c0a 2020 2020 2020  }, True),.      
+0000b690: 2020 292c 0a20 2020 2029 0a20 2020 2064    ),.    ).    d
+0000b6a0: 6566 2069 745f 6b6e 6f77 735f 7768 6574  ef it_knows_whet
+0000b6b0: 6865 725f 6974 735f 6d69 7373 696e 675f  her_its_missing_
+0000b6c0: 6f72 5f76 616c 6964 2873 656c 662c 2065  or_valid(self, e
+0000b6d0: 6c65 6d65 6e74 5f64 6963 742c 2065 7870  lement_dict, exp
+0000b6e0: 6563 7465 645f 7661 6c75 6529 3a0a 2020  ected_value):.  
+0000b6f0: 2020 2020 2020 656c 656d 656e 7420 3d20        element = 
+0000b700: 5f45 6c65 6d65 6e74 2865 6c65 6d65 6e74  _Element(element
+0000b710: 5f64 6963 742c 204e 6f6e 652c 204e 6f6e  _dict, None, Non
+0000b720: 6529 0a0a 2020 2020 2020 2020 6d69 7373  e)..        miss
+0000b730: 696e 6720 3d20 656c 656d 656e 742e 6d69  ing = element.mi
+0000b740: 7373 696e 670a 0a20 2020 2020 2020 2023  ssing..        #
+0000b750: 202d 2d2d 6f6e 6c79 2054 7275 6520 6f72   ---only True or
+0000b760: 2046 616c 7365 2c20 6e6f 2054 7275 7468   False, no Truth
+0000b770: 7920 6f72 2046 616c 7379 2028 736f 2075  y or Falsy (so u
+0000b780: 7365 2060 6973 6020 6e6f 7420 603d 3d60  se `is` not `==`
+0000b790: 292d 2d2d 0a20 2020 2020 2020 2061 7373  )---.        ass
+0000b7a0: 6572 7420 6d69 7373 696e 6720 6973 2065  ert missing is e
+0000b7b0: 7870 6563 7465 645f 7661 6c75 650a 0a20  xpected_value.. 
+0000b7c0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+0000b7d0: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+0000b7e0: 2020 2020 2028 2265 6c65 6d65 6e74 5f64       ("element_d
+0000b7f0: 6963 7422 2c20 2265 7870 6563 7465 645f  ict", "expected_
+0000b800: 7661 6c75 6522 292c 0a20 2020 2020 2020  value"),.       
+0000b810: 2028 0a20 2020 2020 2020 2020 2020 2028   (.            (
+0000b820: 7b7d 2c20 6e70 2e6e 616e 292c 0a20 2020  {}, np.nan),.   
+0000b830: 2020 2020 2020 2020 2028 7b22 6e75 6d65           ({"nume
+0000b840: 7269 635f 7661 6c75 6522 3a20 4e6f 6e65  ric_value": None
+0000b850: 7d2c 206e 702e 6e61 6e29 2c0a 2020 2020  }, np.nan),.    
+0000b860: 2020 2020 2020 2020 287b 226e 756d 6572          ({"numer
+0000b870: 6963 5f76 616c 7565 223a 2030 7d2c 2030  ic_value": 0}, 0
+0000b880: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+0000b890: 7b22 6e75 6d65 7269 635f 7661 6c75 6522  {"numeric_value"
+0000b8a0: 3a20 377d 2c20 3729 2c0a 2020 2020 2020  : 7}, 7),.      
+0000b8b0: 2020 2020 2020 287b 226e 756d 6572 6963        ({"numeric
+0000b8c0: 5f76 616c 7565 223a 202d 332e 327d 2c20  _value": -3.2}, 
+0000b8d0: 2d33 2e32 292c 0a20 2020 2020 2020 2020  -3.2),.         
+0000b8e0: 2020 2023 202d 2d2d 6e6f 7420 6578 7065     # ---not expe
+0000b8f0: 6374 6564 2076 616c 7565 732c 206a 7573  cted values, jus
+0000b900: 7420 746f 2064 6f63 756d 656e 7420 7468  t to document th
+0000b910: 6520 6265 6861 7669 6f72 2074 6861 740a  e behavior that.
+0000b920: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
+0000b930: 2d6e 6f20 6174 7465 6d70 7420 6973 206d  -no attempt is m
+0000b940: 6164 6520 746f 2063 6f6e 7665 7274 2076  ade to convert v
+0000b950: 616c 7565 7320 746f 206e 756d 6572 6963  alues to numeric
+0000b960: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000b970: 6e75 6d65 7269 635f 7661 6c75 6522 3a20  numeric_value": 
+0000b980: 2236 3636 227d 2c20 2236 3636 2229 2c0a  "666"}, "666"),.
+0000b990: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
+0000b9a0: 756d 6572 6963 5f76 616c 7565 223a 207b  umeric_value": {
+0000b9b0: 7d7d 2c20 7b7d 292c 0a20 2020 2020 2020  }}, {}),.       
+0000b9c0: 2020 2020 2028 7b22 6e75 6d65 7269 635f       ({"numeric_
+0000b9d0: 7661 6c75 6522 3a20 7b22 3f22 3a20 387d  value": {"?": 8}
+0000b9e0: 7d2c 207b 223f 223a 2038 7d29 2c0a 2020  }, {"?": 8}),.  
+0000b9f0: 2020 2020 2020 292c 0a20 2020 2029 0a20        ),.    ). 
+0000ba00: 2020 2064 6566 2069 745f 6b6e 6f77 735f     def it_knows_
+0000ba10: 6974 735f 6e75 6d65 7269 635f 7661 6c75  its_numeric_valu
+0000ba20: 6528 7365 6c66 2c20 656c 656d 656e 745f  e(self, element_
+0000ba30: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+0000ba40: 616c 7565 293a 0a20 2020 2020 2020 2065  alue):.        e
+0000ba50: 6c65 6d65 6e74 203d 205f 456c 656d 656e  lement = _Elemen
+0000ba60: 7428 656c 656d 656e 745f 6469 6374 2c20  t(element_dict, 
+0000ba70: 4e6f 6e65 2c20 4e6f 6e65 290a 0a20 2020  None, None)..   
+0000ba80: 2020 2020 206e 756d 6572 6963 5f76 616c       numeric_val
+0000ba90: 7565 203d 2065 6c65 6d65 6e74 2e6e 756d  ue = element.num
+0000baa0: 6572 6963 5f76 616c 7565 0a0a 2020 2020  eric_value..    
+0000bab0: 2020 2020 2320 2d2d 2d6e 702e 6e61 6e20      # ---np.nan 
+0000bac0: 213d 206e 702e 6e61 6e2c 2062 7574 206e  != np.nan, but n
+0000bad0: 702e 6e61 6e20 696e 205b 6e70 2e6e 616e  p.nan in [np.nan
+0000bae0: 5d20 776f 726b 732d 2d2d 0a20 2020 2020  ] works---.     
+0000baf0: 2020 2061 7373 6572 7420 6e75 6d65 7269     assert numeri
+0000bb00: 635f 7661 6c75 6520 696e 205b 6578 7065  c_value in [expe
+0000bb10: 6374 6564 5f76 616c 7565 5d0a 0a20 2020  cted_value]..   
+0000bb20: 2023 2066 6978 7475 7265 2063 6f6d 706f   # fixture compo
+0000bb30: 6e65 6e74 7320 2d2d 2d2d 2d2d 2d2d 2d2d  nents ----------
+0000bb40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bb50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bb60: 2d2d 2d0a 0a20 2020 2040 7079 7465 7374  ---..    @pytest
+0000bb70: 2e66 6978 7475 7265 0a20 2020 2064 6566  .fixture.    def
+0000bb80: 2065 6c65 6d65 6e74 5f74 7261 6e73 666f   element_transfo
+0000bb90: 726d 735f 2873 656c 662c 2072 6571 7565  rms_(self, reque
+0000bba0: 7374 293a 0a20 2020 2020 2020 2072 6574  st):.        ret
+0000bbb0: 7572 6e20 696e 7374 616e 6365 5f6d 6f63  urn instance_moc
+0000bbc0: 6b28 7265 7175 6573 742c 205f 456c 656d  k(request, _Elem
+0000bbd0: 656e 7454 7261 6e73 666f 726d 7329 0a0a  entTransforms)..
+0000bbe0: 0a63 6c61 7373 2044 6573 6372 6962 6545  .class DescribeE
+0000bbf0: 6c65 6d65 6e74 5472 616e 7366 6f72 6d73  lementTransforms
+0000bc00: 3a0a 2020 2020 2222 2255 6e69 742d 7465  :.    """Unit-te
+0000bc10: 7374 2073 7569 7465 2066 6f72 2060 6372  st suite for `cr
+0000bc20: 2e63 7562 652e 6469 6d65 6e73 696f 6e2e  .cube.dimension.
+0000bc30: 5f45 6c65 6d65 6e74 5472 616e 7366 6f72  _ElementTransfor
+0000bc40: 6d73 6020 6f62 6a65 6374 2e22 2222 0a0a  ms` object."""..
+0000bc50: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+0000bc60: 2e70 6172 616d 6574 7269 7a65 280a 2020  .parametrize(.  
+0000bc70: 2020 2020 2020 2265 6c65 6d65 6e74 5f74        "element_t
+0000bc80: 7261 6e73 666f 726d 735f 6469 6374 2c20  ransforms_dict, 
+0000bc90: 6578 7065 6374 6564 5f76 616c 7565 222c  expected_value",
+0000bca0: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
+0000bcb0: 2020 2020 2020 2028 7b22 6e61 6d65 223a         ({"name":
+0000bcc0: 2022 5a69 6c6c 6f77 222c 2022 6669 6c6c   "Zillow", "fill
+0000bcd0: 223a 2022 2333 3136 3339 3522 7d2c 2022  ": "#316395"}, "
+0000bce0: 2333 3136 3339 3522 292c 0a20 2020 2020  #316395"),.     
+0000bcf0: 2020 2020 2020 2028 7b22 6e61 6d65 223a         ({"name":
+0000bd00: 2022 5a69 6c6c 6f77 222c 2022 6669 6c6c   "Zillow", "fill
+0000bd10: 223a 204e 6f6e 657d 2c20 4e6f 6e65 292c  ": None}, None),
+0000bd20: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000bd30: 6e61 6d65 223a 2022 5a69 6c6c 6f77 222c  name": "Zillow",
+0000bd40: 2022 6669 6c6c 223a 205b 3235 352c 2032   "fill": [255, 2
+0000bd50: 3535 2c20 305d 7d2c 205b 3235 352c 2032  55, 0]}, [255, 2
+0000bd60: 3535 2c20 305d 292c 0a20 2020 2020 2020  55, 0]),.       
+0000bd70: 2029 2c0a 2020 2020 290a 2020 2020 6465   ),.    ).    de
+0000bd80: 6620 6974 5f6b 6e6f 7773 5f69 7473 5f66  f it_knows_its_f
+0000bd90: 696c 6c5f 636f 6c6f 725f 7661 6c75 6528  ill_color_value(
+0000bda0: 7365 6c66 2c20 656c 656d 656e 745f 7472  self, element_tr
+0000bdb0: 616e 7366 6f72 6d73 5f64 6963 742c 2065  ansforms_dict, e
+0000bdc0: 7870 6563 7465 645f 7661 6c75 6529 3a0a  xpected_value):.
+0000bdd0: 2020 2020 2020 2020 656c 656d 656e 745f          element_
+0000bde0: 7472 616e 7366 6f72 6d73 203d 205f 456c  transforms = _El
+0000bdf0: 656d 656e 7454 7261 6e73 666f 726d 7328  ementTransforms(
+0000be00: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+0000be10: 6d73 5f64 6963 7429 0a0a 2020 2020 2020  ms_dict)..      
+0000be20: 2020 6669 6c6c 5f63 6f6c 6f72 5f76 616c    fill_color_val
+0000be30: 7565 203d 2065 6c65 6d65 6e74 5f74 7261  ue = element_tra
+0000be40: 6e73 666f 726d 732e 6669 6c6c 0a0a 2020  nsforms.fill..  
+0000be50: 2020 2020 2020 6173 7365 7274 2066 696c        assert fil
+0000be60: 6c5f 636f 6c6f 725f 7661 6c75 6520 3d3d  l_color_value ==
+0000be70: 2065 7870 6563 7465 645f 7661 6c75 650a   expected_value.
+0000be80: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000be90: 6b2e 7061 7261 6d65 7472 697a 6528 0a20  k.parametrize(. 
+0000bea0: 2020 2020 2020 2022 656c 656d 656e 745f         "element_
+0000beb0: 7472 616e 7366 6f72 6d73 5f64 6963 742c  transforms_dict,
+0000bec0: 2065 7870 6563 7465 645f 7661 6c75 6522   expected_value"
+0000bed0: 2c0a 2020 2020 2020 2020 280a 2020 2020  ,.        (.    
+0000bee0: 2020 2020 2020 2020 287b 2268 6964 6522          ({"hide"
+0000bef0: 3a20 5472 7565 7d2c 2054 7275 6529 2c0a  : True}, True),.
+0000bf00: 2020 2020 2020 2020 2020 2020 287b 2268              ({"h
+0000bf10: 6964 6522 3a20 4661 6c73 657d 2c20 4661  ide": False}, Fa
+0000bf20: 6c73 6529 2c0a 2020 2020 2020 2020 2020  lse),.          
+0000bf30: 2020 287b 2268 6964 6522 3a20 4e6f 6e65    ({"hide": None
+0000bf40: 7d2c 204e 6f6e 6529 2c0a 2020 2020 2020  }, None),.      
+0000bf50: 2020 2020 2020 287b 2268 6964 6522 3a20        ({"hide": 
+0000bf60: 307d 2c20 4e6f 6e65 292c 0a20 2020 2020  0}, None),.     
+0000bf70: 2020 2029 2c0a 2020 2020 290a 2020 2020     ),.    ).    
+0000bf80: 6465 6620 6974 5f6b 6e6f 7773 5f77 6865  def it_knows_whe
+0000bf90: 6e5f 6974 5f69 735f 6578 706c 6963 6974  n_it_is_explicit
+0000bfa0: 6c79 5f68 6964 6465 6e28 0a20 2020 2020  ly_hidden(.     
+0000bfb0: 2020 2073 656c 662c 2065 6c65 6d65 6e74     self, element
+0000bfc0: 5f74 7261 6e73 666f 726d 735f 6469 6374  _transforms_dict
+0000bfd0: 2c20 6578 7065 6374 6564 5f76 616c 7565  , expected_value
+0000bfe0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000bff0: 656c 656d 656e 745f 7472 616e 7366 6f72  element_transfor
+0000c000: 6d73 203d 205f 456c 656d 656e 7454 7261  ms = _ElementTra
+0000c010: 6e73 666f 726d 7328 656c 656d 656e 745f  nsforms(element_
+0000c020: 7472 616e 7366 6f72 6d73 5f64 6963 7429  transforms_dict)
+0000c030: 0a0a 2020 2020 2020 2020 6973 5f68 6964  ..        is_hid
+0000c040: 6465 6e20 3d20 656c 656d 656e 745f 7472  den = element_tr
+0000c050: 616e 7366 6f72 6d73 2e68 6964 650a 0a20  ansforms.hide.. 
+0000c060: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0000c070: 5f68 6964 6465 6e20 6973 2065 7870 6563  _hidden is expec
+0000c080: 7465 645f 7661 6c75 650a 0a20 2020 2040  ted_value..    @
+0000c090: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
+0000c0a0: 6d65 7472 697a 6528 0a20 2020 2020 2020  metrize(.       
+0000c0b0: 2022 656c 656d 656e 745f 7472 616e 7366   "element_transf
+0000c0c0: 6f72 6d73 5f64 6963 742c 2065 7870 6563  orms_dict, expec
+0000c0d0: 7465 645f 7661 6c75 6522 2c0a 2020 2020  ted_value",.    
+0000c0e0: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+0000c0f0: 2020 287b 226e 616d 6522 3a20 224d 7944    ({"name": "MyD
+0000c100: 6973 706c 6179 4e61 6d65 227d 2c20 224d  isplayName"}, "M
+0000c110: 7944 6973 706c 6179 4e61 6d65 2229 2c0a  yDisplayName"),.
+0000c120: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
+0000c130: 616d 6522 3a20 2222 7d2c 2022 2229 2c0a  ame": ""}, ""),.
+0000c140: 2020 2020 2020 2020 2020 2020 287b 226e              ({"n
+0000c150: 616d 6522 3a20 4e6f 6e65 7d2c 2022 2229  ame": None}, "")
+0000c160: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000c170: 2266 6f6f 223a 2022 666f 6f22 7d2c 204e  "foo": "foo"}, N
+0000c180: 6f6e 6529 2c0a 2020 2020 2020 2020 292c  one),.        ),
+0000c190: 0a20 2020 2029 0a20 2020 2064 6566 2069  .    ).    def i
+0000c1a0: 745f 6b6e 6f77 735f 6974 735f 6e61 6d65  t_knows_its_name
+0000c1b0: 2873 656c 662c 2065 6c65 6d65 6e74 5f74  (self, element_t
+0000c1c0: 7261 6e73 666f 726d 735f 6469 6374 2c20  ransforms_dict, 
+0000c1d0: 6578 7065 6374 6564 5f76 616c 7565 293a  expected_value):
+0000c1e0: 0a20 2020 2020 2020 2065 6c65 6d65 6e74  .        element
+0000c1f0: 5f74 7261 6e73 666f 726d 7320 3d20 5f45  _transforms = _E
+0000c200: 6c65 6d65 6e74 5472 616e 7366 6f72 6d73  lementTransforms
+0000c210: 2865 6c65 6d65 6e74 5f74 7261 6e73 666f  (element_transfo
+0000c220: 726d 735f 6469 6374 290a 0a20 2020 2020  rms_dict)..     
+0000c230: 2020 206e 616d 6520 3d20 656c 656d 656e     name = elemen
+0000c240: 745f 7472 616e 7366 6f72 6d73 2e6e 616d  t_transforms.nam
+0000c250: 650a 0a20 2020 2020 2020 2061 7373 6572  e..        asser
+0000c260: 7420 6e61 6d65 203d 3d20 6578 7065 6374  t name == expect
+0000c270: 6564 5f76 616c 7565 0a0a 0a63 6c61 7373  ed_value...class
+0000c280: 2044 6573 6372 6962 655f 4f72 6465 7253   Describe_OrderS
+0000c290: 7065 633a 0a20 2020 2022 2222 556e 6974  pec:.    """Unit
+0000c2a0: 2d74 6573 7420 7375 6974 6520 666f 7220  -test suite for 
+0000c2b0: 6063 722e 6375 6265 2e64 696d 656e 7369  `cr.cube.dimensi
+0000c2c0: 6f6e 2e5f 4f72 6465 7253 7065 6360 206f  on._OrderSpec` o
+0000c2d0: 626a 6563 742e 2222 220a 0a20 2020 2040  bject."""..    @
+0000c2e0: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
+0000c2f0: 6d65 7472 697a 6528 0a20 2020 2020 2020  metrize(.       
+0000c300: 2022 6f72 6465 725f 6469 6374 2c20 6578   "order_dict, ex
+0000c310: 7065 6374 6564 5f76 616c 7565 222c 0a20  pected_value",. 
+0000c320: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0000c330: 2020 2020 2028 7b7d 2c20 2829 292c 0a20       ({}, ()),. 
+0000c340: 2020 2020 2020 2020 2020 2028 7b22 6669             ({"fi
+0000c350: 7865 6422 3a20 7b7d 7d2c 2028 2929 2c0a  xed": {}}, ()),.
+0000c360: 2020 2020 2020 2020 2020 2020 287b 2266              ({"f
+0000c370: 6978 6564 223a 207b 2274 6f70 223a 205b  ixed": {"top": [
+0000c380: 312c 2032 5d7d 7d2c 2028 2929 2c0a 2020  1, 2]}}, ()),.  
+0000c390: 2020 2020 2020 2020 2020 287b 2266 6978            ({"fix
+0000c3a0: 6564 223a 207b 2262 6f74 746f 6d22 3a20  ed": {"bottom": 
+0000c3b0: 5b5d 7d7d 2c20 2829 292c 0a20 2020 2020  []}}, ()),.     
+0000c3c0: 2020 2020 2020 2028 7b22 6669 7865 6422         ({"fixed"
+0000c3d0: 3a20 7b22 626f 7474 6f6d 223a 205b 332c  : {"bottom": [3,
+0000c3e0: 2034 5d7d 7d2c 2028 332c 2034 2929 2c0a   4]}}, (3, 4)),.
+0000c3f0: 2020 2020 2020 2020 2020 2020 287b 2266              ({"f
+0000c400: 6978 6564 223a 207b 2274 6f70 223a 205b  ixed": {"top": [
+0000c410: 312c 2032 5d2c 2022 626f 7474 6f6d 223a  1, 2], "bottom":
+0000c420: 205b 332c 2034 5d7d 7d2c 2028 332c 2034   [3, 4]}}, (3, 4
+0000c430: 2929 2c0a 2020 2020 2020 2020 292c 0a20  )),.        ),. 
+0000c440: 2020 2029 0a20 2020 2064 6566 2069 745f     ).    def it_
+0000c450: 6b6e 6f77 735f 6974 735f 626f 7474 6f6d  knows_its_bottom
+0000c460: 5f66 6978 6564 5f69 6473 280a 2020 2020  _fixed_ids(.    
+0000c470: 2020 2020 7365 6c66 2c20 5f6f 7264 6572      self, _order
+0000c480: 5f64 6963 745f 7072 6f70 5f2c 206f 7264  _dict_prop_, ord
+0000c490: 6572 5f64 6963 742c 2065 7870 6563 7465  er_dict, expecte
+0000c4a0: 645f 7661 6c75 650a 2020 2020 293a 0a20  d_value.    ):. 
+0000c4b0: 2020 2020 2020 205f 6f72 6465 725f 6469         _order_di
+0000c4c0: 6374 5f70 726f 705f 2e72 6574 7572 6e5f  ct_prop_.return_
+0000c4d0: 7661 6c75 6520 3d20 6f72 6465 725f 6469  value = order_di
+0000c4e0: 6374 0a20 2020 2020 2020 2061 7373 6572  ct.        asser
+0000c4f0: 7420 5f4f 7264 6572 5370 6563 284e 6f6e  t _OrderSpec(Non
+0000c500: 652c 204e 6f6e 6529 2e62 6f74 746f 6d5f  e, None).bottom_
+0000c510: 6669 7865 645f 6964 7320 3d3d 2065 7870  fixed_ids == exp
+0000c520: 6563 7465 645f 7661 6c75 650a 0a20 2020  ected_value..   
+0000c530: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
+0000c540: 7261 6d65 7472 697a 6528 0a20 2020 2020  rametrize(.     
+0000c550: 2020 2022 6f72 6465 725f 6469 6374 2c20     "order_dict, 
+0000c560: 6578 7065 6374 6564 5f76 616c 7565 222c  expected_value",
+0000c570: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
+0000c580: 2020 2020 2020 2028 7b7d 2c20 434d 2e50         ({}, CM.P
+0000c590: 4159 4c4f 4144 5f4f 5244 4552 292c 0a20  AYLOAD_ORDER),. 
+0000c5a0: 2020 2020 2020 2020 2020 2028 7b22 7479             ({"ty
+0000c5b0: 7065 223a 2022 6578 706c 6963 6974 227d  pe": "explicit"}
+0000c5c0: 2c20 434d 2e45 5850 4c49 4349 545f 4f52  , CM.EXPLICIT_OR
+0000c5d0: 4445 5229 2c0a 2020 2020 2020 2020 2020  DER),.          
+0000c5e0: 2020 287b 2274 7970 6522 3a20 2270 6179    ({"type": "pay
+0000c5f0: 6c6f 6164 5f6f 7264 6572 227d 2c20 434d  load_order"}, CM
+0000c600: 2e50 4159 4c4f 4144 5f4f 5244 4552 292c  .PAYLOAD_ORDER),
+0000c610: 0a20 2020 2020 2020 2029 2c0a 2020 2020  .        ),.    
+0000c620: 290a 2020 2020 6465 6620 6974 5f6b 6e6f  ).    def it_kno
+0000c630: 7773 5f69 7473 5f63 6f6c 6c61 7469 6f6e  ws_its_collation
+0000c640: 5f6d 6574 686f 6428 0a20 2020 2020 2020  _method(.       
+0000c650: 2073 656c 662c 205f 6f72 6465 725f 6469   self, _order_di
+0000c660: 6374 5f70 726f 705f 2c20 6f72 6465 725f  ct_prop_, order_
+0000c670: 6469 6374 2c20 6578 7065 6374 6564 5f76  dict, expected_v
+0000c680: 616c 7565 0a20 2020 2029 3a0a 2020 2020  alue.    ):.    
+0000c690: 2020 2020 5f6f 7264 6572 5f64 6963 745f      _order_dict_
+0000c6a0: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+0000c6b0: 7565 203d 206f 7264 6572 5f64 6963 740a  ue = order_dict.
+0000c6c0: 2020 2020 2020 2020 6173 7365 7274 205f          assert _
+0000c6d0: 4f72 6465 7253 7065 6328 4e6f 6e65 2c20  OrderSpec(None, 
+0000c6e0: 4e6f 6e65 292e 636f 6c6c 6174 696f 6e5f  None).collation_
+0000c6f0: 6d65 7468 6f64 203d 3d20 6578 7065 6374  method == expect
+0000c700: 6564 5f76 616c 7565 0a0a 2020 2020 4070  ed_value..    @p
+0000c710: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
+0000c720: 6574 7269 7a65 280a 2020 2020 2020 2020  etrize(.        
+0000c730: 226f 7264 6572 5f64 6963 742c 2065 7870  "order_dict, exp
+0000c740: 6563 7465 645f 7661 6c75 6522 2c0a 2020  ected_value",.  
+0000c750: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0000c760: 2020 2020 287b 7d2c 2054 7275 6529 2c0a      ({}, True),.
+0000c770: 2020 2020 2020 2020 2020 2020 287b 2264              ({"d
+0000c780: 6972 6563 7469 6f6e 223a 2022 6465 7363  irection": "desc
+0000c790: 656e 6469 6e67 227d 2c20 5472 7565 292c  ending"}, True),
+0000c7a0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000c7b0: 6469 7265 6374 696f 6e22 3a20 2266 6f6f  direction": "foo
+0000c7c0: 6261 7222 7d2c 2054 7275 6529 2c0a 2020  bar"}, True),.  
+0000c7d0: 2020 2020 2020 2020 2020 287b 2264 6972            ({"dir
+0000c7e0: 6563 7469 6f6e 223a 2022 6173 6365 6e64  ection": "ascend
+0000c7f0: 696e 6722 7d2c 2046 616c 7365 292c 0a20  ing"}, False),. 
+0000c800: 2020 2020 2020 2029 2c0a 2020 2020 290a         ),.    ).
+0000c810: 2020 2020 6465 6620 6974 5f6b 6e6f 7773      def it_knows
+0000c820: 5f77 6865 7468 6572 5f74 6865 5f73 6f72  _whether_the_sor
+0000c830: 745f 6469 7265 6374 696f 6e5f 6973 5f64  t_direction_is_d
+0000c840: 6573 6365 6e64 696e 6728 0a20 2020 2020  escending(.     
+0000c850: 2020 2073 656c 662c 205f 6f72 6465 725f     self, _order_
+0000c860: 6469 6374 5f70 726f 705f 2c20 6f72 6465  dict_prop_, orde
+0000c870: 725f 6469 6374 2c20 6578 7065 6374 6564  r_dict, expected
+0000c880: 5f76 616c 7565 0a20 2020 2029 3a0a 2020  _value.    ):.  
+0000c890: 2020 2020 2020 5f6f 7264 6572 5f64 6963        _order_dic
+0000c8a0: 745f 7072 6f70 5f2e 7265 7475 726e 5f76  t_prop_.return_v
+0000c8b0: 616c 7565 203d 206f 7264 6572 5f64 6963  alue = order_dic
+0000c8c0: 740a 2020 2020 2020 2020 6173 7365 7274  t.        assert
+0000c8d0: 205f 4f72 6465 7253 7065 6328 4e6f 6e65   _OrderSpec(None
+0000c8e0: 2c20 4e6f 6e65 292e 6465 7363 656e 6469  , None).descendi
+0000c8f0: 6e67 203d 3d20 6578 7065 6374 6564 5f76  ng == expected_v
+0000c900: 616c 7565 0a0a 2020 2020 6465 6620 6974  alue..    def it
+0000c910: 5f6b 6e6f 7773 5f74 6865 5f73 6f72 745f  _knows_the_sort_
+0000c920: 7665 6374 6f72 5f65 6c65 6d65 6e74 5f69  vector_element_i
+0000c930: 6428 7365 6c66 2c20 5f6f 7264 6572 5f64  d(self, _order_d
+0000c940: 6963 745f 7072 6f70 5f29 3a0a 2020 2020  ict_prop_):.    
+0000c950: 2020 2020 5f6f 7264 6572 5f64 6963 745f      _order_dict_
+0000c960: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+0000c970: 7565 203d 207b 2265 6c65 6d65 6e74 5f69  ue = {"element_i
+0000c980: 6422 3a20 3432 7d0a 2020 2020 2020 2020  d": 42}.        
+0000c990: 6173 7365 7274 205f 4f72 6465 7253 7065  assert _OrderSpe
+0000c9a0: 6328 4e6f 6e65 2c20 4e6f 6e65 292e 656c  c(None, None).el
+0000c9b0: 656d 656e 745f 6964 203d 3d20 3432 0a0a  ement_id == 42..
+0000c9c0: 2020 2020 6465 6620 6275 745f 6974 5f72      def but_it_r
+0000c9d0: 6169 7365 735f 7768 656e 5f65 6c65 6d65  aises_when_eleme
+0000c9e0: 6e74 5f69 645f 6e6f 745f 7072 6573 656e  nt_id_not_presen
+0000c9f0: 7428 7365 6c66 2c20 5f6f 7264 6572 5f64  t(self, _order_d
+0000ca00: 6963 745f 7072 6f70 5f29 3a0a 2020 2020  ict_prop_):.    
+0000ca10: 2020 2020 5f6f 7264 6572 5f64 6963 745f      _order_dict_
+0000ca20: 7072 6f70 5f2e 7265 7475 726e 5f76 616c  prop_.return_val
+0000ca30: 7565 203d 207b 7d0a 2020 2020 2020 2020  ue = {}.        
+0000ca40: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+0000ca50: 6573 284b 6579 4572 726f 7229 2061 7320  es(KeyError) as 
+0000ca60: 653a 0a20 2020 2020 2020 2020 2020 205f  e:.            _
+0000ca70: 4f72 6465 7253 7065 6328 4e6f 6e65 2c20  OrderSpec(None, 
+0000ca80: 4e6f 6e65 292e 656c 656d 656e 745f 6964  None).element_id
+0000ca90: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000caa0: 7374 7228 652e 7661 6c75 6529 203d 3d20  str(e.value) == 
+0000cab0: 2227 656c 656d 656e 745f 6964 2722 0a0a  "'element_id'"..
+0000cac0: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+0000cad0: 2e70 6172 616d 6574 7269 7a65 280a 2020  .parametrize(.  
+0000cae0: 2020 2020 2020 226f 7264 6572 5f64 6963        "order_dic
+0000caf0: 742c 2065 7870 6563 7465 645f 7661 6c75  t, expected_valu
+0000cb00: 6522 2c0a 2020 2020 2020 2020 280a 2020  e",.        (.  
+0000cb10: 2020 2020 2020 2020 2020 287b 7d2c 2028            ({}, (
+0000cb20: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000cb30: 287b 2265 6c65 6d65 6e74 5f69 6473 223a  ({"element_ids":
+0000cb40: 204e 6f6e 657d 2c20 2829 292c 0a20 2020   None}, ()),.   
+0000cb50: 2020 2020 2020 2020 2028 7b22 656c 656d           ({"elem
+0000cb60: 656e 745f 6964 7322 3a20 5b5d 7d2c 2028  ent_ids": []}, (
+0000cb70: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000cb80: 287b 2265 6c65 6d65 6e74 5f69 6473 223a  ({"element_ids":
+0000cb90: 205b 342c 2032 5d7d 2c20 2834 2c20 3229   [4, 2]}, (4, 2)
+0000cba0: 292c 0a20 2020 2020 2020 2029 2c0a 2020  ),.        ),.  
+0000cbb0: 2020 290a 2020 2020 6465 6620 6974 5f6b    ).    def it_k
+0000cbc0: 6e6f 7773 5f74 6865 5f6f 7264 6572 6564  nows_the_ordered
+0000cbd0: 5f65 6c65 6d65 6e74 5f69 6473 5f66 6f72  _element_ids_for
+0000cbe0: 5f61 6e5f 6578 706c 6963 6974 5f73 6f72  _an_explicit_sor
+0000cbf0: 7428 0a20 2020 2020 2020 2073 656c 662c  t(.        self,
+0000cc00: 205f 6f72 6465 725f 6469 6374 5f70 726f   _order_dict_pro
+0000cc10: 705f 2c20 6f72 6465 725f 6469 6374 2c20  p_, order_dict, 
+0000cc20: 6578 7065 6374 6564 5f76 616c 7565 0a20  expected_value. 
+0000cc30: 2020 2029 3a0a 2020 2020 2020 2020 5f6f     ):.        _o
+0000cc40: 7264 6572 5f64 6963 745f 7072 6f70 5f2e  rder_dict_prop_.
+0000cc50: 7265 7475 726e 5f76 616c 7565 203d 206f  return_value = o
+0000cc60: 7264 6572 5f64 6963 740a 2020 2020 2020  rder_dict.      
+0000cc70: 2020 6173 7365 7274 205f 4f72 6465 7253    assert _OrderS
+0000cc80: 7065 6328 4e6f 6e65 2c20 4e6f 6e65 292e  pec(None, None).
+0000cc90: 656c 656d 656e 745f 6964 7320 3d3d 2065  element_ids == e
+0000cca0: 7870 6563 7465 645f 7661 6c75 650a 0a20  xpected_value.. 
+0000ccb0: 2020 2064 6566 2069 745f 6b6e 6f77 735f     def it_knows_
+0000ccc0: 7468 655f 736f 7274 5f76 6563 746f 725f  the_sort_vector_
+0000ccd0: 696e 7365 7274 696f 6e5f 6964 2873 656c  insertion_id(sel
+0000cce0: 662c 205f 6f72 6465 725f 6469 6374 5f70  f, _order_dict_p
+0000ccf0: 726f 705f 293a 0a20 2020 2020 2020 205f  rop_):.        _
+0000cd00: 6f72 6465 725f 6469 6374 5f70 726f 705f  order_dict_prop_
+0000cd10: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
+0000cd20: 7b22 696e 7365 7274 696f 6e5f 6964 223a  {"insertion_id":
+0000cd30: 2034 327d 0a20 2020 2020 2020 2061 7373   42}.        ass
+0000cd40: 6572 7420 5f4f 7264 6572 5370 6563 284e  ert _OrderSpec(N
+0000cd50: 6f6e 652c 204e 6f6e 6529 2e69 6e73 6572  one, None).inser
+0000cd60: 7469 6f6e 5f69 6420 3d3d 2034 320a 0a20  tion_id == 42.. 
+0000cd70: 2020 2064 6566 2062 7574 5f69 745f 7261     def but_it_ra
+0000cd80: 6973 6573 5f77 6865 6e5f 696e 7365 7274  ises_when_insert
+0000cd90: 696f 6e5f 6964 5f6e 6f74 5f70 7265 7365  ion_id_not_prese
+0000cda0: 6e74 2873 656c 662c 205f 6f72 6465 725f  nt(self, _order_
+0000cdb0: 6469 6374 5f70 726f 705f 293a 0a20 2020  dict_prop_):.   
+0000cdc0: 2020 2020 205f 6f72 6465 725f 6469 6374       _order_dict
+0000cdd0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
+0000cde0: 6c75 6520 3d20 7b7d 0a20 2020 2020 2020  lue = {}.       
+0000cdf0: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
+0000ce00: 7365 7328 4b65 7945 7272 6f72 2920 6173  ses(KeyError) as
+0000ce10: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0000ce20: 5f4f 7264 6572 5370 6563 284e 6f6e 652c  _OrderSpec(None,
+0000ce30: 204e 6f6e 6529 2e69 6e73 6572 7469 6f6e   None).insertion
+0000ce40: 5f69 640a 2020 2020 2020 2020 6173 7365  _id.        asse
+0000ce50: 7274 2073 7472 2865 2e76 616c 7565 2920  rt str(e.value) 
+0000ce60: 3d3d 2022 2769 6e73 6572 7469 6f6e 5f69  == "'insertion_i
+0000ce70: 6427 220a 0a20 2020 2064 6566 2069 745f  d'"..    def it_
+0000ce80: 6b6e 6f77 735f 7468 655f 6d61 7267 696e  knows_the_margin
+0000ce90: 616c 5f73 7065 6369 6669 6564 5f61 735f  al_specified_as_
+0000cea0: 7468 655f 736f 7274 5f62 6173 6973 2873  the_sort_basis(s
+0000ceb0: 656c 662c 205f 6f72 6465 725f 6469 6374  elf, _order_dict
+0000cec0: 5f70 726f 705f 293a 0a20 2020 2020 2020  _prop_):.       
+0000ced0: 205f 6f72 6465 725f 6469 6374 5f70 726f   _order_dict_pro
+0000cee0: 705f 2e72 6574 7572 6e5f 7661 6c75 6520  p_.return_value 
+0000cef0: 3d20 7b22 6d61 7267 696e 616c 223a 2022  = {"marginal": "
+0000cf00: 7363 616c 655f 6d65 616e 227d 0a20 2020  scale_mean"}.   
+0000cf10: 2020 2020 2061 7373 6572 7420 5f4f 7264       assert _Ord
+0000cf20: 6572 5370 6563 284e 6f6e 652c 204e 6f6e  erSpec(None, Non
+0000cf30: 6529 2e6d 6172 6769 6e61 6c20 3d3d 204d  e).marginal == M
+0000cf40: 4152 4749 4e41 4c2e 5343 414c 455f 4d45  ARGINAL.SCALE_ME
+0000cf50: 414e 0a0a 2020 2020 6465 6620 6974 5f6b  AN..    def it_k
+0000cf60: 6e6f 7773 5f74 6865 5f6d 6561 7375 7265  nows_the_measure
+0000cf70: 5f73 7065 6369 6669 6564 5f61 735f 7468  _specified_as_th
+0000cf80: 655f 736f 7274 5f62 6173 6973 2873 656c  e_sort_basis(sel
+0000cf90: 662c 205f 6f72 6465 725f 6469 6374 5f70  f, _order_dict_p
+0000cfa0: 726f 705f 293a 0a20 2020 2020 2020 205f  rop_):.        _
+0000cfb0: 6f72 6465 725f 6469 6374 5f70 726f 705f  order_dict_prop_
+0000cfc0: 2e72 6574 7572 6e5f 7661 6c75 6520 3d20  .return_value = 
+0000cfd0: 7b22 6d65 6173 7572 6522 3a20 2263 6f6c  {"measure": "col
+0000cfe0: 5f70 6572 6365 6e74 227d 0a20 2020 2020  _percent"}.     
+0000cff0: 2020 2061 7373 6572 7420 5f4f 7264 6572     assert _Order
+0000d000: 5370 6563 284e 6f6e 652c 204e 6f6e 6529  Spec(None, None)
+0000d010: 2e6d 6561 7375 7265 203d 3d20 4d45 4153  .measure == MEAS
+0000d020: 5552 452e 434f 4c55 4d4e 5f50 4552 4345  URE.COLUMN_PERCE
+0000d030: 4e54 0a0a 2020 2020 6465 6620 6275 745f  NT..    def but_
+0000d040: 6974 5f72 6169 7365 735f 7768 656e 5f6d  it_raises_when_m
+0000d050: 6561 7375 7265 5f66 6965 6c64 5f69 735f  easure_field_is_
+0000d060: 6e6f 745f 7072 6573 656e 7428 7365 6c66  not_present(self
+0000d070: 2c20 5f6f 7264 6572 5f64 6963 745f 7072  , _order_dict_pr
+0000d080: 6f70 5f29 3a0a 2020 2020 2020 2020 5f6f  op_):.        _o
+0000d090: 7264 6572 5f64 6963 745f 7072 6f70 5f2e  rder_dict_prop_.
+0000d0a0: 7265 7475 726e 5f76 616c 7565 203d 207b  return_value = {
+0000d0b0: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
+0000d0c0: 7974 6573 742e 7261 6973 6573 284b 6579  ytest.raises(Key
+0000d0d0: 4572 726f 7229 2061 7320 653a 0a20 2020  Error) as e:.   
+0000d0e0: 2020 2020 2020 2020 205f 4f72 6465 7253           _OrderS
+0000d0f0: 7065 6328 4e6f 6e65 2c20 4e6f 6e65 292e  pec(None, None).
+0000d100: 6d65 6173 7572 650a 2020 2020 2020 2020  measure.        
+0000d110: 6173 7365 7274 2073 7472 2865 2e76 616c  assert str(e.val
+0000d120: 7565 2920 3d3d 2022 276d 6561 7375 7265  ue) == "'measure
+0000d130: 2722 0a0a 2020 2020 6465 6620 616e 645f  '"..    def and_
+0000d140: 6974 5f72 6169 7365 735f 7768 656e 5f74  it_raises_when_t
+0000d150: 6865 5f6d 6561 7375 7265 5f6b 6579 776f  he_measure_keywo
+0000d160: 7264 5f69 735f 6e6f 745f 7265 636f 676e  rd_is_not_recogn
+0000d170: 697a 6564 280a 2020 2020 2020 2020 7365  ized(.        se
+0000d180: 6c66 2c20 5f6f 7264 6572 5f64 6963 745f  lf, _order_dict_
+0000d190: 7072 6f70 5f0a 2020 2020 293a 0a20 2020  prop_.    ):.   
+0000d1a0: 2020 2020 205f 6f72 6465 725f 6469 6374       _order_dict
+0000d1b0: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
+0000d1c0: 6c75 6520 3d20 7b22 6d65 6173 7572 6522  lue = {"measure"
+0000d1d0: 3a20 2266 6f6f 6261 7222 7d0a 2020 2020  : "foobar"}.    
+0000d1e0: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
+0000d1f0: 7261 6973 6573 2856 616c 7565 4572 726f  raises(ValueErro
+0000d200: 7229 2061 7320 653a 0a20 2020 2020 2020  r) as e:.       
+0000d210: 2020 2020 205f 4f72 6465 7253 7065 6328       _OrderSpec(
+0000d220: 4e6f 6e65 2c20 4e6f 6e65 292e 6d65 6173  None, None).meas
+0000d230: 7572 650a 2020 2020 2020 2020 2320 2d2d  ure.        # --
+0000d240: 2d20 602e 656e 6473 7769 7468 2829 6020  - `.endswith()` 
+0000d250: 746f 2061 6363 6f6d 6d6f 6461 7465 2061  to accommodate a
+0000d260: 2050 7974 686f 6e20 322e 3720 7673 2e20   Python 2.7 vs. 
+0000d270: 332e 3020 6572 726f 7220 6d65 7373 6167  3.0 error messag
+0000d280: 6520 6469 6666 6572 656e 6365 0a20 2020  e difference.   
+0000d290: 2020 2020 2023 202d 2d2d 2069 6e20 456e       # --- in En
+0000d2a0: 756d 206d 6f64 756c 650a 2020 2020 2020  um module.      
+0000d2b0: 2020 6173 7365 7274 2073 7472 2865 2e76    assert str(e.v
+0000d2c0: 616c 7565 292e 656e 6473 7769 7468 2822  alue).endswith("
+0000d2d0: 2069 7320 6e6f 7420 6120 7661 6c69 6420   is not a valid 
+0000d2e0: 4d45 4153 5552 4522 290a 0a20 2020 2040  MEASURE")..    @
+0000d2f0: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
+0000d300: 6d65 7472 697a 6528 0a20 2020 2020 2020  metrize(.       
+0000d310: 2022 6f72 6465 725f 6469 6374 2c20 6578   "order_dict, ex
+0000d320: 7065 6374 6564 5f76 616c 7565 222c 0a20  pected_value",. 
+0000d330: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0000d340: 2020 2020 2028 7b7d 2c20 2829 292c 0a20       ({}, ()),. 
+0000d350: 2020 2020 2020 2020 2020 2028 7b22 6669             ({"fi
+0000d360: 7865 6422 3a20 7b7d 7d2c 2028 2929 2c0a  xed": {}}, ()),.
+0000d370: 2020 2020 2020 2020 2020 2020 287b 2266              ({"f
+0000d380: 6978 6564 223a 207b 2262 6f74 746f 6d22  ixed": {"bottom"
+0000d390: 3a20 5b31 2c20 325d 7d7d 2c20 2829 292c  : [1, 2]}}, ()),
+0000d3a0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000d3b0: 6669 7865 6422 3a20 7b22 746f 7022 3a20  fixed": {"top": 
+0000d3c0: 5b5d 7d7d 2c20 2829 292c 0a20 2020 2020  []}}, ()),.     
+0000d3d0: 2020 2020 2020 2028 7b22 6669 7865 6422         ({"fixed"
+0000d3e0: 3a20 7b22 746f 7022 3a20 5b33 2c20 345d  : {"top": [3, 4]
+0000d3f0: 7d7d 2c20 2833 2c20 3429 292c 0a20 2020  }}, (3, 4)),.   
+0000d400: 2020 2020 2020 2020 2028 7b22 6669 7865           ({"fixe
+0000d410: 6422 3a20 7b22 626f 7474 6f6d 223a 205b  d": {"bottom": [
+0000d420: 312c 2032 5d2c 2022 746f 7022 3a20 5b33  1, 2], "top": [3
+0000d430: 2c20 345d 7d7d 2c20 2833 2c20 3429 292c  , 4]}}, (3, 4)),
+0000d440: 0a20 2020 2020 2020 2029 2c0a 2020 2020  .        ),.    
+0000d450: 290a 2020 2020 6465 6620 6974 5f6b 6e6f  ).    def it_kno
+0000d460: 7773 5f69 7473 5f74 6f70 5f66 6978 6564  ws_its_top_fixed
+0000d470: 5f69 6473 2873 656c 662c 205f 6f72 6465  _ids(self, _orde
+0000d480: 725f 6469 6374 5f70 726f 705f 2c20 6f72  r_dict_prop_, or
+0000d490: 6465 725f 6469 6374 2c20 6578 7065 6374  der_dict, expect
+0000d4a0: 6564 5f76 616c 7565 293a 0a20 2020 2020  ed_value):.     
+0000d4b0: 2020 205f 6f72 6465 725f 6469 6374 5f70     _order_dict_p
+0000d4c0: 726f 705f 2e72 6574 7572 6e5f 7661 6c75  rop_.return_valu
+0000d4d0: 6520 3d20 6f72 6465 725f 6469 6374 0a20  e = order_dict. 
+0000d4e0: 2020 2020 2020 2061 7373 6572 7420 5f4f         assert _O
+0000d4f0: 7264 6572 5370 6563 284e 6f6e 652c 204e  rderSpec(None, N
+0000d500: 6f6e 6529 2e74 6f70 5f66 6978 6564 5f69  one).top_fixed_i
+0000d510: 6473 203d 3d20 6578 7065 6374 6564 5f76  ds == expected_v
+0000d520: 616c 7565 0a0a 2020 2020 4070 7974 6573  alue..    @pytes
+0000d530: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
+0000d540: 7a65 280a 2020 2020 2020 2020 2264 696d  ze(.        "dim
+0000d550: 5f74 7261 6e73 666f 726d 732c 2065 7870  _transforms, exp
+0000d560: 6563 7465 645f 7661 6c75 6522 2c0a 2020  ected_value",.  
+0000d570: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0000d580: 2020 2020 287b 7d2c 207b 7d29 2c0a 2020      ({}, {}),.  
+0000d590: 2020 2020 2020 2020 2020 287b 226f 7264            ({"ord
+0000d5a0: 6572 223a 204e 6f6e 657d 2c20 7b7d 292c  er": None}, {}),
+0000d5b0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000d5c0: 6f72 6465 7222 3a20 7b7d 7d2c 207b 7d29  order": {}}, {})
+0000d5d0: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000d5e0: 226f 7264 6572 223a 207b 2274 7970 6522  "order": {"type"
+0000d5f0: 3a20 2265 7870 6c69 6369 7422 7d7d 2c20  : "explicit"}}, 
+0000d600: 7b22 7479 7065 223a 2022 6578 706c 6963  {"type": "explic
+0000d610: 6974 227d 292c 0a20 2020 2020 2020 2029  it"}),.        )
+0000d620: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
+0000d630: 6974 5f70 726f 7669 6465 735f 6163 6365  it_provides_acce
+0000d640: 7373 5f74 6f5f 7468 655f 6f72 6465 725f  ss_to_the_order_
+0000d650: 6469 6374 5f74 6f5f 6865 6c70 280a 2020  dict_to_help(.  
+0000d660: 2020 2020 2020 7365 6c66 2c20 6469 6d5f        self, dim_
+0000d670: 7472 616e 7366 6f72 6d73 2c20 6578 7065  transforms, expe
+0000d680: 6374 6564 5f76 616c 7565 0a20 2020 2029  cted_value.    )
+0000d690: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+0000d6a0: 205f 4f72 6465 7253 7065 6328 4e6f 6e65   _OrderSpec(None
+0000d6b0: 2c20 6469 6d5f 7472 616e 7366 6f72 6d73  , dim_transforms
+0000d6c0: 292e 5f6f 7264 6572 5f64 6963 7420 3d3d  )._order_dict ==
+0000d6d0: 2065 7870 6563 7465 645f 7661 6c75 650a   expected_value.
+0000d6e0: 0a20 2020 2023 2066 6978 7475 7265 2063  .    # fixture c
+0000d6f0: 6f6d 706f 6e65 6e74 7320 2d2d 2d2d 2d2d  omponents ------
+0000d700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d720: 2d2d 2d2d 2d2d 2d0a 0a20 2020 2040 7079  -------..    @py
+0000d730: 7465 7374 2e66 6978 7475 7265 0a20 2020  test.fixture.   
+0000d740: 2064 6566 205f 6f72 6465 725f 6469 6374   def _order_dict
+0000d750: 5f70 726f 705f 2873 656c 662c 2072 6571  _prop_(self, req
+0000d760: 7565 7374 293a 0a20 2020 2020 2020 2072  uest):.        r
+0000d770: 6574 7572 6e20 7072 6f70 6572 7479 5f6d  eturn property_m
+0000d780: 6f63 6b28 7265 7175 6573 742c 205f 4f72  ock(request, _Or
+0000d790: 6465 7253 7065 632c 2022 5f6f 7264 6572  derSpec, "_order
+0000d7a0: 5f64 6963 7422 290a 0a0a 636c 6173 7320  _dict")...class 
+0000d7b0: 4465 7363 7269 6265 5f53 7562 746f 7461  Describe_Subtota
+0000d7c0: 6c73 3a0a 2020 2020 2222 2255 6e69 742d  ls:.    """Unit-
+0000d7d0: 7465 7374 2073 7569 7465 2066 6f72 2060  test suite for `
+0000d7e0: 6372 2e63 7562 652e 6469 6d65 6e73 696f  cr.cube.dimensio
+0000d7f0: 6e2e 5f53 7562 746f 7461 6c73 6020 6f62  n._Subtotals` ob
+0000d800: 6a65 6374 2e22 2222 0a0a 2020 2020 6465  ject."""..    de
+0000d810: 6620 6974 5f68 6173 5f73 6571 7565 6e63  f it_has_sequenc
+0000d820: 655f 6265 6861 7669 6f72 7328 7365 6c66  e_behaviors(self
+0000d830: 2c20 7265 7175 6573 742c 205f 7375 6274  , request, _subt
+0000d840: 6f74 616c 735f 7072 6f70 5f29 3a0a 2020  otals_prop_):.  
+0000d850: 2020 2020 2020 5f73 7562 746f 7461 6c73        _subtotals
+0000d860: 5f70 726f 705f 2e72 6574 7572 6e5f 7661  _prop_.return_va
+0000d870: 6c75 6520 3d20 2831 2c20 322c 2033 290a  lue = (1, 2, 3).
+0000d880: 2020 2020 2020 2020 7375 6274 6f74 616c          subtotal
+0000d890: 7320 3d20 5f53 7562 746f 7461 6c73 284e  s = _Subtotals(N
+0000d8a0: 6f6e 652c 204e 6f6e 6529 0a0a 2020 2020  one, None)..    
+0000d8b0: 2020 2020 6173 7365 7274 2073 7562 746f      assert subto
+0000d8c0: 7461 6c73 5b31 5d20 3d3d 2032 0a20 2020  tals[1] == 2.   
+0000d8d0: 2020 2020 2061 7373 6572 7420 7375 6274       assert subt
+0000d8e0: 6f74 616c 735b 313a 335d 203d 3d20 2832  otals[1:3] == (2
+0000d8f0: 2c20 3329 0a20 2020 2020 2020 2061 7373  , 3).        ass
+0000d900: 6572 7420 6c65 6e28 7375 6274 6f74 616c  ert len(subtotal
+0000d910: 7329 203d 3d20 330a 2020 2020 2020 2020  s) == 3.        
+0000d920: 6173 7365 7274 206c 6973 7428 6e20 666f  assert list(n fo
+0000d930: 7220 6e20 696e 2073 7562 746f 7461 6c73  r n in subtotals
+0000d940: 2920 3d3d 205b 312c 2032 2c20 335d 0a0a  ) == [1, 2, 3]..
+0000d950: 2020 2020 6465 6620 6974 5f70 726f 7669      def it_provi
+0000d960: 6465 735f 7468 655f 656c 656d 656e 745f  des_the_element_
+0000d970: 6964 735f 6173 5f61 5f73 6574 5f74 6f5f  ids_as_a_set_to_
+0000d980: 6865 6c70 2873 656c 662c 2072 6571 7565  help(self, reque
+0000d990: 7374 2c20 7661 6c69 645f 656c 656d 656e  st, valid_elemen
+0000d9a0: 7473 5f29 3a0a 2020 2020 2020 2020 7661  ts_):.        va
+0000d9b0: 6c69 645f 656c 656d 656e 7473 5f2e 656c  lid_elements_.el
+0000d9c0: 656d 656e 745f 6964 7320 3d20 7475 706c  ement_ids = tupl
+0000d9d0: 6528 7261 6e67 6528 3329 290a 2020 2020  e(range(3)).    
+0000d9e0: 2020 2020 7375 6274 6f74 616c 7320 3d20      subtotals = 
+0000d9f0: 5f53 7562 746f 7461 6c73 284e 6f6e 652c  _Subtotals(None,
+0000da00: 2076 616c 6964 5f65 6c65 6d65 6e74 735f   valid_elements_
+0000da10: 290a 0a20 2020 2020 2020 2065 6c65 6d65  )..        eleme
+0000da20: 6e74 5f69 6473 203d 2073 7562 746f 7461  nt_ids = subtota
+0000da30: 6c73 2e5f 656c 656d 656e 745f 6964 730a  ls._element_ids.
+0000da40: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000da50: 656c 656d 656e 745f 6964 7320 3d3d 207b  element_ids == {
+0000da60: 302c 2031 2c20 327d 0a0a 2020 2020 4070  0, 1, 2}..    @p
+0000da70: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
+0000da80: 6574 7269 7a65 280a 2020 2020 2020 2020  etrize(.        
+0000da90: 2269 6e73 6572 7469 6f6e 5f64 6963 7473  "insertion_dicts
+0000daa0: 2c20 656c 656d 656e 745f 6964 732c 2065  , element_ids, e
+0000dab0: 7870 6563 7465 645f 7661 6c75 6522 2c0a  xpected_value",.
+0000dac0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+0000dad0: 2020 2020 2020 285b 5d2c 2028 292c 2028        ([], (), (
+0000dae0: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000daf0: 285b 226e 6f74 2d61 2d64 6963 7422 2c20  (["not-a-dict", 
+0000db00: 4e6f 6e65 5d2c 2028 292c 2028 2929 2c0a  None], (), ()),.
+0000db10: 2020 2020 2020 2020 2020 2020 285b 7b22              ([{"
+0000db20: 6675 6e63 7469 6f6e 223a 2022 6879 7065  function": "hype
+0000db30: 7264 7269 7665 227d 5d2c 2028 292c 2028  rdrive"}], (), (
+0000db40: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000db50: 285b 7b22 6675 6e63 7469 6f6e 223a 2022  ([{"function": "
+0000db60: 7375 6274 6f74 616c 222c 2022 6869 6465  subtotal", "hide
+0000db70: 223a 2054 7275 657d 5d2c 2028 292c 2028  ": True}], (), (
+0000db80: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000db90: 285b 7b22 6675 6e63 7469 6f6e 223a 2022  ([{"function": "
+0000dba0: 7375 6274 6f74 616c 222c 2022 6172 6768  subtotal", "argh
+0000dbb0: 6873 223a 205b 5d7d 5d2c 2028 292c 2028  hs": []}], (), (
+0000dbc0: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+0000dbd0: 285b 7b22 6675 6e63 7469 6f6e 223a 2022  ([{"function": "
+0000dbe0: 7375 6274 6f74 616c 222c 2022 616e 6368  subtotal", "anch
+0000dbf0: 6f72 223a 2039 2c20 226e 616d 6522 3a20  or": 9, "name": 
+0000dc00: 226e 6f20 6172 6773 227d 5d2c 2028 292c  "no args"}], (),
+0000dc10: 2028 2929 2c0a 2020 2020 2020 2020 2020   ()),.          
+0000dc20: 2020 285b 7b22 6675 6e63 7469 6f6e 223a    ([{"function":
+0000dc30: 2022 7375 6274 6f74 616c 222c 2022 616e   "subtotal", "an
+0000dc40: 6368 6f72 223a 2039 2c20 2261 7267 7322  chor": 9, "args"
+0000dc50: 3a20 5b31 2c20 325d 7d5d 2c20 2829 2c20  : [1, 2]}], (), 
+0000dc60: 2829 292c 0a20 2020 2020 2020 2020 2020  ()),.           
+0000dc70: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+0000dc80: 2020 205b 7b22 6675 6e63 7469 6f6e 223a     [{"function":
+0000dc90: 2022 7375 6274 6f74 616c 222c 2022 616e   "subtotal", "an
+0000dca0: 6368 6f72 223a 2039 2c20 2261 7267 7322  chor": 9, "args"
+0000dcb0: 3a20 5b31 2c20 325d 2c20 226e 616d 6522  : [1, 2], "name"
+0000dcc0: 3a20 2241 227d 5d2c 0a20 2020 2020 2020  : "A"}],.       
+0000dcd0: 2020 2020 2020 2020 207b 332c 2034 7d2c           {3, 4},
+0000dce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dcf0: 2028 292c 0a20 2020 2020 2020 2020 2020   (),.           
+0000dd00: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+0000dd10: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000dd20: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+0000dd30: 2020 2020 2020 2020 7b22 6675 6e63 7469          {"functi
+0000dd40: 6f6e 223a 2022 7375 6274 6f74 616c 222c  on": "subtotal",
+0000dd50: 2022 616e 6368 6f72 223a 2039 2c20 2261   "anchor": 9, "a
+0000dd60: 7267 7322 3a20 5b31 2c20 325d 2c20 226e  rgs": [1, 2], "n
+0000dd70: 616d 6522 3a20 2243 227d 2c0a 2020 2020  ame": "C"},.    
+0000dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dd90: 7b22 6675 6e63 7469 6f6e 223a 2022 7375  {"function": "su
+0000dda0: 6274 6f74 616c 222c 2022 616e 6368 6f72  btotal", "anchor
+0000ddb0: 223a 2039 2c20 2261 7267 7322 3a20 5b33  ": 9, "args": [3
+0000ddc0: 2c20 345d 2c20 226e 616d 6522 3a20 225a  , 4], "name": "Z
+0000ddd0: 227d 2c0a 2020 2020 2020 2020 2020 2020  "},.            
+0000dde0: 2020 2020 2020 2020 7b22 6675 6e63 7469          {"functi
+0000ddf0: 6f6e 223a 2022 7375 6274 6f74 616c 222c  on": "subtotal",
+0000de00: 2022 616e 6368 6f72 223a 2039 2c20 2261   "anchor": 9, "a
+0000de10: 7267 7322 3a20 5b35 2c20 365d 2c20 226e  rgs": [5, 6], "n
+0000de20: 616d 6522 3a20 2244 227d 2c0a 2020 2020  ame": "D"},.    
+0000de30: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
+0000de40: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0000de50: 312c 2032 2c20 352c 2038 2c20 2d31 7d2c  1, 2, 5, 8, -1},
+0000de60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000de70: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+0000de80: 2020 2020 2020 207b 2266 756e 6374 696f         {"functio
+0000de90: 6e22 3a20 2273 7562 746f 7461 6c22 2c20  n": "subtotal", 
+0000dea0: 2261 6e63 686f 7222 3a20 392c 2022 6172  "anchor": 9, "ar
+0000deb0: 6773 223a 205b 312c 2032 5d2c 2022 6e61  gs": [1, 2], "na
+0000dec0: 6d65 223a 2022 4322 7d2c 0a20 2020 2020  me": "C"},.     
+0000ded0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0000dee0: 2266 756e 6374 696f 6e22 3a20 2273 7562  "function": "sub
+0000def0: 746f 7461 6c22 2c20 2261 6e63 686f 7222  total", "anchor"
+0000df00: 3a20 392c 2022 6172 6773 223a 205b 352c  : 9, "args": [5,
+0000df10: 2036 5d2c 2022 6e61 6d65 223a 2022 4422   6], "name": "D"
+0000df20: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+0000df30: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
+0000df40: 2020 292c 0a20 2020 2020 2020 2029 2c0a    ),.        ),.
+0000df50: 2020 2020 290a 2020 2020 6465 6620 6974      ).    def it
+0000df60: 5f72 656d 6f76 6573 5f69 6e76 616c 6964  _removes_invalid
+0000df70: 5f77 6865 6e5f 6974 6572 6174 696e 675f  _when_iterating_
+0000df80: 7468 655f 7661 6c69 645f 7375 6274 6f74  the_valid_subtot
+0000df90: 616c 5f69 6e73 6572 7469 6f6e 5f64 6963  al_insertion_dic
+0000dfa0: 7473 5f74 6f5f 6865 6c70 280a 2020 2020  ts_to_help(.    
+0000dfb0: 2020 2020 7365 6c66 2c20 5f65 6c65 6d65      self, _eleme
+0000dfc0: 6e74 5f69 6473 5f70 726f 705f 2c20 696e  nt_ids_prop_, in
+0000dfd0: 7365 7274 696f 6e5f 6469 6374 732c 2065  sertion_dicts, e
+0000dfe0: 6c65 6d65 6e74 5f69 6473 2c20 6578 7065  lement_ids, expe
+0000dff0: 6374 6564 5f76 616c 7565 0a20 2020 2029  cted_value.    )
+0000e000: 3a0a 2020 2020 2020 2020 5f65 6c65 6d65  :.        _eleme
+0000e010: 6e74 5f69 6473 5f70 726f 705f 2e72 6574  nt_ids_prop_.ret
+0000e020: 7572 6e5f 7661 6c75 6520 3d20 656c 656d  urn_value = elem
+0000e030: 656e 745f 6964 730a 2020 2020 2020 2020  ent_ids.        
+0000e040: 7375 6274 6f74 616c 7320 3d20 5f53 7562  subtotals = _Sub
+0000e050: 746f 7461 6c73 2869 6e73 6572 7469 6f6e  totals(insertion
+0000e060: 5f64 6963 7473 2c20 4e6f 6e65 290a 0a20  _dicts, None).. 
+0000e070: 2020 2020 2020 2073 7562 746f 7461 6c5f         subtotal_
+0000e080: 6469 6374 7320 3d20 7475 706c 6528 7375  dicts = tuple(su
+0000e090: 6274 6f74 616c 732e 5f69 7465 725f 7661  btotals._iter_va
+0000e0a0: 6c69 645f 7375 6274 6f74 616c 5f64 6963  lid_subtotal_dic
+0000e0b0: 7473 2829 290a 0a20 2020 2020 2020 2061  ts())..        a
+0000e0c0: 7373 6572 7420 7375 6274 6f74 616c 5f64  ssert subtotal_d
+0000e0d0: 6963 7473 203d 3d20 6578 7065 6374 6564  icts == expected
+0000e0e0: 5f76 616c 7565 0a0a 2020 2020 6465 6620  _value..    def 
+0000e0f0: 6275 745f 6974 5f61 6363 6570 7473 5f76  but_it_accepts_v
+0000e100: 616c 6964 5f69 6e73 6572 7469 6f6e 5f64  alid_insertion_d
+0000e110: 6963 7473 2873 656c 662c 205f 656c 656d  icts(self, _elem
+0000e120: 656e 745f 6964 735f 7072 6f70 5f29 3a0a  ent_ids_prop_):.
+0000e130: 2020 2020 2020 2020 5f65 6c65 6d65 6e74          _element
+0000e140: 5f69 6473 5f70 726f 705f 2e72 6574 7572  _ids_prop_.retur
+0000e150: 6e5f 7661 6c75 6520 3d20 7b31 2c20 322c  n_value = {1, 2,
+0000e160: 2035 2c20 382c 202d 317d 0a20 2020 2020   5, 8, -1}.     
+0000e170: 2020 2069 6e73 6572 7469 6f6e 5f64 6963     insertion_dic
+0000e180: 7473 203d 205b 0a20 2020 2020 2020 2020  ts = [.         
+0000e190: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0000e1a0: 2020 2020 2022 6675 6e63 7469 6f6e 223a       "function":
+0000e1b0: 2022 7375 6274 6f74 616c 222c 0a20 2020   "subtotal",.   
+0000e1c0: 2020 2020 2020 2020 2020 2020 2022 616e               "an
+0000e1d0: 6368 6f72 223a 2039 2c0a 2020 2020 2020  chor": 9,.      
+0000e1e0: 2020 2020 2020 2020 2020 2261 7267 7322            "args"
+0000e1f0: 3a20 5b31 5d2c 0a20 2020 2020 2020 2020  : [1],.         
+0000e200: 2020 2020 2020 2022 6e61 6d65 223a 2022         "name": "
+0000e210: 6f6c 6420 7374 796c 6520 6172 6773 222c  old style args",
+0000e220: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
+0000e230: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0000e240: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+0000e250: 756e 6374 696f 6e22 3a20 2273 7562 746f  unction": "subto
+0000e260: 7461 6c22 2c0a 2020 2020 2020 2020 2020  tal",.          
+0000e270: 2020 2020 2020 2261 6e63 686f 7222 3a20        "anchor": 
+0000e280: 392c 0a20 2020 2020 2020 2020 2020 2020  9,.             
+0000e290: 2020 2022 6172 6773 223a 205b 315d 2c0a     "args": [1],.
+0000e2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e2b0: 226b 7761 7267 7322 3a20 7b22 6e65 6761  "kwargs": {"nega
+0000e2c0: 7469 7665 223a 205b 325d 7d2c 0a20 2020  tive": [2]},.   
+0000e2d0: 2020 2020 2020 2020 2020 2020 2022 6e61               "na
+0000e2e0: 6d65 223a 2022 6f6c 6420 7374 796c 6520  me": "old style 
+0000e2f0: 6172 6773 2077 6974 6820 6e65 6761 7469  args with negati
+0000e300: 7665 222c 0a20 2020 2020 2020 2020 2020  ve",.           
+0000e310: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+0000e320: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0000e330: 2020 2266 756e 6374 696f 6e22 3a20 2273    "function": "s
+0000e340: 7562 746f 7461 6c22 2c0a 2020 2020 2020  ubtotal",.      
+0000e350: 2020 2020 2020 2020 2020 2261 6e63 686f            "ancho
+0000e360: 7222 3a20 392c 0a20 2020 2020 2020 2020  r": 9,.         
+0000e370: 2020 2020 2020 2022 6b77 6172 6773 223a         "kwargs":
+0000e380: 207b 226e 6567 6174 6976 6522 3a20 5b32   {"negative": [2
+0000e390: 5d7d 2c0a 2020 2020 2020 2020 2020 2020  ]},.            
+0000e3a0: 2020 2020 226e 616d 6522 3a20 226e 6567      "name": "neg
+0000e3b0: 6174 6976 6520 6f6e 6c79 222c 0a20 2020  ative only",.   
+0000e3c0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0000e3d0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0000e3e0: 2020 2020 2020 2020 2020 2266 756e 6374            "funct
+0000e3f0: 696f 6e22 3a20 2273 7562 746f 7461 6c22  ion": "subtotal"
+0000e400: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000e410: 2020 2261 6e63 686f 7222 3a20 392c 0a20    "anchor": 9,. 
+0000e420: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000e430: 6b77 6172 6773 223a 207b 2270 6f73 6974  kwargs": {"posit
+0000e440: 6976 6522 3a20 5b31 5d7d 2c0a 2020 2020  ive": [1]},.    
+0000e450: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
+0000e460: 6522 3a20 226e 6577 2073 7479 6c65 206b  e": "new style k
+0000e470: 7761 7267 7322 2c0a 2020 2020 2020 2020  wargs",.        
+0000e480: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+0000e490: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0000e4a0: 2020 2020 2022 6675 6e63 7469 6f6e 223a       "function":
+0000e4b0: 2022 7375 6274 6f74 616c 222c 0a20 2020   "subtotal",.   
+0000e4c0: 2020 2020 2020 2020 2020 2020 2022 616e               "an
+0000e4d0: 6368 6f72 223a 2039 2c0a 2020 2020 2020  chor": 9,.      
+0000e4e0: 2020 2020 2020 2020 2020 226b 7761 7267            "kwarg
+0000e4f0: 7322 3a20 7b22 706f 7369 7469 7665 223a  s": {"positive":
+0000e500: 205b 315d 2c20 226e 6567 6174 6976 6522   [1], "negative"
+0000e510: 3a20 5b32 5d7d 2c0a 2020 2020 2020 2020  : [2]},.        
+0000e520: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+0000e530: 226e 6577 2073 7479 6c65 206b 7761 7267  "new style kwarg
+0000e540: 7320 7769 7468 206e 6567 6174 6976 6522  s with negative"
+0000e550: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+0000e560: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
+0000e570: 2020 2073 7562 746f 7461 6c73 203d 205f     subtotals = _
+0000e580: 5375 6274 6f74 616c 7328 696e 7365 7274  Subtotals(insert
+0000e590: 696f 6e5f 6469 6374 732c 204e 6f6e 6529  ion_dicts, None)
+0000e5a0: 0a0a 2020 2020 2020 2020 7375 6274 6f74  ..        subtot
+0000e5b0: 616c 5f64 6963 7473 203d 2074 7570 6c65  al_dicts = tuple
+0000e5c0: 2873 7562 746f 7461 6c73 2e5f 6974 6572  (subtotals._iter
+0000e5d0: 5f76 616c 6964 5f73 7562 746f 7461 6c5f  _valid_subtotal_
+0000e5e0: 6469 6374 7328 2929 0a0a 2020 2020 2020  dicts())..      
+0000e5f0: 2020 6173 7365 7274 2073 7562 746f 7461    assert subtota
+0000e600: 6c5f 6469 6374 7320 3d3d 2074 7570 6c65  l_dicts == tuple
+0000e610: 2869 6e73 6572 7469 6f6e 5f64 6963 7473  (insertion_dicts
+0000e620: 290a 0a20 2020 2064 6566 2069 745f 636f  )..    def it_co
+0000e630: 6e73 7472 7563 7473 5f69 7473 5f73 7562  nstructs_its_sub
+0000e640: 746f 7461 6c5f 6f62 6a65 6374 735f 746f  total_objects_to
+0000e650: 5f68 656c 7028 0a20 2020 2020 2020 2073  _help(.        s
+0000e660: 656c 662c 2072 6571 7565 7374 2c20 5f69  elf, request, _i
+0000e670: 7465 725f 7661 6c69 645f 7375 6274 6f74  ter_valid_subtot
+0000e680: 616c 5f64 6963 7473 5f2c 2076 616c 6964  al_dicts_, valid
+0000e690: 5f65 6c65 6d65 6e74 735f 2c20 5f53 7562  _elements_, _Sub
+0000e6a0: 746f 7461 6c5f 0a20 2020 2029 3a0a 2020  total_.    ):.  
+0000e6b0: 2020 2020 2020 7375 6274 6f74 616c 5f64        subtotal_d
+0000e6c0: 6963 7473 5f20 3d20 7475 706c 6528 7b22  icts_ = tuple({"
+0000e6d0: 7375 6274 6f74 616c 2d64 6963 7422 3a20  subtotal-dict": 
+0000e6e0: 6964 787d 2066 6f72 2069 6478 2069 6e20  idx} for idx in 
+0000e6f0: 7261 6e67 6528 3329 290a 2020 2020 2020  range(3)).      
+0000e700: 2020 7375 6274 6f74 616c 5f6f 626a 735f    subtotal_objs_
+0000e710: 203d 2074 7570 6c65 280a 2020 2020 2020   = tuple(.      
+0000e720: 2020 2020 2020 696e 7374 616e 6365 5f6d        instance_m
+0000e730: 6f63 6b28 7265 7175 6573 742c 205f 5375  ock(request, _Su
+0000e740: 6274 6f74 616c 2c20 6e61 6d65 3d22 7375  btotal, name="su
+0000e750: 6274 6f74 616c 2d25 6422 2025 2069 6478  btotal-%d" % idx
+0000e760: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+0000e770: 7220 6964 7820 696e 2072 616e 6765 2833  r idx in range(3
+0000e780: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+0000e790: 2020 2020 5f69 7465 725f 7661 6c69 645f      _iter_valid_
+0000e7a0: 7375 6274 6f74 616c 5f64 6963 7473 5f2e  subtotal_dicts_.
+0000e7b0: 7265 7475 726e 5f76 616c 7565 203d 2069  return_value = i
+0000e7c0: 7465 7228 7375 6274 6f74 616c 5f64 6963  ter(subtotal_dic
+0000e7d0: 7473 5f29 0a20 2020 2020 2020 205f 5375  ts_).        _Su
+0000e7e0: 6274 6f74 616c 5f2e 7369 6465 5f65 6666  btotal_.side_eff
+0000e7f0: 6563 7420 3d20 6974 6572 2873 7562 746f  ect = iter(subto
+0000e800: 7461 6c5f 6f62 6a73 5f29 0a20 2020 2020  tal_objs_).     
+0000e810: 2020 2073 7562 746f 7461 6c73 203d 205f     subtotals = _
+0000e820: 5375 6274 6f74 616c 7328 4e6f 6e65 2c20  Subtotals(None, 
+0000e830: 7661 6c69 645f 656c 656d 656e 7473 5f29  valid_elements_)
+0000e840: 0a0a 2020 2020 2020 2020 7375 6274 6f74  ..        subtot
+0000e850: 616c 5f6f 626a 7320 3d20 7375 6274 6f74  al_objs = subtot
+0000e860: 616c 732e 5f73 7562 746f 7461 6c73 0a0a  als._subtotals..
+0000e870: 2020 2020 2020 2020 6173 7365 7274 205f          assert _
+0000e880: 5375 6274 6f74 616c 5f2e 6361 6c6c 5f61  Subtotal_.call_a
+0000e890: 7267 735f 6c69 7374 203d 3d20 5b0a 2020  rgs_list == [.  
+0000e8a0: 2020 2020 2020 2020 2020 6361 6c6c 2873            call(s
+0000e8b0: 7562 746f 7461 6c5f 6469 6374 735f 5b30  ubtotal_dicts_[0
+0000e8c0: 5d2c 2076 616c 6964 5f65 6c65 6d65 6e74  ], valid_element
+0000e8d0: 735f 2c20 3129 2c0a 2020 2020 2020 2020  s_, 1),.        
+0000e8e0: 2020 2020 6361 6c6c 2873 7562 746f 7461      call(subtota
+0000e8f0: 6c5f 6469 6374 735f 5b31 5d2c 2076 616c  l_dicts_[1], val
+0000e900: 6964 5f65 6c65 6d65 6e74 735f 2c20 3229  id_elements_, 2)
+0000e910: 2c0a 2020 2020 2020 2020 2020 2020 6361  ,.            ca
+0000e920: 6c6c 2873 7562 746f 7461 6c5f 6469 6374  ll(subtotal_dict
+0000e930: 735f 5b32 5d2c 2076 616c 6964 5f65 6c65  s_[2], valid_ele
+0000e940: 6d65 6e74 735f 2c20 3329 2c0a 2020 2020  ments_, 3),.    
+0000e950: 2020 2020 5d0a 2020 2020 2020 2020 6173      ].        as
+0000e960: 7365 7274 2073 7562 746f 7461 6c5f 6f62  sert subtotal_ob
+0000e970: 6a73 203d 3d20 7375 6274 6f74 616c 5f6f  js == subtotal_o
+0000e980: 626a 735f 0a0a 2020 2020 2320 6669 7874  bjs_..    # fixt
+0000e990: 7572 6520 636f 6d70 6f6e 656e 7473 202d  ure components -
+0000e9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e9b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e9c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2020  ------------..  
+0000e9d0: 2020 4070 7974 6573 742e 6669 7874 7572    @pytest.fixtur
+0000e9e0: 650a 2020 2020 6465 6620 5f65 6c65 6d65  e.    def _eleme
+0000e9f0: 6e74 5f69 6473 5f70 726f 705f 2873 656c  nt_ids_prop_(sel
+0000ea00: 662c 2072 6571 7565 7374 293a 0a20 2020  f, request):.   
+0000ea10: 2020 2020 2072 6574 7572 6e20 7072 6f70       return prop
+0000ea20: 6572 7479 5f6d 6f63 6b28 7265 7175 6573  erty_mock(reques
+0000ea30: 742c 205f 5375 6274 6f74 616c 732c 2022  t, _Subtotals, "
+0000ea40: 5f65 6c65 6d65 6e74 5f69 6473 2229 0a0a  _element_ids")..
+0000ea50: 2020 2020 4070 7974 6573 742e 6669 7874      @pytest.fixt
+0000ea60: 7572 650a 2020 2020 6465 6620 5f69 7465  ure.    def _ite
+0000ea70: 725f 7661 6c69 645f 7375 6274 6f74 616c  r_valid_subtotal
+0000ea80: 5f64 6963 7473 5f28 7365 6c66 2c20 7265  _dicts_(self, re
+0000ea90: 7175 6573 7429 3a0a 2020 2020 2020 2020  quest):.        
+0000eaa0: 7265 7475 726e 206d 6574 686f 645f 6d6f  return method_mo
+0000eab0: 636b 2872 6571 7565 7374 2c20 5f53 7562  ck(request, _Sub
+0000eac0: 746f 7461 6c73 2c20 225f 6974 6572 5f76  totals, "_iter_v
+0000ead0: 616c 6964 5f73 7562 746f 7461 6c5f 6469  alid_subtotal_di
+0000eae0: 6374 7322 290a 0a20 2020 2040 7079 7465  cts")..    @pyte
+0000eaf0: 7374 2e66 6978 7475 7265 0a20 2020 2064  st.fixture.    d
+0000eb00: 6566 205f 5375 6274 6f74 616c 5f28 7365  ef _Subtotal_(se
+0000eb10: 6c66 2c20 7265 7175 6573 7429 3a0a 2020  lf, request):.  
+0000eb20: 2020 2020 2020 7265 7475 726e 2063 6c61        return cla
+0000eb30: 7373 5f6d 6f63 6b28 7265 7175 6573 742c  ss_mock(request,
+0000eb40: 2022 6372 2e63 7562 652e 6469 6d65 6e73   "cr.cube.dimens
+0000eb50: 696f 6e2e 5f53 7562 746f 7461 6c22 290a  ion._Subtotal").
+0000eb60: 0a20 2020 2040 7079 7465 7374 2e66 6978  .    @pytest.fix
+0000eb70: 7475 7265 0a20 2020 2064 6566 205f 7375  ture.    def _su
+0000eb80: 6274 6f74 616c 735f 7072 6f70 5f28 7365  btotals_prop_(se
+0000eb90: 6c66 2c20 7265 7175 6573 7429 3a0a 2020  lf, request):.  
+0000eba0: 2020 2020 2020 7265 7475 726e 2070 726f        return pro
+0000ebb0: 7065 7274 795f 6d6f 636b 2872 6571 7565  perty_mock(reque
+0000ebc0: 7374 2c20 5f53 7562 746f 7461 6c73 2c20  st, _Subtotals, 
+0000ebd0: 225f 7375 6274 6f74 616c 7322 290a 0a20  "_subtotals").. 
+0000ebe0: 2020 2040 7079 7465 7374 2e66 6978 7475     @pytest.fixtu
+0000ebf0: 7265 0a20 2020 2064 6566 2076 616c 6964  re.    def valid
+0000ec00: 5f65 6c65 6d65 6e74 735f 2873 656c 662c  _elements_(self,
+0000ec10: 2072 6571 7565 7374 293a 0a20 2020 2020   request):.     
+0000ec20: 2020 2072 6574 7572 6e20 696e 7374 616e     return instan
+0000ec30: 6365 5f6d 6f63 6b28 7265 7175 6573 742c  ce_mock(request,
+0000ec40: 205f 5661 6c69 6445 6c65 6d65 6e74 7329   _ValidElements)
+0000ec50: 0a0a 0a63 6c61 7373 2044 6573 6372 6962  ...class Describ
+0000ec60: 655f 5375 6274 6f74 616c 3a0a 2020 2020  e_Subtotal:.    
+0000ec70: 2222 2255 6e69 742d 7465 7374 2073 7569  """Unit-test sui
+0000ec80: 7465 2066 6f72 2060 6372 2e63 7562 652e  te for `cr.cube.
+0000ec90: 6469 6d65 6e73 696f 6e2e 5f53 7562 746f  dimension._Subto
+0000eca0: 7461 6c60 206f 626a 6563 742e 2222 220a  tal` object.""".
+0000ecb0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000ecc0: 6b2e 7061 7261 6d65 7472 697a 6528 0a20  k.parametrize(. 
+0000ecd0: 2020 2020 2020 2022 7375 6274 6f74 616c         "subtotal
+0000ece0: 5f64 6963 742c 2061 6464 656e 645f 6964  _dict, addend_id
+0000ecf0: 732c 2065 7870 6563 7465 645f 7661 6c75  s, expected_valu
+0000ed00: 6522 2c0a 2020 2020 2020 2020 280a 2020  e",.        (.  
+0000ed10: 2020 2020 2020 2020 2020 287b 2261 7267            ({"arg
+0000ed20: 7322 3a20 5b5d 7d2c 2028 292c 205b 5d29  s": []}, (), [])
+0000ed30: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000ed40: 2261 7267 7322 3a20 5b31 2c20 325d 7d2c  "args": [1, 2]},
+0000ed50: 2028 312c 2032 292c 205b 302c 2031 5d29   (1, 2), [0, 1])
+0000ed60: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000ed70: 2261 7267 7322 3a20 5b30 2c20 325d 7d2c  "args": [0, 2]},
+0000ed80: 2028 312c 2032 292c 205b 302c 2031 5d29   (1, 2), [0, 1])
+0000ed90: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000eda0: 2261 7267 7322 3a20 5b33 2c20 345d 7d2c  "args": [3, 4]},
+0000edb0: 2028 332c 2034 292c 205b 322c 2033 5d29   (3, 4), [2, 3])
+0000edc0: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000edd0: 2261 7267 7322 3a20 5b34 2c20 3939 5d7d  "args": [4, 99]}
+0000ede0: 2c20 2834 2c20 3939 292c 205b 332c 2034  , (4, 99), [3, 4
+0000edf0: 5d29 2c0a 2020 2020 2020 2020 292c 0a20  ]),.        ),. 
+0000ee00: 2020 2029 0a20 2020 2064 6566 2069 745f     ).    def it_
+0000ee10: 6b6e 6f77 735f 7468 655f 6164 6465 6e64  knows_the_addend
+0000ee20: 5f69 6478 7328 0a20 2020 2020 2020 2073  _idxs(.        s
+0000ee30: 656c 662c 0a20 2020 2020 2020 2061 6464  elf,.        add
+0000ee40: 656e 645f 6964 735f 2c0a 2020 2020 2020  end_ids_,.      
+0000ee50: 2020 616c 6c5f 656c 656d 656e 7473 5f2c    all_elements_,
+0000ee60: 0a20 2020 2020 2020 2076 616c 6964 5f65  .        valid_e
+0000ee70: 6c65 6d65 6e74 735f 2c0a 2020 2020 2020  lements_,.      
+0000ee80: 2020 7375 6274 6f74 616c 5f64 6963 742c    subtotal_dict,
+0000ee90: 0a20 2020 2020 2020 2061 6464 656e 645f  .        addend_
+0000eea0: 6964 732c 0a20 2020 2020 2020 2065 7870  ids,.        exp
+0000eeb0: 6563 7465 645f 7661 6c75 652c 0a20 2020  ected_value,.   
+0000eec0: 2029 3a0a 2020 2020 2020 2020 6164 6465   ):.        adde
+0000eed0: 6e64 5f69 6473 5f2e 7265 7475 726e 5f76  nd_ids_.return_v
+0000eee0: 616c 7565 203d 2061 6464 656e 645f 6964  alue = addend_id
+0000eef0: 730a 2020 2020 2020 2020 656c 656d 656e  s.        elemen
+0000ef00: 7473 5f20 3d20 280a 2020 2020 2020 2020  ts_ = (.        
+0000ef10: 2020 2020 5f45 6c65 6d65 6e74 287b 2269      _Element({"i
+0000ef20: 6422 3a20 317d 2c20 4e6f 6e65 2c20 4e6f  d": 1}, None, No
+0000ef30: 6e65 292c 0a20 2020 2020 2020 2020 2020  ne),.           
+0000ef40: 205f 456c 656d 656e 7428 7b22 6964 223a   _Element({"id":
+0000ef50: 2032 7d2c 204e 6f6e 652c 204e 6f6e 6529   2}, None, None)
+0000ef60: 2c0a 2020 2020 2020 2020 2020 2020 5f45  ,.            _E
+0000ef70: 6c65 6d65 6e74 287b 2269 6422 3a20 337d  lement({"id": 3}
+0000ef80: 2c20 4e6f 6e65 2c20 4e6f 6e65 292c 0a20  , None, None),. 
+0000ef90: 2020 2020 2020 2020 2020 205f 456c 656d             _Elem
+0000efa0: 656e 7428 7b22 6964 223a 2034 7d2c 204e  ent({"id": 4}, N
+0000efb0: 6f6e 652c 204e 6f6e 6529 2c0a 2020 2020  one, None),.    
+0000efc0: 2020 2020 2020 2020 5f45 6c65 6d65 6e74          _Element
+0000efd0: 287b 2269 6422 3a20 3939 7d2c 204e 6f6e  ({"id": 99}, Non
+0000efe0: 652c 204e 6f6e 6529 2c0a 2020 2020 2020  e, None),.      
+0000eff0: 2020 290a 2020 2020 2020 2020 616c 6c5f    ).        all_
+0000f000: 656c 656d 656e 7473 5f2e 5f5f 6974 6572  elements_.__iter
+0000f010: 5f5f 2e72 6574 7572 6e5f 7661 6c75 6520  __.return_value 
+0000f020: 3d20 6974 6572 2865 6c65 6d65 6e74 735f  = iter(elements_
+0000f030: 290a 2020 2020 2020 2020 7661 6c69 645f  ).        valid_
+0000f040: 656c 656d 656e 7473 203d 205f 5661 6c69  elements = _Vali
+0000f050: 6445 6c65 6d65 6e74 7328 616c 6c5f 656c  dElements(all_el
+0000f060: 656d 656e 7473 5f2c 204e 6f6e 6529 0a20  ements_, None). 
+0000f070: 2020 2020 2020 2073 7562 746f 7461 6c20         subtotal 
+0000f080: 3d20 5f53 7562 746f 7461 6c28 7375 6274  = _Subtotal(subt
+0000f090: 6f74 616c 5f64 6963 742c 2076 616c 6964  otal_dict, valid
+0000f0a0: 5f65 6c65 6d65 6e74 732c 204e 6f6e 6529  _elements, None)
+0000f0b0: 0a0a 2020 2020 2020 2020 6164 6465 6e64  ..        addend
+0000f0c0: 5f69 6478 7320 3d20 7375 6274 6f74 616c  _idxs = subtotal
+0000f0d0: 2e61 6464 656e 645f 6964 7873 0a0a 2020  .addend_idxs..  
+0000f0e0: 2020 2020 2020 6e70 2e74 6573 7469 6e67        np.testing
+0000f0f0: 2e61 7373 6572 745f 6172 7261 795f 616c  .assert_array_al
+0000f100: 6d6f 7374 5f65 7175 616c 2861 6464 656e  most_equal(adden
+0000f110: 645f 6964 7873 2c20 6578 7065 6374 6564  d_idxs, expected
+0000f120: 5f76 616c 7565 290a 0a20 2020 2040 7079  _value)..    @py
+0000f130: 7465 7374 2e6d 6172 6b2e 7061 7261 6d65  test.mark.parame
+0000f140: 7472 697a 6528 0a20 2020 2020 2020 2022  trize(.        "
+0000f150: 7375 6274 6f74 616c 5f64 6963 742c 2065  subtotal_dict, e
+0000f160: 6c65 6d65 6e74 5f69 6473 2c20 6578 7065  lement_ids, expe
+0000f170: 6374 6564 5f76 616c 7565 222c 0a20 2020  cted_value",.   
+0000f180: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+0000f190: 2020 2028 7b22 616e 6368 6f72 223a 2031     ({"anchor": 1
+0000f1a0: 7d2c 207b 312c 2032 2c20 337d 2c20 3129  }, {1, 2, 3}, 1)
+0000f1b0: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000f1c0: 2261 6e63 686f 7222 3a20 347d 2c20 7b31  "anchor": 4}, {1
+0000f1d0: 2c20 322c 2033 7d2c 2022 626f 7474 6f6d  , 2, 3}, "bottom
+0000f1e0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0000f1f0: 287b 2261 6e63 686f 7222 3a20 2254 6f70  ({"anchor": "Top
+0000f200: 227d 2c20 7b31 2c20 322c 2033 7d2c 2022  "}, {1, 2, 3}, "
+0000f210: 746f 7022 292c 0a20 2020 2020 2020 2020  top"),.         
+0000f220: 2020 2023 2046 6f72 2061 6e20 756e 6465     # For an unde
+0000f230: 6669 6e65 6420 616e 6368 6f72 2064 6566  fined anchor def
+0000f240: 6175 6c74 2074 6f20 2262 6f74 746f 6d22  ault to "bottom"
+0000f250: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000f260: 616e 6368 6f72 223a 204e 6f6e 657d 2c20  anchor": None}, 
+0000f270: 7b31 2c20 322c 2033 7d2c 2022 626f 7474  {1, 2, 3}, "bott
+0000f280: 6f6d 2229 2c0a 2020 2020 2020 2020 292c  om"),.        ),
+0000f290: 0a20 2020 2029 0a20 2020 2064 6566 2069  .    ).    def i
+0000f2a0: 745f 6b6e 6f77 735f 7468 655f 696e 7365  t_knows_the_inse
+0000f2b0: 7274 696f 6e5f 616e 6368 6f72 280a 2020  rtion_anchor(.  
+0000f2c0: 2020 2020 2020 7365 6c66 2c20 7375 6274        self, subt
+0000f2d0: 6f74 616c 5f64 6963 742c 2065 6c65 6d65  otal_dict, eleme
+0000f2e0: 6e74 5f69 6473 2c20 6578 7065 6374 6564  nt_ids, expected
+0000f2f0: 5f76 616c 7565 2c20 7661 6c69 645f 656c  _value, valid_el
+0000f300: 656d 656e 7473 5f0a 2020 2020 293a 0a20  ements_.    ):. 
+0000f310: 2020 2020 2020 2076 616c 6964 5f65 6c65         valid_ele
+0000f320: 6d65 6e74 735f 2e65 6c65 6d65 6e74 5f69  ments_.element_i
+0000f330: 6473 203d 2065 6c65 6d65 6e74 5f69 6473  ds = element_ids
+0000f340: 0a20 2020 2020 2020 2073 7562 746f 7461  .        subtota
+0000f350: 6c20 3d20 5f53 7562 746f 7461 6c28 7375  l = _Subtotal(su
+0000f360: 6274 6f74 616c 5f64 6963 742c 2076 616c  btotal_dict, val
+0000f370: 6964 5f65 6c65 6d65 6e74 735f 2c20 4e6f  id_elements_, No
+0000f380: 6e65 290a 0a20 2020 2020 2020 2061 7373  ne)..        ass
+0000f390: 6572 7420 7375 6274 6f74 616c 2e61 6e63  ert subtotal.anc
+0000f3a0: 686f 7220 3d3d 2065 7870 6563 7465 645f  hor == expected_
+0000f3b0: 7661 6c75 650a 0a20 2020 2040 7079 7465  value..    @pyte
+0000f3c0: 7374 2e6d 6172 6b2e 7061 7261 6d65 7472  st.mark.parametr
+0000f3d0: 697a 6528 0a20 2020 2020 2020 2022 7375  ize(.        "su
+0000f3e0: 6274 6f74 616c 5f64 6963 742c 2065 6c65  btotal_dict, ele
+0000f3f0: 6d65 6e74 5f69 6473 2c20 6578 7065 6374  ment_ids, expect
+0000f400: 6564 5f76 616c 7565 222c 0a20 2020 2020  ed_value",.     
+0000f410: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+0000f420: 2028 7b7d 2c20 7b7d 2c20 2829 292c 0a20   ({}, {}, ()),. 
+0000f430: 2020 2020 2020 2020 2020 2028 7b22 6172             ({"ar
+0000f440: 6773 223a 205b 315d 7d2c 207b 317d 2c20  gs": [1]}, {1}, 
+0000f450: 2831 2c29 292c 0a20 2020 2020 2020 2020  (1,)),.         
+0000f460: 2020 2028 7b22 6172 6773 223a 205b 312c     ({"args": [1,
+0000f470: 2032 2c20 335d 7d2c 207b 312c 2032 2c20   2, 3]}, {1, 2, 
+0000f480: 337d 2c20 2831 2c20 322c 2033 2929 2c0a  3}, (1, 2, 3)),.
+0000f490: 2020 2020 2020 2020 2020 2020 287b 2261              ({"a
+0000f4a0: 7267 7322 3a20 5b31 2c20 322c 2033 5d7d  rgs": [1, 2, 3]}
+0000f4b0: 2c20 7b31 2c20 337d 2c20 2831 2c20 3329  , {1, 3}, (1, 3)
+0000f4c0: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+0000f4d0: 7b22 6172 6773 223a 205b 332c 2032 5d7d  {"args": [3, 2]}
+0000f4e0: 2c20 7b31 2c20 322c 2033 7d2c 2028 332c  , {1, 2, 3}, (3,
+0000f4f0: 2032 2929 2c0a 2020 2020 2020 2020 2020   2)),.          
+0000f500: 2020 287b 2261 7267 7322 3a20 5b5d 7d2c    ({"args": []},
+0000f510: 207b 312c 2032 2c20 337d 2c20 2829 292c   {1, 2, 3}, ()),
+0000f520: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000f530: 6172 6773 223a 205b 312c 2032 2c20 335d  args": [1, 2, 3]
+0000f540: 7d2c 207b 7d2c 2028 2929 2c0a 2020 2020  }, {}, ()),.    
+0000f550: 2020 2020 2020 2020 287b 226b 7761 7267          ({"kwarg
+0000f560: 7322 3a20 7b22 706f 7369 7469 7665 223a  s": {"positive":
+0000f570: 205b 312c 2032 2c20 335d 7d7d 2c20 7b31   [1, 2, 3]}}, {1
+0000f580: 2c20 322c 2033 7d2c 2028 312c 2032 2c20  , 2, 3}, (1, 2, 
+0000f590: 3329 292c 0a20 2020 2020 2020 2020 2020  3)),.           
+0000f5a0: 2028 7b22 6172 6773 223a 205b 315d 2c20   ({"args": [1], 
+0000f5b0: 226b 7761 7267 7322 3a20 7b22 706f 7369  "kwargs": {"posi
+0000f5c0: 7469 7665 223a 205b 325d 7d7d 2c20 7b31  tive": [2]}}, {1
+0000f5d0: 2c20 322c 2033 7d2c 2028 322c 2929 2c0a  , 2, 3}, (2,)),.
+0000f5e0: 2020 2020 2020 2020 292c 0a20 2020 2029          ),.    )
+0000f5f0: 0a20 2020 2064 6566 2069 745f 7072 6f76  .    def it_prov
+0000f600: 6964 6573 5f61 6363 6573 735f 746f 5f74  ides_access_to_t
+0000f610: 6865 5f61 6464 656e 645f 656c 656d 656e  he_addend_elemen
+0000f620: 745f 6964 7328 0a20 2020 2020 2020 2073  t_ids(.        s
+0000f630: 656c 662c 2073 7562 746f 7461 6c5f 6469  elf, subtotal_di
+0000f640: 6374 2c20 656c 656d 656e 745f 6964 732c  ct, element_ids,
+0000f650: 2065 7870 6563 7465 645f 7661 6c75 652c   expected_value,
+0000f660: 2076 616c 6964 5f65 6c65 6d65 6e74 735f   valid_elements_
+0000f670: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000f680: 7661 6c69 645f 656c 656d 656e 7473 5f2e  valid_elements_.
+0000f690: 656c 656d 656e 745f 6964 7320 3d20 656c  element_ids = el
+0000f6a0: 656d 656e 745f 6964 730a 2020 2020 2020  ement_ids.      
+0000f6b0: 2020 7375 6274 6f74 616c 203d 205f 5375    subtotal = _Su
+0000f6c0: 6274 6f74 616c 2873 7562 746f 7461 6c5f  btotal(subtotal_
+0000f6d0: 6469 6374 2c20 7661 6c69 645f 656c 656d  dict, valid_elem
+0000f6e0: 656e 7473 5f2c 204e 6f6e 6529 0a0a 2020  ents_, None)..  
+0000f6f0: 2020 2020 2020 6173 7365 7274 2073 7562        assert sub
+0000f700: 746f 7461 6c2e 6164 6465 6e64 5f69 6473  total.addend_ids
+0000f710: 203d 3d20 6578 7065 6374 6564 5f76 616c   == expected_val
+0000f720: 7565 0a0a 2020 2020 6465 6620 6974 5f6b  ue..    def it_k
+0000f730: 6e6f 7773 5f69 7473 5f69 6e73 6572 7469  nows_its_inserti
+0000f740: 6f6e 5f69 645f 7768 656e 5f69 745f 6861  on_id_when_it_ha
+0000f750: 735f 6265 656e 5f61 7373 6967 6e65 645f  s_been_assigned_
+0000f760: 6f6e 6528 7365 6c66 293a 0a20 2020 2020  one(self):.     
+0000f770: 2020 2061 7373 6572 7420 5f53 7562 746f     assert _Subto
+0000f780: 7461 6c28 7b22 6964 223a 2034 327d 2c20  tal({"id": 42}, 
+0000f790: 4e6f 6e65 2c20 4e6f 6e65 292e 696e 7365  None, None).inse
+0000f7a0: 7274 696f 6e5f 6964 203d 3d20 3432 0a0a  rtion_id == 42..
+0000f7b0: 2020 2020 6465 6620 616e 645f 6974 5f75      def and_it_u
+0000f7c0: 7365 735f 6974 735f 6661 6c6c 6261 636b  ses_its_fallback
+0000f7d0: 5f69 6e73 6572 7469 6f6e 5f69 645f 7768  _insertion_id_wh
+0000f7e0: 656e 5f6e 6f74 5f61 7373 6967 6e65 645f  en_not_assigned_
+0000f7f0: 6f6e 6528 7365 6c66 293a 0a20 2020 2020  one(self):.     
+0000f800: 2020 2061 7373 6572 7420 5f53 7562 746f     assert _Subto
+0000f810: 7461 6c28 7b7d 2c20 4e6f 6e65 2c20 3234  tal({}, None, 24
+0000f820: 292e 696e 7365 7274 696f 6e5f 6964 203d  ).insertion_id =
+0000f830: 3d20 3234 0a0a 2020 2020 4070 7974 6573  = 24..    @pytes
+0000f840: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
+0000f850: 7a65 280a 2020 2020 2020 2020 2273 7562  ze(.        "sub
+0000f860: 746f 7461 6c5f 6469 6374 2c20 6578 7065  total_dict, expe
+0000f870: 6374 6564 5f76 616c 7565 222c 0a20 2020  cted_value",.   
+0000f880: 2020 2020 2028 287b 7d2c 2022 2229 2c20       (({}, ""), 
+0000f890: 287b 226e 616d 6522 3a20 4e6f 6e65 7d2c  ({"name": None},
+0000f8a0: 2022 2229 2c20 287b 226e 616d 6522 3a20   ""), ({"name": 
+0000f8b0: 2222 7d2c 2022 2229 2c20 287b 226e 616d  ""}, ""), ({"nam
+0000f8c0: 6522 3a20 224a 6f65 227d 2c20 224a 6f65  e": "Joe"}, "Joe
+0000f8d0: 2229 292c 0a20 2020 2029 0a20 2020 2064  ")),.    ).    d
+0000f8e0: 6566 2069 745f 6b6e 6f77 735f 7468 655f  ef it_knows_the_
+0000f8f0: 7375 6274 6f74 616c 5f6c 6162 656c 2873  subtotal_label(s
+0000f900: 656c 662c 2073 7562 746f 7461 6c5f 6469  elf, subtotal_di
+0000f910: 6374 2c20 6578 7065 6374 6564 5f76 616c  ct, expected_val
+0000f920: 7565 293a 0a20 2020 2020 2020 2061 7373  ue):.        ass
+0000f930: 6572 7420 5f53 7562 746f 7461 6c28 7375  ert _Subtotal(su
+0000f940: 6274 6f74 616c 5f64 6963 742c 204e 6f6e  btotal_dict, Non
+0000f950: 652c 204e 6f6e 6529 2e6c 6162 656c 203d  e, None).label =
+0000f960: 3d20 6578 7065 6374 6564 5f76 616c 7565  = expected_value
+0000f970: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+0000f980: 726b 2e70 6172 616d 6574 7269 7a65 280a  rk.parametrize(.
+0000f990: 2020 2020 2020 2020 2273 7562 746f 7461          "subtota
+0000f9a0: 6c5f 6469 6374 2c20 656c 656d 656e 745f  l_dict, element_
+0000f9b0: 6964 732c 2065 7870 6563 7465 645f 7661  ids, expected_va
+0000f9c0: 6c75 6522 2c0a 2020 2020 2020 2020 280a  lue",.        (.
+0000f9d0: 2020 2020 2020 2020 2020 2020 287b 7d2c              ({},
+0000f9e0: 207b 7d2c 2028 2929 2c0a 2020 2020 2020   {}, ()),.      
+0000f9f0: 2020 2020 2020 287b 226b 7761 7267 7322        ({"kwargs"
+0000fa00: 3a20 7b22 6e65 6761 7469 7665 223a 205b  : {"negative": [
+0000fa10: 315d 7d7d 2c20 7b31 7d2c 2028 312c 2929  1]}}, {1}, (1,))
+0000fa20: 2c0a 2020 2020 2020 2020 2020 2020 287b  ,.            ({
+0000fa30: 226b 7761 7267 7322 3a20 7b22 6e65 6761  "kwargs": {"nega
+0000fa40: 7469 7665 223a 205b 312c 2032 2c20 335d  tive": [1, 2, 3]
+0000fa50: 7d7d 2c20 7b31 2c20 322c 2033 7d2c 2028  }}, {1, 2, 3}, (
+0000fa60: 312c 2032 2c20 3329 292c 0a20 2020 2020  1, 2, 3)),.     
+0000fa70: 2020 2020 2020 2028 7b22 6b77 6172 6773         ({"kwargs
+0000fa80: 223a 207b 226e 6567 6174 6976 6522 3a20  ": {"negative": 
+0000fa90: 5b31 2c20 322c 2033 5d7d 7d2c 207b 312c  [1, 2, 3]}}, {1,
+0000faa0: 2033 7d2c 2028 312c 2033 2929 2c0a 2020   3}, (1, 3)),.  
+0000fab0: 2020 2020 2020 2020 2020 287b 226b 7761            ({"kwa
+0000fac0: 7267 7322 3a20 7b22 6e65 6761 7469 7665  rgs": {"negative
+0000fad0: 223a 205b 332c 2032 5d7d 7d2c 207b 312c  ": [3, 2]}}, {1,
+0000fae0: 2032 2c20 337d 2c20 2833 2c20 3229 292c   2, 3}, (3, 2)),
+0000faf0: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0000fb00: 6b77 6172 6773 223a 207b 226e 6567 6174  kwargs": {"negat
+0000fb10: 6976 6522 3a20 5b5d 7d7d 2c20 7b31 2c20  ive": []}}, {1, 
+0000fb20: 322c 2033 7d2c 2028 2929 2c0a 2020 2020  2, 3}, ()),.    
+0000fb30: 2020 2020 2020 2020 287b 226b 7761 7267          ({"kwarg
+0000fb40: 7322 3a20 7b22 6e65 6761 7469 7665 223a  s": {"negative":
+0000fb50: 205b 312c 2032 2c20 335d 7d7d 2c20 7b7d   [1, 2, 3]}}, {}
+0000fb60: 2c20 2829 292c 0a20 2020 2020 2020 2029  , ()),.        )
+0000fb70: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
+0000fb80: 6974 5f70 726f 7669 6465 735f 6163 6365  it_provides_acce
+0000fb90: 7373 5f74 6f5f 7468 655f 7375 6274 7261  ss_to_the_subtra
+0000fba0: 6865 6e64 5f65 6c65 6d65 6e74 5f69 6473  hend_element_ids
+0000fbb0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0000fbc0: 7375 6274 6f74 616c 5f64 6963 742c 2065  subtotal_dict, e
+0000fbd0: 6c65 6d65 6e74 5f69 6473 2c20 6578 7065  lement_ids, expe
+0000fbe0: 6374 6564 5f76 616c 7565 2c20 7661 6c69  cted_value, vali
+0000fbf0: 645f 656c 656d 656e 7473 5f0a 2020 2020  d_elements_.    
+0000fc00: 293a 0a20 2020 2020 2020 2076 616c 6964  ):.        valid
+0000fc10: 5f65 6c65 6d65 6e74 735f 2e65 6c65 6d65  _elements_.eleme
+0000fc20: 6e74 5f69 6473 203d 2065 6c65 6d65 6e74  nt_ids = element
+0000fc30: 5f69 6473 0a20 2020 2020 2020 2073 7562  _ids.        sub
+0000fc40: 746f 7461 6c20 3d20 5f53 7562 746f 7461  total = _Subtota
+0000fc50: 6c28 7375 6274 6f74 616c 5f64 6963 742c  l(subtotal_dict,
+0000fc60: 2076 616c 6964 5f65 6c65 6d65 6e74 735f   valid_elements_
+0000fc70: 2c20 4e6f 6e65 290a 0a20 2020 2020 2020  , None)..       
+0000fc80: 2061 7373 6572 7420 7375 6274 6f74 616c   assert subtotal
+0000fc90: 2e73 7562 7472 6168 656e 645f 6964 7320  .subtrahend_ids 
+0000fca0: 3d3d 2065 7870 6563 7465 645f 7661 6c75  == expected_valu
+0000fcb0: 650a 0a20 2020 2040 7079 7465 7374 2e6d  e..    @pytest.m
+0000fcc0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
+0000fcd0: 0a20 2020 2020 2020 2022 7375 6274 6f74  .        "subtot
+0000fce0: 616c 5f64 6963 742c 2073 7562 7472 6168  al_dict, subtrah
+0000fcf0: 656e 645f 6964 732c 2065 7870 6563 7465  end_ids, expecte
+0000fd00: 645f 7661 6c75 6522 2c0a 2020 2020 2020  d_value",.      
+0000fd10: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0000fd20: 287b 226b 7761 7267 7322 3a20 7b22 6e65  ({"kwargs": {"ne
+0000fd30: 6761 7469 7665 223a 205b 5d7d 7d2c 2028  gative": []}}, (
+0000fd40: 292c 205b 5d29 2c0a 2020 2020 2020 2020  ), []),.        
+0000fd50: 2020 2020 287b 226b 7761 7267 7322 3a20      ({"kwargs": 
+0000fd60: 7b22 6e65 6761 7469 7665 223a 205b 312c  {"negative": [1,
+0000fd70: 2032 5d7d 7d2c 2028 312c 2032 292c 205b   2]}}, (1, 2), [
+0000fd80: 302c 2031 5d29 2c0a 2020 2020 2020 2020  0, 1]),.        
+0000fd90: 2020 2020 287b 226b 7761 7267 7322 3a20      ({"kwargs": 
+0000fda0: 7b22 6e65 6761 7469 7665 223a 205b 302c  {"negative": [0,
+0000fdb0: 2032 5d7d 7d2c 2028 312c 2032 292c 205b   2]}}, (1, 2), [
+0000fdc0: 302c 2031 5d29 2c0a 2020 2020 2020 2020  0, 1]),.        
+0000fdd0: 2020 2020 287b 226b 7761 7267 7322 3a20      ({"kwargs": 
+0000fde0: 7b22 6e65 6761 7469 7665 223a 205b 332c  {"negative": [3,
+0000fdf0: 2034 5d7d 7d2c 2028 332c 2034 292c 205b   4]}}, (3, 4), [
+0000fe00: 322c 2033 5d29 2c0a 2020 2020 2020 2020  2, 3]),.        
+0000fe10: 2020 2020 287b 226b 7761 7267 7322 3a20      ({"kwargs": 
+0000fe20: 7b22 6e65 6761 7469 7665 223a 205b 342c  {"negative": [4,
+0000fe30: 2039 395d 7d7d 2c20 2834 2c20 3939 292c   99]}}, (4, 99),
+0000fe40: 205b 332c 2034 5d29 2c0a 2020 2020 2020   [3, 4]),.      
+0000fe50: 2020 292c 0a20 2020 2029 0a20 2020 2064    ),.    ).    d
+0000fe60: 6566 2069 745f 6b6e 6f77 735f 7468 655f  ef it_knows_the_
+0000fe70: 7375 6274 7261 6865 6e64 5f69 6478 7328  subtrahend_idxs(
+0000fe80: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+0000fe90: 2020 2020 2020 2073 7562 7472 6168 656e         subtrahen
+0000fea0: 645f 6964 735f 2c0a 2020 2020 2020 2020  d_ids_,.        
+0000feb0: 616c 6c5f 656c 656d 656e 7473 5f2c 0a20  all_elements_,. 
+0000fec0: 2020 2020 2020 2076 616c 6964 5f65 6c65         valid_ele
+0000fed0: 6d65 6e74 735f 2c0a 2020 2020 2020 2020  ments_,.        
+0000fee0: 7375 6274 6f74 616c 5f64 6963 742c 0a20  subtotal_dict,. 
+0000fef0: 2020 2020 2020 2073 7562 7472 6168 656e         subtrahen
+0000ff00: 645f 6964 732c 0a20 2020 2020 2020 2065  d_ids,.        e
+0000ff10: 7870 6563 7465 645f 7661 6c75 652c 0a20  xpected_value,. 
+0000ff20: 2020 2029 3a0a 2020 2020 2020 2020 7375     ):.        su
+0000ff30: 6274 7261 6865 6e64 5f69 6473 5f2e 7265  btrahend_ids_.re
+0000ff40: 7475 726e 5f76 616c 7565 203d 2073 7562  turn_value = sub
+0000ff50: 7472 6168 656e 645f 6964 730a 2020 2020  trahend_ids.    
+0000ff60: 2020 2020 656c 656d 656e 7473 5f20 3d20      elements_ = 
+0000ff70: 280a 2020 2020 2020 2020 2020 2020 5f45  (.            _E
+0000ff80: 6c65 6d65 6e74 287b 2269 6422 3a20 317d  lement({"id": 1}
+0000ff90: 2c20 4e6f 6e65 2c20 4e6f 6e65 292c 0a20  , None, None),. 
+0000ffa0: 2020 2020 2020 2020 2020 205f 456c 656d             _Elem
+0000ffb0: 656e 7428 7b22 6964 223a 2032 7d2c 204e  ent({"id": 2}, N
+0000ffc0: 6f6e 652c 204e 6f6e 6529 2c0a 2020 2020  one, None),.    
+0000ffd0: 2020 2020 2020 2020 5f45 6c65 6d65 6e74          _Element
+0000ffe0: 287b 2269 6422 3a20 337d 2c20 4e6f 6e65  ({"id": 3}, None
+0000fff0: 2c20 4e6f 6e65 292c 0a20 2020 2020 2020  , None),.       
+00010000: 2020 2020 205f 456c 656d 656e 7428 7b22       _Element({"
+00010010: 6964 223a 2034 7d2c 204e 6f6e 652c 204e  id": 4}, None, N
+00010020: 6f6e 6529 2c0a 2020 2020 2020 2020 2020  one),.          
+00010030: 2020 5f45 6c65 6d65 6e74 287b 2269 6422    _Element({"id"
+00010040: 3a20 3939 7d2c 204e 6f6e 652c 204e 6f6e  : 99}, None, Non
+00010050: 6529 2c0a 2020 2020 2020 2020 290a 2020  e),.        ).  
+00010060: 2020 2020 2020 616c 6c5f 656c 656d 656e        all_elemen
+00010070: 7473 5f2e 5f5f 6974 6572 5f5f 2e72 6574  ts_.__iter__.ret
+00010080: 7572 6e5f 7661 6c75 6520 3d20 6974 6572  urn_value = iter
+00010090: 2865 6c65 6d65 6e74 735f 290a 2020 2020  (elements_).    
+000100a0: 2020 2020 7661 6c69 645f 656c 656d 656e      valid_elemen
+000100b0: 7473 203d 205f 5661 6c69 6445 6c65 6d65  ts = _ValidEleme
+000100c0: 6e74 7328 616c 6c5f 656c 656d 656e 7473  nts(all_elements
+000100d0: 5f2c 204e 6f6e 6529 0a20 2020 2020 2020  _, None).       
+000100e0: 2073 7562 746f 7461 6c20 3d20 5f53 7562   subtotal = _Sub
+000100f0: 746f 7461 6c28 7375 6274 6f74 616c 5f64  total(subtotal_d
+00010100: 6963 742c 2076 616c 6964 5f65 6c65 6d65  ict, valid_eleme
+00010110: 6e74 732c 204e 6f6e 6529 0a0a 2020 2020  nts, None)..    
+00010120: 2020 2020 7375 6274 7261 6865 6e64 5f69      subtrahend_i
+00010130: 6478 7320 3d20 7375 6274 6f74 616c 2e73  dxs = subtotal.s
+00010140: 7562 7472 6168 656e 645f 6964 7873 0a0a  ubtrahend_idxs..
+00010150: 2020 2020 2020 2020 6e70 2e74 6573 7469          np.testi
+00010160: 6e67 2e61 7373 6572 745f 6172 7261 795f  ng.assert_array_
+00010170: 616c 6d6f 7374 5f65 7175 616c 2873 7562  almost_equal(sub
+00010180: 7472 6168 656e 645f 6964 7873 2c20 6578  trahend_idxs, ex
+00010190: 7065 6374 6564 5f76 616c 7565 290a 0a20  pected_value).. 
+000101a0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+000101b0: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+000101c0: 2020 2020 2022 7375 6274 6f74 616c 5f64       "subtotal_d
+000101d0: 6963 742c 2065 7870 6563 7465 645f 6669  ict, expected_fi
+000101e0: 6c6c 222c 0a20 2020 2020 2020 2028 287b  ll",.        (({
+000101f0: 2266 696c 6c22 3a20 2266 616b 655f 6669  "fill": "fake_fi
+00010200: 6c6c 227d 2c20 2266 616b 655f 6669 6c6c  ll"}, "fake_fill
+00010210: 2229 2c20 287b 7d2c 204e 6f6e 6529 292c  "), ({}, None)),
+00010220: 0a20 2020 2029 0a20 2020 2064 6566 2069  .    ).    def i
+00010230: 745f 6b6e 6f77 735f 6974 735f 6669 6c6c  t_knows_its_fill
+00010240: 2873 656c 662c 2073 7562 746f 7461 6c5f  (self, subtotal_
+00010250: 6469 6374 2c20 6578 7065 6374 6564 5f66  dict, expected_f
+00010260: 696c 6c29 3a0a 2020 2020 2020 2020 7375  ill):.        su
+00010270: 6274 6f74 616c 203d 205f 5375 6274 6f74  btotal = _Subtot
+00010280: 616c 2873 7562 746f 7461 6c5f 6469 6374  al(subtotal_dict
+00010290: 2c20 4e6f 6e65 2c20 4e6f 6e65 290a 0a20  , None, None).. 
+000102a0: 2020 2020 2020 2066 696c 6c20 3d20 7375         fill = su
+000102b0: 6274 6f74 616c 2e66 696c 6c0a 0a20 2020  btotal.fill..   
+000102c0: 2020 2020 2061 7373 6572 7420 6669 6c6c       assert fill
+000102d0: 203d 3d20 6578 7065 6374 6564 5f66 696c   == expected_fil
+000102e0: 6c0a 0a20 2020 2023 2066 6978 7475 7265  l..    # fixture
+000102f0: 2063 6f6d 706f 6e65 6e74 7320 2d2d 2d2d   components ----
+00010300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010320: 2d2d 2d2d 2d2d 2d2d 2d0a 0a20 2020 2040  ---------..    @
+00010330: 7079 7465 7374 2e66 6978 7475 7265 0a20  pytest.fixture. 
+00010340: 2020 2064 6566 2061 6464 656e 645f 6964     def addend_id
+00010350: 735f 2873 656c 662c 2072 6571 7565 7374  s_(self, request
+00010360: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00010370: 6e20 7072 6f70 6572 7479 5f6d 6f63 6b28  n property_mock(
+00010380: 7265 7175 6573 742c 205f 5375 6274 6f74  request, _Subtot
+00010390: 616c 2c20 2261 6464 656e 645f 6964 7322  al, "addend_ids"
+000103a0: 290a 0a20 2020 2040 7079 7465 7374 2e66  )..    @pytest.f
+000103b0: 6978 7475 7265 0a20 2020 2064 6566 2061  ixture.    def a
+000103c0: 6c6c 5f65 6c65 6d65 6e74 735f 2873 656c  ll_elements_(sel
+000103d0: 662c 2072 6571 7565 7374 293a 0a20 2020  f, request):.   
+000103e0: 2020 2020 2072 6574 7572 6e20 696e 7374       return inst
+000103f0: 616e 6365 5f6d 6f63 6b28 7265 7175 6573  ance_mock(reques
+00010400: 742c 205f 416c 6c45 6c65 6d65 6e74 7329  t, _AllElements)
+00010410: 0a0a 2020 2020 4070 7974 6573 742e 6669  ..    @pytest.fi
+00010420: 7874 7572 650a 2020 2020 6465 6620 7375  xture.    def su
+00010430: 6274 7261 6865 6e64 5f69 6473 5f28 7365  btrahend_ids_(se
+00010440: 6c66 2c20 7265 7175 6573 7429 3a0a 2020  lf, request):.  
+00010450: 2020 2020 2020 7265 7475 726e 2070 726f        return pro
+00010460: 7065 7274 795f 6d6f 636b 2872 6571 7565  perty_mock(reque
+00010470: 7374 2c20 5f53 7562 746f 7461 6c2c 2022  st, _Subtotal, "
+00010480: 7375 6274 7261 6865 6e64 5f69 6473 2229  subtrahend_ids")
+00010490: 0a0a 2020 2020 4070 7974 6573 742e 6669  ..    @pytest.fi
+000104a0: 7874 7572 650a 2020 2020 6465 6620 7661  xture.    def va
+000104b0: 6c69 645f 656c 656d 656e 7473 5f28 7365  lid_elements_(se
+000104c0: 6c66 2c20 7265 7175 6573 7429 3a0a 2020  lf, request):.  
+000104d0: 2020 2020 2020 7265 7475 726e 2069 6e73        return ins
+000104e0: 7461 6e63 655f 6d6f 636b 2872 6571 7565  tance_mock(reque
+000104f0: 7374 2c20 5f56 616c 6964 456c 656d 656e  st, _ValidElemen
+00010500: 7473 290a                                ts).
```

### Comparing `cr.cube-3.0.8/tests/unit/matrix/test_assembler.py` & `cr.cube-3.0.9/tests/unit/matrix/test_assembler.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/matrix/test_cubemeasure.py` & `cr.cube-3.0.9/tests/unit/matrix/test_cubemeasure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/matrix/test_measure.py` & `cr.cube-3.0.9/tests/unit/matrix/test_measure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/matrix/test_subtotals.py` & `cr.cube-3.0.9/tests/unit/matrix/test_subtotals.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/stripe/test_assembler.py` & `cr.cube-3.0.9/tests/unit/stripe/test_assembler.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/stripe/test_cubemeasure.py` & `cr.cube-3.0.9/tests/unit/stripe/test_cubemeasure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/stripe/test_insertion.py` & `cr.cube-3.0.9/tests/unit/stripe/test_insertion.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/stripe/test_measure.py` & `cr.cube-3.0.9/tests/unit/stripe/test_measure.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_collator.py` & `cr.cube-3.0.9/tests/unit/test_collator.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_cube.py` & `cr.cube-3.0.9/tests/unit/test_cube.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_cubepart.py` & `cr.cube-3.0.9/tests/unit/test_cubepart.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_enum.py` & `cr.cube-3.0.9/tests/unit/test_enum.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_smoothing.py` & `cr.cube-3.0.9/tests/unit/test_smoothing.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unit/test_util.py` & `cr.cube-3.0.9/tests/unit/test_util.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/unitutil.py` & `cr.cube-3.0.9/tests/unitutil.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tests/util.py` & `cr.cube-3.0.9/tests/util.py`

 * *Files identical despite different names*

### Comparing `cr.cube-3.0.8/tox.ini` & `cr.cube-3.0.9/tox.ini`

 * *Files identical despite different names*

