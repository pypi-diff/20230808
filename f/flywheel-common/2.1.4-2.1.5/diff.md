# Comparing `tmp/flywheel_common-2.1.4-py2.py3-none-any.whl.zip` & `tmp/flywheel_common-2.1.5-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 20004 bytes, number of entries: 27
--rw-r--r--  2.0 unx       25 b- defN 19-Sep-04 15:08 flywheel_common/__init__.py
--rw-r--r--  2.0 unx     2980 b- defN 19-Sep-04 15:08 flywheel_common/errors.py
--rw-r--r--  2.0 unx       71 b- defN 19-Sep-04 15:08 flywheel_common/logging/__init__.py
--rw-r--r--  2.0 unx     1521 b- defN 19-Sep-04 15:08 flywheel_common/logging/context_logger.py
--rw-r--r--  2.0 unx     1134 b- defN 19-Sep-04 15:08 flywheel_common/logging/extra_formatter.py
--rw-r--r--  2.0 unx     1039 b- defN 19-Sep-04 15:08 flywheel_common/logging/json_formatter.py
--rw-r--r--  2.0 unx     3234 b- defN 19-Sep-04 15:08 flywheel_common/logging/setup.py
--rw-r--r--  2.0 unx     2385 b- defN 19-Sep-04 15:08 flywheel_common/providers/__init__.py
--rw-r--r--  2.0 unx     2497 b- defN 19-Sep-04 15:08 flywheel_common/providers/creds.py
--rw-r--r--  2.0 unx     3522 b- defN 19-Sep-04 15:08 flywheel_common/providers/provider.py
--rw-r--r--  2.0 unx        0 b- defN 19-Sep-04 15:08 flywheel_common/providers/compute/__init__.py
--rw-r--r--  2.0 unx     1945 b- defN 19-Sep-04 15:08 flywheel_common/providers/compute/base.py
--rw-r--r--  2.0 unx        0 b- defN 19-Sep-04 15:08 flywheel_common/providers/storage/__init__.py
--rw-r--r--  2.0 unx     2692 b- defN 19-Sep-04 15:08 flywheel_common/providers/storage/base.py
--rw-r--r--  2.0 unx     1048 b- defN 19-Sep-04 15:08 flywheel_common/storage/__init__.py
--rw-r--r--  2.0 unx     4484 b- defN 19-Sep-04 15:08 flywheel_common/storage/interface.py
--rw-r--r--  2.0 unx     1223 b- defN 19-Sep-04 15:08 flywheel_common/storage/util.py
--rw-r--r--  2.0 unx        0 b- defN 19-Sep-04 15:08 tests/__init__.py
--rw-r--r--  2.0 unx     2079 b- defN 19-Sep-04 15:08 tests/test_errors.py
--rw-r--r--  2.0 unx     1425 b- defN 19-Sep-04 15:08 tests/test_extras_wrapper.py
--rw-r--r--  2.0 unx     3534 b- defN 19-Sep-04 15:08 tests/test_formatter.py
--rw-r--r--  2.0 unx    10875 b- defN 19-Sep-04 15:08 tests/test_providers.py
--rw-r--r--  2.0 unx      668 b- defN 19-Sep-04 15:08 tests/test_storage.py
--rw-r--r--  2.0 unx      465 b- defN 19-Sep-04 15:08 flywheel_common-2.1.4.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 19-Sep-04 15:08 flywheel_common-2.1.4.dist-info/WHEEL
--rw-r--r--  2.0 unx       22 b- defN 19-Sep-04 15:08 flywheel_common-2.1.4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2385 b- defN 19-Sep-04 15:08 flywheel_common-2.1.4.dist-info/RECORD
-27 files, 51363 bytes uncompressed, 16096 bytes compressed:  68.7%
+Zip file size: 19576 bytes, number of entries: 27
+-rw-r--r--  2.0 unx       25 b- defN 19-Sep-20 11:21 flywheel_common/__init__.py
+-rw-r--r--  2.0 unx     2980 b- defN 19-Sep-20 11:21 flywheel_common/errors.py
+-rw-r--r--  2.0 unx       71 b- defN 19-Sep-20 11:21 flywheel_common/logging/__init__.py
+-rw-r--r--  2.0 unx     1521 b- defN 19-Sep-20 11:21 flywheel_common/logging/context_logger.py
+-rw-r--r--  2.0 unx     1134 b- defN 19-Sep-20 11:21 flywheel_common/logging/extra_formatter.py
+-rw-r--r--  2.0 unx     1039 b- defN 19-Sep-20 11:21 flywheel_common/logging/json_formatter.py
+-rw-r--r--  2.0 unx     3234 b- defN 19-Sep-20 11:21 flywheel_common/logging/setup.py
+-rw-r--r--  2.0 unx     2385 b- defN 19-Sep-20 11:21 flywheel_common/providers/__init__.py
+-rw-r--r--  2.0 unx     2497 b- defN 19-Sep-20 11:21 flywheel_common/providers/creds.py
+-rw-r--r--  2.0 unx     3412 b- defN 19-Sep-20 11:21 flywheel_common/providers/provider.py
+-rw-r--r--  2.0 unx        0 b- defN 19-Sep-20 11:21 flywheel_common/providers/compute/__init__.py
+-rw-r--r--  2.0 unx     1945 b- defN 19-Sep-20 11:21 flywheel_common/providers/compute/base.py
+-rw-r--r--  2.0 unx        0 b- defN 19-Sep-20 11:21 flywheel_common/providers/storage/__init__.py
+-rw-r--r--  2.0 unx     2692 b- defN 19-Sep-20 11:21 flywheel_common/providers/storage/base.py
+-rw-r--r--  2.0 unx     1048 b- defN 19-Sep-20 11:21 flywheel_common/storage/__init__.py
+-rw-r--r--  2.0 unx     4555 b- defN 19-Sep-20 11:21 flywheel_common/storage/interface.py
+-rw-r--r--  2.0 unx     1223 b- defN 19-Sep-20 11:21 flywheel_common/storage/util.py
+-rw-r--r--  2.0 unx        0 b- defN 19-Sep-20 11:21 tests/__init__.py
+-rw-r--r--  2.0 unx     2079 b- defN 19-Sep-20 11:21 tests/test_errors.py
+-rw-r--r--  2.0 unx     1425 b- defN 19-Sep-20 11:21 tests/test_extras_wrapper.py
+-rw-r--r--  2.0 unx     3534 b- defN 19-Sep-20 11:21 tests/test_formatter.py
+-rw-r--r--  2.0 unx     9714 b- defN 19-Sep-20 11:21 tests/test_providers.py
+-rw-r--r--  2.0 unx      668 b- defN 19-Sep-20 11:21 tests/test_storage.py
+-rw-r--r--  2.0 unx      465 b- defN 19-Sep-20 11:21 flywheel_common-2.1.5.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 19-Sep-20 11:21 flywheel_common-2.1.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx       22 b- defN 19-Sep-20 11:21 flywheel_common-2.1.5.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2384 b- defN 19-Sep-20 11:21 flywheel_common-2.1.5.dist-info/RECORD
+27 files, 50162 bytes uncompressed, 15668 bytes compressed:  68.8%
```

## zipnote {}

```diff
@@ -63,20 +63,20 @@
 
 Filename: tests/test_providers.py
 Comment: 
 
 Filename: tests/test_storage.py
 Comment: 
 
-Filename: flywheel_common-2.1.4.dist-info/METADATA
+Filename: flywheel_common-2.1.5.dist-info/METADATA
 Comment: 
 
-Filename: flywheel_common-2.1.4.dist-info/WHEEL
+Filename: flywheel_common-2.1.5.dist-info/WHEEL
 Comment: 
 
-Filename: flywheel_common-2.1.4.dist-info/top_level.txt
+Filename: flywheel_common-2.1.5.dist-info/top_level.txt
 Comment: 
 
-Filename: flywheel_common-2.1.4.dist-info/RECORD
+Filename: flywheel_common-2.1.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## flywheel_common/providers/provider.py

```diff
@@ -1,36 +1,32 @@
 """Base provider class for all provider types"""
-import re
 from abc import abstractmethod
 from marshmallow import Schema, fields, ValidationError, validate
 
-from .. import errors
 
-LABEL_REGEX = re.compile('^[a-zA-Z]{1}[a-zA-Z0-9]{0,23}$')
+from .. import errors
 
 
 class BaseSchema(Schema):
     type = fields.String(required=True, allow_none=False, validate=validate.Length(min=1))
     id = fields.String(required=True, allow_none=False, validate=validate.Length(min=1))
 
-
 class BaseProviderSchema(Schema):
     _id = fields.String(required=False, allow_none=True, validate=validate.Length(min=1))
     provider_id = fields.String(required=False, allow_none=True, validate=validate.Length(min=1)) # wont be required until persisted
-    label = fields.String(required=True, validate=validate.Regexp(LABEL_REGEX))
+    label = fields.String(required=True)
     provider_class = fields.String(required=True)
     provider_type = fields.String(required=True)
     created = fields.DateTime(required=False)
     modified = fields.DateTime(required=False)
     origin = fields.Nested(BaseSchema, required=True, many=False)
 
     def __init__(self, strict=True, **kwargs):
         super(BaseProviderSchema, self).__init__(strict=strict, **kwargs)
 
-
 # pylint: disable=too-few-public-methods
 class BaseProvider(object):
     """The provider base object. """
 
     # The schema for minimum configuration (required)
     # schema will be overloaded for specific type validation
     _schema = None
```

## flywheel_common/storage/interface.py

```diff
@@ -52,25 +52,26 @@
         Return boolean if signed url is possible for this file type
 
         :param self: self reference
         :returns boolean:
         """
 
     @abstractmethod
-    def get_signed_url(self, uuid, path_hint, purpose, filename, attachment=True, response_type=None):
+    def get_signed_url(self, uuid, path_hint, purpose, filename, attachment=True, response_type=None, expiration=None):
         """
         Returns the signed url location of the file reference
 
         :param self: self reference
         :param string uuid: internal file uuid reference
         :param string path_hint: internal reference to file object on storage, used when uuid is not available
         :param string purpose: stated reason for signed url: upload or download
         :param string filename: Name of the downloaded file, used in the content-disposition header
         :param boolean attachment: True/False, attachment or not
         :param string response_type: Content-Type header of the response
+        :param integer expiration: url TTL in seconds
         :raises ResourceNotFound: If the file could not be found
         :return: string, the signed url string for accessing the referenced file
         :rtype: string
 
         """
 
     @abstractmethod
```

## tests/test_providers.py

```diff
@@ -1,48 +1,37 @@
 import datetime
 import pytest
-from mock import MagicMock
 
 from flywheel_common.errors import ValidationError
 from flywheel_common.providers import ProviderClass
 from flywheel_common.providers.creds import Creds
 from flywheel_common.providers.provider import BaseProvider
 from flywheel_common.providers.storage.base import BaseStorageProvider
 from flywheel_common.providers.compute.base import BaseComputeProvider, BaseComputeSchema
 
-STUB_CONFIG = {
-    'queue_threshold': 5,
-    'max_compute': 6,
-    'machine_type': 'test',
-    'disk_size': 7,
-    'swap_size': '99G',
-    'preemptible': 9,
-    'region': 'test region',
-    'zone': 'test zone'
-}
-
 
 # === Model Tests ===
 def test_creds():
+
     cred_test = Creds(
         provider_class='test',
         provider_type='anything',
         provider_label='Test creds',
         config=None)
 
     assert cred_test.provider_class == 'test'
     assert cred_test.provider_type == 'anything'
     assert cred_test.label == 'Test creds'
 
     # No schema
     with pytest.raises(ValueError):
         cred_test.validate()
 
-
 def test_provider():
+
     provider_test = BaseProvider(
         provider_class='test',
         provider_type='anything',
         provider_label='Test provider',
         config=None,
         creds=None)
 
@@ -50,73 +39,45 @@
     assert provider_test.provider_type == 'anything'
     assert provider_test.label == 'Test provider'
 
     # No schema
     with pytest.raises(ValueError):
         provider_test.validate()
 
-
-def test_compute_provider_label_has_sane_values():
-    """
-    Labels are limited to a regex that is 1-24 lowercase letters so the backend
-    creation of VMs does not fail when using them for VM name prefixes
-    """
-    test_prv = BaseComputeProvider(
-        provider_class='stub',
-        provider_type='stub',
-        provider_label='stub',
-        config=STUB_CONFIG,
-        creds={'stubbed': 'creds'}
-    )
-    test_prv.origin = MagicMock
-    test_prv._schema = BaseComputeSchema()
-
-    for ok_name in ['a', 'asdfQWER', 'a'*24, 'a1234', 'a123'*6, 'a'+'9'*23]:
-        test_prv.label = ok_name
-        test_prv.validate()
-
-    for bad_name in ['1234nonumberstart', 'spaces bad', 'no-dashes-allowed',
-                     "don't_do_this", 'a'+'9'*24, 'a'*25]:
-        test_prv.label = bad_name
-        with pytest.raises(ValidationError):
-            test_prv.validate()
-
-
 def test_storage_provider(mocker):
+
     mocker.patch('flywheel_common.providers.storage.base.create_flywheel_fs', return_value={'storage': 'test'})
-    fake_provider_label = 'testlocalprovider'
 
     # No schema
     with pytest.raises(ValueError):
         provider_test = BaseStorageProvider(
             provider_class=ProviderClass.storage.value,
             provider_type='local',
-            provider_label=fake_provider_label,
+            provider_label='Test local provider',
             config={'path': '/var/'},
             creds=None)
 
     # Skip schema validation but crate the object
     mocker.patch('flywheel_common.providers.storage.base.BaseProvider.validate', return_value=True)
     provider_test = BaseStorageProvider(
         provider_class=ProviderClass.storage.value,
         provider_type='local',
-        provider_label=fake_provider_label,
+        provider_label='Test local provider',
         config={'path': '/var/'},
         creds=None)
 
-    assert provider_test.label == fake_provider_label
+    assert provider_test.label == 'Test local provider'
     assert provider_test.provider_class == ProviderClass.storage.value
     assert provider_test.provider_type == 'local'
     assert provider_test.storage_plugin == {'storage': 'test'}
 
 
-def test_compute_provider():
+def test_compute_provider(mocker):
     """Test validation on all the required fields for base compute"""
-    origin = {'type': 'user', 'id': 'user@test.com'}
-    fake_label = 'testproviderlabel'
+    origin = { 'type': 'user', 'id': 'user@test.com' }
     # Dont use defaults to confirm they are set in the model correctly
     config = {
         'queue_threshold': 5,
         'max_compute': 6,
         'machine_type': 'test',
         'disk_size': 7,
         'swap_size': '99G',
@@ -124,22 +85,22 @@
         'region': 'test region',
         'zone': 'test zone'
     }
 
     provider_test = BaseComputeProvider(
         provider_class=ProviderClass.storage.value,
         provider_type='local',
-        provider_label=fake_label,
+        provider_label='Test local provider',
         config=config,
         creds=None)
     provider_test.origin = origin
     provider_test.created = provider_test.modified = datetime.datetime.now()
     provider_test._schema = BaseComputeSchema()
 
-    assert provider_test.label == fake_label
+    assert provider_test.label == 'Test local provider'
     assert provider_test.provider_class == ProviderClass.storage.value
     assert provider_test.provider_type == 'local'
     assert provider_test.config['queue_threshold'] == 5
     assert provider_test.config['max_compute'] == 6
     assert provider_test.config['machine_type'] == 'test'
     assert provider_test.config['disk_size'] == 7
     assert provider_test.config['swap_size'] == '99G'
@@ -247,50 +208,49 @@
     provider_test.config['region'] = ''
     with pytest.raises(ValidationError):
         provider_test.validate()
     provider_test.config['region'] = 'test region'
 
     # Create a second instance to validate isolation of config and attributes
     origin = {'type': 'user2', 'id': 'user2@test.com'}
-    fake_label2 = 'iamalabel'
     # Dont use defaults to confirm they are set in the model correctly
     config = {
         'queue_threshold': 25,
         'max_compute': 26,
         'machine_type': '2test',
         'disk_size': 27,
         'swap_size': '100G',
         'preemptible': True,
         'region': '2test region',
         'zone': '2test zone'
     }
     provider_test2 = BaseComputeProvider(
         provider_class=ProviderClass.storage.value,
         provider_type='local',
-        provider_label=fake_label2,
+        provider_label='Test local provider 2',
         config=config,
         creds=None)
     provider_test2.origin = origin
     provider_test2.created = provider_test.modified = datetime.datetime.now()
     provider_test2._schema = BaseComputeSchema()
     provider_test2.validate()
 
-    assert provider_test.label == fake_label
+    assert provider_test.label == 'Test local provider'
     assert provider_test.provider_class == ProviderClass.storage.value
     assert provider_test.provider_type == 'local'
     assert provider_test.config['queue_threshold'] == 5
     assert provider_test.config['max_compute'] == 6
     assert provider_test.config['machine_type'] == 'test'
     assert provider_test.config['disk_size'] == 7
     assert provider_test.config['swap_size'] == '99G'
     assert provider_test.config['preemptible'] == True
     assert provider_test.config['region'] == 'test region'
     assert provider_test.config['zone'] == 'test zone'
     #Add the second
-    assert provider_test2.label == fake_label2
+    assert provider_test2.label == 'Test local provider 2'
     assert provider_test2.provider_class == ProviderClass.storage.value
     assert provider_test2.provider_type == 'local'
     assert provider_test2.config['queue_threshold'] == 25
     assert provider_test2.config['max_compute'] == 26
     assert provider_test2.config['machine_type'] == '2test'
     assert provider_test2.config['disk_size'] == 27
     assert provider_test2.config['swap_size'] == '100G'
```

## Comparing `flywheel_common-2.1.4.dist-info/RECORD` & `flywheel_common-2.1.5.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -3,25 +3,25 @@
 flywheel_common/logging/__init__.py,sha256=cpiWoMfigsP7ATcWVHc_wUMHl_uBx-KrlKAHimlhS5Q,71
 flywheel_common/logging/context_logger.py,sha256=5wYGnkzjSf1FuNz1m5udmVDk2SHFGX43ZfQ8uHIhWJE,1521
 flywheel_common/logging/extra_formatter.py,sha256=odDJWrafYGzymJhLYqCTBwdsvGaEy_HMgPE5nl57La4,1134
 flywheel_common/logging/json_formatter.py,sha256=pxGiVan6xpx64PJWBJIxyr1yF7K8lyAFEldQ4NRcfik,1039
 flywheel_common/logging/setup.py,sha256=Nxdo-S1X23t2n7AxF4ngZKz-BjZQ0G96hQD8w5_ZIHs,3234
 flywheel_common/providers/__init__.py,sha256=hVq87egDNKilOf4tLMASclR78O5hSpgeeJMmX87vJd0,2385
 flywheel_common/providers/creds.py,sha256=yuYbyRnSqHP-HBCA0sAm4vrhehUblc0_DYnJELYdfJE,2497
-flywheel_common/providers/provider.py,sha256=o7mbdB80iNr3KiM9ep6wExTxsz3HWEMgclYrKmDD3WQ,3522
+flywheel_common/providers/provider.py,sha256=DR-4wxiNi6Q8ir8h0u-f3FJtDgQOSw_rRS9YhAYGv3s,3412
 flywheel_common/providers/compute/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 flywheel_common/providers/compute/base.py,sha256=-2Cu6DOp3ekbemQsTT8J-6de3vRwsQVQ0b6nSdIkIqI,1945
 flywheel_common/providers/storage/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 flywheel_common/providers/storage/base.py,sha256=2uz4FYK1q89gsg_Qpk69Nkmzf8Yd4_zsABrlM_0IOxw,2692
 flywheel_common/storage/__init__.py,sha256=ztr93IVzJ6o_ugkGU_RXn2xA9H5m8EJzg32s2v--ccU,1048
-flywheel_common/storage/interface.py,sha256=ivXjsVEW6vMV7xs1bNG_uFI_WXZv-lBzTyk2vtYL9jk,4484
+flywheel_common/storage/interface.py,sha256=s1maPzA0U18CvLNgMe5YCQrqCELQzklEHap6Zp36v8E,4555
 flywheel_common/storage/util.py,sha256=BdF4xPcah2yv4JF0nozm9lPmsymohxY2kgp4gfrUBmk,1223
 tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tests/test_errors.py,sha256=PlCTcfDUL_bCRidOwa1osCyCZeeb1oJcoO8ccpFfj30,2079
 tests/test_extras_wrapper.py,sha256=XUK17rNYSlhjANFNXg-xHI7uaD3TuWkZUujhvRhTOhA,1425
 tests/test_formatter.py,sha256=zs56PpYwkDznAIRwCp1Chapy6uCEUoqU8loqdMZFak4,3534
-tests/test_providers.py,sha256=EkqkWI7q-ujMcT5BTy8uJQfEBXff-T4GE32ygKQY568,10875
+tests/test_providers.py,sha256=NN9XoWtia4IeFjLnSyJBpmXJRiwqn0M-IfiXI19-MRQ,9714
 tests/test_storage.py,sha256=HcVI77EwEJNaqug_pXHKEMhtIRgyqlgzHXNQllreQew,668
-flywheel_common-2.1.4.dist-info/METADATA,sha256=BP8vLv4bN9ad_PDkHaXUz-N1vQUUzAGIrUDuObx_C6M,465
-flywheel_common-2.1.4.dist-info/WHEEL,sha256=8zNYZbwQSXoB9IfXOjPfeNwvAsALAjffgk27FqvCWbo,110
-flywheel_common-2.1.4.dist-info/top_level.txt,sha256=E6tZhXsXvXqzXzIDqEz6z0g84WxKNLiI2j4fdVu9chg,22
-flywheel_common-2.1.4.dist-info/RECORD,,
+flywheel_common-2.1.5.dist-info/METADATA,sha256=Mgjg3YkNHtq3EdPlpT-gF-kAk-GY1Ea4bz0Xlv_ae2Y,465
+flywheel_common-2.1.5.dist-info/WHEEL,sha256=8zNYZbwQSXoB9IfXOjPfeNwvAsALAjffgk27FqvCWbo,110
+flywheel_common-2.1.5.dist-info/top_level.txt,sha256=E6tZhXsXvXqzXzIDqEz6z0g84WxKNLiI2j4fdVu9chg,22
+flywheel_common-2.1.5.dist-info/RECORD,,
```

