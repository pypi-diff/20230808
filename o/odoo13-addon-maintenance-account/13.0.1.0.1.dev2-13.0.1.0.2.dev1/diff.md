# Comparing `tmp/odoo13_addon_maintenance_account-13.0.1.0.1.dev2-py3-none-any.whl.zip` & `tmp/odoo13_addon_maintenance_account-13.0.1.0.2.dev1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 28135 bytes, number of entries: 22
--rw-r--r--  2.0 unx     3471 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/__init__.py
--rw-r--r--  2.0 unx      547 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/__manifest__.py
--rw-r--r--  2.0 unx     3300 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/i18n/es.po
--rw-r--r--  2.0 unx     3666 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/i18n/it.po
--rw-r--r--  2.0 unx     1996 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/i18n/maintenance_account.pot
--rw-r--r--  2.0 unx       63 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/models/__init__.py
--rw-r--r--  2.0 unx     4516 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/models/account_move.py
--rw-r--r--  2.0 unx      511 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/models/maintenance_equipment.py
--rw-r--r--  2.0 unx      145 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       87 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      432 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/static/description/icon.png
--rw-r--r--  2.0 unx    12898 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/static/description/index.html
--rw-r--r--  2.0 unx      104 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/tests/__init__.py
--rw-r--r--  2.0 unx     4528 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/tests/test_maintenance_account.py
--rw-r--r--  2.0 unx     1783 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/views/account_move_view.xml
--rw-r--r--  2.0 unx      503 b- defN 23-Feb-21 08:21 odoo/addons/maintenance_account/views/maintenance_equipment_view.xml
--rw-r--r--  2.0 unx     4059 b- defN 23-Feb-21 08:21 odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Feb-21 08:21 odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Feb-21 08:21 odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2413 b- defN 23-Feb-21 08:21 odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/RECORD
-22 files, 54595 bytes uncompressed, 23983 bytes compressed:  56.1%
+Zip file size: 28389 bytes, number of entries: 22
+-rw-r--r--  2.0 unx     3471 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/__init__.py
+-rw-r--r--  2.0 unx      547 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/__manifest__.py
+-rw-r--r--  2.0 unx     3300 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/i18n/es.po
+-rw-r--r--  2.0 unx     3673 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/i18n/it.po
+-rw-r--r--  2.0 unx     1996 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/i18n/maintenance_account.pot
+-rw-r--r--  2.0 unx       63 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/models/__init__.py
+-rw-r--r--  2.0 unx     4861 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/models/account_move.py
+-rw-r--r--  2.0 unx      511 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/models/maintenance_equipment.py
+-rw-r--r--  2.0 unx      145 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       87 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      432 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/static/description/icon.png
+-rw-r--r--  2.0 unx    12898 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/static/description/index.html
+-rw-r--r--  2.0 unx      104 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/tests/__init__.py
+-rw-r--r--  2.0 unx     5068 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/tests/test_maintenance_account.py
+-rw-r--r--  2.0 unx     1783 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/views/account_move_view.xml
+-rw-r--r--  2.0 unx      503 b- defN 23-Aug-08 04:16 odoo/addons/maintenance_account/views/maintenance_equipment_view.xml
+-rw-r--r--  2.0 unx     4059 b- defN 23-Aug-08 04:17 odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-08 04:17 odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Aug-08 04:17 odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2413 b- defN 23-Aug-08 04:17 odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/RECORD
+22 files, 55487 bytes uncompressed, 24237 bytes compressed:  56.3%
```

## zipnote {}

```diff
@@ -48,20 +48,20 @@
 
 Filename: odoo/addons/maintenance_account/views/account_move_view.xml
 Comment: 
 
 Filename: odoo/addons/maintenance_account/views/maintenance_equipment_view.xml
 Comment: 
 
-Filename: odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/METADATA
+Filename: odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/METADATA
 Comment: 
 
-Filename: odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/WHEEL
+Filename: odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/top_level.txt
+Filename: odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/RECORD
+Filename: odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/maintenance_account/__manifest__.py

```diff
@@ -1,12 +1,12 @@
 # Copyright 2022 Tecnativa - Víctor Martínez
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Maintenance Account",
-    "version": "13.0.1.0.0",
+    "version": "13.0.1.0.1",
     "category": "Maintenance",
     "website": "https://github.com/OCA/maintenance",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "depends": ["maintenance_product", "account"],
     "installable": True,
     "data": ["views/maintenance_equipment_view.xml", "views/account_move_view.xml"],
```

## odoo/addons/maintenance_account/i18n/it.po

```diff
@@ -2,23 +2,23 @@
 # This file contains the translation of the following modules:
 # 	* maintenance_account
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: Odoo Server 14.0\n"
 "Report-Msgid-Bugs-To: \n"
-"PO-Revision-Date: 2022-10-24 11:43+0000\n"
+"PO-Revision-Date: 2023-08-07 09:10+0000\n"
 "Last-Translator: mymage <stefano.consolaro@mymage.it>\n"
 "Language-Team: none\n"
 "Language: it\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: nplurals=2; plural=n != 1;\n"
-"X-Generator: Weblate 4.14.1\n"
+"X-Generator: Weblate 4.17\n"
 
 #. module: maintenance_account
 #: model:ir.model.fields,field_description:maintenance_account.field_account_move__display_name
 #: model:ir.model.fields,field_description:maintenance_account.field_account_move_line__display_name
 #: model:ir.model.fields,field_description:maintenance_account.field_maintenance_equipment__display_name
 msgid "Display Name"
 msgstr "Nome visualizzato"
@@ -84,8 +84,8 @@
 #: model:ir.model.fields,field_description:maintenance_account.field_maintenance_equipment__move_line_id
 msgid "Move line"
 msgstr "Riga movimento"
 
 #. module: maintenance_account
 #: model:ir.model.fields,help:maintenance_account.field_maintenance_equipment__move_id
 msgid "The move of this entry line."
-msgstr "Il movimento di questa registrazione."
+msgstr "Il movimento per questa riga di registrazione."
```

## odoo/addons/maintenance_account/models/account_move.py

```diff
@@ -15,15 +15,16 @@
     def unlink(self):
         items = self.env["maintenance.equipment"].search([("move_id", "in", self.ids)])
         items.write({"move_line_id": False, "move_id": False})
         return super().unlink()
 
     def action_post(self):
         super().action_post()
-        equipment_model = self.env["maintenance.equipment"]
+        # Prevent error if user does not have permission to create equipments
+        equipment_model = self.env["maintenance.equipment"].sudo()
         for move in self.filtered(lambda r: r.is_purchase_document()):
             for line in move.line_ids.filtered(
                 lambda x: (
                     not x.equipment_ids
                     and x.product_id
                     and x.product_id.product_tmpl_id.maintenance_ok
                 )
@@ -31,15 +32,17 @@
                 if not line.equipment_category_id:
                     line._set_equipment_category()
                 # Create equipments
                 limit = int(line.quantity) + 1
                 vals = line._prepare_equipment_vals()
                 equipment_ids = []
                 for _i in range(1, limit):
-                    equipment = equipment_model.create(vals.copy())
+                    equipment = equipment_model.with_context(
+                        force_company=move.company_id.id,
+                    ).create(vals.copy())
                     equipment_ids.append((4, equipment.id))
                 line.equipment_ids = equipment_ids
 
     def action_view_equipments(self):
         items = self.env["maintenance.equipment"].search([("move_id", "=", self.id)])
         action = self.env.ref("maintenance.hr_equipment_action")
         action_dict = action.sudo().read()[0]
@@ -92,16 +95,19 @@
 
     def _prepare_equipment_category_vals(self):
         categ = self.product_id.product_tmpl_id.categ_id
         return {"name": categ.name, "product_category_id": categ.id}
 
     def _set_equipment_category(self):
         if not self.equipment_category_id:
-            category_model = self.env["maintenance.equipment.category"]
-            category = category_model.create(self._prepare_equipment_category_vals())
+            # Prevent error if user does not have permission to create equipments
+            category_model = self.env["maintenance.equipment.category"].sudo()
+            category = category_model.with_context(
+                force_company=self.company_id.id
+            ).create(self._prepare_equipment_category_vals())
             self.equipment_category_id = category.id
 
     def _prepare_equipment_vals(self):
         return {
             "move_line_id": self.id,
             "name": self.product_id.name,
             "product_id": self.product_id.id,
```

## odoo/addons/maintenance_account/tests/test_maintenance_account.py

```diff
@@ -1,18 +1,31 @@
-# Copyright 2022 Tecnativa - Víctor Martínez
+# Copyright 2022-2023 Tecnativa - Víctor Martínez
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl)
 
 from odoo import fields
-from odoo.tests import Form, common
+from odoo.tests import Form, common, new_test_user
+from odoo.tests.common import users
 
 
 class TestAccountMove(common.SavepointCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
+        ctx = {
+            "mail_create_nolog": True,
+            "mail_create_nosubscribe": True,
+            "mail_notrack": True,
+            "no_reset_password": True,
+        }
+        new_test_user(
+            cls.env,
+            login="test-account-user",
+            groups="account.group_account_invoice",
+            context=ctx,
+        )
         cls.categ = cls.env["product.category"].create({"name": "Test category"})
         cls.product_a = cls.env["product.product"].create(
             {"name": "Test product A", "maintenance_ok": True, "categ_id": cls.categ.id}
         )
         cls.product_b = cls.env["product.product"].create(
             {"name": "Test product B", "categ_id": cls.categ.id}
         )
@@ -52,24 +65,26 @@
         with move_form.invoice_line_ids.new() as line_form:
             line_form.product_id = self.product_b
             line_form.quantity = 2
             line_form.account_id = self.account_expense
         invoice = move_form.save()
         return invoice
 
+    @users("test-account-user")
     def test_invoice_out_invoice_action_post_equipment_1(self):
         invoice = self._create_invoice("out_invoice")
         line_a = invoice.line_ids.filtered(lambda x: x.product_id == self.product_a)
         line_b = invoice.line_ids.filtered(lambda x: x.product_id == self.product_b)
         self.assertFalse(line_a.equipment_category_id)
         self.assertFalse(line_b.equipment_category_id)
         invoice.action_post()
         equipments = invoice.mapped("line_ids.equipment_ids")
         self.assertEqual(len(equipments), 0)
 
+    @users("test-account-user")
     def test_invoice_action_post_equipment_1(self):
         invoice = self._create_invoice()
         line_a = invoice.line_ids.filtered(lambda x: x.product_id == self.product_a)
         line_b = invoice.line_ids.filtered(lambda x: x.product_id == self.product_b)
         self.assertFalse(line_a.equipment_category_id)
         self.assertFalse(line_b.equipment_category_id)
         invoice.action_post()
@@ -83,17 +98,20 @@
         self.assertEqual(equipment.product_id, self.product_a)
         self.assertEqual(equipment.category_id.product_category_id, self.categ)
         self.assertEqual(equipment.assign_date, invoice.date)
         self.assertEqual(equipment.effective_date, invoice.date)
         self.assertEqual(equipment.partner_id, self.partner)
         self.assertEqual(equipment.partner_ref, invoice.ref)
 
+    @users("test-account-user")
     def test_invoice_action_post_equipment_2(self):
-        category = self.env["maintenance.equipment.category"].create(
-            {"name": self.categ.name, "product_category_id": self.categ.id}
+        category = (
+            self.env["maintenance.equipment.category"]
+            .sudo()
+            .create({"name": self.categ.name, "product_category_id": self.categ.id})
         )
         invoice = self._create_invoice()
         line_a = invoice.line_ids.filtered(lambda x: x.product_id == self.product_a)
         self.assertEqual(line_a.equipment_category_id, category)
         invoice.action_post()
         equipment = fields.first(line_a.equipment_ids)
         self.assertEqual(equipment.category_id, category)
```

## Comparing `odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/METADATA` & `odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo13-addon-maintenance-account
-Version: 13.0.1.0.1.dev2
+Version: 13.0.1.0.2.dev1
 Summary: Maintenance Account
 Home-page: https://github.com/OCA/maintenance
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/RECORD` & `odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 odoo/addons/maintenance_account/README.rst,sha256=NtyMN1u6P_Nu9mJjpsH9AcZ2BF1UnhLbkMOhYpcWLVg,3471
 odoo/addons/maintenance_account/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/maintenance_account/__manifest__.py,sha256=XepQrnyfFYU4RjwcJQaMMzNGefZg7jfvZQ6jMt2LEhc,547
+odoo/addons/maintenance_account/__manifest__.py,sha256=z-DA8W4Odg_XM-6LtIQVe5MdXZ3SL7mPCeqi9Gzp4-k,547
 odoo/addons/maintenance_account/i18n/es.po,sha256=HyE8Qc2pdm_b6vDDUZz2UA0SAomP6npu1vJPe2dUehQ,3300
-odoo/addons/maintenance_account/i18n/it.po,sha256=dZRRzufzxHRdfcSxyf5vrOI14_O_OB1mTJrYjdRSEWo,3666
+odoo/addons/maintenance_account/i18n/it.po,sha256=NnfyBhfyIyKOIGK4pNus4NzU7_nQPOMtafSwF8YEs6g,3673
 odoo/addons/maintenance_account/i18n/maintenance_account.pot,sha256=vD7QBVeaRZiKVO3f79uWXxuuwEfM5gnVVG0lzkI0dmg,1996
 odoo/addons/maintenance_account/models/__init__.py,sha256=N2K1n3StbyVgswDoqZW--k1ynvURRTuCfENkC8XyujM,63
-odoo/addons/maintenance_account/models/account_move.py,sha256=HQhsoZPpdi2YfZE2iSJXsCj8AzBWaysl0ykqLt1Z-dA,4516
+odoo/addons/maintenance_account/models/account_move.py,sha256=guTbTxmRxXddIsZaeTI7mlMGuVncgpfPu_mVHNY5l4A,4861
 odoo/addons/maintenance_account/models/maintenance_equipment.py,sha256=H-o5kGj54FytWe38g1lt4QxOdLRn4Hqnn0jQylik4Gg,511
 odoo/addons/maintenance_account/readme/CONTRIBUTORS.rst,sha256=3NobPaRqJLhkOVzp3ZcWTpzdqv9GFohNJ4DVIYaHQYI,145
 odoo/addons/maintenance_account/readme/DESCRIPTION.rst,sha256=FYAs-7IuVjfA0qtl0OPWHuU9uKYjcJGPhhLiLJrPxH8,87
 odoo/addons/maintenance_account/readme/USAGE.rst,sha256=SlJ6zyerA_-wHBzFkUEkWRnoMt9bzI57-WzhAPY9Pgk,432
 odoo/addons/maintenance_account/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/maintenance_account/static/description/index.html,sha256=ZRcS3GMcvQr8_bnIJPZ6pB8Gd0qYo5XbA5UQwgfdDuc,12898
 odoo/addons/maintenance_account/tests/__init__.py,sha256=egr3Ivgjjd9s3nOnkvGvHbwekEnhhhL4xhkOcEG4NZ0,104
-odoo/addons/maintenance_account/tests/test_maintenance_account.py,sha256=grN39P5xTD5c7gdC0Gsu-_-QKfjDKsdDIc-I78-bFAw,4528
+odoo/addons/maintenance_account/tests/test_maintenance_account.py,sha256=0SM6wfNqSuE50B_QFV62ZqjL5oJcPW798mhhDMuC5Jk,5068
 odoo/addons/maintenance_account/views/account_move_view.xml,sha256=9Wnw-KmM_lE8LSvjDJlyzO8ELd92JbgeEKVieaoECWo,1783
 odoo/addons/maintenance_account/views/maintenance_equipment_view.xml,sha256=Pp4NDIq8F15ZztZ50WHDyfUENZXllvlICddffhIolOQ,503
-odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/METADATA,sha256=ycsp2ovepUH67Ab8ckpUsXQrEln5IcNJYRS5qMYbb5s,4059
-odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo13_addon_maintenance_account-13.0.1.0.1.dev2.dist-info/RECORD,,
+odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/METADATA,sha256=owL6AUZ6LMKMwe6qYyhxTPNKBq4I61vL0aRGvkSDCY8,4059
+odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo13_addon_maintenance_account-13.0.1.0.2.dev1.dist-info/RECORD,,
```

