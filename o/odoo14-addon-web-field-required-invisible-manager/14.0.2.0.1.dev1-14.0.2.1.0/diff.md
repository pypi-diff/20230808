# Comparing `tmp/odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1-py3-none-any.whl.zip` & `tmp/odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,23 +1,23 @@
-Zip file size: 29377 bytes, number of entries: 21
--rw-r--r--  2.0 unx     3556 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/__init__.py
--rw-r--r--  2.0 unx      476 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/__manifest__.py
--rw-r--r--  2.0 unx     7603 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/i18n/it.po
--rw-r--r--  2.0 unx     7031 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/i18n/web_field_required_invisible_manager.pot
--rw-r--r--  2.0 unx       60 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/models/__init__.py
--rw-r--r--  2.0 unx     4247 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/models/custom_field_restriction.py
--rw-r--r--  2.0 unx     5521 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/models/models.py
--rw-r--r--  2.0 unx       76 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      207 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      362 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/readme/USAGE.rst
--rw-r--r--  2.0 unx      209 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/static/description/icon.png
--rw-r--r--  2.0 unx    12952 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/static/description/index.html
--rw-r--r--  2.0 unx      126 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/tests/__init__.py
--rw-r--r--  2.0 unx     6341 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py
--rw-r--r--  2.0 unx     7262 b- defN 23-Aug-03 05:42 odoo/addons/web_field_required_invisible_manager/views/views.xml
--rw-r--r--  2.0 unx     4138 b- defN 23-Aug-03 05:43 odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Aug-03 05:43 odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Aug-03 05:43 odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2683 b- defN 23-Aug-03 05:43 odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/RECORD
-21 files, 72423 bytes uncompressed, 24649 bytes compressed:  66.0%
+Zip file size: 29513 bytes, number of entries: 21
+-rw-r--r--  2.0 unx     3556 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/__init__.py
+-rw-r--r--  2.0 unx      476 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/__manifest__.py
+-rw-r--r--  2.0 unx     7603 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/i18n/it.po
+-rw-r--r--  2.0 unx     7031 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/i18n/web_field_required_invisible_manager.pot
+-rw-r--r--  2.0 unx       60 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/models/__init__.py
+-rw-r--r--  2.0 unx     4247 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/models/custom_field_restriction.py
+-rw-r--r--  2.0 unx     6549 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/models/models.py
+-rw-r--r--  2.0 unx       76 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      207 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      362 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/readme/USAGE.rst
+-rw-r--r--  2.0 unx      209 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/static/description/icon.png
+-rw-r--r--  2.0 unx    12952 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/static/description/index.html
+-rw-r--r--  2.0 unx      126 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/tests/__init__.py
+-rw-r--r--  2.0 unx     6595 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py
+-rw-r--r--  2.0 unx     7262 b- defN 23-Aug-08 10:03 odoo/addons/web_field_required_invisible_manager/views/views.xml
+-rw-r--r--  2.0 unx     4133 b- defN 23-Aug-08 10:03 odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-08 10:03 odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Aug-08 10:03 odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2663 b- defN 23-Aug-08 10:03 odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/RECORD
+21 files, 73680 bytes uncompressed, 24825 bytes compressed:  66.3%
```

## zipnote {}

```diff
@@ -45,20 +45,20 @@
 
 Filename: odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py
 Comment: 
 
 Filename: odoo/addons/web_field_required_invisible_manager/views/views.xml
 Comment: 
 
-Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/METADATA
+Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/WHEEL
+Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/top_level.txt
+Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/RECORD
+Filename: odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/web_field_required_invisible_manager/__manifest__.py

```diff
@@ -1,12 +1,12 @@
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 {
     "name": "Web Field Required Invisible Readonly Managerr",
     "category": "Web",
-    "version": "14.0.2.0.0",
+    "version": "14.0.2.1.0",
     "license": "AGPL-3",
     "author": "Ilyas, ooops404, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/web",
     "maintainers": ["ilyasProgrammer"],
     "depends": ["base"],
     "data": [
         "security/ir.model.access.csv",
```

## odoo/addons/web_field_required_invisible_manager/models/models.py

```diff
@@ -40,17 +40,15 @@
         # TODO speed up somehow
         restrictions = self.env["custom.field.restriction"].search(
             [
                 ("model_name", "=", self._name),
                 ("group_ids", "in", self.env.user.groups_id.ids),
             ]
         )
-        if not restrictions:
-            return arch
-        else:
+        if restrictions:
             return self.create_restrictions_fields(restrictions, view_type, arch)
         return arch
 
     def create_restrictions_fields(self, restrictions, view_type, arch):
         doc = etree.XML(arch["arch"])
         for node in doc.xpath("//field"):
             name = node.attrib.get("name")
@@ -123,7 +121,36 @@
                         safe_eval(r.condition_domain)
                     )
                     if filtered_rec_id and r.group_ids & self.env.user.groups_id:
                         record[field_name] = True
                 elif r.group_ids:
                     if r.group_ids & self.env.user.groups_id:
                         record[field_name] = True
+
+    def default_get(self, fields_list):
+        res = super(Base, self).default_get(fields_list)
+        vals = self._default_get_compute_restrictions_fields()
+        if vals:
+            res.update(vals)
+        return res
+
+    def _default_get_compute_restrictions_fields(self):
+        restrictions = self.env["custom.field.restriction"].search(
+            [("model_name", "=", self._name)]
+        )
+        values = {}
+        if not restrictions:
+            return values
+        for r in restrictions:
+            if r.visibility_field_id:
+                field_name = r.visibility_field_id.name
+                values[field_name] = False
+            if r.required_field_id:
+                field_name = r.required_field_id.name
+                values[field_name] = False
+            if r.readonly_field_id:
+                field_name = r.readonly_field_id.name
+                values[field_name] = False
+            if r.group_ids:
+                if r.group_ids & self.env.user.groups_id:
+                    values[field_name] = True
+        return values
```

## odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py

```diff
@@ -126,7 +126,12 @@
         self.deco_addict.read(["x_computed_res_partner_name_visibility"])
         self.assertTrue(self.deco_addict.x_computed_res_partner_name_visibility)
         # unlink
         field_name = self.invisible_title_rec_id.get_field_name("visibility")
         self.invisible_title_rec_id.unlink()
         field_id = self.env["ir.model.fields"].search([("name", "=", field_name)])
         self.assertFalse(field_id)
+        # default get
+        self.env["res.partner"].default_get(["name"])
+        self.env["res.partner"].default_get(["city"])
+        self.env["res.partner.title"].default_get(["name"])
+        self.env["res.partner.title"].default_get(["shortcut"])
```

## Comparing `odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/METADATA` & `odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-web-field-required-invisible-manager
-Version: 14.0.2.0.1.dev1
+Version: 14.0.2.1.0
 Summary: Web Field Required Invisible Readonly Managerr
 Home-page: https://github.com/OCA/web
 Author: Ilyas, ooops404, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/RECORD` & `odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 odoo/addons/web_field_required_invisible_manager/README.rst,sha256=yvQVv8siZ_PFn4kPQ6RSm4J5WJKgDLhjZIoGduVmTMk,3556
 odoo/addons/web_field_required_invisible_manager/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/web_field_required_invisible_manager/__manifest__.py,sha256=CgO2ErUBGyMCs51wi1rsQOJMGjPPgBU1hNnE_WoajL0,476
+odoo/addons/web_field_required_invisible_manager/__manifest__.py,sha256=_3qUl1CMh926YbkW98B-wtiwPO5MRL2WWBzXf3PupzM,476
 odoo/addons/web_field_required_invisible_manager/i18n/it.po,sha256=KkF7qtURq2zGqWIT0LHxrxXlNjfO3OyQ5k9k8PaPObg,7603
 odoo/addons/web_field_required_invisible_manager/i18n/web_field_required_invisible_manager.pot,sha256=JPkSTUUELJWwG9RaiSfKCBXwJvnWy9u5z-c5N-M5Kjg,7031
 odoo/addons/web_field_required_invisible_manager/models/__init__.py,sha256=s06QenfAxrofMIw7JC0mprBRVUXRXl8PpNmOgosCchg,60
 odoo/addons/web_field_required_invisible_manager/models/custom_field_restriction.py,sha256=wnzIy7ESZ5W8fpM2WDKEy-UhAkAXAZnVHQa5zjxs3n8,4247
-odoo/addons/web_field_required_invisible_manager/models/models.py,sha256=nWHwDOKRTSHVmoChHXE3-hUxiecQCHb0j0OLA85110A,5521
+odoo/addons/web_field_required_invisible_manager/models/models.py,sha256=fWJXGkBDwDECAMq9YiaDqXFBnAQ0BATZSffVV266-Fk,6549
 odoo/addons/web_field_required_invisible_manager/readme/CONTRIBUTORS.rst,sha256=pXBxxpnmW04XdfMTKA-OZ8353nah0LrPtexjT6awA_s,76
 odoo/addons/web_field_required_invisible_manager/readme/DESCRIPTION.rst,sha256=FwLVvw1h4DAMVVnMDyIN4pXIy5PDHFe-qIGxX2dg8o4,207
 odoo/addons/web_field_required_invisible_manager/readme/USAGE.rst,sha256=otvcF82s1A6wKrtvt5210uGUPZ-Xx8GRU0pFVMkG-zQ,362
 odoo/addons/web_field_required_invisible_manager/security/ir.model.access.csv,sha256=4LuNiSxy_AX1oa5aatU4IqbT0_CnQsM9RD-yzUHs4Qs,209
 odoo/addons/web_field_required_invisible_manager/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/web_field_required_invisible_manager/static/description/index.html,sha256=wCNbVKzuxJ2_Bgj_N3iOj8j3Bo1wpH3HCbfMG-3nzJ4,12952
 odoo/addons/web_field_required_invisible_manager/tests/__init__.py,sha256=NTCd6-WYiR37BCckTmLua-9JJZTMYbrxduMWjG7Z0_c,126
-odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py,sha256=BTL7KqS60RHrDAEpPI-_9hqb1wbCgUTcg626B2VhlA8,6341
+odoo/addons/web_field_required_invisible_manager/tests/test_web_field_required_invisible_manager.py,sha256=FZZsWUKUITz83VxBj6IVfYzj-uiX9d6tI0AIqgioZoI,6595
 odoo/addons/web_field_required_invisible_manager/views/views.xml,sha256=o1pCdKjMtgNcfmiN_rlLDWs5iV_5CV6_wYHABuA7SyE,7262
-odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/METADATA,sha256=558v1kzbSiu5XlqO0fqhBFXW4e53brWav3Qrx4AlY9Y,4138
-odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
-odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_web_field_required_invisible_manager-14.0.2.0.1.dev1.dist-info/RECORD,,
+odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/METADATA,sha256=UgcwtGXwQm03xP_lKKEFykxU9C14f0U1I-uEHU4g4NQ,4133
+odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_web_field_required_invisible_manager-14.0.2.1.0.dist-info/RECORD,,
```

